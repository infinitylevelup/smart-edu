ุฏุฑูุฏ ๐ฑ
ุงู ูู **ูุณุฎูู ููุงุ ุงุณุชุงูุฏุงุฑุฏุ ููุณุฌู ู ุขูุงุฏูู ุงุถุงูู ุดุฏู ุจู Handoff ุงุตู Smart-Edu**
ุจุฑุง *Exam Modes* ู ููุทู ุฏุฑุณ ุขุฒููู/ุณุคุงู.

> ุงู ูุณุฎู ฺฉุงููโุชุฑู ู ุฑุณูโุชุฑู ุชุนุฑู ณ ุญุงูุช ุงูุชุญุงู ุงุณุช
> ู ูุณุชูู ูุงุจู ุงุณุชูุงุฏู ุจุฑุง ุทุฑุงุญ DB, Controller, Wizard ู Blade ูโุจุงุดุฏ.

---

# ๐ Smart-Edu โ Final Handoff: Exam Modes

### (free_subject / single_subject / multi_subject)

ุงู ุณูุฏ ุฑูุชุงุฑ **ุงูุชุญุงูโูุง** ู **ููุทู ุฏุฑุณ ุฏุฑ ุณุคุงูโูุง** ุฑุง ุฏุฑ ุณู ุญุงูุช ุฑุณู ุชุนุฑู ูโฺฉูุฏ.
ุงู ุจุฎุด ุงุฒ ุงู ุจู ุจุนุฏ ุจุฎุด ุฏุงุฆู ุงุฒ ูุนูุงุฑ Smart-Edu ูุญุณูุจ ูโุดูุฏ.

---

# 1) exam_mode โ ุชุนุฑู ุฑุณู

ุงูุชุญุงูโูุง ฺฉ ุงุฒ ุณู ุญุงูุช ุฒุฑ ูุณุชูุฏ:

| Mode               | ูุงุฒ ุจู ฺฉูุงุณ  | ุฏุฑุณโูุง                                     | ุชูุถุญ ฺฉุงุฑุจุฑุฏ           |
| ------------------ | ------------- | ------------------------------------------ | ---------------------- |
| **free_subject**   | โ ูุฏุงุฑุฏ       | ฑ ุฏุฑุณ ุชูุณุท ูุฒุงุฑุฏ ธ ูุฑุญููโุง ุงูุชุฎุงุจ ูโุดูุฏ | ุขุฒููู ุขุฒุงุฏ / ุฎุตูุต     |
| **single_subject** | โ ฺฉูุงุณ ูุนููู | ฑ ุฏุฑุณ (ุฏุฑุณ ฺฉูุงุณ)                           | ุขุฒููู ุชฺฉโุฏุฑุณ ุฏุงุฎู ฺฉูุงุณ |
| **multi_subject**  | โ ฺฉูุงุณ ุฌุงูุน   | ฺูุฏุฏุฑุณ (ุงูุชุฎุงุจโุดููุฏู ุฏุฑ ูุฒุงุฑุฏ)            | ุขุฒููู ุฌุงูุน / ฺูุฏุฏุฑุณ   |

ููุฏ ุงูุชุญุงู:

```
exam_mode ENUM('free_subject', 'single_subject', 'multi_subject')
```

---

# 2) Mode: free_subject

## ุขุฒููู ุขุฒุงุฏ โ ุจุฏูู ฺฉูุงุณ โ ูุฒุงุฑุฏ ฺฉุงูู ธ ูุฑุญููโุง

### ูฺฺฏโูุง

* `classroom_id = NULL`
* `exam_mode = 'free_subject'`
* ุขุฒููู ุจู ูฺ ฺฉูุงุณ ุฎุงุต ูุตู ูุณุช.

### ุฑูุชุงุฑ ูุฒุงุฑุฏ (ธ ูุฑุญูู ฺฉุงูู)

ูุฑุงุญู:
`section โ grade โ branch โ field โ subfield โ subject_type โ subject โ settings`

### ุฑูุชุงุฑ ุฏุฑุณ

* ุฏุฑ ูพุงุงู ูุฒุงุฑุฏ **ฺฉ ุฏุฑุณ ุงูุชุฎุงุจ ูโุดูุฏ**.
* ุงู ุขุฒููู ููุดู **ุชฺฉโุฏุฑุณ** ุจุงู ูโูุงูุฏ.

### ุณูุงูโูุง

* `subject_id` ุณุคุงู **ุงุชููุงุชฺฉ** ุงุฒ exam ุณุช ูโุดูุฏ.
* ุฏุฑ ูุฑู ุณุคุงู dropdown ุงูุชุฎุงุจ ุฏุฑุณ **ูุฌูุฏ ูุฏุงุฑุฏ**.

### ุฏูู ูุนูุงุฑ

* ุงูุนุทุงู ฺฉุงูู ุฎุงุฑุฌ ุงุฒ ฺฉูุงุณ
* ุชููุฏ ุขุฒููู ุขุฒุงุฏ ุง ูุณุฎูโูุง ูุจุญุซ/ูุตู

---

# 3) Mode: single_subject

## ุขุฒููู ุชฺฉโุฏุฑุณู ฺฉูุงุณ โ ุณุฑุนโุชุฑ ุงุฒ ูุฒุงุฑุฏ ุขุฒุงุฏ

### ูฺฺฏโูุง

* `classroom_id โ NULL`
* `exam_mode = 'single_subject'`
* ฺฉูุงุณ ูุนููู ุฏููุงู **ฺฉ ุฏุฑุณ** ุฏุงุฑุฏ.

### ุฑูุชุงุฑ ูุฒุงุฑุฏ

* taxonomy ุจูโุตูุฑุช ุงุชููุงุชฺฉ ุงุฒ ฺฉูุงุณ ูพุฑ ูโุดูุฏ:

  * section, grade, branch, field, subfield, subject
* ูุฒุงุฑุฏ ุจุณุงุฑ ฺฉูุชุงู ูโุดูุฏ (ููุท ุชูุธู ูุงูุ ุฒูุงูุ ุชูุธูุงุช ุขุฒููู)

### ุฏุฑุณ

* ุฏุฑุณ ุขุฒููู = ููุงู ุฏุฑุณ ฺฉูุงุณ.

### ุณูุงูโูุง

* `subject_id` ุณุคุงู = ุฏุฑุณ ฺฉูุงุณ (ุงุชููุงุชฺฉ)
* dropdown ุฏุฑุณ ููุงุด ุฏุงุฏู ููโุดูุฏ.

---

# 4) Mode: multi_subject

## ุขุฒููู ุฌุงูุน โ ฺฉูุงุณ ุฌุงูุน โ ฺูุฏุฏุฑุณ ุงูุชุฎุงุจ

### ูฺฺฏโูุง

* `classroom_id โ NULL`
* `exam_mode = 'multi_subject'`
* ฺฉูุงุณ ุฌุงูุน ุจู ฺูุฏ subject ูุชุตู ุงุณุช.

### ุฑูุชุงุฑ ูุฒุงุฑุฏ

1. taxonomy ุงููู ุงุฒ ฺฉูุงุณ ูพุฑ ูโุดูุฏ.
2. ูุฑุญูู ุงูุชุฎุงุจ ฺูุฏุฏุฑุณ:

   * ูุนูู ูุดุฎุต ูโฺฉูุฏ ฺฉุฏุงู ุฏุฑุณโูุง ุฏุฑ ุงู ุขุฒููู ุฏุฎู ูุณุชูุฏ.
   * ุงู ูุณุช ุฏุฑ pivot `exam_subject` ุฐุฎุฑู ูโุดูุฏ.

### ุณูุงูโูุง

* `subject_id` ุจุฑุง ูุฑ ุณุคุงู **ุงูุฒุงู** ุงุณุช.
* ููุฏุงุฑ ุขู ุจุงุฏ ฺฉ ุงุฒ ุฏุฑุณโูุง ุจุงุดุฏ ฺฉู ุฏุฑ ูุฒุงุฑุฏ ุจุฑุง exam ุงูุชุฎุงุจ ุดุฏูโุงูุฏ.

### ูุฑู ุณุคุงู

* dropdown ุงูุชุฎุงุจ ุฏุฑุณ โ **ุงูุฒุงู**
* ฺฏุฒููโูุง = ููุท ุฏุฑุณโูุง ููู exam.

### ูพุงูโูุง ุฎุทุง

* ุงฺฏุฑ ุฏุฑุณ ุงูุชุฎุงุจ ูุดูุฏ:

  > ยซุจุฑุง ุงู ุขุฒููู ุฌุงูุนุ ุงูุชุฎุงุจ ุฏุฑุณ ุงูุฒุงู ุงุณุช.ยป
* ุงฺฏุฑ ุฏุฑุณ ุฎุงุฑุฌ ุงุฒ ูุณุช ุจุงุดุฏ:

  > ยซุฏุฑุณ ุงูุชุฎุงุจโุดุฏู ุจุฑุง ุงู ุณุคุงู ุฌุฒุก ุฏุฑุณโูุง ุชุนุฑูโุดุฏู ุจุฑุง ุงู ุขุฒููู ูุณุช.ยป

---

# 5) ุฑูุชุงุฑ `subject_id` ุณุคุงู โ ุฌุฏูู ุชุตููโฺฏุฑ ููุง

| exam_mode          | ููุฏุงุฑ subject_id ุณุคุงู        | UI               |
| ------------------ | ---------------------------- | ---------------- |
| **free_subject**   | ุงุฒ exam (ุงุชููุงุชฺฉ)           | โ dropdown ูุฏุงุฑุฏ |
| **single_subject** | ุงุฒ classroom/exam (ุงุชููุงุชฺฉ) | โ dropdown ูุฏุงุฑุฏ |
| **multi_subject**  | ุงุฒ request โ ุงูุฒุงู          | โ dropdown ุฏุงุฑุฏ  |

---

# 6) ุชฺฉูู Metadata ุณุคุงู (ุฏุฑ ูุฑ ุณู Mode ฺฉุณุงู)

ุฒุฑููุฏูุง ูุชุงุฏุชุง ุขููุฒุด:

| ููุฏ             | ุชูุถุญ                                                          |        |               |
| ---------------- | -------------------------------------------------------------- | ------ | ------------- |
| `module_label`   | ูพูุฏูุงู / ูุตู / ูุจุญุซ                                            |        |               |
| `page_number`    | ุดูุงุฑู ุตูุญู ููุจุน                                                |        |               |
| `difficulty`     | ุณุฎุช (`easy                                                    | normal | hard` ุง ฑโต) |
| `hint`           | ุฑุงูููุง ฺฉูุชุงู                                                  |        |               |
| `solution`       | ูพุงุณุฎ ุชุดุฑุญ / ฺฉูุฏ ุชุตุญุญ                                       |        |               |
| `topic_id`       | ุงุชุตุงู ุจู ููุถูุน ุขููุฒุด (ุฏุฑ ุขูุฏู)                               |        |               |
| `resource_links` | ุขุฑุงู JSON ุงุฒ ููุงุจุน: video / pdf / leibniz_card / text / image |        |               |

ููููู JSON ุจุฑุง resource_links:

```jsonc
[
  {
    "type": "video",
    "title": "ุขููุฒุด ูพูุฏูุงู 1",
    "url": "https://aparat.com/v/123",
    "meta": { "duration_seconds": 600 },
    "order": 1
  },
  {
    "type": "pdf",
    "title": "ุฌุฒูู ูุตู ุงูู",
    "url": "/storage/pdfs/ch1.pdf",
    "meta": { "page_from": 10, "page_to": 18 },
    "order": 2
  }
]
```

---

# 7) ุฑูุชุงุฑ Controller ููฺฏุงู ุฐุฎุฑู ุณุคุงู

### free_subject / single_subject:

```php
$payload['subject_id'] = $exam->subject_id;
```

### multi_subject:

```php
$payload['subject_id'] = $request->subject_id;

$valid = $exam->subjects->pluck('id')->toArray();
abort_unless(in_array($payload['subject_id'], $valid), 422);
```

---

# 8) Checkpoint: ูุงุฒูุง ุจุฑุง ูพุงุฏูโุณุงุฒ

* [ ] Migration ุณุชูู `exam_mode`
* [ ] Migration pivot `exam_subject` ุจุฑุง multi_subject
* [ ] ูุชุฏูุง ฺฉูฺฉ Exam:

  * `isFree()`
  * `isSingle()`
  * `isMulti()`
* [ ] Blade ูุฒุงุฑุฏ ุงุตูุงุญ ุดูุฏ ุทุจู mode
* [ ] QuestionController ููุทู subject id ูุทุงุจู ุฌุฏูู ุชุตููโฺฏุฑ ูพุงุฏู ฺฉูุฏ
* [ ] Blade ุณุคุงู:

  * ุฏุฑ free + single: ุฏุฑุณ ุฑุง ูุฎู ฺฉูุฏ
  * ุฏุฑ multi: dropdown ููุงุด ุฏูุฏ

---

# 9) ุฎูุงุตูู ฺฉโุฌูููโุง ุจุฑุง ูุฑ Mode

### free_subject

> ุขุฒููู ุขุฒุงุฏ + ุจุฏูู ฺฉูุงุณ + ุชฺฉโุฏุฑุณ + ูุฒุงุฑุฏ ฺฉุงูู ธูุฑุญููโุง.

### single_subject

> ุขุฒููู ุชฺฉโุฏุฑุณ + ูุงุฒููุฏ ฺฉูุงุณ ูุนููู + ุฏุฑุณ ุซุงุจุช ฺฉูุงุณ.

### multi_subject

> ุขุฒููู ุฌุงูุน + ูุงุฒููุฏ ฺฉูุงุณ ุฌุงูุน + ฺูุฏุฏุฑุณ ุงูุชุฎุงุจ + ุงูุชุฎุงุจ ุฏุฑุณ ุจุฑุง ูุฑ ุณุคุงู ุงูุฒุงู.

---

ุงฺฏุฑ ูโุฎูุงู:

๐ง ูุณุฎู migration ุขูุงุฏู ฺฉููุ
๐จ ุง Blade ุงูุชุฎุงุจ ุฏุฑุณ ุฑุง ุทุฑุงุญ ฺฉููุ
๐ง ุง ูููฺุงุฑุช ูุฒุงุฑุฏ ธูุฑุญููโุง ุฌุฏุฏุ

ููุท ุจฺฏู:
**ยซูุฑุญููู ุจุนุฏ ุฑุง ุดุฑูุน ฺฉูยป**
