=======================================================================
ğŸ¤– AI ASSISTANT REPORT
Generated: 2025-12-08 21:09:25
Input file: project_file_list_2025-12-08_205900.md
Project: smart-edu
Total Files: 258
=======================================================================


----------------------------------------------------------------------
âŒ FILE NOT FOUND: Generated: 2025-12-08 20:59:00
----------------------------------------------------------------------


----------------------------------------------------------------------
âŒ FILE NOT FOUND: Project: smart-edu
----------------------------------------------------------------------


----------------------------------------------------------------------
âŒ FILE NOT FOUND: Total Categories: 13
----------------------------------------------------------------------


----------------------------------------------------------------------
ğŸ“„ FILE 4: AdminAuthController.php
ğŸ“ PATH: app/Http/Controllers/Admin/AdminAuthController.php
ğŸ“ SIZE: 3,093 bytes
ğŸ•’ MODIFIED: 2025-12-08 15:35:44
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Models\Role;
use App\Services\OTPService;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Str;

class AdminAuthController extends Controller
{
    public function __construct(private OTPService $otpService)
    {
    }

    public function showLogin()
    {
        return view('dashboard.admin.login');
    }

    private function normalizePhone(string $phone): string
    {
        $phone = trim($phone);
        $phone = preg_replace('/\s+/', '', $phone);
        $phone = preg_replace('/^(\+98|98)/', '', $phone);

        if (str_starts_with($phone, '0')) {
            $phone = substr($phone, 1);
        }

        return $phone;
    }

    public function sendOtp(Request $request)
    {
        $request->validate([
            'phone' => 'required|regex:/^9\d{9}$/',
        ]);

        $phone = $this->normalizePhone($request->phone);

        $user = User::where('phone', $phone)->first();
        if (!$user || ($user->status ?? null) !== 'admin') {
            return response()->json(['message' => 'Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ø§Ø¯Ù…ÛŒÙ† Ù†ÛŒØ³Øª.'], 403);
        }

        $this->otpService->send($phone);

        return response()->json([
            'status'  => 'ok',
            'message' => 'Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ† Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.'
        ]);
    }

    public function verifyOtp(Request $request)
    {
        $request->validate([
            'phone' => 'required|regex:/^9\d{9}$/',
            'code'  => 'required|digits:6',
        ]);

        $phone = $this->normalizePhone($request->phone);

        $user = User::where('phone', $phone)->first();
        if (!$user || ($user->status ?? null) !== 'admin') {
            return response()->json(['message' => 'Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ø§Ø¯Ù…ÛŒÙ† Ù†ÛŒØ³Øª.'], 403);
        }

        if (!$this->otpService->verify($phone, $request->code)) {
            return response()->json(['message' => 'Ú©Ø¯ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.'], 422);
        }

        Auth::login($user);
        $request->session()->regenerate();
        $request->session()->regenerateToken();

        // âœ… 1) Ù†Ù‚Ø´ admin Ø±Ø§ Ø¨Ø³Ø§Ø² ÛŒØ§ Ø¨Ú¯ÛŒØ±
        $adminRole = Role::firstOrCreate(
            ['slug' => 'admin'],
            [
                'id'        => (string) Str::uuid(),
                'name'      => 'Ø§Ø¯Ù…ÛŒÙ†',
                'is_active' => true,
            ]
        );

        // âœ… 2) Ù†Ù‚Ø´ admin Ø±Ø§ Ø¯Ø± pivot ÙˆØµÙ„ Ú©Ù† (ØªÚ©â€ŒÙ†Ù‚Ø´ÛŒ)
        $user->roles()->sync([$adminRole->id]);

        // âœ… 3) Ù†Ù‚Ø´ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø³Ø§ÛŒØ¯Ø¨Ø§Ø±/ÙˆØ±ÙˆØ¯ Ø±Ø§ Ù‡Ù… Ø³Øª Ú©Ù†
        if (($user->selected_role ?? null) !== 'admin') {
            $user->selected_role = 'admin';
            $user->save();
        }

        return response()->json([
            'status'   => 'ok',
            'message'  => 'ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ† Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.',
            'redirect' => route('admin.dashboard'),
            'csrf'     => csrf_token(),
        ]);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 5: AdminDashboardController.php
ğŸ“ PATH: app/Http/Controllers/Admin/AdminDashboardController.php
ğŸ“ SIZE: 2,378 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:18:15
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Models\Classroom;
use App\Models\Subject;

// Taxonomy models (Ø§Ú¯Ø± Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§Øª Ù‡Ø³ØªÙ†Ø¯)
use App\Models\Section;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;
use App\Models\SubjectType;

class AdminDashboardController extends Controller
{
    public function index()
    {
        $counts = [
            'admins'     => User::where('status', 'admin')->count(),
            'teachers'   => User::where('status', 'teacher')->count(),
            'students'   => User::where('status', 'student')->count(),
            'counselors' => User::where('status', 'counselor')->count(),
            'all'        => User::count(),

            'classrooms' => \App\Models\Classroom::count(),
            'subjects'   => \App\Models\Subject::count(),

            'sections'      => class_exists(\App\Models\Section::class) ? \App\Models\Section::count() : 0,
            'grades'        => class_exists(\App\Models\Grade::class) ? \App\Models\Grade::count() : 0,
            'branches'      => class_exists(\App\Models\Branch::class) ? \App\Models\Branch::count() : 0,
            'fields'        => class_exists(\App\Models\Field::class) ? \App\Models\Field::count() : 0,
            'subfields'     => class_exists(\App\Models\Subfield::class) ? \App\Models\Subfield::count() : 0,
            'subject_types' => class_exists(\App\Models\SubjectType::class) ? \App\Models\SubjectType::count() : 0,

            'exams' => class_exists(\App\Models\Exam::class)
                ? \App\Models\Exam::count()
                : 0,
        ];

            // âœ… Ø¢Ø®Ø±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
        $latestUsers = User::latest()->take(8)->get();

        // âœ… Ø¢Ø®Ø±ÛŒÙ† Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
        $latestClassrooms = class_exists(\App\Models\Classroom::class)
            ? \App\Models\Classroom::latest()->take(8)->get()
            : collect();

        // âœ… Ø¢Ø®Ø±ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
        $latestExams = class_exists(\App\Models\Exam::class)
            ? \App\Models\Exam::latest()->take(8)->get()
            : collect();

        return view('dashboard.admin.index', compact(
            'counts',
            'latestUsers',
            'latestClassrooms',
            'latestExams'
        ));   
     }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 6: AdminUserController.php
ğŸ“ PATH: app/Http/Controllers/Admin/AdminUserController.php
ğŸ“ SIZE: 2,419 bytes
ğŸ•’ MODIFIED: 2025-12-07 12:08:57
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Http\Request;

class AdminUserController extends Controller
{
    public function index(Request $request)
    {
        $query = User::query();

        // ÙÛŒÙ„ØªØ± Ù†Ù‚Ø´
        if ($request->filled('role') && $request->role !== 'all') {
            $query->where('role', $request->role);
        }

        // Ø³Ø±Ú† (Ù†Ø§Ù… ÛŒØ§ Ø´Ù…Ø§Ø±Ù‡)
        if ($request->filled('q')) {
            $q = trim($request->q);
            $query->where(function ($sub) use ($q) {
                $sub->where('name', 'like', "%{$q}%")
                    ->orWhere('phone', 'like', "%{$q}%");
            });
        }

        $users = $query->latest()->paginate(20)->withQueryString();

        return view('dashboard.admin.users.index', [
            'users' => $users,
            'role'  => $request->role ?? 'all',
            'q'     => $request->q ?? '',
        ]);
    }

    public function show(string $id)
    {
        $user = User::findOrFail($id);

        return view('dashboard.admin.users.show', compact('user'));
    }

    /**
     * Ø¢Ù¾Ø¯ÛŒØª Ø³Ø±ÛŒØ¹ (ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ ÛŒØ§ ØªØºÛŒÛŒØ± Ù†Ù‚Ø´)
     * Ø¯Ø± ÙØ±Ù… updateØŒ ÙÙ‚Ø· ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨ÙØ±Ø³ØªÛŒ ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†
     */
    public function update(Request $request, string $id)
    {
        $user = User::findOrFail($id);

        $data = $request->validate([
            'is_active' => 'nullable|boolean',
            'role'      => 'nullable|in:admin,teacher,student,counselor',
            'name'      => 'nullable|string|max:255',
        ]);

        // checkbox Ø§Ú¯Ø± Ù†ÛŒØ§Ø¯ØŒ Ø¯Ø³Øª Ù†Ø²Ù†
        if (!$request->has('is_active')) {
            unset($data['is_active']);
        }

        $user->update($data);

        return back()->with('success', 'Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }

    public function destroy(string $id)
    {
        $user = User::findOrFail($id);

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ø°Ù Ø®ÙˆØ¯Ù Ø§Ø¯Ù…ÛŒÙ†
        if (auth()->id() === $user->id) {
            return back()->with('error', 'Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø­Ø³Ø§Ø¨ Ø®ÙˆØ¯ØªØ§Ù† Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯.');
        }

        $user->delete();

        return back()->with('success', 'Ú©Ø§Ø±Ø¨Ø± Ø­Ø°Ù Ø´Ø¯.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 7: BaseTaxonomyController.php
ğŸ“ PATH: app/Http/Controllers/Admin/BaseTaxonomyController.php
ğŸ“ SIZE: 5,155 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:25:41
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Validation\Rule;   // âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯

abstract class BaseTaxonomyController extends Controller
{
    // âœ… Ø¨Ø§ Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯Øª Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø´Ø¯
    protected string $modelClass;   // Model::class
    protected string $viewPath;     // e.g. "dashboard.admin.taxonomies.sections"
    protected string $routeName;    // e.g. "admin.sections"
    protected array  $validation;   // rules

    protected array  $listColumns = ['name_fa','slug','sort_order','is_active'];
    protected array  $formColumns = ['name_fa','slug','sort_order','is_active'];

    // Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ (Ø¯Ø± ÙØ±Ø²Ù†Ø¯ override Ù…ÛŒâ€ŒÚ©Ù†ÛŒ)
    protected array $sortable = ['name_fa','slug','sort_order','is_active','value'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';


    // Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ Ø¹Ù†ÙˆØ§Ù† Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø¯ÛŒØŒ ØªÙˆ Ú©Ù†ØªØ±Ù„Ø± ÙØ±Ø²Ù†Ø¯ Ø³Øª Ú©Ù†
    protected ?string $title = null;

    // Ø§Ú¯Ø± FK Ù„Ø§Ø²Ù… Ø¯Ø§Ø±ÛŒØŒ Ø§ÛŒÙ† Ù…ØªØ¯ Ø±Ø§ override Ú©Ù†
    protected function parentData(): array { return []; }

    protected function model()
    {
        return app($this->modelClass);
    }

    public function index()
    {
        $model = $this->modelClass;

        $sort = request('sort', $this->defaultSort);
        $dir  = request('dir',  $this->defaultDir);

        // Ø§Ù…Ù†ÛŒØª: ÙÙ‚Ø· Ø±ÙˆÛŒ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ whitelist Ø§Ø¬Ø§Ø²Ù‡ Ø¨Ø¯Ù‡
        if (!in_array($sort, $this->sortable)) {
            $sort = $this->defaultSort;
        }

        $dir = strtolower($dir) === 'desc' ? 'desc' : 'asc';

        $items = $model::orderBy($sort, $dir)->paginate(20)->withQueryString();

        return view($this->viewPath . '.index', [
            'items'       => $items,
            'listColumns' => $this->listColumns,
            'routeName'   => $this->routeName,
            'title'       => $this->title(),
            'sort'        => $sort,   // âœ… Ø¨ÙØ±Ø³Øª Ø¨Ù‡ ÙˆÛŒÙˆ
            'dir'         => $dir,
        ]);
    }



    public function create()
    {
        return view($this->viewPath . '.create', array_merge([
            'routeName'   => $this->routeName,
            'formColumns' => $this->formColumns,
            'title'       => $this->title(),
        ], $this->parentData()));
    }

    public function store(Request $request)
    {
        $data = $request->validate($this->validation);

        // UUID
        if (empty($data['id'])) {
            $data['id'] = (string) Str::uuid();
        }

        $model = $this->modelClass;
        $model::create($data);

        return redirect()
            ->route($this->routeName . '.index')
            ->with('success', 'Ø¢ÛŒØªÙ… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯.');
    }

    public function edit(string $id)
    {
        $model = $this->modelClass;
        $item  = $model::findOrFail($id);

        return view($this->viewPath . '.edit', array_merge([
            'item'        => $item,
            'routeName'   => $this->routeName,
            'formColumns' => $this->formColumns,
            'title'       => $this->title(),
        ], $this->parentData()));
    }

    public function update(Request $request, string $id)
    {
        $model = $this->modelClass;
        $item  = $model::findOrFail($id);

        $rules = [];

        foreach ($this->validation as $field => $rule) {

            // Ø§Ú¯Ø± rule Ø¨Ù‡ ØµÙˆØ±Øª string Ø¨ÙˆØ¯ Ùˆ unique Ø¯Ø§Ø´Øª
            if (is_string($rule) && str_contains($rule, 'unique:')) {

                // example: unique:grades,slug
                // table=grades , column=slug
                preg_match('/unique:([^,]+),([^,|]+)/', $rule, $m);
                $table  = $m[1] ?? null;
                $column = $m[2] ?? $field;

                // Ø¨Ù‚ÛŒÙ‡ rule Ù‡Ø§ (ØºÛŒØ± Ø§Ø² unique)
                $otherRules = collect(explode('|', $rule))
                    ->reject(fn($r) => str_starts_with($r, 'unique:'))
                    ->values()
                    ->all();

                // unique Ø¨Ø§ ignore
                $rules[$field] = array_merge(
                    $otherRules,
                    [ \Illuminate\Validation\Rule::unique($table, $column)->ignore($id) ]
                );

            } else {
                // Ø¨Ù‚ÛŒÙ‡ rule Ù‡Ø§ Ù…Ø«Ù„ Ù‚Ø¨Ù„
                $rules[$field] = $rule;
            }
        }

        $data = $request->validate($rules);

        $item->update($data);

        return redirect()
            ->route($this->routeName . '.index')
            ->with('success', 'Ø¢ÛŒØªÙ… Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }


    public function destroy(string $id)
    {
        $model = $this->modelClass;
        $item  = $model::findOrFail($id);

        $item->delete();

        return back()->with('success', 'Ø¢ÛŒØªÙ… Ø­Ø°Ù Ø´Ø¯.');
    }

    protected function title(): string
    {
        if ($this->title) return $this->title;

        return class_basename($this->modelClass);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 8: BranchController.php
ğŸ“ PATH: app/Http/Controllers/Admin/BranchController.php
ğŸ“ SIZE: 1,108 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:25:18
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Branch;
use App\Models\Section;

class BranchController extends BaseTaxonomyController
{
    protected string $modelClass = Branch::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.branches';
    protected string $routeName  = 'admin.branches';
    protected ?string $title     = 'Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§';

    protected array $validation = [
        'section_id' => 'required|uuid|exists:sections,id',
        'slug'       => 'required|string|max:100|unique:branches,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'sections' => Section::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 9: ClassroomController.php
ğŸ“ PATH: app/Http/Controllers/Admin/ClassroomController.php
ğŸ“ SIZE: 1,610 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:11:29
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Classroom;
use Illuminate\Http\Request;

class ClassroomController extends Controller
{
    public function index(Request $request)
    {
        $q = Classroom::query();

        // Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø§Ø¯Ù‡ (Ø¹Ù†ÙˆØ§Ù†/Ú©Ø¯ Ú©Ù„Ø§Ø³)
        if ($search = $request->get('q')) {
            $q->where('title', 'like', "%{$search}%")
              ->orWhere('code', 'like', "%{$search}%");
        }

        $items = $q->latest()->paginate(20)->withQueryString();

        return view('dashboard.admin.classrooms.index', [
            'items' => $items,
        ]);
    }

    public function show(string $id)
    {
        $classroom = Classroom::findOrFail($id);

        return view('dashboard.admin.classrooms.show', [
            'classroom' => $classroom,
        ]);
    }

    public function update(Request $request, string $id)
    {
        $classroom = Classroom::findOrFail($id);

        $data = $request->validate([
            'is_active' => 'nullable|boolean',
        ]);

        $classroom->update([
            'is_active' => (bool)($data['is_active'] ?? false),
        ]);

        return back()->with('success', 'ÙˆØ¶Ø¹ÛŒØª Ú©Ù„Ø§Ø³ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }

    public function destroy(string $id)
    {
        $classroom = Classroom::findOrFail($id);
        $classroom->delete();

        return redirect()
            ->route('admin.classrooms.index')
            ->with('success', 'Ú©Ù„Ø§Ø³ Ø­Ø°Ù Ø´Ø¯.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 10: ExamController.php
ğŸ“ PATH: app/Http/Controllers/Admin/ExamController.php
ğŸ“ SIZE: 1,979 bytes
ğŸ•’ MODIFIED: 2025-12-08 12:10:03
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class ExamController extends Controller
{
    /**
     * âš ï¸ Ú†ÙˆÙ† Ù‡Ù†ÙˆØ² Ø§Ø³Ù… Ù…Ø¯Ù„ Ø¢Ø²Ù…ÙˆÙ†Øª Ù‚Ø·Ø¹ÛŒ Ù†ÛŒØ³ØªØŒ
     * Ø§ÛŒÙ† Ú©Ù†ØªØ±Ù„Ø± Ø±Ùˆ Ø·ÙˆØ±ÛŒ Ù…ÛŒâ€ŒÙ†ÙˆÛŒØ³ÛŒÙ… Ú©Ù‡ Ø§Ú¯Ø± Ù…Ø¯Ù„ Exam ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªØŒ
     * Ø®Ø·Ø§ Ù†Ø¯Ù‡ Ùˆ ØµÙØ­Ù‡ Ø®Ø§Ù„ÛŒ Ø¨Ø§Ù„Ø§ Ø¨ÛŒØ§Ø¯.
     */

    private function examModel()
    {
        return class_exists(\App\Models\Exam::class) ? \App\Models\Exam::class : null;
    }

    public function index(Request $request)
    {
        $model = $this->examModel();

        $items = $model
            ? $model::latest()->paginate(20)
            : collect(); // Ø§Ú¯Ø± Ù…Ø¯Ù„ Ù†Ø¨ÙˆØ¯

        return view('dashboard.admin.exams.index', [
            'items' => $items,
        ]);
    }

    public function show(string $id)
    {
        $model = $this->examModel();
        abort_if(!$model, 404);

        $exam = $model::findOrFail($id);

        return view('dashboard.admin.exams.show', [
            'exam' => $exam,
        ]);
    }

    public function update(Request $request, string $id)
    {
        $model = $this->examModel();
        abort_if(!$model, 404);

        $exam = $model::findOrFail($id);

        $data = $request->validate([
            'is_active' => 'nullable|boolean',
        ]);

        $exam->update([
            'is_active' => (bool)($data['is_active'] ?? false),
        ]);

        return back()->with('success', 'ÙˆØ¶Ø¹ÛŒØª Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }

    public function destroy(string $id)
    {
        $model = $this->examModel();
        abort_if(!$model, 404);

        $exam = $model::findOrFail($id);
        $exam->delete();

        return redirect()
            ->route('admin.exams.index')
            ->with('success', 'Ø¢Ø²Ù…ÙˆÙ† Ø­Ø°Ù Ø´Ø¯.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 11: FieldController.php
ğŸ“ PATH: app/Http/Controllers/Admin/FieldController.php
ğŸ“ SIZE: 1,099 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:29:47
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Field;
use App\Models\Branch;

class FieldController extends BaseTaxonomyController
{
    protected string $modelClass = Field::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.fields';
    protected string $routeName  = 'admin.fields';
    protected ?string $title     = 'Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§';

    protected array $validation = [
        'branch_id'  => 'required|uuid|exists:branches,id',
        'slug'       => 'required|string|max:100|unique:fields,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'branches' => Branch::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 12: GradeController.php
ğŸ“ PATH: app/Http/Controllers/Admin/GradeController.php
ğŸ“ SIZE: 1,211 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:24:07
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Grade;
use App\Models\Section;

class GradeController extends BaseTaxonomyController
{
    protected string $modelClass = Grade::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.grades';
    protected string $routeName  = 'admin.grades';
    protected ?string $title     = 'Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§';

    protected array $validation = [
        'section_id' => 'required|uuid|exists:sections,id',
        'value'      => 'required|integer|min:1',
        'slug'       => 'required|string|max:100|unique:grades,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    // âœ… Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ù…Ø«Ù„ Ù…Ù‚Ø·Ø¹â€ŒÙ‡Ø§
    protected array $sortable = ['name_fa','slug','value','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'sections' => Section::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 13: SectionController.php
ğŸ“ PATH: app/Http/Controllers/Admin/SectionController.php
ğŸ“ SIZE: 1,791 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:21:23
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Section;
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Validation\Rule;

class SectionController extends BaseTaxonomyController
{
    protected string $modelClass = Section::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.sections';
    protected string $routeName  = 'admin.sections';
    protected ?string $title     = 'Ù…Ù‚Ø·Ø¹â€ŒÙ‡Ø§';

    protected array $validation = [
        'slug'       => 'required|string|max:100|unique:sections,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    // -----------------------------
    // âœ… Ø³ÙˆØ±Øª Ù‚Ø·Ø¹ÛŒ Ù…Ø®ØµÙˆØµ Sections
    // -----------------------------
    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    public function index()
    {
        $sort = request('sort', $this->defaultSort);
        $dir  = request('dir',  $this->defaultDir);

        if (!in_array($sort, $this->sortable)) {
            $sort = $this->defaultSort;
        }

        $dir = strtolower($dir) === 'desc' ? 'desc' : 'asc';

        $items = Section::orderBy($sort, $dir)
            ->paginate(20)
            ->withQueryString();

        return view($this->viewPath.'.index', [
            'items'     => $items,
            'routeName' => $this->routeName,
            'title'     => $this->title(),
            'sort'      => $sort,
            'dir'       => $dir,
        ]);
    }

    // Ø¨Ù‚ÛŒÙ‡ Ù…ØªØ¯Ù‡Ø§ Ø§Ø² Base Ø§Ø±Ø« Ù…ÛŒâ€ŒØ¨Ø±Ù‡ Ùˆ Ù†ÛŒØ§Ø² Ù†ÛŒØ³Øª Ú†ÛŒØ²ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒ
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 14: SubfieldController.php
ğŸ“ PATH: app/Http/Controllers/Admin/SubfieldController.php
ğŸ“ SIZE: 1,115 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:34:10
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Subfield;
use App\Models\Field;

class SubfieldController extends BaseTaxonomyController
{
    protected string $modelClass = Subfield::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.subfields';
    protected string $routeName  = 'admin.subfields';
    protected ?string $title     = 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§';

    protected array $validation = [
        'field_id'   => 'required|uuid|exists:fields,id',
        'slug'       => 'required|string|max:100|unique:subfields,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'fields' => Field::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 15: SubjectController.php
ğŸ“ PATH: app/Http/Controllers/Admin/SubjectController.php
ğŸ“ SIZE: 2,504 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:42:53
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Section;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;
use App\Models\SubjectType;
use App\Models\Subject;
use Illuminate\Http\Request;

class SubjectController extends BaseTaxonomyController
{
    protected string $modelClass = Subject::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.subjects';
    protected string $routeName  = 'admin.subjects';
    protected ?string $title     = 'Ø¯Ø±ÙˆØ³';

    protected array $validation = [
        'title_fa'        => 'required|string|max:255',
        'slug'            => 'required|string|max:255|unique:subjects,slug',
        'code'            => 'nullable|string|max:50',
        'hours'           => 'nullable|integer|min:0',
        'sort_order'      => 'nullable|integer|min:0',
        'is_active'       => 'nullable|boolean',

        'section_id'      => 'required|uuid|exists:sections,id',
        'grade_id'        => 'required|uuid|exists:grades,id',
        'branch_id'       => 'required|uuid|exists:branches,id',
        'field_id'        => 'required|uuid|exists:fields,id',
        'subfield_id'     => 'nullable|uuid|exists:subfields,id',
        'subject_type_id' => 'nullable|uuid|exists:subject_types,id',
    ];

    protected array $sortable = [
        'title_fa','slug','code','hours','sort_order','is_active','created_at'
    ];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'sections'     => Section::where('is_active', 1)->orderBy('sort_order')->get(),
            'grades'       => Grade::where('is_active', 1)->orderBy('sort_order')->get(),
            'branches'     => Branch::where('is_active', 1)->orderBy('sort_order')->get(),
            'fields'       => Field::where('is_active', 1)->orderBy('sort_order')->get(),
            'subfields'    => Subfield::where('is_active', 1)->orderBy('sort_order')->get(),
            'subjectTypes' => SubjectType::where('is_active', 1)->orderBy('sort_order')->get(),
        ];
    }

    // --------------------------
    // âœ… Ø¨Ø±Ø§ÛŒ dropdown ÙˆØ§Ø¨Ø³ØªÙ‡
    // --------------------------
    public function byGrade(string $gradeId)
    {
        $subjects = Subject::where('grade_id', $gradeId)
            ->orderBy('sort_order')
            ->get(['id','title_fa']);

        return response()->json($subjects);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 16: SubjectTaxonomyController.php
ğŸ“ PATH: app/Http/Controllers/Admin/SubjectTaxonomyController.php
ğŸ“ SIZE: 2,107 bytes
ğŸ•’ MODIFIED: 2025-12-08 11:20:24
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;

class SubjectTaxonomyController extends Controller
{
    /**
     * âœ… Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø·Ø¹
     * GET /dashboard/admin/api/grades/by-section/{section}
     */
    public function gradesBySection(string $sectionId)
    {
        $grades = Grade::query()
            ->where('section_id', $sectionId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'section_id']);

        return response()->json($grades);
    }

    /**
     * âœ… Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø·Ø¹
     * GET /dashboard/admin/api/branches/by-section/{section}
     */
    public function branchesBySection(string $sectionId)
    {
        $branches = Branch::query()
            ->where('section_id', $sectionId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'section_id']);

        return response()->json($branches);
    }

    /**
     * âœ… Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø´Ø§Ø®Ù‡
     * GET /dashboard/admin/api/fields/by-branch/{branch}
     */
    public function fieldsByBranch(string $branchId)
    {
        $fields = Field::query()
            ->where('branch_id', $branchId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'branch_id']);

        return response()->json($fields);
    }

    /**
     * âœ… Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…ÛŒÙ†Ù‡
     * GET /dashboard/admin/api/subfields/by-field/{field}
     */
    public function subfieldsByField(string $fieldId)
    {
        $subfields = Subfield::query()
            ->where('field_id', $fieldId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'field_id']);

        return response()->json($subfields);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 17: SubjectTypeController.php
ğŸ“ PATH: app/Http/Controllers/Admin/SubjectTypeController.php
ğŸ“ SIZE: 837 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:11:41
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\SubjectType;

class SubjectTypeController extends BaseTaxonomyController
{
    protected string $modelClass = SubjectType::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.subject-types';
    protected string $routeName  = 'admin.subject-types';
    protected ?string $title     = 'Ù†ÙˆØ¹ Ø¯Ø±Ø³â€ŒÙ‡Ø§';

    protected array $validation = [
        'slug'       => 'required|string|max:100|unique:subject_types,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 18: CounselorAttemptController.php
ğŸ“ PATH: app/Http/Controllers/Counselor/CounselorAttemptController.php
ğŸ“ SIZE: 1,083 bytes
ğŸ•’ MODIFIED: 2025-12-03 02:09:06
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;
use App\Models\Attempt;

class CounselorAttemptController extends Controller
{
    public function index($studentId)
    {
        $attempts = Attempt::where('student_id', $studentId)
            ->with('exam')
            ->latest()
            ->paginate(10);

        return view('dashboard.counselor.attempts.index', compact('attempts', 'studentId'));
    }

    public function show(Attempt $attempt)
    {
        $attempt->load(['exam', 'answers.question']);
        return view('dashboard.counselor.attempts.show', compact('attempt'));
    }

    public function analyze(Attempt $attempt)
    {
        $attempt->load(['exam', 'answers.question']);
        return view('dashboard.counselor.attempts.analyze', compact('attempt'));
    }

    public function storeAnalysis(Attempt $attempt)
    {
        // Ø¨Ø¹Ø¯Ø§Ù‹ Ù…Ù†Ø·Ù‚ Ø°Ø®ÛŒØ±Ù‡ ØªØ­Ù„ÛŒÙ„ Ø±Ùˆ Ù…ÛŒâ€ŒÙ†ÙˆÛŒØ³ÛŒÙ…
        return redirect()->route('counselor.attempts.show', $attempt)->with('success', 'Analysis saved.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 19: CounselorDashboardController.php
ğŸ“ PATH: app/Http/Controllers/Counselor/CounselorDashboardController.php
ğŸ“ SIZE: 236 bytes
ğŸ•’ MODIFIED: 2025-12-03 02:08:47
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;

class CounselorDashboardController extends Controller
{
    public function index()
    {
        return view('dashboard.counselor.index');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 20: CounselorLearningPathController.php
ğŸ“ PATH: app/Http/Controllers/Counselor/CounselorLearningPathController.php
ğŸ“ SIZE: 630 bytes
ğŸ•’ MODIFIED: 2025-12-03 02:09:16
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;

class CounselorLearningPathController extends Controller
{
    public function index()
    {
        return view('dashboard.counselor.learning-paths.index');
    }

    public function create($studentId)
    {
        return view('dashboard.counselor.learning-paths.create', compact('studentId'));
    }

    public function store($studentId)
    {
        // Ø¨Ø¹Ø¯Ø§Ù‹ Ù…Ù†Ø·Ù‚ Ø³Ø§Ø®Øª Ù…Ø³ÛŒØ± Ø±Ùˆ Ù…ÛŒâ€ŒÙ†ÙˆÛŒØ³ÛŒÙ…
        return redirect()->route('counselor.learning-paths.index')->with('success', 'Learning path created.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 21: CounselorProfileController.php
ğŸ“ PATH: app/Http/Controllers/Counselor/CounselorProfileController.php
ğŸ“ SIZE: 489 bytes
ğŸ•’ MODIFIED: 2025-12-03 02:09:23
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;
use Illuminate\Support\Facades\Auth;

class CounselorProfileController extends Controller
{
    public function index()
    {
        $counselor = Auth::user();
        return view('dashboard.counselor.profile', compact('counselor'));
    }

    public function update()
    {
        // Ø¨Ø¹Ø¯Ø§Ù‹ Ù…Ù†Ø·Ù‚ Ø¢Ù¾Ø¯ÛŒØª Ù¾Ø±ÙˆÙØ§ÛŒÙ„
        return back()->with('success', 'Profile updated.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 22: CounselorStudentController.php
ğŸ“ PATH: app/Http/Controllers/Counselor/CounselorStudentController.php
ğŸ“ SIZE: 549 bytes
ğŸ•’ MODIFIED: 2025-12-03 02:08:56
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;
use App\Models\User;

class CounselorStudentController extends Controller
{
    public function index()
    {
        $students = User::where('role', 'student')->latest()->paginate(10);
        return view('dashboard.counselor.students.index', compact('students'));
    }

    public function show(User $student)
    {
        abort_unless($student->role === 'student', 404);
        return view('dashboard.counselor.students.show', compact('student'));
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 23: LearningPathController.php
ğŸ“ PATH: app/Http/Controllers/Student/LearningPathController.php
ğŸ“ SIZE: 9,372 bytes
ğŸ•’ MODIFIED: 2025-12-04 18:09:28
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use App\Models\Attempt;
use App\Models\Exam;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Schema;

class LearningPathController extends Controller
{
    public function index()
    {
        $student = Auth::user();

        // ==============================
        // 1) Ø¢Ø®Ø±ÛŒÙ† Attempt Ù‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
        // ==============================
        $attempts = Attempt::query()
            ->with([
                'exam.subject',
                'answers.question',
            ])
            ->where('student_id', $student->id)
            ->whereIn('status', ['submitted', 'graded', 'finished'])
            ->latest('submitted_at')
            ->take(5)
            ->get();

        // Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ù†Ø¯Ø§Ø¯Ù‡
        if ($attempts->isEmpty()) {
            $overallPercent = 0;
            $currentLevel = 1;
            $levelProgress = 0;
            $focusTopics = ['Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ø§ÙˆÙ„', 'Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ø±ÙˆÙ†Ø¯ Ø³ÙˆØ§Ù„Ø§Øª', 'Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù†'];
            $recommendedLevel = 'taghviyati';

            $suggestedExams = $this->suggestDefaultExams($student->id);

            return view('dashboard.student.learning-path', compact(
                'overallPercent',
                'currentLevel',
                'levelProgress',
                'focusTopics',
                'recommendedLevel',
                'suggestedExams'
            ));
        }

        // ==============================
        // 2) Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ù¾ÛŒØ´Ø±ÙØª Ùˆ Level
        // ==============================
        $overallPercent = round($attempts->avg(fn($a) => (float) ($a->percent ?? 0)));

        $currentLevel = max(1, (int) floor($overallPercent / 25) + 1);
        $currentLevel = min($currentLevel, 5);

        $levelProgress = $overallPercent % 25;
        $levelProgress = round(($levelProgress / 25) * 100);

        // ==============================
        // 3) Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù
        // ==============================
        $wrongAnswers = $attempts
            ->flatMap(fn($a) => $a->answers()->get())   // âœ… FIX HERE
            ->filter(fn($ans) => (int) $ans->is_correct === 0);
            // ->values();
        $weakSubjects = $wrongAnswers
            ->groupBy(fn($ans) =>
                optional($ans->question->exam->subject)->title
                ?? optional($ans->question->exam->subject)->name
                ?? 'Ø¨Ø¯ÙˆÙ† Ø¯Ø±Ø³'
            )
            ->map->count()
            ->sortDesc()
            ->keys()
            ->take(2)
            ->values()
            ->all();

        $weakTypes = $wrongAnswers
            ->groupBy(fn($ans) => $ans->question->type ?? 'unknown')
            ->map->count()
            ->sortDesc()
            ->keys()
            ->take(2)
            ->values()
            ->map(function ($t) {
                return match ($t) {
                    'mcq'        => 'ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Û´ Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ',
                    'true_false' => 'ØµØ­ÛŒØ­/ØºÙ„Ø·',
                    'fill_blank' => 'Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ',
                    'essay'      => 'ØªØ´Ø±ÛŒØ­ÛŒ',
                    default      => 'Ø³ÙˆØ§Ù„Ø§Øª ØªØ±Ú©ÛŒØ¨ÛŒ',
                };
            })
            ->all();

        $weakDifficulties = $wrongAnswers
            ->groupBy(fn($ans) => $ans->question->difficulty ?? 'medium')
            ->map->count()
            ->sortDesc()
            ->keys()
            ->take(1)
            ->values()
            ->map(function ($d) {
                return match ($d) {
                    'easy'  => 'Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø§Ø¯Ù‡ (ØªÙ…Ø±Ú©Ø² Ø±ÙˆÛŒ Ø¯Ù‚Øª)',
                    'hard'  => 'Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø®Øª (Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ† Ø¨ÛŒØ´ØªØ±)',
                    default => 'Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªÙˆØ³Ø· (ØªÙ‚ÙˆÛŒØª Ù¾Ø§ÛŒÙ‡)',
                };
            })
            ->all();

        $focusTopics = array_values(array_unique(array_filter([
            ...array_map(fn($s) => "Ø¶Ø¹Ù Ø¯Ø± Ø¯Ø±Ø³: " . $s, $weakSubjects),
            ...array_map(fn($t) => "ØªÙ‚ÙˆÛŒØª Ù…Ù‡Ø§Ø±Øª: " . $t, $weakTypes),
            ...$weakDifficulties,
        ])));

        $focusTopics = array_slice($focusTopics, 0, 3);

        if (count($focusTopics) < 3) {
            $focusTopics = array_merge($focusTopics, [
                'Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù† Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†',
                'Ù…Ø±ÙˆØ± ØªÙˆØ¶ÛŒØ­Ø§Øª Ø³ÙˆØ§Ù„Ø§Øª ØºÙ„Ø·',
                'ØªÚ©Ø±Ø§Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØªØ§Ù‡',
            ]);
            $focusTopics = array_slice($focusTopics, 0, 3);
        }

        // ==============================
        // 4) Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø³Ø·Ø­ Ú©Ù„ÛŒ
        // ==============================
        $recommendedLevel = match (true) {
            $overallPercent >= 85 => 'olympiad',
            $overallPercent >= 60 => 'konkur',
            default               => 'taghviyati',
        };

        // ==============================
        // 5) 3 Ø¢Ø²Ù…ÙˆÙ† Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² DB
        // ==============================
        $suggestedExams = $this->suggestNextExams(
            studentId: $student->id,
            attempts: $attempts,
            overallPercent: $overallPercent,
            weakSubjects: $weakSubjects
        );

        return view('dashboard.student.learning-path', compact(
            'overallPercent',
            'currentLevel',
            'levelProgress',
            'focusTopics',
            'recommendedLevel',
            'suggestedExams'
        ));
    }


    /**
     * Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ 3 Ø¢Ø²Ù…ÙˆÙ†:
     * 1) Ø³Ø®Øªâ€ŒØªØ± / Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ØªØ±
     * 2) Ù…Ø´Ø§Ø¨Ù‡ Ø¨Ø±Ø§ÛŒ Ø±Ú©ÙˆØ±Ø¯
     * 3) Ú©ÙˆØªØ§Ù‡ ØªÙ‚ÙˆÛŒØªÛŒ
     */
private function suggestNextExams(int $studentId, $attempts, int $overallPercent, array $weakSubjects)
{
    $user = Auth::user();

    $classroomIds = $user->classrooms?->pluck('id') ?? collect();

    $doneExamIds = Attempt::where('student_id', $studentId)
        ->whereIn('status', ['submitted', 'graded', 'finished'])
        ->pluck('exam_id')
        ->unique();

    // âœ… base Ù…Ù‚Ø§ÙˆÙ…
    $base = Exam::query()
        ->withCount('questions')
        ->where('is_published', 1)
        ->where('is_active', 1)
        ->whereNotIn('id', $doneExamIds)
        ->when(Schema::hasColumn('exams','start_at'), function ($q) {
            $q->where(function ($x) {
                $x->whereNull('start_at')
                  ->orWhere('start_at', '<=', now());
            });
        })
        ->where(function ($q) use ($classroomIds) {

            if (Schema::hasColumn('exams','scope')) {
                $q->whereIn('scope', ['free', 'public', 'general', 'all'])
                  ->orWhereNull('scope');
            } else {
                $q->whereRaw('1=1');
            }

            if ($classroomIds->isNotEmpty() && Schema::hasColumn('exams','classroom_id')) {
                $q->orWhereIn('classroom_id', $classroomIds);
            }
        });

    $lastExam      = $attempts->first()?->exam;
    $lastLevel     = $lastExam->level ?? null;
    $lastSubjectId = $lastExam->subject_id ?? null;

    // 1) Ø³Ø®Øªâ€ŒØªØ±
    $harder = (clone $base)
        ->when(true, function ($q) use ($overallPercent) {
            if ($overallPercent >= 85) $q->where('level', 'olympiad');
            elseif ($overallPercent >= 60) $q->where('level', 'konkur');
            else $q->where('level', 'taghviyati');
        })
        ->when($lastSubjectId, fn($q) => $q->where('subject_id', $lastSubjectId))
        ->latest()
        ->first();

    // 2) Ù…Ø´Ø§Ø¨Ù‡
    $similar = (clone $base)
        ->when($lastLevel, fn($q) => $q->where('level', $lastLevel))
        ->when($lastSubjectId, fn($q) => $q->where('subject_id', $lastSubjectId))
        ->latest()
        ->first();

    // 3) Ú©ÙˆØªØ§Ù‡
    $short = (clone $base)
        ->where('level', 'taghviyati')
        ->orderBy('duration', 'asc')
        ->first();

    // Ø§Ú¯Ø± Ø¶Ø¹Ù Ø¯Ø±Ø³ Ø¯Ø§Ø±ÛŒÙ…
    if (!empty($weakSubjects)) {
        $weakExam = (clone $base)
            ->whereHas('subject', function ($q) use ($weakSubjects) {
                $q->where(function ($qq) use ($weakSubjects) {
                    $qq->whereIn('title', $weakSubjects);
                });
            })

            ->latest()
            ->first();

        $harder ??= $weakExam;
        $similar ??= $weakExam;
        $short  ??= $weakExam;
    }

    $out = collect([$harder, $similar, $short])
        ->filter()
        ->unique('id')
        ->values();

    // âœ… Ø§Ú¯Ø± Ù‡Ù†ÙˆØ² Ú©Ù…ØªØ± Ø§Ø² 3 Ø¨ÙˆØ¯ØŒ Ø§Ø² Ù‡Ø±Ú†ÛŒ Ù‡Ø³Øª Ù¾Ø± Ú©Ù†
    if ($out->count() < 3) {
        $fill = (clone $base)
            ->latest()
            ->take(3 - $out->count())
            ->get();

        $out = $out->concat($fill)->unique('id')->values();
    }

    return $out;
}




    /**
     * Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² ØªØ§Ø²Ù‡â€ŒÙˆØ§Ø±Ø¯
     */
    private function suggestDefaultExams(int $studentId)
    {
        return Exam::query()
            ->withCount('questions')
            ->where('scope', 'free')
            ->where('is_published', 1)
            ->where('is_active', 1)
            ->orderBy('duration', 'asc')
            ->take(3)
            ->get();
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 24: MyTeachersController.php
ğŸ“ PATH: app/Http/Controllers/Student/MyTeachersController.php
ğŸ“ SIZE: 1,715 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use Illuminate\Support\Facades\Auth;
use App\Models\User;

class MyTeachersController extends Controller
{
    public function index()
    {
        $student = Auth::user();

        /**
         * Ø³Ù†Ø§Ø±ÛŒÙˆÛŒ Ø±Ø§ÛŒØ¬:
         * - student Ø¨Ù‡ classrooms ÙˆØµÙ„Ù‡ (pivot classroom_student)
         * - classroom Ø¨Ù‡ teacher (ÛŒØ§ teachers) ÙˆØµÙ„Ù‡
         *
         * Ù…Ø§ Ù‡Ø± Ø¯Ùˆ Ø­Ø§Ù„Øª Ø±Ùˆ Ø³Ø§Ù¾ÙˆØ±Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
         */

        $teachers = collect();

        // Ø­Ø§Ù„Øª 1: classroom -> teacher_id (ÛŒÚ© Ù…Ø¹Ù„Ù… Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ù„Ø§Ø³)
        if (method_exists($student, 'classrooms')) {
            $classrooms = $student->classrooms()->with('teacher')->get();

            $teachers = $classrooms
                ->pluck('teacher')
                ->filter()
                ->unique('id')
                ->values();
        }

        // Ø­Ø§Ù„Øª 2: classroom -> teachers()  (Ú†Ù†Ø¯ Ù…Ø¹Ù„Ù… Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú©Ù„Ø§Ø³)
        if ($teachers->isEmpty() && method_exists($student, 'classrooms')) {
            $classrooms = $student->classrooms()->with('teachers')->get();

            $teachers = $classrooms
                ->flatMap(fn($c) => $c->teachers ?? [])
                ->filter()
                ->unique('id')
                ->values();
        }

        // Ø­Ø§Ù„Øª 3 (Fallback): Ø§Ú¯Ø± Ø±Ø§Ø¨Ø·Ù‡ Ú©Ù„Ø§Ø³ Ù†Ø¯Ø§Ø±ÛŒ Ùˆ Ù…Ø³ØªÙ‚ÛŒÙ… teacher_student Ø¯Ø§Ø±ÛŒ
        if ($teachers->isEmpty() && method_exists($student, 'teachers')) {
            $teachers = $student->teachers()->get();
        }

        return view('dashboard.student.my-teachers', compact('teachers'));
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 25: PublicExamController.php
ğŸ“ PATH: app/Http/Controllers/Student/PublicExamController.php
ğŸ“ SIZE: 4,769 bytes
ğŸ•’ MODIFIED: 2025-12-03 07:49:51
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

use App\Models\Exam;
use App\Models\Attempt;
use App\Models\Question;

class PublicExamController extends Controller
{
    // 1) Ù„ÛŒØ³Øª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ free
    public function index()
    {
        $exams = Exam::query()
            ->where('scope', 'free')
            ->where('is_published', true)
            ->where('is_active', true)
            ->withCount('questions')
            ->latest()
            ->paginate(12);

        return view('dashboard.student.exams.free.index', compact('exams'));
    }

    // 2) Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ† (Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§)
    public function show(Exam $exam)
    {
        abort_unless($exam->scope === 'free', 404);
        abort_unless($exam->is_published && $exam->is_active, 403);

        $questions = $exam->questions()->where('is_active', true)->get();

        // Ø§Ú¯Ø± attempt Ù‚Ø¨Ù„Ø§Ù‹ submitted Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ù†ØªÛŒØ¬Ù‡ Ø±Ø§ Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡
        $attempt = Attempt::query()
            ->where('exam_id', $exam->id)
            ->where('student_id', auth()->id())
            ->latest()
            ->first();

        if ($attempt && $attempt->isFinal()) {
            return redirect()->route('student.exams.free.result', [$exam->id, $attempt->id]);
        }

        return view('dashboard.student.exams.free.show', compact('exam', 'questions'));
    }

    // 3) Ø´Ø±ÙˆØ¹ attempt (Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ Ø¯Ú©Ù…Ù‡ Start Ø±Ø³Ù…ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒ)
    public function start(Exam $exam)
    {
        abort_unless($exam->scope === 'free', 404);

        $attempt = Attempt::create([
            'exam_id' => $exam->id,
            'student_id' => auth()->id(),
            'status' => 'in_progress',
            'started_at' => now(),
        ]);

        return redirect()->route('student.exams.free.show', $exam->id);
    }

    // 4) submit Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ + Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù…Ø±Ù‡
    public function submit(Request $request, Exam $exam)
    {
        abort_unless($exam->scope === 'free', 404);

        $questions = $exam->questions()->where('is_active', true)->get();

        // attempt Ø¬Ø§Ø±ÛŒ ÛŒØ§ Ø¬Ø¯ÛŒØ¯
        $attempt = Attempt::query()->firstOrCreate(
            [
                'exam_id' => $exam->id,
                'student_id' => auth()->id(),
                'status' => 'in_progress',
            ],
            [
                'started_at' => now(),
            ]
        );

        $answers = [];
        $scoreObtained = 0;
        $scoreTotal = 0;

        foreach ($questions as $q) {
            $scoreTotal += (int)($q->score ?? 1);

            $key = "q_{$q->id}";

            if ($q->type === 'mcq') {
                $ans = $request->input($key); // a/b/c/d
                if ($ans) {
                    $answers[$q->id] = $ans;

                    // correct_option legacy ÛŒØ§ correct_answer Ø¬Ø¯ÛŒØ¯
                    $correct = $q->correct_option ?? (is_array($q->correct_answer) ? $q->correct_answer[0] : null);
                    if ($correct && $ans === $correct) {
                        $scoreObtained += (int)($q->score ?? 1);
                    }
                }
            }

            elseif ($q->type === 'true_false') {
                // Ù…ÛŒâ€ŒØ¢ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª "true"/"false"
                $ansRaw = $request->input($key);
                if ($ansRaw !== null) {
                    $ans = filter_var($ansRaw, FILTER_VALIDATE_BOOLEAN, FILTER_NULL_ON_FAILURE);
                    $answers[$q->id] = $ans;

                    if (!is_null($q->correct_tf) && $ans === (bool)$q->correct_tf) {
                        $scoreObtained += (int)($q->score ?? 1);
                    }
                }
            }
        }

        $percent = $scoreTotal > 0 ? round(($scoreObtained / $scoreTotal) * 100, 2) : 0;

        $attempt->update([
            'answers' => $answers,
            'status' => 'submitted',
            'submitted_at' => now(),
            'finished_at' => now(),
            'score_obtained' => $scoreObtained,
            'score_total' => $scoreTotal,
            'percent' => $percent,
            'score' => $scoreObtained, // Ø³ØªÙˆÙ† score decimal
        ]);

        return redirect()->route('student.exams.free.result', [$exam->id, $attempt->id]);
    }

    // 5) ØµÙØ­Ù‡ Ù†ØªÛŒØ¬Ù‡
    public function result(Exam $exam, Attempt $attempt)
    {
        abort_unless($exam->id === $attempt->exam_id, 404);
        abort_unless($attempt->student_id === auth()->id(), 403);

        $questions = $exam->questions()->where('is_active', true)->get();

        return view('dashboard.student.exams.free.result', compact('exam','attempt','questions'));
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 26: StudentClassController.php
ğŸ“ PATH: app/Http/Controllers/Student/StudentClassController.php
ğŸ“ SIZE: 4,438 bytes
ğŸ•’ MODIFIED: 2025-12-02 11:50:46
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use App\Models\ClassRoom;  //Ø§ØµÙ„Ø§Ø­ Ø¨Ù‡ ClassRoom
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

/**
 * StudentClassController
 * ----------------------------------------------------------------
 * Ú©Ù†ØªØ±Ù„Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
 *
 * Ø§ÛŒÙ† Ú©Ù†ØªØ±Ù„Ø± Ù…Ø³Ø¦ÙˆÙ„ Ø§ÛŒÙ† Ú©Ø§Ø±Ù‡Ø§Ø³Øª:
 * 1) index        : Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¹Ø¶Ùˆ Ø´Ø¯Ù‡â€ŒÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
 * 2) show         : Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª ÛŒÚ© Ú©Ù„Ø§Ø³ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
 * 3) showJoinForm : Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¨Ø§ join_code
 * 4) join         : Ø¹Ø¶ÙˆÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ú©Ù„Ø§Ø³ Ø¨Ø§ join_code
 *
 * BladeÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ·:
 * - dashboard.student.classrooms.index
 * - dashboard.student.classrooms.show
 * - dashboard.student.join-class
 */
class StudentClassController extends Controller
{
    /**
     * Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
     * ------------------------------------------------------------
     * ÙÙ‚Ø· Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¹Ø¶Ùˆ Ø¢Ù†â€ŒÙ‡Ø§Ø³Øª Ø±Ø§ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯.
     *
     * Route:
     * GET /dashboard/student/classrooms
     * name: student.classrooms.index
     */
    public function index()
    {
        $student = Auth::user();

        // Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø¹Ø¶Ùˆ Ø´Ø¯Ù‡ + Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¹Ù„Ù…
        $classrooms = $student->classrooms()
            ->with('teacher')
            ->withCount(['students','exams'])
            ->latest()
            ->get();

        return view('dashboard.student.classrooms.index', compact('classrooms'));
    }

    /**
     * Ù†Ù…Ø§ÛŒØ´ ÛŒÚ© Ú©Ù„Ø§Ø³ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
     * ------------------------------------------------------------
     * Ø§Ù…Ù†ÛŒØª Ù…Ù‡Ù…:
     * Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² ÙÙ‚Ø· Ø§Ú¯Ø± Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ø¨Ø§Ø´Ø¯ Ø§Ø¬Ø§Ø²Ù‡ Ø¯ÛŒØ¯Ù† ØµÙØ­Ù‡ Ø±Ø§ Ø¯Ø§Ø±Ø¯.
     *
     * Route:
     * GET /dashboard/student/classrooms/{classroom}
     * name: student.classrooms.show
     */
    public function show(ClassRoom $classroom)  // âœ… Ø§ØµÙ„Ø§Ø­ Ø´Ø¯
    {
        $student = Auth::user();

        // Ú†Ú© Ø¹Ø¶ÙˆÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ú©Ù„Ø§Ø³
        $isMember = $student->classrooms()
            ->where('classroom_id', $classroom->id)
            ->exists();

        abort_unless($isMember, 403, 'Ø´Ù…Ø§ Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù†ÛŒØ³ØªÛŒØ¯.');

        // Ù„ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± ØµÙØ­Ù‡
        $classroom->load([
            'teacher',
            'exams' => fn($q) => $q->latest(),
        ]);

        return view('dashboard.student.classrooms.show', compact('classroom'));
    }

    /**
     * Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³
     * ------------------------------------------------------------
     * Route:
     * GET /dashboard/student/classrooms/join
     * name: student.classrooms.join.form
     */
    public function showJoinForm()
    {
        return view('dashboard.student.classrooms.join-class');
    }

    /**
     * Ø¹Ø¶ÙˆÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ú©Ù„Ø§Ø³ Ø¨Ø§ join_code
     * ------------------------------------------------------------
     * Flow:
     * 1) Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ join_code
     * 2) Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³
     * 3) Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¹Ø¶ÙˆÛŒØª Ø¯ÙˆØ¨Ø§Ø±Ù‡
     * 4) attach Ø¯Ø± pivot (classroom_student)
     * 5) redirect Ø¨Ù‡ Ù„ÛŒØ³Øª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
     *
     * Route:
     * POST /dashboard/student/classrooms/join
     * name: student.classrooms.join
     */
    public function join(Request $request)
    {
        $request->validate([
            'join_code' => ['required', 'string', 'exists:classrooms,join_code'],
        ]);

        $student = Auth::user();

        $classroom = Classroom::where('join_code', $request->join_code)->firstOrFail();

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¹Ø¶ÙˆÛŒØª ØªÚ©Ø±Ø§Ø±ÛŒ
        if ($student->classrooms()->where('classroom_id', $classroom->id)->exists()) {
            return back()->withErrors([
                'join_code' => 'Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù‡Ø³ØªÛŒØ¯.'
            ]);
        }

        // Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± pivot
        $student->classrooms()->attach($classroom->id);

        return redirect()->route('student.classrooms.index')
            ->with('success', 'Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ÛŒØ¯.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 27: StudentExamController.php
ğŸ“ PATH: app/Http/Controllers/Student/StudentExamController.php
ğŸ“ SIZE: 14,966 bytes
ğŸ•’ MODIFIED: 2025-12-05 22:16:33
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use App\Models\Exam;
use App\Models\Attempt;
use App\Models\AttemptAnswer;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;
use App\Services\GamificationService;

class StudentExamController extends Controller
{
    /**
     * Legacy index (backward compatible)
     * Shows free + classroom exams (only joined classrooms)
     */
public function index(Request $request)
{
    $student = Auth::user();

    // Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¹Ø¶Ùˆ Ø¢Ù†â€ŒÙ‡Ø§Ø³Øª
    $classroomIds = $student->classrooms()->pluck('classrooms.id')->toArray();

    $now = now();

    $exams = Exam::query()
        ->where(function ($q) use ($classroomIds) {

            // 1) Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ (free Ù‚Ø¯ÛŒÙ…ÛŒ)
            $q->where('exam_type', 'public')

              // 2) Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ÛŒ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¹Ø¶ÙˆØ´Ù‡
              ->orWhere(function ($q2) use ($classroomIds) {
                  $q2->whereIn('exam_type', ['class_single', 'class_comprehensive'])
                     ->whereIn('classroom_id', $classroomIds);
              });
        })
        // Ø§Ú¯Ø± Ø³ØªÙˆÙ† is_active Ø¯Ø± DB Ø¯Ø§Ø±ÛŒ (Ú©Ù‡ Ø¯Ø§Ø±ÛŒ)ØŒ ÙÙ‚Ø· ÙØ¹Ø§Ù„â€ŒÙ‡Ø§
        ->where('is_active', 1)

        // (Ø§Ø®ØªÛŒØ§Ø±ÛŒ ÙˆÙ„ÛŒ Ø®ÙˆØ¨) ÙÙ‚Ø· Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø²Ù…Ø§Ù†Ø´ Ø±Ø³ÛŒØ¯Ù‡/Ù…Ù†Ù‚Ø¶ÛŒ Ù†Ø´Ø¯Ù‡
        ->where(function ($q) use ($now) {
            $q->whereNull('start_at')->orWhere('start_at', '<=', $now);
        })
        ->where(function ($q) use ($now) {
            $q->whereNull('end_at')->orWhere('end_at', '>=', $now);
        })

        ->latest()
        ->paginate(10);

    return view('dashboard.student.exams.public', compact('exams'));
}


    /**
     * Public exams list
     */
    public function publicIndex(Request $request)
    {
        $student = Auth::user();

        $examsQuery = Exam::query()
            ->where('scope', 'free')
            ->with('classroom')
            ->withCount('questions')
            ->with(['attempts' => function ($q) use ($student) {
                $q->where('student_id', $student->id)->latest();
            }])
            ->latest();

        $exams = $examsQuery->paginate(9)->withQueryString();

        return view('dashboard.student.exams.public', compact('exams'));
    }

    /**
     * Classroom exams list (joined classrooms only)
     */
    public function classroomIndex(Request $request)
    {
        $student = Auth::user();
        $classroomIds = $student->classrooms()->pluck('classrooms.id');

        $examsQuery = Exam::query()
            ->where('scope', 'classroom')
            ->whereIn('classroom_id', $classroomIds)
            ->where(function ($pub) {
                $pub->whereNull('is_published')->orWhere('is_published', true);
            })
            ->where(function ($act) {
                $act->whereNull('is_active')->orWhere('is_active', true);
            })
            ->with('classroom')
            ->withCount('questions')
            ->with(['attempts' => function ($q) use ($student) {
                $q->where('student_id', $student->id)->latest();
            }])
            ->latest();

        if ($request->filled('classroom_id')) {
            $examsQuery->where('classroom_id', $request->classroom_id);
        }

        $exams = $examsQuery->paginate(9)->withQueryString();
        $classrooms = $student->classrooms()->get();

        return view('dashboard.student.exams.classroom', compact('exams', 'classrooms'));
    }

    /**
     * Exam details
     */
    public function show(Exam $exam)
    {
        $this->authorizeExamForStudent($exam);

        $exam->load(['classroom', 'questions']);
        $exam->difficulty = $this->normalizeDifficulty($exam->difficulty);

        $student = Auth::user();

        $lastAttempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->latest()
            ->first();

        $isFinalAttempt = $this->isFinalAttempt($lastAttempt);

        return view('dashboard.student.exams.show', compact('exam', 'lastAttempt', 'isFinalAttempt'));
    }

    /**
     * Take exam page
     */
    public function take(Exam $exam)
    {
        $this->authorizeExamForStudent($exam);

        $student = Auth::user();
        $exam->load('questions');

        if (empty($exam->duration_minutes) && !empty($exam->duration)) {
            $exam->duration_minutes = $exam->duration;
        }

        $attempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->whereNull('finished_at')
            ->latest()
            ->first();

        return view('dashboard.student.exams.take', compact('exam', 'attempt'));
    }

    /**
     * Start exam
     */
    public function start(Exam $exam)
    {
        $this->authorizeExamForStudent($exam);

        $student = Auth::user();

        $lastAttempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->latest()
            ->first();

        if ($this->isFinalAttempt($lastAttempt)) {
            return redirect()
                ->route('student.exams.show', $exam)
                ->with('warning', 'Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø´Ø±Ú©Øª Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ Ùˆ Ø§Ù…Ú©Ø§Ù† Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.');
        }

        $attempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->whereNull('finished_at')
            ->latest()
            ->first();

        if (!$attempt) {
            $attempt = Attempt::create([
                'exam_id'        => $exam->id,
                'student_id'     => $student->id,
                'answers'        => [],
                'score'          => 0,
                'percent'        => 0,
                'score_total'    => 0,
                'score_obtained' => 0,
                'started_at'     => now(),
                'finished_at'    => null,
                'submitted_at'   => null,
                'status'         => 'in_progress',
            ]);
        }

        // âœ… CHANGED: Ø¨Ù‡ØªØ±Ù‡ route model binding Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ø´Ù‡
        return redirect()->route('student.exams.take', $exam);
        // Ù‚Ø¨Ù„ÛŒ: return redirect()->route('student.exams.take', $exam->id);
    }

    /**
     * Submit exam answers + grading
     */
    public function submit(Request $request, Exam $exam, GamificationService $gamification)
    {
        $this->authorizeExamForStudent($exam);

        $request->validate([
            'answers' => ['required', 'array'],
        ]);

        $student = Auth::user();
        $exam->load('questions');

        $attempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->whereNull('finished_at')
            ->latest()
            ->firstOrFail();

        DB::transaction(function () use ($request, $exam, $attempt) {
            AttemptAnswer::where('attempt_id', $attempt->id)->delete();

            $answersInput = $request->input('answers', []);

            $scoreTotal = 0;
            $scoreObtained = 0;

            foreach ($exam->questions as $q) {
                $qScore = (int) ($q->score ?? 1);
                $scoreTotal += $qScore;

                $studentAnswer = $answersInput[$q->id] ?? null;

                $grading = $this->gradeQuestion($q, $studentAnswer, $qScore);

                AttemptAnswer::create([
                    'attempt_id'    => $attempt->id,
                    'question_id'   => $q->id,
                    'answer'        => $studentAnswer,
                    'is_correct'    => $grading['is_correct'],
                    'score_awarded' => $grading['score_awarded'],
                ]);

                $scoreObtained += $grading['score_awarded'];
            }

            $percent = $scoreTotal > 0 ? round(($scoreObtained / $scoreTotal) * 100, 2) : 0;

            $attempt->update([
                'answers'        => $answersInput,

                'score_total'    => $scoreTotal,
                'score_obtained' => $scoreObtained,

                'score'          => $scoreObtained,
                'percent'        => $percent,

                'submitted_at'   => now(),
                'finished_at'    => now(),
                'status'         => 'submitted',
            ]);
        });

        $attempt->refresh();

        $baseXp = $exam->scope === 'free' ? 20 : 25;
        $scoreXp = (int) floor(((float) $attempt->percent) / 5);
        $totalAward = $baseXp + $scoreXp;

        $gamification->awardXp(
            $student,
            'exam',
            $exam->id,
            $totalAward
        );

        return redirect()
            ->route('student.attempts.result', $attempt->id)
            ->with('success', 'Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯.');
    }

    /**
     * Attempt Result page
     */
    public function result(Attempt $attempt)
    {
        $student = Auth::user();
        abort_unless($attempt->student_id == $student->id, 403);

        $attempt->load([
            'exam.questions',
            'answers.question'
        ]);

        $exam = $attempt->exam;

        // âœ… CHANGED: Ø¨Ù‡â€ŒØµÙˆØ±Øª ØµØ±ÛŒØ­ Ø±Ø§Ø¨Ø·Ù‡ answers Ø±Ø§ Ø¨Ú¯ÛŒØ±
        // Ú†ÙˆÙ† Ø³ØªÙˆÙ† JSON Ùˆ Ø±Ø§Ø¨Ø·Ù‡ Ù‡Ù…Ù†Ø§Ù…â€ŒØ§Ù†Ø¯ Ùˆ Ù…Ù…Ú©Ù†Ù‡ Ø¨Ø§Ú¯ Ø±Ù†Ø¯ÙˆÙ… Ø¨Ø¯Ù‡
        $attemptAnswerModels = $attempt->getRelation('answers');

        return view('dashboard.student.attempts.result', [
            'attempt' => $attempt,
            'exam' => $exam,
            'attemptAnswers' => $attemptAnswerModels, // âœ… Ø±Ø§Ø¨Ø·Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ
            'legacyAnswers' => $attempt->getAttribute('answers'), // âœ… Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ JSON
        ]);
    }

    /**
     * Attempt Analysis (Phase 1 stub)
     */
    public function analysis(Attempt $attempt)
    {
        $student = Auth::user();
        abort_unless($attempt->student_id == $student->id, 403);

        $attempt->load([
            'exam',
            'answers.question'
        ]);

        $analysis = null;

        return view('dashboard.student.attempts.analysis', [
            'attempt' => $attempt,
            'exam' => $attempt->exam,
            'analysis' => $analysis,
        ]);
    }

    /**
     * Legacy attempt show â†’ redirect to result
     */
    public function attemptShow(Attempt $attempt)
    {
        return redirect()->route('student.attempts.result', $attempt->id);
    }

    protected function authorizeExamForStudent(Exam $exam): void
    {
        $student = Auth::user();

        if ($exam->scope === 'free') {
            return;
        }

        $isMember = $student->classrooms()
            ->where('classroom_id', $exam->classroom_id)
            ->exists();

        abort_unless($isMember, 403, 'Ø´Ù…Ø§ Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù†ÛŒØ³ØªÛŒØ¯.');
    }

    /**
     * Final attempt means student already submitted once
     */
    private function isFinalAttempt(?Attempt $attempt): bool
    {
        if (!$attempt) return false;

        return
            !is_null($attempt->finished_at) ||
            !is_null($attempt->submitted_at) ||
            in_array($attempt->status ?? null, ['submitted', 'graded']);
    }

    /**
     * Normalize difficulty to easy|medium|hard
     */
    private function normalizeDifficulty(?string $difficulty): string
    {
        $difficulty = strtolower(trim((string) $difficulty));

        return match ($difficulty) {
            'easy', 'low', 'simple' => 'easy',
            'hard', 'high', 'difficult' => 'hard',
            default => 'medium',
        };
    }

    /**
     * Grade a single question
     */
    private function gradeQuestion($q, $studentAnswer, int $qScore): array
    {
        $type = $q->type ?? 'mcq';

        $correctOption = $q->correct_option ?? null;
        $correctAnswer = $q->correct_answer ?? null;

        $isCorrect = null;
        $awarded = 0;

        if ($type === 'essay') {
            $isCorrect = null;
            $awarded = 0;

        } elseif ($type === 'mcq') {
            $studentKey = is_array($studentAnswer) ? ($studentAnswer[0] ?? null) : $studentAnswer;

            if (!empty($correctOption)) {
                $isCorrect = strtolower((string) $studentKey) === strtolower((string) $correctOption);
            } else {
                $correctArr = is_string($correctAnswer) ? json_decode($correctAnswer, true) : $correctAnswer;
                $correctArr = is_array($correctArr) ? $correctArr : [$correctArr];
                $isCorrect = in_array(
                    strtolower((string) $studentKey),
                    array_map(fn($v)=>strtolower((string)$v), $correctArr)
                );
            }
            $awarded = $isCorrect ? $qScore : 0;

        } elseif ($type === 'true_false') {

            // âœ… CHANGED: Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ boolean Ùˆ correct_tf
            $studentVal = $studentAnswer;
            if (is_string($studentVal)) $studentVal = strtolower($studentVal);
            if ($studentVal === 'true') $studentVal = true;
            if ($studentVal === 'false') $studentVal = false;

            // Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ correct_tf Ø§Ú¯Ø± Ù…ÙˆØ¬ÙˆØ¯ Ø¨ÙˆØ¯
            if (!is_null($q->correct_tf)) {
                $correctVal = (bool) $q->correct_tf;
            } else {
                $correctVal = $correctAnswer;
                if (is_string($correctVal)) {
                    $correctVal = strtolower($correctVal);
                    $correctVal = $correctVal === 'true';
                }
            }

            $isCorrect = (bool)$studentVal === (bool)$correctVal;
            $awarded = $isCorrect ? $qScore : 0;

        } elseif ($type === 'fill_blank') {
            $studentText = is_array($studentAnswer) ? implode(',', $studentAnswer) : (string)$studentAnswer;
            $studentParts = array_filter(array_map(fn($v)=>trim(mb_strtolower($v)), explode(',', $studentText)));

            $correctArr = is_string($correctAnswer) ? json_decode($correctAnswer, true) : $correctAnswer;
            $correctArr = is_array($correctArr) ? $correctArr : [$correctArr];
            $correctArr = array_filter(array_map(fn($v)=>trim(mb_strtolower((string)$v)), $correctArr));

            $isCorrect = false;
            foreach ($studentParts as $sp) {
                if (in_array($sp, $correctArr, true)) {
                    $isCorrect = true;
                    break;
                }
            }

            $awarded = $isCorrect ? $qScore : 0;

        } else {
            $isCorrect = false;
            $awarded = 0;
        }

        return [
            'is_correct' => $isCorrect,
            'score_awarded' => $awarded,
        ];
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 28: StudentProfileController.php
ğŸ“ PATH: app/Http/Controllers/Student/StudentProfileController.php
ğŸ“ SIZE: 1,959 bytes
ğŸ•’ MODIFIED: 2025-12-03 03:15:33
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Storage;
use Illuminate\Validation\Rule;
use App\Models\StudentGamificationProfile; // âœ… add

class StudentProfileController extends Controller
{
    public function edit()
    {
        $user = Auth::user();

        // âœ… Gamification profile (Phase A)
        $gamification = StudentGamificationProfile::firstOrCreate(
            ['student_id' => $user->id],
            ['total_xp' => 0, 'level' => 1]
        );

        return view('dashboard.student.profile', compact('user', 'gamification'));
    }

    public function update(Request $request)
    {
        $user = Auth::user();

        $validated = $request->validate([
            'name'  => ['required','string','max:255'],
            'email' => ['nullable','email','max:255', Rule::unique('users')->ignore($user->id)],
            'phone' => ['nullable','string','max:30', Rule::unique('users')->ignore($user->id)],
            'national_code' => ['nullable','string','max:20'],
            'bio' => ['nullable','string','max:1000'],
        ]);

        $user->fill($validated);
        $user->save();

        return back()->with('success', 'Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ âœ…');
    }

    public function updateAvatar(Request $request)
    {
        $user = Auth::user();

        $request->validate([
            'avatar' => ['required','image','mimes:jpg,jpeg,png,webp','max:2048'],
        ]);

        if ($user->avatar && Storage::disk('public')->exists($user->avatar)) {
            Storage::disk('public')->delete($user->avatar);
        }

        $path = $request->file('avatar')->store('avatars', 'public');

        $user->avatar = $path;
        $user->save();

        return back()->with('success', 'Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯ ğŸ“¸');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 29: DashboardController.php
ğŸ“ PATH: app/Http/Controllers/Teacher/DashboardController.php
ğŸ“ SIZE: 2,583 bytes
ğŸ•’ MODIFIED: 2025-12-05 14:17:43
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;
use Illuminate\Support\Facades\Auth; // Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙØªÙ† id Ú©Ø§Ø±Ø¨Ø± Ù„Ø§Ú¯ÛŒÙ†â€ŒØ´Ø¯Ù‡
use App\Http\Controllers\Controller;
use App\Models\Exam;
use App\Models\Question;

/**
 * Teacher Dashboard Controller
 *
 * Ø§ÛŒÙ† Ú©Ù†ØªØ±Ù„Ø± ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡â€ŒÛŒ Ø§ØµÙ„ÛŒ Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù… Ø§Ø³Øª:
 * /dashboard/teacher
 *
 * Ù‡Ø¯Ù:
 * - Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ (ØªØ¹Ø¯Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ØŒ ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ØŒ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§)
 * - Ú¯Ø±ÙØªÙ† Ú†Ù†Ø¯ Ø¢Ø²Ù…ÙˆÙ† Ø¢Ø®Ø± Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø± Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
 *
 * Ù†Ú©ØªÙ‡:
 * Ú†ÙˆÙ† Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¹Ù„Ù… Ø¨Ø§ Route::view Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´Ø¯ØŒ
 * Ù‡ÛŒÚ† Ø¯ÛŒØªØ§ÛŒÛŒ Ø¨Ù‡ ÙˆÛŒÙˆ Ù†Ù…ÛŒâ€ŒØ±Ø³ÛŒØ¯. Ø§ÛŒÙ† Ú©Ù†ØªØ±Ù„Ø± Ù‡Ù…Ø§Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ØªØ§Ù…ÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
 */
class DashboardController extends Controller
{
    /**
     * Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¹Ù„Ù…
     *
     * Ø®Ø±ÙˆØ¬ÛŒ:
     * view('dashboard.teacher.index')
     * Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§:
     * - $stats : Ø¢Ù…Ø§Ø± Ø®Ù„Ø§ØµÙ‡
     * - $recentExams : Ø¢Ø®Ø±ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
     */

public function index()
{
    $user = Auth::user();

    // Ø§Ú¯Ø± Ù¾Ø±ÙˆÙØ§ÛŒÙ„ teacher Ø¬Ø¯Ø§ Ø¯Ø§Ø±ÛŒØŒ Ø§Ø² Ø§ÙˆÙ† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
    $teacher = $user->teacher ?? null;

    // Ø§Ú¯Ø± exams.teacher_id Ø¨Ù‡ Ø¬Ø¯ÙˆÙ„ teachers ÙˆØµÙ„ Ø§Ø³Øª â†’ id Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø¹Ù„Ù…
    // Ø§Ú¯Ø± exams.teacher_id Ù‡Ù…Ø§Ù† user_id Ø§Ø³Øª â†’ id Ø®ÙˆØ¯ user
    $teacherKey = $teacher?->id ?? $user->id;

    /**
     * Ú©ÙˆØ¦Ø±ÛŒ Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù„Ù…
     */
    $examsQuery = Exam::where('teacher_id', $teacherKey);

    /**
     * stats Ø¨Ø§ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ù…Ø·Ø§Ø¨Ù‚ Blade
     */
    $stats = [
        'total_exams' => (clone $examsQuery)->count(),

        'active_exams' => (clone $examsQuery)
            ->where('is_published', true)
            ->count(),

        // ÙØ¹Ù„Ø§Ù‹ ØªØ§ ÙˆÙ‚ØªÛŒ Ù…Ø¯Ù„/Ø±Ø§Ø¨Ø·Ù‡â€ŒÛŒ Ú©Ù„Ø§Ø³ Ùˆ attempt/answer Ø±Ùˆ Ù…Ú† Ù†Ú©Ø±Ø¯ÛŒÙ…
        'students_count' => 0,
        'new_students' => 0,
        'pending_reviews' => 0,
    ];

    /**
     * Ø¢Ø®Ø±ÛŒÙ† Ûµ Ø¢Ø²Ù…ÙˆÙ† + Ø´Ù…Ø§Ø±Ø´ Ø³ÙˆØ§Ù„Ø§Øª Ùˆ Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡â€ŒÙ‡Ø§
     * Ù†Ú©ØªÙ‡: Ø¨Ø§ÛŒØ¯ Ø±ÙˆÛŒ Exam Ø±Ø§Ø¨Ø·Ù‡â€ŒÛŒ questions Ùˆ attempts ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯.
     */
    $recentExams = (clone $examsQuery)
        ->latest()
        ->withCount(['questions', 'attempts'])
        ->take(5)
        ->get();

    return view('dashboard.teacher.index', compact('stats', 'recentExams'));
}



}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 30: QuestionController.php
ğŸ“ PATH: app/Http/Controllers/Teacher/QuestionController.php
ğŸ“ SIZE: 8,003 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use Illuminate\Support\Facades\Auth;
use App\Http\Controllers\Controller;
use App\Models\Exam;
use App\Models\Question;
use Illuminate\Http\Request;

class QuestionController extends Controller
{
    // Ù„ÛŒØ³Øª Ø³ÙˆØ§Ù„Ø§Øª ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ†
    public function index(Exam $exam)
    {
        $exam->load('classroom');

        $questions = $exam->questions()->latest()->get();
        return view('dashboard.teacher.exams.questions', compact('exam','questions'));
    }

    // ÙØ±Ù… Ø§ÛŒØ¬Ø§Ø¯ Ø³ÙˆØ§Ù„ Ø¬Ø¯ÛŒØ¯
    public function create(Exam $exam)
    {
        $this->authorizeTeacherExam($exam);

        return view('dashboard.teacher.exams.questions-create', compact('exam'));
    }

    public function store(Request $request, Exam $exam)
    {
        $this->authorizeTeacherExam($exam);

        // âœ… Ù‡Ù… question (ÙØ±Ù… Ø¬Ø¯ÛŒØ¯) Ù‡Ù… question_text (legacy)
        $baseRules = [
            'type'        => 'required|in:mcq,true_false,fill_blank,essay',

            'question'      => 'required_without:question_text|string|max:2000',
            'question_text' => 'required_without:question|string|max:2000',

            'score'       => 'nullable|integer|min:1|max:100',
            'explanation' => 'nullable|string|max:2000',
        ];

        $typeRules = match ($request->type) {
            'mcq' => [
                'option_a'       => 'required|string|max:1000',
                'option_b'       => 'required|string|max:1000',
                'option_c'       => 'required|string|max:1000',
                'option_d'       => 'required|string|max:1000',
                'correct_option' => 'required|in:a,b,c,d',
            ],
            'true_false' => [
                'correct_tf' => 'required|boolean',
            ],
            'fill_blank' => [
                'correct_blanks' => 'required|string|max:2000',
            ],
            'essay' => [],
            default => []
        };

        $validated = $request->validate(array_merge($baseRules, $typeRules));

        // âœ… Ù…ØªÙ† Ø³ÙˆØ§Ù„ Ø±Ø§ Ø§Ø² Ù‡Ø± Ú©Ø¯Ø§Ù… Ú©Ù‡ Ø¢Ù…Ø¯Ù‡ Ø¨Ú¯ÛŒØ±
        $questionText = $validated['question'] ?? $validated['question_text'];

        $payload = [
            'type'          => $validated['type'],
            'question_text' => $questionText,   // âœ… Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ø³ØªÙˆÙ† ÙˆØ§Ù‚Ø¹ÛŒ DB
            'score'         => $validated['score'] ?? 1,
            'explanation'   => $validated['explanation'] ?? null,
        ];

        // reset multi-type fields
        $payload['options']        = null;
        $payload['correct_answer'] = null;
        $payload['correct_tf']     = null;

        // Legacy MCQ
        if ($validated['type'] === 'mcq') {
            $payload['option_a']       = $validated['option_a'];
            $payload['option_b']       = $validated['option_b'];
            $payload['option_c']       = $validated['option_c'];
            $payload['option_d']       = $validated['option_d'];
            $payload['correct_option'] = $validated['correct_option'];
        }

        if ($validated['type'] === 'true_false') {
            $payload['correct_tf'] = (bool) $validated['correct_tf'];
        }

        if ($validated['type'] === 'fill_blank') {
            $answers = preg_split("/[,\\n]+/", $validated['correct_blanks']);
            $answers = array_values(array_filter(array_map('trim', $answers)));
            $payload['correct_answer'] = $answers;
        }

        $exam->questions()->create($payload);

        return redirect()
            ->route('teacher.exams.questions.index', $exam)
            ->with('success', 'Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.');
    }

    public function edit(Exam $exam, Question $question)
    {
        $this->authorizeTeacherExam($exam);

        if ($question->exam_id !== $exam->id) {
            abort(404);
        }

        return view('dashboard.teacher.exams.question-edit', compact('exam', 'question'));
    }

    public function update(Request $request, Exam $exam, Question $question)
    {
        $this->authorizeTeacherExam($exam);

        if ($question->exam_id !== $exam->id) {
            abort(404);
        }

        $baseRules = [
            'type'        => 'required|in:mcq,true_false,fill_blank,essay',

            'question'      => 'required_without:question_text|string|max:2000',
            'question_text' => 'required_without:question|string|max:2000',

            'score'       => 'nullable|integer|min:1|max:100',
            'explanation' => 'nullable|string|max:2000',
        ];

        $typeRules = match ($request->type) {
            'mcq' => [
                'option_a'       => 'required|string|max:1000',
                'option_b'       => 'required|string|max:1000',
                'option_c'       => 'required|string|max:1000',
                'option_d'       => 'required|string|max:1000',
                'correct_option' => 'required|in:a,b,c,d',
            ],
            'true_false' => [
                'correct_tf' => 'required|boolean',
            ],
            'fill_blank' => [
                'correct_blanks' => 'required|string|max:2000',
            ],
            'essay' => [],
            default => []
        };

        $validated = $request->validate(array_merge($baseRules, $typeRules));

        $questionText = $validated['question'] ?? $validated['question_text'];

        $payload = [
            'type'          => $validated['type'],
            'question_text' => $questionText,
            'score'         => $validated['score'] ?? 1,
            'explanation'   => $validated['explanation'] ?? null,
        ];

        // reset fields
        $payload['options']        = null;
        $payload['correct_answer'] = null;
        $payload['correct_tf']     = null;

        // legacy MCQ reset
        $payload['option_a'] = $payload['option_b'] = $payload['option_c'] = $payload['option_d'] = null;
        $payload['correct_option'] = null;

        if ($validated['type'] === 'mcq') {
            $payload['option_a']       = $validated['option_a'];
            $payload['option_b']       = $validated['option_b'];
            $payload['option_c']       = $validated['option_c'];
            $payload['option_d']       = $validated['option_d'];
            $payload['correct_option'] = $validated['correct_option'];
        }

        if ($validated['type'] === 'true_false') {
            $payload['correct_tf'] = (bool) $validated['correct_tf'];
        }

        if ($validated['type'] === 'fill_blank') {
            $answers = preg_split("/[,\\n]+/", $validated['correct_blanks']);
            $answers = array_values(array_filter(array_map('trim', $answers)));
            $payload['correct_answer'] = $answers;
        }

        $question->update($payload);

        return redirect()
            ->route('teacher.exams.questions.index', $exam)
            ->with('success', 'Ø³Ø¤Ø§Ù„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´Ø¯.');
    }

    public function destroy(Exam $exam, Question $question)
    {
        $this->authorizeTeacherExam($exam);

        if ($question->exam_id !== $exam->id) {
            abort(404);
        }

        $question->delete();

        return redirect()
            ->route('teacher.exams.questions.index', $exam)
            ->with('success', 'Ø³Ø¤Ø§Ù„ Ø­Ø°Ù Ø´Ø¯.');
    }

    private function authorizeTeacherExam(Exam $exam): void
    {
        if ($exam->scope === 'free') {
            abort_unless(
                $exam->teacher_id === Auth::id(),
                403,
                'Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„Ø§Øª Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯.'
            );
            return;
        }

        $exam->loadMissing('classroom');

        abort_unless(
            $exam->classroom && $exam->classroom->teacher_id === Auth::id(),
            403,
            'Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„Ø§Øª Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯.'
        );
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 31: SubjectController.php
ğŸ“ PATH: app/Http/Controllers/Teacher/SubjectController.php
ğŸ“ SIZE: 906 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

/**
 * Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø³â€ŒÙ‡Ø§ (Subjects) ØªÙˆØ³Ø· Ù…Ø¹Ù„Ù…
 */
class SubjectController extends Controller
{
    /**
     * Ù„ÛŒØ³Øª Ø¯Ø±Ø³â€ŒÙ‡Ø§
     * view: dashboard.teacher.subjects.index
     */
    public function index()
    {
        return view('dashboard.teacher.subjects.index');
    }

    /**
     * Ø³Ø§Ø®Øª Ø¯Ø±Ø³ Ø¬Ø¯ÛŒØ¯
     * (ÙØ¹Ù„Ø§Ù‹ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„Ø› Ø¨Ø¹Ø¯Ø§Ù‹ Ø¨Ù‡ Ù…Ø¯Ù„ Subject ÙˆØµÙ„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…)
     */
    public function store(Request $request)
    {
        $request->validate([
            'title' => ['required', 'string', 'max:255'],
        ]);

        // TODO: Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ù…Ø¯Ù„ Subject
        // Subject::create([...])

        return back()->with('success', 'Ø¯Ø±Ø³ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯. (ÙØ¹Ù„Ø§Ù‹ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ)');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 32: TeacherClassController.php
ğŸ“ PATH: app/Http/Controllers/Teacher/TeacherClassController.php
ğŸ“ SIZE: 7,155 bytes
ğŸ•’ MODIFIED: 2025-12-07 05:36:55
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;
use App\Models\User;
use App\Http\Controllers\Controller;
use App\Models\Classroom;
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\Auth;
class TeacherClassController extends Controller
{
    public function index(Request $request)
    {
        $teacherId = Auth::id();

        $q = $request->q;
        $grade = $request->grade;
        $status = $request->status;
        $sort = $request->sort ?? 'latest';

        $classes = Classroom::query()
            ->where('teacher_id', $teacherId)
            ->when($q, function($query) use ($q){
                $query->where(function($qq) use ($q){
                    $qq->where('title', 'like', "%$q%")
                       ->orWhere('subject', 'like', "%$q%")
                       ->orWhere('join_code', 'like', "%$q%");
                });
            })
            ->when($grade && $grade !== 'all', fn($query)=>$query->where('grade', $grade))
            ->when($status && $status !== 'all', function($query) use ($status){
                $query->where('is_active', $status === 'active');
            })
            ->withCount('students')
            ->withCount('exams')
            ->when($sort === 'oldest', fn($query)=>$query->oldest())
            ->when($sort === 'students', fn($query)=>$query->orderByDesc('students_count'))
            ->when($sort === 'title_asc', fn($query)=>$query->orderBy('title'))
            ->when($sort === 'title_desc', fn($query)=>$query->orderByDesc('title'))
            ->when($sort === 'latest', fn($query)=>$query->latest())
            ->paginate(9)
            ->withQueryString();
 // Ø§Ú¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª AJAX Ø§Ø³Øª
    if ($request->ajax() || $request->filled('ajax')) {
        return response()->json([
            'success' => true,
            'classrooms' => $classes->map(function($class) {
                return [
                    'id' => $class->id,
                    'title' => $class->title,
                    'subject' => $class->subject,
                    'grade' => $class->grade,
                    'students_count' => $class->students_count,
                    'exams_count' => $class->exams_count,
                    'is_active' => $class->is_active
                ];
            })
        ]);
    }
// Ú©Ø¯ Ù‚Ø¨Ù„ÛŒ Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ view...
        return view('dashboard.teacher.classes.index', compact('classes'));
    }

    public function create()
    {
        return view('dashboard.teacher.classes.create');
    }

public function store(Request $request)
{
    $teacherId = Auth::id();

    $data = $request->validate([
        'title'       => 'required|string|max:255',
        'section_id'  => 'required|uuid|exists:sections,id',
        'grade_id'    => 'required|uuid|exists:grades,id',
        'branch_id'   => 'required|uuid|exists:branches,id',
        'field_id'    => 'required|uuid|exists:fields,id',
        'subfield_id' => 'required|uuid|exists:subfields,id',
        'subject_id'  => 'required|uuid|exists:subjects,id',
        'is_active'   => 'nullable|boolean',
        'metadata'    => 'nullable|string',
    ]);

    $classroom = Classroom::create([
        'id'          => (string) Str::uuid(),
        'teacher_id'  => $teacherId,
        'title'       => $data['title'],
        'section_id'  => $data['section_id'],
        'grade_id'    => $data['grade_id'],
        'branch_id'   => $data['branch_id'],
        'field_id'    => $data['field_id'],
        'subfield_id' => $data['subfield_id'],
        'subject_id'  => $data['subject_id'],
        'is_active'   => (bool)($data['is_active'] ?? true),
        'metadata'    => $data['metadata'] ?? null,
    ]);

    if ($request->ajax()) {
        return response()->json([
            'success' => true,
            'classroom' => [
                'id' => $classroom->id,
                'title' => $classroom->title,
            ]
        ]);
    }

    return redirect()
        ->route('teacher.classes.index')
        ->with('success', 'Ú©Ù„Ø§Ø³ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯.');
}

    // ğŸ”¥ ØªØ§Ø¨Ø¹ ØªÙˆÙ„ÛŒØ¯ Ú©Ø¯ Ø¹Ø¶ÙˆÛŒØª
    private function generateJoinCode()
    {
        do {
            $code = strtoupper(substr(md5(uniqid()), 0, 8));
        } while (Classroom::where('join_code', $code)->exists());

        return $code;
    }

    public function show(Classroom $class)
    {
        $this->authorizeTeacher($class);

        $class->load('students');

        return view('dashboard.teacher.classes.show', compact('class'));
    }

    public function edit(Classroom $class)
    {
        $this->authorizeTeacher($class);

        return view('dashboard.teacher.classes.edit', compact('class'));
    }

    public function update(Request $request, Classroom $class)
    {
        $this->authorizeTeacher($class);

        $data = $request->validate([
            'title' => ['required','string','max:255'],
            'subject' => ['nullable','string','max:255'],
            'grade' => ['nullable','string','max:50'],
            'description' => ['nullable','string'],
            'is_active' => ['nullable','boolean'],
        ]);

        $data['is_active'] = $request->boolean('is_active', true);

        $class->update($data);

        return redirect()->route('teacher.classes.index')
            ->with('success', 'Ú©Ù„Ø§Ø³ Ø¢Ù¾Ø¯ÛŒØª Ø´Ø¯.');
    }
    // Ø­Ø°Ù Ú©Ù„Ø§Ø³
    public function destroy(Classroom $class)
    {
        $this->authorizeTeacher($class);

        $class->delete();

        return back()->with('success', 'Ú©Ù„Ø§Ø³ Ø­Ø°Ù Ø´Ø¯.');
    }
    // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ú©Ù„Ø§Ø³
    public function students(Classroom $class)
    {
        $this->authorizeTeacher($class);
        $class->load('students');

        return view('dashboard.teacher.classes.students', compact('class'));
    }
    // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø¹Ù„Ù… Ù…Ø§Ù„Ú© Ú©Ù„Ø§Ø³ Ø§Ø³Øª
    public function addStudent(Request $request, Classroom $class)
    {
        $this->authorizeTeacher($class);

        $request->validate([
            'student' => ['required','string']
        ]);

        $key = $request->student;

        $student = User::query()
            ->where('email', $key)
            ->orWhere('username', $key)
            ->orWhere('phone', $key)
            ->first();

        if(!$student){
            return back()->with('error', 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.');
        }

        $class->students()->syncWithoutDetaching([$student->id]);

        return back()->with('success', 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.');
    }
    // Ø­Ø°Ù Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ø§Ø³
    public function removeStudent(Classroom $class, User $student)
    {
        $this->authorizeTeacher($class);

        $class->students()->detach($student->id);

        return back()->with('success', 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ø§Ø³ Ø­Ø°Ù Ø´Ø¯.');
    }
    // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø¹Ù„Ù… Ù…Ø§Ù„Ú© Ú©Ù„Ø§Ø³ Ø§Ø³Øª
    private function authorizeTeacher(Classroom $class)
    {
        abort_unless($class->teacher_id ===Auth::id(), 403);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 33: TeacherExamController.php
ğŸ“ PATH: app/Http/Controllers/Teacher/TeacherExamController.php
ğŸ“ SIZE: 8,878 bytes
ğŸ•’ MODIFIED: 2025-12-08 09:22:50
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use App\Http\Controllers\Controller;
use App\Models\Section;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;
use App\Models\SubjectType;
use App\Models\Subject;
use App\Models\Exam;
use App\Models\Classroom;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Str;

class TeacherExamController extends Controller
{
    // ==========================================================
    // Exams CRUD (Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø§Ø´ØªÛŒØŒ Ù…Ù†Ø·Ù‚ Ù‚Ø¨Ù„ÛŒâ€ŒØ§Øª Ø±Ùˆ Ù†Ú¯Ù‡ Ø¯Ø§Ø±
    // Ø§ÛŒÙ†Ø¬Ø§ ÙÙ‚Ø· Ø§Ø³Ú©Ù„Øª Ø§Ù…Ù† Ú¯Ø°Ø§Ø´ØªÙ… ØªØ§ route Ù‡Ø§ Ø®Ø·Ø§ Ù†Ø¯Ù‡Ù†Ø¯)
    // ==========================================================
    public function index()
    {
        $teacherId = Auth::id();

        $exams = Exam::query()
            ->where('teacher_id', $teacherId)
            ->latest()
            ->paginate(10);

        return view('dashboard.teacher.exams.index', compact('exams'));
    }

    public function create(Request $request)
    {
        // Ø§Ú¯Ø± Ú©Ù„Ø§Ø³ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø§Ø² ØµÙØ­Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ ÛŒØ§ ... Ø§ÙˆÙ…Ø¯Ù‡
        $selectedClassroomId = $request->get('classroom_id');

        return view('dashboard.teacher.exams.create', compact('selectedClassroomId'));
    }

    public function store(Request $request)
    {
        $teacherId = Auth::id();

        $data = $request->validate([
            'title'            => 'required|string|max:255',
            'description'      => 'nullable|string',
            'duration'         => 'required|integer|min:15|max:300',
            'exam_type'        => 'required|string',

            'classroom_id'     => 'nullable|uuid|exists:classrooms,id',

            'section_id'       => 'required|uuid|exists:sections,id',
            'grade_id'         => 'required|uuid|exists:grades,id',
            'branch_id'        => 'required|uuid|exists:branches,id',
            'field_id'         => 'required|uuid|exists:fields,id',
            'subfield_id'      => 'nullable|uuid|exists:subfields,id',
            'subject_type_id'  => 'nullable|uuid|exists:subject_types,id',
            'subjects'         => 'required|string', // JSON of UUIDs
            'is_active'        => 'nullable|boolean',
        ]);

        // Ù…Ø§Ù„Ú©ÛŒØª Ú©Ù„Ø§Ø³ (Ø§Ú¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ú©Ù„Ø§Ø³ÛŒ Ø§Ø³Øª)
        if (!empty($data['classroom_id'])) {
            $class = Classroom::findOrFail($data['classroom_id']);
            abort_unless($class->teacher_id === $teacherId, 403);
        }

        $exam = Exam::create([
            'id'              => (string) Str::uuid(),
            'teacher_id'      => $teacherId,
            'classroom_id'    => $data['classroom_id'] ?? null,
            'title'           => $data['title'],
            'description'     => $data['description'] ?? null,
            'duration'        => $data['duration'],
            'exam_type'       => $data['exam_type'],
            'section_id'      => $data['section_id'],
            'grade_id'        => $data['grade_id'],
            'branch_id'       => $data['branch_id'],
            'field_id'        => $data['field_id'],
            'subfield_id'     => $data['subfield_id'] ?? null,
            'subject_type_id' => $data['subject_type_id'] ?? null,
            'subjects'        => $data['subjects'],
            'is_active'       => (bool)($data['is_active'] ?? true),
        ]);

        return redirect()
            ->route('teacher.exams.show', $exam->id)
            ->with('success', 'Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯.');
    }

    public function show(Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);
        return view('dashboard.teacher.exams.show', compact('exam'));
    }

    public function edit(Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);
        return view('dashboard.teacher.exams.edit', compact('exam'));
    }

    public function update(Request $request, Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);

        $data = $request->validate([
            'title'       => 'required|string|max:255',
            'description' => 'nullable|string',
            'duration'    => 'required|integer|min:15|max:300',
            'is_active'   => 'nullable|boolean',
        ]);

        $exam->update([
            'title'       => $data['title'],
            'description' => $data['description'] ?? null,
            'duration'    => $data['duration'],
            'is_active'   => (bool)($data['is_active'] ?? true),
        ]);

        return back()->with('success', 'Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }

    public function destroy(Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);
        $exam->delete();
        return back()->with('success', 'Ø¢Ø²Ù…ÙˆÙ† Ø­Ø°Ù Ø´Ø¯.');
    }

    // ==========================================================
    // âœ… AJAX Taxonomy Endpoints
    // ==========================================================

    // 1) Sections
    public function sections()
    {
        $sections = Section::where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id','name_fa','slug']);

        return response()->json(['sections' => $sections]);
    }

    // 2) Grades (filter by section_id)
    public function grades(Request $request)
    {
        $q = Grade::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('section_id')) {
            $q->where('section_id', $request->section_id);
        }

        $grades = $q->get(['id','name_fa','slug','section_id']);

        return response()->json(['grades' => $grades]);
    }

    // 3) Branches (filter by section_id AND/OR grade_id)
    public function branches(Request $request)
    {
        $q = Branch::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('section_id')) {
            $q->where('section_id', $request->section_id);
        }

        // Ø§Ú¯Ø± Ø¯Ø± DB Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Ù¾Ø§ÛŒÙ‡ Ù‡Ù… ÙˆØµÙ„ Ø¨Ø§Ø´Ù†Ø¯ØŒ Ø§ÛŒÙ† ÙÛŒÙ„ØªØ± Ø±Ø§ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
        if ($request->filled('grade_id') && Schema::hasColumn('branches', 'grade_id')) {
            $q->where('grade_id', $request->grade_id);
        }

        $branches = $q->get(['id','name_fa','slug','section_id']);

        return response()->json(['branches' => $branches]);
    }

    // 4) Fields (filter by branch_id)
    public function fields(Request $request)
    {
        $q = Field::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('branch_id')) {
            $q->where('branch_id', $request->branch_id);
        }

        $fields = $q->get(['id','name_fa','slug','branch_id']);

        return response()->json(['fields' => $fields]);
    }

    // 5) Subfields (filter by field_id)
    public function subfields(Request $request)
    {
        $q = Subfield::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('field_id')) {
            $q->where('field_id', $request->field_id);
        }

        $subfields = $q->get(['id','name_fa','slug','field_id']);

        return response()->json(['subfields' => $subfields]);
    }

    // 6) Subject Types (optionally filter by section/grade/branch/field/subfield if columns exist on DB)
    public function subjectTypes(Request $request)
    {
        $q = SubjectType::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        // Ø§Ú¯Ø± subject_types Ø¬Ø¯ÙˆÙ„Ù Ø±Ø¨Ø·ÛŒ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ø§ÛŒÙ†Ù‡Ø§ Ø¨ÛŒâ€ŒØ§Ø«Ø±Ù†Ø¯
        foreach (['section_id','grade_id','branch_id','field_id','subfield_id'] as $col) {
            if ($request->filled($col) && \Schema::hasColumn('subject_types', $col)) {
                $q->where($col, $request->$col);
            }
        }

        $subjectTypes = $q->get(['id','name_fa','slug','coefficient','weight_percent','default_question_count']);

        return response()->json(['subjectTypes' => $subjectTypes]);
    }

    // 7) Subjects (filter by grade/branch/field/subfield/subject_type)
    public function subjects(Request $request)
    {
        $q = Subject::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        foreach (['section_id','grade_id','branch_id','field_id','subfield_id','subject_type_id'] as $col) {
            if ($request->filled($col)) {
                $q->where($col, $request->$col);
            }
        }

        $subjects = $q->get(['id','title_fa','slug','grade_id','branch_id','field_id','subfield_id','subject_type_id']);

        return response()->json(['subjects' => $subjects]);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 34: TeacherStudentController.php
ğŸ“ PATH: app/Http/Controllers/Teacher/TeacherStudentController.php
ğŸ“ SIZE: 12,938 bytes
ğŸ•’ MODIFIED: 2025-12-06 11:49:52
----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use App\Http\Controllers\Controller;
use App\Models\Attempt;
use App\Models\Classroom;
use App\Models\User;
use Illuminate\Http\Request;
use App\Models\AttemptAnswer;

class TeacherStudentController extends Controller
{
    /**
     * Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§ÛŒ Ù…Ø¹Ù„Ù…
     */
    public function index(Request $request)
    {
        $teacher = auth()->user();

        /*
        |--------------------------------------------------------------------------
        | NEW LOGIC (stable)
        |--------------------------------------------------------------------------
        | classrooms() Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø³Øª (pivot classroom_student)
        | Ø¨Ø±Ø§ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù„Ù… Ø¨Ø§ÛŒØ¯ Ø§Ø² teachingClassrooms() Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ….
        */

        $classroomsQuery = $teacher->teachingClassrooms();

        // ÙÛŒÙ„ØªØ± Ú©Ù„Ø§Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
        if ($request->filled('classroom_id')) {
            $classroomsQuery->where('id', $request->classroom_id);
        }

        $classrooms = $classroomsQuery->with('students')->get();

        // âœ… ÛŒÚ©â€ŒØ¨Ø§Ø± Ø¢ÛŒâ€ŒØ¯ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù„Ù… Ø±Ø§ Ø¨Ú¯ÛŒØ± (Ø¨Ø±Ø§ÛŒ performance)
        $teacherClassroomIds = $teacher->teachingClassrooms()->pluck('id');

        // Ø¬Ù…Ø¹ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù„Ù…
        $studentsQuery = User::query()
            // âœ… DB Ø¬Ø¯ÛŒØ¯: Ù†Ù‚Ø´ Ø§Ø² pivot role_user
            ->whereHas('roles', fn($q) => $q->where('slug', 'student'))
            ->whereHas('classrooms', function ($q) use ($teacherClassroomIds) {
                $q->whereIn('classrooms.id', $teacherClassroomIds);
            })
            ->with(['studentProfile', 'classrooms']);

        // Ø¬Ø³ØªØ¬Ùˆ
        if ($request->filled('search')) {
            $search = $request->search;
            $studentsQuery->where(function ($q) use ($search) {
                $q->where('phone', 'like', "%{$search}%");
            });
        }

        $students = $studentsQuery->paginate(10);

        return view('dashboard.teacher.students.index', compact(
            'classrooms', 'students'
        ));

        /*
        |--------------------------------------------------------------------------
        | OLD CODE (kept for rollback)
        |--------------------------------------------------------------------------
        | $classrooms = $teacher->classrooms()
        |     ->with('students')
        |     ->get();
        |
        | $students = $teacher->students()
        |     ->with(['studentProfile', 'classrooms'])
        |     ->paginate(10);
        |
        | Ø§ÛŒÙ† Ù…Ù†Ø·Ù‚ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ pivot Ù‚Ø¨Ù„ÛŒ classroom_user Ø¨ÙˆØ¯.
        */
    }

    /**
     * Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ø¯ÛŒØ¯ Ù…Ø¹Ù„Ù…
     * ----------------------------------------
     * âœ… FIXES:
     * 1) Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© ÙÙ‚Ø· Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù… Ù‡Ø³ØªÙ†Ø¯
     * 2) AttemptÙ‡Ø§ ÙÙ‚Ø· Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù… Ù‡Ø³ØªÙ†Ø¯
     * 3) stats Ø¨Ø§ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ attempts Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
     */
    public function show(User $student)
    {
        $teacher = auth()->user();

        // Ø§Ù…Ù†ÛŒØª: Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ÛŒØ¯ Ø¹Ø¶Ùˆ ÛŒÚ©ÛŒ Ø§Ø² Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù… Ø¨Ø§Ø´Ø¯
        $allowed = $teacher->teachingClassrooms()
            ->whereHas('students', fn ($q) => $q->where('users.id', $student->id))
            ->exists();

        abort_unless($allowed, 403);

        // âœ… Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© Ù…Ø¹Ù„Ù… Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
        $sharedClassrooms = $teacher->teachingClassrooms()
            ->whereHas('students', fn($q) => $q->where('users.id', $student->id))
            ->get();

        // âœ… Attempt Ù‡Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù…
        $attempts = Attempt::where('student_id', $student->id)
            ->whereHas('exam', fn($q) => $q->where('teacher_id', $teacher->id))
            ->with('exam')
            ->latest('submitted_at')
            ->get();

        $latestAttempts = $attempts->take(5);

        // âœ… Ø¢Ù…Ø§Ø± ÙˆØ§Ù‚Ø¹ÛŒ (Ø¨Ø§ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯)
        $stats = [
            'attempts_count' => $attempts->count(),
            'avg_percent'    => round($attempts->avg('percent') ?? 0, 2),
            'avg_score'      => round($attempts->avg('score_obtained') ?? 0, 2),
        ];

        return view('dashboard.teacher.students.show', compact(
            'student', 'sharedClassrooms', 'attempts', 'latestAttempts', 'stats'
        ));

        /*
        |--------------------------------------------------------------------------
        | OLD CODE (kept)
        |--------------------------------------------------------------------------
        | $classrooms = $student->classrooms()->get();
        |
        | $latestAttempts = Attempt::where('student_id', $student->id)
        |     ->with('exam')
        |     ->latest()
        |     ->take(5)
        |     ->get();
        |
        | $statsQuery = Attempt::where('student_id', $student->id)
        |     ->whereNotNull('finished_at');
        |
        | $stats = [
        |     'attempts_count' => (clone $statsQuery)->count(),
        |     'avg_score'      => round((clone $statsQuery)->avg('score') ?? 0, 2), // âŒ score Ù†Ø¯Ø§Ø±ÛŒÙ…
        |     'avg_percent'    => round((clone $statsQuery)->avg('percent') ?? 0, 2),
        | ];
        |
        | return view(... compact('student','classrooms','latestAttempts','stats'));
        */
    }

    /**
     * Ù„ÛŒØ³Øª AttemptÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
     * ----------------------------------------
     * âœ… FIX: ÙÙ‚Ø· AttemptÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù…
     */
    public function attempts(User $student)
    {
        $teacher = auth()->user();

        $allowed = $teacher->teachingClassrooms()
            ->whereHas('students', fn ($q) => $q->where('users.id', $student->id))
            ->exists();

        abort_unless($allowed, 403);

        $attempts = Attempt::where('student_id', $student->id)
            ->whereHas('exam', fn($q) => $q->where('teacher_id', $teacher->id))
            ->with('exam')
            ->latest('submitted_at')
            ->paginate(10);

        return view('dashboard.teacher.students.attempts', compact('student', 'attempts'));

        /*
        |--------------------------------------------------------------------------
        | OLD CODE (kept)
        |--------------------------------------------------------------------------
        | $attempts = Attempt::where('student_id', $student->id)
        |     ->with('exam')
        |     ->latest()
        |     ->paginate(10);
        */
    }

    /**
     * Ø¬Ø²Ø¦ÛŒØ§Øª Attempt Ø¨Ø±Ø§ÛŒ ØªØµØ­ÛŒØ­
     * ----------------------------------------
     * âœ… FIX: Ø§Ù…Ù†ÛŒØª + Ù„ÙˆØ¯ Ø±ÙˆØ§Ø¨Ø· Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ teacher/attempts/show
     */
    public function attemptShow(Attempt $attempt)
    {
        $teacher = auth()->user();

        // Ø§Ù…Ù†ÛŒØª Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±: Attempt Ø¨Ø§ÛŒØ¯ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù… Ø¨Ø§Ø´Ø¯
        $allowed = $attempt->exam
            && $attempt->exam->teacher_id == $teacher->id;

        abort_unless($allowed, 403);

        $attempt->load(['student', 'exam.questions', 'answers.question']);

        return view('dashboard.teacher.attempts.show', compact('attempt'));

        /*
        |--------------------------------------------------------------------------
        | OLD SECURITY CHECK (kept)
        |--------------------------------------------------------------------------
        | $allowed = $teacher->teachingClassrooms()
        |   ->whereHas('students', fn ($q) => $q->where('users.id', $attempt->student_id))
        |   ->exists();
        */
    }

    /**
     * Ø«Ø¨Øª Ù†Ù…Ø±Ù‡ ØªØ´Ø±ÛŒØ­ÛŒ Ø¨Ø±Ø§ÛŒ Attempt
     * ----------------------------------------
     * âœ… FIXES:
     * - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² score_awarded Ùˆ graded_at
     * - Ø¬Ù…Ø¹ Ù†Ù…Ø±Ù‡ Ø¨Ø§ score_awarded
     * - status: submitted â†’ graded
     */
    public function gradeEssay(Request $request, Attempt $attempt)
    {
        $teacher = auth()->user();

        // Attempt Ø¨Ø§ÛŒØ¯ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù… Ø¨Ø§Ø´Ø¯
        $allowed = $attempt->exam
            && $attempt->exam->teacher_id == $teacher->id;

        abort_unless($allowed, 403);

        $data = $request->validate([
            'scores' => ['required', 'array'],
            'scores.*' => ['nullable', 'numeric', 'min:0'],
            'feedbacks' => ['nullable', 'array'],
            'feedbacks.*' => ['nullable', 'string'],
        ]);

        foreach ($data['scores'] as $answerId => $score) {

            $answer = $attempt->answers()
                ->where('id', $answerId)
                ->with('question')
                ->first();

            if ($answer && $answer->question->type === 'essay') {

                $max = (int)($answer->question->score ?? 0);
                $finalScore = min(max((int)($score ?? 0), 0), $max);

                $answer->update([
                    'score_awarded'    => $finalScore,
                    'teacher_feedback' => $data['feedbacks'][$answerId] ?? $answer->teacher_feedback,
                    'graded_by'        => $teacher->id,
                    'graded_at'        => now(),
                ]);
            }
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¬Ø¯Ø¯ Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ
        $attempt->refresh();

        $attempt->score_obtained = $attempt->answers()->sum('score_awarded');

        // Ø§Ú¯Ø± score_total Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯ØŒ Ø§Ø² Ø³ÙˆØ§Ù„Ø§Øª Ø­Ø³Ø§Ø¨ Ú©Ù†
        if (!$attempt->score_total) {
            $attempt->score_total = $attempt->exam->questions()->sum('score');
        }

        $attempt->percent = $attempt->score_total > 0
            ? round(($attempt->score_obtained / $attempt->score_total) * 100, 2)
            : 0;

        // Ø¢ÛŒØ§ Ù‡Ù†ÙˆØ² essay Ø¨Ø¯ÙˆÙ† ØªØµØ­ÛŒØ­ Ø¯Ø§Ø±ÛŒÙ…ØŸ
        $hasUngradedEssay = $attempt->answers()
            ->whereHas('question', fn($q) => $q->where('type', 'essay'))
            ->whereNull('graded_at')
            ->exists();

        $attempt->status = $hasUngradedEssay ? 'submitted' : 'graded';

        if (!$hasUngradedEssay && !$attempt->finished_at) {
            $attempt->finished_at = now();
        }

        $attempt->save();

        return redirect()
            ->back()
            ->with('success', 'Ù†Ù…Ø±Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ´Ø±ÛŒØ­ÛŒ Ø«Ø¨Øª Ø´Ø¯ Ùˆ Attempt Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }

    /**
     * Grade single essay answer (route: teacher.attempts.answers.grade)
     */
    public function gradeEssayAnswer(Request $request, Attempt $attempt, AttemptAnswer $answer)
    {
        $teacher = auth()->user();

        // Ø§Ù…Ù†ÛŒØª: Ø§ÛŒÙ† Attempt Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ù…Ø¹Ù„Ù… Ø¨Ø§Ø´Ø¯
        abort_unless($attempt->exam && $attempt->exam->teacher_id == $teacher->id, 403);

        // Ø§Ù…Ù†ÛŒØª: answer Ø¨Ø§ÛŒØ¯ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ù‡Ù…ÛŒÙ† attempt Ø¨Ø§Ø´Ø¯
        abort_unless($answer->attempt_id == $attempt->id, 403);

        $data = $request->validate([
            'score_awarded'    => ['required','numeric','min:0'],
            'teacher_feedback' => ['nullable','string'],
        ]);

        // ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ essay
        abort_unless($answer->question && $answer->question->type === 'essay', 403);

        $max = (int)($answer->question->score ?? 0);
        $finalScore = min(max((int)$data['score_awarded'], 0), $max);

        $answer->update([
            'score_awarded'    => $finalScore,
            'teacher_feedback' => $data['teacher_feedback'] ?? $answer->teacher_feedback,
            'graded_by'        => $teacher->id,
            'graded_at'        => now(),
            'is_correct'       => null,
        ]);

        // Ø¢Ù¾Ø¯ÛŒØª Attempt Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± ØªØµØ­ÛŒØ­
        $attempt->refresh();

        $attempt->score_obtained = $attempt->answers()->sum('score_awarded');

        if (!$attempt->score_total) {
            $attempt->score_total = $attempt->exam->questions()->sum('score');
        }

        $attempt->percent = $attempt->score_total > 0
            ? round(($attempt->score_obtained / $attempt->score_total) * 100, 2)
            : 0;

        $hasUngradedEssay = $attempt->answers()
            ->whereHas('question', fn($q) => $q->where('type','essay'))
            ->whereNull('graded_at')
            ->exists();

        $attempt->status = $hasUngradedEssay ? 'submitted' : 'graded';

        if (!$hasUngradedEssay && !$attempt->finished_at) {
            $attempt->finished_at = now();
        }

        $attempt->save();

        return back()->with('success', 'Ù†Ù…Ø±Ù‡ ØªØ´Ø±ÛŒØ­ÛŒ Ø«Ø¨Øª Ø´Ø¯ Ùˆ Ù†ØªÛŒØ¬Ù‡ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 35: AcademicAssessment.php
ğŸ“ PATH: app/Models/AcademicAssessment.php
ğŸ“ SIZE: 463 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:29:47
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AcademicAssessment extends Model
{
    use HasFactory;

    protected $table = 'academic_assessments';

    protected $fillable = ['student_id', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'assessment_type', 'score_percent', 'mastery_level', 'weaknesses', 'strengths', 'taken_at'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 36: AiAgent.php
ğŸ“ PATH: app/Models/AiAgent.php
ğŸ“ SIZE: 347 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:29:51
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiAgent extends Model
{
    use HasFactory;

    protected $table = 'ai_agents';

    protected $fillable = ['slug', 'name_fa', 'role_type', 'model_provider', 'model_name', 'system_prompt', 'config', 'is_active'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 37: AiArtifact.php
ğŸ“ PATH: app/Models/AiArtifact.php
ğŸ“ SIZE: 351 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:29:55
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiArtifact extends Model
{
    use HasFactory;

    protected $table = 'ai_artifacts';

    protected $fillable = ['session_id', 'artifact_type', 'title', 'body', 'linked_table', 'linked_id', 'status', 'reviewer_id'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 38: AiFeedback.php
ğŸ“ PATH: app/Models/AiFeedback.php
ğŸ“ SIZE: 314 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:29:59
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiFeedback extends Model
{
    use HasFactory;

    protected $table = 'ai_feedback';

    protected $fillable = ['session_id', 'message_id', 'user_id', 'rating', 'feedback_text'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 39: AiMessage.php
ğŸ“ PATH: app/Models/AiMessage.php
ğŸ“ SIZE: 330 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:03
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiMessage extends Model
{
    use HasFactory;

    protected $table = 'ai_messages';

    protected $fillable = ['session_id', 'sender_type', 'content', 'tokens_in', 'tokens_out', 'safety_flags'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 40: AiSession.php
ğŸ“ PATH: app/Models/AiSession.php
ğŸ“ SIZE: 446 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:07
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiSession extends Model
{
    use HasFactory;

    protected $table = 'ai_sessions';

    protected $fillable = ['ai_agent_id', 'user_id', 'context_type', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'classroom_id', 'exam_id', 'started_at', 'ended_at', 'metadata'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 41: Attempt.php
ğŸ“ PATH: app/Models/Attempt.php
ğŸ“ SIZE: 4,230 bytes
ğŸ•’ MODIFIED: 2025-12-06 11:53:25
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Attempt extends Model
{
    /**
     * âœ… DB Ø¬Ø¯ÛŒØ¯: exam_attempts
     */
    protected $table = 'exam_attempts';

    /**
     * Fillable
     * ------------------------------------------------------------
     * âœ… Ø´Ø§Ù…Ù„ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ DB Ø¬Ø¯ÛŒØ¯ + ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ legacy
     * ØªØ§ Ú©Ø¯Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ù†ØªØ±Ú©Ù†Ø¯.
     */
    protected $fillable = [
        'exam_id',
        'student_id',

        // âœ… DB Ø¬Ø¯ÛŒØ¯
        'status',
        'started_at',
        'finished_at',
        'total_score',

        // ---------------- legacy (Ø§Ú¯Ø± Ø¯Ø± DB Ù†Ø¨ÙˆØ¯Ù†Ø¯ØŒ Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯)
        'submitted_at',
        'answers',
        'percent',
        'score_total',
        'score_obtained',
        'meta',
    ];

    /**
     * Casts
     * ------------------------------------------------------------
     */
    protected $casts = [
        // legacy
        'answers'       => 'array',
        'meta'          => 'array',

        // âœ… DB Ø¬Ø¯ÛŒØ¯
        'started_at'    => 'datetime',
        'finished_at'   => 'datetime',

        'total_score'   => 'decimal:2',

        // legacy
        'submitted_at'  => 'datetime',
        'percent'       => 'decimal:2',
        'score_total'   => 'decimal:2',
        'score_obtained'=> 'decimal:2',
    ];

    /**
     * Relationships
     * ------------------------------------------------------------
     */
    public function exam(): BelongsTo
    {
        return $this->belongsTo(Exam::class);
    }

    public function student(): BelongsTo
    {
        return $this->belongsTo(User::class, 'student_id');
    }

    public function answers(): HasMany
    {
        return $this->hasMany(AttemptAnswer::class, 'attempt_id');
    }

    // ==========================================================
    // Compatibility Accessors (for old code)
    // ==========================================================

    /**
     * âœ… old: submitted_at
     * new DB doesn't have it, so we infer:
     * - if status != in_progress => treat finished_at as submitted_at
     */
    public function getSubmittedAtAttribute()
    {
        if ($this->attributes['submitted_at'] ?? null) {
            return $this->attributes['submitted_at'];
        }

        return $this->finished_at;
    }

    /**
     * âœ… old: score_obtained
     * new: total_score (but total_score in DB is more like final score)
     * we map score_obtained -> total_score if missing.
     */
    public function getScoreObtainedAttribute()
    {
        return $this->attributes['score_obtained']
            ?? $this->attributes['total_score']
            ?? 0;
    }

    /**
     * âœ… old: score_total
     * no direct column in DB new.
     * if exists in attributes use it, else compute from exam questions.
     */
    public function getScoreTotalAttribute()
    {
        if (isset($this->attributes['score_total'])) {
            return $this->attributes['score_total'];
        }

        return $this->exam
            ? (float) $this->exam->questions()->sum('score')
            : 0;
    }

    /**
     * âœ… old: percent
     * compute percent dynamically if not stored.
     */
    public function getPercentAttribute()
    {
        if (isset($this->attributes['percent'])) {
            return (float) $this->attributes['percent'];
        }

        $obtained = (float) $this->score_obtained;
        $total    = (float) $this->score_total;

        return $total > 0
            ? round(($obtained / $total) * 100, 2)
            : 0;
    }

    // ==========================================================
    // Helpers
    // ==========================================================

    /**
     * âœ… ØªØ´Ø®ÛŒØµ Ø§ÛŒÙ†Ú©Ù‡ Attempt Ù†Ù‡Ø§ÛŒÛŒ Ø§Ø³Øª ÛŒØ§ Ù†Ù‡
     * Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ† Ù…Ø¬Ø¯Ø¯
     */
    public function isFinal(): bool
    {
        return !is_null($this->finished_at)
            || in_array($this->status, ['submitted', 'graded'])
            || !is_null($this->submitted_at);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 42: AttemptAnswer.php
ğŸ“ PATH: app/Models/AttemptAnswer.php
ğŸ“ SIZE: 2,415 bytes
ğŸ•’ MODIFIED: 2025-12-06 11:53:39
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class AttemptAnswer extends Model
{
    use HasFactory;

    /**
     * âœ… DB Ø¬Ø¯ÛŒØ¯
     */
    protected $table = 'attempt_answers';

    /**
     * Fillable
     * ------------------------------------------------------------
     * âœ… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ DB Ø¬Ø¯ÛŒØ¯ + legacy
     */
    protected $fillable = [
        'attempt_id',
        'question_id',

        // âœ… DB Ø¬Ø¯ÛŒØ¯
        'answer',
        'is_correct',
        'score',

        // ---------------- legacy (ÙØ¹Ù„Ø§Ù‹ Ø¯Ø± DB Ù†ÛŒØ³ØªÙ†Ø¯)
        'score_awarded',
        'teacher_feedback',
        'graded_by',
        'graded_at',
    ];

    /**
     * Casts
     * ------------------------------------------------------------
     */
    protected $casts = [
        // Ø¯Ø± SQL Ù†ÙˆØ¹ longtext Ø¨ÙˆØ¯ Ùˆ json_valid Ø¯Ø§Ø´ØªÛŒÙ…
        'answer'        => 'array',  // Ø¨Ù‡ØªØ± Ø§Ø² json Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Ø¨Ø§ mixed
        'is_correct'    => 'boolean',

        // âœ… DB Ø¬Ø¯ÛŒØ¯
        'score'         => 'decimal:2',

        // legacy
        'score_awarded' => 'decimal:2',
        'graded_at'     => 'datetime',
    ];

    // ==========================================================
    // Relationships
    // ==========================================================

    public function attempt(): BelongsTo
    {
        return $this->belongsTo(Attempt::class, 'attempt_id');
    }

    public function question(): BelongsTo
    {
        return $this->belongsTo(Question::class, 'question_id');
    }

    // ==========================================================
    // Compatibility Accessors (for old code)
    // ==========================================================

    /**
     * âœ… old: score_awarded
     * new DB: score
     */
    public function getScoreAwardedAttribute()
    {
        return $this->attributes['score_awarded']
            ?? $this->attributes['score']
            ?? 0;
    }

    /**
     * âœ… Ø§Ú¯Ø± Ú©Ø¯ Ù‚Ø¯ÛŒÙ…ÛŒ score_awarded Ø³Øª Ú©Ø±Ø¯ØŒ
     * Ù…Ø§ Ø±ÙˆÛŒ score Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
     */
    public function setScoreAwardedAttribute($value)
    {
        $this->attributes['score'] = $value;
        $this->attributes['score_awarded'] = $value; // legacy safe
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 43: Branch.php
ğŸ“ PATH: app/Models/Branch.php
ğŸ“ SIZE: 931 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:27:25
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Branch extends Model
{
    use HasFactory;

    protected $table = 'branches';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'section_id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // Ø±ÙˆØ§Ø¨Ø·
    public function section(){ return $this->belongsTo(\App\Models\Section::class); }
    public function fields(){ return $this->hasMany(\App\Models\Field::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 44: Classroom.php
ğŸ“ PATH: app/Models/Classroom.php
ğŸ“ SIZE: 4,357 bytes
ğŸ•’ MODIFIED: 2025-12-06 22:27:48
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Str;

class Classroom extends Model
{
    use HasFactory;

    protected $table = 'classrooms';

    // âœ… Ú†ÙˆÙ† PK Ø¬Ø¯ÙˆÙ„ UUID Ø§Ø³Øª
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'teacher_id',
        'title',
        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_type_id',
        'metadata',
        'is_active',
        'classroom_type',
        'join_code',
        'description',
    ];

    protected $casts = [
        'is_active'  => 'boolean',
        'metadata'   => 'array',
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
    ];

    // ==========================================================
    // Relationships
    // ==========================================================

    /** Teacher who owns the classroom */
    public function teacher(): BelongsTo
    {
        return $this->belongsTo(User::class, 'teacher_id');
    }

    /**
     * All classroom members (students + teachers)
     * pivot: classroom_user(classroom_id, user_id)
     */
    public function users(): BelongsToMany
    {
        return $this->belongsToMany(
            User::class,
            'classroom_user',
            'classroom_id',
            'user_id'
        );
        // âœ… no withTimestamps() -> pivot has no timestamps in DB
    }

    /**
     * Backward-compatible alias (some old code may call members())
     */
    public function members(): BelongsToMany
    {
        return $this->users();
    }

    /**
     * Classroom students
     * Since classroom_user has no role column,
     * we filter user roles through role_user pivot.
     */
    public function students(): BelongsToMany
    {
        return $this->users()
            ->whereHas('roles', fn ($q) => $q->where('slug', 'student'));
    }

    /**
     * Classroom teachers (future multi-teacher support)
     */
    public function teachers(): BelongsToMany
    {
        return $this->users()
            ->whereHas('roles', fn ($q) => $q->where('slug', 'teacher'));
    }

    /** Exams belonging to this classroom */
    public function exams(): HasMany
    {
        return $this->hasMany(Exam::class, 'classroom_id');
    }

    /**
     * Subjects attached to this classroom
     * pivot: classroom_subject(classroom_id, subject_id)
     */
    public function subjects(): BelongsToMany
    {
        return $this->belongsToMany(
            Subject::class,
            'classroom_subject',
            'classroom_id',
            'subject_id'
        );
        // âœ… no withTimestamps() -> pivot has no timestamps
    }

    // --- Taxonomy relations ---

    public function section(): BelongsTo
    {
        return $this->belongsTo(Section::class, 'section_id');
    }

    public function grade(): BelongsTo
    {
        return $this->belongsTo(Grade::class, 'grade_id');
    }

    public function branch(): BelongsTo
    {
        return $this->belongsTo(Branch::class, 'branch_id');
    }

    public function field(): BelongsTo
    {
        return $this->belongsTo(Field::class, 'field_id');
    }

    public function subfield(): BelongsTo
    {
        return $this->belongsTo(Subfield::class, 'subfield_id');
    }

    public function subjectType(): BelongsTo
    {
        return $this->belongsTo(SubjectType::class, 'subject_type_id');
    }

    // ==========================================================
    // Boot / Mutators
    // ==========================================================
    protected static function booted()
    {
        static::creating(function ($classroom) {

            // âœ… Ø³Ø§Ø®Øª Ø®ÙˆØ¯Ú©Ø§Ø± UUID Ø¨Ø±Ø§ÛŒ id
            if (empty($classroom->id)) {
                $classroom->id = (string) Str::uuid();
            }

            if (empty($classroom->join_code)) {
                // join_code is unique in DB
                $classroom->join_code = strtoupper(str()->random(6));
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 45: Content.php
ğŸ“ PATH: app/Models/Content.php
ğŸ“ SIZE: 475 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:27
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Content extends Model
{
    use HasFactory;

    protected $table = 'contents';

    protected $fillable = ['creator_id', 'type', 'title', 'description', 'file_path', 'url', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'access_level', 'classroom_id', 'ai_generated_by_session_id', 'is_active'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 46: CounselingTask.php
ğŸ“ PATH: app/Models/CounselingTask.php
ğŸ“ SIZE: 330 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:31
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class CounselingTask extends Model
{
    use HasFactory;

    protected $table = 'counseling_tasks';

    protected $fillable = ['title', 'description', 'task_type', 'recommended_minutes', 'is_active'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 47: CounselorProfile.php
ğŸ“ PATH: app/Models/CounselorProfile.php
ğŸ“ SIZE: 323 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:35
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class CounselorProfile extends Model
{
    use HasFactory;

    protected $table = 'counselor_profiles';

    protected $fillable = ['user_id', 'focus_area', 'main_section_id', 'main_branch_id'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 48: Exam.php
ğŸ“ PATH: app/Models/Exam.php
ğŸ“ SIZE: 4,586 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:28:47
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Str;

class Exam extends Model
{
    use HasFactory;

    protected $table = 'exams';

    // âœ… UUID PK
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'teacher_id',
        'classroom_id',

        'exam_type',
        'title',
        'description',
        'duration_minutes',

        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_type_id',

        'total_questions',
        'coefficients',

        'start_at',
        'end_at',

        'shuffle_questions',
        'shuffle_options',
        'ai_assisted',
        'ai_session_id',

        'is_active',
        'is_published',
    ];

    protected $casts = [
        'duration_minutes'  => 'integer',
        'total_questions'   => 'integer',

        'coefficients'      => 'array',

        'shuffle_questions' => 'boolean',
        'shuffle_options'   => 'boolean',
        'ai_assisted'       => 'boolean',

        'is_active'         => 'boolean',
        'is_published'      => 'boolean',

        'start_at'          => 'datetime',
        'end_at'            => 'datetime',
        'created_at'        => 'datetime',
        'updated_at'        => 'datetime',
    ];

    // ==========================================================
    // Relationships
    // ==========================================================

    /** Ù…Ø¹Ù„Ù… Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø¢Ø²Ù…ÙˆÙ† */
    public function teacher(): BelongsTo
    {
        return $this->belongsTo(User::class, 'teacher_id');
    }

    /** Ú©Ù„Ø§Ø³ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ† (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) */
    public function classroom(): BelongsTo
    {
        return $this->belongsTo(Classroom::class, 'classroom_id');
    }

    /**
     * Ø³ÙˆØ§Ù„Ø§Øª Ø¢Ø²Ù…ÙˆÙ†
     * pivot: exam_questions(exam_id, question_id, sort_order)
     */
    public function questions(): BelongsToMany
    {
        return $this->belongsToMany(
            Question::class,
            'exam_questions',
            'exam_id',
            'question_id'
        )->withPivot('sort_order');
    }

    /**
     * Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡â€ŒÙ‡Ø§ / ØªÙ„Ø§Ø´â€ŒÙ‡Ø§
     * Ø¬Ø¯ÙˆÙ„: exam_attempts
     */
    public function attempts(): HasMany
    {
        return $this->hasMany(ExamAttempt::class, 'exam_id');
    }

    /**
     * Ø¯Ø±ÙˆØ³ Ø¢Ø²Ù…ÙˆÙ† (Ø§Ú¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ú†Ù†Ø¯Ø¯Ø±Ø³ Ø¨Ø§Ø´Ø¯)
     * pivot: exam_subject(exam_id, subject_id, question_count)
     */
    public function subjects(): BelongsToMany
    {
        return $this->belongsToMany(
            Subject::class,
            'exam_subject',
            'exam_id',
            'subject_id'
        )->withPivot('question_count');
    }

    // --- Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³Ø·Ø­ÛŒ (Ù‡Ù…Ù‡ Ø§Ø®ØªÛŒØ§Ø±ÛŒ) ---
    public function section(): BelongsTo
    {
        return $this->belongsTo(Section::class, 'section_id');
    }

    public function grade(): BelongsTo
    {
        return $this->belongsTo(Grade::class, 'grade_id');
    }

    public function branch(): BelongsTo
    {
        return $this->belongsTo(Branch::class, 'branch_id');
    }

    public function field(): BelongsTo
    {
        return $this->belongsTo(Field::class, 'field_id');
    }

    public function subfield(): BelongsTo
    {
        return $this->belongsTo(Subfield::class, 'subfield_id');
    }

    public function subjectType(): BelongsTo
    {
        return $this->belongsTo(SubjectType::class, 'subject_type_id');
    }

    /** Ø§Ú¯Ø± Ø¢Ø²Ù…ÙˆÙ† AI Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ */
    public function aiSession(): BelongsTo
    {
        return $this->belongsTo(AiSession::class, 'ai_session_id');
    }

    // ==========================================================
    // Route Model Binding (UUID)
    // ==========================================================
    public function getRouteKeyName()
    {
        return 'id';
    }

    // ==========================================================
    // Boot UUID
    // ==========================================================
    protected static function booted()
    {
        static::creating(function ($exam) {
            if (empty($exam->id)) {
                $exam->id = (string) Str::uuid();
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 49: ExamAttempt.php
ğŸ“ PATH: app/Models/ExamAttempt.php
ğŸ“ SIZE: 330 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:43
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ExamAttempt extends Model
{
    use HasFactory;

    protected $table = 'exam_attempts';

    protected $fillable = ['exam_id', 'student_id', 'started_at', 'finished_at', 'status', 'total_score'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 50: Field.php
ğŸ“ PATH: app/Models/Field.php
ğŸ“ SIZE: 931 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:31:11
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Field extends Model
{
    use HasFactory;

    protected $table = 'fields';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'branch_id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // Ø±ÙˆØ§Ø¨Ø·
    public function branch(){ return $this->belongsTo(\App\Models\Branch::class); }
    public function subfields(){ return $this->hasMany(\App\Models\Subfield::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 51: Grade.php
ğŸ“ PATH: app/Models/Grade.php
ğŸ“ SIZE: 893 bytes
ğŸ•’ MODIFIED: 2025-12-07 15:53:13
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Grade extends Model
{
    use HasFactory;

    protected $table = 'grades';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'section_id',
        'slug',
        'value',      // âœ… Ø­ØªÙ…Ø§Ù‹ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø´Ø¯
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // Ø±ÙˆØ§Ø¨Ø·
    public function section(){ return $this->belongsTo(\App\Models\Section::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 52: LearningPath.php
ğŸ“ PATH: app/Models/LearningPath.php
ğŸ“ SIZE: 353 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:30:59
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class LearningPath extends Model
{
    use HasFactory;

    protected $table = 'learning_paths';

    protected $fillable = ['student_id', 'path_type', 'title', 'start_date', 'end_date', 'status', 'generated_by', 'metadata'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 53: LearningPathStep.php
ğŸ“ PATH: app/Models/LearningPathStep.php
ğŸ“ SIZE: 512 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:03
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class LearningPathStep extends Model
{
    use HasFactory;

    protected $table = 'learning_path_steps';

    protected $fillable = ['learning_path_id', 'step_type', 'order_index', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'content_id', 'exam_id', 'counseling_task_id', 'estimated_minutes', 'required_mastery', 'status', 'due_date'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 54: Otp.php
ğŸ“ PATH: app/Models/Otp.php
ğŸ“ SIZE: 1,158 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:29:14
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Otp extends Model
{
    use HasFactory;

    protected $table = "otps";

    // âœ… Ú†ÙˆÙ† uuid Ù‡Ø³Øª
    public $incrementing = false;
    protected $keyType = "string";

    protected $fillable = [
        "id",
        "phone",
        "code",
        "token",
        "type",
        "attempts",
        "verified",
        "expires_at",
        "verified_at",
    ];

    protected $casts = [
        "expires_at"  => "datetime",
        "verified_at" => "datetime",
    ];

    // âœ… auto fill id + type
    protected static function booted()
    {
        static::creating(function ($otp) {
            if (empty($otp->id)) {
                $otp->id = (string) Str::uuid();
            }

            if (empty($otp->type)) {
                $otp->type = "login";
            }

            if (!isset($otp->attempts)) {
                $otp->attempts = 0;
            }

            if (!isset($otp->verified)) {
                $otp->verified = false;
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 55: PsychoAssessment.php
ğŸ“ PATH: app/Models/PsychoAssessment.php
ğŸ“ SIZE: 337 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:11
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class PsychoAssessment extends Model
{
    use HasFactory;

    protected $table = 'psycho_assessments';

    protected $fillable = ['student_id', 'assessment_type', 'value', 'notes', 'measured_at', 'source'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 56: Question.php
ğŸ“ PATH: app/Models/Question.php
ğŸ“ SIZE: 955 bytes
ğŸ•’ MODIFIED: 2025-12-06 20:48:17
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Question extends Model
{
    use HasFactory;

    protected $table = 'questions';

    // âœ… UUID PK
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'creator_id',
        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_id',
        'topic_id',
        'difficulty',
        'question_type',
        'content',
        'options',
        'correct_answer',
        'explanation',
        'ai_generated_by_session_id',
        'ai_confidence',
        'is_active'
    ];

    protected static function booted()
    {
        static::creating(function ($q) {
            if (empty($q->id)) {
                $q->id = (string) Str::uuid();
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 57: Role.php
ğŸ“ PATH: app/Models/Role.php
ğŸ“ SIZE: 277 bytes
ğŸ•’ MODIFIED: 2025-12-06 17:35:25
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Role extends Model
{
    protected $table = 'roles';

    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = ['id','name','slug','description','is_active'];
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 58: Section.php
ğŸ“ PATH: app/Models/Section.php
ğŸ“ SIZE: 785 bytes
ğŸ•’ MODIFIED: 2025-12-07 06:51:13
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Section extends Model
{
    use HasFactory;

    protected $table = 'sections';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // Ø±ÙˆØ§Ø¨Ø·
    public function grades(){ return $this->hasMany(Grade::class); }
    public function branches(){ return $this->hasMany(Branch::class); }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 59: StudentCounselingTaskLog.php
ğŸ“ PATH: app/Models/StudentCounselingTaskLog.php
ğŸ“ SIZE: 350 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:29
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentCounselingTaskLog extends Model
{
    use HasFactory;

    protected $table = 'student_counseling_task_logs';

    protected $fillable = ['student_id', 'counseling_task_id', 'done_at', 'self_rating', 'notes'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 60: StudentDailyLog.php
ğŸ“ PATH: app/Models/StudentDailyLog.php
ğŸ“ SIZE: 355 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:33
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentDailyLog extends Model
{
    use HasFactory;

    protected $table = 'student_daily_logs';

    protected $fillable = ['student_id', 'log_date', 'study_minutes', 'mood', 'stress_level', 'sleep_hours', 'free_text'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 61: StudentGamificationProfile.php
ğŸ“ PATH: app/Models/StudentGamificationProfile.php
ğŸ“ SIZE: 1,189 bytes
ğŸ•’ MODIFIED: 2025-12-03 08:49:47
----------------------------------------------------------------------

<?php
// app/Models/StudentGamificationProfile.php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class StudentGamificationProfile extends Model
{
    use HasFactory;

    protected $fillable = [
        'student_id',
        'total_xp',
        'level',
        'current_streak',
        'longest_streak',
        'last_activity_at',
    ];

    protected $casts = [
        'total_xp'         => 'integer',
        'level'            => 'integer',
        'current_streak'   => 'integer',
        'longest_streak'   => 'integer',
        'last_activity_at' => 'datetime',
    ];

    /* ================= Relationships ================= */

    public function student(): BelongsTo
    {
        return $this->belongsTo(User::class, 'student_id');
    }

    /* ================= Helpers (Ø§Ø®ØªÛŒØ§Ø±ÛŒ ÙˆÙ„ÛŒ Ù…ÙÛŒØ¯) ================= */

    public function addXp(int $xp): void
    {
        $this->increment('total_xp', $xp);
    }

    public function touchActivity(): void
    {
        $this->last_activity_at = now();
        $this->save();
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 62: StudentGoal.php
ğŸ“ PATH: app/Models/StudentGoal.php
ğŸ“ SIZE: 381 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:37
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentGoal extends Model
{
    use HasFactory;

    protected $table = 'student_goals';

    protected $fillable = ['student_id', 'goal_type', 'title', 'description', 'target_date', 'status', 'priority', 'related_subject_id', 'related_topic_id'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 63: StudentLearningProfile.php
ğŸ“ PATH: app/Models/StudentLearningProfile.php
ğŸ“ SIZE: 390 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:41
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentLearningProfile extends Model
{
    use HasFactory;

    protected $table = 'student_learning_profiles';

    protected $fillable = ['student_id', 'preferred_style', 'pace_level', 'study_time_per_day', 'goals_json', 'counselor_notes', 'ai_summary'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 64: StudentProfile.php
ğŸ“ PATH: app/Models/StudentProfile.php
ğŸ“ SIZE: 351 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:31:45
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentProfile extends Model
{
    use HasFactory;

    protected $table = 'student_profiles';

    protected $fillable = ['user_id', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'national_code'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 65: Subfield.php
ğŸ“ PATH: app/Models/Subfield.php
ğŸ“ SIZE: 847 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:32:50
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Subfield extends Model
{
    use HasFactory;

    protected $table = 'subfields';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'field_id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // Ø±ÙˆØ§Ø¨Ø·
    public function field(){ return $this->belongsTo(\App\Models\Field::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 66: Subject.php
ğŸ“ PATH: app/Models/Subject.php
ğŸ“ SIZE: 1,509 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:19:11
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Subject extends Model
{
    use HasFactory;

    protected $table = 'subjects';
    public $incrementing = false;
    protected $keyType = 'string';

    public function section()     { return $this->belongsTo(\App\Models\Section::class); }
    public function grade()       { return $this->belongsTo(\App\Models\Grade::class); }
    public function branch()      { return $this->belongsTo(\App\Models\Branch::class); }
    public function field()       { return $this->belongsTo(\App\Models\Field::class); }
    public function subfield()    { return $this->belongsTo(\App\Models\Subfield::class); }
    public function subjectType() { return $this->belongsTo(\App\Models\SubjectType::class); }

    protected $fillable = [
        'id',
        'title_fa',
        'slug',
        'code',
        'hours',
        'sort_order',
        'is_active',
        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_type_id',
    ];




    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }



    // exams pivot
    public function exams()
    {
        return $this->belongsToMany(Exam::class, 'exam_subject', 'subject_id', 'exam_id');
    }

}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 67: SubjectType.php
ğŸ“ PATH: app/Models/SubjectType.php
ğŸ“ SIZE: 775 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:39:12
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class SubjectType extends Model
{
    use HasFactory;

    protected $table = 'subject_types';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // Ø±ÙˆØ§Ø¨Ø·
    public function subjects()
    {
        return $this->hasMany(Subject::class, 'subject_type_id');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 68: TeacherProfile.php
ğŸ“ PATH: app/Models/TeacherProfile.php
ğŸ“ SIZE: 349 bytes
ğŸ•’ MODIFIED: 2025-12-06 10:32:02
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class TeacherProfile extends Model
{
    use HasFactory;

    protected $table = 'teacher_profiles';

    protected $fillable = ['user_id', 'bio', 'main_section_id', 'main_branch_id', 'main_field_id', 'main_subfield_id'];
}
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 69: Topic.php
ğŸ“ PATH: app/Models/Topic.php
ğŸ“ SIZE: 733 bytes
ğŸ•’ MODIFIED: 2025-12-07 06:05:36
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Topic extends Model
{
    use HasFactory;

    protected $table = 'topics';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'subject_id',
        'title_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    public function subject()
    {
        return $this->belongsTo(Subject::class, 'subject_id');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 70: User.php
ğŸ“ PATH: app/Models/User.php
ğŸ“ SIZE: 5,248 bytes
ğŸ•’ MODIFIED: 2025-12-06 20:37:36
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Notifications\Notifiable;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\HasOne;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Support\Str;

/**
 * User Model (Smart-Edu)
 * - Roles are stored in roles table and role_user pivot (single-role)
 * - NO dependency on users.role column
 *
 * users columns:
 * id, name, email, phone, password, status, is_active, created_at, updated_at
 */
class User extends Authenticatable
{
    use HasFactory, Notifiable;

    public $incrementing = false;
    protected $keyType = 'string';

    /**
     * Mass Assignment fields
     */
    protected $fillable = [
        'id',
        'name',
        'email',
        'phone',
        'password',
        'status',
        // 'role'  âŒ Ø­Ø°Ù Ø´Ø¯ (Ù†Ù‚Ø´ Ø§Ø² pivot Ø®ÙˆØ§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
        'is_active',
    ];

    /**
     * Hidden fields
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * Casts
     */
    protected $casts = [
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
        'is_active'  => 'boolean',
    ];

    // ==========================================================
    // Role helpers (PIVOT-BASED)
    // ==========================================================

    /**
     * Backward compatible attribute accessor:
     * Ø§Ú¯Ø± Ø¬Ø§ÛŒÛŒ Ù‡Ù†ÙˆØ² $user->role Ø±Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯ØŒ
     * Ø§Ø² pivot Ù…Ù‚Ø¯Ø§Ø± role Ø±Ø§ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†ÛŒÙ….
     */
    public function getRoleAttribute($value = null): ?string
    {
        $this->loadMissing('roles');
        return $this->roles->first()?->slug;
    }

    /**
     * single-role primary slug
     */
    public function primaryRole(): ?string
    {
        $this->loadMissing('roles');
        return $this->roles->first()?->slug;
    }

    public function hasRole(string $slug): bool
    {
        $this->loadMissing('roles');
        return $this->roles->contains('slug', $slug);
    }

    public function isStudent(): bool
    {
        return $this->hasRole('student');
    }

    public function isTeacher(): bool
    {
        return $this->hasRole('teacher');
    }

    public function isCounselor(): bool
    {
        return $this->hasRole('counselor');
    }

    public function isAdmin(): bool
    {
        return $this->hasRole('admin');
    }

    /**
     * Scope: filter users by role (pivot-based)
     * Usage: User::role('student')->get()
     */
    public function scopeRole(Builder $query, string $slug): Builder
    {
        return $query->whereHas('roles', function ($q) use ($slug) {
            $q->where('slug', $slug);
        });
    }

    // ==========================================================
    // Relationships
    // ==========================================================

    /**
     * Roles (pivot: role_user)
     */
    public function roles(): BelongsToMany
    {
        return $this->belongsToMany(
            Role::class,
            "role_user",
            "user_id",
            "role_id"
        );
    }

    /**
     * Classrooms created by this user as teacher
     */
    public function teachingClassrooms(): HasMany
    {
        return $this->hasMany(Classroom::class, 'teacher_id');
    }

    /**
     * Backward compatible alias for old code.
     */
    public function taughtClassrooms(): HasMany
    {
        return $this->teachingClassrooms();
    }

    /**
     * Classrooms the user joined as student
     * pivot: classroom_user (classroom_id, user_id)
     */
    public function classrooms(): BelongsToMany
    {
        return $this->belongsToMany(
            Classroom::class,
            'classroom_user',
            'user_id',
            'classroom_id'
        );
    }

    /**
     * Student profile
     */
    public function studentProfile(): HasOne
    {
        return $this->hasOne(StudentProfile::class, 'user_id');
    }

    /**
     * Teacher profile
     */
    public function teacherProfile(): HasOne
    {
        return $this->hasOne(TeacherProfile::class, 'user_id');
    }

    /**
     * Counselor profile (optional)
     */
    public function counselorProfile(): HasOne
    {
        return $this->hasOne(CounselorProfile::class, 'user_id');
    }

    /**
     * Exams created by this user as teacher
     */
    public function examsCreated(): HasMany
    {
        return $this->hasMany(Exam::class, 'teacher_id');
    }

    // ==========================================================
    // Boot (auto-generate string id)
    // ==========================================================
    protected static function booted()
    {
        static::creating(function ($user) {
            if (empty($user->id)) {
                // Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ id Ù‡Ù…ÙˆÙ† Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø§Ø´Ù‡:
                // $user->id = $user->phone;

                // Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª UUID:
                $user->id = (string) Str::uuid();
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 71: XpLog.php
ğŸ“ PATH: app/Models/XpLog.php
ğŸ“ SIZE: 603 bytes
ğŸ•’ MODIFIED: 2025-12-03 08:53:30
----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class XpLog extends Model
{
    protected $fillable = [
        'student_id',
        'source_type',   // exam | quiz | streak | ...
        'source_id',     // id Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù‡Ù…ÙˆÙ† source
        'xp_amount',
    ];

    protected $casts = [
        'student_id' => 'integer',
        'source_id'  => 'integer',
        'xp_amount'  => 'integer',
    ];

    public function student(): BelongsTo
    {
        return $this->belongsTo(User::class, 'student_id');
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 72: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/classrooms/index.blade.php
ğŸ“ SIZE: 3,182 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:12:22
----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</h5>

        <form class="d-flex" method="GET">
            <input name="q" value="{{ request('q') }}"
                   class="form-control form-control-sm me-2"
                   placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¹Ù†ÙˆØ§Ù†/Ú©Ø¯ Ú©Ù„Ø§Ø³">
            <button class="btn btn-sm btn-primary">Ø¬Ø³ØªØ¬Ùˆ</button>
        </form>
    </div>

    @if(session('success'))
        <div class="alert alert-success py-2">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>Ø¹Ù†ÙˆØ§Ù†</th>
                    <th>Ú©Ø¯</th>
                    <th>Ù…Ø¹Ù„Ù‘Ù…</th>
                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                    <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                </tr>
                </thead>
                <tbody>
                @forelse($items as $i => $c)
                    <tr>
                        <td>{{ $items->firstItem() + $i }}</td>
                        <td class="fw-semibold">{{ $c->title ?? '---' }}</td>
                        <td>{{ $c->code ?? '---' }}</td>
                        <td>{{ $c->teacher_name ?? ($c->teacher->name ?? '---') }}</td>
                        <td>
                            @if(($c->is_active ?? true))
                                <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                            @else
                                <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                            @endif
                        </td>
                        <td class="text-end">
                            <a href="{{ route('admin.classrooms.show', $c->id) }}"
                               class="btn btn-sm btn-outline-primary">
                                Ù…Ø´Ø§Ù‡Ø¯Ù‡
                            </a>

                            <form action="{{ route('admin.classrooms.destroy', $c->id) }}"
                                  method="POST" class="d-inline"
                                  onsubmit="return confirm('Ú©Ù„Ø§Ø³ Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                @csrf
                                @method('DELETE')
                                <button class="btn btn-sm btn-outline-danger">
                                    Ø­Ø°Ù
                                </button>
                            </form>
                        </td>
                    </tr>
                @empty
                    <tr><td colspan="6" class="text-center py-4 text-muted">Ú©Ù„Ø§Ø³ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</td></tr>
                @endforelse
                </tbody>
            </table>
        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 73: show.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/classrooms/show.blade.php
ğŸ“ SIZE: 2,524 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:12:42
----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³</h5>
        <a href="{{ route('admin.classrooms.index') }}" class="btn btn-sm btn-secondary">
            Ø¨Ø±Ú¯Ø´Øª
        </a>
    </div>

    @if(session('success'))
        <div class="alert alert-success py-2">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="text-muted small">Ø¹Ù†ÙˆØ§Ù†</div>
                    <div class="fw-semibold">{{ $classroom->title ?? '---' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="text-muted small">Ú©Ø¯ Ú©Ù„Ø§Ø³</div>
                    <div class="fw-semibold">{{ $classroom->code ?? '---' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="text-muted small">Ù…Ø¹Ù„Ù‘Ù…</div>
                    <div class="fw-semibold">
                        {{ $classroom->teacher_name ?? ($classroom->teacher->name ?? '---') }}
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª</div>
                    <div class="fw-semibold">
                        @if(($classroom->is_active ?? true))
                            <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                        @else
                            <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                        @endif
                    </div>
                </div>
            </div>

            <hr>

            <form method="POST" action="{{ route('admin.classrooms.update', $classroom->id) }}">
                @csrf
                @method('PUT')

                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="is_active" value="1"
                        {{ ($classroom->is_active ?? true) ? 'checked' : '' }}>
                    <label class="form-check-label">Ú©Ù„Ø§Ø³ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯</label>
                </div>

                <button class="btn btn-sm btn-primary mt-3">Ø°Ø®ÛŒØ±Ù‡ ÙˆØ¶Ø¹ÛŒØª</button>
            </form>
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 74: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/exams/index.blade.php
ğŸ“ SIZE: 1,991 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:21:19
----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">
    <h5 class="fw-bold mb-3">Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</h5>

    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>Ø¹Ù†ÙˆØ§Ù†</th>
                        <th>ÙˆØ¶Ø¹ÛŒØª</th>
                        <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>
                <tbody>
                @forelse($items as $i => $e)
                    <tr>
                        <td>{{ method_exists($items,'firstItem') ? $items->firstItem()+$i : $i+1 }}</td>
                        <td>{{ $e->title ?? $e->name ?? '---' }}</td>
                        <td>
                            @if(($e->is_active ?? true))
                                <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                            @else
                                <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                            @endif
                        </td>
                        <td class="text-end">
                            <a href="{{ route('admin.exams.show', $e->id) }}"
                               class="btn btn-sm btn-outline-primary">
                                Ù…Ø´Ø§Ù‡Ø¯Ù‡
                            </a>
                        </td>
                    </tr>
                @empty
                    <tr><td colspan="4" class="text-center py-4 text-muted">Ø¢Ø²Ù…ÙˆÙ†ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</td></tr>
                @endforelse
                </tbody>
            </table>
        </div>

        @if(method_exists($items,'links'))
        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
        @endif
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 75: show.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/exams/show.blade.php
ğŸ“ SIZE: 879 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:21:44
----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø¬Ø²Ø¦ÛŒØ§Øª Ø¢Ø²Ù…ÙˆÙ†</h5>
        <a href="{{ route('admin.exams.index') }}" class="btn btn-sm btn-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="text-muted small">Ø¹Ù†ÙˆØ§Ù†</div>
            <div class="fw-semibold mb-3">{{ $exam->title ?? $exam->name ?? '---' }}</div>

            <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª</div>
            @if(($exam->is_active ?? true))
                <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
            @else
                <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
            @endif
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 76: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/index.blade.php
ğŸ“ SIZE: 9,443 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:14:51
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ†')

@section('content')
<div class="container-fluid py-3">

    {{-- Ø¹Ù†ÙˆØ§Ù† --}}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="mb-0">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ†</h4>
        <span class="text-muted small">Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: {{ now()->format('Y/m/d H:i') }}</span>
    </div>

    {{-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø± --}}
    <div class="row g-3 mb-4">

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§</div>
                    <div class="fs-3 fw-bold">{{ $counts['admins'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">Ù…Ø¹Ù„Ù…â€ŒÙ‡Ø§</div>
                    <div class="fs-3 fw-bold">{{ $counts['teachers'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§</div>
                    <div class="fs-3 fw-bold">{{ $counts['students'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</div>
                    <div class="fs-3 fw-bold">{{ $counts['classrooms'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">Ø¯Ø±ÙˆØ³</div>
                    <div class="fs-3 fw-bold">{{ $counts['subjects'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</div>
                    <div class="fs-3 fw-bold">{{ $counts['exams'] }}</div>
                </div>
            </div>
        </div>

    </div>


    <div class="row g-3">

        {{-- Ø¢Ø®Ø±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù† --}}
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white fw-bold">
                    Ø¢Ø®Ø±ÛŒÙ† Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>Ù†Ø§Ù…</th>
                                    <th>Ø´Ù…Ø§Ø±Ù‡</th>
                                    <th>Ù†Ù‚Ø´</th>
                                    <th class="text-nowrap">ØªØ§Ø±ÛŒØ®</th>
                                </tr>
                            </thead>
                            <tbody>
                                @forelse($latestUsers as $u)
                                    <tr>
                                        <td>{{ $u->name ?? '---' }}</td>
                                        <td>{{ $u->phone }}</td>
                                        <td>
                                            <span class="badge bg-secondary">
                                                {{ $u->role ?? 'guest' }}
                                            </span>
                                        </td>
                                        <td class="small text-muted text-nowrap">
                                            {{ $u->created_at?->format('Y/m/d') }}
                                        </td>
                                    </tr>
                                @empty
                                    <tr>
                                        <td colspan="4" class="text-center text-muted py-4">
                                            Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                                        </td>
                                    </tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer bg-white text-end">
                    <a href="{{ route('admin.users.index') }}" class="btn btn-sm btn-outline-primary">
                        Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                    </a>
                </div>
            </div>
        </div>


        {{-- Ø¢Ø®Ø±ÛŒÙ† Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ --}}
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white fw-bold">
                    Ø¢Ø®Ø±ÛŒÙ† Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
                </div>

                <div class="card-body p-0">
                    @if($latestClassrooms->count())
                        <div class="table-responsive">
                            <table class="table table-hover mb-0 align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                        <th>Ù…Ø¹Ù„Ù…</th>
                                        <th class="text-nowrap">ØªØ§Ø±ÛŒØ®</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach($latestClassrooms as $c)
                                        <tr>
                                            <td>{{ $c->title ?? $c->name ?? '---' }}</td>
                                            <td>{{ $c->teacher?->name ?? '---' }}</td>
                                            <td class="small text-muted text-nowrap">
                                                {{ $c->created_at?->format('Y/m/d') }}
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="text-center text-muted py-4">
                            Ú©Ù„Ø§Ø³ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                        </div>
                    @endif
                </div>

                <div class="card-footer bg-white text-end">
                    <a href="{{ route('admin.classrooms.index') }}" class="btn btn-sm btn-outline-primary">
                        Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
                    </a>
                </div>
            </div>
        </div>


        {{-- Ø¢Ø®Ø±ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ --}}
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white fw-bold">
                    Ø¢Ø®Ø±ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </div>

                <div class="card-body p-0">
                    @if($latestExams->count())
                        <div class="table-responsive">
                            <table class="table table-hover mb-0 align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                        <th>Ù…Ø¹Ù„Ù…</th>
                                        <th class="text-nowrap">ØªØ§Ø±ÛŒØ®</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach($latestExams as $e)
                                        <tr>
                                            <td>{{ $e->title ?? '---' }}</td>
                                            <td>{{ $e->teacher?->name ?? '---' }}</td>
                                            <td class="small text-muted text-nowrap">
                                                {{ $e->created_at?->format('Y/m/d') }}
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="text-center text-muted py-4">
                            Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                        </div>
                    @endif
                </div>

                <div class="card-footer bg-white text-end">
                    <a href="{{ route('admin.exams.index') }}" class="btn btn-sm btn-outline-primary">
                        Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                    </a>
                </div>
            </div>
        </div>

    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 77: login.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/login.blade.php
ğŸ“ SIZE: 9,124 bytes
ğŸ•’ MODIFIED: 2025-12-07 12:06:08
----------------------------------------------------------------------

@extends('layouts.guest')

@section('title', 'ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†')

@section('content')
<div class="container d-flex align-items-center justify-content-center min-vh-100">
    <div class="col-12 col-md-6 col-lg-4">
        <div class="card shadow-sm border-0 rounded-4">
            <div class="card-body p-4">

                <h5 class="fw-bold mb-1 text-center">ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†</h5>
                <p class="text-muted small text-center mb-4">
                    Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø§Ø¯Ù…ÛŒÙ† Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯
                </p>

                {{-- Alerts --}}
                <div id="alertBox" class="alert d-none" role="alert"></div>

                {{-- Step 1: Phone --}}
                <div id="stepPhone">
                    <div class="mb-3">
                        <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Ø¨Ø¯ÙˆÙ† 0)</label>
                        <div class="input-group">
                            <span class="input-group-text">+98</span>
                            <input type="text" class="form-control text-start" id="phone"
                                   placeholder="9xxxxxxxxx" maxlength="10" autocomplete="tel">
                        </div>
                        <div class="form-text text-danger d-none" id="phoneError"></div>
                    </div>

                    <button id="btnSendOtp" class="btn btn-primary w-100">
                        Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ§ÛŒÛŒØ¯
                    </button>
                </div>

                {{-- Step 2: Code --}}
                <div id="stepCode" class="d-none">
                    <div class="mb-3">
                        <label class="form-label">Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Û¶ Ø±Ù‚Ù…ÛŒ</label>
                        <input type="text" class="form-control text-center fs-5 tracking-wide"
                               id="code" placeholder="------" maxlength="6" inputmode="numeric">
                        <div class="form-text text-danger d-none" id="codeError"></div>
                    </div>

                    <button id="btnVerifyOtp" class="btn btn-success w-100 mb-3">
                        ØªØ§ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯
                    </button>

                    <div class="d-flex justify-content-between align-items-center small">
                        <button id="btnResendOtp" class="btn btn-link p-0 text-decoration-none" disabled>
                            Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯
                        </button>
                        <span class="text-muted">
                            <span id="timer">01:00</span> ØªØ§ Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯
                        </span>
                    </div>

                    <hr class="my-3">

                    <button id="btnBack" class="btn btn-outline-secondary w-100">
                        ØªØºÛŒÛŒØ± Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„
                    </button>
                </div>

            </div>
        </div>

        <p class="text-center text-muted small mt-3">
            Smart-Edu Admin Panel
        </p>
    </div>
</div>
@endsection

@push('scripts')
<script>
(function () {
    const sendUrl   = "{{ route('admin.send-otp') }}";
    const verifyUrl = "{{ route('admin.verify-otp') }}";

    const csrfToken = "{{ csrf_token() }}";

    const stepPhone = document.getElementById('stepPhone');
    const stepCode  = document.getElementById('stepCode');

    const phoneInput = document.getElementById('phone');
    const codeInput  = document.getElementById('code');

    const btnSendOtp   = document.getElementById('btnSendOtp');
    const btnVerifyOtp = document.getElementById('btnVerifyOtp');
    const btnResendOtp = document.getElementById('btnResendOtp');
    const btnBack      = document.getElementById('btnBack');

    const alertBox  = document.getElementById('alertBox');
    const phoneError = document.getElementById('phoneError');
    const codeError  = document.getElementById('codeError');
    const timerEl    = document.getElementById('timer');

    let timer = 60;
    let timerInterval = null;
    let lastPhone = null;

    function showAlert(type, message) {
        alertBox.className = `alert alert-${type}`;
        alertBox.textContent = message;
        alertBox.classList.remove('d-none');
    }
    function hideAlert() {
        alertBox.classList.add('d-none');
    }

    function showPhoneError(msg) {
        phoneError.textContent = msg;
        phoneError.classList.remove('d-none');
    }
    function hidePhoneError() {
        phoneError.classList.add('d-none');
    }

    function showCodeError(msg) {
        codeError.textContent = msg;
        codeError.classList.remove('d-none');
    }
    function hideCodeError() {
        codeError.classList.add('d-none');
    }

    function validatePhone(phone) {
        return /^9\d{9}$/.test(phone);
    }

    function startTimer() {
        timer = 60;
        btnResendOtp.disabled = true;

        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timer--;
            const m = String(Math.floor(timer / 60)).padStart(2, '0');
            const s = String(timer % 60).padStart(2, '0');
            timerEl.textContent = `${m}:${s}`;

            if (timer <= 0) {
                clearInterval(timerInterval);
                btnResendOtp.disabled = false;
                timerEl.textContent = "00:00";
            }
        }, 1000);
    }

    async function postJson(url, data) {
        const res = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRF-TOKEN": csrfToken,
                "Accept": "application/json"
            },
            body: JSON.stringify(data)
        });
        const json = await res.json().catch(() => ({}));
        return { ok: res.ok, status: res.status, json };
    }

    btnSendOtp.addEventListener('click', async () => {
        hideAlert(); hidePhoneError();

        const phone = phoneInput.value.trim();
        if (!validatePhone(phone)) {
            showPhoneError("Ø´Ù…Ø§Ø±Ù‡ Ø¨Ø§ÛŒØ¯ Ù…Ø«Ù„ 9xxxxxxxxx Ø¨Ø§Ø´Ø¯.");
            return;
        }

        btnSendOtp.disabled = true;
        btnSendOtp.innerHTML = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';

        const { ok, status, json } = await postJson(sendUrl, { phone });

        btnSendOtp.disabled = false;
        btnSendOtp.innerHTML = 'Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯ ØªØ§ÛŒÛŒØ¯';

        if (!ok) {
            showAlert("danger", json.message || "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ú©Ø¯.");
            return;
        }

        lastPhone = phone;
        showAlert("success", json.message || "Ú©Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.");

        stepPhone.classList.add('d-none');
        stepCode.classList.remove('d-none');

        codeInput.value = "";
        codeInput.focus();

        startTimer();
    });

    btnVerifyOtp.addEventListener('click', async () => {
        hideAlert(); hideCodeError();

        const code = codeInput.value.trim();
        if (!/^\d{6}$/.test(code)) {
            showCodeError("Ú©Ø¯ Ø¨Ø§ÛŒØ¯ Û¶ Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯.");
            return;
        }

        btnVerifyOtp.disabled = true;
        btnVerifyOtp.innerHTML = 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...';

        const { ok, json } = await postJson(verifyUrl, {
            phone: lastPhone,
            code: code
        });

        btnVerifyOtp.disabled = false;
        btnVerifyOtp.innerHTML = 'ØªØ§ÛŒÛŒØ¯ Ùˆ ÙˆØ±ÙˆØ¯';

        if (!ok) {
            showAlert("danger", json.message || "Ú©Ø¯ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.");
            return;
        }

        showAlert("success", json.message || "ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚.");

        // Ø±ÛŒØ¯Ø§ÛŒØ±Ú©Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ†
        if (json.redirect) {
            window.location.href = json.redirect;
        }
    });

    btnResendOtp.addEventListener('click', async () => {
        hideAlert(); hideCodeError();

        if (!lastPhone) return;

        btnResendOtp.disabled = true;
        const { ok, json } = await postJson(sendUrl, { phone: lastPhone });

        if (!ok) {
            btnResendOtp.disabled = false;
            showAlert("danger", json.message || "Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯.");
            return;
        }

        showAlert("success", json.message || "Ú©Ø¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯.");
        startTimer();
    });

    btnBack.addEventListener('click', () => {
        hideAlert();
        stepCode.classList.add('d-none');
        stepPhone.classList.remove('d-none');

        phoneInput.focus();
        clearInterval(timerInterval);
    });

    // Enter key support
    phoneInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') btnSendOtp.click();
    });
    codeInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') btnVerifyOtp.click();
    });

})();
</script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 78: _form.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/_form.blade.php
ğŸ“ SIZE: 5,808 bytes
ğŸ•’ MODIFIED: 2025-12-07 08:12:45
----------------------------------------------------------------------

@php
    /**
     * ÙØ±Ù… Ù…Ø´ØªØ±Ú© Taxonomy
     * Ø§Ù†ØªØ¸Ø§Ø±:
     * $title, $routeName, $item (Ø¯Ø± edit), $mode=create|edit
     * $formFields: Ø¢Ø±Ø§ÛŒÙ‡â€ŒÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§
     *
     * Ù‡Ø± ÙÛŒÙ„Ø¯:
     * [
     *   'name' => 'slug',
     *   'label'=> 'Ø§Ø³Ù„Ø§Ú¯',
     *   'type' => 'text|number|textarea|select|checkbox',
     *   'options' => [ ['value'=>'x','label'=>'y'], ... ] Ø¨Ø±Ø§ÛŒ select
     *   'required' => true|false
     *   'placeholder' => '...'
     * ]
     */

    $title = $title ?? 'Ø¢ÛŒØªÙ…';
    $routeName = $routeName ?? 'admin.sections';
    $mode = $mode ?? 'create';
    $item = $item ?? null;

    $formFields = $formFields ?? [
        [
            'name' => 'name_fa',
            'label' => 'Ù†Ø§Ù… ÙØ§Ø±Ø³ÛŒ',
            'type' => 'text',
            'required' => true,
            'placeholder' => 'Ù…Ø«Ø§Ù„: ÙÙ†ÛŒ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ',
        ],
        [
            'name' => 'slug',
            'label' => 'Ø§Ø³Ù„Ø§Ú¯',
            'type' => 'text',
            'required' => true,
            'placeholder' => 'Ù…Ø«Ø§Ù„: technical',
        ],
        ['name' => 'sort_order', 'label' => 'ØªØ±ØªÛŒØ¨', 'type' => 'number', 'required' => false, 'placeholder' => '0'],
        ['name' => 'is_active', 'label' => 'ÙØ¹Ø§Ù„ Ø§Ø³ØªØŸ', 'type' => 'checkbox'],
    ];

    // Ø¢Ø¯Ø±Ø³ action
    $action = $mode === 'edit' ? route($routeName . '.update', $item->id) : route($routeName . '.store');
@endphp

<form action="{{ $action }}" method="POST">
    @csrf
    @if ($mode === 'edit')
        @method('PUT')
    @endif

    <div class="row g-3">

        @foreach ($formFields as $field)
            @php
                $name = $field['name'];
                $type = $field['type'] ?? 'text';
                $label = $field['label'] ?? $name;
                $required = $field['required'] ?? false;
                $placeholder = $field['placeholder'] ?? '';
                $options = $field['options'] ?? [];
                $value = old($name, $item ? data_get($item, $name) : null);
            @endphp

            {{-- checkbox --}}
            @if ($type === 'checkbox')
                <div class="col-12">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="{{ $name }}" name="{{ $name }}"
                            value="1"
                            {{ old($name, $item ? (data_get($item, $name) ? 1 : 0) : 1) ? 'checked' : '' }}>
                        <label class="form-check-label fw-bold" for="{{ $name }}">
                            {{ $label }}
                        </label>
                    </div>
                </div>

                {{-- textarea --}}
            @elseif($type === 'textarea')
                <div class="col-12">
                    <label for="{{ $name }}" class="form-label fw-bold">
                        {{ $label }} @if ($required)
                            <span class="text-danger">*</span>
                        @endif
                    </label>
                    <textarea id="{{ $name }}" name="{{ $name }}" rows="4"
                        class="form-control @error($name) is-invalid @enderror" placeholder="{{ $placeholder }}"
                        @if ($required) required @endif>{{ $value }}</textarea>
                    @error($name)
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror
                </div>

                {{-- select --}}
            @elseif($type === 'select')
                <div class="col-md-6">
                    <label for="{{ $name }}" class="form-label fw-bold">
                        {{ $label }} @if ($required)
                            <span class="text-danger">*</span>
                        @endif
                    </label>
                    <select id="{{ $name }}" name="{{ $name }}"
                        class="form-select @error($name) is-invalid @enderror"
                        @if ($required) required @endif>
                        <option value="">-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --</option>
                        @foreach ($options as $opt)
                            <option value="{{ $opt['value'] }}"
                                {{ (string) $value === (string) $opt['value'] ? 'selected' : '' }}>
                                {{ $opt['label'] }}
                            </option>
                        @endforeach
                    </select>
                    @error($name)
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror
                </div>

                {{-- number/text --}}
            @else
                <div class="col-md-6">
                    <label for="{{ $name }}" class="form-label fw-bold">
                        {{ $label }} @if ($required)
                            <span class="text-danger">*</span>
                        @endif
                    </label>
                    <input type="{{ $type }}" id="{{ $name }}" name="{{ $name }}"
                        value="{{ $value }}" class="form-control @error($name) is-invalid @enderror"
                        placeholder="{{ $placeholder }}" @if ($required) required @endif>
                    @error($name)
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror
                </div>
            @endif
        @endforeach
    </div>

    <div class="d-flex gap-2 mt-4">
        <button type="submit" class="btn btn-primary">
            {{ $mode === 'edit' ? 'Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª' : 'Ø§ÛŒØ¬Ø§Ø¯' }}
        </button>

        <a href="{{ route($routeName . '.index') }}" class="btn btn-secondary">
            Ø¨Ø§Ø²Ú¯Ø´Øª
        </a>
    </div>
</form>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 79: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/branches/create.blade.php
ğŸ“ SIZE: 3,023 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:25:59
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/branches/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§') . ' | Ø§ÛŒØ¬Ø§Ø¯')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø§ÛŒØ¬Ø§Ø¯ {{ $title ?? 'Ø´Ø§Ø®Ù‡' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- section_id --}}
                <div class="mb-3">
                    <label class="form-label">Ù…Ù‚Ø·Ø¹</label>
                    <select name="section_id" class="form-select" required>
                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                        @foreach($sections as $s)
                            <option value="{{ $s->id }}" {{ old('section_id') == $s->id ? 'selected' : '' }}>
                                {{ $s->name_fa }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ø´Ø§Ø®Ù‡</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 80: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/branches/edit.blade.php
ğŸ“ SIZE: 4,023 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:28:20
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/branches/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§') . ' | ÙˆÛŒØ±Ø§ÛŒØ´')

@section('content')
<div class="container-fluid py-3">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">
            ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title ?? 'Ø´Ø§Ø®Ù‡' }}
        </h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">
            Ø¨Ø±Ú¯Ø´Øª
        </a>
    </div>

    {{-- Errors --}}
    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    {{-- Form Card --}}
    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- section_id --}}
                @if(isset($sections))
                    <div class="mb-3">
                        <label class="form-label">Ù…Ù‚Ø·Ø¹</label>
                        <select name="section_id" class="form-select" required>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}"
                                    {{ old('section_id', $item->section_id) == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ø´Ø§Ø®Ù‡</label>
                    <input type="text"
                           name="name_fa"
                           class="form-control"
                           required
                           value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text"
                           name="slug"
                           class="form-control"
                           required
                           value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number"
                           name="sort_order"
                           class="form-control"
                           min="0"
                           value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input"
                           type="checkbox"
                           name="is_active"
                           value="1"
                           id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                {{-- submit --}}
                <div class="d-flex justify-content-end gap-2">
                    <button type="submit" class="btn btn-primary">
                        Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                    </button>
                    <a href="{{ route($routeName.'.index') }}" class="btn btn-light">
                        Ø§Ù†ØµØ±Ø§Ù
                    </a>
                </div>

            </form>
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 81: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/branches/index.blade.php
ğŸ“ SIZE: 4,457 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:25:42
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/branches/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'Ù†Ø§Ù… Ø´Ø§Ø®Ù‡', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">Ù†Ø§Ù… Ù…Ù‚Ø·Ø¹</th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>{{ $item->section?->name_fa ?? '---' }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-muted py-4">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 82: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/create.blade.php
ğŸ“ SIZE: 927 bytes
ğŸ•’ MODIFIED: 2025-12-07 08:13:27
----------------------------------------------------------------------

@extends('layouts.app')

@php
    $title = $title ?? 'Ø¢ÛŒØªÙ…';
    $routeName = $routeName ?? 'admin.sections';
@endphp

@section('title', 'Ø§ÛŒØ¬Ø§Ø¯ ' . $title)

@section('content')
    <div class="container py-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">Ø§ÛŒØ¬Ø§Ø¯ {{ $title }}</h3>
            <a href="{{ route($routeName . '.index') }}" class="btn btn-outline-secondary btn-sm">
                Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª
            </a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                @include('dashboard.admin.taxonomies._form', [
                    'mode' => 'create',
                    'title' => $title,
                    'routeName' => $routeName,
                    'formFields' => $formFields ?? null,
                ])
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 83: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/edit.blade.php
ğŸ“ SIZE: 993 bytes
ğŸ•’ MODIFIED: 2025-12-07 08:14:00
----------------------------------------------------------------------

@extends('layouts.app')

@php
    $title = $title ?? 'Ø¢ÛŒØªÙ…';
    $routeName = $routeName ?? 'admin.sections';
    $item = $item ?? null;
@endphp

@section('title', 'ÙˆÛŒØ±Ø§ÛŒØ´ ' . $title)

@section('content')
    <div class="container py-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title }}</h3>
            <a href="{{ route($routeName . '.index') }}" class="btn btn-outline-secondary btn-sm">
                Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª
            </a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                @include('dashboard.admin.taxonomies._form', [
                    'mode' => 'edit',
                    'title' => $title,
                    'routeName' => $routeName,
                    'item' => $item,
                    'formFields' => $formFields ?? null,
                ])
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 84: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/fields/create.blade.php
ğŸ“ SIZE: 3,024 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:30:23
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/fields/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§') . ' | Ø§ÛŒØ¬Ø§Ø¯')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø§ÛŒØ¬Ø§Ø¯ {{ $title ?? 'Ø²Ù…ÛŒÙ†Ù‡' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- branch_id --}}
                <div class="mb-3">
                    <label class="form-label">Ø´Ø§Ø®Ù‡</label>
                    <select name="branch_id" class="form-select" required>
                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                        @foreach($branches as $b)
                            <option value="{{ $b->id }}" {{ old('branch_id') == $b->id ? 'selected' : '' }}>
                                {{ $b->name_fa }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ø²Ù…ÛŒÙ†Ù‡</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 85: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/fields/edit.blade.php
ğŸ“ SIZE: 3,256 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:30:30
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/fields/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§') . ' | ÙˆÛŒØ±Ø§ÛŒØ´')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title ?? 'Ø²Ù…ÛŒÙ†Ù‡' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- branch_id --}}
                @if(isset($branches))
                    <div class="mb-3">
                        <label class="form-label">Ø´Ø§Ø®Ù‡</label>
                        <select name="branch_id" class="form-select" required>
                            @foreach($branches as $b)
                                <option value="{{ $b->id }}"
                                    {{ old('branch_id', $item->branch_id) == $b->id ? 'selected' : '' }}>
                                    {{ $b->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ø²Ù…ÛŒÙ†Ù‡</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 86: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/fields/index.blade.php
ğŸ“ SIZE: 4,460 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:30:14
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/fields/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'Ù†Ø§Ù… Ø²Ù…ÛŒÙ†Ù‡', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">Ù†Ø§Ù… Ø´Ø§Ø®Ù‡</th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>{{ $item->branch?->name_fa ?? '---' }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-muted py-4">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 87: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/grades/create.blade.php
ğŸ“ SIZE: 4,517 bytes
ğŸ•’ MODIFIED: 2025-12-07 15:46:37
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/grades/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§') . ' | Ø§ÛŒØ¬Ø§Ø¯')

@section('content')
<div class="container-fluid py-3">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">
            Ø§ÛŒØ¬Ø§Ø¯ {{ $title ?? 'Ù¾Ø§ÛŒÙ‡' }}
        </h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-arrow-right"></i>
            Ø¨Ø±Ú¯Ø´Øª
        </a>
    </div>

    {{-- Errors --}}
    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    {{-- Form Card --}}
    <div class="card shadow-sm">
        <div class="card-body">

            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- Parent: Section --}}
                @if(isset($sections))
                    <div class="mb-3">
                        <label class="form-label">Ù…Ù‚Ø·Ø¹</label>
                        <select name="section_id" class="form-select" required>
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}"
                                    {{ old('section_id') == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- value (required in DB) --}}
                <div class="mb-3">
                    <label class="form-label">Ø¹Ø¯Ø¯ Ù¾Ø§ÛŒÙ‡ (value)</label>
                    <input type="number"
                           name="value"
                           class="form-control"
                           min="1"
                           required
                           value="{{ old('value') }}">
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ù¾Ø§ÛŒÙ‡</label>
                    <input type="text"
                           name="name_fa"
                           class="form-control"
                           required
                           value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text"
                           name="slug"
                           class="form-control"
                           required
                           value="{{ old('slug') }}">
                    <div class="form-text">Ù…Ø«Ø§Ù„: paye-aval</div>
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number"
                           name="sort_order"
                           class="form-control"
                           min="0"
                           value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input"
                           type="checkbox"
                           name="is_active"
                           value="1"
                           id="is_active"
                           {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                {{-- Submit --}}
                <div class="d-flex justify-content-end gap-2">
                    <button type="submit" class="btn btn-primary">
                        Ø°Ø®ÛŒØ±Ù‡
                    </button>
                    <a href="{{ route($routeName.'.index') }}" class="btn btn-light">
                        Ø§Ù†ØµØ±Ø§Ù
                    </a>
                </div>

            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 88: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/grades/edit.blade.php
ğŸ“ SIZE: 4,107 bytes
ğŸ•’ MODIFIED: 2025-12-07 15:59:07
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/grades/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§') . ' | ÙˆÛŒØ±Ø§ÛŒØ´')

@section('content')
<div class="container-fluid py-3">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">
            ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title ?? 'Ù¾Ø§ÛŒÙ‡' }}
        </h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">
            Ø¨Ø±Ú¯Ø´Øª
        </a>
    </div>

    {{-- Errors --}}
    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- Parent: Section --}}
                @if(isset($sections))
                    <div class="mb-3">
                        <label class="form-label">Ù…Ù‚Ø·Ø¹</label>
                        <select name="section_id" class="form-select" required>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}"
                                    {{ old('section_id', $item->section_id) == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- value --}}
                <div class="mb-3">
                    <label class="form-label">Ø¹Ø¯Ø¯ Ù¾Ø§ÛŒÙ‡ (value)</label>
                    <input type="number"
                           name="value"
                           class="form-control"
                           min="1"
                           required
                           value="{{ old('value', $item->value) }}">
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ù¾Ø§ÛŒÙ‡</label>
                    <input type="text"
                           name="name_fa"
                           class="form-control"
                           required
                           value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text"
                           name="slug"
                           class="form-control"
                           required
                           value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number"
                           name="sort_order"
                           class="form-control"
                           min="0"
                           value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input"
                           type="checkbox"
                           name="is_active"
                           value="1"
                           id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 89: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/grades/index.blade.php
ğŸ“ SIZE: 5,493 bytes
ğŸ•’ MODIFIED: 2025-12-07 15:49:26
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/grades/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§'))

@php
    // Ø³Ø§Ø®Øª Ù„ÛŒÙ†Ú© Ø³ÙˆØ±Øª Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø³ØªÙˆÙ†
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? '';
    $currentDir  = $dir ?? '';
@endphp

@section('content')
<div class="container-fluid py-4">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    {{-- Success --}}
    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        {{-- Ù†Ø§Ù… Ù¾Ø§ÛŒÙ‡ --}}
                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'Ù†Ø§Ù… Ù¾Ø§ÛŒÙ‡', $currentSort, $currentDir) !!}
                        </th>

                        {{-- Ø§Ø³Ù„Ø§Ú¯ --}}
                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        {{-- Ù…Ù‚Ø¯Ø§Ø± Ù¾Ø§ÛŒÙ‡ --}}
                        <th class="text-nowrap">
                            {!! sortLink('value', 'Ù…Ù‚Ø¯Ø§Ø± Ù¾Ø§ÛŒÙ‡', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´ --}}
                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´', $currentSort, $currentDir) !!}
                        </th>

                        {{-- Ù†Ø§Ù… Ù…Ù‚Ø·Ø¹ (ÙØ¹Ù„Ø§Ù‹ Ø¨Ø¯ÙˆÙ† Ø³ÙˆØ±Øª) --}}
                        <th class="text-nowrap">Ù†Ø§Ù… Ù…Ù‚Ø·Ø¹</th>

                        {{-- ÙˆØ¶Ø¹ÛŒØª --}}
                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            {{-- Ù†Ø§Ù… Ù¾Ø§ÛŒÙ‡ --}}
                            <td>{{ $item->name_fa }}</td>

                            {{-- Ø§Ø³Ù„Ø§Ú¯ --}}
                            <td dir="ltr">{{ $item->slug }}</td>

                            {{-- Ù…Ù‚Ø¯Ø§Ø± Ù¾Ø§ÛŒÙ‡ --}}
                            <td>{{ $item->value }}</td>

                            {{-- ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´ --}}
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            {{-- Ù†Ø§Ù… Ù…Ù‚Ø·Ø¹ --}}
                            <td>{{ $item->section?->name_fa ?? '---' }}</td>

                            {{-- ÙˆØ¶Ø¹ÛŒØª --}}
                            <td>
                                @if ($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            {{-- Ø¹Ù…Ù„ÛŒØ§Øª --}}
                            <td class="text-nowrap">
                                <a href="{{ route($routeName . '.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                <form action="{{ route($routeName . '.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="8" class="text-muted py-4">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        {{-- Pagination --}}
        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 90: form.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/partials/form.blade.php
ğŸ“ SIZE: 2,611 bytes
ğŸ•’ MODIFIED: 2025-12-07 06:40:21
----------------------------------------------------------------------

@php $item = $item ?? null; @endphp

{{-- Ø§Ú¯Ø± FK Ù„Ø§Ø²Ù… Ø¯Ø§Ø´ØªØŒ Ù‡Ø± Ú©Ù†ØªØ±Ù„Ø± Ø¯ÛŒØªØ§ Ù…ÛŒØ¯Ù‡ Ùˆ Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØ®ÙˆÙ†ÛŒÙ… --}}
@if (isset($sections))
    <div class="mb-3">
        <label class="form-label">section_id</label>
        <select name="section_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ù‚Ø·Ø¹</option>
            @foreach ($sections as $s)
                <option value="{{ $s->id }}" @selected(old('section_id', $item->section_id ?? '') == $s->id)>
                    {{ $s->name_fa }}
                </option>
            @endforeach
        </select>
    </div>
@endif

@if (isset($branches))
    <div class="mb-3">
        <label class="form-label">branch_id</label>
        <select name="branch_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø§Ø®Ù‡</option>
            @foreach ($branches as $b)
                <option value="{{ $b->id }}" @selected(old('branch_id', $item->branch_id ?? '') == $b->id)>
                    {{ $b->name_fa }}
                </option>
            @endforeach
        </select>
    </div>
@endif

@if (isset($fields))
    <div class="mb-3">
        <label class="form-label">field_id</label>
        <select name="field_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø²Ù…ÛŒÙ†Ù‡</option>
            @foreach ($fields as $f)
                <option value="{{ $f->id }}" @selected(old('field_id', $item->field_id ?? '') == $f->id)>
                    {{ $f->name_fa }}
                </option>
            @endforeach
        </select>
    </div>
@endif

{{-- ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ --}}
<div class="mb-3">
    <label class="form-label">name_fa</label>
    <input name="name_fa" class="form-control" value="{{ old('name_fa', $item->name_fa ?? '') }}">
</div>

<div class="mb-3">
    <label class="form-label">slug</label>
    <input name="slug" class="form-control" value="{{ old('slug', $item->slug ?? '') }}">
</div>

<div class="mb-3">
    <label class="form-label">sort_order</label>
    <input type="number" name="sort_order" class="form-control" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
</div>

<div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" name="is_active" value="1" @checked(old('is_active', $item->is_active ?? true))>
    <label class="form-check-label">ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯</label>
</div>

@if ($errors->any())
    <div class="alert alert-danger">
        <ul class="mb-0">
            @foreach ($errors->all() as $e)
                <li>{{ $e }}</li>
            @endforeach
        </ul>
    </div>
@endif

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 91: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/sections/create.blade.php
ğŸ“ SIZE: 3,107 bytes
ğŸ•’ MODIFIED: 2025-12-07 06:45:47
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . $title)

@section('content')
    <div class="container py-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title }}</h3>
            <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
                + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
            </a>
        </div>

        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif

        <div class="card shadow-sm">
            <div class="card-body table-responsive">
                <table class="table table-bordered align-middle text-center">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            @foreach ($listColumns as $col)
                                <th>{{ $col }}</th>
                            @endforeach
                            <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                        @forelse($items as $i => $item)
                            <tr>
                                <td>{{ $items->firstItem() + $i }}</td>

                                @foreach ($listColumns as $col)
                                    <td>
                                        @if ($col === 'is_active')
                                            {!! $item->$col
                                                ? '<span class="badge bg-success">ÙØ¹Ø§Ù„</span>'
                                                : '<span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>' !!}
                                        @else
                                            {{ $item->$col ?? '-' }}
                                        @endif
                                    </td>
                                @endforeach

                                <td class="text-nowrap">
                                    <a href="{{ route($routeName . '.edit', $item->id) }}"
                                        class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                    <form action="{{ route($routeName . '.destroy', $item->id) }}" method="POST"
                                        class="d-inline" onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                        @csrf
                                        @method('DELETE')
                                        <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                    </form>
                                </td>
                            </tr>
                        @empty
                            <tr>
                                <td colspan="99">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                            </tr>
                        @endforelse
                    </tbody>
                </table>

                {{ $items->links() }}
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 92: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/sections/edit.blade.php
ğŸ“ SIZE: 775 bytes
ğŸ•’ MODIFIED: 2025-12-07 06:45:47
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÙˆÛŒØ±Ø§ÛŒØ´ ' . $title)

@section('content')
    <div class="container py-4">
        <h3 class="fw-bold mb-3">ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title }}</h3>

        <div class="card shadow-sm">
            <div class="card-body">
                <form action="{{ route($routeName . '.update', $item->id) }}" method="POST">
                    @csrf
                    @method('PUT')

                    @include('dashboard.admin.taxonomies.partials.form', ['item' => $item])

                    <button class="btn btn-primary">Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</button>
                    <a href="{{ route($routeName . '.index') }}" class="btn btn-secondary">Ø¨Ø§Ø²Ú¯Ø´Øª</a>
                </form>
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 93: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/sections/index.blade.php
ğŸ“ SIZE: 4,502 bytes
ğŸ•’ MODIFIED: 2025-12-07 16:17:52
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/sections/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ù…Ù‚Ø·Ø¹â€ŒÙ‡Ø§'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? '';
    $currentDir  = $dir ?? '';
@endphp

@section('content')
<div class="container-fluid py-4">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ù…Ù‚Ø·Ø¹â€ŒÙ‡Ø§' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        {{-- Ù†Ø§Ù… Ù…Ù‚Ø·Ø¹ --}}
                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'Ù†Ø§Ù… Ù…Ù‚Ø·Ø¹', $currentSort, $currentDir) !!}
                        </th>

                        {{-- Ø§Ø³Ù„Ø§Ú¯ --}}
                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´ --}}
                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ÙˆØ¶Ø¹ÛŒØª --}}
                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>
                                @if ($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}" class="btn btn-sm btn-primary">
                                    ÙˆÛŒØ±Ø§ÛŒØ´
                                </a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}" method="POST"
                                      class="d-inline" onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="6" class="text-muted py-4">
                                Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
                            </td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 94: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subfields/create.blade.php
ğŸ“ SIZE: 3,036 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:33:33
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subfields/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§') . ' | Ø§ÛŒØ¬Ø§Ø¯')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø§ÛŒØ¬Ø§Ø¯ {{ $title ?? 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- field_id --}}
                <div class="mb-3">
                    <label class="form-label">Ø²Ù…ÛŒÙ†Ù‡</label>
                    <select name="field_id" class="form-select" required>
                        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                        @foreach($fields as $f)
                            <option value="{{ $f->id }}" {{ old('field_id') == $f->id ? 'selected' : '' }}>
                                {{ $f->name_fa }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ø²ÛŒØ±Ø±Ø´ØªÙ‡</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 95: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subfields/edit.blade.php
ğŸ“ SIZE: 3,265 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:33:24
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subfields/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§') . ' | ÙˆÛŒØ±Ø§ÛŒØ´')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title ?? 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- field_id --}}
                @if(isset($fields))
                    <div class="mb-3">
                        <label class="form-label">Ø²Ù…ÛŒÙ†Ù‡</label>
                        <select name="field_id" class="form-select" required>
                            @foreach($fields as $f)
                                <option value="{{ $f->id }}"
                                    {{ old('field_id', $item->field_id) == $f->id ? 'selected' : '' }}>
                                    {{ $f->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ø²ÛŒØ±Ø±Ø´ØªÙ‡</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 96: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subfields/index.blade.php
ğŸ“ SIZE: 4,476 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:33:56
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subfields/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'Ù†Ø§Ù… Ø²ÛŒØ±Ø±Ø´ØªÙ‡', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">Ù†Ø§Ù… Ø²Ù…ÛŒÙ†Ù‡</th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>{{ $item->field?->name_fa ?? '---' }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-muted py-4">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 97: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subject-types/create.blade.php
ğŸ“ SIZE: 2,419 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:39:41
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subject_types/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ù†ÙˆØ¹ Ø¯Ø±Ø³â€ŒÙ‡Ø§') . ' | Ø§ÛŒØ¬Ø§Ø¯')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø§ÛŒØ¬Ø§Ø¯ {{ $title ?? 'Ù†ÙˆØ¹ Ø¯Ø±Ø³' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ù†ÙˆØ¹ Ø¯Ø±Ø³</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 98: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subject-types/edit.blade.php
ğŸ“ SIZE: 2,571 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:39:32
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subject_types/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ù†ÙˆØ¹ Ø¯Ø±Ø³â€ŒÙ‡Ø§') . ' | ÙˆÛŒØ±Ø§ÛŒØ´')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÙˆÛŒØ±Ø§ÛŒØ´ {{ $title ?? 'Ù†ÙˆØ¹ Ø¯Ø±Ø³' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">Ù†Ø§Ù… Ù†ÙˆØ¹ Ø¯Ø±Ø³</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                    </label>
                </div>

                <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 99: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subject-types/index.blade.php
ğŸ“ SIZE: 4,329 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:39:52
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subject_types/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ù†ÙˆØ¹ Ø¯Ø±Ø³â€ŒÙ‡Ø§'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ù†ÙˆØ¹ Ø¯Ø±Ø³â€ŒÙ‡Ø§' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'Ù†Ø§Ù… Ù†ÙˆØ¹ Ø¯Ø±Ø³', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="6" class="text-muted py-4">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 100: create.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subjects/create.blade.php
ğŸ“ SIZE: 11,533 bytes
ğŸ•’ MODIFIED: 2025-12-08 13:00:22
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subjects/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ø¯Ø±ÙˆØ³') . ' | Ø§ÛŒØ¬Ø§Ø¯')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ø§ÛŒØ¬Ø§Ø¯ {{ $title ?? 'Ø¯Ø±Ø³' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">Ø¨Ø±Ú¯Ø´Øª</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                <div class="row g-3">

                    <div class="col-md-6">
                        <label class="form-label">Ù†Ø§Ù… Ø¯Ø±Ø³</label>
                        <input type="text" name="title_fa" class="form-control"
                               required value="{{ old('title_fa') }}">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">Ø§Ø³Ù„Ø§Ú¯</label>
                        <input type="text" name="slug" class="form-control"
                               required value="{{ old('slug') }}">
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Ú©Ø¯ Ø¯Ø±Ø³</label>
                        <input type="text" name="code" class="form-control"
                               value="{{ old('code') }}">
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">Ø³Ø§Ø¹Øª</label>
                        <input type="number" name="hours" min="0" class="form-control"
                               value="{{ old('hours', 0) }}">
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´</label>
                        <input type="number" name="sort_order" min="0" class="form-control"
                               value="{{ old('sort_order', 0) }}">
                    </div>

                    {{-- =========================
                         Taxonomy FK (Smart)
                       ========================= --}}

                    {{-- Ù…Ù‚Ø·Ø¹ --}}
                    <div class="col-md-4">
                        <label class="form-label">Ù…Ù‚Ø·Ø¹</label>
                        <select id="section_id" name="section_id" class="form-select" required
                                data-grades-url="{{ route('admin.api.grades.by-section', ':id') }}"
                                data-branches-url="{{ route('admin.api.branches.by-section', ':id') }}">
                            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}" {{ old('section_id') == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>

                    {{-- Ù¾Ø§ÛŒÙ‡ (ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù…Ù‚Ø·Ø¹) --}}
                    <div class="col-md-4">
                        <label class="form-label">Ù¾Ø§ÛŒÙ‡</label>
                        <select id="grade_id" name="grade_id" class="form-select" required disabled>
                            <option value="">Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                        </select>
                    </div>

                    {{-- Ø´Ø§Ø®Ù‡ (ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù…Ù‚Ø·Ø¹) --}}
                    <div class="col-md-4">
                        <label class="form-label">Ø´Ø§Ø®Ù‡</label>
                        <select id="branch_id" name="branch_id" class="form-select" required disabled
                                data-fields-url="{{ route('admin.api.fields.by-branch', ':id') }}">
                            <option value="">Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                        </select>
                    </div>

                    {{-- Ø²Ù…ÛŒÙ†Ù‡ (ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø´Ø§Ø®Ù‡) --}}
                    <div class="col-md-4">
                        <label class="form-label">Ø²Ù…ÛŒÙ†Ù‡</label>
                        <select id="field_id" name="field_id" class="form-select" required disabled
                                data-subfields-url="{{ route('admin.api.subfields.by-field', ':id') }}">
                            <option value="">Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
                        </select>
                    </div>

                    {{-- Ø²ÛŒØ±Ø±Ø´ØªÙ‡ (ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø²Ù…ÛŒÙ†Ù‡ / Ø§Ø®ØªÛŒØ§Ø±ÛŒ) --}}
                    <div class="col-md-4">
                        <label class="form-label">Ø²ÛŒØ±Ø±Ø´ØªÙ‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <select id="subfield_id" name="subfield_id" class="form-select" disabled>
                            <option value="">---</option>
                        </select>
                    </div>

                    {{-- Ù†ÙˆØ¹ Ø¯Ø±Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ / Ù…Ø³ØªÙ‚Ù„) --}}
                    <div class="col-md-4">
                        <label class="form-label">Ù†ÙˆØ¹ Ø¯Ø±Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <select id="subject_type_id" name="subject_type_id" class="form-select">
                            <option value="">---</option>
                            @foreach($subjectTypes as $st)
                                <option value="{{ $st->id }}" {{ old('subject_type_id') == $st->id ? 'selected' : '' }}>
                                    {{ $st->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>

                    {{-- Active --}}
                    <div class="col-12">
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" name="is_active"
                                   value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                            <label class="form-check-label" for="is_active">
                                ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                            </label>
                        </div>
                    </div>

                </div>

                <div class="mt-3">
                    <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
                </div>

            </form>
        </div>
    </div>
</div>
@endsection


@push('scripts')
<script>
document.addEventListener('DOMContentLoaded', () => {
    const section  = document.getElementById('section_id');
    const grade    = document.getElementById('grade_id');
    const branch   = document.getElementById('branch_id');
    const field    = document.getElementById('field_id');
    const subfield = document.getElementById('subfield_id');

    const oldGrade    = "{{ old('grade_id') }}";
    const oldBranch   = "{{ old('branch_id') }}";
    const oldField    = "{{ old('field_id') }}";
    const oldSubfield = "{{ old('subfield_id') }}";

    function reset(sel, placeholder="Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...", disable=true) {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        sel.disabled = disable;
    }

    function fill(sel, items, oldValue=null, placeholder="Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...") {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        items.forEach(i => {
            const opt = document.createElement('option');
            opt.value = i.id;
            opt.textContent = i.name_fa;
            if (oldValue && oldValue === i.id) opt.selected = true;
            sel.appendChild(opt);
        });
        sel.disabled = false;
    }

    async function get(url) {
        const r = await fetch(url, { headers: {Accept: 'application/json'} });
        if(!r.ok) return [];
        return await r.json();
    }

    async function loadGradesAndBranches(sectionId, useOld=true){
        reset(grade,  'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);
        reset(branch, 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);
        reset(field,  'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', true);
        reset(subfield,'---', true);

        const gradesUrl   = section.dataset.gradesUrl.replace(':id', sectionId);
        const branchesUrl = section.dataset.branchesUrl.replace(':id', sectionId);

        const [gradesData, branchesData] = await Promise.all([
            get(gradesUrl),
            get(branchesUrl),
        ]);

        fill(grade, gradesData, useOld ? oldGrade : null, 'Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø§ÛŒÙ‡...');
        fill(branch, branchesData, useOld ? oldBranch : null, 'Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø§Ø®Ù‡...');

        if(useOld && oldBranch){
            await loadFields(oldBranch, true);
        }
    }

    async function loadFields(branchId, useOld=true){
        reset(field, 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);
        reset(subfield,'---', true);

        const fieldsUrl = branch.dataset.fieldsUrl.replace(':id', branchId);
        const fieldsData = await get(fieldsUrl);

        fill(field, fieldsData, useOld ? oldField : null, 'Ø§Ù†ØªØ®Ø§Ø¨ Ø²Ù…ÛŒÙ†Ù‡...');

        if(useOld && oldField){
            await loadSubfields(oldField, true);
        }
    }

    async function loadSubfields(fieldId, useOld=true){
        reset(subfield,'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);

        const subfieldsUrl = field.dataset.subfieldsUrl.replace(':id', fieldId);
        const subfieldsData = await get(subfieldsUrl);

        if(subfieldsData.length){
            fill(subfield, subfieldsData, useOld ? oldSubfield : null, 'Ø§Ù†ØªØ®Ø§Ø¨ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)...');
        } else {
            reset(subfield,'---', false);
        }
    }

    section.addEventListener('change', async () => {
        if(!section.value){
            reset(grade,  'Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(branch, 'Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(field,  'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(subfield,'---');
            return;
        }
        await loadGradesAndBranches(section.value, false);
    });

    branch.addEventListener('change', async () => {
        if(!branch.value){
            reset(field, 'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(subfield,'---');
            return;
        }
        await loadFields(branch.value, false);
    });

    field.addEventListener('change', async () => {
        if(!field.value){
            reset(subfield,'---');
            return;
        }
        await loadSubfields(field.value, false);
    });

    // Ù„ÙˆØ¯ Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ú¯Ø± old section Ø¯Ø§Ø´Øª
    if(section.value){
        loadGradesAndBranches(section.value, true);
    } else {
        reset(grade,  'Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        reset(branch, 'Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        reset(field,  'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
        reset(subfield,'---');
    }
});
</script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 101: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subjects/edit.blade.php
ğŸ“ SIZE: 4,588 bytes
ğŸ•’ MODIFIED: 2025-12-08 13:01:26
----------------------------------------------------------------------

@push('scripts')
<script>
document.addEventListener('DOMContentLoaded', () => {
    const section  = document.getElementById('section_id');
    const grade    = document.getElementById('grade_id');
    const branch   = document.getElementById('branch_id');
    const field    = document.getElementById('field_id');
    const subfield = document.getElementById('subfield_id');

    // âœ… old() Ø§Ú¯Ø± ÙØ±Ù… Ø®Ø·Ø§ Ø®ÙˆØ±Ø¯ØŒ ÙˆÚ¯Ø±Ù†Ù‡ Ù…Ù‚Ø¯Ø§Ø± ÙØ¹Ù„ÛŒ Ù…Ø¯Ù„
    const oldGrade    = "{{ old('grade_id', $item->grade_id) }}";
    const oldBranch   = "{{ old('branch_id', $item->branch_id) }}";
    const oldField    = "{{ old('field_id', $item->field_id) }}";
    const oldSubfield = "{{ old('subfield_id', $item->subfield_id) }}";

    function reset(sel, placeholder="Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...", disable=true) {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        sel.disabled = disable;
    }

    function fill(sel, items, oldValue=null, placeholder="Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...") {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        items.forEach(i => {
            const opt = document.createElement('option');
            opt.value = i.id;
            opt.textContent = i.name_fa;
            if (oldValue && oldValue === i.id) opt.selected = true;
            sel.appendChild(opt);
        });
        sel.disabled = false;
    }

    async function get(url) {
        const r = await fetch(url, { headers: {Accept: 'application/json'} });
        if(!r.ok) return [];
        return await r.json();
    }

    async function loadGradesAndBranches(sectionId){
        reset(grade,  'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);
        reset(branch, 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);
        reset(field,  'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', true);
        reset(subfield,'---', true);

        const gradesUrl   = section.dataset.gradesUrl.replace(':id', sectionId);
        const branchesUrl = section.dataset.branchesUrl.replace(':id', sectionId);

        const [gradesData, branchesData] = await Promise.all([
            get(gradesUrl),
            get(branchesUrl),
        ]);

        fill(grade, gradesData, oldGrade, 'Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø§ÛŒÙ‡...');
        fill(branch, branchesData, oldBranch, 'Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø§Ø®Ù‡...');

        if(oldBranch){
            await loadFields(oldBranch);
        }
    }

    async function loadFields(branchId){
        reset(field, 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);
        reset(subfield,'---', true);

        const fieldsUrl = branch.dataset.fieldsUrl.replace(':id', branchId);
        const fieldsData = await get(fieldsUrl);

        fill(field, fieldsData, oldField, 'Ø§Ù†ØªØ®Ø§Ø¨ Ø²Ù…ÛŒÙ†Ù‡...');

        if(oldField){
            await loadSubfields(oldField);
        }
    }

    async function loadSubfields(fieldId){
        reset(subfield,'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...', true);

        const subfieldsUrl = field.dataset.subfieldsUrl.replace(':id', fieldId);
        const subfieldsData = await get(subfieldsUrl);

        if(subfieldsData.length){
            fill(subfield, subfieldsData, oldSubfield, 'Ø§Ù†ØªØ®Ø§Ø¨ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)...');
        } else {
            reset(subfield,'---', false);
        }
    }

    section.addEventListener('change', async () => {
        if(!section.value){
            reset(grade,  'Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(branch, 'Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(field,  'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(subfield,'---');
            return;
        }

        // ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± ØªØºÛŒÛŒØ± Ø¯Ø³ØªÛŒ Ø¯Ø§Ø¯ old Ù‡Ø§ Ø¯ÛŒÚ¯Ø± Ù…Ù„Ø§Ú© Ù†ÛŒØ³Øª
        const sectionId = section.value;
        reset(grade,  'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...');
        reset(branch, 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...');
        await loadGradesAndBranches(sectionId);
    });

    branch.addEventListener('change', async () => {
        if(!branch.value){
            reset(field, 'Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
            reset(subfield,'---');
            return;
        }
        await loadFields(branch.value);
    });

    field.addEventListener('change', async () => {
        if(!field.value){
            reset(subfield,'---');
            return;
        }
        await loadSubfields(field.value);
    });

    // âœ… Ù„ÙˆØ¯ Ø§ÙˆÙ„ÛŒÙ‡ Ø±ÙˆÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± ÙØ¹Ù„ÛŒ Ø¯Ø±Ø³
    if(section.value){
        loadGradesAndBranches(section.value);
    }
});
</script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 102: form.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subjects/form.blade.php
ğŸ“ SIZE: 4,426 bytes
ğŸ•’ MODIFIED: 2025-12-07 06:38:34
----------------------------------------------------------------------

@php $item = $item ?? null; @endphp

<div class="row g-3">

    <div class="col-md-4">
        <label class="form-label">Ù…Ù‚Ø·Ø¹ (section)</label>
        <select name="section_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨</option>
            @foreach ($sections as $s)
                <option value="{{ $s->id }}" @selected(old('section_id', $item->section_id ?? '') == $s->id)>
                    {{ $s->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Ù¾Ø§ÛŒÙ‡ (grade)</label>
        <select name="grade_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨</option>
            @foreach ($grades as $g)
                <option value="{{ $g->id }}" @selected(old('grade_id', $item->grade_id ?? '') == $g->id)>
                    {{ $g->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Ø´Ø§Ø®Ù‡ (branch)</label>
        <select name="branch_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨</option>
            @foreach ($branches as $b)
                <option value="{{ $b->id }}" @selected(old('branch_id', $item->branch_id ?? '') == $b->id)>
                    {{ $b->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Ø²Ù…ÛŒÙ†Ù‡ (field)</label>
        <select name="field_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨</option>
            @foreach ($fields as $f)
                <option value="{{ $f->id }}" @selected(old('field_id', $item->field_id ?? '') == $f->id)>
                    {{ $f->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Ø²ÛŒØ±Ø±Ø´ØªÙ‡ (subfield)</label>
        <select name="subfield_id" class="form-select">
            <option value="">Ø§Ø®ØªÛŒØ§Ø±ÛŒ</option>
            @foreach ($subfields as $sf)
                <option value="{{ $sf->id }}" @selected(old('subfield_id', $item->subfield_id ?? '') == $sf->id)>
                    {{ $sf->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Ø¯Ø³ØªÙ‡ Ø¯Ø±Ø³ÛŒ (subject type)</label>
        <select name="subject_type_id" class="form-select">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨</option>
            @foreach ($subjectTypes as $st)
                <option value="{{ $st->id }}" @selected(old('subject_type_id', $item->subject_type_id ?? '') == $st->id)>
                    {{ $st->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-6">
        <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø¯Ø±Ø³</label>
        <input name="title_fa" class="form-control" value="{{ old('title_fa', $item->title_fa ?? '') }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">slug</label>
        <input name="slug" class="form-control" value="{{ old('slug', $item->slug ?? '') }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">Ú©Ø¯ Ø¯Ø±Ø³</label>
        <input name="code" class="form-control" value="{{ old('code', $item->code ?? '') }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">Ø³Ø§Ø¹Øª</label>
        <input type="number" name="hours" class="form-control" value="{{ old('hours', $item->hours ?? 0) }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">ØªØ±ØªÛŒØ¨</label>
        <input type="number" name="sort_order" class="form-control"
            value="{{ old('sort_order', $item->sort_order ?? 0) }}">
    </div>

    <div class="col-md-3 d-flex align-items-end">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="is_active" value="1"
                @checked(old('is_active', $item->is_active ?? true))>
            <label class="form-check-label">ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯</label>
        </div>
    </div>
</div>

@if ($errors->any())
    <div class="alert alert-danger mt-3">
        <ul class="mb-0">
            @foreach ($errors->all() as $e)
                <li>{{ $e }}</li>
            @endforeach
        </ul>
    </div>
@endif

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 103: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/taxonomy/subjects/index.blade.php
ğŸ“ SIZE: 5,372 bytes
ğŸ•’ MODIFIED: 2025-12-07 17:43:20
----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subjects/index.blade.php --}}
@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª ' . ($title ?? 'Ø¯Ø±ÙˆØ³'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? 'â–²' : 'â–¼';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">Ù…Ø¯ÛŒØ±ÛŒØª {{ $title ?? 'Ø¯Ø±ÙˆØ³' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('title_fa', 'Ù†Ø§Ù… Ø¯Ø±Ø³', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'Ø§Ø³Ù„Ø§Ú¯', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('code', 'Ú©Ø¯ Ø¯Ø±Ø³', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">Ù…Ù‚Ø·Ø¹</th>
                        <th class="text-nowrap">Ù¾Ø§ÛŒÙ‡</th>
                        <th class="text-nowrap">Ø´Ø§Ø®Ù‡</th>
                        <th class="text-nowrap">Ø²Ù…ÛŒÙ†Ù‡</th>
                        <th class="text-nowrap">Ø²ÛŒØ±Ø±Ø´ØªÙ‡</th>
                        <th class="text-nowrap">Ù†ÙˆØ¹ Ø¯Ø±Ø³</th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ØªØ±ØªÛŒØ¨', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'ÙˆØ¶Ø¹ÛŒØª', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->title_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->code ?? '-' }}</td>

                            <td>{{ $item->section?->name_fa ?? '---' }}</td>
                            <td>{{ $item->grade?->name_fa ?? '---' }}</td>
                            <td>{{ $item->branch?->name_fa ?? '---' }}</td>
                            <td>{{ $item->field?->name_fa ?? '---' }}</td>
                            <td>{{ $item->subfield?->name_fa ?? '---' }}</td>
                            <td>{{ $item->subjectType?->name_fa ?? '---' }}</td>

                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">ÙˆÛŒØ±Ø§ÛŒØ´</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('Ø­Ø°Ù Ø´ÙˆØ¯ØŸ');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">Ø­Ø°Ù</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="99" class="text-muted py-4">Ø¯ÛŒØªØ§ÛŒÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 104: index.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/users/index.blade.php
ğŸ“ SIZE: 5,866 bytes
ğŸ•’ MODIFIED: 2025-12-07 12:09:30
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</h4>
    </div>

    {{-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ --}}
    @if(session('success'))
        <div class="alert alert-success">{{ session('success') }}</div>
    @elseif(session('error'))
        <div class="alert alert-danger">{{ session('error') }}</div>
    @endif

    {{-- ÙÛŒÙ„ØªØ± Ùˆ Ø³Ø±Ú† --}}
    <form method="GET" class="row g-2 mb-3">
        <div class="col-12 col-md-4">
            <input type="text" name="q" value="{{ $q }}" class="form-control"
                   placeholder="Ø¬Ø³ØªØ¬Ùˆ Ù†Ø§Ù… ÛŒØ§ Ø´Ù…Ø§Ø±Ù‡">
        </div>

        <div class="col-12 col-md-3">
            <select name="role" class="form-select">
                <option value="all" @selected($role=='all')>Ù‡Ù…Ù‡ Ù†Ù‚Ø´â€ŒÙ‡Ø§</option>
                <option value="admin" @selected($role=='admin')>Ø§Ø¯Ù…ÛŒÙ†</option>
                <option value="teacher" @selected($role=='teacher')>Ù…Ø¹Ù„Ù…</option>
                <option value="student" @selected($role=='student')>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option>
                <option value="counselor" @selected($role=='counselor')>Ù…Ø´Ø§ÙˆØ±</option>
            </select>
        </div>

        <div class="col-12 col-md-2">
            <button class="btn btn-primary w-100">Ø§Ø¹Ù…Ø§Ù„</button>
        </div>

        <div class="col-12 col-md-3 text-md-end">
            <a href="{{ route('admin.users.index') }}" class="btn btn-outline-secondary w-100">
                Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„ØªØ±Ù‡Ø§
            </a>
        </div>
    </form>

    {{-- Ø¬Ø¯ÙˆÙ„ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† --}}
    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>Ù†Ø§Ù…</th>
                        <th>Ø´Ù…Ø§Ø±Ù‡</th>
                        <th>Ù†Ù‚Ø´</th>
                        <th>ÙˆØ¶Ø¹ÛŒØª</th>
                        <th class="text-nowrap">ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</th>
                        <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    @forelse($users as $u)
                        <tr>
                            <td>{{ $loop->iteration + ($users->currentPage()-1)*$users->perPage() }}</td>
                            <td>{{ $u->name ?? '---' }}</td>
                            <td>{{ $u->phone }}</td>
                            <td>
                                <span class="badge bg-secondary">{{ $u->role ?? 'guest' }}</span>
                            </td>
                            <td>
                                @if($u->is_active ?? true)
                                    <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                @else
                                    <span class="badge bg-danger">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                @endif
                            </td>
                            <td class="small text-muted text-nowrap">
                                {{ $u->created_at?->format('Y/m/d') }}
                            </td>

                            <td class="text-end">
                                {{-- Ù…Ø´Ø§Ù‡Ø¯Ù‡ --}}
                                <a href="{{ route('admin.users.show', $u->id) }}"
                                   class="btn btn-sm btn-outline-primary">
                                    Ù…Ø´Ø§Ù‡Ø¯Ù‡
                                </a>

                                {{-- ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ --}}
                                <form action="{{ route('admin.users.update', $u->id) }}"
                                      method="POST" class="d-inline">
                                    @csrf
                                    @method('PUT')
                                    <input type="hidden" name="is_active" value="{{ ($u->is_active ?? true) ? 0 : 1 }}">
                                    <button class="btn btn-sm btn-outline-warning"
                                            onclick="return confirm('ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø± ØªØºÛŒÛŒØ± Ú©Ù†Ø¯ØŸ')">
                                        {{ ($u->is_active ?? true) ? 'ØºÛŒØ±ÙØ¹Ø§Ù„' : 'ÙØ¹Ø§Ù„' }}
                                    </button>
                                </form>

                                {{-- Ø­Ø°Ù --}}
                                <form action="{{ route('admin.users.destroy', $u->id) }}"
                                      method="POST" class="d-inline">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-outline-danger"
                                            onclick="return confirm('Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±ØŸ')">
                                        Ø­Ø°Ù
                                    </button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-center text-muted py-4">
                                Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.
                            </td>
                        </tr>
                    @endforelse
                </tbody>
            </table>
        </div>
    </div>

    {{-- ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ --}}
    <div class="mt-3">
        {{ $users->links() }}
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 105: show.blade.php
ğŸ“ PATH: resources/views/dashboard/admin/users/show.blade.php
ğŸ“ SIZE: 3,896 bytes
ğŸ•’ MODIFIED: 2025-12-07 12:09:52
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Ø¨Ø±')

@section('content')
<div class="container py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ø±Ø¨Ø±</h4>
        <a href="{{ route('admin.users.index') }}" class="btn btn-outline-secondary btn-sm">
            Ø¨Ø§Ø²Ú¯Ø´Øª
        </a>
    </div>

    @if(session('success'))
        <div class="alert alert-success">{{ session('success') }}</div>
    @elseif(session('error'))
        <div class="alert alert-danger">{{ session('error') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="row g-3">

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">Ù†Ø§Ù…</div>
                    <div>{{ $user->name ?? '---' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</div>
                    <div>{{ $user->phone }}</div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">Ù†Ù‚Ø´</div>
                    <div>{{ $user->role ?? 'guest' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">ÙˆØ¶Ø¹ÛŒØª</div>
                    <div>
                        @if($user->is_active ?? true)
                            <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                        @else
                            <span class="badge bg-danger">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                        @endif
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">ØªØ§Ø±ÛŒØ® Ø«Ø¨Øª</div>
                    <div>{{ $user->created_at?->format('Y/m/d H:i') }}</div>
                </div>

            </div>

            <hr class="my-4">

            {{-- ÙØ±Ù… ÙˆÛŒØ±Ø§ÛŒØ´ Ø³Ø±ÛŒØ¹ --}}
            <form method="POST" action="{{ route('admin.users.update', $user->id) }}" class="row g-3">
                @csrf
                @method('PUT')

                <div class="col-md-4">
                    <label class="form-label">Ù†Ø§Ù…</label>
                    <input type="text" name="name" value="{{ $user->name }}" class="form-control">
                </div>

                <div class="col-md-4">
                    <label class="form-label">Ù†Ù‚Ø´</label>
                    <select name="role" class="form-select">
                        <option value="admin" @selected($user->role=='admin')>Ø§Ø¯Ù…ÛŒÙ†</option>
                        <option value="teacher" @selected($user->role=='teacher')>Ù…Ø¹Ù„Ù…</option>
                        <option value="student" @selected($user->role=='student')>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option>
                        <option value="counselor" @selected($user->role=='counselor')>Ù…Ø´Ø§ÙˆØ±</option>
                    </select>
                </div>

                <div class="col-md-4 d-flex align-items-end">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="is_active" value="1"
                               id="activeCheck" @checked($user->is_active ?? true)>
                        <label class="form-check-label" for="activeCheck">
                            ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯
                        </label>
                    </div>
                </div>

                <div class="col-12 text-end">
                    <button class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
                </div>
            </form>

        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 106: analyze.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/attempts/analyze.blade.php
ğŸ“ SIZE: 3,462 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:59:08
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Analyze Attempt')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">ØªØ­Ù„ÛŒÙ„ Attempt</h1>
                <div class="text-muted small">{{ $attempt->exam->title ?? '' }}</div>
            </div>
            <a href="{{ route('counselor.attempts.show', $attempt->id) }}" class="btn btn-outline-secondary">
                Ø¨Ø§Ø²Ú¯Ø´Øª
            </a>
        </div>

        <form method="POST" action="{{ route('counselor.attempts.analyze.store', $attempt->id) }}">
            @csrf

            <div class="row g-3">

                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-header bg-white border-0">
                            <h2 class="h6 mb-0">ØªØ­Ù„ÛŒÙ„ ØªØ­ØµÛŒÙ„ÛŒ (Academic)</h2>
                        </div>
                        <div class="card-body">

                            <label class="form-label small">Ù†Ù‚Ø§Ø· Ù‚ÙˆØª ØªØ­ØµÛŒÙ„ÛŒ</label>
                            <textarea name="academic_strengths" class="form-control" rows="4" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ Ø¯Ø± ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙØµÙ„ 1">
{{ old('academic_strengths', optional($attempt->counselorAnalysis)->academic_strengths) }}</textarea>

                            <label class="form-label small mt-3">Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù ØªØ­ØµÛŒÙ„ÛŒ</label>
                            <textarea name="academic_weaknesses" class="form-control" rows="4"
                                placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¶Ø¹Ù Ø¯Ø± Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø®Øª Ùˆ Ø²Ù…Ø§Ù†â€ŒØ¯Ø§Ø±">
{{ old('academic_weaknesses', optional($attempt->counselorAnalysis)->academic_weaknesses) }}</textarea>

                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-header bg-white border-0">
                            <h2 class="h6 mb-0">ØªØ­Ù„ÛŒÙ„ Ù¾Ø±ÙˆØ±Ø´ÛŒ/Ø±ÙˆØ­ÛŒ (Developmental)</h2>
                        </div>
                        <div class="card-body">

                            <label class="form-label small">ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ­ÛŒ Ùˆ Ù¾Ø±ÙˆØ±Ø´ÛŒ</label>
                            <textarea name="developmental_notes" class="form-control" rows="5"
                                placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø§Ø¶Ø·Ø±Ø§Ø¨ Ø¯Ø± Ù…ÙˆØ§Ø¬Ù‡Ù‡ Ø¨Ø§ Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ù„Ù†Ø¯">
{{ old('developmental_notes', optional($attempt->counselorAnalysis)->developmental_notes) }}</textarea>

                            <label class="form-label small mt-3">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø³ÛŒØ± Ùˆ Ù…Ø¹Ø±ÙÛŒ Ù…ØªØ®ØµØµ</label>
                            <textarea name="recommendations" class="form-control" rows="3"
                                placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø¹Ù„Ù… X Ùˆ ØªÙ…Ø±ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©ÙˆØªØ§Ù‡">
{{ old('recommendations', optional($attempt->counselorAnalysis)->recommendations) }}</textarea>

                        </div>
                    </div>
                </div>

            </div>

            <div class="d-flex justify-content-end mt-3">
                <button class="btn btn-primary px-4">
                    Ø°Ø®ÛŒØ±Ù‡ ØªØ­Ù„ÛŒÙ„
                </button>
            </div>

        </form>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 107: index.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/attempts/index.blade.php
ğŸ“ SIZE: 3,327 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:58:16
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Student Attempts')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">AttemptÙ‡Ø§ÛŒ {{ $student->name }}</h1>
                <div class="text-muted small">Ù„ÛŒØ³Øª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ ØªØ­Ù„ÛŒÙ„</div>
            </div>
            <a href="{{ route('counselor.students.show', $student->id) }}" class="btn btn-outline-secondary">
                Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
            </a>
        </div>

        <div class="card shadow-sm border-0">
            <div class="card-body">

                @if ($attempts->count() == 0)
                    <div class="alert alert-warning mb-0">
                        Ù‡Ù†ÙˆØ² AttemptÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                    </div>
                @else
                    <div class="table-responsive">
                        <table class="table align-middle">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Ø¢Ø²Ù…ÙˆÙ†</th>
                                    <th>Ø¯Ø±Ø³</th>
                                    <th>Ø¯Ø±ØµØ¯</th>
                                    <th>ØªØ§Ø±ÛŒØ®</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($attempts as $i => $attempt)
                                    <tr>
                                        <td>{{ $attempts->firstItem() + $i }}</td>
                                        <td>{{ $attempt->exam->title ?? 'â€”' }}</td>
                                        <td>{{ $attempt->exam->subject->title ?? ($attempt->exam->subject->name ?? 'â€”') }}
                                        </td>
                                        <td>{{ $attempt->percent ?? 0 }}%</td>
                                        <td>{{ optional($attempt->submitted_at ?? $attempt->created_at)->format('Y/m/d') }}
                                        </td>
                                        <td class="text-end">
                                            <a class="btn btn-sm btn-outline-primary"
                                                href="{{ route('counselor.attempts.show', $attempt->id) }}">
                                                Ù†ØªÛŒØ¬Ù‡
                                            </a>
                                            <a class="btn btn-sm btn-primary"
                                                href="{{ route('counselor.attempts.analyze.edit', $attempt->id) }}">
                                                ØªØ­Ù„ÛŒÙ„
                                            </a>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-3">
                        {{ $attempts->links() }}
                    </div>
                @endif

            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 108: show.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/attempts/show.blade.php
ğŸ“ SIZE: 3,615 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:58:46
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Attempt Result')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">Ù†ØªÛŒØ¬Ù‡ Ø¢Ø²Ù…ÙˆÙ†</h1>
                <div class="text-muted small">{{ $attempt->exam->title ?? '' }}</div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('counselor.attempts.analyze.edit', $attempt->id) }}" class="btn btn-primary">
                    ØªØ­Ù„ÛŒÙ„ Ø§ÛŒÙ† Attempt
                </a>
                <a href="{{ url()->previous() }}" class="btn btn-outline-secondary">
                    Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
            </div>
        </div>

        <div class="row g-3">
            <div class="col-lg-4">
                <div class="card shadow-sm border-0">
                    <div class="card-body">
                        <div class="text-muted small">Ø¯Ø±ØµØ¯</div>
                        <div class="fs-3 fw-bold">{{ $attempt->percent ?? 0 }}%</div>
                        <hr>
                        <div class="text-muted small">Ù†Ù…Ø±Ù‡</div>
                        <div class="fw-semibold">
                            {{ $attempt->score_obtained ?? ($attempt->score ?? 0) }}
                            /
                            {{ $attempt->score_total ?? 0 }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-0">
                        <h2 class="h6 mb-0">Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§</h2>
                    </div>
                    <div class="card-body text-muted small">
                        ÙØ¹Ù„Ø§Ù‹ Ù†Ù…Ø§ÛŒØ´ Ú©Ø§Ù…Ù„ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ù…Ø«Ù„ Student Result Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>
            </div>
        </div>

        {{-- Existing counselor analysis preview --}}
        <div class="card shadow-sm border-0 mt-3">
            <div class="card-header bg-white border-0">
                <h2 class="h6 mb-0">ØªØ­Ù„ÛŒÙ„ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ù…Ø´Ø§ÙˆØ±</h2>
            </div>
            <div class="card-body">
                @if ($attempt->counselorAnalysis)
                    <div class="mb-2">
                        <strong>Ù†Ù‚Ø§Ø· Ù‚ÙˆØª ØªØ­ØµÛŒÙ„ÛŒ:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->academic_strengths }}</div>
                    </div>
                    <div class="mb-2">
                        <strong>Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù ØªØ­ØµÛŒÙ„ÛŒ:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->academic_weaknesses }}</div>
                    </div>
                    <div class="mb-2">
                        <strong>ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÙˆØ±Ø´ÛŒ/Ø±ÙˆØ­ÛŒ:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->developmental_notes }}</div>
                    </div>
                    <div>
                        <strong>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ù‡Ø§:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->recommendations }}</div>
                    </div>
                @else
                    <div class="text-muted small">
                        Ù‡Ù†ÙˆØ² ØªØ­Ù„ÛŒÙ„ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                    </div>
                @endif
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 109: index.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/index.blade.php
ğŸ“ SIZE: 4,516 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:57:03
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Counselor Dashboard')

@section('content')
    <div class="container-fluid">

        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h1 class="h4 mb-1">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø´Ø§ÙˆØ±</h1>
                <p class="text-muted mb-0">Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§ Ùˆ ØªØ­Ù„ÛŒÙ„ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</p>
            </div>

            <div class="d-flex gap-2 flex-wrap">
                <a href="{{ route('counselor.students.index') }}" class="btn btn-primary">
                    <i class="bi bi-people-fill me-1"></i> Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§
                </a>
                <a href="{{ route('counselor.learning-paths.index') }}" class="btn btn-outline-primary">
                    <i class="bi bi-signpost-split me-1"></i> Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
                </a>
                <a href="{{ route('counselor.reports.index') }}" class="btn btn-outline-secondary">
                    <i class="bi bi-bar-chart-line me-1"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
                </a>
            </div>
        </div>

        {{-- Stats row --}}
        @php $stats = $stats ?? []; @endphp
        <div class="row g-3 mb-4">

            <div class="col-md-4 col-sm-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small mb-1">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§</div>
                            <div class="fs-4 fw-bold">{{ $stats['students_count'] ?? 0 }}</div>
                        </div>
                        <i class="bi bi-people fs-2 text-primary"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-4 col-sm-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small mb-1">ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</div>
                            <div class="fs-4 fw-bold">{{ $stats['pending_analyses'] ?? 0 }}</div>
                        </div>
                        <i class="bi bi-hourglass-split fs-2 text-warning"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-4 col-sm-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small mb-1">ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„â€ŒØ´Ø¯Ù‡</div>
                            <div class="fs-4 fw-bold">{{ $stats['completed_analyses'] ?? 0 }}</div>
                        </div>
                        <i class="bi bi-check-circle fs-2 text-success"></i>
                    </div>
                </div>
            </div>

        </div>

        {{-- Quick section --}}
        <div class="row g-3">
            <div class="col-lg-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                        <h2 class="h6 mb-0">Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§ÛŒ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡</h2>
                        <a class="small text-decoration-none" href="{{ route('counselor.students.index') }}">
                            Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡
                        </a>
                    </div>
                    <div class="card-body text-muted small">
                        Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ Ù„ÛŒØ³Øª ÙˆØ§Ù‚Ø¹ÛŒ Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                        <h2 class="h6 mb-0">AttemptÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ ØªØ­Ù„ÛŒÙ„</h2>
                    </div>
                    <div class="card-body text-muted small">
                        Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ attemptÙ‡Ø§ÛŒ Ø¨Ø¯ÙˆÙ† ØªØ­Ù„ÛŒÙ„ Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 110: create.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/learning-paths/create.blade.php
ğŸ“ SIZE: 546 bytes
ğŸ•’ MODIFIED: 2025-12-03 02:05:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Create Learning Path')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø³ÛŒØ± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ {{ $student->name }}</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ÙØ±Ù… Ø³Ø§Ø®Øª Ù…Ø³ÛŒØ± Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                ÙØ¹Ù„Ø§Ù‹ ÙÙ‚Ø· Ø§Ø³Ú©Ù„Øª Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 111: index.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/learning-paths/index.blade.php
ğŸ“ SIZE: 520 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:59:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Learning Paths')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                Ø¯Ø± ÙØ§Ø² 1 ÙÙ‚Ø· Ø³Ø§Ø®ØªØ§Ø± Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª.
                Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø«Ø¨Øª Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 112: profile.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/profile.blade.php
ğŸ“ SIZE: 457 bytes
ğŸ•’ MODIFIED: 2025-12-03 01:01:11
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Counselor Profile')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø´Ø§ÙˆØ±</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ÙØ±Ù… Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø´Ø§ÙˆØ± Ù…Ø´Ø§Ø¨Ù‡ Teacher/Student Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ ØªÚ©Ù…ÛŒÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 113: index.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/reports/index.blade.php
ğŸ“ SIZE: 429 bytes
ğŸ•’ MODIFIED: 2025-12-03 01:00:31
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Counselor Reports')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø´Ø§ÙˆØ±</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                Ù„ÛŒØ³Øª Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 114: show.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/reports/show.blade.php
ğŸ“ SIZE: 419 bytes
ğŸ•’ MODIFIED: 2025-12-03 01:00:51
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Report')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">Ø¬Ø²Ø¦ÛŒØ§Øª Ú¯Ø²Ø§Ø±Ø´</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                Ù†Ù…Ø§ÛŒØ´ Ø¬Ø²Ø¦ÛŒØ§Øª Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ ØªÚ©Ù…ÛŒÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 115: index.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/students/index.blade.php
ğŸ“ SIZE: 2,677 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:57:26
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Students')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h1 class="h5 mb-0">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§</h1>
        </div>

        <div class="card shadow-sm border-0">
            <div class="card-body">

                @if ($students->count() == 0)
                    <div class="alert alert-warning mb-0">
                        ÙØ¹Ù„Ø§Ù‹ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.
                    </div>
                @else
                    <div class="table-responsive">
                        <table class="table align-middle">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Ù†Ø§Ù…</th>
                                    <th>Ø§ÛŒÙ…ÛŒÙ„</th>
                                    <th>ØªØ§Ø±ÛŒØ® Ø¹Ø¶ÙˆÛŒØª</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($students as $i => $student)
                                    <tr>
                                        <td>{{ $students->firstItem() + $i }}</td>
                                        <td>{{ $student->name }}</td>
                                        <td>{{ $student->email }}</td>
                                        <td>{{ optional($student->created_at)->format('Y/m/d') }}</td>
                                        <td class="text-end">
                                            <a class="btn btn-sm btn-outline-primary"
                                                href="{{ route('counselor.students.show', $student->id) }}">
                                                Ù…Ø´Ø§Ù‡Ø¯Ù‡
                                            </a>
                                            <a class="btn btn-sm btn-outline-secondary"
                                                href="{{ route('counselor.attempts.index', $student->id) }}">
                                                AttemptÙ‡Ø§
                                            </a>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-3">
                        {{ $students->links() }}
                    </div>
                @endif

            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 116: show.blade.php
ğŸ“ PATH: resources/views/dashboard/counselor/students/show.blade.php
ğŸ“ SIZE: 1,854 bytes
ğŸ•’ MODIFIED: 2025-12-03 00:57:55
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Student Profile')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">{{ $student->name }}</h1>
                <div class="text-muted small">{{ $student->email }}</div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('counselor.attempts.index', $student->id) }}" class="btn btn-primary">
                    AttemptÙ‡Ø§
                </a>
                <a href="{{ route('counselor.learning-paths.create', $student->id) }}" class="btn btn-outline-primary">
                    Ø³Ø§Ø®Øª Ù…Ø³ÛŒØ± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
                </a>
            </div>
        </div>

        <div class="row g-3">
            <div class="col-lg-6">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-0">
                        <h2 class="h6 mb-0">Ø®Ù„Ø§ØµÙ‡ ÙˆØ¶Ø¹ÛŒØª</h2>
                    </div>
                    <div class="card-body text-muted small">
                        Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø± ÙØ§Ø² Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§ Ø¢Ù…Ø§Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ùˆ Ù¾ÛŒØ´Ø±ÙØª Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-0">
                        <h2 class="h6 mb-0">Ø¢Ø®Ø±ÛŒÙ† ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§</h2>
                    </div>
                    <div class="card-body text-muted small">
                        Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ø¹Ø¯Ø§Ù‹ Ø§Ø² counselor_analyses Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 117: role-select.blade.php
ğŸ“ PATH: resources/views/dashboard/role-select.blade.php
ğŸ“ SIZE: 2,040 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´')

@section('content')
    <div class="container py-5">

        <div class="text-center mb-4">
            <h4 class="fw-bold">Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´</h4>
            <p class="text-muted small">Ø¨Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ† ÙˆØ±ÙˆØ¯ØŒ Ù†Ù‚Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯ ØªØ§ ÙˆØ§Ø±Ø¯ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø´ÙˆÛŒØ¯.</p>
        </div>

        @if ($errors->any())
            <div class="alert alert-warning small">
                Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:
                <ul class="mb-0 mt-1">
                    @foreach ($errors->all() as $err)
                        <li>{{ $err }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3 justify-content-center">

            <div class="col-md-4">
                <form method="POST" action="{{ route('auth.setRole') }}">
                    @csrf
                    <input type="hidden" name="role" value="student">
                    <button class="btn btn-outline-primary w-100 py-4 h-100">
                        <i class="fas fa-user-graduate fa-3x mb-3"></i>
                        <div class="fw-bold">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</div>
                        <div class="text-muted small">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</div>
                    </button>
                </form>
            </div>

            <div class="col-md-4">
                <form method="POST" action="{{ route('auth.setRole') }}">
                    @csrf
                    <input type="hidden" name="role" value="teacher">
                    <button class="btn btn-outline-success w-100 py-4 h-100">
                        <i class="fas fa-chalkboard-teacher fa-3x mb-3"></i>
                        <div class="fw-bold">Ù…Ø¹Ù„Ù…</div>
                        <div class="text-muted small">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…</div>
                    </button>
                </form>
            </div>

        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 118: result.blade.php
ğŸ“ PATH: resources/views/dashboard/student/attempts/result.blade.php
ğŸ“ SIZE: 29,395 bytes
ğŸ•’ MODIFIED: 2025-12-03 08:25:15
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù†ØªÛŒØ¬Ù‡ Ø¢Ø²Ù…ÙˆÙ†')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;

            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;

            --edu-amber: #f59e0b;
            --edu-amber-2: #fbbf24;
            --edu-amber-soft: #fffbeb;

            --edu-red: #dc2626;
            --edu-red-soft: #fff1f2;

            --edu-gray: #0f172a;
            --edu-muted: #64748b;
            --edu-bg: #f8fafc;

            --radius-xl: 1.25rem;
            --radius-lg: 1rem;
        }

        .result-page {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-hero {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1.1rem 1.2rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 16px 40px rgba(37, 99, 235, .22);
            max-width: 1200px;
            margin-inline: auto;
        }

        .result-hero::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 320px;
            height: 320px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(15deg);
            opacity: .85;
            pointer-events: none;
        }

        .result-hero h3 {
            font-weight: 900;
            font-size: 1.25rem;
            margin: 0;
            display: flex;
            gap: .5rem;
            align-items: center;
        }

        .result-hero .sub {
            font-size: .85rem;
            color: rgba(255, 255, 255, .95);
            margin-top: .25rem;
        }

        .score-ring {
            width: 170px;
            height: 170px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            margin-inline: auto;
            background: conic-gradient(var(--edu-green) calc(var(--percent)*1%), #e2e8f0 0);
            position: relative;
            box-shadow: 0 12px 30px rgba(15, 23, 42, .12);
            animation: ringPop .8s ease both;
        }

        @keyframes ringPop {
            from {
                transform: scale(.9);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .score-ring::before {
            content: "";
            position: absolute;
            inset: 12px;
            background: #fff;
            border-radius: 50%;
            box-shadow: inset 0 0 0 2px #f1f5f9;
        }

        .score-ring .inner {
            position: relative;
            text-align: center;
        }

        .score-ring .percent {
            font-size: 2rem;
            font-weight: 900;
            color: var(--edu-gray);
            line-height: 1;
        }

        .score-ring .label {
            font-size: .8rem;
            font-weight: 800;
            color: var(--edu-muted);
            margin-top: .25rem;
        }

        .reward-card {
            border-radius: var(--radius-xl);
            background: #fff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            animation: cardIn .6s ease both;
        }

        @keyframes cardIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .reward-badge {
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            padding: .45rem .7rem;
            border-radius: 999px;
            font-weight: 900;
            font-size: .8rem;
            border: 1px solid transparent;
        }

        .reward-badge.gold {
            background: #fff7ed;
            color: #9a3412;
            border-color: #fed7aa;
        }

        .reward-badge.silver {
            background: #f8fafc;
            color: #334155;
            border-color: #e2e8f0;
        }

        .reward-badge.bronze {
            background: #fffbeb;
            color: #92400e;
            border-color: #fde68a;
        }

        .stat {
            border-radius: var(--radius-lg);
            background: #fff;
            border: 1px solid #e2e8f0;
            padding: .9rem 1rem;
            display: flex;
            gap: .75rem;
            align-items: center;
            box-shadow: 0 8px 18px rgba(15, 23, 42, .05);
        }

        .stat .icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            font-size: 1.2rem;
            font-weight: 900;
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            flex-shrink: 0;
        }

        .stat.green .icon {
            background: var(--edu-green-soft);
            color: var(--edu-green);
        }

        .stat.amber .icon {
            background: var(--edu-amber-soft);
            color: #92400e;
        }

        .stat .label {
            font-size: .78rem;
            color: var(--edu-muted);
            font-weight: 800;
        }

        .stat .value {
            font-size: 1.05rem;
            font-weight: 900;
            color: var(--edu-gray);
            margin-top: .1rem;
        }

        .motivate {
            border-radius: var(--radius-lg);
            padding: .9rem 1rem;
            border: 1px dashed #cbd5e1;
            background: #f8fafc;
            font-size: .9rem;
            line-height: 1.9;
            color: #334155;
            display: flex;
            align-items: start;
            gap: .6rem;
        }

        .motivate .emoji {
            font-size: 1.4rem;
            line-height: 1;
        }

        .motivate.good {
            border-color: #bbf7d0;
            background: #fbfffd;
        }

        .motivate.bad {
            border-color: #fde68a;
            background: #fffbeb;
        }

        .btn-cta {
            border-radius: .95rem;
            font-weight: 900;
            padding: .8rem 1rem;
            border: none;
            background: linear-gradient(135deg, var(--edu-blue), var(--edu-blue-2));
            box-shadow: 0 12px 28px rgba(37, 99, 235, .28);
            transition: .2s ease;
        }

        .btn-cta:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 34px rgba(37, 99, 235, .38);
        }

        .btn-ghost {
            border-radius: .95rem;
            font-weight: 900;
            padding: .8rem 1rem;
        }

        .reward-wrap {
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #ffffff, #f8fafc);
            border: 1px solid #e2e8f0;
            box-shadow: 0 12px 30px rgba(15, 23, 42, .06);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            max-width: 1200px;
            margin-inline: auto;
        }

        .reward-wrap::after {
            content: "";
            position: absolute;
            inset: -40% -20% auto auto;
            width: 260px;
            height: 260px;
            background: radial-gradient(circle, rgba(14, 165, 233, .18), transparent 70%);
            pointer-events: none;
        }

        .level-pill {
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            font-weight: 900;
            font-size: .9rem;
            padding: .45rem .8rem;
            border-radius: 999px;
            background: #0f172a;
            color: #fff;
            box-shadow: 0 10px 22px rgba(15, 23, 42, .22);
        }

        .checkpoint {
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 900;
            font-size: .9rem;
            background: #0ea5e90f;
            color: #0ea5e9;
            border: 1px solid #0ea5e933;
            padding: .6rem .8rem;
            border-radius: 1rem;
        }

        .medal {
            display: flex;
            align-items: center;
            gap: .75rem;
            padding: .9rem 1rem;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            background: #fff;
            transition: .2s ease;
        }

        .medal:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 99, 235, .10);
        }

        .medal .icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            font-size: 1.6rem;
            font-weight: 900;
            flex-shrink: 0;
        }

        .medal.gold .icon {
            background: #fff7ed;
            color: #f59e0b;
            border: 1px solid #fde68a;
        }

        .medal.silver .icon {
            background: #eff6ff;
            color: #2563eb;
            border: 1px solid #bfdbfe;
        }

        .medal.bronze .icon {
            background: #ecfdf3;
            color: #16a34a;
            border: 1px solid #bbf7d0;
        }

        .medal .title {
            font-weight: 900;
            font-size: 1rem;
        }

        .medal .sub {
            font-size: .85rem;
            color: #64748b;
            font-weight: 700;
        }

        .next-box {
            border-radius: 1.25rem;
            padding: 1rem 1.1rem;
            border: 1px dashed #cbd5e1;
            background: #f8fafc;
        }

        .next-btn {
            border-radius: 1rem;
            font-weight: 900;
            padding: .85rem 1rem;
            background: linear-gradient(135deg, #2563eb, #0ea5e9);
            border: none;
            color: #fff;
            box-shadow: 0 12px 28px rgba(37, 99, 235, .28);
            transition: .2s ease;
        }

        .next-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 34px rgba(37, 99, 235, .38);
        }

        .pop-star {
            animation: pop .7s ease both;
        }

        @keyframes pop {
            0% {
                transform: scale(.6);
                opacity: 0
            }

            60% {
                transform: scale(1.1);
                opacity: 1
            }

            100% {
                transform: scale(1);
                opacity: 1
            }
        }

        .review-card {
            border-radius: var(--radius-xl);
            background: #fff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
            overflow: hidden;
            max-width: 1200px;
            margin-inline: auto;
        }

        .review-item {
            border-bottom: 1px dashed #e2e8f0;
            padding: 1rem 1.1rem;
        }

        .review-item:last-child {
            border-bottom: 0;
        }

        .ans-chip {
            font-size: .78rem;
            font-weight: 900;
            padding: .35rem .55rem;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            gap: .3rem;
        }

        .ans-chip.correct {
            background: var(--edu-green-soft);
            color: var(--edu-green);
            border: 1px solid #bbf7d0;
        }

        .ans-chip.wrong {
            background: var(--edu-red-soft);
            color: var(--edu-red);
            border: 1px solid #fecaca;
        }
    </style>
@endpush

@section('content')
    @php
        // ====== Ù¾Ø§ÛŒÙ‡ + fallbacks ======
        $percent = (float) ($attempt->percent ?? ($attempt->percentage ?? 0));

        $scoreObtained = (int) ($attempt->score_obtained ?? ($attempt->score ?? 0));

        $scoreTotal =
            (int) ($attempt->score_total ?? ($attempt->total_score ?? ($exam?->questions?->sum('score') ?? 0)));

        // ====== answers relation vs answers JSON ======
        $attemptAnswerModels = collect($attempt->getRelation('answers') ?? []);

        if ($attemptAnswerModels->isEmpty() && is_array($attempt->answers ?? null)) {
            // answers JSON: [question_id => user_answer]
            $attemptAnswerModels = collect($attempt->answers)->map(function ($userAns, $qid) use ($exam) {
                $q = $exam?->questions?->firstWhere('id', (int) $qid);
                return (object) [
                    'question' => $q,
                    'answer' => $userAns,
                    'is_correct' => null, // Ú†ÙˆÙ† JSON Ù‡Ø³ØªØŒ Ø¯Ø±Ø³Øª/ØºÙ„Ø· Ù†Ø¯Ø§Ø±ÛŒÙ…
                ];
            });
        }

        $wrongAnswers = $attemptAnswerModels->filter(fn($a) => (int) ($a->is_correct ?? 0) === 0);
        $correctAnswers = $attemptAnswerModels->filter(fn($a) => (int) ($a->is_correct ?? 0) === 1);

        $correctCount = $correctAnswers->count();
        $wrongCount = $wrongAnswers->count();

        // ====== Ù¾ÛŒØ§Ù… Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ ======
        if ($percent >= 85) {
            $statusTitle = 'ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø¨ÙˆØ¯ÛŒ! ğŸŒŸ';
            $statusMsg = 'ØªÙˆ ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø³Ø·Ø­ Ø¨Ø¹Ø¯ÛŒ Ø±Ùˆ Ø¨Ø²Ù†ÛŒ. Ø¨Ø±ÛŒÙ… ÛŒÙ‡ Ø¢Ø²Ù…ÙˆÙ† Ø³Ø®Øªâ€ŒØªØ±ØŸ';
            $badge = 'gold';
            $nextHint = 'Ú†Ø§Ù„Ø´ Ø§Ù…Ø±ÙˆØ²Øª Ø±Ùˆ Ú©Ø§Ù…Ù„ Ú©Ø±Ø¯ÛŒØ› Ø³Ø·Ø­ Ø¨Ø¹Ø¯ÛŒ Ù…Ù†ØªØ¸Ø±ØªÙ‡!';
        } elseif ($percent >= 60) {
            $statusTitle = 'Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ù¾ÛŒØ´ Ø±ÙØªÛŒ! ğŸ’ª';
            $statusMsg = 'Ú†Ù†Ø¯ØªØ§ Ù†Ú©ØªÙ‡ Ù…ÙˆÙ†Ø¯Ù‡ ØªØ§ Ø¹Ø§Ù„ÛŒ Ø´ÛŒ. Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¹Ø¯ÛŒ Ø±Ùˆ Ø¨Ø²Ù† ØªØ§ Ø±Ú©ÙˆØ±Ø¯Øª Ø±Ùˆ Ø¨Ø´Ú©Ù†ÛŒ.';
            $badge = 'silver';
            $nextHint = 'ÙÙ‚Ø· Ú†Ù†Ø¯ Ù‚Ø¯Ù… ØªØ§ Ø³Ø·Ø­ Ù‚Ù‡Ø±Ù…Ø§Ù†ÛŒ ÙØ§ØµÙ„Ù‡ Ø¯Ø§Ø±ÛŒ.';
        } else {
            $statusTitle = 'Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¨ÛŒ Ø¨ÙˆØ¯! ğŸš€';
            $statusMsg = 'Ø§Ø´ØªØ¨Ø§Ù‡â€ŒÙ‡Ø§ ÛŒØ¹Ù†ÛŒ Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ. ÛŒÙ‡ Ø¢Ø²Ù…ÙˆÙ† Ú©ÙˆØªØ§Ù‡â€ŒØªØ± Ø¨Ø²Ù† ØªØ§ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ù‚ÙˆÛŒ Ø´ÛŒ.';
            $badge = 'bronze';
            $nextHint = 'Ù‡Ø± Ù‚Ù‡Ø±Ù…Ø§Ù†ÛŒ Ø§ÙˆÙ„Ø´ Ú†Ù†Ø¯ Ø¨Ø§Ø± Ø²Ù…ÛŒÙ† Ù…ÛŒâ€ŒØ®ÙˆØ±Ù‡.';
        }

        // ====== LevelUp / Next exam suggestion ======
        if ($percent >= 85) {
            $levelUpText = 'Ø³Ø·Ø­ Û² Ø¨Ø§Ø² Ø´Ø¯ ğŸ‰';
            $medalType = 'gold';
            $medalTitle = 'Ù…Ø¯Ø§Ù„ Ø·Ù„Ø§ÛŒÛŒ Ú¯Ø±ÙØªÛŒ!';
            $medalSub = 'ØªÙˆ Ø¢Ù…Ø§Ø¯Ù‡â€ŒÛŒ Ú†Ø§Ù„Ø´ Ø³Ø®Øªâ€ŒØªØ± Ù‡Ø³ØªÛŒ.';
            $nextMsg = 'ÛŒÙ‡ Ø¢Ø²Ù…ÙˆÙ† Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯ÛŒ/Ø³Ø®Øªâ€ŒØªØ± Ø¨Ø²Ù† Ùˆ Ø±Ú©ÙˆØ±Ø¯ Ø±Ùˆ Ø¨Ø§Ù„Ø§ Ø¨Ø¨Ø±.';
            $nextFilter = 'olympiad';
            $nextIcon = 'bi-award-fill';
        } elseif ($percent >= 60) {
            $levelUpText = 'Ø³Ø·Ø­ Û±Ù«Ûµ ÙØ¹Ø§Ù„ Ø´Ø¯ âœ¨';
            $medalType = 'silver';
            $medalTitle = 'Ù…Ø¯Ø§Ù„ Ù†Ù‚Ø±Ù‡ Ú¯Ø±ÙØªÛŒ!';
            $medalSub = 'ÙÙ‚Ø· Ú†Ù†Ø¯ Ù‚Ø¯Ù… ØªØ§ Ø·Ù„Ø§ÛŒÛŒ Ø´Ø¯Ù† ÙØ§ØµÙ„Ù‡ Ø¯Ø§Ø±ÛŒ.';
            $nextMsg = 'ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† Ù…Ø´Ø§Ø¨Ù‡ Ø¨Ø²Ù† ØªØ§ Ø±Ú©ÙˆØ±Ø¯ØªÙˆ Ø¨Ø´Ú©Ù†ÛŒ.';
            $nextFilter = 'konkur';
            $nextIcon = 'bi-bullseye';
        } else {
            $levelUpText = 'Ø´Ø±ÙˆØ¹ Ù…Ø³ÛŒØ± Ù‚Ù‡Ø±Ù…Ø§Ù†ÛŒ ğŸ§ ';
            $medalType = 'bronze';
            $medalTitle = 'Ù…Ø¯Ø§Ù„ Ø¨Ø±Ù†Ø²ÛŒ Ú¯Ø±ÙØªÛŒ!';
            $medalSub = 'Ø§Ø´ØªØ¨Ø§Ù‡ ÛŒØ¹Ù†ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒØ› Ø§ÛŒÙ† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø®ÙˆØ¨Ù‡.';
            $nextMsg = 'ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† ØªÙ‚ÙˆÛŒØªÛŒ Ú©ÙˆØªØ§Ù‡â€ŒØªØ± Ø¨Ø²Ù† ØªØ§ Ø³Ø±ÛŒØ¹ Ù‚ÙˆÛŒ Ø´ÛŒ.';
            $nextFilter = 'taghviyati';
            $nextIcon = 'bi-lightning-fill';
        }

        // ====== Back route smart ======
        $backRoute =
            $exam?->scope === 'free' || $exam?->is_public
                ? route('student.exams.public')
                : route('student.exams.index');
    @endphp

    <div class="result-page container py-3 py-md-4">

        {{-- ================= HERO ================= --}}
        <div class="result-hero mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                    <h3>
                        <i class="bi bi-trophy"></i>
                        Ù†ØªÛŒØ¬Ù‡ Ø¢Ø²Ù…ÙˆÙ†
                    </h3>
                    <div class="sub">
                        Ø¢Ø²Ù…ÙˆÙ†: <span class="fw-bold">{{ $exam?->title ?? 'â€”' }}</span>
                    </div>
                </div>
                <a href="{{ $backRoute }}" class="btn btn-light btn-sm fw-bold">
                    <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
            </div>
        </div>

        {{-- ================= SCORE + REWARD SUMMARY ================= --}}
        <div class="row g-3 align-items-stretch mb-3" style="max-width:1200px;margin-inline:auto;">
            <div class="col-12 col-lg-4">
                <div class="reward-card h-100 text-center">
                    <div class="score-ring mx-auto" style="--percent: {{ $percent }};">
                        <div class="inner">
                            <div class="percent">{{ round($percent) }}%</div>
                            <div class="label">Ø¯Ø±ØµØ¯ Ø´Ù…Ø§</div>
                        </div>
                    </div>

                    <div class="mt-3 fw-bold fs-5">{{ $statusTitle }}</div>
                    <div class="text-muted small mt-1">{{ $statusMsg }}</div>

                    <div class="small text-muted mt-2 fw-bold">
                        Ø¯Ø±Ø³Øª: <span class="text-success">{{ $correctCount }}</span>
                        |
                        ØºÙ„Ø·: <span class="text-danger">{{ $wrongCount }}</span>
                    </div>

                    <div class="mt-3">
                        <span class="reward-badge {{ $badge }}">
                            <i class="bi bi-award-fill"></i>
                            Ù†Ø´Ø§Ù† Ø§Ù…Ø±ÙˆØ²
                            @if ($badge == 'gold')
                                Ø·Ù„Ø§ÛŒÛŒ
                            @elseif($badge == 'silver')
                                Ù†Ù‚Ø±Ù‡â€ŒØ§ÛŒ
                            @else
                                Ø¨Ø±Ù†Ø²ÛŒ
                            @endif
                        </span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-8">
                <div class="reward-card h-100">
                    <div class="row g-3">
                        <div class="col-12 col-md-4">
                            <div class="stat green">
                                <div class="icon"><i class="bi bi-check-circle"></i></div>
                                <div>
                                    <div class="label">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø³Øª</div>
                                    <div class="value">{{ $correctCount }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4">
                            <div class="stat">
                                <div class="icon"><i class="bi bi-x-circle"></i></div>
                                <div>
                                    <div class="label">ØªØ¹Ø¯Ø§Ø¯ ØºÙ„Ø·</div>
                                    <div class="value">{{ $wrongCount }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4">
                            <div class="stat amber">
                                <div class="icon"><i class="bi bi-stars"></i></div>
                                <div>
                                    <div class="label">Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„</div>
                                    <div class="value">{{ $scoreObtained }} / {{ $scoreTotal }}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="motivate good mt-3">
                        <div class="emoji">ğŸ¯</div>
                        <div>
                            <div class="fw-bold">Ù†Ú©ØªÙ‡â€ŒÛŒ Ù…Ù‡Ù…:</div>
                            {{ $nextHint }}
                        </div>
                    </div>

                    @if ($percent < 60)
                        <div class="motivate bad mt-2">
                            <div class="emoji">ğŸ”¥</div>
                            <div>
                                <div class="fw-bold">Ú†Ø§Ù„Ø´ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ø´Ø¯ Ø³Ø±ÛŒØ¹:</div>
                                ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† ØªÙ‚ÙˆÛŒØªÛŒ Ú©ÙˆØªØ§Ù‡ Ø¨Ø²Ù†Ø› Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ† Ø¯ÙˆÙ…ØŒ Ø¬Ù‡Ø´ Ù†Ù…Ø±Ù‡ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒ.
                            </div>
                        </div>
                    @else
                        <div class="motivate good mt-2">
                            <div class="emoji">âš¡</div>
                            <div>
                                <div class="fw-bold">Ø¨Ø²Ù† Ø±Ú©ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯!</div>
                                Ø§Ú¯Ø± Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† Ø¯ÛŒÚ¯Ù‡ Ø¨Ø¯ÛŒØŒ Ù…ØºØ²Øª Ù‡Ù†ÙˆØ² Ø¯Ø± Ø­Ø§Ù„Øª Â«ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ ÙØ¹Ø§Ù„Â»Ù‡ Ùˆ Ø¨Ù‡ØªØ± Ø¬ÙˆØ§Ø¨ Ù…ÛŒâ€ŒØ¯ÛŒ.
                            </div>
                        </div>
                    @endif

                    <div class="d-flex flex-wrap gap-2 mt-3">
                        <a href="{{ $backRoute }}" class="btn btn-cta">
                            Ø±ÙØªÙ† Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ
                            <i class="bi bi-arrow-left ms-1"></i>
                        </a>

                        <a href="{{ route('student.classrooms.index') }}" class="btn btn-outline-secondary btn-ghost">
                            Ø¯ÛŒØ¯Ù† Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
                            <i class="bi bi-people ms-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {{-- ================= CHECKPOINT + NEXT EXAM ================= --}}
        <div class="reward-wrap mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
                <div class="level-pill pop-star">
                    <i class="bi bi-stars"></i>
                    {{ $levelUpText }}
                </div>

                <div class="checkpoint pop-star">
                    <i class="bi bi-graph-up-arrow"></i>
                    Ø¯Ø±Ø³Øª: {{ $correctCount }} | ØºÙ„Ø·: {{ $wrongCount }}
                </div>
            </div>

            <div class="medal {{ $medalType }}">
                <div class="icon pop-star">
                    @if ($medalType === 'gold')
                        <i class="bi bi-trophy-fill"></i>
                    @elseif($medalType === 'silver')
                        <i class="bi bi-gem"></i>
                    @else
                        <i class="bi bi-shield-fill-check"></i>
                    @endif
                </div>
                <div>
                    <div class="title">{{ $medalTitle }}</div>
                    <div class="sub mt-1">{{ $medalSub }}</div>
                </div>
            </div>

            <div class="next-box mt-3">
                <div class="fw-bold mb-2 d-flex align-items-center gap-2">
                    <i class="bi {{ $nextIcon }} text-primary"></i>
                    Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø±Ø­Ù„Ù‡â€ŒÛŒ Ø¨Ø¹Ø¯ÛŒ
                </div>
                <div class="text-muted small mb-3" style="line-height:1.9">
                    {{ $nextMsg }}
                </div>

                {{-- query-string ÙÛŒÙ„ØªØ± Ø³Ø·Ø­ --}}
                <a href="{{ $backRoute }}?level={{ $nextFilter }}" class="btn next-btn w-100">
                    Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¹Ø¯ÛŒ
                    <i class="bi bi-play-fill ms-1"></i>
                </a>

                <div class="small text-muted text-center mt-2">
                    Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ† ÛŒÚ© Ù‚Ø¯Ù… Ø¨Ù‡ Ù‚Ù‡Ø±Ù…Ø§Ù†ÛŒ Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±Øª Ù…ÛŒâ€ŒÚ©Ù†Ù‡ ğŸ’ª
                </div>
            </div>
        </div>

        {{-- ================= WRONG ONLY ================= --}}
        <div class="review-card mt-3">
            <div class="p-3 p-md-4 border-bottom">
                <div class="fw-bold d-flex align-items-center gap-2">
                    <i class="bi bi-fire text-warning"></i>
                    Ø³ÙˆØ§Ù„Ø§ØªÛŒ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ† Ø¨ÛŒØ´ØªØ± Ø¯Ø§Ø±Ù†Ø¯
                </div>
                <div class="small text-muted mt-1">
                    ÙÙ‚Ø· Ø³ÙˆØ§Ù„Ø§ØªÛŒ Ú©Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¬ÙˆØ§Ø¨ Ø¯Ø§Ø¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ø³ØªÙ†Ø¯ â€”
                    <span class="fw-bold text-danger">{{ $wrongCount }}</span> Ø³ÙˆØ§Ù„.
                </div>
            </div>

            @if ($wrongCount == 0)
                <div class="p-3 p-md-4 text-center text-success fw-bold">
                    ğŸ‘ Ø¹Ø§Ù„ÛŒ! Ù‡ÛŒÚ† Ø³ÙˆØ§Ù„ ØºÙ„Ø·ÛŒ Ù†Ø¯Ø§Ø±ÛŒ.
                </div>
            @else
                @foreach ($wrongAnswers as $ans)
                    @php $q = $ans->question ?? null; @endphp

                    <div class="review-item">
                        <div class="d-flex justify-content-between align-items-center gap-2 mb-2">
                            <div class="fw-bold">
                                Ø³ÙˆØ§Ù„ {{ $loop->iteration }}
                            </div>
                            <span class="ans-chip wrong">
                                <i class="bi bi-x-circle"></i> Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙ…Ø±ÛŒÙ†
                            </span>
                        </div>

                        <div class="text-muted" style="line-height:1.9">
                            {!! nl2br(e($q->question_text ?? ($q->question ?? 'â€”'))) !!}
                        </div>

                        @if (!empty($q?->explanation))
                            <div class="mt-2 p-2 rounded-3" style="background:#f8fafc; border:1px dashed #e2e8f0;">
                                <div class="small fw-bold mb-1">
                                    <i class="bi bi-lightbulb"></i> ØªÙˆØ¶ÛŒØ­:
                                </div>
                                <div class="small text-muted">{{ $q->explanation }}</div>
                            </div>
                        @endif
                    </div>
                @endforeach
            @endif
        </div>

        {{-- ================= CORRECT ONLY ================= --}}
        <div class="review-card mt-3">
            <div class="p-3 p-md-4 border-bottom">
                <div class="fw-bold d-flex align-items-center gap-2">
                    <i class="bi bi-check2-circle text-success"></i>
                    Ø³ÙˆØ§Ù„Ø§ØªÛŒ Ú©Ù‡ Ø¯Ø±Ø³Øª Ø¬ÙˆØ§Ø¨ Ø¯Ø§Ø¯ÛŒ
                </div>
                <div class="small text-muted mt-1">
                    Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ø³ÙˆØ§Ù„Ø§ØªÛŒâ€ŒØ§Ù† Ú©Ù‡ Ø¯Ø±Ø³Øª Ø²Ø¯ÛŒ â€”
                    <span class="fw-bold text-success">{{ $correctCount }}</span> Ø³ÙˆØ§Ù„.
                </div>
            </div>

            @if ($correctCount == 0)
                <div class="p-3 p-md-4 text-center text-muted fw-bold">
                    Ù‡Ù†ÙˆØ² Ø³ÙˆØ§Ù„ Ø¯Ø±Ø³Øª Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡.
                </div>
            @else
                @foreach ($correctAnswers as $ans)
                    @php $q = $ans->question ?? null; @endphp

                    <div class="review-item">
                        <div class="d-flex justify-content-between align-items-center gap-2 mb-2">
                            <div class="fw-bold">
                                Ø³ÙˆØ§Ù„ {{ $loop->iteration }}
                            </div>
                            <span class="ans-chip correct">
                                <i class="bi bi-check2-circle"></i> Ø¯Ø±Ø³Øª
                            </span>
                        </div>

                        <div class="text-muted" style="line-height:1.9">
                            {!! nl2br(e($q->question_text ?? ($q->question ?? 'â€”'))) !!}
                        </div>

                        @if (!empty($q?->explanation))
                            <div class="mt-2 p-2 rounded-3" style="background:#fbfffd; border:1px dashed #bbf7d0;">
                                <div class="small fw-bold mb-1 text-success">
                                    <i class="bi bi-lightbulb"></i> ØªÙˆØ¶ÛŒØ­ ØªÚ©Ù…ÛŒÙ„ÛŒ:
                                </div>
                                <div class="small text-muted">{{ $q->explanation }}</div>
                            </div>
                        @endif
                    </div>
                @endforeach
            @endif
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 119: index.blade.php
ğŸ“ PATH: resources/views/dashboard/student/classrooms/index.blade.php
ğŸ“ SIZE: 35,877 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:09:16
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù† - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ… Ø±Ù†Ú¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .classrooms-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* Ù‡Ø¯Ø± ØµÙØ­Ù‡ */
        .page-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
        }

        .page-title-section h1 {
            font-weight: 800;
            font-size: 1.8rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .page-title-section h1 i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 600px;
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ø¯Ø± */
        .header-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* Ø¢Ù„Ø±Øªâ€ŒÙ‡Ø§ */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        /* Ù†ÙˆØ§Ø± Ø¬Ø³ØªØ¬Ùˆ */
        .search-bar {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 15px 20px;
            box-shadow: var(--shadow-md);
            margin-bottom: 25px;
            border: 2px solid rgba(0, 0, 0, 0.05);
            animation: fadeIn 0.6s ease-out;
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-icon {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .search-input {
            border: none;
            background: transparent;
            outline: none;
            width: 100%;
            font-size: 1rem;
            color: var(--dark);
            padding: 8px 0;
        }

        .search-input::placeholder {
            color: var(--gray);
        }

        .search-input:focus {
            box-shadow: none;
        }

        /* Ú©Ø§Ø±Øª Ú©Ù„Ø§Ø³ */
        .class-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }

        .class-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .class-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .class-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .class-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .class-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .class-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        .class-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .class-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
            z-index: 1;
        }

        /* Ù‡Ø¯Ø± Ú©Ø§Ø±Øª */
        .class-header {
            background: var(--gradient-1);
            color: white;
            padding: 25px 20px;
            position: relative;
            overflow: hidden;
        }

        .class-header::before {
            content: '';
            position: absolute;
            top: -50px;
            left: -50px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.15), transparent 70%);
            border-radius: 50%;
        }

        .class-chip {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 2;
            animation: pulse 2s infinite;
        }

        .class-title {
            font-weight: 800;
            font-size: 1.3rem;
            margin: 0 0 10px 0;
            color: white;
            position: relative;
            z-index: 2;
        }

        .class-meta {
            font-size: 0.9rem;
            opacity: 0.9;
            color: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        /* Ø¨Ø¯Ù†Ù‡ Ú©Ø§Ø±Øª */
        .class-body {
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .teacher-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding: 12px;
            background: var(--light-gray);
            border-radius: var(--radius-md);
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .teacher-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--primary-light);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .teacher-name {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--dark);
        }

        .teacher-label {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .class-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 12px;
            background: var(--light-gray);
            border-radius: var(--radius-md);
            border: 2px dashed rgba(0, 0, 0, 0.05);
            min-height: 60px;
        }

        .class-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            background: var(--light-gray);
            color: var(--dark);
            border: 2px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .stat-badge:hover {
            transform: translateY(-3px);
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        .stat-badge i {
            font-size: 0.9rem;
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .status-active {
            background: var(--accent-light);
            color: var(--accent);
            border: 2px solid rgba(0, 212, 170, 0.2);
        }

        .status-inactive {
            background: var(--light-gray);
            color: var(--gray);
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .status-published {
            background: var(--primary-light);
            color: var(--primary);
            border: 2px solid rgba(123, 104, 238, 0.2);
        }

        .status-draft {
            background: var(--secondary-light);
            color: var(--secondary);
            border: 2px solid rgba(255, 107, 157, 0.2);
        }

        .class-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .action-btn:active {
            transform: scale(0.97);
        }

        .btn-enter {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-enter:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-enter::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-enter:hover::before {
            right: 100%;
        }

        .btn-exams {
            background: var(--light-gray);
            color: var(--dark);
            border-color: rgba(0, 0, 0, 0.05);
        }

        .btn-exams:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.15);
        }

        /* ÙˆØ¶Ø¹ÛŒØª Ø®Ø§Ù„ÛŒ */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 30px;
            text-align: center;
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
            border: 2px dashed var(--primary-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .empty-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: var(--primary);
            font-size: 3rem;
            animation: float 4s ease-in-out infinite;
        }

        .empty-title {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .empty-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .classrooms-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-title-section h1 {
                font-size: 1.5rem;
            }

            .page-title-section h1 i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .header-buttons {
                width: 100%;
                flex-direction: column;
            }

            .btn-primary-custom,
            .btn-outline-custom {
                width: 100%;
                justify-content: center;
            }

            .class-body {
                padding: 15px;
            }

            .class-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            .empty-actions {
                flex-direction: column;
            }
        }

        @media (min-width: 992px) {
            .class-actions {
                flex-direction: row;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .action-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        $classrooms = $classrooms ?? collect();

        $joinFormRoute = route('student.classrooms.join.form');
        $dashboardRoute = route('student.index');
        $examsIndexRoute = route('student.exams.index');
    @endphp

    <div class="classrooms-page">
        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="page-title-section">
                <h1>
                    <i class="fas fa-users-class"></i>
                    Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†
                </h1>
                <p class="page-subtitle">
                    Ø§ÛŒÙ†Ø¬Ø§ ØªÙ…Ø§Ù… Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¹Ø¶Ùˆ Ù‡Ø³ØªÛŒ Ø¯ÛŒØ¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯Ø›
                    Ø§Ø² Ù‡Ù…ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù„Ø§Ø³ Ø¨Ø´ÛŒ ÛŒØ§ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§Ø´ Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒ. ğŸ“
                </p>
            </div>

            <div class="header-buttons">
                <a href="{{ $joinFormRoute }}" class="btn-primary-custom">
                    <i class="fas fa-plus-circle"></i>
                    Ø¹Ø¶ÙˆÛŒØª Ø¨Ø§ Ú©Ø¯ Ú©Ù„Ø§Ø³
                </a>
                <a href="{{ route('student.classrooms.index') }}" class="btn-outline-custom">
                    <i class="fas fa-sync-alt"></i>
                    Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                </a>
            </div>
        </div>

        {{-- ================= ALERTS ================= --}}
        @if (session('success'))
            <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--accent);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('success') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if (session('error'))
            <div class="alert-custom alert-danger-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--secondary);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('error') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        {{-- ================= SEARCH BAR ================= --}}
        @if ($classrooms->count())
            <div class="search-bar">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input id="classSearch" type="text" class="search-input"
                        placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ (Ø¹Ù†ÙˆØ§Ù†ØŒ Ù…Ø¹Ù„Ù…ØŒ Ú©Ø¯ Ú©Ù„Ø§Ø³...)">
                </div>
            </div>
        @endif

        {{-- ================= EMPTY STATE ================= --}}
        @if ($classrooms->isEmpty())
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>

                <h2 class="empty-title">Ù‡Ù†ÙˆØ² Ø¹Ø¶Ùˆ Ù‡ÛŒÚ† Ú©Ù„Ø§Ø³ÛŒ Ù†ÛŒØ³ØªÛŒ!</h2>

                <p class="empty-text">
                    Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒØŒ Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ú©Ù„Ø§Ø³ Ø±Ø§ Ø§Ø² Ù…Ø¹Ù„Ù…Øª Ø¨Ú¯ÛŒØ±
                    Ùˆ Ù‡Ù…ÛŒÙ†Ø¬Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù† ØªØ§ Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ù…ØªØµÙ„ Ø¨Ø´ÛŒ Ùˆ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø¨Ø±Ø§Øª ÙØ¹Ø§Ù„ Ø¨Ø´Ù‡.
                    Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ø¯Ù†ÛŒØ§ÛŒ Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø² ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø±Ùˆ Ø¨Ø±Ø§Øª Ø¨Ø§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ù† âœ¨
                </p>

                <div class="empty-actions">
                    <a href="{{ $joinFormRoute }}" class="btn-primary-custom" style="padding: 15px 30px;">
                        <i class="fas fa-key"></i>
                        Ø¹Ø¶ÙˆÛŒØª Ø¨Ø§ Ú©Ø¯ Ú©Ù„Ø§Ø³
                    </a>
                    <a href="{{ $dashboardRoute }}" class="btn-outline-custom" style="padding: 15px 30px;">
                        <i class="fas fa-home"></i>
                        Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                    </a>
                </div>
            </div>
        @else
            {{-- ================= CLASSROOMS GRID ================= --}}
            <div class="row g-4" id="classGrid">
                @foreach ($classrooms as $classroom)
                    @php
                        $teacher = $classroom->teacher ?? null;
                        $title = $classroom->title ?? ($classroom->name ?? 'Ú©Ù„Ø§Ø³ Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†');
                        $joinCode = $classroom->join_code ?? null;
                        $examsCount =
                            $classroom->exams_count ?? (isset($classroom->exams) ? $classroom->exams->count() : 0);
                        $studentsCount = $classroom->students_count ?? null;
                        $teacherName = $teacher->display_name ?? ($teacher->name ?? 'Ù†Ø§Ù…Ø´Ø®Øµ');
                        $teacherInitial = mb_substr(trim($teacherName), 0, 1) ?: 'Ù…';

                        $searchText = \Illuminate\Support\Str::lower(
                            trim(
                                $title .
                                    ' ' .
                                    $teacherName .
                                    ' ' .
                                    ($joinCode ?? '') .
                                    ' ' .
                                    ($classroom->subject ?? '') .
                                    ' ' .
                                    ($classroom->grade ?? ''),
                            ),
                        );
                    @endphp

                    <div class="col-md-6 col-xl-4 class-item" data-search="{{ $searchText }}">
                        <div class="class-card">
                            {{-- Ù‡Ø¯Ø± Ú©Ø§Ø±Øª --}}
                            <div class="class-header">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h3 class="class-title">{{ $title }}</h3>
                                        <div class="class-meta">
                                            @if (!empty($classroom->subject) || !empty($classroom->grade))
                                                <span>
                                                    <i class="fas fa-book"></i>
                                                    {{ $classroom->subject ?? 'Ø¹Ù…ÙˆÙ…ÛŒ' }}
                                                </span>
                                            @endif

                                            @if (!empty($classroom->grade))
                                                <span>
                                                    <i class="fas fa-graduation-cap"></i>
                                                    Ù¾Ø§ÛŒÙ‡ {{ $classroom->grade }}
                                                </span>
                                            @endif
                                        </div>
                                    </div>

                                    @if ($joinCode)
                                        <span class="class-chip">
                                            <i class="fas fa-key"></i>
                                            {{ $joinCode }}
                                        </span>
                                    @endif
                                </div>
                            </div>

                            {{-- Ø¨Ø¯Ù†Ù‡ Ú©Ø§Ø±Øª --}}
                            <div class="class-body">
                                {{-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø¹Ù„Ù… --}}
                                <div class="teacher-info">
                                    <div class="teacher-avatar">
                                        {{ $teacherInitial }}
                                    </div>
                                    <div>
                                        <div class="teacher-label">Ù…Ø¹Ù„Ù…</div>
                                        <div class="teacher-name">{{ $teacherName }}</div>
                                    </div>
                                </div>

                                {{-- ØªÙˆØ¶ÛŒØ­Ø§Øª --}}
                                <div class="class-description">
                                    @if (!empty($classroom->description))
                                        {{ \Illuminate\Support\Str::limit($classroom->description, 95) }}
                                    @else
                                        ØªÙˆØ¶ÛŒØ­ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡Ø› Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø¨Ø§ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ± Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒ.
                                    @endif
                                </div>

                                {{-- Ø¢Ù…Ø§Ø± Ùˆ ÙˆØ¶Ø¹ÛŒØª --}}
                                <div class="class-stats">
                                    <span class="stat-badge">
                                        <i class="fas fa-clipboard-list"></i>
                                        {{ $examsCount }} Ø¢Ø²Ù…ÙˆÙ†
                                    </span>

                                    @if (!is_null($studentsCount))
                                        <span class="stat-badge">
                                            <i class="fas fa-user-friends"></i>
                                            {{ $studentsCount }} Ø¹Ø¶Ùˆ
                                        </span>
                                    @endif

                                    <span
                                        class="status-badge {{ $classroom->is_active ? 'status-active' : 'status-inactive' }}">
                                        <i class="fas fa-circle"></i>
                                        {{ $classroom->is_active ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„' }}
                                    </span>

                                    @if (isset($classroom->is_published))
                                        <span
                                            class="status-badge {{ $classroom->is_published ? 'status-published' : 'status-draft' }}">
                                            <i class="fas fa-{{ $classroom->is_published ? 'globe' : 'edit' }}"></i>
                                            {{ $classroom->is_published ? 'Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡' : 'Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³' }}
                                        </span>
                                    @endif
                                </div>

                                {{-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ù‚Ø¯Ø§Ù… --}}
                                <div class="class-actions">
                                    <a href="{{ route('student.classrooms.show', $classroom) }}"
                                        class="action-btn btn-enter">
                                        <i class="fas fa-door-open"></i>
                                        ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³
                                    </a>
                                    <a href="{{ $examsIndexRoute }}" class="action-btn btn-exams">
                                        <i class="fas fa-clipboard-check"></i>
                                        Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        @endif

    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØªØ¹Ø§Ù…Ù„Ø§Øª
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ø§ÛŒÙ†Øª Ø³Ø§ÛŒØ¯
                const searchInput = document.getElementById('classSearch');
                const classItems = document.querySelectorAll('.class-item');

                if (searchInput && classItems.length > 0) {
                    searchInput.addEventListener('input', function() {
                        const query = this.value.toLowerCase().trim();

                        classItems.forEach(item => {
                            const searchText = item.getAttribute('data-search') || '';
                            if (searchText.includes(query)) {
                                item.style.display = 'block';
                                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¸Ù‡ÙˆØ±
                                item.style.animation = 'fadeIn 0.3s ease';
                            } else {
                                item.style.display = 'none';
                            }
                        });

                        if (navigator.vibrate && query.length > 0) {
                            navigator.vibrate(20);
                        }
                    });

                    // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ Ø¯Ú©Ù…Ù‡ ESC
                    searchInput.addEventListener('keydown', function(e) {
                        if (e.key === 'Escape') {
                            this.value = '';
                            this.dispatchEvent(new Event('input'));
                        }
                    });
                }

                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                const classCards = document.querySelectorAll('.class-card');
                classCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }

                            // Ø¯Ø± Ø­Ø§Ù„Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ù‡ ØµÙØ­Ù‡ Ú©Ù„Ø§Ø³ Ù‡Ø¯Ø§ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯
                            // window.location.href = this.querySelector('.btn-enter').href;
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³
                const enterButtons = document.querySelectorAll('.btn-enter');
                enterButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate([30, 50, 30]);
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                const examButtons = document.querySelectorAll('.btn-exams');
                examButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª Ùˆ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
                document.querySelectorAll('.btn-primary-custom, .btn-outline-custom').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
                const style = document.createElement('style');
                style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    `;
                document.head.appendChild(style);
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 120: join-class.blade.php
ğŸ“ PATH: resources/views/dashboard/student/classrooms/join-class.blade.php
ğŸ“ SIZE: 4,785 bytes
ğŸ•’ MODIFIED: 2025-12-03 10:25:52
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³')

@push('styles')
    <style>
        .page-wrap {
            padding: 1.5rem 0;
        }

        .soft-card {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            background: #fff;
        }

        .page-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: .75rem;
            margin-bottom: 1rem;
        }

        .page-title {
            font-weight: 800;
            letter-spacing: -.3px;
        }

        .hint {
            color: #64748b;
            font-size: .9rem;
        }

        .join-input {
            font-weight: 700;
            letter-spacing: .08em;
        }
    </style>
@endpush

@section('content')
    <div class="container page-wrap">

        {{-- ============================================================
     | Header
     |============================================================= --}}
        <div class="page-header">
            <div>
                <h4 class="page-title mb-1">
                    <i class="bi bi-box-arrow-in-right text-primary me-1"></i>
                    ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¨Ø§ Ú©Ø¯
                </h4>
                <div class="hint">
                    Ú©Ø¯ ÙˆØ±ÙˆØ¯ (join_code) Ø±Ø§ Ø§Ø² Ù…Ø¹Ù„Ù…Øª Ø¨Ú¯ÛŒØ± Ùˆ Ø§ÛŒÙ†Ø¬Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù† ØªØ§ Ø¹Ø¶Ùˆ Ú©Ù„Ø§Ø³ Ø´ÙˆÛŒ.
                </div>
            </div>

            <a href="{{ route('student.classrooms.index') }}"
                class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                <i class="bi bi-arrow-right"></i>
                Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
            </a>
        </div>

        {{-- ============================================================
     | Card
     |============================================================= --}}
        <div class="soft-card p-3 p-md-4">

            {{-- Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª --}}
            @if (session('success'))
                <div class="alert alert-success soft-card p-3">
                    <i class="bi bi-check-circle-fill me-1"></i>
                    {{ session('success') }}
                </div>
            @endif

            {{-- Ù¾ÛŒØ§Ù… Ù‡Ø´Ø¯Ø§Ø± --}}
            @if (session('warning'))
                <div class="alert alert-warning soft-card p-3">
                    <i class="bi bi-exclamation-triangle-fill me-1"></i>
                    {{ session('warning') }}
                </div>
            @endif

            {{-- Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ Ú©Ù„ÛŒ --}}
            @if ($errors->any())
                <div class="alert alert-danger soft-card p-3 small">
                    Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†:
                    <ul class="mb-0 mt-1">
                        @foreach ($errors->all() as $err)
                            <li>{{ $err }}</li>
                        @endforeach
                    </ul>
                </div>
            @endif

            <form method="POST" action="{{ route('student.classrooms.join') }}" class="mt-2">
                @csrf

                <div class="mb-3">
                    <label class="form-label fw-bold">Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ú©Ù„Ø§Ø³</label>

                    {{-- dir="ltr" Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø±Ø³Øª Ú©Ø¯ --}}
                    <input type="text" dir="ltr" name="join_code"
                        class="form-control join-input @error('join_code') is-invalid @enderror"
                        value="{{ old('join_code') }}" placeholder="Ù…Ø«Ù„Ø§Ù‹: ABC123" autocomplete="off">

                    @error('join_code')
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror

                    <div class="form-text">
                        Ø¨Ø¹Ø¯ Ø§Ø² Ø«Ø¨Øª Ú©Ø¯ØŒ Ú©Ù„Ø§Ø³ Ø¨Ù‡ Ù„ÛŒØ³Øª Â«Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†Â» Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ Ø¨Ø±Ø§ÛŒØª ÙØ¹Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.
                    </div>
                </div>

                <div class="d-flex gap-2 flex-wrap">
                    <button class="btn btn-primary d-inline-flex align-items-center gap-2">
                        <i class="bi bi-check2-circle"></i>
                        Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ù„Ø§Ø³
                    </button>

                    <a href="{{ route('student.classrooms.index') }}"
                        class="btn btn-link d-inline-flex align-items-center gap-1">
                        <i class="bi bi-arrow-right"></i>
                        Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>

            </form>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 121: show.blade.php
ğŸ“ PATH: resources/views/dashboard/student/classrooms/show.blade.php
ğŸ“ SIZE: 13,996 bytes
ğŸ•’ MODIFIED: 2025-12-03 10:25:16
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³')

@push('styles')
    <style>
        /* ------------------------------------------------------------------
                     | Page Shell
                     |-------------------------------------------------------------------*/
        .page-wrap {
            padding: 1.5rem 0;
        }

        .soft-card {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            background: #fff;
        }

        /* ------------------------------------------------------------------
                     | Classroom Header
                     |-------------------------------------------------------------------*/
        .class-header {
            background: linear-gradient(135deg, #eef2ff 0%, #f8fafc 100%);
            border-radius: 1.25rem;
            padding: 1.25rem 1.25rem 1rem 1.25rem;
            position: relative;
            overflow: hidden;
        }

        .class-chip {
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            background: #ffffffcc;
            border: 1px dashed #c7d2fe;
            font-weight: 800;
            padding: .25rem .7rem;
            border-radius: 999px;
            font-size: .85rem;
        }

        .meta {
            color: #64748b;
            font-size: .9rem;
        }

        .tiny {
            font-size: .85rem;
        }

        .stat-pill {
            background: #fff;
            border: 1px solid #eef2f7;
            padding: .45rem .8rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: .85rem;
        }

        /* ------------------------------------------------------------------
                     | Exams List
                     |-------------------------------------------------------------------*/
        .exam-card {
            border: 1px solid #eef2f7;
            border-radius: 1.1rem;
            transition: .2s ease;
            background: #fff;
        }

        .exam-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08);
            border-color: #e5e7eb;
        }

        .exam-badge {
            border-radius: 999px;
            font-size: .8rem;
            padding: .3rem .6rem;
            font-weight: 700;
        }

        /* ------------------------------------------------------------------
                     | Empty Exams
                     |-------------------------------------------------------------------*/
        .empty-wrap {
            text-align: center;
            padding: 2.5rem 1rem;
        }

        .empty-illus {
            width: 90px;
            height: 90px;
            border-radius: 1.75rem;
            background: #eef2ff;
            display: grid;
            place-items: center;
            margin: 0 auto 1rem;
            color: #4f46e5;
            font-size: 2rem;
        }

        .empty-title {
            font-weight: 800;
            margin-bottom: .5rem;
        }

        .empty-text {
            color: #64748b;
            max-width: 520px;
            margin: 0 auto 1.25rem;
        }
    </style>
@endpush


@section('content')
    <div class="container page-wrap">

        {{-- ============================================================
     | Top Actions
     |============================================================= --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-easel2-fill text-primary me-1"></i>
                    Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³
                </h4>
                <div class="text-muted small">
                    Ø¯Ø± Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„Ø§Ø³ Ùˆ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ù† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('student.classrooms.index') }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i>
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
                </a>

                <a href="{{ route('student.classrooms.join.form') }}"
                    class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-box-arrow-in-right"></i>
                    Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯
                </a>
            </div>
        </div>


        @php
            $title = $classroom->title ?? ($classroom->name ?? 'Ú©Ù„Ø§Ø³ Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†');

            $joinCode = $classroom->join_code ?? null;

            $teacher = $classroom->teacher ?? null;
            $teacherName = $teacher->display_name ?? ($teacher->name ?? 'Ù†Ø§Ù…Ø´Ø®Øµ');

            $exams = $classroom->exams ?? collect();
        @endphp

        {{-- ============================================================
     | Classroom Header Card
     |============================================================= --}}
        <div class="class-header soft-card mb-3">

            <div class="d-flex flex-wrap justify-content-between align-items-start gap-2">
                <div>
                    <div class="fw-bold fs-4 mb-1">
                        {{ $title }}
                    </div>

                    {{-- subject/grade ÙÙ‚Ø· Ø§Ú¯Ø± ÙˆØ§Ù‚Ø¹Ø§Ù‹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡ --}}
                    @if (!empty($classroom->subject) || !empty($classroom->grade))
                        <div class="meta">
                            {{ $classroom->subject ?? 'Ù…ÙˆØ¶ÙˆØ¹ Ù†Ø§Ù…Ø´Ø®Øµ' }}
                            @if (!empty($classroom->grade))
                                <span class="mx-1">â€¢</span>
                                Ù¾Ø§ÛŒÙ‡: {{ $classroom->grade }}
                            @endif
                        </div>
                    @endif
                </div>

                <div class="d-flex flex-column align-items-end gap-2">
                    @if ($joinCode)
                        <span class="class-chip">
                            <i class="bi bi-key-fill text-primary"></i>
                            {{ $joinCode }}
                        </span>
                    @endif

                    <span class="badge {{ $classroom->is_active ? 'bg-success' : 'bg-secondary' }} exam-badge">
                        {{ $classroom->is_active ? 'Ú©Ù„Ø§Ø³ ÙØ¹Ø§Ù„' : 'Ú©Ù„Ø§Ø³ ØºÛŒØ±ÙØ¹Ø§Ù„' }}
                    </span>

                    @if (isset($classroom->is_published))
                        <span
                            class="badge {{ $classroom->is_published ? 'bg-primary' : 'bg-light text-dark border' }} exam-badge">
                            {{ $classroom->is_published ? 'Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡' : 'Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³' }}
                        </span>
                    @endif
                </div>
            </div>

            {{-- Description --}}
            <div class="mt-3">
                @if (!empty($classroom->description))
                    <div class="small text-muted">
                        {{ $classroom->description }}
                    </div>
                @else
                    <div class="small text-muted">
                        Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ ØªÙˆØ¶ÛŒØ­ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                    </div>
                @endif
            </div>

            {{-- Teacher Info --}}
            <div class="mt-3 d-flex align-items-center gap-2">
                <div class="rounded-circle bg-white d-grid place-items-center border" style="width:42px;height:42px;">
                    <i class="bi bi-person-badge text-secondary"></i>
                </div>
                <div>
                    <div class="tiny text-muted">Ù…Ø¹Ù„Ù… Ú©Ù„Ø§Ø³</div>
                    <div class="fw-semibold">{{ $teacherName }}</div>
                </div>
            </div>

            {{-- Stats --}}
            <div class="d-flex flex-wrap gap-2 mt-3">
                <div class="stat-pill">
                    <i class="bi bi-journal-text me-1 text-primary"></i>
                    Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§: {{ $exams->count() }}
                </div>

                @if (isset($classroom->students_count))
                    <div class="stat-pill">
                        <i class="bi bi-people me-1 text-success"></i>
                        Ø§Ø¹Ø¶Ø§: {{ $classroom->students_count }}
                    </div>
                @endif
            </div>
        </div>


        {{-- ============================================================
     | Exams Section
     |============================================================= --}}
        <div class="soft-card p-3 p-md-4">

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
                <h5 class="fw-bold mb-0">
                    <i class="bi bi-ui-checks-grid text-primary me-1"></i>
                    Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³
                </h5>

                {{-- ÙØ¹Ù„Ø§Ù‹ Ø¨Ø¯ÙˆÙ† classroom_id Ú†ÙˆÙ† ÙÛŒÙ„ØªØ± Ø¯Ø± Ú©Ù†ØªØ±Ù„Ø± Ù†ÛŒØ³Øª --}}
                <a href="{{ route('student.exams.index') }}" class="btn btn-outline-primary btn-sm">
                    Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>
            </div>

            {{-- Empty exams --}}
            @if ($exams->isEmpty())
                <div class="empty-wrap">
                    <div class="empty-illus">
                        <i class="bi bi-journal-x"></i>
                    </div>

                    <h6 class="empty-title">Ù‡Ù†ÙˆØ² Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù…Ù†ØªØ´Ø± Ù†Ø´Ø¯Ù‡</h6>

                    <p class="empty-text">
                        Ø¨Ù‡ Ù…Ø­Ø¶ Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø¹Ù„Ù… Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ÛŒ Ø¨Ø³Ø§Ø²Ø¯ ÛŒØ§ Ù…Ù†ØªØ´Ø± Ú©Ù†Ø¯ØŒ
                        Ù‡Ù…ÛŒÙ†Ø¬Ø§ Ù„ÛŒØ³Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø´Ø±Ú©Øª Ú©Ù†ÛŒ.
                    </p>

                    <a href="{{ route('student.classrooms.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2">
                        <i class="bi bi-arrow-right"></i>
                        Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
                    </a>
                </div>
            @else
                {{-- Exams list --}}
                <div class="row g-3">
                    @foreach ($exams as $exam)
                        @php
                            $qCount =
                                $exam->questions_count ?? (isset($exam->questions) ? $exam->questions->count() : null);

                            $duration = $exam->duration ?? 0;
                        @endphp

                        <div class="col-md-6 col-xl-4">
                            <div class="exam-card p-3 h-100">

                                <div class="d-flex justify-content-between align-items-start gap-2">
                                    <div>
                                        <div class="fw-bold mb-1">
                                            {{ $exam->title ?? 'Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†' }}
                                        </div>
                                        <div class="tiny text-muted">
                                            Ù…Ø¯Øª: {{ $duration }} Ø¯Ù‚ÛŒÙ‚Ù‡
                                            @if (!is_null($qCount))
                                                <span class="mx-1">â€¢</span>
                                                Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§: {{ $qCount }}
                                            @endif
                                        </div>
                                    </div>

                                    @if (isset($exam->is_published))
                                        <span
                                            class="badge {{ $exam->is_published ? 'bg-success' : 'bg-light text-dark border' }} exam-badge">
                                            {{ $exam->is_published ? 'Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡' : 'Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³' }}
                                        </span>
                                    @endif
                                </div>

                                @if (!empty($exam->description))
                                    <div class="small text-muted mt-2">
                                        {{ \Illuminate\Support\Str::limit($exam->description, 90) }}
                                    </div>
                                @endif

                                <div class="d-flex gap-2 mt-3">
                                    <a href="{{ route('student.exams.show', $exam) }}"
                                        class="btn btn-outline-primary w-100 btn-sm">
                                        Ø¬Ø²Ø¦ÛŒØ§Øª
                                    </a>

                                    @if ($exam->is_published ?? false)
                                        <a href="{{ route('student.exams.take', $exam) }}"
                                            class="btn btn-primary w-100 btn-sm">
                                            Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†
                                        </a>
                                    @else
                                        <button class="btn btn-secondary w-100 btn-sm" disabled>
                                            Ù‡Ù†ÙˆØ² Ù…Ù†ØªØ´Ø± Ù†Ø´Ø¯Ù‡
                                        </button>
                                    @endif
                                </div>

                            </div>
                        </div>
                    @endforeach
                </div>

            @endif
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 122: classroom.blade.php
ğŸ“ PATH: resources/views/dashboard/student/exams/classroom.blade.php
ğŸ“ SIZE: 15,884 bytes
ğŸ•’ MODIFIED: 2025-12-03 08:32:27
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Classroom Exams')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;

            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;

            --edu-amber: #f59e0b;
            --edu-amber-soft: #fffbeb;

            --edu-gray: #0f172a;
            --edu-muted: #64748b;

            --edu-card: #ffffff;
            --edu-bg: #f8fafc;

            --radius-xl: 1.25rem;
            --radius-lg: 1rem;
        }

        .exam-page {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(6px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .exam-header {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 12px 30px rgba(37, 99, 235, .18);
            max-width: 1200px;
            margin-inline: auto;
        }

        .exam-header::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 280px;
            height: 280px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(18deg);
            opacity: .75;
            pointer-events: none;
        }

        .exam-header h4 {
            font-size: 1.15rem;
            font-weight: 900;
            margin-bottom: .25rem;
        }

        .exam-header .subtitle {
            color: rgba(255, 255, 255, .92);
            font-size: .82rem;
            line-height: 1.7;
        }

        .filter-box {
            background: #fff;
            border-radius: .9rem;
            padding: .55rem .7rem;
            box-shadow: 0 6px 16px rgba(15, 23, 42, .06);
            border: 1px solid #e2e8f0;
            min-width: 210px;
        }

        .exam-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1rem;
            align-items: stretch;
            max-width: 1200px;
            margin-inline: auto;
            margin-top: .75rem;
        }

        .exam-card {
            background: var(--edu-card);
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-lg);
            position: relative;
            overflow: hidden;
            transition: .25s ease;
            box-shadow: 0 8px 22px rgba(15, 23, 42, .06);
            animation: cardIn .55s ease both;
            display: flex;
            flex-direction: column;
        }

        @keyframes cardIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(.98)
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1)
            }
        }

        .exam-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 36px rgba(37, 99, 235, .12);
            border-color: #c7d2fe;
        }

        .exam-card .accent {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--edu-blue), var(--edu-green-2));
        }

        .exam-card.done .accent {
            background: linear-gradient(90deg, var(--edu-amber), #fb7185);
        }

        .exam-card.done {
            background: #fffdfa;
            border: 1px dashed #f59e0b66;
        }

        .exam-body {
            padding: 1rem 1rem .9rem;
        }

        .exam-title {
            font-weight: 900;
            color: var(--edu-gray);
            font-size: 1.05rem;
            letter-spacing: .2px;
            display: flex;
            align-items: center;
            gap: .5rem;
        }

        .exam-title i {
            color: var(--edu-blue);
            font-size: 1.15rem;
        }

        .exam-desc {
            color: var(--edu-muted);
            font-size: .9rem;
            line-height: 1.8;
            margin-top: .35rem;
            min-height: 42px;
        }

        .badge-soft {
            padding: .42rem .6rem;
            font-size: .78rem;
            border-radius: 999px;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            border: 1px solid transparent;
            white-space: nowrap;
        }

        .badge-blue {
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            border-color: #bfdbfe;
        }

        .badge-green {
            background: var(--edu-green-soft);
            color: var(--edu-green);
            border-color: #bbf7d0;
        }

        .badge-amber {
            background: var(--edu-amber-soft);
            color: #92400e;
            border-color: #fde68a;
        }

        .badge-dark {
            background: #0f172a;
            color: #fff;
        }

        .badge-light2 {
            background: #f1f5f9;
            color: #0f172a;
            border: 1px solid #e2e8f0;
        }

        .motivate {
            background: linear-gradient(90deg, #f8fafc, #eef2ff);
            border: 1px solid #e2e8f0;
            border-radius: .8rem;
            padding: .45rem .6rem;
            font-size: .8rem;
            color: #334155;
            display: flex;
            align-items: center;
            gap: .45rem;
            margin-top: .6rem;
        }

        .motivate i {
            color: var(--edu-blue-2);
        }

        .done-alert {
            background: var(--edu-amber-soft);
            border: 1px solid #fde68a;
            color: #92400e;
            border-radius: .85rem;
            padding: .5rem .75rem;
            font-size: .84rem;
            display: flex;
            align-items: center;
            gap: .5rem;
            margin-top: .6rem;
            animation: softPulse 2s infinite ease-in-out;
        }

        @keyframes softPulse {

            0%,
            100% {
                transform: scale(1)
            }

            50% {
                transform: scale(1.015)
            }
        }

        .exam-actions {
            padding: 0 1rem 1rem;
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: .5rem;
        }

        .btn-start {
            border-radius: .9rem;
            font-weight: 900;
            padding: .7rem .9rem;
            background: linear-gradient(135deg, var(--edu-blue), var(--edu-blue-2));
            border: none;
            box-shadow: 0 10px 24px rgba(37, 99, 235, .25);
            transition: .2s ease;
        }

        .btn-start:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 30px rgba(37, 99, 235, .35);
        }

        .btn-result {
            border-radius: .9rem;
            font-weight: 900;
            padding: .7rem .9rem;
            background: linear-gradient(135deg, var(--edu-green), var(--edu-green-2));
            border: none;
            box-shadow: 0 10px 24px rgba(34, 197, 94, .25);
        }

        .btn-disabled {
            border-radius: .9rem;
            font-weight: 800;
            background: #f1f5f9 !important;
            color: #334155 !important;
            border: 1px dashed #cbd5e1 !important;
            opacity: .9 !important;
        }

        .exam-card .bg-icon {
            position: absolute;
            left: -10px;
            bottom: -12px;
            font-size: 4.6rem;
            color: #e2e8f0;
            opacity: .35;
            transform: rotate(-8deg);
            pointer-events: none;
        }

        .exam-card.done .bg-icon {
            color: #fde68a;
            opacity: .25;
        }
    </style>
@endpush


@section('content')
    <div class="exam-page">

        {{-- Header + Classroom filter --}}
        <div class="exam-header mb-3 d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div>
                <h4>
                    <i class="bi bi-people-fill me-1"></i>
                    Classroom Exams
                </h4>
                <div class="subtitle">
                    These exams belong to your joined classrooms. Choose a class and start improving ğŸ’ª
                </div>
            </div>

            @php
                $classrooms = $classrooms ?? collect();
                $selectedClassroomId = request('classroom_id');
            @endphp

            @if ($classrooms->count())
                <form method="GET" action="{{ route('student.exams.classroom') }}"
                    class="filter-box d-flex align-items-center gap-2">
                    <i class="bi bi-funnel text-primary"></i>
                    <select name="classroom_id" class="form-select form-select-sm border-0 shadow-none"
                        onchange="this.form.submit()">
                        <option value="">All classrooms</option>
                        @foreach ($classrooms as $c)
                            <option value="{{ $c->id }}"
                                {{ (string) $selectedClassroomId === (string) $c->id ? 'selected' : '' }}>
                                {{ $c->title ?? $c->name }}
                            </option>
                        @endforeach
                    </select>

                    {{-- keep other query params --}}
                    @foreach (request()->except('classroom_id') as $k => $v)
                        <input type="hidden" name="{{ $k }}" value="{{ $v }}">
                    @endforeach
                </form>
            @endif
        </div>


        {{-- Empty State --}}
        @if ($exams->count() == 0)
            <div class="alert alert-warning d-flex align-items-center gap-2 rounded-3 shadow-sm">
                <i class="bi bi-emoji-frown fs-4"></i>
                No classroom exams are available right now.
            </div>
        @else
            <div class="exam-grid">
                @foreach ($exams as $exam)
                    @php
                        // safest last attempt (in case controller didn't sort)
$lastAttempt = $exam->attempts ? $exam->attempts->sortByDesc('id')->first() : null;

$isFinalAttempt =
    $lastAttempt &&
    (!is_null($lastAttempt->finished_at) ||
        !is_null($lastAttempt->submitted_at) ||
        in_array($lastAttempt->status ?? null, ['submitted', 'graded']));

// level icon + badge (NEW levels)
$levelIcon = match ($exam->level) {
    'easy' => 'bi-emoji-smile',
    'average' => 'bi-speedometer2',
    'hard' => 'bi-lightning-charge',
    'tough' => 'bi-fire',
    default => 'bi-lightning-charge',
};

$levelBadge = match ($exam->level) {
    'easy' => ['class' => 'badge-green', 'text' => 'Easy'],
    'average' => ['class' => 'badge-blue', 'text' => 'Average'],
    'hard' => ['class' => 'badge-amber', 'text' => 'Hard'],
    'tough' => ['class' => 'badge-dark', 'text' => 'Tough'],
    default => ['class' => 'badge-blue', 'text' => ucfirst($exam->level)],
                        };
                    @endphp

                    <div class="exam-card {{ $isFinalAttempt ? 'done' : '' }}">
                        <div class="accent"></div>

                        {{-- background icon --}}
                        <i class="bi {{ $levelIcon }} bg-icon"></i>

                        <div class="exam-body">
                            {{-- Title + badge --}}
                            <div class="d-flex align-items-start justify-content-between gap-2">
                                <div class="exam-title">
                                    <i class="bi bi-file-earmark-text"></i>
                                    {{ $exam->title }}
                                </div>

                                <span class="badge-soft badge-blue">
                                    <i class="bi bi-people-fill"></i> Classroom
                                </span>
                            </div>

                            <p class="exam-desc">
                                {{ $exam->description ?? 'No description' }}
                            </p>

                            <div class="d-flex flex-wrap gap-2 mt-2">

                                {{-- classroom name --}}
                                @if ($exam->classroom)
                                    <span class="badge-soft badge-blue">
                                        <i class="bi bi-mortarboard-fill"></i>
                                        {{ $exam->classroom->title ?? $exam->classroom->name }}
                                    </span>
                                @endif

                                {{-- difficulty/level --}}
                                <span class="badge-soft {{ $levelBadge['class'] }}">
                                    <i class="bi {{ $levelIcon }}"></i>
                                    {{ $levelBadge['text'] }}
                                </span>

                                <span class="badge-soft badge-light2">
                                    <i class="bi bi-clock-history"></i>
                                    {{ $exam->duration }} min
                                </span>

                                @if ($isFinalAttempt)
                                    <span class="badge-soft badge-amber">
                                        <i class="bi bi-check2-circle"></i> Completed
                                    </span>
                                @endif
                            </div>

                            <div class="motivate">
                                <i class="bi bi-graph-up-arrow"></i>
                                Every exam is one step forward â€” keep going!
                            </div>

                            @if ($isFinalAttempt)
                                <div class="done-alert">
                                    <i class="bi bi-shield-exclamation"></i>
                                    You already took this exam. Retake is disabled.
                                </div>
                            @endif
                        </div>

                        <div class="exam-actions">
                            @if ($isFinalAttempt)
                                <a href="{{ route('student.attempts.result', $lastAttempt->id) }}"
                                    class="btn btn-result w-100">
                                    View Result <i class="bi bi-eye ms-1"></i>
                                </a>

                                <button class="btn btn-disabled w-100" disabled>
                                    Start Exam (Disabled) <i class="bi bi-lock-fill ms-1"></i>
                                </button>
                            @else
                                <a href="{{ route('student.exams.show', $exam) }}" class="btn btn-start w-100">
                                    Go to Exam <i class="bi bi-arrow-left ms-1"></i>
                                </a>
                            @endif
                        </div>
                    </div>
                @endforeach
            </div>

            @if ($exams instanceof \Illuminate\Pagination\LengthAwarePaginator)
                <div class="mt-3">
                    {{ $exams->links() }}
                </div>
            @endif
        @endif
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 123: public.blade.php
ğŸ“ PATH: resources/views/dashboard/student/exams/public.blade.php
ğŸ“ SIZE: 60,157 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:34:28
----------------------------------------------------------------------

âš ï¸  LARGE FILE - SHOWING FIRST 2000 CHARACTERS
..................................................

@extends('layouts.app')
@section('title', 'Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ… Ø±Ù†Ú¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .public-exams-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
  

... [CONTENT TRUNCATED] ...

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 124: show.blade.php
ğŸ“ PATH: resources/views/dashboard/student/exams/show.blade.php
ğŸ“ SIZE: 20,819 bytes
ğŸ•’ MODIFIED: 2025-12-03 08:18:27
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø¬Ø²Ø¦ÛŒØ§Øª Ø¢Ø²Ù…ÙˆÙ†')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;
            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;
            --edu-amber: #f59e0b;
            --edu-amber-2: #fbbf24;
            --edu-amber-soft: #fffbeb;
            --edu-red: #dc2626;
            --edu-red-soft: #fff1f2;
            --edu-gray: #0f172a;
            --edu-muted: #64748b;
            --edu-bg: #f8fafc;
            --radius-xl: 1.25rem;
            --radius-lg: 1rem;
        }

        .page-wrap {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(6px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-soft {
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-xl);
            background: #fff;
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
            overflow: hidden;
        }

        .exam-hero {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1.15rem 1.25rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 14px 35px rgba(37, 99, 235, .2);
            max-width: 1100px;
            margin-inline: auto;
            isolation: isolate;
        }

        .exam-hero::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(18deg);
            opacity: .85;
            pointer-events: none;
            z-index: -1;
        }

        .exam-hero::before {
            content: "";
            position: absolute;
            inset: auto auto -40% -25%;
            width: 380px;
            height: 380px;
            background: radial-gradient(circle, rgba(255, 255, 255, .16), transparent 70%);
            z-index: -1;
        }

        .exam-hero h3 {
            font-weight: 900;
            font-size: 1.32rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: .55rem;
        }

        .exam-hero .subtitle {
            font-size: .9rem;
            color: rgba(255, 255, 255, .95);
            margin-top: .35rem;
            line-height: 1.9;
        }

        .mission-badge {
            display: flex;
            align-items: center;
            gap: .5rem;
            margin-top: .6rem;
            font-size: .85rem;
            font-weight: 900;
            color: #ffffff;
            opacity: .95;
        }

        .mission-badge .dot {
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background: #fff;
            box-shadow: 0 0 0 6px rgba(255, 255, 255, .18);
            animation: ping 1.8s infinite ease-in-out;
        }

        @keyframes ping {
            0% {
                transform: scale(1);
                opacity: .9;
            }

            70% {
                transform: scale(1.8);
                opacity: 0;
            }

            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            padding: .5rem .75rem;
            border-radius: 999px;
            font-weight: 900;
            font-size: .82rem;
            border: 1px solid transparent;
            white-space: nowrap;
            background: #fff;
            color: var(--edu-gray);
            box-shadow: 0 6px 14px rgba(15, 23, 42, .06);
            transition: .2s ease;
        }

        .chip:hover {
            transform: translateY(-1px);
        }

        .chip.blue {
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            border-color: #bfdbfe;
        }

        .chip.green {
            background: var(--edu-green-soft);
            color: var(--edu-green);
            border-color: #bbf7d0;
        }

        .chip.amber {
            background: var(--edu-amber-soft);
            color: #92400e;
            border-color: #fde68a;
        }

        .chip.dark {
            background: #0f172a;
            color: #fff;
        }

        .stat {
            border-radius: var(--radius-lg);
            background: #fff;
            border: 1px solid #e2e8f0;
            padding: .95rem 1rem;
            display: flex;
            align-items: center;
            gap: .8rem;
            box-shadow: 0 8px 20px rgba(15, 23, 42, .05);
            transition: .2s ease;
            position: relative;
            overflow: hidden;
        }

        .stat:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(37, 99, 235, .12);
        }

        .stat .icon {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            font-size: 1.25rem;
            font-weight: 900;
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            flex-shrink: 0;
        }

        .stat.green .icon {
            background: var(--edu-green-soft);
            color: var(--edu-green);
        }

        .stat.amber .icon {
            background: var(--edu-amber-soft);
            color: #92400e;
        }

        .stat .label {
            font-size: .8rem;
            color: var(--edu-muted);
            font-weight: 800;
        }

        .stat .value {
            font-size: 1.05rem;
            font-weight: 900;
            color: var(--edu-gray);
            margin-top: .12rem;
        }

        .stat .subvalue {
            font-size: .78rem;
            color: var(--edu-muted);
            font-weight: 700;
            margin-top: .1rem;
        }

        .difficulty-pill {
            display: inline-flex;
            align-items: center;
            gap: .4rem;
            font-size: .8rem;
            font-weight: 900;
            border-radius: 999px;
            padding: .25rem .6rem;
            border: 1px solid transparent;
        }

        .difficulty-easy {
            background: #ecfdf3;
            color: #166534;
            border-color: #bbf7d0;
        }

        .difficulty-medium {
            background: #eff6ff;
            color: #1d4ed8;
            border-color: #bfdbfe;
        }

        .difficulty-hard {
            background: #fff1f2;
            color: #b91c1c;
            border-color: #fecaca;
        }

        .alert-final {
            border: 0;
            border-radius: var(--radius-xl);
            background: linear-gradient(90deg, #fff1f2, #ffe4e6);
            box-shadow: 0 12px 28px rgba(220, 38, 38, .22);
            position: relative;
            overflow: hidden;
            animation: softPulse 1.6s infinite ease-in-out;
            padding: 1rem 1.1rem;
            max-width: 1100px;
            margin-inline: auto;
        }

        .alert-final::before {
            content: "";
            position: absolute;
            top: -55%;
            right: -15%;
            width: 260px;
            height: 260px;
            background: radial-gradient(circle, rgba(255, 255, 255, .9), transparent 60%);
            animation: floatGlow 2.8s infinite ease-in-out;
        }

        @keyframes softPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02);
            }
        }

        @keyframes floatGlow {

            0%,
            100% {
                transform: translate(0, 0);
                opacity: .5;
            }

            50% {
                transform: translate(-25px, 20px);
                opacity: .95;
            }
        }

        .btn-start {
            position: relative;
            border-radius: 1rem;
            font-weight: 900;
            padding: 1rem 1rem;
            border: none;
            background: linear-gradient(135deg, var(--edu-blue), var(--edu-blue-2));
            box-shadow: 0 12px 28px rgba(37, 99, 235, .28);
            transition: .2s ease;
            overflow: hidden;
            letter-spacing: .2px;
        }

        .btn-start::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .35), transparent);
            transform: translateX(-120%);
            animation: shine 2.8s infinite ease-in-out;
        }

        @keyframes shine {
            0% {
                transform: translateX(-120%);
            }

            55% {
                transform: translateX(120%);
            }

            100% {
                transform: translateX(120%);
            }
        }

        .btn-start:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 34px rgba(37, 99, 235, .38);
        }

        .btn-result {
            border-radius: .95rem;
            font-weight: 900;
            padding: .9rem 1rem;
            border: none;
            background: linear-gradient(135deg, var(--edu-green), var(--edu-green-2));
            box-shadow: 0 12px 28px rgba(34, 197, 94, .28);
        }

        .hint {
            background: #f8fafc;
            border: 1px dashed #cbd5e1;
            color: #334155;
            border-radius: .9rem;
            padding: .8rem .9rem;
            font-size: .9rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            line-height: 1.9;
        }

        .prep-bar {
            height: 8px;
            border-radius: 999px;
            background: #e2e8f0;
            overflow: hidden;
            position: relative;
            margin-top: .7rem;
        }

        .prep-bar .fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #22c55e, #0ea5e9, #2563eb);
            animation: fillup 1.2s ease forwards;
        }

        @keyframes fillup {
            to {
                width: 100%;
            }
        }

        .challenge {
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            background: #fff;
            padding: .9rem 1rem;
            display: flex;
            gap: .7rem;
            align-items: flex-start;
            box-shadow: 0 8px 18px rgba(15, 23, 42, .05);
        }

        .challenge .ico {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: var(--edu-amber-soft);
            color: #92400e;
            font-size: 1.2rem;
            font-weight: 900;
            flex-shrink: 0;
        }
    </style>
@endpush

@section('content')
    @php
        $qCount = $exam->questions_count ?? ($exam->questions->count() ?? 0);
        $duration = $exam->duration ?? 0;

        // âœ… difficulty mapping from level (easy/average/hard/tough)
        $diffKey = $exam->level ?? 'average';

        $diffText = match ($diffKey) {
            'easy' => 'Ø¢Ø³Ø§Ù†',
            'hard' => 'Ø³Ø®Øª',
            'tough' => 'Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª',
            default => 'Ù…ØªÙˆØ³Ø·', // average
        };

        $diffClass = match ($diffKey) {
            'easy' => 'difficulty-easy',
            'hard', 'tough' => 'difficulty-hard',
            default => 'difficulty-medium',
        };

        $motivationLine = match ($diffKey) {
            'easy' => 'Ú¯Ø±Ù…â€ŒÚ©Ù† Ø¹Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ğŸ’š',
            'hard' => 'Ú†Ø§Ù„Ø´ Ø¬Ø¯ÛŒØŒ Ø§Ù…Ø§ ØªÙˆ Ø§Ø² Ù¾Ø³Ø´ Ø¨Ø±Ù…ÛŒØ§ÛŒ ğŸ”¥',
            'tough' => 'Ù…Ø±Ø­Ù„Ù‡â€ŒÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒâ€ŒÙ‡Ø§ â€” Ø¨ØªØ±Ú©ÙˆÙ† ğŸ’¥',
            default => 'Ø³Ø·Ø­ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø¨Ø±Ø§ÛŒ Ø±Ø´Ø¯ Ø³Ø±ÛŒØ¹ ğŸš€',
        };

        // âœ… level chip data
        $levelChip = match ($diffKey) {
            'easy' => ['green', 'bi-lightning-fill', 'Ø¢Ø³Ø§Ù†'],
            'hard' => ['blue', 'bi-bullseye', 'Ø³Ø®Øª'],
            'tough' => ['amber', 'bi-award-fill', 'Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª'],
            default => ['blue', 'bi-speedometer2', 'Ù…ØªÙˆØ³Ø·'],
        };
    @endphp

    <div class="page-wrap container py-3 py-md-4">

        {{-- ================= HERO HEADER ================= --}}
        <div class="exam-hero mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                    <h3>
                        <i class="bi bi-file-earmark-text"></i>
                        {{ $exam->title }}
                    </h3>

                    <div class="subtitle">
                        Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒ ÛŒÚ© Ù‚Ø¯Ù… Ø¯ÛŒÚ¯Ù‡ Ø¨Ù‡ Ø³Ù…Øª Ù‡Ø¯Ùâ€ŒÙ‡Ø§Øª Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ± Ø¨Ø´ÛŒØŸ âœ¨
                        <br>
                        <span class="fw-bold">{{ $motivationLine }}</span>
                    </div>

                    <div class="mission-badge">
                        <span class="dot"></span>
                        Ù…Ø£Ù…ÙˆØ±ÛŒØª Ø§Ù…Ø±ÙˆØ²: Ø«Ø¨Øª ÛŒÚ© Ø±Ú©ÙˆØ±Ø¯ Ø¨Ù‡ØªØ± Ø§Ø² Ù‚Ø¨Ù„!
                    </div>

                    <div class="prep-bar">
                        <div class="fill"></div>
                    </div>
                </div>

                <a href="{{ route('student.exams.public') }}" class="btn btn-light btn-sm fw-bold">
                    <i class="bi bi-arrow-right"></i>
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
                </a>
            </div>

            {{-- chips row --}}
            <div class="d-flex flex-wrap gap-2 mt-3">
                @if ($exam->scope === 'free')
                    <span class="chip dark"><i class="bi bi-globe2"></i> Ø¢Ø²Ù…ÙˆÙ† Ø¹Ù…ÙˆÙ…ÛŒ</span>
                @else
                    <span class="chip blue">
                        <i class="bi bi-people-fill"></i>
                        Ø¢Ø²Ù…ÙˆÙ† Ú©Ù„Ø§Ø³ÛŒ
                        @if ($exam->classroom)
                            - {{ $exam->classroom->title ?? $exam->classroom->name }}
                        @endif
                    </span>
                @endif

                <span class="chip {{ $levelChip[0] }}">
                    <i class="bi {{ $levelChip[1] }}"></i>
                    {{ $levelChip[2] }}
                </span>

                <span class="chip">
                    <i class="bi bi-clock-history"></i>
                    Ù…Ø¯Øª {{ $duration }} Ø¯Ù‚ÛŒÙ‚Ù‡
                </span>

                <span class="chip {{ $diffClass }}">
                    <i class="bi bi-speedometer2"></i>
                    Ø³Ø®ØªÛŒ: {{ $diffText }}
                </span>
            </div>
        </div>


        {{-- ================= FLASH ================= --}}
        @if (session('warning'))
            <div class="alert alert-warning rounded-3 shadow-sm">{{ session('warning') }}</div>
        @endif
        @if (session('success'))
            <div class="alert alert-success rounded-3 shadow-sm">{{ session('success') }}</div>
        @endif


        {{-- ================= STATS (preview) ================= --}}
        <div class="row g-3 mb-3">
            <div class="col-12 col-md-4">
                <div class="stat">
                    <div class="icon"><i class="bi bi-question-circle"></i></div>
                    <div>
                        <div class="label">ØªØ¹Ø¯Ø§Ø¯ Ø³ÙˆØ§Ù„Ø§Øª</div>
                        <div class="value">{{ $qCount }}</div>
                        <div class="subvalue">ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ {{ max(1, ceil($qCount / 2)) }} Ø¯Ù‚ÛŒÙ‚Ù‡ ØªÙ…Ø±Ú©Ø²</div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-4">
                <div class="stat green">
                    <div class="icon"><i class="bi bi-star-fill"></i></div>
                    <div>
                        <div class="label">Ø³Ø·Ø­ Ø¢Ø²Ù…ÙˆÙ†</div>
                        <div class="value">
                            <span class="difficulty-pill {{ $diffClass }}">
                                {{ $diffText }}
                            </span>
                        </div>
                        <div class="subvalue">Ù‡Ø¯Ù: Ø¨Ù‡ØªØ± Ø§Ø² Ø¯ÙØ¹Ù‡â€ŒÛŒ Ù‚Ø¨Ù„</div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-4">
                <div class="stat amber">
                    <div class="icon"><i class="bi bi-shield-check"></i></div>
                    <div>
                        <div class="label">Ù‚Ø§Ù†ÙˆÙ† Ø¢Ø²Ù…ÙˆÙ†</div>
                        <div class="value">ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø±</div>
                        <div class="subvalue">Ù¾Ø³ Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø´Ø±ÙˆØ¹ Ú©Ù†</div>
                    </div>
                </div>
            </div>
        </div>


        {{-- ================= DESCRIPTION ================= --}}
        <div class="card-soft p-3 p-md-4 mb-3">
            <div class="fw-bold mb-2 d-flex align-items-center gap-2">
                <i class="bi bi-info-circle text-primary"></i>
                ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¢Ø²Ù…ÙˆÙ†
            </div>
            <div class="text-muted" style="line-height:1.9">
                {{ $exam->description ?? 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­' }}
            </div>
        </div>


        {{-- ================= CHALLENGE / MINDSET BOX ================= --}}
        <div class="challenge mb-3">
            <div class="ico"><i class="bi bi-rocket-takeoff"></i></div>
            <div>
                <div class="fw-bold mb-1">Ù‚Ø¨Ù„ Ø§Ø² Ø´Ø±ÙˆØ¹ ÛŒÚ© Ù†Ú©ØªÙ‡â€ŒÛŒ Ø·Ù„Ø§ÛŒÛŒ ğŸ‘‡</div>
                <div class="text-muted small" style="line-height:1.9">
                    Ø³Ø¹ÛŒ Ú©Ù† Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø¯ÙˆÙ† Ø¹Ø¬Ù„Ù‡ Ø¬ÙˆØ§Ø¨ Ø¨Ø¯ÛŒ.
                    Ø§Ú¯Ø± Ø¬Ø§ÛŒÛŒ Ú¯ÛŒØ± Ú©Ø±Ø¯ÛŒ Ø±Ø¯ Ø´Ùˆ Ùˆ Ø¢Ø®Ø± Ø¨Ø±Ú¯Ø±Ø¯.
                    Ø§ÛŒÙ† Ø±ÙˆØ´ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø§Ø¹Ø« Ø§ÙØ²Ø§ÛŒØ´ Ù†Ù…Ø±Ù‡ Ù…ÛŒØ´Ù‡.
                </div>
            </div>
        </div>


        {{-- ================= FINAL / NORMAL STATE ================= --}}
        @if ($isFinalAttempt)
            <div class="alert-final d-flex align-items-center gap-3 mb-3">
                <div class="fs-2">âš ï¸</div>
                <div>
                    <div class="fw-bold mb-1">
                        Ø´Ù…Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø´Ø±Ú©Øª Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.
                    </div>
                    <div class="small text-muted">
                        Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø± Ù‚Ø§Ø¨Ù„ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ Ø§Ø³Øª Ùˆ Ø§Ù…Ú©Ø§Ù† Ø´Ø±Ú©Øª Ù…Ø¬Ø¯Ø¯ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.
                    </div>
                </div>
            </div>

            <div class="d-flex flex-wrap gap-2">
                <a href="{{ route('student.attempts.result', $lastAttempt->id) }}" class="btn btn-result">
                    Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†ØªÛŒØ¬Ù‡ Ù‚Ø¨Ù„ÛŒ
                    <i class="bi bi-eye ms-1"></i>
                </a>

                <a href="{{ route('student.exams.public') }}" class="btn btn-outline-secondary fw-bold">
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
                </a>
            </div>
        @else
            <div class="card-soft p-3 p-md-4">
                <div class="hint mb-3">
                    <i class="bi bi-hourglass-split text-primary"></i>
                    Ø¨Ø§ Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†ØŒ ØªØ§ÛŒÙ…Ø± ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ ÙÙ‚Ø· ÛŒÚ©â€ŒØ¨Ø§Ø± Ø§Ù…Ú©Ø§Ù† Ø´Ø±Ú©Øª Ø¯Ø§Ø±ÛŒØ¯.
                    <span class="fw-bold">Ù†ÙØ³ Ø¹Ù…ÛŒÙ‚ Ø¨Ú©Ø´ Ùˆ Ø´Ø±ÙˆØ¹ Ú©Ù† ğŸ˜Œ</span>
                </div>

                <form method="POST" action="{{ route('student.exams.start', $exam->id) }}">
                    @csrf
                    <button class="btn btn-start w-100">
                        Ø´Ø±ÙˆØ¹ Ù…Ø£Ù…ÙˆØ±ÛŒØª Ø¢Ø²Ù…ÙˆÙ†
                        <i class="bi bi-play-fill ms-1"></i>
                    </button>
                </form>

                <div class="small text-muted text-center mt-3">
                    Ø¨Ø¹Ø¯ Ø§Ø² Ø²Ø¯Ù† Ø´Ø±ÙˆØ¹ØŒ ØªØ§ÛŒÙ…Ø± Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ ÙØ¹Ø§Ù„ Ù…ÛŒØ´Ù‡. Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§ÛŒØŸ
                </div>
            </div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 125: take.blade.php
ğŸ“ PATH: resources/views/dashboard/student/exams/take.blade.php
ğŸ“ SIZE: 30,400 bytes
ğŸ•’ MODIFIED: 2025-12-03 08:22:14
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø´Ø±Ú©Øª Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;

            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;

            --edu-amber: #f59e0b;
            --edu-amber-2: #fbbf24;
            --edu-amber-soft: #fffbeb;

            --edu-red: #dc2626;
            --edu-red-soft: #fff1f2;

            --edu-gray: #0f172a;
            --edu-muted: #64748b;
            --edu-bg: #f8fafc;

            --radius-xl: 1.25rem;
            --radius-lg: .9rem;
        }

        .take-page {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(6px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-soft {
            border: 1px solid #e2e8f0;
            background: #fff;
            border-radius: var(--radius-xl);
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
        }

        .top-hero {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 14px 35px rgba(37, 99, 235, .2);
            max-width: 1200px;
            margin-inline: auto;
            isolation: isolate;
        }

        .top-hero::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 280px;
            height: 280px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(18deg);
            opacity: .85;
            pointer-events: none;
            z-index: -1;
        }

        .top-hero h4 {
            font-weight: 900;
            margin: 0;
            font-size: 1.15rem;
        }

        .top-hero .sub {
            font-size: .85rem;
            color: rgba(255, 255, 255, .92);
            margin-top: .25rem;
        }

        .timer-pill {
            background: #0f172a;
            color: #fff;
            border-radius: 999px;
            padding: .45rem .9rem;
            font-weight: 900;
            font-size: .95rem;
            letter-spacing: .5px;
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, .18);
            transition: .2s ease;
        }

        .timer-pill.warn {
            background: #b45309;
        }

        .timer-pill.danger {
            background: #dc2626;
            animation: pulse 1.2s infinite ease-in-out;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.04);
            }
        }

        .progress-wrap {
            background: rgba(255, 255, 255, .15);
            border-radius: 999px;
            height: 9px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, .25);
        }

        .progress-bar-edu {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #fff, #dbeafe);
            transition: .35s ease;
        }

        .progress-text {
            font-size: .82rem;
            color: rgba(255, 255, 255, .98);
            font-weight: 900;
            white-space: nowrap;
        }

        .progress-meta {
            font-size: .8rem;
            font-weight: 900;
            color: rgba(255, 255, 255, .95);
            display: flex;
            align-items: center;
            gap: .35rem;
            background: rgba(0, 0, 0, .18);
            padding: .2rem .6rem;
            border-radius: 999px;
        }

        .q-section {
            display: none;
        }

        .q-section.active {
            display: block;
            animation: qIn .35s ease both;
        }

        @keyframes qIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .q-head {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: .5rem;
            margin-bottom: .6rem;
        }

        .q-number {
            font-weight: 900;
            color: var(--edu-gray);
            display: flex;
            align-items: center;
            gap: .45rem;
            font-size: 1rem;
        }

        .badge-type {
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            border: 1px solid #bfdbfe;
            font-weight: 900;
            border-radius: 999px;
            padding: .35rem .6rem;
            font-size: .78rem;
        }

        .q-card {
            border: 1px solid #bfdbfe;
            background: linear-gradient(180deg, #ffffff, #f8fbff);
            border-radius: var(--radius-lg);
            padding: 1rem 1.1rem;
            position: relative;
            box-shadow: inset 0 0 0 2px #eff6ff;
            line-height: 1.9;
            font-size: 1rem;
        }

        .q-card::before {
            content: "Ø³Ø¤Ø§Ù„";
            position: absolute;
            top: .75rem;
            left: .75rem;
            font-size: .72rem;
            font-weight: 900;
            color: #1d4ed8;
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            padding: .12rem .5rem;
            border-radius: 999px;
        }

        .answer-box {
            margin-top: .9rem;
            border: 1px dashed #86efac;
            background: #f6fffa;
            border-radius: var(--radius-lg);
            padding: .9rem;
            position: relative;
        }

        .answer-box::before {
            content: "Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§";
            position: absolute;
            top: -10px;
            right: 14px;
            font-size: .72rem;
            font-weight: 900;
            color: #166534;
            background: #ecfdf3;
            border: 1px solid #bbf7d0;
            padding: .1rem .5rem;
            border-radius: 999px;
        }

        .opt-item {
            border: 1px solid #e2e8f0;
            border-radius: .9rem;
            padding: .8rem .9rem;
            cursor: pointer;
            transition: .12s ease;
            display: flex;
            align-items: center;
            gap: .6rem;
            background: #ffffff;
            font-weight: 700;
        }

        .opt-item:hover {
            background: #f8fafc;
            border-color: #94a3b8;
            transform: translateY(-1px);
        }

        .opt-item.active {
            border-color: #86efac;
            background: #ecfdf3;
            box-shadow: 0 8px 18px rgba(34, 197, 94, .12);
        }

        .opt-item input {
            transform: translateY(1px) scale(1.08);
        }

        .essay-input {
            min-height: 140px;
            border-radius: .9rem;
        }

        .fill-input {
            border-radius: .9rem;
        }

        .nav-btn {
            border-radius: .9rem;
            font-weight: 900;
            padding: .6rem .95rem;
        }

        .sticky-box {
            position: sticky;
            top: 1rem;
        }

        .dots-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: .5rem;
        }

        .q-dot {
            width: 36px;
            height: 36px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            font-weight: 900;
            cursor: pointer;
            border: 1px solid #e2e8f0;
            background: #f8fafc;
            transition: .15s ease;
            font-size: .85rem;
        }

        .q-dot:hover {
            transform: translateY(-1px);
            border-color: #cbd5e1;
        }

        .q-dot.active {
            background: var(--edu-blue);
            color: #fff;
            border-color: var(--edu-blue);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, .12);
        }

        .q-dot.answered {
            background: var(--edu-green-soft);
            border-color: var(--edu-green);
            color: var(--edu-green);
            box-shadow: 0 0 0 4px rgba(34, 197, 94, .12);
        }

        .q-dot.flagged {
            background: var(--edu-amber-soft);
            border-color: var(--edu-amber-2);
            color: #92400e;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
            font-size: .78rem;
            color: var(--edu-muted);
            font-weight: 800;
        }

        .legend span {
            display: flex;
            align-items: center;
            gap: .35rem;
        }

        .submit-section {
            border: 1px dashed #cbd5e1;
            background: #f8fafc;
            border-radius: var(--radius-lg);
        }

        .reward-flash {
            position: fixed;
            inset: 0;
            pointer-events: none;
            display: none;
            z-index: 9999;
            background: radial-gradient(circle at top, rgba(34, 197, 94, .12), transparent 55%);
            animation: flash .6s ease both;
        }

        @keyframes flash {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @media (max-width: 992px) {
            .dots-grid {
                grid-template-columns: repeat(10, 1fr);
            }

            .sticky-box {
                position: static;
            }
        }
    </style>
@endpush

@section('content')

    {{-- Guard --}}
    @if (empty($attempt))
        <div class="container py-4">
            <div class="alert alert-warning d-flex justify-content-between align-items-center flex-wrap gap-2">
                <div>Ø¨Ø±Ø§ÛŒ Ø´Ø±Ú©Øª Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø§ÛŒØ¯ Ø§ÙˆÙ„ Â«Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†Â» Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯.</div>
                <a href="{{ route('student.exams.show', $exam->id) }}" class="btn btn-primary btn-sm">
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ†
                </a>
            </div>
        </div>
        @php return; @endphp
    @endif

    <div class="reward-flash" id="rewardFlash"></div>

    <div class="take-page container py-3 py-md-4">

        {{-- ================= TOP HERO ================= --}}
        <div class="top-hero mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                    <h4>
                        <i class="bi bi-pencil-square me-1"></i>
                        Ø´Ø±Ú©Øª Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†
                    </h4>
                    <div class="sub">
                        Ø¢Ø²Ù…ÙˆÙ†: <span class="fw-bold">{{ $exam->title }}</span>
                    </div>
                </div>

                <div class="d-flex align-items-center gap-2">
                    {{-- âœ… Timer based on exams.duration --}}
                    @if (!empty($exam->duration))
                        <div class="timer-pill" id="timerPill" data-min="{{ $exam->duration }}">
                            <i class="bi bi-stopwatch"></i>
                            <span id="timerText">{{ $exam->duration }}:00</span>
                        </div>
                    @endif

                    <a href="{{ route('student.exams.show', $exam->id) }}" class="btn btn-light btn-sm fw-bold">
                        <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>
            </div>

            {{-- progress --}}
            <div class="mt-3 d-flex align-items-center gap-2">
                <div class="progress-wrap flex-grow-1">
                    <div class="progress-bar-edu" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">0%</div>
                <div class="progress-meta" id="progressMeta">
                    <i class="bi bi-layers"></i>
                    Ø³Ø¤Ø§Ù„ 1 Ø§Ø² {{ $exam->questions->count() }}
                </div>
            </div>
        </div>


        <div class="row g-3">

            {{-- ================= QUESTIONS ================= --}}
            <div class="col-lg-9">

                <form method="POST" action="{{ route('student.exams.submit', $exam->id) }}" id="examForm">
                    @csrf

                    @if (isset($attempt) && $attempt)
                        <input type="hidden" name="attempt_id" value="{{ $attempt->id }}">
                    @endif

                    @foreach ($exam->questions as $q)
                        @php
                            $savedAnswers = $attempt?->answers ?? [];
                            $saved = $savedAnswers[$q->id] ?? null;

                            // âœ… normalize saved for mcq
                            if (is_array($saved)) {
                                $saved = $saved[0] ?? null;
                            }

                            // âœ… MCQ options support legacy + JSON
                            $opts = [];
                            if ($q->type === 'mcq') {
                                if (is_array($q->options) && count($q->options)) {
                                    $opts = $q->options; // expected {"a":"..","b":".."}
                                } else {
                                    $opts = [
                                        'a' => $q->option_a,
                                        'b' => $q->option_b,
                                        'c' => $q->option_c,
                                        'd' => $q->option_d,
                                    ];
                                }
                            }
                        @endphp

                        <div class="card-soft p-3 p-md-4 mb-3 q-section" id="q-{{ $q->id }}"
                            data-qid="{{ $q->id }}" data-index="{{ $loop->index }}">

                            {{-- Head --}}
                            <div class="q-head">
                                <div class="q-number">
                                    <span class="badge bg-primary rounded-pill">{{ $loop->iteration }}</span>
                                    Ø³ÙˆØ§Ù„ {{ $loop->iteration }}
                                </div>

                                <div class="d-flex align-items-center gap-2">
                                    <span class="badge-type">{{ $q->type }}</span>

                                    @if (!empty($q->score))
                                        <span class="small text-muted fw-bold">
                                            Ø§Ù…ØªÛŒØ§Ø²: {{ $q->score }}
                                        </span>
                                    @endif

                                    {{-- flag --}}
                                    <button type="button" class="btn btn-outline-warning btn-sm nav-btn flag-btn"
                                        data-flag="{{ $q->id }}">
                                        <i class="bi bi-flag"></i>
                                    </button>
                                </div>
                            </div>

                            {{-- Question text --}}
                            <div class="q-card mb-3">
                                {!! nl2br(e($q->question ?? $q->question_text)) !!}
                            </div>

                            {{-- Answer box --}}
                            <div class="answer-box">
                                @if ($q->type === 'mcq')
                                    <div class="vstack gap-2">
                                        @foreach ($opts as $key => $text)
                                            @if ($text)
                                                <label class="opt-item {{ $saved == $key ? 'active' : '' }}">
                                                    <input class="form-check-input m-0" type="radio"
                                                        name="answers[{{ $q->id }}]" value="{{ $key }}"
                                                        @checked($saved == $key)>
                                                    <div class="flex-grow-1">
                                                        <span class="fw-bold me-1">{{ strtoupper($key) }}.</span>
                                                        {{ is_string($text) ? $text : json_encode($text) }}
                                                    </div>
                                                </label>
                                            @endif
                                        @endforeach
                                    </div>
                                @elseif($q->type === 'true_false')
                                    <div class="vstack gap-2">
                                        <label
                                            class="opt-item {{ $saved === 'true' || $saved === true || $saved === 1 ? 'active' : '' }}">
                                            <input class="form-check-input m-0" type="radio"
                                                name="answers[{{ $q->id }}]" value="true"
                                                @checked($saved === 'true' || $saved === true || $saved === 1)>
                                            <div class="flex-grow-1 fw-bold">ØµØ­ÛŒØ­</div>
                                        </label>

                                        <label
                                            class="opt-item {{ $saved === 'false' || $saved === false || $saved === 0 ? 'active' : '' }}">
                                            <input class="form-check-input m-0" type="radio"
                                                name="answers[{{ $q->id }}]" value="false"
                                                @checked($saved === 'false' || $saved === false || $saved === 0)>
                                            <div class="flex-grow-1 fw-bold">ØºÙ„Ø·</div>
                                        </label>
                                    </div>
                                @elseif($q->type === 'fill_blank')
                                    <div>
                                        <label class="form-label small text-muted fw-bold">
                                            Ù¾Ø§Ø³Ø® Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù† (Ø§Ú¯Ø± Ú†Ù†Ø¯ Ø¬ÙˆØ§Ø¨ Ø¯Ø§Ø±Ø¯ Ø¨Ø§ Â«Ú©Ø§Ù…Ø§Â» Ø¬Ø¯Ø§ Ú©Ù†)
                                        </label>
                                        <input type="text" name="answers[{{ $q->id }}]"
                                            value="{{ old('answers.' . $q->id, $saved) }}" class="form-control fill-input"
                                            placeholder="Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†, Ø§ÛŒØ±Ø§Ù†">
                                    </div>
                                @elseif($q->type === 'essay')
                                    <div>
                                        <label class="form-label small text-muted fw-bold">Ù¾Ø§Ø³Ø® ØªØ´Ø±ÛŒØ­ÛŒ</label>
                                        <textarea name="answers[{{ $q->id }}]" class="form-control essay-input" rows="4"
                                            placeholder="Ù¾Ø§Ø³Ø® Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³...">{{ old('answers.' . $q->id, $saved) }}</textarea>
                                        <div class="small text-muted mt-1">
                                            Ø§ÛŒÙ† Ø³ÙˆØ§Ù„ ØªÙˆØ³Ø· Ù…Ø¹Ù„Ù… ØªØµØ­ÛŒØ­ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                                        </div>
                                    </div>
                                @else
                                    <div class="alert alert-warning small">
                                        Ù†ÙˆØ¹ Ø³ÙˆØ§Ù„ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡ Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø·Ù„Ø§Ø¹ Ø¯Ù‡ÛŒØ¯.
                                    </div>
                                @endif
                            </div>

                            {{-- nav buttons --}}
                            <div class="d-flex justify-content-between mt-4">
                                <button type="button" class="btn btn-outline-secondary btn-sm nav-btn prev-btn">
                                    <i class="bi bi-chevron-right"></i> Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„ÛŒ
                                </button>
                                <button type="button" class="btn btn-outline-primary btn-sm nav-btn next-btn">
                                    Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ <i class="bi bi-chevron-left"></i>
                                </button>
                            </div>
                        </div>

                        @if ($loop->last)
                            {{-- Submit --}}
                            <div class="card-soft p-3 p-md-4 submit-section">
                                <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                                    <div class="text-muted small fw-bold">
                                        Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ØŒ Ø§Ù…Ú©Ø§Ù† ØªØºÛŒÛŒØ± Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ù†ÛŒØ³Øª.
                                    </div>
                                    <button id="finalSubmitBtnMain" type="submit" class="btn btn-success px-4 fw-bold">
                                        <i class="bi bi-check2-circle"></i> Ø§Ø±Ø³Ø§Ù„ Ù†Ù‡Ø§ÛŒÛŒ
                                    </button>
                                </div>
                            </div>
                        @endif
                    @endforeach

                </form>
            </div>


            {{-- ================= SIDE NAV ================= --}}
            <div class="col-lg-3">
                <div class="card-soft p-3 sticky-box">
                    <div class="fw-bold mb-2 d-flex align-items-center gap-2">
                        <i class="bi bi-map"></i>
                        Ù…Ø³ÛŒØ± Ø³Ø¤Ø§Ù„â€ŒÙ‡Ø§
                    </div>

                    <div class="dots-grid" id="dotsBox">
                        @foreach ($exam->questions as $q)
                            <div class="q-dot" data-goto="q-{{ $q->id }}">
                                {{ $loop->iteration }}
                            </div>
                        @endforeach
                    </div>

                    <hr>

                    <div class="legend">
                        <span><span class="q-dot active"></span> Ø³Ø¤Ø§Ù„ ÙØ¹Ù„ÛŒ</span>
                        <span><span class="q-dot answered"></span> Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡â€ŒØ´Ø¯Ù‡</span>
                        <span><span class="q-dot flagged"></span> Ø¹Ù„Ø§Ù…Øªâ€ŒØ¯Ø§Ø±</span>
                    </div>

                    <div class="small text-muted mt-2">
                        Ø±ÙˆÛŒ Ø´Ù…Ø§Ø±Ù‡â€ŒÙ‡Ø§ Ø¨Ø²Ù† ØªØ§ Ø³Ø±ÛŒØ¹ Ø¨Ø±ÛŒ Ù‡Ù…ÙˆÙ† Ø³Ø¤Ø§Ù„.
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection


@push('scripts')
    <script>
        (function() {
            const sections = Array.from(document.querySelectorAll('.q-section'));
            const dots = Array.from(document.querySelectorAll('.q-dot'));
            const submitBox = document.querySelector('.submit-section');

            let currentIndex = 0;
            const total = sections.length;

            function isQuestionAnswered(section) {
                const qid = section.dataset.qid;
                const checkedRadio = section.querySelector(`input[type="radio"][name="answers[${qid}]"]:checked`);
                if (checkedRadio) return true;

                const textInput = section.querySelector(`input[type="text"][name="answers[${qid}]"]`);
                if (textInput && textInput.value.trim()) return true;

                const textarea = section.querySelector(`textarea[name="answers[${qid}]"]`);
                if (textarea && textarea.value.trim()) return true;

                return false;
            }

            function updateAnsweredState(section) {
                const qid = section.dataset.qid;
                const idx = sections.findIndex(s => s.dataset.qid == qid);
                if (idx < 0) return;

                if (isQuestionAnswered(section)) dots[idx].classList.add('answered');
                else dots[idx].classList.remove('answered');
            }

            function updateProgress() {
                const answeredCount = sections.filter(s => isQuestionAnswered(s)).length;
                const percent = Math.round((answeredCount / total) * 100);

                const bar = document.getElementById('progressBar');
                const text = document.getElementById('progressText');
                const meta = document.getElementById('progressMeta');

                if (bar) bar.style.width = percent + '%';
                if (text) text.textContent = percent + '%';
                if (meta) meta.innerHTML = `<i class="bi bi-layers"></i> Ø³Ø¤Ø§Ù„ ${currentIndex+1} Ø§Ø² ${total}`;
            }

            function showRewardFlash() {
                const fx = document.getElementById('rewardFlash');
                if (!fx) return;
                fx.style.display = 'block';
                setTimeout(() => fx.style.display = 'none', 500);
            }

            function fixNavButtonsForCurrent() {
                const currentSection = sections[currentIndex];
                if (!currentSection) return;

                const prevBtn = currentSection.querySelector('.prev-btn');
                const nextBtn = currentSection.querySelector('.next-btn');
                if (prevBtn) prevBtn.disabled = (currentIndex === 0);
                if (nextBtn) nextBtn.disabled = (currentIndex === total - 1);
            }

            function showQuestion(i) {
                currentIndex = Math.min(Math.max(i, 0), total - 1);

                sections.forEach((s, idx) => s.classList.toggle('active', idx === currentIndex));
                dots.forEach((d, idx) => d.classList.toggle('active', idx === currentIndex));

                if (submitBox) {
                    submitBox.style.display = (currentIndex === total - 1) ? 'block' : 'none';
                }

                fixNavButtonsForCurrent();
                updateProgress();

                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }

            // init
            sections.forEach((s, idx) => idx === 0 ? s.classList.add('active') : s.classList.remove('active'));
            dots[0]?.classList.add('active');
            if (submitBox) submitBox.style.display = 'none';
            updateProgress();
            fixNavButtonsForCurrent();

            // prev/next
            document.querySelectorAll('.prev-btn').forEach(btn =>
                btn.addEventListener('click', () => showQuestion(currentIndex - 1))
            );
            document.querySelectorAll('.next-btn').forEach(btn =>
                btn.addEventListener('click', () => showQuestion(currentIndex + 1))
            );

            // dots jump
            dots.forEach((dot, idx) => dot.addEventListener('click', () => showQuestion(idx)));

            // option highlight + answered state
            document.querySelectorAll('.opt-item input[type=radio]').forEach(inp => {
                inp.addEventListener('change', e => {
                    const section = e.target.closest('.q-section');
                    const options = section.querySelectorAll('.opt-item');
                    options.forEach(o => o.classList.remove('active'));
                    e.target.closest('.opt-item')?.classList.add('active');

                    updateAnsweredState(section);
                    updateProgress();
                    showRewardFlash();
                });
            });

            document.querySelectorAll('input[type=text], textarea').forEach(inp => {
                inp.addEventListener('input', e => {
                    const section = e.target.closest('.q-section');
                    updateAnsweredState(section);
                    updateProgress();
                });
            });

            // flagging
            document.querySelectorAll('.flag-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const section = e.target.closest('.q-section');
                    const qid = section.dataset.qid;
                    const idx = sections.findIndex(s => s.dataset.qid == qid);
                    if (idx < 0) return;
                    dots[idx].classList.toggle('flagged');
                });
            });

            // Timer
            const timerPill = document.getElementById('timerPill');
            if (timerPill) {
                let minutes = parseInt(timerPill.dataset.min || '0');
                let seconds = minutes * 60;
                const timerText = document.getElementById('timerText');

                function setTimerStyle() {
                    timerPill.classList.remove('warn', 'danger');
                    if (seconds <= 60) timerPill.classList.add('danger');
                    else if (seconds <= 5 * 60) timerPill.classList.add('warn');
                }

                function tick() {
                    seconds--;
                    if (seconds < 0) seconds = 0;

                    const m = Math.floor(seconds / 60);
                    const s = seconds % 60;
                    timerText.textContent = `${m}:${String(s).padStart(2,'0')}`;

                    setTimerStyle();

                    if (seconds <= 0) document.getElementById('examForm').submit();
                }

                setTimerStyle();
                setInterval(tick, 1000);
            }

        })();
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 126: index.blade.php
ğŸ“ PATH: resources/views/dashboard/student/index.blade.php
ğŸ“ SIZE: 50,880 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:47:55
----------------------------------------------------------------------

âš ï¸  LARGE FILE - SHOWING FIRST 2000 CHARACTERS
..................................................

@extends('layouts.app')

@section('title', 'Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯')

@push('styles')
    <style>
        /* ØªÙ… SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .stu-dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframe

... [CONTENT TRUNCATED] ...

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 127: index1.blade.php
ğŸ“ PATH: resources/views/dashboard/student/index1.blade.php
ğŸ“ SIZE: 23,700 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:46:21
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯')

@push('styles')
    <style>
        :root {
            --p: #4361ee;
            --p2: #3a0ca3;
            --acc: #f72585;
            --ok: #4cc9f0;
            --warn: #f8961e;
            --dark: #0f172a;
            --muted: #64748b;
            --bg: #f8fafc;
            --card: #ffffff;
            --radius: 18px;
            --shadow: 0 10px 30px rgba(0, 0, 0, .06);
            --shadow-hover: 0 18px 40px rgba(0, 0, 0, .10);
            --grad: linear-gradient(135deg, var(--p), var(--p2));
            --grad2: linear-gradient(135deg, #7209b7, #f72585);
            --grad3: linear-gradient(135deg, #4cc9f0, #4895ef);
            --grad4: linear-gradient(135deg, #f8961e, #f9c74f);
        }

        .stu-dashboard {
            background: var(--bg);
            background-image: radial-gradient(#4361ee12 2px, transparent 2px);
            background-size: 40px 40px;
            border-radius: 14px;
            padding: 8px;
            animation: fadeIn .5s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(6px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        /* top header actions row (keep your three buttons) */
        .top-actions .btn {
            border-radius: 12px;
            font-weight: 800;
            padding: .6rem .9rem;
        }

        /* Welcome banner */
        .welcome {
            background: var(--card);
            border-radius: 22px;
            box-shadow: var(--shadow);
            border: 1px solid #eef2f7;
            padding: 22px 22px;
            position: relative;
            overflow: hidden;
        }

        .welcome::after {
            content: "";
            position: absolute;
            inset: auto -30% -60% auto;
            width: 340px;
            height: 340px;
            background: radial-gradient(circle, rgba(67, 97, 238, .12), transparent 65%);
            transform: rotate(12deg);
        }

        .welcome h2 {
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--dark);
        }

        .welcome p {
            color: var(--muted);
            line-height: 1.9;
            font-size: .98rem;
            margin: 0;
        }

        .welcome .rocket {
            width: 72px;
            height: 72px;
            border-radius: 18px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 2rem;
            background: var(--grad);
            box-shadow: 0 8px 20px rgba(67, 97, 238, .25);
            animation: float 2.4s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-8px)
            }
        }

        /* Stat cards */
        .stat-card {
            background: var(--card);
            border-radius: 16px;
            box-shadow: var(--shadow);
            border: 1px solid #eef2f7;
            padding: 16px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: .25s ease;
            min-height: 96px;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .stat-title {
            color: var(--muted);
            font-size: .85rem;
            font-weight: 700;
        }

        .stat-value {
            font-size: 1.6rem;
            font-weight: 900;
            color: var(--dark);
        }

        .stat-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 1.35rem;
        }

        .icon-1 {
            background: var(--grad);
        }

        .icon-2 {
            background: var(--grad3);
        }

        .icon-3 {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .icon-4 {
            background: var(--grad4);
        }

        /* main grid cards */
        .dash-card {
            background: var(--card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: 1px solid #eef2f7;
            padding: 18px;
            transition: .3s ease;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .dash-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-hover);
        }

        .dash-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--grad);
            transform: scaleX(0);
            transform-origin: left;
            transition: .4s ease;
        }

        .dash-card:hover::before {
            transform: scaleX(1);
        }

        .dash-card .card-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .dash-card .card-head h3 {
            font-weight: 900;
            font-size: 1.05rem;
            margin: 0;
            color: var(--dark);
        }

        .dash-card .head-icon {
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 1.4rem;
        }

        /* exam list */
        .exam-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .exam-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 10px;
            border-radius: 10px;
            border-bottom: 1px dashed #eef2f7;
            transition: .2s ease;
        }

        .exam-item:last-child {
            border-bottom: none;
        }

        .exam-item:hover {
            background: rgba(67, 97, 238, .05);
            transform: translateX(4px);
        }

        .exam-name {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 800;
            color: #111827;
            font-size: .95rem;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }

        .dot-ok {
            background: var(--ok);
            box-shadow: 0 0 0 4px rgba(76, 201, 240, .15);
        }

        .dot-warn {
            background: var(--warn);
            box-shadow: 0 0 0 4px rgba(248, 150, 30, .15);
        }

        .dot-acc {
            background: var(--acc);
            box-shadow: 0 0 0 4px rgba(247, 37, 133, .12);
        }

        .exam-meta {
            font-size: .82rem;
            color: var(--muted);
            white-space: nowrap;
        }

        /* skills progress */
        .skill-item {
            margin-bottom: 14px;
        }

        .skill-head {
            display: flex;
            justify-content: space-between;
            font-weight: 800;
            font-size: .9rem;
            color: #111827;
            margin-bottom: 6px;
        }

        .skill-bar {
            height: 9px;
            background: #eef2f7;
            border-radius: 999px;
            overflow: hidden;
        }

        .skill-fill {
            height: 100%;
            border-radius: 999px;
            background: var(--grad);
            width: 0;
            transition: width 1.2s ease;
        }

        /* reports mini stats */
        .mini-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 8px;
        }

        .mini {
            background: #fff;
            border: 1px solid #eef2f7;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            font-weight: 900;
        }

        .mini .val {
            font-size: 1.3rem;
            background: var(--grad);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .mini .lbl {
            font-size: .8rem;
            color: var(--muted);
            font-weight: 700;
        }

        /* advisor */
        .advisor-box {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .advisor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: var(--grad2);
            color: #fff;
            font-size: 1.4rem;
            box-shadow: 0 6px 16px rgba(114, 9, 183, .25);
        }

        .advisor-info h4 {
            margin: 0;
            font-weight: 900;
            font-size: 1rem;
        }

        .advisor-info p {
            margin: 2px 0 0;
            font-size: .86rem;
            color: var(--muted);
            line-height: 1.7;
        }

        .advisor-actions .btn {
            border-radius: 12px;
            font-weight: 900;
            padding: .55rem .8rem;
        }

        .btn-grad {
            background: var(--grad);
            color: #fff;
            border: none;
        }

        .btn-soft {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            font-weight: 800;
        }

        /* quick actions row */
        .quick-row .qa {
            background: #fff;
            border: 1px solid #eef2f7;
            border-radius: 14px;
            padding: 12px 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 900;
            color: #0f172a;
            box-shadow: var(--shadow);
            transition: .2s ease;
            text-decoration: none;
        }

        .quick-row .qa:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .qa i {
            font-size: 1.1rem;
            color: #334155;
        }

        @media (max-width: 992px) {
            .mini-stats {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid stu-dashboard">

        {{-- ========== TOP ACTIONS (same routes) ========== --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2 top-actions">
            <div>
                <h1 class="h5 fw-bold mb-1">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h1>
                <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ØŒ Ù¾ÛŒØ´Ø±ÙØª Ùˆ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ø¯Ø± ÛŒÚ© Ù†Ú¯Ø§Ù‡.</div>
            </div>

            <div class="d-flex gap-2 flex-wrap">
                <a href="{{ route('student.exams.public') }}" class="btn btn-primary">
                    <i class="fa-solid fa-globe ms-1"></i> Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
                </a>
                <a href="{{ route('student.exams.classroom') }}" class="btn btn-outline-primary">
                    <i class="fa-solid fa-people-group ms-1"></i> Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ÛŒ
                </a>
                <a href="{{ route('student.reports.index') }}" class="btn btn-outline-secondary">
                    <i class="fa-solid fa-chart-simple ms-1"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ùˆ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§
                </a>
            </div>
        </div>

        {{-- ========== WELCOME ========== --}}
        <div class="welcome mb-3 d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div>
                <h2 class="mb-2">Ø³Ù„Ø§Ù… {{ auth()->user()->name ?? 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²' }}! Ø¢Ù…Ø§Ø¯Ù‡ Ù¾ÛŒØ´Ø±ÙØª Ù‡Ø³ØªÛŒØŸ ğŸš€</h2>
                <p>
                    Ø§Ù…Ø±ÙˆØ² Ø¨Ø§ ÛŒÙ‡ Ø¢Ø²Ù…ÙˆÙ† Ú©ÙˆØªØ§Ù‡ Ø´Ø±ÙˆØ¹ Ú©Ù†Ø› Ù‡Ù…ÛŒÙ† Ù‚Ø¯Ù…â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†ÛŒÚ©ØŒ
                    ØªÙˆ Ø±Ùˆ Ø¨Ù‡ Ù‡Ø¯Ùâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ù…ÛŒâ€ŒØ±Ø³ÙˆÙ†Ù‡.
                </p>
            </div>
            <div class="rocket"><i class="fa-solid fa-rocket"></i></div>
        </div>

        {{-- ========== STATS ROW ========== --}}
        <div class="row g-3 mb-3">
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³</div>
                        <div class="stat-value">{{ $stats['available_exams'] ?? 'â€”' }}</div>
                    </div>
                    <div class="stat-icon icon-1"><i class="fa-solid fa-file-circle-check"></i></div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¬Ø§Ù…â€ŒØ´Ø¯Ù‡</div>
                        <div class="stat-value">{{ $stats['taken_exams'] ?? 'â€”' }}</div>
                    </div>
                    <div class="stat-icon icon-3"><i class="fa-solid fa-square-check"></i></div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ù‡</div>
                        <div class="stat-value">{{ $stats['avg_score'] ?? 'â€”' }}</div>
                    </div>
                    <div class="stat-icon icon-2"><i class="fa-solid fa-gauge-high"></i></div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">Ø³Ø·Ø­ ÙØ¹Ù„ÛŒ</div>
                        <div class="stat-value">{{ $stats['current_level'] ?? 'â€”' }}</div>
                    </div>
                    <div class="stat-icon icon-4"><i class="fa-solid fa-layer-group"></i></div>
                </div>
            </div>
        </div>

        {{-- ========== MAIN GRID (4 cards like sample) ========== --}}
        <div class="row g-3">

            {{-- Advisor --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø´Ù…Ø§</h3>
                        <div class="head-icon" style="background:var(--grad4)"><i class="fa-solid fa-user-graduate"></i>
                        </div>
                    </div>

                    <div class="advisor-box mb-3">
                        <div class="advisor-avatar"><i class="fa-solid fa-user-tie"></i></div>
                        <div class="advisor-info">
                            <h4>{{ $advisor['name'] ?? 'Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø´Ù…Ø§' }}</h4>
                            <p>{{ $advisor['title'] ?? 'Ù…Ø´Ø§ÙˆØ± ØªØ­ØµÛŒÙ„ÛŒ' }}</p>
                            <p class="small">Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ: {{ $advisor['hours'] ?? 'Û¸ ØµØ¨Ø­ ØªØ§ Û¸ Ø´Ø¨' }}</p>
                        </div>
                    </div>

                    <div class="advisor-actions d-flex gap-2">
                        <a href="{{ $advisorChatUrl ?? route('student.support.index') }}" class="btn btn-grad flex-fill">
                            Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… <i class="fa-solid fa-comment-dots ms-1"></i>
                        </a>
                        <button class="btn btn-soft flex-fill" type="button" disabled>
                            ØªÙ…Ø§Ø³ ØªØµÙˆÛŒØ±ÛŒ <i class="fa-solid fa-video ms-1"></i>
                        </button>
                    </div>
                </div>
            </div>

            {{-- Skills --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ÛŒ</h3>
                        <div class="head-icon" style="background:var(--grad)"><i class="fa-solid fa-brain"></i></div>
                    </div>

                    @php
                        $skills = $skills ?? [
                            ['name' => 'Ø±ÛŒØ§Ø¶ÛŒ Ùˆ Ø­Ø³Ø§Ø¨Ø§Ù†', 'percent' => 85],
                            ['name' => 'ÙÛŒØ²ÛŒÚ©', 'percent' => 78],
                            ['name' => 'Ø´ÛŒÙ…ÛŒ', 'percent' => 70],
                            ['name' => 'Ø²ÛŒØ³Øªâ€ŒØ´Ù†Ø§Ø³ÛŒ', 'percent' => 92],
                        ];
                    @endphp

                    @foreach ($skills as $sk)
                        <div class="skill-item">
                            <div class="skill-head">
                                <span>{{ $sk['name'] }}</span>
                                <span class="text-primary">{{ $sk['percent'] }}%</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-fill" style="width: {{ $sk['percent'] }}%"></div>
                            </div>
                        </div>
                    @endforeach
                </div>
            </div>

            {{-- Reports --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>Ø¢Ø®Ø±ÛŒÙ† Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</h3>
                        <div class="head-icon" style="background:var(--grad3)"><i class="fa-solid fa-chart-bar"></i></div>
                    </div>

                    <div class="text-muted small mb-2">
                        Ø®Ù„Ø§ØµÙ‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ø®ÛŒØ± Ø´Ù…Ø§:
                    </div>

                    <div class="mini-stats">
                        <div class="mini">
                            <div class="val">{{ $stats['avg_score'] ?? 'â€”' }}%</div>
                            <div class="lbl">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</div>
                        </div>
                        <div class="mini">
                            <div class="val">{{ $stats['taken_exams'] ?? 'â€”' }}</div>
                            <div class="lbl">Ø¢Ø²Ù…ÙˆÙ† Ø§Ù†Ø¬Ø§Ù…â€ŒØ´Ø¯Ù‡</div>
                        </div>
                        <div class="mini">
                            <div class="val">{{ $stats['study_hours'] ?? 'â€”' }}</div>
                            <div class="lbl">Ø³Ø§Ø¹Øª Ù…Ø·Ø§Ù„Ø¹Ù‡</div>
                        </div>
                        <div class="mini">
                            <div class="val">{{ $stats['badges'] ?? 'â€”' }}</div>
                            <div class="lbl">Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§</div>
                        </div>
                    </div>

                    <a href="{{ route('student.reports.index') }}"
                        class="btn btn-outline-primary w-100 mt-3 fw-bold rounded-3">
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ <i class="fa-solid fa-arrow-left ms-1"></i>
                    </a>
                </div>
            </div>

            {{-- Exams status --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>ÙˆØ¶Ø¹ÛŒØª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</h3>
                        <div class="head-icon" style="background:var(--grad2)"><i class="fa-solid fa-clipboard-list"></i>
                        </div>
                    </div>

                    @php
                        $activeExams = $activeExams ?? [];
                    @endphp

                    @if (count($activeExams))
                        <ul class="exam-list">
                            @foreach ($activeExams as $ex)
                                @php
                                    $st = $ex['status'] ?? 'available';
                                    $dotClass =
                                        $st === 'in_progress' ? 'dot-warn' : ($st === 'pending' ? 'dot-acc' : 'dot-ok');
                                    $dateText = $ex['date_text'] ?? 'Ø¨Ù‡â€ŒØ²ÙˆØ¯ÛŒ';
                                @endphp
                                <li class="exam-item">
                                    <div class="exam-name">
                                        <span class="dot {{ $dotClass }}"></span>
                                        <span>{{ $ex['title'] ?? 'Ø¢Ø²Ù…ÙˆÙ†' }}</span>
                                    </div>
                                    <div class="exam-meta">{{ $dateText }}</div>
                                </li>
                            @endforeach
                        </ul>
                    @else
                        <div class="text-center text-muted small py-4">
                            ÙØ¹Ù„Ø§Ù‹ Ø¢Ø²Ù…ÙˆÙ† ÙØ¹Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù†ÛŒØ³Øª.
                        </div>
                    @endif

                    <a href="{{ route('student.exams.public') }}" class="btn btn-primary w-100 mt-2 fw-bold rounded-3">
                        Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ <i class="fa-solid fa-play ms-1"></i>
                    </a>
                </div>
            </div>
        </div>

        {{-- ========== QUICK ACTIONS (same routes) ========== --}}
        <div class="dash-card mt-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="fw-bold">Ù…ÛŒØ§Ù†Ø¨Ø±Ù‡Ø§ÛŒ Ø³Ø±ÛŒØ¹</div>
                <div class="text-muted small">Ø³Ø±ÛŒØ¹â€ŒØªØ±ÛŒÙ† Ù…Ø³ÛŒØ± Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯Ù†</div>
            </div>

            <div class="row g-2 quick-row">
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.exams.public') }}">
                        <i class="fa-solid fa-globe"></i> Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.exams.classroom') }}">
                        <i class="fa-solid fa-people-group"></i> Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ÛŒ
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.reports.index') }}">
                        <i class="fa-solid fa-chart-line"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.profile') }}">
                        <i class="fa-solid fa-user-gear"></i> Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.support.index') }}">
                        <i class="fa-solid fa-headset"></i> Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
                    </a>
                </div>
            </div>
        </div>

    </div>
@endsection

@push('scripts')
    <script>
        // animate skill bars on load
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.skill-fill').forEach((el, i) => {
                const w = el.style.width;
                el.style.width = '0%';
                setTimeout(() => el.style.width = w, 200 + i * 120);
            });
        });
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 128: learning-path.blade.php
ğŸ“ PATH: resources/views/dashboard/student/learning-path.blade.php
ğŸ“ SIZE: 45,898 bytes
ğŸ•’ MODIFIED: 2025-12-04 18:35:59
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡ Ùˆ ØªÙ… Ø±Ù†Ú¯ Ø¬Ø¯ÛŒØ¯ */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
            --radius-sm: 8px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .lp-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-15px) rotate(5deg);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Ù‡Ø¯Ø± Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ */
        .lp-hero {
            background: var(--gradient-1);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 25px 20px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            margin-bottom: 25px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            animation: slideInRight 0.5s ease-out;
        }

        .lp-hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
            border-radius: 0 20px 0 0;
        }

        .lp-hero::after {
            content: 'ğŸš€';
            position: absolute;
            bottom: -20px;
            left: -20px;
            font-size: 120px;
            opacity: 0.1;
            transform: rotate(-15deg);
            animation: float 6s ease-in-out infinite;
        }

        .lp-hero h4 {
            font-weight: 800;
            margin: 0 0 10px 0;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 1;
        }

        .lp-hero .sub {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø±Ù… */
        .card-soft {
            border-radius: var(--radius-xl);
            background: var(--light);
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: var(--shadow-md);
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-bottom: 20px;
            animation: fadeIn 0.6s ease-out;
        }

        .card-soft:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        /* Ø­Ù„Ù‚Ù‡ Ù¾ÛŒØ´Ø±ÙØª */
        .ring {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            margin: 0 auto 20px;
            background: conic-gradient(var(--primary) calc(var(--p)*1%), var(--light-gray) 0);
            position: relative;
            box-shadow: var(--shadow-md);
            animation: pulse 3s infinite;
        }

        .ring::before {
            content: "";
            position: absolute;
            inset: 15px;
            background: var(--light);
            border-radius: 50%;
            box-shadow: inset 0 0 0 3px var(--light-gray);
        }

        .ring .inner {
            position: relative;
            text-align: center;
            z-index: 2;
        }

        .ring .big {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--dark);
            line-height: 1;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .ring .small {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--gray);
            margin-top: 8px;
        }

        /* Ú†ÛŒÙ¾â€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø±ÛŒ */
        .chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            border: 2px solid transparent;
            background: var(--light);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .chip:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .chip.primary {
            background: var(--primary-light);
            color: var(--primary);
            border-color: rgba(123, 104, 238, 0.2);
        }

        .chip.secondary {
            background: var(--secondary-light);
            color: var(--secondary);
            border-color: rgba(255, 107, 157, 0.2);
        }

        .chip.accent {
            background: var(--accent-light);
            color: var(--accent);
            border-color: rgba(0, 212, 170, 0.2);
        }

        .chip.dark {
            background: var(--dark);
            color: var(--light);
            border-color: rgba(45, 48, 71, 0.3);
        }

        .chip.gold {
            background: linear-gradient(135deg, #FFD166, #FFB347);
            color: #5C4033;
            border-color: rgba(255, 209, 102, 0.3);
        }

        /* Ù…ÛŒÙ„â€ŒØ§Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ */
        .milestone {
            display: flex;
            align-items: center;
            gap: 15px;
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: 2px solid #eef2ff;
            background: var(--light);
            transition: all 0.3s ease;
            margin-bottom: 12px;
            animation: slideInRight 0.6s ease-out;
            animation-fill-mode: both;
        }

        .milestone:nth-child(1) {
            animation-delay: 0.1s;
        }

        .milestone:nth-child(2) {
            animation-delay: 0.2s;
        }

        .milestone:nth-child(3) {
            animation-delay: 0.3s;
        }

        .milestone:nth-child(4) {
            animation-delay: 0.4s;
        }

        .milestone:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .milestone .icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: grid;
            place-items: center;
            font-size: 1.8rem;
            font-weight: 900;
            flex-shrink: 0;
            background: var(--primary-light);
            color: var(--primary);
            border: 3px solid rgba(123, 104, 238, 0.2);
            transition: all 0.3s;
        }

        .milestone.done .icon {
            background: var(--accent-light);
            color: var(--accent);
            border-color: rgba(0, 212, 170, 0.3);
            animation: bounce 2s infinite;
        }

        .milestone.locked .icon {
            background: var(--light-gray);
            color: var(--gray);
            border-color: #e2e8f0;
        }

        .milestone .title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--dark);
        }

        .milestone .sub {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 600;
            margin-top: 4px;
        }

        .milestone .badge {
            font-size: 0.8rem;
            font-weight: 800;
            border-radius: 50px;
            padding: 6px 12px;
            white-space: nowrap;
        }

        /* Ù„ÛŒØ³Øª ØªÙ…Ø±Ú©Ø² */
        .focus-item {
            border: 2px dashed var(--primary-light);
            border-radius: var(--radius-lg);
            padding: 12px 15px;
            background: var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: var(--dark);
            transition: all 0.3s;
            margin-bottom: 10px;
        }

        .focus-item:hover {
            border-color: var(--primary);
            background: var(--primary-light);
            transform: translateX(-5px);
        }

        .focus-item i {
            font-size: 1.2rem;
            color: var(--primary);
        }

        /* Ú©Ø§Ø±Øª Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¹Ø¯ÛŒ */
        .next-box {
            border-radius: var(--radius-xl);
            padding: 20px;
            border: 2px dashed var(--primary);
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), rgba(255, 107, 157, 0.05));
            position: relative;
            overflow: hidden;
            animation: pulse 2s infinite;
        }

        .next-box::before {
            content: 'âš¡';
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 40px;
            opacity: 0.1;
            animation: float 4s ease-in-out infinite;
        }

        .next-btn {
            border-radius: var(--radius-lg);
            font-weight: 800;
            padding: 15px 20px;
            background: var(--gradient-1);
            border: none;
            color: #fff;
            box-shadow: 0 12px 28px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 34px rgba(123, 104, 238, 0.4);
        }

        .next-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .next-btn:hover::before {
            right: 100%;
        }

        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ */
        .suggest-card {
            border-radius: var(--radius-xl);
            background: var(--light);
            border: 2px solid rgba(0, 0, 0, 0.05);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            isolation: isolate;
            height: 100%;
            padding: 20px;
            animation: fadeIn 0.7s ease-out;
            animation-fill-mode: both;
        }

        .suggest-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .suggest-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .suggest-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .suggest-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-1);
            opacity: 0.9;
        }

        .suggest-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .suggest-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            display: grid;
            place-items: center;
            font-size: 1.8rem;
            font-weight: 900;
            flex-shrink: 0;
            background: var(--primary-light);
            color: var(--primary);
            border: 3px solid rgba(123, 104, 238, 0.2);
            box-shadow: inset 0 0 0 3px rgba(255, 255, 255, 0.8);
            transition: all 0.3s;
        }

        .suggest-card:hover .suggest-icon {
            transform: scale(1.1) rotate(5deg);
            background: var(--gradient-1);
            color: white;
        }

        .suggest-card.amber .suggest-icon {
            background: rgba(255, 209, 102, 0.2);
            color: #D4A017;
            border-color: rgba(255, 209, 102, 0.3);
        }

        .suggest-card.green .suggest-icon {
            background: var(--accent-light);
            color: var(--accent);
            border-color: rgba(0, 212, 170, 0.3);
        }

        .suggest-title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .suggest-desc {
            font-size: 0.9rem;
            color: var(--gray);
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .recommended-badge {
            position: absolute;
            top: 15px;
            right: -45px;
            transform: rotate(35deg);
            background: var(--gradient-1);
            color: #fff;
            font-weight: 800;
            font-size: 0.8rem;
            padding: 5px 40px;
            box-shadow: 0 8px 16px rgba(123, 104, 238, 0.35);
            z-index: 2;
        }

        .mini-progress {
            height: 10px;
            border-radius: 50px;
            background: var(--light-gray);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
            margin: 15px 0;
        }

        .mini-progress>div {
            height: 100%;
            width: var(--w, 0%);
            background: var(--gradient-1);
            transition: width 0.6s ease;
            border-radius: 50px;
        }

        /* Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹ ÙÙˆØ±ÛŒ */
        .btn-start-now {
            border-radius: var(--radius-lg);
            font-weight: 800;
            padding: 15px;
            border: none;
            color: #fff;
            position: relative;
            background: var(--gradient-1);
            box-shadow: 0 12px 28px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .btn-start-now:hover {
            transform: translateY(-3px);
            box-shadow: 0 18px 36px rgba(123, 104, 238, 0.4);
        }

        .btn-start-now::after {
            content: "";
            position: absolute;
            top: -40%;
            right: -60%;
            width: 55%;
            height: 160%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.7), transparent);
            transform: rotate(18deg);
            animation: btnShine 2.6s infinite ease-in-out;
        }

        @keyframes btnShine {
            0% {
                right: -60%;
                opacity: 0
            }

            30% {
                opacity: .9
            }

            60% {
                right: 120%;
                opacity: 0
            }

            100% {
                right: 120%;
                opacity: 0
            }
        }

        .pulse-soft {
            animation: pulseSoft 1.9s infinite ease-in-out;
        }

        @keyframes pulseSoft {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ú©Ù…Ù‡ */
        .btn-start-now.clicked .burst::before {
            animation: burst1 .6s ease-out forwards;
        }

        .btn-start-now.clicked .burst::after {
            animation: burst2 .7s ease-out forwards;
        }

        @keyframes burst1 {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1
            }

            70% {
                transform: translate(-180%, -140%) scale(1.4);
                opacity: .8
            }

            100% {
                transform: translate(-220%, -180%) scale(0);
                opacity: 0
            }
        }

        @keyframes burst2 {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1
            }

            70% {
                transform: translate(140%, -160%) scale(1.6);
                opacity: .8
            }

            100% {
                transform: translate(180%, -220%) scale(0);
                opacity: 0
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ */
        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
        }

        /* Ù‡Ø§ÛŒÙ„Ø§ÛŒØª Ù…ØªÙ† */
        .highlight {
            position: relative;
            display: inline-block;
        }

        .highlight::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, rgba(123, 104, 238, 0.2), rgba(255, 107, 157, 0.2));
            z-index: -1;
            border-radius: 4px;
        }

        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .lp-page {
                padding: 15px 10px 90px;
            }

            .lp-hero {
                padding: 20px 15px;
            }

            .lp-hero h4 {
                font-size: 1.3rem;
            }

            .ring {
                width: 150px;
                height: 150px;
            }

            .ring .big {
                font-size: 2rem;
            }

            .milestone {
                padding: 15px;
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }

            .milestone .icon {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .suggest-card {
                padding: 15px;
            }

            .btn-start-now,
            .next-btn {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }

        /* Ø§Ø³Ú©Ø±ÙˆÙ„ Ù†Ø±Ù… */
        html {
            scroll-behavior: smooth;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .btn-start-now,
        .next-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }
    </style>
@endpush

@section('content')
    @php
        $overallPercent = (int) ($overallPercent ?? 0);
        $currentLevel = $currentLevel ?? 1;
        $levelProgress = $levelProgress ?? $overallPercent;
        $focusTopics = $focusTopics ?? ['Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨', 'Ø­Ù„ Ù…Ø³Ø¦Ù„Ù‡', 'Ø³Ø±Ø¹Øª Ù¾Ø§Ø³Ø®â€ŒÚ¯ÙˆÛŒÛŒ', 'Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ù…Ø§Ù†'];

        $recommendedLevel =
            $recommendedLevel ??
            ($overallPercent >= 85 ? 'olympiad' : ($overallPercent >= 60 ? 'konkur' : 'taghviyati'));

        if ($overallPercent >= 85) {
            $headline = 'ØªÙˆ Ø¢Ù…Ø§Ø¯Ù‡â€ŒÛŒ Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ØªØ±ÛŒ Ù‡Ø³ØªÛŒ! ğŸ†';
            $subline = 'Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù‡ Ø¨Ø¹Ø¯ØŒ Ú†Ø§Ù„Ø´â€ŒÙ‡Ø§ Ø¬Ø°Ø§Ø¨â€ŒØªØ± Ù…ÛŒâ€ŒØ´Ù†. Ø¨Ø±ÛŒÙ… Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡â€ŒÛŒ Ø³Ø®Øªâ€ŒØªØ±.';
            $nextText = 'Ø¢Ø²Ù…ÙˆÙ† Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯ÛŒ / Ø³Ø·Ø­ Ø³Ø®Øª';
            $nextIcon = 'fas fa-trophy';
            $nextColor = 'gold';
        } elseif ($overallPercent >= 60) {
            $headline = 'Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ Ø¯Ø± Ù…Ø³ÛŒØ± Ø±Ø´Ø¯ Ù‡Ø³ØªÛŒ! âš¡';
            $subline = 'ÙÙ‚Ø· Ú†Ù†Ø¯ ØªÙ…Ø±ÛŒÙ† Ø¯ÛŒÚ¯Ù‡ ØªØ§ Ø±Ú©ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯ ÙØ§ØµÙ„Ù‡ Ø¯Ø§Ø±ÛŒ.';
            $nextText = 'Ø¢Ø²Ù…ÙˆÙ† Ù…Ø´Ø§Ø¨Ù‡ Ø¨Ø±Ø§ÛŒ Ø±Ú©ÙˆØ±Ø¯';
            $nextIcon = 'fas fa-bullseye';
            $nextColor = 'accent';
        } else {
            $headline = 'Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¨ÛŒ Ø¨ÙˆØ¯Ù‡ØŒ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡! ğŸš€';
            $subline = 'Ø¨Ø§ Ú†Ù†Ø¯ Ø¢Ø²Ù…ÙˆÙ† Ú©ÙˆØªØ§Ù‡ ØªÙ‚ÙˆÛŒØªÛŒØŒ Ø¬Ù‡Ø´ Ø³Ø±ÛŒØ¹ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒ.';
            $nextText = 'Ø¢Ø²Ù…ÙˆÙ† ØªÙ‚ÙˆÛŒØªÛŒ Ú©ÙˆØªØ§Ù‡';
            $nextIcon = 'fas fa-bolt';
            $nextColor = 'primary';
        }

        $milestones = [
            ['title' => 'Ø´Ø±ÙˆØ¹ Ù…Ø³ÛŒØ±', 'sub' => 'Ø§ÙˆÙ„ÛŒÙ† Ù‚Ø¯Ù… Ù‡Ù…ÛŒØ´Ù‡ Ù…Ù‡Ù…Ù‡', 'min' => 0, 'icon' => 'fas fa-flag'],
            ['title' => 'Ø«Ø¨Ø§Øª ØªÙ…Ø±ÛŒÙ†', 'sub' => 'Û³ Ø¢Ø²Ù…ÙˆÙ† Ù¾Ø´Øªâ€ŒØ³Ø±Ù‡Ù…', 'min' => 35, 'icon' => 'fas fa-calendar-check'],
            ['title' => 'Ø±Ú©ÙˆØ±Ø¯ Ø´Ø®ØµÛŒ', 'sub' => 'Ø¨Ù‡Ø¨ÙˆØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û±Û°Ùª', 'min' => 60, 'icon' => 'fas fa-chart-line'],
            ['title' => 'Ø³Ø·Ø­ Ù‚Ù‡Ø±Ù…Ø§Ù†ÛŒ', 'sub' => 'Ø¢Ù…Ø§Ø¯Ù‡â€ŒÛŒ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø³Ø®Øª', 'min' => 85, 'icon' => 'fas fa-crown'],
        ];

        $levelText = fn($lv) => match ($lv) {
            'taghviyati' => 'ØªÙ‚ÙˆÛŒØªÛŒ',
            'konkur' => 'Ú©Ù†Ú©ÙˆØ±ÛŒ',
            'olympiad' => 'Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯ÛŒ',
            default => $lv ?? 'Ù†Ø§Ù…Ø´Ø®Øµ',
        };

        $diffText = fn($df) => match ($df) {
            'easy' => 'Ø¢Ø³Ø§Ù†',
            'hard' => 'Ø³Ø®Øª',
            'medium' => 'Ù…ØªÙˆØ³Ø·',
            default => $df ?? 'Ù…ØªÙˆØ³Ø·',
        };

        $suggestedExams = isset($suggestedExams) ? collect($suggestedExams) : collect();

        // Ø±ÙˆØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†
        $examsIndexRoute = route('student.exams.index');
        $profileRoute = \Route::has('student.profile') ? route('student.profile') : '#';
    @endphp

    <div class="lp-page">
        {{-- ================= HERO ================= --}}
        <div class="lp-hero">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
                <div>
                    <h4>
                        <i class="fas fa-map-marked-alt"></i>
                        Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø´Ø®ØµÛŒ
                    </h4>
                    <div class="sub">
                        Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù‚Ø´Ù‡â€ŒÛŒ Ù¾ÛŒØ´Ø±ÙØª ØªÙˆØ¦Ù‡Ø› Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ† ÛŒÙ‡ Ù‚Ø¯Ù…Ù‡.
                        Ù…Ø³ÛŒØ±Øª Ø±Ùˆ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡ ØªØ§ Ù…Ø±Ø­Ù„Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ø¨Ø´Ù† âœ¨
                    </div>
                </div>

                <a href="{{ $examsIndexRoute }}" class="btn"
                    style="background: white; color: var(--primary); font-weight: 700; border-radius: 12px; padding: 10px 20px;">
                    <i class="fas fa-arrow-left"></i> Ù‡Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>
            </div>

            <div class="d-flex flex-wrap gap-2 mt-3">
                <span class="chip dark"><i class="fas fa-shield-alt"></i> Ù…Ø³ÛŒØ± Ø§Ù…Ù† Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</span>
                <span class="chip primary"><i class="fas fa-chart-line"></i> Ù¾ÛŒØ´Ø±ÙØª Ù‚Ø§Ø¨Ù„ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</span>
                <span class="chip accent"><i class="fas fa-trophy"></i> Ù¾Ø§Ø¯Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø±Ø´Ø¯</span>
                <span class="chip secondary"><i class="fas fa-bolt"></i> Ú†Ø§Ù„Ø´ Ø¨Ø±Ø§ÛŒ Ù‡ÛŒØ¬Ø§Ù†</span>
            </div>
        </div>

        {{-- ================= SUMMARY ================= --}}
        <div class="row g-3 mb-4">
            <div class="col-12 col-lg-4">
                <div class="card-soft text-center h-100">
                    <div class="ring" style="--p: {{ $overallPercent }};">
                        <div class="inner">
                            <div class="big">{{ round($overallPercent) }}%</div>
                            <div class="small">Ù¾ÛŒØ´Ø±ÙØª Ú©Ù„ÛŒ</div>
                        </div>
                    </div>

                    <div class="fw-bold fs-5 mt-2 mb-3">{{ $headline }}</div>
                    <div class="text-muted mb-3" style="line-height: 1.8; font-size: 0.9rem;">
                        {{ $subline }}
                    </div>

                    <div class="mt-3">
                        <span class="chip primary">
                            <i class="fas fa-user-graduate"></i>
                            Ø³Ø·Ø­ ÙØ¹Ù„ÛŒ: {{ $currentLevel }}
                        </span>
                        <span class="chip {{ $nextColor }} ms-2">
                            <i class="fas fa-arrow-up"></i>
                            {{ $levelText($recommendedLevel) }}
                        </span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-8">
                <div class="card-soft h-100">
                    <div class="fw-bold mb-3 d-flex align-items-center gap-2" style="font-size: 1.1rem;">
                        <i class="fas fa-bullseye text-primary"></i>
                        ØªÙ…Ø±Ú©Ø² Ù‡Ù…ÛŒÙ† Ù‡ÙØªÙ‡
                    </div>

                    <div class="row g-2">
                        @foreach ($focusTopics as $t)
                            <div class="col-12 col-md-6">
                                <div class="focus-item">
                                    <i class="fas fa-dot-circle text-primary"></i>
                                    {{ $t }}
                                </div>
                            </div>
                        @endforeach
                    </div>

                    <div class="mt-4 next-box">
                        <div class="fw-bold d-flex align-items-center gap-2 mb-2" style="font-size: 1.1rem;">
                            <i class="{{ $nextIcon }} text-primary"></i>
                            Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ
                        </div>
                        <div class="text-muted mb-3" style="line-height: 1.7; font-size: 0.9rem;">
                            {{ $nextText }} â€” Ú†ÙˆÙ† Ø§Ù„Ø§Ù† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¨Ù‡ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡â€ŒÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒÙ‡.
                        </div>
                        <a href="{{ $examsIndexRoute }}" class="next-btn">
                            Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
                            <i class="fas fa-play ms-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {{-- ================= MILESTONES ================= --}}
        <div class="card-soft mb-4">
            <div class="fw-bold mb-3 d-flex align-items-center gap-2" style="font-size: 1.1rem;">
                <i class="fas fa-mountain text-primary"></i>
                Ù…Ø±Ø­Ù„Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø³ÛŒØ±
            </div>
            <div class="text-muted mb-4" style="line-height: 1.7; font-size: 0.9rem;">
                Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ù†Ù‚Ø§Ø·ÛŒ Ù‡Ø³ØªÙ† Ú©Ù‡ ÙˆÙ‚ØªÛŒ Ø¨Ù‡Ø´ÙˆÙ† Ø¨Ø±Ø³ÛŒØŒ Ø­Ø³ Â«Ø§Ø±ØªÙ‚Ø§Ø¡Â» Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø³Ø·Ø­ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§Ø² Ù…ÛŒØ´Ù‡.
            </div>

            <div>
                @foreach ($milestones as $m)
                    @php
                        $done = $overallPercent >= $m['min'];
                        $locked = !$done && $m['min'] > $overallPercent;
                    @endphp

                    <div class="milestone {{ $done ? 'done' : ($locked ? 'locked' : '') }}">
                        <div class="icon">
                            <i class="{{ $m['icon'] }}"></i>
                        </div>

                        <div class="flex-grow-1">
                            <div class="title">{{ $m['title'] }}</div>
                            <div class="sub">{{ $m['sub'] }}</div>
                        </div>

                        @if ($done)
                            <span class="badge" style="background: var(--accent); color: white; font-weight: 700;">Ø¨Ø§Ø²
                                Ø´Ø¯</span>
                        @else
                            <span class="badge"
                                style="background: var(--light-gray); color: var(--dark); font-weight: 700;">Ù†ÛŒØ§Ø² Ø¨Ù‡
                                {{ $m['min'] }}Ùª</span>
                        @endif
                    </div>
                @endforeach
            </div>
        </div>

        {{-- ================= SUGGESTED EXAMS (SAFE) ================= --}}
        @if ($suggestedExams->count())
            @php
                $labels = [
                    0 => [
                        'title' => 'Ú†Ø§Ù„Ø´ Ø³Ø®Øªâ€ŒØªØ± ğŸ”¥',
                        'class' => 'amber',
                        'icon' => 'fas fa-fire',
                        'recommended' => true,
                    ],
                    1 => [
                        'title' => 'Ù…Ø´Ø§Ø¨Ù‡ Ø¨Ø±Ø§ÛŒ Ø±Ú©ÙˆØ±Ø¯ ğŸ¯',
                        'class' => 'blue',
                        'icon' => 'fas fa-bullseye',
                        'recommended' => false,
                    ],
                    2 => [
                        'title' => 'Ú©ÙˆØªØ§Ù‡ Ùˆ ØªÙ‚ÙˆÛŒØªÛŒ âš¡',
                        'class' => 'green',
                        'icon' => 'fas fa-bolt',
                        'recommended' => false,
                    ],
                ];
            @endphp

            <div class="card-soft mb-4">
                <div class="fw-bold mb-3 d-flex align-items-center gap-2" style="font-size: 1.1rem;">
                    <i class="fas fa-magic text-primary"></i>
                    Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆ
                </div>

                <div class="text-muted mb-4" style="line-height: 1.7; font-size: 0.9rem;">
                    Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ØªÛŒØ¬Ù‡â€ŒÙ‡Ø§Øª Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ ØªØ§ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø±Ø´Ø¯ Ú©Ù†ÛŒ.
                </div>

                <div class="row g-3">
                    @foreach ($suggestedExams as $i => $ex)
                        @php
                            $meta = $labels[$i] ?? [
                                'title' => 'Ø¢Ø²Ù…ÙˆÙ† Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ',
                                'class' => 'primary',
                                'icon' => 'fas fa-play',
                                'recommended' => false,
                            ];
                            $qCount = $ex->questions_count ?? (isset($ex->questions) ? $ex->questions->count() : 0);
                            $level = $levelText($ex->level ?? null);
                            $difficulty = $diffText($ex->difficulty ?? null);
                            $fakeProgress = min(100, max(5, $overallPercent + $i * 12));
                            $examShowRoute = route('student.exams.show', $ex->id);
                            $examTakeRoute = \Route::has('student.exams.take')
                                ? route('student.exams.take', $ex->id)
                                : $examsIndexRoute;
                        @endphp

                        <div class="col-12 col-md-6 col-lg-4">
                            <div class="suggest-card {{ $meta['class'] }} h-100">
                                @if ($meta['recommended'])
                                    <div class="recommended-badge">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ÙˆÛŒÚ˜Ù‡ â­</div>
                                @endif

                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <span class="chip {{ $meta['class'] }}">
                                        <i class="{{ $meta['icon'] }}"></i>
                                        {{ $meta['title'] }}
                                    </span>
                                    <span class="chip dark">{{ $level }}</span>
                                </div>

                                <div class="d-flex align-items-start gap-3">
                                    <div class="suggest-icon">
                                        <i class="{{ $meta['icon'] }}"></i>
                                    </div>

                                    <div class="flex-grow-1">
                                        <div class="suggest-title">{{ $ex->title ?? 'Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†' }}</div>
                                        <div class="suggest-desc">
                                            {{ \Illuminate\Support\Str::limit($ex->description ?? 'Ø¨Ø¯ÙˆÙ† ØªÙˆØ¶ÛŒØ­', 80) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-1">
                                        <span class="small fw-bold" style="color: var(--dark);">Ù¾ÛŒØ´Ø±ÙØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</span>
                                        <span class="small fw-bold"
                                            style="color: var(--primary);">{{ $fakeProgress }}%</span>
                                    </div>
                                    <div class="mini-progress" style="--w: {{ $fakeProgress }}%;">
                                        <div></div>
                                    </div>
                                </div>

                                <div class="d-flex flex-wrap gap-2 mt-3">
                                    <span class="chip primary">
                                        <i class="fas fa-question-circle"></i>
                                        {{ $qCount }} Ø³ÙˆØ§Ù„
                                    </span>
                                    <span class="chip">
                                        <i class="fas fa-clock"></i>
                                        {{ $ex->duration ?? 0 }} Ø¯Ù‚ÛŒÙ‚Ù‡
                                    </span>
                                    <span class="chip secondary">
                                        <i class="fas fa-gauge-high"></i>
                                        {{ $difficulty }}
                                    </span>
                                    @if (isset($ex->subject))
                                        <span class="chip accent">
                                            <i class="fas fa-book"></i>
                                            {{ $ex->subject->title ?? ($ex->subject->name ?? 'Ø¯Ø±Ø³') }}
                                        </span>
                                    @endif
                                </div>

                                <div class="mt-4 d-grid gap-2">
                                    <a href="{{ $examShowRoute }}" class="btn-outline-custom text-center">
                                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª
                                        <i class="fas fa-eye ms-1"></i>
                                    </a>
                                    <a href="{{ $examTakeRoute }}" class="btn-start-now pulse-soft">
                                        Ø´Ø±ÙˆØ¹ ÙÙˆØ±ÛŒ
                                        <i class="fas fa-play ms-1"></i>
                                        <span class="burst"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    @endforeach
                </div>
            </div>
        @else
            <div class="card-soft mb-4 text-center" style="padding: 40px 20px;">
                <div class="mb-3" style="font-size: 3rem; color: var(--gray);">ğŸ“š</div>
                <div class="fw-bold mb-2" style="color: var(--dark);">ÙØ¹Ù„Ø§Ù‹ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù†Ø¯Ø§Ø±ÛŒÙ…</div>
                <div class="text-muted">ÛŒÚ©Ù… Ø¯ÛŒÚ¯Ù‡ ØªÙ…Ø±ÛŒÙ† Ú©Ù† ØªØ§ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ù‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø¨Ø§Ø² Ø¨Ø´Ù† ğŸ˜‰</div>
                <a href="{{ $examsIndexRoute }}" class="btn-primary-custom mt-3">
                    Ø¨Ø±Ùˆ Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                    <i class="fas fa-arrow-left ms-1"></i>
                </a>
            </div>
        @endif

        {{-- ================= FINAL MOTIVATION ================= --}}
        <div class="card-soft text-center">
            <div class="mb-3" style="font-size: 3rem;">ğŸ’ª</div>
            <div class="fw-bold fs-4 mb-2">ÙÙ‚Ø· Ø¨Ø§ Â«Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø¯Ù†Â» Ù‚ÙˆÛŒ Ù…ÛŒâ€ŒØ´ÛŒ</div>
            <div class="text-muted mb-4" style="line-height: 1.8; max-width: 500px; margin: 0 auto;">
                Ù…ØºØ²Øª Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ†ØŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ùˆ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ù…ÛŒâ€ŒØ´Ù‡.
                Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† Ø¯ÛŒÚ¯Ù‡ Ø¨Ø¯Ù‡ ØªØ§ Ù…ÙˆØ¬ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø´Ù‡.
            </div>

            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{{ $examsIndexRoute }}" class="btn-primary-custom">
                    Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ Ø¨Ø¯Ù‡
                    <i class="fas fa-play ms-1"></i>
                </a>
                <a href="{{ $profileRoute }}" class="btn-outline-custom">
                    Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†
                    <i class="fas fa-user ms-1"></i>
                </a>
            </div>
        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ
                const startButtons = document.querySelectorAll('.btn-start-now');

                startButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ©
                        this.classList.add('clicked');
                        setTimeout(() => {
                            this.classList.remove('clicked');
                        }, 700);

                        // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Ø§Ú¯Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´ÙˆØ¯)
                        if (navigator.vibrate) {
                            navigator.vibrate(50);
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú†ÛŒÙ¾
                const chips = document.querySelectorAll('.chip');
                chips.forEach(chip => {
                    chip.addEventListener('click', function() {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // Ù…ÛŒÙ„â€ŒØ§Ø³ØªÙˆÙ†â€ŒÙ‡Ø§
                const milestones = document.querySelectorAll('.milestone');
                milestones.forEach(stone => {
                    stone.addEventListener('click', function() {
                        const title = this.querySelector('.title').textContent;
                        const sub = this.querySelector('.sub').textContent;

                        // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ©
                        this.style.transform = 'scale(0.98)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 200);

                        // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ø³Ø§Ø¯Ù‡
                        if (!this.classList.contains('locked')) {
                            showQuickModal('Ù…Ø±Ø­Ù„Ù‡', `${title}\n\n${sub}`, 'primary');
                        } else {
                            showQuickModal('Ù‚ÙÙ„ Ø´Ø¯Ù‡',
                                `Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ù‡Ù†ÙˆØ² Ø¨Ø§Ø² Ù†Ø´Ø¯Ù‡\n\nØ¨Ø±Ø§ÛŒ Ø¨Ø§Ø² Ø´Ø¯Ù† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒØ´Ø±ÙØª Ø¨ÛŒØ´ØªØ± Ø¯Ø§Ø±ÛŒ`,
                                'secondary');
                        }
                    });
                });

                // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ø³Ø±ÛŒØ¹
                function showQuickModal(title, message, type = 'primary') {
                    const modal = document.createElement('div');
                    modal.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            max-width: 320px;
            width: 85%;
            animation: scaleIn 0.3s ease forwards;
            border: 3px solid ${type === 'primary' ? '#7B68EE' : type === 'secondary' ? '#FF6B9D' : '#00D4AA'};
        `;

                    modal.innerHTML = `
            <div style="font-size: 2.5rem; margin-bottom: 15px; color: ${type === 'primary' ? '#7B68EE' : type === 'secondary' ? '#FF6B9D' : '#00D4AA'}">
                ${type === 'primary' ? 'ğŸ¯' : type === 'secondary' ? 'ğŸ”’' : 'âœ¨'}
            </div>
            <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">${title}</h3>
            <p style="color: var(--gray); margin-bottom: 25px; font-size: 0.95rem; line-height: 1.5; white-space: pre-line;">${message}</p>
            <button onclick="this.parentElement.remove(); if (this.parentElement.nextElementSibling) this.parentElement.nextElementSibling.remove();" style="width:100%; padding: 12px; border: none; background: ${type === 'primary' ? '#7B68EE' : type === 'secondary' ? '#FF6B9D' : '#00D4AA'}; color: white; border-radius: 12px; font-weight: 600; font-size: 0.9rem;">Ø¨Ø§Ø´Ù‡!</button>
        `;

                    document.body.appendChild(modal);

                    const overlay = document.createElement('div');
                    overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        `;
                    document.body.appendChild(overlay);

                    setTimeout(() => {
                        if (document.body.contains(modal)) {
                            modal.remove();
                            overlay.remove();
                        }
                    }, 4000);
                }

                // Ø§ÙØ²ÙˆØ¯Ù† Ø§Ø³ØªØ§ÛŒÙ„ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
                const style = document.createElement('style');
                style.textContent = `
        @keyframes scaleIn {
            from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
    `;
                document.head.appendChild(style);
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 129: my-teachers.blade.php
ğŸ“ PATH: resources/views/dashboard/student/my-teachers.blade.php
ğŸ“ SIZE: 30,798 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:03:43
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù…Ø¹Ù„Ù…Ø§Ù† Ù…Ù† - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ… Ø±Ù†Ú¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .teachers-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* Ù‡Ø¯Ø± ØµÙØ­Ù‡ */
        .page-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
        }

        .page-title-section h1 {
            font-weight: 800;
            font-size: 1.8rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .page-title-section h1 i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 600px;
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ø¯Ø± */
        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* Ú©Ø§Ø±Øª Ù…Ø¹Ù„Ù… */
        .teacher-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }

        .teacher-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .teacher-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .teacher-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .teacher-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .teacher-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .teacher-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        .teacher-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .teacher-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
            z-index: 1;
        }

        /* Ù‡Ø¯Ø± Ú©Ø§Ø±Øª */
        .teacher-header {
            background: var(--gradient-1);
            color: white;
            padding: 25px 20px;
            position: relative;
            overflow: hidden;
        }

        .teacher-header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent 70%);
            border-radius: 50%;
        }

        .teacher-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 2rem;
            font-weight: 800;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            border: 4px solid white;
            position: relative;
            z-index: 2;
            transition: all 0.3s;
            animation: float 3s ease-in-out infinite;
        }

        .teacher-card:hover .teacher-avatar {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        }

        .teacher-info {
            position: relative;
            z-index: 2;
            margin-top: 15px;
        }

        .teacher-name {
            font-weight: 800;
            font-size: 1.3rem;
            margin: 0 0 5px 0;
            color: white;
        }

        .teacher-meta {
            font-size: 0.9rem;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.95);
        }

        .teacher-meta i {
            font-size: 0.9rem;
        }

        /* Ø¨Ø¯Ù†Ù‡ Ú©Ø§Ø±Øª */
        .teacher-body {
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .teacher-specialty {
            background: var(--accent-light);
            color: var(--accent);
            padding: 10px 15px;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            border: 2px solid rgba(0, 212, 170, 0.2);
            animation: pulse 2s infinite;
        }

        .teacher-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .teacher-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            background: var(--light-gray);
            color: var(--dark);
            border: 2px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .teacher-chip:hover {
            transform: translateY(-3px);
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        .teacher-chip i {
            font-size: 0.9rem;
        }

        .teacher-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .action-btn:active {
            transform: scale(0.97);
        }

        .btn-profile {
            background: var(--light-gray);
            color: var(--dark);
            border-color: rgba(0, 0, 0, 0.05);
        }

        .btn-profile:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.15);
        }

        .btn-message {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
        }

        .btn-message:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-message::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-message:hover::before {
            right: 100%;
        }

        /* ÙˆØ¶Ø¹ÛŒØª Ø®Ø§Ù„ÛŒ */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 30px;
            text-align: center;
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
            border: 2px dashed var(--primary-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .empty-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: var(--primary);
            font-size: 3rem;
            animation: float 4s ease-in-out infinite;
        }

        .empty-title {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .empty-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .teachers-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-title-section h1 {
                font-size: 1.5rem;
            }

            .page-title-section h1 i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .teacher-avatar {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .teacher-name {
                font-size: 1.1rem;
            }

            .teacher-body {
                padding: 15px;
            }

            .teacher-chips {
                justify-content: center;
            }

            .action-btn {
                padding: 12px;
                font-size: 0.9rem;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            .empty-actions {
                flex-direction: column;
            }

            .btn-primary-custom,
            .btn-outline-custom {
                width: 100%;
                justify-content: center;
            }
        }

        @media (min-width: 992px) {
            .teacher-actions {
                flex-direction: row;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .action-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        // âœ… Ù…Ù‚Ø§ÙˆÙ… Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± null
        $teachers = $teachers ?? collect();

        // Route-safe Ù‡Ø§
        $hasTeacherShow = \Route::has('student.teachers.show');
        $hasMessageCreate = \Route::has('student.messages.create');

        $classroomsRoute = route('student.classrooms.index');
    @endphp

    <div class="teachers-page">
        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="page-title-section">
                <h1>
                    <i class="fas fa-chalkboard-teacher"></i>
                    Ù…Ø¹Ù„Ù…Ø§Ù† Ù…Ù†
                </h1>
                <p class="page-subtitle">
                    Ù„ÛŒØ³Øª Ù…Ø¹Ù„Ù…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ ÙØ¹Ø§Ù„ Ù‡Ø³ØªÙ†Ø¯.
                    Ù‡Ø± Ù…Ø¹Ù„Ù… ÛŒÚ© Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ Ø¯Ø± Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø´Ù…Ø§Ø³Øª ğŸ‘¨â€ğŸ«
                </p>
            </div>

            <a href="{{ $classroomsRoute }}" class="btn-outline-custom">
                <i class="fas fa-users"></i>
                Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†
            </a>
        </div>

        {{-- ================= TEACHERS LIST ================= --}}
        @if ($teachers->count())
            <div class="row g-4">
                @foreach ($teachers as $t)
                    @php
                        $name = $t->display_name ?? ($t->name ?? 'Ù…Ø¹Ù„Ù…');
                        $initials = mb_substr(trim($name), 0, 1) ?: 'Ù…';
                        $email = $t->email ?? 'Ø§ÛŒÙ…ÛŒÙ„ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡';
                        $phone = $t->phone ?? null;
                        $specialty = $t->specialty ?? null;
                        $role = $t->role ?? 'teacher';
                        $roleText = match ($role) {
                            'teacher' => 'Ù…Ø¹Ù„Ù…',
                            'assistant' => 'Ø¯Ø³ØªÛŒØ§Ø±',
                            'expert' => 'Ù…ØªØ®ØµØµ',
                            default => $role,
                        };

                        // ØªØ§Ø±ÛŒØ® Ø¨Ù‡ Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ø´Ú©Ù„
                        $createdAt = $t->created_at ?? null;
                        $formattedDate = $createdAt ? $createdAt->format('Y/m/d') : null;
                    @endphp

                    <div class="col-12 col-md-6 col-lg-4">
                        <div class="teacher-card">
                            <div class="teacher-header">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="teacher-avatar">
                                        {{ $initials }}
                                    </div>

                                    <div class="teacher-info">
                                        <h3 class="teacher-name">{{ $name }}</h3>
                                        <div class="teacher-meta">
                                            <i class="fas fa-envelope"></i>
                                            {{ $email }}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="teacher-body">
                                @if (!empty($specialty))
                                    <div class="teacher-specialty">
                                        <i class="fas fa-graduation-cap"></i>
                                        {{ $specialty }}
                                    </div>
                                @endif

                                <div class="teacher-chips">
                                    <span class="teacher-chip">
                                        <i class="fas fa-user-tag"></i>
                                        Ù†Ù‚Ø´: {{ $roleText }}
                                    </span>

                                    @if (!empty($phone))
                                        <span class="teacher-chip">
                                            <i class="fas fa-phone"></i>
                                            {{ $phone }}
                                        </span>
                                    @endif

                                    @if (!empty($formattedDate))
                                        <span class="teacher-chip">
                                            <i class="fas fa-calendar-alt"></i>
                                            Ø§Ø² {{ $formattedDate }}
                                        </span>
                                    @endif
                                </div>

                                <div class="teacher-actions">
                                    {{-- Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø¹Ù„Ù… --}}
                                    @if ($hasTeacherShow)
                                        <a href="{{ route('student.teachers.show', $t->id) }}"
                                            class="action-btn btn-profile">
                                            <i class="fas fa-user-circle"></i>
                                            Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                                        </a>
                                    @else
                                        <button class="action-btn btn-profile"
                                            onclick="showComingSoonModal('Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø¹Ù„Ù…')">
                                            <i class="fas fa-user-circle"></i>
                                            Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                                        </button>
                                    @endif

                                    {{-- Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ù…Ø¹Ù„Ù… --}}
                                    @if ($hasMessageCreate)
                                        <a href="{{ route('student.messages.create', ['teacher' => $t->id]) }}"
                                            class="action-btn btn-message">
                                            <i class="fas fa-comment-dots"></i>
                                            Ù¾ÛŒØ§Ù…
                                        </a>
                                    @else
                                        <button class="action-btn btn-message"
                                            onclick="showComingSoonModal('Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ù…Ø¹Ù„Ù…')">
                                            <i class="fas fa-comment-dots"></i>
                                            Ù¾ÛŒØ§Ù…
                                        </button>
                                    @endif
                                </div>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        @else
            {{-- ================= EMPTY STATE ================= --}}
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-user-graduate"></i>
                </div>

                <h2 class="empty-title">Ù‡Ù†ÙˆØ² Ù…Ø¹Ù„Ù…ÛŒ Ù†Ø¯Ø§Ø±ÛŒ!</h2>

                <p class="empty-text">
                    Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ù…Ø¹Ù„Ù…Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ú©Ù„Ø§Ø³ÛŒ Ø¹Ø¶Ùˆ Ø¨Ø´ÛŒ.
                    Ù…Ø¹Ù„Ù…Ø§Ù† Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒØ§Ù† Ø§ØµÙ„ÛŒ ØªÙˆ Ø¯Ø± Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ùˆ
                    Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ù…Ú© Ø¨Ù‡ ØªÙˆ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ§Ù†Ø¯.
                </p>

                <div class="empty-actions">
                    <a href="{{ $classroomsRoute }}" class="btn-primary-custom">
                        <i class="fas fa-search"></i>
                        Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ø§Ø³
                    </a>

                    @if (\Route::has('student.exams.index'))
                        <a href="{{ route('student.exams.index') }}" class="btn-outline-custom">
                            <i class="fas fa-play-circle"></i>
                            Ø¢Ø²Ù…ÙˆÙ† Ù…Ø³ØªÙ‚Ù„
                        </a>
                    @endif
                </div>
            </div>
        @endif

    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØªØ¹Ø§Ù…Ù„Ø§Øª
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ù‡Ø§ÙˆØ±
                const teacherCards = document.querySelectorAll('.teacher-card');
                teacherCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ù„ Ú©Ø§Ø±Øª
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ù…
                const messageButtons = document.querySelectorAll('.btn-message:not([disabled])');
                messageButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        if (this.tagName === 'BUTTON') return;

                        // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ©
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate([30, 50, 30]);
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                const profileButtons = document.querySelectorAll('.btn-profile:not([disabled])');
                profileButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        if (this.tagName === 'BUTTON') return;

                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // Ú†ÛŒÙ¾â€ŒÙ‡Ø§
                const chips = document.querySelectorAll('.teacher-chip');
                chips.forEach(chip => {
                    chip.addEventListener('click', function() {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡ Ø¬Ø³ØªØ¬ÙˆÛŒ Ú©Ù„Ø§Ø³
                const searchClassBtn = document.querySelector('a[href*="classrooms"]');
                if (searchClassBtn) {
                    searchClassBtn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                }
            });

            // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ "Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ"
            function showComingSoonModal(feature) {
                const modal = document.createElement('div');
                modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

                modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
            <i class="fas fa-tools"></i>
        </div>
        <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">${feature}</h3>
        <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
            Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØª Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Øª Ùˆ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù‚Ø±Ø§Ø± Ø®ÙˆØ§Ù‡Ø¯ Ú¯Ø±ÙØª.
        </p>
        <button onclick="this.parentElement.remove(); if (this.parentElement.nextElementSibling) this.parentElement.nextElementSibling.remove();"
                style="width:100%; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
            Ø¨Ø§Ø´Ù‡ØŒ Ù…Ù†ØªØ¸Ø± Ù…ÛŒâ€ŒÙ…ÙˆÙ†Ù…!
        </button>
    `;

                document.body.appendChild(modal);

                const overlay = document.createElement('div');
                overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
                document.body.appendChild(overlay);

                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }

                // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        modal.remove();
                        overlay.remove();
                    }
                }, 5000);
            }

            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
            const style = document.createElement('style');
            style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
            document.head.appendChild(style);
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 130: profile.blade.php
ğŸ“ PATH: resources/views/dashboard/student/profile.blade.php
ğŸ“ SIZE: 42,303 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:26:17
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù† - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ… Ø±Ù†Ú¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-gold: linear-gradient(135deg, #FFD166, #FFB347);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .profile-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* Ø¢Ù„Ø±Øªâ€ŒÙ‡Ø§ */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 25px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-warning-custom {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.1), rgba(255, 209, 102, 0.05));
            border-right: 4px solid var(--gold);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ */
        .profile-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 2px solid transparent;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        /* Ú©Ø§Ø±Øª Ø¢ÙˆØ§ØªØ§Ø± */
        .avatar-section {
            text-align: center;
            position: relative;
            padding-bottom: 25px;
            margin-bottom: 25px;
            border-bottom: 2px dashed var(--primary-light);
        }

        .avatar-wrap {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            margin: 0 auto 20px;
            background: var(--light-gray);
            position: relative;
            animation: float 4s ease-in-out infinite;
        }

        .avatar-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .avatar-wrap:hover img {
            transform: scale(1.1);
        }

        .avatar-level {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-gold);
            color: #5C4033;
            padding: 6px 15px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(255, 209, 102, 0.3);
            border: 3px solid white;
            animation: pulse 2s infinite;
        }

        .user-name {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            margin: 0 0 5px 0;
        }

        .user-role {
            color: var(--primary);
            font-weight: 700;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: var(--primary-light);
            border-radius: 50px;
        }

        /* ÙØ±Ù… Ø¢Ù¾Ù„ÙˆØ¯ Ø¢ÙˆØ§ØªØ§Ø± */
        .upload-form {
            position: relative;
            margin-top: 20px;
        }

        .upload-btn {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding: 14px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
        }

        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .upload-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .upload-btn:hover::before {
            right: 100%;
        }

        .file-input {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            right: 0;
            opacity: 0;
            cursor: pointer;
        }

        /* Ø¨Ø®Ø´ Ú¯ÛŒÙ…ÙÛŒÚ©ÛŒØ´Ù† */
        .gm-stat {
            background: var(--light-gray);
            border: 2px solid rgba(0, 0, 0, 0.05);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .gm-stat:hover {
            transform: translateY(-3px);
            background: var(--primary-light);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        .gm-stat-title {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .gm-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--dark);
            line-height: 1;
        }

        .gm-stat-subtitle {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 5px;
        }

        /* Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª */
        .progress-container {
            margin: 25px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--dark);
        }

        .progress-bar-custom {
            height: 16px;
            background: var(--light-gray);
            border-radius: 50px;
            overflow: hidden;
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-1);
            border-radius: 50px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* Ø¨Ø®Ø´ streak */
        .streak-section {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.1), rgba(255, 107, 157, 0.1));
            border-radius: var(--radius-lg);
            padding: 20px;
            margin: 25px 0;
            border: 2px dashed var(--gold);
            text-align: center;
        }

        .streak-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            animation: pulse 1.5s infinite;
        }

        .streak-count {
            font-size: 2.5rem;
            font-weight: 800;
            color: #D4A017;
            line-height: 1;
        }

        .streak-label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Ø¨Ø®Ø´ ØªØºÛŒÛŒØ± Ù†Ù‚Ø´ */
        .role-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 2px dashed var(--primary-light);
        }

        .role-form {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 20px;
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .role-select {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--radius-md);
            border: 2px solid var(--primary);
            background: white;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 16px center;
            padding-left: 45px;
            cursor: pointer;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* ÙØ±Ù… ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª */
        .edit-form-section {
            padding: 25px;
            background: var(--light);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
        }

        .form-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-light);
        }

        .form-header i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            animation: bounce 2s infinite;
        }

        .form-header h3 {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--dark);
            margin: 0;
        }

        .form-label {
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 8px;
            display: block;
        }

        .form-control-custom {
            width: 100%;
            padding: 14px 16px;
            border-radius: var(--radius-md);
            border: 2px solid rgba(0, 0, 0, 0.1);
            background: var(--light-gray);
            font-size: 1rem;
            color: var(--dark);
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .form-control-custom:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.1);
        }

        .form-control-custom:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .textarea-custom {
            min-height: 120px;
            resize: vertical;
        }

        .btn-save {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 16px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .btn-save:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
        }

        .btn-save::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-save:hover::before {
            right: 100%;
        }

        .btn-save:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        @media (max-width: 768px) {
            .profile-page {
                padding: 15px 10px 90px;
            }

            .profile-card {
                padding: 20px;
            }

            .avatar-wrap {
                width: 120px;
                height: 120px;
            }

            .gm-stat-value {
                font-size: 1.8rem;
            }

            .streak-count {
                font-size: 2rem;
            }

            .edit-form-section {
                padding: 20px;
            }

            .form-header {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .form-header i {
                width: 45px;
                height: 45px;
            }

            .form-header h3 {
                font-size: 1.2rem;
            }

            .form-control-custom {
                padding: 12px;
                font-size: 0.95rem;
            }

            .btn-save,
            .upload-btn,
            .btn-outline-custom {
                padding: 14px;
                font-size: 0.95rem;
            }
        }

        .btn-save,
        .upload-btn,
        .btn-outline-custom {
            min-height: 44px;
        }

        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        // ----------------------------
        // Safe defaults
        // ----------------------------
        $user = $user ?? auth()->user();

        if (!$user) {
            $user = (object) [
                'name' => 'Ú©Ø§Ø±Ø¨Ø±',
                'email' => null,
                'phone' => null,
                'national_code' => null,
                'bio' => null,
                'role' => 'student',
                'avatar' => null,
            ];
        }

        $role = $user->role ?? 'student';

        $avatarPath = !empty($user->avatar) ? 'storage/' . $user->avatar : null;
        $avatarUrl =
            $avatarPath && file_exists(public_path($avatarPath))
                ? asset($avatarPath)
                : asset('assets/images/samples/user.png');

        $gm =
            $gamification ??
            (object) [
                'total_xp' => 0,
                'level' => 1,
                'current_streak' => 0,
                'longest_streak' => 0,
            ];

        $gm->total_xp = (int) ($gm->total_xp ?? 0);
        $gm->level = max(1, (int) ($gm->level ?? 1));
        $gm->current_streak = (int) ($gm->current_streak ?? 0);
        $gm->longest_streak = (int) ($gm->longest_streak ?? 0);

        $xpPerLevel = 200;
        $levelBaseXp = max(0, ($gm->level - 1) * $xpPerLevel);
        $nextLevelXp = $gm->level * $xpPerLevel;

        $progressXp = max(0, $gm->total_xp - $levelBaseXp);
        $needXp = max(1, $nextLevelXp - $levelBaseXp);
        $percent = min(100, round(($progressXp / $needXp) * 100));

        $hasAvatarRoute = \Route::has('student.profile.avatar');
        $hasChangeRoleRoute = \Route::has('profile.change-role');
        $hasUpdateRoute = \Route::has('student.profile.update');
    @endphp

    <div class="profile-page">
        {{-- ================= ALERTS ================= --}}
        @if (session('success'))
            <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--accent);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('success') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if (session('warning'))
            <div class="alert-custom alert-warning-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--gold);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('warning') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if ($errors->any())
            <div class="alert-custom alert-danger-custom">
                <div class="d-flex align-items-center gap-3 mb-2">
                    <div style="font-size: 1.5rem; color: var(--secondary);">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="fw-bold">Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</div>
                </div>
                <ul class="mb-0 ps-3">
                    @foreach ($errors->all() as $e)
                        <li>{{ $e }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-4">
            {{-- ===== Ø³ØªÙˆÙ† Ø³Ù…Øª Ú†Ù¾: Ø¢ÙˆØ§ØªØ§Ø± Ùˆ Ú¯ÛŒÙ…ÙÛŒÚ©ÛŒØ´Ù† ===== --}}
            <div class="col-12 col-lg-4">
                <div class="profile-card">
                    <div class="avatar-section">
                        <div class="avatar-wrap">
                            <img id="avatarPreview" src="{{ $avatarUrl }}" alt="Ø¢ÙˆØ§ØªØ§Ø±">
                            <div class="avatar-level">Ø³Ø·Ø­ {{ $gm->level }}</div>
                        </div>

                        <h2 class="user-name">{{ $user->name ?? 'Ú©Ø§Ø±Ø¨Ø±' }}</h2>
                        <div class="user-role">
                            <i class="fas fa-user-tag"></i>
                            {{ $role === 'student' ? 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²' : 'Ù…Ø¹Ù„Ù…' }}
                        </div>
                    </div>

                    {{-- Ø¢Ù¾Ù„ÙˆØ¯ Ø¢ÙˆØ§ØªØ§Ø± --}}
                    @if ($hasAvatarRoute)
                        <form action="{{ route('student.profile.avatar') }}" method="POST" enctype="multipart/form-data"
                            class="upload-form">
                            @csrf
                            <div class="upload-btn">
                                <i class="fas fa-camera"></i>
                                ØªØºÛŒÛŒØ± Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                                <input type="file" name="avatar" id="avatarInput" class="file-input" accept="image/*">
                            </div>
                        </form>
                    @else
                        <div class="upload-form">
                            <button class="upload-btn" disabled>
                                <i class="fas fa-camera"></i>
                                ØªØºÛŒÛŒØ± Ø¹Ú©Ø³ (Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ)
                            </button>
                        </div>
                    @endif

                    {{-- Ø¢Ù…Ø§Ø± Ú¯ÛŒÙ…ÙÛŒÚ©ÛŒØ´Ù† --}}
                    <div class="mt-4">
                        <div class="gm-stat">
                            <div class="gm-stat-title">
                                <i class="fas fa-trophy" style="color: var(--gold);"></i>
                                Ø§Ù…ØªÛŒØ§Ø² Ú©Ù„ÛŒ (XP)
                            </div>
                            <div class="gm-stat-value">{{ $gm->total_xp }}</div>
                            <div class="gm-stat-subtitle">Ø§Ø² {{ $nextLevelXp }} Ø§Ù…ØªÛŒØ§Ø² ØªØ§ Ø³Ø·Ø­ Ø¨Ø¹Ø¯ÛŒ</div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Ù¾ÛŒØ´Ø±ÙØª Ø³Ø·Ø­ {{ $gm->level }}</span>
                                <span>{{ $percent }}%</span>
                            </div>
                            <div class="progress-bar-custom">
                                <div class="progress-fill" style="width: {{ $percent }}%;"></div>
                            </div>
                            <div class="d-flex justify-content-between text-sm mt-2"
                                style="color: var(--gray); font-size: 0.9rem;">
                                <span>{{ $progressXp }} XP</span>
                                <span>{{ $needXp }} XP</span>
                            </div>
                        </div>

                        {{-- Ø¨Ø®Ø´ Streak --}}
                        <div class="streak-section">
                            <div class="streak-icon">ğŸ”¥</div>
                            <div class="streak-count">{{ $gm->current_streak }}</div>
                            <div class="streak-label">Ø±ÙˆØ² Ù…ØªÙˆØ§Ù„ÛŒ ÙØ¹Ø§Ù„ÛŒØª</div>
                            <div class="mt-2" style="color: var(--gray); font-size: 0.9rem;">
                                Ø¨Ù‡ØªØ±ÛŒÙ† Ø±Ú©ÙˆØ±Ø¯: {{ $gm->longest_streak }} Ø±ÙˆØ²
                            </div>
                        </div>

                        {{-- ØªØºÛŒÛŒØ± Ù†Ù‚Ø´ --}}
                        <div class="role-section">
                            <h4 class="fw-bold mb-3" style="color: var(--dark);">
                                <i class="fas fa-random me-2" style="color: var(--primary);"></i>
                                ØªØºÛŒÛŒØ± Ù†Ù‚Ø´
                            </h4>

                            @if ($hasChangeRoleRoute)
                                <form action="{{ route('profile.change-role') }}" method="POST" class="role-form">
                                    @csrf
                                    <select name="role" class="role-select">
                                        <option value="student" {{ $role === 'student' ? 'selected' : '' }}>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                                        </option>
                                        <option value="teacher" {{ $role === 'teacher' ? 'selected' : '' }}>Ù…Ø¹Ù„Ù…</option>
                                    </select>
                                    <button type="submit" class="btn-outline-custom">
                                        <i class="fas fa-save"></i>
                                        Ø°Ø®ÛŒØ±Ù‡ Ù†Ù‚Ø´ Ø¬Ø¯ÛŒØ¯
                                    </button>
                                </form>
                            @else
                                <div class="role-form">
                                    <select class="role-select" disabled>
                                        <option>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option>
                                        <option>Ù…Ø¹Ù„Ù…</option>
                                    </select>
                                    <button class="btn-outline-custom" disabled>
                                        <i class="fas fa-save"></i>
                                        Ø°Ø®ÛŒØ±Ù‡ Ù†Ù‚Ø´ Ø¬Ø¯ÛŒØ¯ (Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ)
                                    </button>
                                </div>
                            @endif

                            <div class="mt-3" style="color: var(--gray); font-size: 0.9rem; line-height: 1.6;">
                                Ø§Ú¯Ø± Ù†Ù‚Ø´ Ø±Ùˆ Ø¹ÙˆØ¶ Ú©Ù†ÛŒØŒ Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÙØ±Ø´ Ø¨Ù‡ Ù¾Ù†Ù„ Ù‡Ù…ÙˆÙ† Ù†Ù‚Ø´ Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÛŒ.
                                Ø§ÛŒÙ† ØªØºÛŒÛŒØ± ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´â€ŒØ¯Ù‡Ù†Ø¯Ù‡ Ù†ÙˆØ¹ ÙØ¹Ø§Ù„ÛŒØª ØªÙˆ Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- ===== Ø³ØªÙˆÙ† Ø³Ù…Øª Ø±Ø§Ø³Øª: ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ===== --}}
            <div class="col-12 col-lg-8">
                <div class="edit-form-section">
                    <div class="form-header">
                        <i class="fas fa-user-edit"></i>
                        <h3>ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø®ØµÛŒ</h3>
                    </div>

                    @if ($hasUpdateRoute)
                        <form action="{{ route('student.profile.update') }}" method="POST">
                            @csrf
                            @method('PUT')

                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                                    <input type="text" name="name" value="{{ old('name', $user->name ?? '') }}"
                                        class="form-control-custom" required placeholder="Ù†Ø§Ù… Ú©Ø§Ù…Ù„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                                </div>

                                <div class="col-12 col-md-6">
                                    <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                                    <input type="email" name="email" value="{{ old('email', $user->email ?? '') }}"
                                        class="form-control-custom" placeholder="example@domain.com">
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</label>
                                    <input type="text" name="phone" value="{{ old('phone', $user->phone ?? '') }}"
                                        class="form-control-custom" placeholder="Û°Û¹Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹">
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">Ú©Ø¯ Ù…Ù„ÛŒ</label>
                                    <input type="text" name="national_code"
                                        value="{{ old('national_code', $user->national_code ?? '') }}"
                                        class="form-control-custom" placeholder="Ø§Ø®ØªÛŒØ§Ø±ÛŒ">
                                </div>

                                <div class="col-12 mt-3">
                                    <label class="form-label">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†</label>
                                    <textarea name="bio" rows="4" class="form-control-custom textarea-custom"
                                        placeholder="Ú†Ù†Ø¯ Ø®Ø· Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø®ÙˆØ¯ØªØŒ Ø¹Ù„Ø§ÛŒÙ‚ ÛŒØ§ Ø§Ù‡Ø¯Ø§ÙØª Ø¨Ù†ÙˆÛŒØ³...">{{ old('bio', $user->bio ?? '') }}</textarea>
                                </div>

                                <div class="col-12">
                                    <button type="submit" class="btn-save">
                                        <i class="fas fa-check-circle"></i>
                                        Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                                    </button>
                                </div>
                            </div>
                        </form>
                    @else
                        <form>
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <label class="form-label">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                                    <input type="text" value="{{ $user->name ?? '' }}" class="form-control-custom"
                                        disabled>
                                </div>

                                <div class="col-12 col-md-6">
                                    <label class="form-label">Ø§ÛŒÙ…ÛŒÙ„</label>
                                    <input type="email" value="{{ $user->email ?? '' }}" class="form-control-custom"
                                        disabled>
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„</label>
                                    <input type="text" value="{{ $user->phone ?? '' }}" class="form-control-custom"
                                        disabled>
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">Ú©Ø¯ Ù…Ù„ÛŒ</label>
                                    <input type="text" value="{{ $user->national_code ?? '' }}"
                                        class="form-control-custom" disabled>
                                </div>

                                <div class="col-12 mt-3">
                                    <label class="form-label">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†</label>
                                    <textarea rows="4" class="form-control-custom textarea-custom" disabled>{{ $user->bio ?? '' }}</textarea>
                                </div>

                                <div class="col-12">
                                    <button class="btn-save" disabled>
                                        <i class="fas fa-clock"></i>
                                        Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª (Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ)
                                    </button>
                                </div>
                            </div>
                        </form>
                    @endif

                    <div class="mt-4 p-3"
                        style="background: var(--accent-light); border-radius: var(--radius-md); border-right: 4px solid var(--accent);">
                        <div class="d-flex align-items-start gap-3">
                            <i class="fas fa-lightbulb" style="color: var(--accent); font-size: 1.3rem;"></i>
                            <div>
                                <div class="fw-bold mb-1" style="color: var(--dark);">Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</div>
                                <ul class="mb-0" style="color: var(--gray); font-size: 0.9rem; line-height: 1.6;">
                                    <li>Ø§Ø·Ù„Ø§Ø¹Ø§ØªØª Ø±Ùˆ Ø¯Ù‚ÛŒÙ‚ ÙˆØ§Ø±Ø¯ Ú©Ù† ØªØ§ Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø² Ø¨ØªÙˆÙ†ÛŒÙ… Ø¨Ø§Ù‡Ø§Øª Ø¯Ø± ØªÙ…Ø§Ø³ Ø¨Ø§Ø´ÛŒÙ…</li>
                                    <li>Ø¨ÛŒÙˆÚ¯Ø±Ø§ÙÛŒ Ú©ÙˆØªØ§Ù‡ Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¨Ù‡ Ù…Ø¹Ù„Ù…â€ŒÙ‡Ø§ Ú©Ù…Ú© Ú©Ù†Ù‡ Ø¨Ù‡ØªØ± Ø¨Ø§Ù‡Ø§Øª Ø¢Ø´Ù†Ø§ Ø¨Ø´Ù†</li>
                                    <li>ØªØºÛŒÛŒØ±Ø§ØªØª Ø¨Ø¹Ø¯ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù† Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´Ù†</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {

            if (navigator.vibrate) {
                navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                    navigator.msVibrate;
            }

            const avatarInput = document.getElementById('avatarInput');
            const avatarPreview = document.getElementById('avatarPreview');

            if (avatarInput && avatarPreview) {
                avatarInput.addEventListener('change', function(e) {
                    const file = e.target.files?.[0];
                    if (!file) return;

                    if (file.size > 5 * 1024 * 1024) {
                        showErrorModal('Ø­Ø¬Ù… ÙØ§ÛŒÙ„ Ø¨Ø§ÛŒØ¯ Ú©Ù…ØªØ± Ø§Ø² Ûµ Ù…Ú¯Ø§Ø¨Ø§ÛŒØª Ø¨Ø§Ø´Ø¯');
                        this.value = '';
                        return;
                    }

                    const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
                    if (!validTypes.includes(file.type)) {
                        showErrorModal('ÙÙ‚Ø· ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªØµÙˆÛŒØ±ÛŒ (JPG, PNG, GIF, WebP) Ù…Ø¬Ø§Ø² Ù‡Ø³ØªÙ†Ø¯');
                        this.value = '';
                        return;
                    }

                    const url = URL.createObjectURL(file);
                    avatarPreview.src = url;

                    if (navigator.vibrate) navigator.vibrate(50);

                    showSuccessModal('Ø¢ÙˆØ§ØªØ§Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯! Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ú©Ù…Ù‡ Ø¢Ù¾Ù„ÙˆØ¯ Ø±Ùˆ Ø¨Ø²Ù†');

                    setTimeout(() => {
                        const form = avatarInput.closest('form');
                        if (form) form.submit();
                    }, 2000);
                });
            }

            const buttons = document.querySelectorAll(
            '.btn-save, .upload-btn, .btn-outline-custom:not([disabled])');
            buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.disabled) return;

                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);

                    if (navigator.vibrate) navigator.vibrate(30);
                });
            });

            const profileCards = document.querySelectorAll('.profile-card');
            profileCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) navigator.vibrate(20);
                });
            });

            const gmStats = document.querySelectorAll('.gm-stat');
            gmStats.forEach(stat => {
                stat.addEventListener('click', function() {
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    if (navigator.vibrate) navigator.vibrate(20);
                });
            });
        });

        function showErrorModal(message) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--secondary);
    `;

            modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 15px; color: var(--secondary);">
            <i class="fas fa-exclamation-circle"></i>
        </div>
        <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">Ø®Ø·Ø§!</h3>
        <p style="color: var(--gray); margin-bottom: 20px; font-size: 1rem; line-height: 1.5;">${message}</p>
        <button class="close-modal"
                style="width:100%; padding: 12px; border: none; background: var(--secondary); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
            Ù…ØªÙˆØ¬Ù‡ Ø´Ø¯Ù…
        </button>
    `;

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;

            document.body.appendChild(overlay);
            document.body.appendChild(modal);

            modal.querySelector('.close-modal')?.addEventListener('click', () => {
                modal.remove();
                overlay.remove();
            });

            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        }

        function showSuccessModal(message) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--accent);
    `;

            modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 15px; color: var(--accent);">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">Ù…ÙˆÙÙ‚ÛŒØª!</h3>
        <p style="color: var(--gray); margin-bottom: 20px; font-size: 1rem; line-height: 1.5;">${message}</p>
        <button class="close-modal"
                style="width:100%; padding: 12px; border: none; background: var(--accent); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
            Ø¹Ø§Ù„ÛŒÙ‡!
        </button>
    `;

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;

            document.body.appendChild(overlay);
            document.body.appendChild(modal);

            modal.querySelector('.close-modal')?.addEventListener('click', () => {
                modal.remove();
                overlay.remove();
            });

            if (navigator.vibrate) navigator.vibrate([50, 50, 50]);

            setTimeout(() => {
                if (document.body.contains(modal)) {
                    modal.remove();
                    overlay.remove();
                }
            }, 3000);
        }

        const style = document.createElement('style');
        style.textContent = `
@keyframes scaleIn {
    from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
    to   { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}
@keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
}
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 131: index.blade.php
ğŸ“ PATH: resources/views/dashboard/student/reports/index.blade.php
ğŸ“ SIZE: 31,293 bytes
ğŸ•’ MODIFIED: 2025-12-04 18:47:26
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù† - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ… Ø±Ù†Ú¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .reports-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        /* Ù‡Ø¯Ø± ØµÙØ­Ù‡ */
        .page-header {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px;
            box-shadow: var(--shadow-md);
            margin-bottom: 25px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .page-title {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 0;
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ø¯Ø± */
        .header-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .header-buttons {
                margin-top: 0;
            }
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
        }

        /* Ø¢Ù„Ø±Øªâ€ŒÙ‡Ø§ */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        /* Ú©Ø§Ø±Øª Ú¯Ø²Ø§Ø±Ø´ */
        .report-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 22px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }

        .report-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .report-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .report-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .report-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .report-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .report-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        .report-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .report-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .report-title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--dark);
            line-height: 1.4;
            flex: 1;
        }

        .score-badge {
            background: var(--gradient-1);
            color: white;
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.95rem;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(123, 104, 238, 0.3);
            animation: pulse 2s infinite;
        }

        .report-meta {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .meta-item {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 15px;
        }

        .meta-item:first-child {
            margin-left: 0;
        }

        .meta-item i {
            font-size: 0.9rem;
        }

        .report-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .status-completed {
            background: var(--accent-light);
            color: var(--accent);
        }

        .status-pending {
            background: rgba(255, 209, 102, 0.15);
            color: #D4A017;
        }

        .status-review {
            background: var(--secondary-light);
            color: var(--secondary);
        }

        .report-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
        }

        .action-btn:active {
            transform: scale(0.96);
        }

        .btn-result {
            background: var(--light-gray);
            color: var(--dark);
            border-color: rgba(0, 0, 0, 0.05);
        }

        .btn-result:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.15);
        }

        .btn-analysis {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-analysis:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-analysis::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-analysis:hover::before {
            right: 100%;
        }

        /* ÙˆØ¶Ø¹ÛŒØª Ø®Ø§Ù„ÛŒ */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 30px;
            text-align: center;
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
            border: 2px dashed var(--primary-light);
        }

        .empty-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: var(--primary);
            font-size: 3rem;
            animation: bounce 3s infinite;
        }

        .empty-title {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .reports-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                padding: 20px;
            }

            .page-title {
                font-size: 1.3rem;
            }

            .header-buttons {
                flex-direction: column;
                width: 100%;
            }

            .btn-primary-custom,
            .btn-outline-custom {
                width: 100%;
                justify-content: center;
            }

            .report-card {
                padding: 18px;
            }

            .report-header {
                flex-direction: column;
                gap: 10px;
            }

            .score-badge {
                align-self: flex-start;
            }

            .meta-item {
                display: block;
                margin-left: 0;
                margin-bottom: 5px;
            }

            .report-actions {
                flex-direction: column;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .action-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        /**
         * Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø¹Ù…ÙˆÙ„ Ù…Ø§ Ø§ÛŒÙ†Ù‡ Ú©Ù‡ Ú©Ù†ØªØ±Ù„Ø± ÛŒÚ©ÛŒ Ø§Ø² Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ùˆ Ø¨Ø¯Ù‡:
         * - $reports (collection)
         * - ÛŒØ§ $attempts (collection)
         * ÙØ¹Ù„Ø§Ù‹ Ù‡Ø± Ø¯Ùˆ Ø±Ùˆ Ø³Ø§Ù¾ÙˆØ±Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ø¨Ø§ fallback.
         */
        $reports = $reports ?? null;
        $attempts = $attempts ?? null;

        $items = collect();

        if ($reports instanceof \Illuminate\Support\Collection) {
            $items = $reports;
        } elseif ($attempts instanceof \Illuminate\Support\Collection) {
            $items = $attempts;
        }

        // Ø±ÙˆØªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†
        $examsIndexRoute = route('student.exams.index');
        $dashboardRoute = route('student.index');
        $classroomsRoute = route('student.classrooms.index');
        $profileRoute = \Route::has('student.profile') ? route('student.profile') : '#';
    @endphp

    <div class="reports-page">

        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="d-flex flex-wrap justify-content-between align-items-start gap-3">
                <div>
                    <h1 class="page-title">
                        <i class="fas fa-chart-line" style="color: var(--primary);"></i>
                        Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†
                    </h1>
                    <p class="page-subtitle">
                        Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯Øª Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ùˆ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒ.
                        Ù‡Ø± Ú¯Ø²Ø§Ø±Ø´ ÛŒÚ© Ø¯Ø§Ø³ØªØ§Ù† Ø§Ø² Ù¾ÛŒØ´Ø±ÙØª ØªÙˆ Ø±Ùˆ ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ ğŸ“ˆ
                    </p>
                </div>

                <div class="d-flex flex-column flex-md-row gap-2 header-buttons">
                    <a href="{{ $examsIndexRoute }}" class="btn-primary-custom">
                        <i class="fas fa-play-circle"></i>
                        Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯
                    </a>
                    <a href="{{ $dashboardRoute }}" class="btn-outline-custom">
                        <i class="fas fa-home"></i>
                        Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                    </a>
                </div>
            </div>
        </div>

        {{-- ================= ALERTS ================= --}}
        @if (session('success'))
            <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--accent);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('success') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if (session('error'))
            <div class="alert-custom alert-danger-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--secondary);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('error') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        {{-- ================= EMPTY STATE ================= --}}
        @if ($items->isEmpty())
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>

                <h2 class="empty-title">Ù‡Ù†ÙˆØ² Ú¯Ø²Ø§Ø±Ø´ÛŒ Ù†Ø¯Ø§Ø±ÛŒ!</h2>

                <p class="empty-text">
                    Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø¨Ø¹Ø¯ Ø§Ø² Ø´Ø±Ú©Øª Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´Ù†.
                    Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ† ÛŒÚ© Ù‚Ø¯Ù… Ø¨Ù‡ Ø³Ù…Øª Ù¾ÛŒØ´Ø±ÙØª Ùˆ Ù‡Ø± Ú¯Ø²Ø§Ø±Ø´ ÛŒÚ© Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒâ€ŒØ³Øª.
                </p>

                <div class="d-flex flex-column flex-md-row justify-content-center gap-3">
                    <a href="{{ $examsIndexRoute }}" class="btn-primary-custom" style="padding: 15px 30px;">
                        <i class="fas fa-bolt"></i>
                        Ø´Ø±ÙˆØ¹ Ø§ÙˆÙ„ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†
                    </a>
                    <a href="{{ $classroomsRoute }}" class="btn-outline-custom" style="padding: 15px 30px;">
                        <i class="fas fa-users"></i>
                        Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†
                    </a>
                </div>
            </div>
        @else
            {{-- ================= REPORTS LIST ================= --}}
            <div class="row g-3">
                @foreach ($items as $item)
                    @php
                        // Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù…Ú©Ù†:
                        $exam = $item->exam ?? null;
                        $examTitle = $exam->title ?? ($item->exam_title ?? 'Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†');
                        $classTitle = $exam->classroom->title ?? ($exam->classroom->name ?? null);
                        $subjectName = $exam->subject->name ?? ($exam->subject->title ?? null);

                        $score = $item->score ?? ($item->total_score ?? null);
                        $submittedAt = $item->submitted_at ?? ($item->created_at ?? null);
                        $status = $item->status ?? 'completed'; // completed/pending/review

                        $statusClass = match ($status) {
                            'completed' => 'status-completed',
                            'pending' => 'status-pending',
                            'review' => 'status-review',
                            default => 'status-completed',
                        };

                        $statusIcon = match ($status) {
                            'completed' => 'fas fa-check-circle',
                            'pending' => 'fas fa-clock',
                            'review' => 'fas fa-eye',
                            default => 'fas fa-chart-line',
                        };

                        $statusText = match ($status) {
                            'completed' => 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡',
                            'pending' => 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±',
                            'review' => 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ',
                            default => 'ØªÚ©Ù…ÛŒÙ„ Ø´Ø¯Ù‡',
                        };
                    @endphp

                    <div class="col-md-6 col-lg-4">
                        <div class="report-card">
                            <div class="report-header">
                                <h3 class="report-title">{{ $examTitle }}</h3>
                                @if (!is_null($score))
                                    <div class="score-badge">
                                        {{ $score }}
                                    </div>
                                @endif
                            </div>

                            <div class="report-status {{ $statusClass }}">
                                <i class="{{ $statusIcon }}"></i>
                                <span>{{ $statusText }}</span>
                            </div>

                            <div class="report-meta">
                                @if ($classTitle)
                                    <div class="meta-item">
                                        <i class="fas fa-chalkboard-teacher"></i>
                                        Ú©Ù„Ø§Ø³: {{ $classTitle }}
                                    </div>
                                @endif

                                @if ($subjectName)
                                    <div class="meta-item">
                                        <i class="fas fa-book"></i>
                                        Ø¯Ø±Ø³: {{ $subjectName }}
                                    </div>
                                @endif

                                @if ($submittedAt)
                                    <div class="meta-item">
                                        <i class="fas fa-calendar-alt"></i>
                                        ØªØ§Ø±ÛŒØ®: {{ jdate($submittedAt)->format('Y/m/d') }}
                                    </div>
                                @endif
                            </div>

                            <div class="report-actions">
                                @if (Route::has('student.attempts.result') && !empty($item->id))
                                    <a href="{{ route('student.attempts.result', $item) }}" class="action-btn btn-result">
                                        <i class="fas fa-poll"></i>
                                        Ù†ØªÛŒØ¬Ù‡
                                    </a>
                                @else
                                    <button class="action-btn btn-result" disabled>
                                        <i class="fas fa-poll"></i>
                                        Ù†ØªÛŒØ¬Ù‡
                                    </button>
                                @endif

                                @if (Route::has('student.attempts.analysis') && !empty($item->id))
                                    <a href="{{ route('student.attempts.analysis', $item) }}"
                                        class="action-btn btn-analysis">
                                        <i class="fas fa-chart-pie"></i>
                                        ØªØ­Ù„ÛŒÙ„
                                    </a>
                                @else
                                    <button class="action-btn btn-analysis" disabled>
                                        <i class="fas fa-chart-pie"></i>
                                        ØªØ­Ù„ÛŒÙ„
                                    </button>
                                @endif
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>

            {{-- ================= PAGINATION (Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯) ================= --}}
            @if (method_exists($items, 'links'))
                <div class="d-flex justify-content-center mt-4">
                    <div class="pagination-custom">
                        {{ $items->links() }}
                    </div>
                </div>
            @endif
        @endif

    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØªØ¹Ø§Ù…Ù„Ø§Øª
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ù‡Ø§ÙˆØ±
                const reportCards = document.querySelectorAll('.report-card');
                reportCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ù„ Ú©Ø§Ø±Øª
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„
                const analysisButtons = document.querySelectorAll('.btn-analysis:not([disabled])');
                analysisButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ©
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate([30, 50, 30]);
                        }

                        // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
                        showLoadingModal('ØªØ­Ù„ÛŒÙ„ Ø¢Ù…Ø§Ø±ÛŒ', 'Ø¯Ø± Ø­Ø§Ù„ ØªØ­Ù„ÛŒÙ„ Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ†...');
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù†ØªÛŒØ¬Ù‡
                const resultButtons = document.querySelectorAll('.btn-result:not([disabled])');
                resultButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ
                function showLoadingModal(title, message) {
                    const modal = document.createElement('div');
                    modal.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            max-width: 320px;
            width: 85%;
            animation: scaleIn 0.3s ease forwards;
            border: 3px solid var(--primary);
        `;

                    modal.innerHTML = `
            <div style="font-size: 2.5rem; margin-bottom: 15px; color: var(--primary);">
                <i class="fas fa-chart-line fa-spin"></i>
            </div>
            <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">${title}</h3>
            <p style="color: var(--gray); margin-bottom: 20px; font-size: 0.95rem; line-height: 1.5;">${message}</p>
            <div class="progress" style="height: 8px; border-radius: 10px; background: var(--light-gray); overflow: hidden;">
                <div class="progress-bar" style="height:100%; width:0%; background: var(--gradient-1); border-radius:10px; animation: loading 1.5s infinite;"></div>
            </div>
        `;

                    document.body.appendChild(modal);

                    const overlay = document.createElement('div');
                    overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        `;
                    document.body.appendChild(overlay);

                    // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø«Ø§Ù†ÛŒÙ‡ (Ø¯Ø± Ø­Ø§Ù„Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø§ÛŒÙ† Ø§ØªÙØ§Ù‚ Ù†Ù…ÛŒâ€ŒØ§ÙØªÙ‡)
                    setTimeout(() => {
                        if (document.body.contains(modal)) {
                            modal.remove();
                            overlay.remove();
                        }
                    }, 2000);
                }

                // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
                const style = document.createElement('style');
                style.textContent = `
        @keyframes scaleIn {
            from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        @keyframes loading {
            0% { width: 0%; transform: translateX(-100%); }
            50% { width: 100%; transform: translateX(0%); }
            100% { width: 100%; transform: translateX(100%); }
        }

        .fa-spin {
            animation: fa-spin 1s infinite linear;
        }

        @keyframes fa-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    `;
                document.head.appendChild(style);
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 132: index.blade.php
ğŸ“ PATH: resources/views/dashboard/student/support/index.blade.php
ğŸ“ SIZE: 32,170 bytes
ğŸ•’ MODIFIED: 2025-12-04 19:16:23
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ - SmartEdu')

@push('styles')
    <style>
        /* ØªÙ… Ø±Ù†Ú¯ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .support-page {
            animation: fadeIn 0.6s ease both;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* Ù‡Ø¯Ø± ØµÙØ­Ù‡ */
        .page-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
        }

        .page-title-section h1 {
            font-weight: 800;
            font-size: 1.8rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .page-title-section h1 i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 600px;
        }

        /* Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª */
        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* Ú©Ø§Ø±Øª Ø§ØµÙ„ÛŒ */
        .main-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(0, 0, 0, 0.05);
            animation: fadeIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        /* Ø¢Ù„Ø±Øªâ€ŒÙ‡Ø§ */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 25px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        .alert-info-custom {
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.1), rgba(123, 104, 238, 0.05));
            border-right: 4px solid var(--primary);
            color: var(--dark);
            margin-top: 25px;
            animation: pulse 2s infinite;
        }

        /* ØªÙˆØ¶ÛŒØ­Ø§Øª Ø±Ø§Ù‡Ù†Ù…Ø§ */
        .help-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.8;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            border: 2px dashed rgba(123, 104, 238, 0.2);
            position: relative;
            z-index: 2;
        }

        /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ */
        .support-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 2px solid rgba(0, 0, 0, 0.05);
            height: 100%;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
        }

        .support-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .support-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .support-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .support-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .support-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .support-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-light);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 3px solid rgba(123, 104, 238, 0.2);
            transition: all 0.3s;
            animation: float 3s ease-in-out infinite;
        }

        .support-card:hover .support-icon {
            transform: scale(1.1) rotate(10deg);
            background: var(--gradient-1);
            color: white;
        }

        .support-title {
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--dark);
            margin: 0;
        }

        .support-description {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
            min-height: 80px;
        }

        .support-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .action-btn {
            padding: 15px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .action-btn:active {
            transform: scale(0.97);
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        .btn-outline-secondary-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-secondary-custom:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        .btn-outline-success-custom {
            background: transparent;
            color: #16a34a;
            border: 2px solid #16a34a;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-success-custom:hover {
            background: rgba(22, 163, 74, 0.1);
            transform: translateY(-3px);
            color: #16a34a;
            box-shadow: var(--shadow-md);
        }

        /* ÙˆØ¶Ø¹ÛŒØª ØºÛŒØ±ÙØ¹Ø§Ù„ */
        .coming-soon {
            position: relative;
            opacity: 0.8;
        }

        .coming-soon::after {
            content: 'Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ';
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--gradient-1);
            color: white;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 800;
            z-index: 3;
            animation: pulse 1.5s infinite;
        }

        /* Ø¨Ø®Ø´ FAQ */
        .faq-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px dashed var(--primary-light);
        }

        .faq-title {
            font-weight: 800;
            font-size: 1.3rem;
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-item {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .faq-item:hover {
            border-color: var(--primary-light);
            transform: translateX(-5px);
        }

        .faq-question {
            font-weight: 700;
            color: var(--dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        .faq-answer {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-top: 10px;
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
        @media (max-width: 768px) {
            .support-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-title-section h1 {
                font-size: 1.5rem;
            }

            .page-title-section h1 i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .main-card {
                padding: 20px;
            }

            .support-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .support-icon {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }

            .support-description {
                min-height: auto;
            }

            .action-btn {
                padding: 12px;
                font-size: 0.9rem;
            }

            .faq-item {
                padding: 15px;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .action-btn,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        $dashboardRoute = route('student.index');
    @endphp

    <div class="support-page">
        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="page-title-section">
                <h1>
                    <i class="fas fa-headset"></i>
                    Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                </h1>
                <p class="page-subtitle">
                    Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ØŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ ÛŒØ§ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø§Ø´ØªÛŒØŒ Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§ Ù…Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ø´.
                    ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù‡Ù…ÛŒØ´Ù‡ Ú©Ù†Ø§Ø±ØªÙ‡! ğŸ¤
                </p>
            </div>

            <a href="{{ $dashboardRoute }}" class="btn-outline-custom">
                <i class="fas fa-home"></i>
                Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
            </a>
        </div>

        {{-- ================= MAIN CARD ================= --}}
        <div class="main-card">
            {{-- Ø¢Ù„Ø±Øªâ€ŒÙ‡Ø§ --}}
            @if (session('success'))
                <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                    <div style="font-size: 1.5rem; color: var(--accent);">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="flex-grow-1">
                        {{ session('success') }}
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            @endif

            @if (session('error'))
                <div class="alert-custom alert-danger-custom d-flex align-items-center gap-3">
                    <div style="font-size: 1.5rem; color: var(--secondary);">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="flex-grow-1">
                        {{ session('error') }}
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            @endif

            {{-- ØªÙˆØ¶ÛŒØ­Ø§Øª Ø±Ø§Ù‡Ù†Ù…Ø§ --}}
            <div class="help-text">
                <div class="d-flex align-items-start gap-3">
                    <div style="font-size: 1.8rem; color: var(--primary);">ğŸ’¡</div>
                    <div>
                        ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¯Ø± Ø³Ø±ÛŒØ¹â€ŒØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®Ú¯Ùˆ Ø¨Ø§Ø´Ø¯.
                        Ù„Ø·ÙØ§Ù‹ Ù‡Ù†Ú¯Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… ÛŒØ§ ØªÛŒÚ©ØªØŒ Ù…ÙˆØ¶ÙˆØ¹ Ùˆ ØªÙˆØ¶ÛŒØ­ Ù…Ø´Ú©Ù„ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚ Ø¨Ù†ÙˆÛŒØ³ ØªØ§ Ø¨ØªÙˆÙ†ÛŒÙ… Ø¨Ù‡ØªØ± Ú©Ù…Ú©Øª Ú©Ù†ÛŒÙ….
                        Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¸Ø±Ù Û²Û´ Ø³Ø§Ø¹Øª Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯ÛŒÙ…! â°
                    </div>
                </div>
            </div>

            {{-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ --}}
            <div class="row g-4">
                {{-- Ú©Ø§Ø±Øª ØªÛŒÚ©Øª --}}
                <div class="col-12 col-md-6">
                    <div class="support-card coming-soon">
                        <div class="support-header">
                            <div class="support-icon">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div>
                                <h3 class="support-title">Ø§Ø±Ø³Ø§Ù„ ØªÛŒÚ©Øª</h3>
                            </div>
                        </div>

                        <p class="support-description">
                            Ù…Ø´Ú©Ù„Øª Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª ØªÛŒÚ©Øª Ø«Ø¨Øª Ú©Ù† ØªØ§ ØªÛŒÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ø±Ø±Ø³ÛŒØ´ Ú©Ù†Ù‡.
                            Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ ÙˆØ¶Ø¹ÛŒØª ØªÛŒÚ©ØªØª Ø±Ùˆ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒ Ùˆ Ù¾Ø§Ø³Ø® Ø±Ùˆ Ø¯Ø± Ù‡Ù…ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø¨ÛŒÙ†ÛŒ.
                            Ø³ÛŒØ³ØªÙ… ØªÛŒÚ©Øª Ø¨Ù‡ØªØ±ÛŒÙ† Ø±Ø§Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ±Ù‡.
                        </p>

                        <div class="support-actions">
                            <button class="action-btn btn-primary-custom" onclick="showComingSoonModal('Ø³ÛŒØ³ØªÙ… ØªÛŒÚ©Øª')">
                                <i class="fas fa-plus-circle"></i>
                                Ø§ÛŒØ¬Ø§Ø¯ ØªÛŒÚ©Øª Ø¬Ø¯ÛŒØ¯
                            </button>
                        </div>
                    </div>
                </div>

                {{-- Ú©Ø§Ø±Øª ØªÙ…Ø§Ø³ Ù…Ø³ØªÙ‚ÛŒÙ… --}}
                <div class="col-12 col-md-6">
                    <div class="support-card coming-soon">
                        <div class="support-header">
                            <div class="support-icon">
                                <i class="fas fa-phone-alt"></i>
                            </div>
                            <div>
                                <h3 class="support-title">ØªÙ…Ø§Ø³ Ù…Ø³ØªÙ‚ÛŒÙ…</h3>
                            </div>
                        </div>

                        <p class="support-description">
                            Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª ÙÙˆØ±ÛŒ Ùˆ Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø±ÛŒØ¹ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¨Ø§ Ù…Ø§ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±ÛŒ.
                            Ø´Ù…Ø§Ø±Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ ÙˆØ§ØªØ³Ø§Ù¾ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù‡.
                            Ø³Ø§Ø¹Ø§Øª Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ: Ø´Ù†Ø¨Ù‡ ØªØ§ Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡ØŒ Û¹ ØµØ¨Ø­ ØªØ§ Ûµ Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø± ğŸ•”
                        </p>

                        <div class="support-actions">
                            <button class="action-btn btn-outline-secondary-custom"
                                onclick="showComingSoonModal('ØªÙ…Ø§Ø³ ØªÙ„ÙÙ†ÛŒ')">
                                <i class="fas fa-phone"></i>
                                ØªÙ…Ø§Ø³ ØªÙ„ÙÙ†ÛŒ
                            </button>
                            <button class="action-btn btn-outline-success-custom"
                                onclick="showComingSoonModal('ÙˆØ§ØªØ³Ø§Ù¾ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ')">
                                <i class="fab fa-whatsapp"></i>
                                ÙˆØ§ØªØ³Ø§Ù¾ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            {{-- Ø¢Ù„Ø±Øª Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ --}}
            <div class="alert-info-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--primary);">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="flex-grow-1">
                    ÙØ¹Ù„Ø§Ù‹ Ø§ÛŒÙ† ØµÙØ­Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³Øª Ùˆ Ø³ÛŒØ³ØªÙ… Ú©Ø§Ù…Ù„ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…ÛŒâ€ŒØ´Ù‡.
                    Ø¯Ø± Ø§ÛŒÙ† Ù…Ø¯ØªØŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ù¾ÛŒØ§Ù… Ø¨Ù‡ Ù…Ø¹Ù„Ù… Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ù…Ø´Ú©Ù„Ø§ØªØª Ø±Ùˆ Ù…Ø·Ø±Ø­ Ú©Ù†ÛŒ. ğŸš€
                </div>
            </div>

            {{-- ================= FAQ SECTION ================= --}}
            <div class="faq-section">
                <h3 class="faq-title">
                    <i class="fas fa-question-circle" style="color: var(--primary);"></i>
                    Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„
                </h3>

                <div class="faq-list">
                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>Ú†Ù‚Ø¯Ø± Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ù‡ ØªØ§ Ù¾Ø§Ø³Ø® ØªÛŒÚ©Øª Ø±Ùˆ Ø¨Ú¯ÛŒØ±Ù…ØŸ</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¸Ø±Ù Û²Û´ Ø³Ø§Ø¹Øª Ú©Ø§Ø±ÛŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯ÛŒÙ…. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ ÙÙˆØ±ÛŒ Ø¨Ø§Ø´Ù‡ØŒ Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ø³Ø±ÛŒØ¹â€ŒØªØ± Ù¾Ø§Ø³Ø® Ø¨Ø¯ÛŒÙ….
                        </div>
                    </div>

                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª ÙÙ†ÛŒ Ø¢Ø²Ù…ÙˆÙ† Ú†ÛŒÚ©Ø§Ø± Ú©Ù†Ù…ØŸ</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            Ø§ÙˆÙ„ Ù…Ø±ÙˆØ±Ú¯Ø±Øª Ø±Ùˆ Ø±ÙØ±Ø´ Ú©Ù†. Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø´ØªØŒ Ø§Ø² ØªÛŒÚ©Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù† Ùˆ Ø¹Ú©Ø³ Ø§Ø² Ø®Ø·Ø§ Ø¨Ø±Ø§Ù…ÙˆÙ† Ø¨ÙØ±Ø³Øª.
                        </div>
                    </div>

                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù… Ø¨Ù‡ Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø¨Ø´Ù…ØŸ</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            Ú©Ø¯ Ú©Ù„Ø§Ø³ Ø±Ùˆ Ø§Ø² Ù…Ø¹Ù„Ù…Øª Ø¨Ú¯ÛŒØ± Ùˆ Ø¯Ø± ØµÙØ­Ù‡ "Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†" Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡ "Ø¹Ø¶ÙˆÛŒØª Ø¨Ø§ Ú©Ø¯ Ú©Ù„Ø§Ø³" Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†.
                        </div>
                    </div>

                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>Ø§Ú¯Ø± Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ† Ø±Ùˆ Ù†Ø¨ÛŒÙ†Ù… Ú†Ø·ÙˆØ±ØŸ</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            Ù†ØªØ§ÛŒØ¬ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªÙ…Ø§Ù… Ø¢Ø²Ù…ÙˆÙ† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ù†. Ø§Ú¯Ø± Ø¯ÛŒØ¯ÛŒØŒ Ú†Ù†Ø¯ Ø¯Ù‚ÛŒÙ‚Ù‡ ØµØ¨Ø± Ú©Ù† Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡
                            ØµÙØ­Ù‡ Ø±Ùˆ Ø±ÙØ±Ø´ Ú©Ù†.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØªØ¹Ø§Ù…Ù„Ø§Øª
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
                const supportCards = document.querySelectorAll('.support-card');
                supportCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            // Ø§ÙÚ©Øª Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ú©Ù„ Ú©Ø§Ø±Øª
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ action
                const actionButtons = document.querySelectorAll('.action-btn');
                actionButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª
                const backButton = document.querySelector('.btn-outline-custom');
                if (backButton) {
                    backButton.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                }
            });

            // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ "Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ"
            function showComingSoonModal(feature) {
                const modal = document.createElement('div');
                modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

                modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
            <i class="fas fa-tools"></i>
        </div>
        <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">${feature}</h3>
        <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
            Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØª Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡ Ø§Ø³Øª Ùˆ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù‚Ø±Ø§Ø± Ø®ÙˆØ§Ù‡Ø¯ Ú¯Ø±ÙØª.
            Ø¯Ø± Ø§ÛŒÙ† Ù…Ø¯Øª Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø§ Ù…Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ø´ÛŒ.
        </p>
        <div style="display: flex; gap: 10px;">
            <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove();"
                    style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                Ø¨Ø§Ø´Ù‡
            </button>
            <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove(); window.location.href='mailto:support@s-mart-edu.ir';"
                    style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„
            </button>
        </div>
    `;

                document.body.appendChild(modal);

                const overlay = document.createElement('div');
                overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
                document.body.appendChild(overlay);

                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }

                // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        modal.remove();
                        overlay.remove();
                    }
                }, 5000);
            }

            // ØªØ§Ø¨Ø¹ toggle FAQ
            function toggleFaq(element) {
                element.classList.toggle('active');

                // Ù„Ø±Ø²Ø´ Ù…ÙˆØ¨Ø§ÛŒÙ„
                if (navigator.vibrate) {
                    navigator.vibrate(30);
                }

                // Ø¨Ø³ØªÙ† Ø¨Ù‚ÛŒÙ‡ FAQâ€ŒÙ‡Ø§
                if (element.classList.contains('active')) {
                    document.querySelectorAll('.faq-item').forEach(item => {
                        if (item !== element) {
                            item.classList.remove('active');
                        }
                    });
                }
            }

            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
            const style = document.createElement('style');
            style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
            document.head.appendChild(style);
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 133: show.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/attempts/show.blade.php
ğŸ“ SIZE: 17,052 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø¬Ø²Ø¦ÛŒØ§Øª Attempt Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .q-card {
            border: 1px solid #eef2f7;
            border-radius: 1rem;
            transition: .15s ease;
        }

        .q-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, .05);
        }

        .ans-box {
            background: #f9fafb;
            border-radius: .75rem;
            padding: .75rem 1rem;
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }

        .progress-lg {
            height: 12px;
            border-radius: 999px;
        }

        .sticky-actions {
            position: sticky;
            bottom: 10px;
            z-index: 20;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <div>
                <h4 class="fw-bold mb-1">Ø¬Ø²Ø¦ÛŒØ§Øª ØªÙ„Ø§Ø´ (Attempt)</h4>
                <div class="text-muted small">
                    Ø¢Ø²Ù…ÙˆÙ†:
                    <span class="fw-semibold">{{ $attempt->exam->title ?? 'â€”' }}</span>
                    â€¢ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:
                    <span class="fw-semibold">{{ $attempt->student->phone ?? 'â€”' }}</span>
                    â€¢ Ø§Ø±Ø³Ø§Ù„:
                    <span class="fw-semibold">
                        {{ optional($attempt->submitted_at)->format('Y/m/d H:i') ?? 'â€”' }}
                    </span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ url()->previous() }}" class="btn btn-outline-secondary">
                    Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
                <a href="{{ route('teacher.students.show', $attempt->student_id) }}" class="btn btn-outline-primary">
                    Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                </a>
            </div>
        </div>

        @php
            // âœ… answers ÙˆØ§Ù‚Ø¹ÛŒ (AttemptAnswer) Ø§Ø² Ø±Ø§Ø¨Ø·Ù‡
            $answers = $attempt->answers()->with('question')->get();

            $totalScore = $attempt->score_total ?? ($attempt->exam?->questions?->sum('score') ?? 0);

            $obtained = $attempt->score_obtained ?? 0;
            $percent = $attempt->percent ?? 0;
            $status = $attempt->status ?? 'submitted';

            $isPending = $status === 'submitted';

            $essayPendingCount = $answers
                ->filter(function ($a) {
                    return $a->question?->type === 'essay' && $a->graded_at === null;
                })
                ->count();
        @endphp

        {{-- Attempt Summary --}}
        <div class="row g-3 mb-4">
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ù†Ù…Ø±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</div>
                        <div class="fs-3 fw-bold">
                            {{ $obtained }}
                            <span class="fs-6 muted">/ {{ $totalScore }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ø¯Ø±ØµØ¯</div>
                        <div class="fs-3 fw-bold">{{ $percent }}%</div>
                        <div class="progress progress-lg mt-2">
                            <div class="progress-bar" style="width: {{ min(100, max(0, $percent)) }}%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª</div>
                        <div class="mt-2">
                            @if ($isPending)
                                <span class="badge bg-warning text-dark badge-pill">
                                    Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØµØ­ÛŒØ­ (Essay Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡: {{ $essayPendingCount }})
                                </span>
                            @else
                                <span class="badge bg-success badge-pill">
                                    ØªØµØ­ÛŒØ­ Ø´Ø¯Ù‡
                                </span>
                            @endif
                        </div>
                    </div>
                </div>
            </div>
        </div>


        {{-- Questions & Answers --}}
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="fw-bold mb-0">Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§</h5>
            <span class="tiny muted">Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø² Ø´Ø¯Ù† Ø¬Ø²Ø¦ÛŒØ§Øª Ø±ÙˆÛŒ Â«Ù†Ù…Ø§ÛŒØ´Â» Ø¨Ø²Ù†</span>
        </div>

        @if ($answers->count())
            <div class="row g-3">

                @foreach ($answers as $i => $ans)
                    @php
                        $q = $ans->question;
                        $type = $q?->type ?? '-';
                        $questionScore = $q?->score ?? 0;

                        // decode student answer json
                        $studentRaw = $ans->answer;
                        $studentAnswer = $studentRaw;

                        if (is_string($studentRaw)) {
                            $decoded = json_decode($studentRaw, true);
                            if (json_last_error() === JSON_ERROR_NONE) {
                                $studentAnswer = $decoded;
                            }
                        }

                        $isEssay = $type === 'essay';
                        $isCorrect = (int) ($ans->is_correct ?? 0) === 1;

                        $awarded = $ans->score_awarded ?? 0;
                        $gradedAt = $ans->graded_at;

                        // correct answer display
                        $correctDisplay = null;
                        if ($type === 'mcq') {
                            $correctDisplay = strtoupper($q->correct_option ?? '');
                        } elseif ($type === 'true_false') {
                            $correctDisplay = $q->correct_tf ?? false ? 'True' : 'False';
                        } elseif ($type === 'fill_blank') {
                            $correctDisplay = is_array($q->correct_answer)
                                ? implode(' , ', $q->correct_answer)
                                : $q->correct_answer;
                        }

                        $mcqOptions = [
                            'a' => $q->option_a,
                            'b' => $q->option_b,
                            'c' => $q->option_c,
                            'd' => $q->option_d,
                        ];
                    @endphp

                    <div class="col-12">
                        <div class="q-card p-3">

                            {{-- Header line --}}
                            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-2">
                                <div class="d-flex align-items-center gap-2 flex-wrap">
                                    <span class="badge bg-light text-dark border badge-pill">
                                        Ø³ÙˆØ§Ù„ {{ $i + 1 }}
                                    </span>

                                    <span class="badge bg-secondary badge-pill">
                                        {{ str_replace('_', ' ', $type) }}
                                    </span>

                                    <span class="badge bg-info badge-pill">
                                        Ø§Ù…ØªÛŒØ§Ø²: {{ $awarded }} / {{ $questionScore }}
                                    </span>

                                    @if ($isEssay)
                                        @if (!$gradedAt)
                                            <span class="badge bg-warning text-dark badge-pill">
                                                Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ ØªØµØ­ÛŒØ­
                                            </span>
                                        @else
                                            <span class="badge bg-success badge-pill">
                                                ØªØµØ­ÛŒØ­ Ø´Ø¯
                                            </span>
                                        @endif
                                    @else
                                        @if ($isCorrect)
                                            <span class="badge bg-success badge-pill">Ø¯Ø±Ø³Øª</span>
                                        @else
                                            <span class="badge bg-danger badge-pill">ØºÙ„Ø·</span>
                                        @endif
                                    @endif
                                </div>

                                <button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#q{{ $ans->id }}">
                                    Ù†Ù…Ø§ÛŒØ´
                                </button>
                            </div>

                            <div class="collapse" id="q{{ $ans->id }}">

                                {{-- Question --}}
                                <div class="mb-3">
                                    <div class="fw-semibold mb-1">ØµÙˆØ±Øª Ø³ÙˆØ§Ù„:</div>
                                    <div class="ans-box">{{ $q?->question_text ?? 'â€”' }}</div>
                                </div>

                                {{-- MCQ options --}}
                                @if ($type === 'mcq')
                                    <div class="mb-3">
                                        <div class="fw-semibold mb-1">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§:</div>
                                        <div class="row g-2">
                                            @foreach ($mcqOptions as $key => $val)
                                                @if ($val !== null)
                                                    <div class="col-md-6">
                                                        <div
                                                            class="ans-box tiny d-flex justify-content-between align-items-center">
                                                            <span>{{ strtoupper($key) }}) {{ $val }}</span>

                                                            @if (($studentAnswer ?? '') == $key)
                                                                <span class="badge bg-primary">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</span>
                                                            @endif

                                                            @if (($q->correct_option ?? '') == $key)
                                                                <span class="badge bg-success">Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­</span>
                                                            @endif
                                                        </div>
                                                    </div>
                                                @endif
                                            @endforeach
                                        </div>
                                    </div>
                                @endif

                                {{-- Student / Correct --}}
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="fw-semibold mb-1">Ù¾Ø§Ø³Ø® Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:</div>
                                        <div class="ans-box">
                                            @if (is_array($studentAnswer))
                                                <ul class="mb-0">
                                                    @foreach ($studentAnswer as $v)
                                                        <li>{{ $v }}</li>
                                                    @endforeach
                                                </ul>
                                            @else
                                                {{ $studentAnswer ?? 'â€”' }}
                                            @endif
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="fw-semibold mb-1">Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­:</div>
                                        <div class="ans-box">
                                            @if ($isEssay)
                                                <span class="muted">ØªØ´Ø±ÛŒØ­ÛŒ Ø§Ø³Øª Ùˆ Ù¾Ø§Ø³Ø® Ù…Ø±Ø¬Ø¹ Ù†Ø¯Ø§Ø±Ø¯.</span>
                                            @else
                                                {{ $correctDisplay ?? 'â€”' }}
                                            @endif
                                        </div>
                                    </div>
                                </div>

                                {{-- Explanation --}}
                                @if (!empty($q?->explanation))
                                    <div class="mt-3">
                                        <div class="fw-semibold mb-1">ØªÙˆØ¶ÛŒØ­ Ø³ÙˆØ§Ù„:</div>
                                        <div class="ans-box tiny">{{ $q->explanation }}</div>
                                    </div>
                                @endif

                                {{-- Essay Grading Form --}}
                                @if ($isEssay)
                                    <hr class="my-3">

                                    <form method="POST"
                                        action="{{ route('teacher.attempts.answers.grade', [
                                            'attempt' => $attempt->id,
                                            'answer' => $ans->id,
                                        ]) }}"
                                        class="row g-3">

                                        @csrf

                                        <div class="col-md-3">
                                            <label class="form-label fw-semibold">Ù†Ù…Ø±Ù‡ Ø§ÛŒÙ† Ø³ÙˆØ§Ù„</label>
                                            <input type="number" name="score_awarded" class="form-control" min="0"
                                                max="{{ $questionScore }}" step="1"
                                                value="{{ old('score_awarded', $awarded) }}" required>
                                            <div class="tiny muted mt-1">
                                                Ø­Ø¯Ø§Ú©Ø«Ø±: {{ $questionScore }}
                                            </div>
                                        </div>

                                        <div class="col-md-9">
                                            <label class="form-label fw-semibold">Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ù…Ø¹Ù„Ù…</label>
                                            <textarea name="teacher_feedback" class="form-control" rows="2" placeholder="Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ú©ÙˆØªØ§Ù‡ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²...">{{ old('teacher_feedback', $ans->teacher_feedback) }}</textarea>
                                        </div>

                                        <div class="col-12 d-flex align-items-center gap-2">
                                            <button class="btn btn-success">
                                                Ø«Ø¨Øª Ù†Ù…Ø±Ù‡ ØªØ´Ø±ÛŒØ­ÛŒ
                                            </button>

                                            @if ($gradedAt)
                                                <span class="tiny muted">
                                                    Ø¢Ø®Ø±ÛŒÙ† ØªØµØ­ÛŒØ­:
                                                    {{ \Carbon\Carbon::parse($gradedAt)->format('Y/m/d H:i') }}
                                                </span>
                                            @endif
                                        </div>

                                    </form>
                                @endif

                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        @else
            <div class="text-muted mt-3">Ù¾Ø§Ø³Ø®ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 134: create.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/classes/create.blade.php
ğŸ“ SIZE: 17,563 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø³Ø§Ø®Øª Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯')

@push('styles')
    <style>
        .form-shell {
            background: radial-gradient(900px circle at 100% -30%, rgba(13, 110, 253, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08)
        }

        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .chip {
            background: rgba(13, 110, 253, .1);
            color: #0d6efd;
            font-weight: 800;
            border-radius: 999px;
            padding: .25rem .65rem;
            font-size: .8rem
        }

        .wizard {
            display: flex;
            gap: .5rem;
            flex-wrap: wrap
        }

        .wiz-step {
            flex: 1 1 140px;
            background: #f8fafc;
            border-radius: 1rem;
            padding: .7rem .9rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 800;
            font-size: .9rem;
            color: #334155
        }

        .wiz-step.active {
            background: rgba(13, 110, 253, .12);
            color: #0d6efd
        }

        .wiz-step .num {
            width: 28px;
            height: 28px;
            border-radius: .7rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e2e8f0
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 700;
            font-size: .85rem;
            color: #475569
        }

        .floating {
            position: sticky;
            top: 90px
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="form-shell mb-4 fade-up">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <h1 class="h4 fw-bold mb-1"><i class="bi bi-plus-circle me-1 text-primary"></i> Ø³Ø§Ø®Øª Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯</h1>
                    <p class="text-muted mb-0">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¢Ù…ÙˆØ²Ø´ØŒ ÛŒÚ© Ú©Ù„Ø§Ø³ Ø¨Ø³Ø§Ø² Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.</p>
                </div>
                <div class="d-flex gap-2">
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>
            </div>
        </div>

        {{-- Errors --}}
        @if ($errors->any())
            <div class="alert alert-danger fade-up">
                <div class="fw-semibold mb-2"><i class="bi bi-exclamation-triangle-fill me-1"></i> Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ
                    Ú©Ù†:</div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3">

            {{-- Form column --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4 fade-up">

                    {{-- Wizard Steps --}}
                    <div class="wizard mb-3" id="wizard">
                        <div class="wiz-step active" data-step="1">
                            <div class="num">1</div> Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
                        </div>
                        <div class="wiz-step" data-step="2">
                            <div class="num">2</div> Ø¬Ø²Ø¦ÛŒØ§Øª Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                        </div>
                        <div class="wiz-step" data-step="3">
                            <div class="num">3</div> Ù…Ø±ÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ
                        </div>
                    </div>

                    <form action="{{ route('teacher.classes.store') }}" method="POST" class="row g-3" novalidate>
                        @csrf

                        {{-- Step 1 --}}
                        <div class="col-12 step" data-step="1">
                            <label class="form-label fw-semibold">Ù†Ø§Ù… Ú©Ù„Ø§Ø³ <span class="text-danger">*</span></label>
                            <input type="text" name="title" class="form-control input-soft" required
                                value="{{ old('title') }}" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø±ÛŒØ§Ø¶ÛŒ Ù†Ù‡Ù… - Ú©Ù„Ø§Ø³ A">
                        </div>

                        <div class="col-md-6 step" data-step="1">
                            <label class="form-label fw-semibold">Ø¯Ø±Ø³</label>
                            <input type="text" name="subject" class="form-control input-soft"
                                value="{{ old('subject') }}" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø±ÛŒØ§Ø¶ÛŒØŒ Ø¹Ù„ÙˆÙ…ØŒ Ø²Ø¨Ø§Ù†...">
                        </div>

                        <div class="col-md-6 step" data-step="1">
                            <label class="form-label fw-semibold">Ù¾Ø§ÛŒÙ‡</label>
                            <select name="grade" class="form-select input-soft">
                                @php $grade = old('grade',''); @endphp
                                <option value="" {{ $grade === '' ? 'selected' : '' }}>Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø§ÛŒÙ‡</option>
                                <option value="7" {{ $grade === '7' ? 'selected' : '' }}>Ù‡ÙØªÙ…</option>
                                <option value="8" {{ $grade === '8' ? 'selected' : '' }}>Ù‡Ø´ØªÙ…</option>
                                <option value="9" {{ $grade === '9' ? 'selected' : '' }}>Ù†Ù‡Ù…</option>
                                <option value="10" {{ $grade === '10' ? 'selected' : '' }}>Ø¯Ù‡Ù…</option>
                                <option value="11" {{ $grade === '11' ? 'selected' : '' }}>ÛŒØ§Ø²Ø¯Ù‡Ù…</option>
                                <option value="12" {{ $grade === '12' ? 'selected' : '' }}>Ø¯ÙˆØ§Ø²Ø¯Ù‡Ù…</option>
                            </select>
                        </div>

                        {{-- Step 2 --}}
                        <div class="col-12 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ù„Ø§Ø³</label>
                            <textarea name="description" rows="4" class="form-control input-soft"
                                placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ø§Ù‡Ø¯Ø§ÙØŒ Ù…Ù†Ø§Ø¨Ø¹ØŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ...">{{ old('description') }}</textarea>
                        </div>

                        <div class="col-md-6 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">ÙˆØ¶Ø¹ÛŒØª Ú©Ù„Ø§Ø³</label>
                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input" type="checkbox" id="activeSwitch" name="is_active"
                                    value="1" {{ old('is_active', 1) ? 'checked' : '' }}>
                                <label class="form-check-label" for="activeSwitch">Ú©Ù„Ø§Ø³ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯</label>
                            </div>
                            <div class="hint mt-2 text-muted small">Ú©Ù„Ø§Ø³ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø¢Ø±Ø´ÛŒÙˆ ÛŒØ§ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø§Ù…â€ŒØ´Ø¯Ù‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª.
                            </div>
                        </div>

                        <div class="col-md-6 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</label>
                            <div class="input-group">
                                <input type="text" class="form-control input-soft" id="joinCode"
                                    value="{{ old('join_code') }}" placeholder="Ø®ÙˆØ¯Ú©Ø§Ø± Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯" disabled>
                                <button type="button" class="btn btn-outline-primary btn-wizard" id="genCodeBtn"><i
                                        class="bi bi-shuffle"></i> Ø³Ø§Ø®Øª Ú©Ø¯</button>
                            </div>
                            <div class="text-muted small mt-1">Ø¨Ø¹Ø¯ Ø§Ø² Ø³Ø§Ø®Øª Ú©Ù„Ø§Ø³ Ø§ÛŒÙ† Ú©Ø¯ Ø±Ø§ Ø¨Ù‡ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø¨Ø¯Ù‡.</div>
                        </div>

                        {{-- Step 3 Review --}}
                        <div class="col-12 step" data-step="3" style="display:none">
                            <div class="preview-card p-3">
                                <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ù…Ø±ÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ</div>
                                <div class="small text-muted">Ù‚Ø¨Ù„ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ ÛŒÚ©Ø¨Ø§Ø± Ú†Ú© Ú©Ù†.</div>
                                <div class="border rounded-3 p-3 bg-white mt-2" id="reviewBox"></div>
                            </div>
                        </div>

                        {{-- Nav buttons --}}
                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="button" class="btn btn-outline-secondary btn-wizard" id="prevBtn" disabled>
                                <i class="bi bi-arrow-right"></i> Ù‚Ø¨Ù„ÛŒ
                            </button>
                            <button type="button" class="btn btn-primary btn-wizard shadow-sm" id="nextBtn">
                                Ø¨Ø¹Ø¯ÛŒ <i class="bi bi-arrow-left"></i>
                            </button>
                            <button type="submit" class="btn btn-success btn-wizard shadow-sm" id="submitBtn"
                                style="display:none">
                                <i class="bi bi-check2-circle"></i> Ø³Ø§Ø®Øª Ú©Ù„Ø§Ø³
                            </button>
                        </div>

                    </form>
                </div>
            </div>

            {{-- Right column (live preview + tips) --}}
            <div class="col-lg-4">
                <div class="floating fade-up">

                    <div class="preview-card p-3 mb-3">
                        <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡</div>
                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold fs-6" id="pvTitle">Ù†Ø§Ù… Ú©Ù„Ø§Ø³</div>
                            <div class="text-muted small mt-2" id="pvSubject">Ø¯Ø±Ø³: â€”</div>
                            <div class="text-muted small mt-1" id="pvGrade">Ù¾Ø§ÛŒÙ‡: â€”</div>
                            <div class="d-flex flex-wrap gap-2 mt-2">
                                <span class="meta-pill" id="pvActive"><i class="bi bi-broadcast"></i> ÙØ¹Ø§Ù„</span>
                                <span class="meta-pill" id="pvCode"><i class="bi bi-key"></i> Ú©Ø¯: â€”</span>
                            </div>
                            <div class="text-muted small mt-3" id="pvDesc"></div>
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> Ù†Ú©ØªÙ‡â€ŒÙ‡Ø§</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>Ù†Ø§Ù… Ú©Ù„Ø§Ø³ ÙˆØ§Ø¶Ø­ Ùˆ Ù‚Ø§Ø¨Ù„ ØªØ´Ø®ÛŒØµ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.</li>
                            <li>Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø±Ø§ Ø¨Ø¹Ø¯ Ø§Ø² Ø³Ø§Ø®Øª Ø¯Ø± Ú¯Ø±ÙˆÙ‡ Ú©Ù„Ø§Ø³ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†.</li>
                            <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ú©Ù„Ø§Ø³ Ø±Ø§ Ø¨Ø¹Ø¯Ø§Ù‹ Ø¢Ø±Ø´ÛŒÙˆ Ú©Ù†ÛŒ.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Wizard
                const steps = [...document.querySelectorAll('.step')];
                const wizSteps = [...document.querySelectorAll('.wiz-step')];
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const submitBtn = document.getElementById('submitBtn');
                let current = 1;

                function setStep(n) {
                    current = n;
                    steps.forEach(s => s.style.display = (Number(s.dataset.step) === n) ? '' : 'none');
                    wizSteps.forEach(w => w.classList.toggle('active', Number(w.dataset.step) === n));
                    prevBtn.disabled = n === 1;
                    nextBtn.style.display = n < 3 ? '' : 'none';
                    submitBtn.style.display = n === 3 ? '' : 'none';
                    if (n === 3) fillReview();
                }

                prevBtn.addEventListener('click', () => setStep(Math.max(1, current - 1)));
                nextBtn.addEventListener('click', () => setStep(Math.min(3, current + 1)));

                // Live preview elements
                const title = document.querySelector('input[name="title"]');
                const subject = document.querySelector('input[name="subject"]');
                const grade = document.querySelector('select[name="grade"]');
                const desc = document.querySelector('textarea[name="description"]');
                const active = document.getElementById('activeSwitch');

                const pvTitle = document.getElementById('pvTitle');
                const pvSubject = document.getElementById('pvSubject');
                const pvGrade = document.getElementById('pvGrade');
                const pvDesc = document.getElementById('pvDesc');
                const pvActive = document.getElementById('pvActive');
                const pvCode = document.getElementById('pvCode');

                const joinCode = document.getElementById('joinCode');
                const genCodeBtn = document.getElementById('genCodeBtn');

                function genCode() {
                    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                    let c = '';
                    for (let i = 0; i < 6; i++) c += chars[Math.floor(Math.random() * chars.length)];
                    joinCode.value = c;
                    if (pvCode) pvCode.innerHTML = `<i class="bi bi-key"></i> Ú©Ø¯: ${c}`;
                }

                genCodeBtn?.addEventListener('click', genCode);

                function fillReview() {
                    const t = title?.value?.trim() || 'â€”';
                    const s = subject?.value?.trim() || 'â€”';
                    const g = grade?.value || 'â€”';
                    const d = desc?.value?.trim() || 'â€”';
                    const a = active?.checked ? 'ÙØ¹Ø§Ù„' : 'Ø¢Ø±Ø´ÛŒÙˆ';
                    const c = joinCode?.value || 'Ø®ÙˆØ¯Ú©Ø§Ø±';

                    const reviewBox = document.getElementById('reviewBox');
                    if (reviewBox) {
                        reviewBox.innerHTML = `
          <div class="fw-semibold mb-1">Ù†Ø§Ù… Ú©Ù„Ø§Ø³:</div><div>${t}</div>
          <div class="mt-2 fw-semibold mb-1">Ø¯Ø±Ø³:</div><div>${s}</div>
          <div class="mt-2 text-muted small">Ù¾Ø§ÛŒÙ‡: ${g} â€¢ ÙˆØ¶Ø¹ÛŒØª: ${a}</div>
          <div class="mt-2 fw-semibold mb-1">Ú©Ø¯ ÙˆØ±ÙˆØ¯:</div><div>${c}</div>
          <div class="mt-2 fw-semibold mb-1">ØªÙˆØ¶ÛŒØ­Ø§Øª:</div><div>${d}</div>
        `;
                    }
                }

                // preview listeners
                title?.addEventListener('input', () => {
                    pvTitle.textContent = title.value || 'Ù†Ø§Ù… Ú©Ù„Ø§Ø³';
                });
                subject?.addEventListener('input', () => {
                    pvSubject.textContent = 'Ø¯Ø±Ø³: ' + (subject.value || 'â€”');
                });
                grade?.addEventListener('change', () => {
                    pvGrade.textContent = 'Ù¾Ø§ÛŒÙ‡: ' + (grade.value || 'â€”');
                });
                desc?.addEventListener('input', () => {
                    pvDesc.textContent = desc.value || '';
                });
                active?.addEventListener('change', () => {
                    pvActive.innerHTML = active.checked ?
                        '<i class="bi bi-broadcast"></i> ÙØ¹Ø§Ù„' :
                        '<i class="bi bi-archive"></i> Ø¢Ø±Ø´ÛŒÙˆ';
                });

                // init
                setStep(1);
                genCode();
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 135: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/classes/edit.blade.php
ğŸ“ SIZE: 15,240 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù„Ø§Ø³')

@push('styles')
    <style>
        .form-shell {
            background: radial-gradient(900px circle at 100% -30%, rgba(13, 110, 253, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08)
        }

        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 700;
            font-size: .85rem;
            color: #475569
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .floating {
            position: sticky;
            top: 90px
        }

        .danger-zone {
            border: 1px solid rgba(220, 53, 69, .2);
            background: rgba(220, 53, 69, .04);
            border-radius: 1rem
        }

        .copy-btn {
            border-radius: .8rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="form-shell mb-4 fade-up">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <h1 class="h4 fw-bold mb-1"><i class="bi bi-pencil-square me-1 text-warning"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù„Ø§Ø³</h1>
                    <p class="text-muted mb-0">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ù„Ø§Ø³ Ø±Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù† ÛŒØ§ Ø¢Ù† Ø±Ø§ Ø¢Ø±Ø´ÛŒÙˆ/Ø­Ø°Ù Ú©Ù†.</p>
                </div>
                <div class="d-flex gap-2">
                    <a href="{{ route('teacher.classes.show', $class) }}"
                        class="btn btn-outline-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-eye"></i> Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù„Ø§Ø³
                    </a>
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>
            </div>
        </div>

        {{-- Errors / Success --}}
        @if ($errors->any())
            <div class="alert alert-danger fade-up">
                <div class="fw-semibold mb-2"><i class="bi bi-exclamation-triangle-fill me-1"></i> Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ
                    Ú©Ù†:</div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif
        @if (session('success'))
            <div class="alert alert-success fade-up"><i class="bi bi-check-circle-fill me-1"></i>{{ session('success') }}
            </div>
        @endif

        <div class="row g-3">

            {{-- Form column --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4 fade-up">

                    <form action="{{ route('teacher.classes.update', $class) }}" method="POST" class="row g-3" novalidate>
                        @csrf
                        @method('PUT')

                        <div class="col-12">
                            <label class="form-label fw-semibold">Ù†Ø§Ù… Ú©Ù„Ø§Ø³ <span class="text-danger">*</span></label>
                            <input type="text" name="title" class="form-control input-soft" required
                                value="{{ old('title', $class->title) }}" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø±ÛŒØ§Ø¶ÛŒ Ù†Ù‡Ù… - Ú©Ù„Ø§Ø³ A">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ø¯Ø±Ø³</label>
                            <input type="text" name="subject" class="form-control input-soft"
                                value="{{ old('subject', $class->subject) }}" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø±ÛŒØ§Ø¶ÛŒØŒ Ø¹Ù„ÙˆÙ…ØŒ Ø²Ø¨Ø§Ù†...">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ù¾Ø§ÛŒÙ‡</label>
                            <select name="grade" class="form-select input-soft">
                                @php $grade = old('grade', (string)($class->grade ?? '')); @endphp
                                <option value="" {{ $grade === '' ? 'selected' : '' }}>Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø§ÛŒÙ‡</option>
                                <option value="7" {{ $grade === '7' ? 'selected' : '' }}>Ù‡ÙØªÙ…</option>
                                <option value="8" {{ $grade === '8' ? 'selected' : '' }}>Ù‡Ø´ØªÙ…</option>
                                <option value="9" {{ $grade === '9' ? 'selected' : '' }}>Ù†Ù‡Ù…</option>
                                <option value="10" {{ $grade === '10' ? 'selected' : '' }}>Ø¯Ù‡Ù…</option>
                                <option value="11" {{ $grade === '11' ? 'selected' : '' }}>ÛŒØ§Ø²Ø¯Ù‡Ù…</option>
                                <option value="12" {{ $grade === '12' ? 'selected' : '' }}>Ø¯ÙˆØ§Ø²Ø¯Ù‡Ù…</option>
                            </select>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-semibold">ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ù„Ø§Ø³</label>
                            <textarea name="description" rows="4" class="form-control input-soft"
                                placeholder="ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ø§Ù‡Ø¯Ø§ÙØŒ Ù…Ù†Ø§Ø¨Ø¹ØŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ...">{{ old('description', $class->description) }}</textarea>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">ÙˆØ¶Ø¹ÛŒØª Ú©Ù„Ø§Ø³</label>
                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input" type="checkbox" id="activeSwitch" name="is_active"
                                    value="1" {{ old('is_active', $class->is_active ?? 1) ? 'checked' : '' }}>
                                <label class="form-check-label" for="activeSwitch">Ú©Ù„Ø§Ø³ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ø¯</label>
                            </div>
                            <div class="text-muted small mt-1">Ú©Ù„Ø§Ø³ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø¢Ø±Ø´ÛŒÙˆ ÛŒØ§ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªÙ…Ø§Ù…â€ŒØ´Ø¯Ù‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª.</div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</label>
                            <div class="input-group">
                                <input type="text" class="form-control input-soft" id="joinCode"
                                    value="{{ $class->join_code }}" readonly>
                                <button type="button" class="btn btn-outline-secondary copy-btn" id="copyCodeBtn">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                            </div>
                            <div class="text-muted small mt-1">Ø§ÛŒÙ† Ú©Ø¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø§Ø±Ø³Ø§Ù„ Ú©Ù†.</div>
                        </div>

                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="submit" class="btn btn-primary btn-wizard shadow-sm">
                                <i class="bi bi-save2"></i> Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                            </button>
                            <a href="{{ route('teacher.classes.show', $class) }}"
                                class="btn btn-outline-primary btn-wizard">
                                Ù…Ø´Ø§Ù‡Ø¯Ù‡
                            </a>
                            <a href="{{ route('teacher.classes.index') }}" class="btn btn-outline-secondary btn-wizard">
                                Ø§Ù†ØµØ±Ø§Ù
                            </a>
                        </div>
                    </form>

                    {{-- Danger zone delete --}}
                    <div class="danger-zone p-3 mt-4">
                        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                            <div>
                                <div class="fw-bold text-danger"><i class="bi bi-trash3 me-1"></i> Ø­Ø°Ù Ú©Ù„Ø§Ø³</div>
                                <div class="small text-muted">Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª.</div>
                            </div>
                            <form action="{{ route('teacher.classes.destroy', $class) }}" method="POST">
                                @csrf @method('DELETE')
                                <button class="btn btn-outline-danger btn-wizard"
                                    onclick="return confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')">
                                    Ø­Ø°Ù Ù‚Ø·Ø¹ÛŒ
                                </button>
                            </form>
                        </div>
                    </div>

                </div>
            </div>

            {{-- Right column preview/help --}}
            <div class="col-lg-4">
                <div class="floating fade-up">

                    <div class="preview-card p-3 mb-3">
                        <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ú©Ù„Ø§Ø³</div>
                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold fs-6" id="pvTitle">{{ $class->title }}</div>
                            <div class="text-muted small mt-2" id="pvSubject">Ø¯Ø±Ø³: {{ $class->subject ?? 'â€”' }}</div>
                            <div class="text-muted small mt-1" id="pvGrade">Ù¾Ø§ÛŒÙ‡: {{ $class->grade ?? 'â€”' }}</div>
                            <div class="d-flex flex-wrap gap-2 mt-2">
                                <span class="meta-pill" id="pvActive"><i class="bi bi-broadcast"></i>
                                    {{ $class->is_active ?? 1 ? 'ÙØ¹Ø§Ù„' : 'Ø¢Ø±Ø´ÛŒÙˆ' }}</span>
                                <span class="meta-pill" id="pvCode"><i class="bi bi-key"></i> Ú©Ø¯:
                                    {{ $class->join_code }}</span>
                            </div>
                            @if ($class->description)
                                <div class="text-muted small mt-3" id="pvDesc">{{ $class->description }}</div>
                            @else
                                <div class="text-muted small mt-3" id="pvDesc"></div>
                            @endif
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> Ù†Ú©ØªÙ‡â€ŒÙ‡Ø§</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>Ø§Ú¯Ø± Ú©Ù„Ø§Ø³ ØªÙ…Ø§Ù… Ø´Ø¯Ù‡ØŒ Ø¢Ù† Ø±Ø§ Ø¢Ø±Ø´ÛŒÙˆ Ú©Ù†.</li>
                            <li>Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØªØŒ Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø±Ø§ ÙÙ‚Ø· Ø¨Ù‡ Ø§Ø¹Ø¶Ø§ÛŒ Ú©Ù„Ø§Ø³ Ø¨Ø¯Ù‡.</li>
                            <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¨Ø§ ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† Ú©ÙˆØªØ§Ù‡ Ø³Ø·Ø­ Ú©Ù„Ø§Ø³ Ø±Ø§ Ø¨Ø³Ù†Ø¬ÛŒ.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const title = document.querySelector('input[name="title"]');
                const subject = document.querySelector('input[name="subject"]');
                const grade = document.querySelector('select[name="grade"]');
                const desc = document.querySelector('textarea[name="description"]');
                const active = document.getElementById('activeSwitch');

                const pvTitle = document.getElementById('pvTitle');
                const pvSubject = document.getElementById('pvSubject');
                const pvGrade = document.getElementById('pvGrade');
                const pvDesc = document.getElementById('pvDesc');
                const pvActive = document.getElementById('pvActive');

                const joinCode = document.getElementById('joinCode');
                const copyBtn = document.getElementById('copyCodeBtn');

                // live preview
                title?.addEventListener('input', () => {
                    pvTitle.textContent = title.value || 'Ù†Ø§Ù… Ú©Ù„Ø§Ø³';
                });
                subject?.addEventListener('input', () => {
                    pvSubject.textContent = 'Ø¯Ø±Ø³: ' + (subject.value || 'â€”');
                });
                grade?.addEventListener('change', () => {
                    pvGrade.textContent = 'Ù¾Ø§ÛŒÙ‡: ' + (grade.value || 'â€”');
                });
                desc?.addEventListener('input', () => {
                    pvDesc.textContent = desc.value || '';
                });
                active?.addEventListener('change', () => {
                    pvActive.innerHTML = active.checked ?
                        '<i class="bi bi-broadcast"></i> ÙØ¹Ø§Ù„' :
                        '<i class="bi bi-archive"></i> Ø¢Ø±Ø´ÛŒÙˆ';
                });

                // copy join code
                copyBtn?.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(joinCode.value);
                        copyBtn.classList.remove('btn-outline-secondary');
                        copyBtn.classList.add('btn-success');
                        copyBtn.innerHTML = '<i class="bi bi-check2"></i>';
                        setTimeout(() => {
                            copyBtn.classList.remove('btn-success');
                            copyBtn.classList.add('btn-outline-secondary');
                            copyBtn.innerHTML = '<i class="bi bi-clipboard"></i>';
                        }, 1200);
                    } catch (e) {
                        alert('Ú©Ù¾ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯.');
                    }
                });
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 136: index.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/classes/index.blade.php
ğŸ“ SIZE: 44,111 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:36:01
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù… - Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†')

@push('styles')
    <style>
        /* ØªÙ… Ú©Ø§Ù…Ù„ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .classes-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* ========== HERO HEADER ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .btn-hero {
            padding: 16px 32px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1.05rem;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-hero:active {
            transform: scale(0.97);
        }

        .btn-primary-grad {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-primary-grad:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-primary-grad::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-primary-grad:hover::before {
            left: 100%;
        }

        .btn-outline-secondary-grad {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-outline-secondary-grad:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== FILTER SECTION ========== */
        .filter-section {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.08);
            animation: slideInLeft 0.5s ease-out;
        }

        .filter-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
        }

        .filter-header i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        .filter-header h3 {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            margin: 0;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            align-items: end;
        }

        @media (max-width: 1200px) {
            .filter-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 992px) {
            .filter-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .filter-grid {
                grid-template-columns: 1fr;
            }
        }

        .filter-group {
            margin-bottom: 0;
        }

        .filter-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: block;
        }

        .filter-input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
        }

        .filter-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .filter-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 18px center;
            background-size: 16px;
            padding-left: 45px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            height: 100%;
            align-items: end;
        }

        .btn-filter {
            flex: 1;
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 52px;
        }

        .btn-filter:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .btn-filter-primary {
            background: var(--gradient-1);
            color: white;
            border: none;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.25);
        }

        .btn-filter-primary:hover {
            background: var(--gradient-1);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(123, 104, 238, 0.35);
        }

        .btn-filter-reset {
            background: transparent;
            color: var(--gray);
            border: 2px solid var(--gray);
        }

        .btn-filter-reset:hover {
            background: var(--light-gray);
            color: var(--dark);
        }

        /* ========== CLASSES GRID ========== */
        .classes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
            animation: fadeIn 0.6s ease-out;
            animation-delay: 0.1s;
            animation-fill-mode: both;
        }

        @media (max-width: 768px) {
            .classes-grid {
                grid-template-columns: 1fr;
            }
        }

        .class-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .class-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .class-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .class-ribbon {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 8px 16px;
            font-size: 0.85rem;
            font-weight: 900;
            border-radius: var(--radius-sm);
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ribbon-active {
            background: rgba(0, 212, 170, 0.15);
            color: #00D4AA;
        }

        .ribbon-archived {
            background: rgba(138, 141, 155, 0.15);
            color: var(--gray);
        }

        .class-header {
            padding: 25px 25px 20px;
            border-bottom: 2px solid var(--light-gray);
            position: relative;
            z-index: 2;
        }

        .class-title {
            font-weight: 900;
            font-size: 1.4rem;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            line-height: 1.3;
        }

        .class-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .class-subject {
            color: var(--gray);
            font-size: 0.95rem;
            font-weight: 700;
            padding-right: 57px;
        }

        .class-body {
            padding: 20px 25px;
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .class-description {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 25px;
            min-height: 60px;
        }

        .class-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .meta-item {
            background: var(--light-gray);
            border-radius: var(--radius-md);
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
        }

        .meta-item:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
        }

        .meta-value {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 5px;
            line-height: 1;
        }

        .meta-label {
            font-size: 0.85rem;
            color: var(--gray);
            font-weight: 700;
        }

        .class-code {
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), rgba(255, 107, 157, 0.05));
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px dashed rgba(123, 104, 238, 0.2);
        }

        .code-label {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .code-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--primary);
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        .class-footer {
            padding: 20px 25px 25px;
            border-top: 2px solid var(--light-gray);
            position: relative;
            z-index: 2;
        }

        .class-actions {
            display: flex;
            gap: 12px;
        }

        .btn-class-action {
            flex: 1;
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            min-height: 48px;
        }

        .btn-class-action:active {
            transform: scale(0.95);
        }

        .btn-exam {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.25);
        }

        .btn-exam:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(123, 104, 238, 0.35);
        }

        .btn-details {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-details:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* ========== EMPTY STATE ========== */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 40px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 2px dashed rgba(123, 104, 238, 0.2);
            animation: fadeIn 0.6s ease-out;
        }

        .empty-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.1), rgba(0, 212, 170, 0.1));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 2.8rem;
            color: var(--primary);
            animation: pulse 2s infinite;
        }

        .empty-title {
            font-weight: 900;
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-description {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        /* ========== PAGINATION ========== */
        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            animation: fadeIn 0.6s ease-out;
        }

        .pagination-custom {
            display: flex;
            gap: 10px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .page-item {
            display: flex;
        }

        .page-link {
            padding: 12px 20px;
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 800;
            text-decoration: none;
            border: 2px solid var(--light-gray);
            transition: all 0.3s;
            min-width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-link:hover {
            background: var(--primary-light);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        .page-item.active .page-link {
            background: var(--gradient-1);
            color: white;
            border-color: var(--primary);
        }

        .page-item.disabled .page-link {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .classes-container {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .hero-actions {
                flex-direction: column;
                width: 100%;
            }

            .btn-hero {
                width: 100%;
                justify-content: center;
            }

            .filter-section {
                padding: 20px;
            }

            .filter-grid {
                gap: 12px;
            }

            .filter-buttons {
                flex-direction: column;
            }

            .class-meta {
                grid-template-columns: 1fr;
            }

            .class-actions {
                flex-direction: column;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-title {
                font-size: 1.5rem;
            }

            .page-link {
                padding: 10px 15px;
                min-width: 40px;
            }
        }

        @media (max-width: 480px) {
            .class-card {
                margin-bottom: 20px;
            }

            .class-header,
            .class-body,
            .class-footer {
                padding: 20px;
            }

            .meta-value {
                font-size: 1.5rem;
            }

            .code-value {
                font-size: 1.3rem;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .btn-hero,
        .btn-filter,
        .btn-class-action,
        .page-link {
            min-height: 44px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="classes-container">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span
                        style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†
                    </span>
                    ğŸ‘¨â€ğŸ«
                </h1>
                <p class="hero-subtitle">
                    Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§Ø®ØªØŒ ÙˆÛŒØ±Ø§ÛŒØ´ØŒ Ø§Ø¹Ø¶Ø§ Ùˆ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ø± Ú©Ù„Ø§Ø³.
                    Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ø±Ø§ Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø±Ø§ Ø¯Ù†Ø¨Ø§Ù„ Ú©Ù†ÛŒØ¯.
                </p>
            </div>

            <div class="hero-actions">
                @if (\Illuminate\Support\Facades\Route::has('teacher.classes.create'))
                    <a href="{{ route('teacher.classes.create') }}" class="btn-hero btn-primary-grad">
                        <i class="fas fa-plus-circle"></i>
                        Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯
                    </a>
                @endif

                <a href="{{ route('teacher.index') }}" class="btn-hero btn-outline-secondary-grad">
                    <i class="fas fa-home"></i>
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                </a>
            </div>
        </div>

        {{-- ========== FILTER SECTION ========== --}}
        <div class="filter-section">
            <div class="filter-header">
                <i class="fas fa-filter"></i>
                <h3>ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h3>
            </div>

            <form method="GET" action="{{ route('teacher.classes.index') }}" class="filter-grid">
                <div class="filter-group">
                    <label class="filter-label">Ø¬Ø³ØªØ¬Ùˆ</label>
                    <div class="input-group">
                        <span class="input-group-text bg-white border-0">
                            <i class="fas fa-search"></i>
                        </span>
                        <input type="text" name="q" class="filter-input" placeholder="Ù†Ø§Ù… Ú©Ù„Ø§Ø³ØŒ Ù¾Ø§ÛŒÙ‡ ÛŒØ§ Ú©Ø¯ Ú©Ù„Ø§Ø³..."
                            value="{{ request('q') }}">
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Ù¾Ø§ÛŒÙ‡</label>
                    @php $grade = request('grade','all'); @endphp
                    <select name="grade" class="filter-select">
                        <option value="all" {{ $grade === 'all' ? 'selected' : '' }}>Ù‡Ù…Ù‡ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§</option>
                        <option value="7" {{ $grade === '7' ? 'selected' : '' }}>Ù‡ÙØªÙ…</option>
                        <option value="8" {{ $grade === '8' ? 'selected' : '' }}>Ù‡Ø´ØªÙ…</option>
                        <option value="9" {{ $grade === '9' ? 'selected' : '' }}>Ù†Ù‡Ù…</option>
                        <option value="10" {{ $grade === '10' ? 'selected' : '' }}>Ø¯Ù‡Ù…</option>
                        <option value="11" {{ $grade === '11' ? 'selected' : '' }}>ÛŒØ§Ø²Ø¯Ù‡Ù…</option>
                        <option value="12" {{ $grade === '12' ? 'selected' : '' }}>Ø¯ÙˆØ§Ø²Ø¯Ù‡Ù…</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">ÙˆØ¶Ø¹ÛŒØª</label>
                    @php $status=request('status','all'); @endphp
                    <select name="status" class="filter-select">
                        <option value="all" {{ $status === 'all' ? 'selected' : '' }}>Ù‡Ù…Ù‡</option>
                        <option value="active" {{ $status === 'active' ? 'selected' : '' }}>ÙØ¹Ø§Ù„</option>
                        <option value="archived" {{ $status === 'archived' ? 'selected' : '' }}>Ø¢Ø±Ø´ÛŒÙˆ</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ</label>
                    @php $sort=request('sort','latest'); @endphp
                    <select name="sort" class="filter-select">
                        <option value="latest" {{ $sort === 'latest' ? 'selected' : '' }}>Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†</option>
                        <option value="oldest" {{ $sort === 'oldest' ? 'selected' : '' }}>Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±ÛŒÙ†</option>
                        <option value="students" {{ $sort === 'students' ? 'selected' : '' }}>Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</option>
                        <option value="title_asc" {{ $sort === 'title_asc' ? 'selected' : '' }}>Ù†Ø§Ù… Aâ†’Z</option>
                        <option value="title_desc" {{ $sort === 'title_desc' ? 'selected' : '' }}>Ù†Ø§Ù… Zâ†’A</option>
                    </select>
                </div>

                <div class="filter-buttons">
                    <button type="submit" class="btn-filter btn-filter-primary">
                        <i class="fas fa-sliders-h"></i>
                        Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±
                    </button>
                    <a href="{{ route('teacher.classes.index') }}" class="btn-filter btn-filter-reset">
                        <i class="fas fa-times"></i>
                        Ø­Ø°Ù ÙÛŒÙ„ØªØ±
                    </a>
                </div>
            </form>
        </div>

        {{-- ========== CLASSES LIST ========== --}}
        @php
            $classes = $classes ?? collect();
            $hasPaginator = method_exists($classes, 'total');
            $totalClasses = $hasPaginator ? $classes->total() : $classes->count();
        @endphp

        @if ($totalClasses == 0)
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-people-group"></i>
                </div>
                <h3 class="empty-title">Ù‡Ù†ÙˆØ² Ú©Ù„Ø§Ø³ÛŒ Ù†Ø³Ø§Ø®ØªÛŒ!</h3>
                <p class="empty-description">
                    Ø§ÙˆÙ„ÛŒÙ† Ú©Ù„Ø§Ø³ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯ ØªØ§ Ø¨ØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ÛŒ Ø¨Ø±Ú¯Ø²Ø§Ø± Ú©Ù†ÛŒØ¯.
                    Ù¾Ø³ Ø§Ø² ÙØ¹Ø§Ù„ Ø´Ø¯Ù† Ù…Ø³ÛŒØ± Ø³Ø§Ø®Øª Ú©Ù„Ø§Ø³ØŒ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
                </p>
                @if (\Illuminate\Support\Facades\Route::has('teacher.classes.create'))
                    <a href="{{ route('teacher.classes.create') }}" class="btn-hero btn-primary-grad"
                        style="display: inline-flex;">
                        <i class="fas fa-plus-circle"></i>
                        Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ú©Ù„Ø§Ø³
                    </a>
                @endif
            </div>
        @else
            <div class="classes-grid">
                @foreach ($classes as $class)
                    @php
                        $studentsCount = $class->students_count ?? ($class->students->count() ?? 0);
                        $examsCount = $class->exams_count ?? 0;
                        $isActive = $class->is_active ?? true;
                        $gradeLabel = $class->grade ?? 'â€”';
                        $code = $class->code ?? ($class->join_code ?? null);
                        $description = $class->description ?? null;
                    @endphp

                    <div class="class-card">
                        <div class="class-ribbon {{ $isActive ? 'ribbon-active' : 'ribbon-archived' }}">
                            <i class="fas {{ $isActive ? 'fa-check-circle' : 'fa-archive' }}"></i>
                            {{ $isActive ? 'ÙØ¹Ø§Ù„' : 'Ø¢Ø±Ø´ÛŒÙˆ' }}
                        </div>

                        <div class="class-header">
                            <div class="class-title">
                                <i class="fas fa-chalkboard-teacher"></i>
                                {{ $class->title ?? ($class->name ?? 'Ú©Ù„Ø§Ø³ Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…') }}
                            </div>
                            <div class="class-subject">
                                {{ $class->subject ?? 'Ø¹Ù…ÙˆÙ…ÛŒ' }}
                            </div>
                        </div>

                        <div class="class-body">
                            @if ($description)
                                <div class="class-description">
                                    {{ \Illuminate\Support\Str::limit($description, 120) }}
                                </div>
                            @else
                                <div class="class-description" style="color: var(--light-gray);">
                                    <i class="fas fa-info-circle"></i>
                                    ØªÙˆØ¶ÛŒØ­Ø§ØªÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                                </div>
                            @endif

                            <div class="class-meta">
                                <div class="meta-item">
                                    <div class="meta-value">{{ $gradeLabel }}</div>
                                    <div class="meta-label">Ù¾Ø§ÛŒÙ‡ ØªØ­ØµÛŒÙ„ÛŒ</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-value">{{ $studentsCount }}</div>
                                    <div class="meta-label">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-value">{{ $examsCount }}</div>
                                    <div class="meta-label">Ø¢Ø²Ù…ÙˆÙ†</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-value">
                                        <i class="fas fa-calendar-alt" style="color: var(--primary);"></i>
                                    </div>
                                    <div class="meta-label">Ù…Ø¯ÛŒØ±ÛŒØª</div>
                                </div>
                            </div>

                            @if ($code)
                                <div class="class-code">
                                    <div class="code-label">Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³:</div>
                                    <div class="code-value">{{ $code }}</div>
                                </div>
                            @endif
                        </div>

                        <div class="class-footer">
                            <div class="class-actions">
                                <a href="{{ route('teacher.exams.wizard.step1', ['class_id' => $class->id]) }}"
                                    class="btn-class-action btn-exam">
                                    <i class="fas fa-plus-circle"></i>
                                    Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯
                                </a>
                                <button class="btn-class-action btn-details"
                                    onclick="showClassDetails({{ $class->id }})">
                                    <i class="fas fa-eye"></i>
                                    Ø¬Ø²Ø¦ÛŒØ§Øª
                                </button>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>

            {{-- ========== PAGINATION ========== --}}
            @if (method_exists($classes, 'hasPages') && $classes->hasPages())
                <div class="pagination-container">
                    <ul class="pagination-custom">
                        {{-- Previous Page Link --}}
                        @if ($classes->onFirstPage())
                            <li class="page-item disabled">
                                <span class="page-link">
                                    <i class="fas fa-chevron-right"></i>
                                </span>
                            </li>
                        @else
                            <li class="page-item">
                                <a class="page-link" href="{{ $classes->previousPageUrl() }}" rel="prev">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </li>
                        @endif

                        {{-- Pagination Elements --}}
                        @foreach ($classes->getUrlRange(1, $classes->lastPage()) as $page => $url)
                            @if ($page == $classes->currentPage())
                                <li class="page-item active">
                                    <span class="page-link">{{ $page }}</span>
                                </li>
                            @else
                                <li class="page-item">
                                    <a class="page-link" href="{{ $url }}">{{ $page }}</a>
                                </li>
                            @endif
                        @endforeach

                        {{-- Next Page Link --}}
                        @if ($classes->hasMorePages())
                            <li class="page-item">
                                <a class="page-link" href="{{ $classes->nextPageUrl() }}" rel="next">
                                    <i class="fas fa-chevron-left"></i>
                                </a>
                            </li>
                        @else
                            <li class="page-item disabled">
                                <span class="page-link">
                                    <i class="fas fa-chevron-left"></i>
                                </span>
                            </li>
                        @endif
                    </ul>
                </div>
            @endif
        @endif
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-hero, .btn-filter, .btn-class-action, .page-link, .class-card');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // Ø§ÙÚ©Øª hover Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            const classCards = document.querySelectorAll('.class-card');
            classCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                });
            });

            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            const animateCards = () => {
                const cards = document.querySelectorAll('.class-card');
                cards.forEach((card, i) => {
                    card.style.animationDelay = `${i * 0.1}s`;
                    card.style.animation = 'fadeIn 0.5s ease-out forwards';
                    card.style.opacity = '0';
                });
            };

            // Ø§Ø¬Ø±Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ ØµÙØ­Ù‡
            setTimeout(animateCards, 300);

            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙØ±Ù… ÙÛŒÙ„ØªØ±
            const filterForm = document.querySelector('.filter-grid');
            if (filterForm) {
                filterForm.addEventListener('submit', function(e) {
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬Ùˆ...';
                    submitBtn.disabled = true;

                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    }, 1500);
                });
            }

            // Ù†Ù…Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ù†ØªØ§ÛŒØ¬ ÙÛŒÙ„ØªØ± Ø´Ø¯Ù‡
            const updateResultsCount = () => {
                const resultsCount = document.querySelectorAll('.class-card').length;
                const countElement = document.createElement('div');
                countElement.className = 'results-count';
                countElement.style.cssText = `
            background: var(--gradient-1);
            color: white;
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-weight: 900;
            font-size: 0.9rem;
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 8px;
        `;
                countElement.innerHTML = `<i class="fas fa-layer-group"></i> ${resultsCount} Ú©Ù„Ø§Ø³ ÛŒØ§ÙØª Ø´Ø¯`;

                const existingCount = document.querySelector('.results-count');
                if (existingCount) existingCount.remove();

                if (resultsCount > 0) {
                    document.body.appendChild(countElement);

                    setTimeout(() => {
                        countElement.style.opacity = '0';
                        countElement.style.transform = 'translateY(20px)';
                        setTimeout(() => countElement.remove(), 300);
                    }, 3000);
                }
            };

            // Ø§Ø¬Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´ Ù†ØªØ§ÛŒØ¬
            setTimeout(updateResultsCount, 500);
        });

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³
        function showClassDetails(classId) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 400px;
        width: 90%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

            modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
            <i class="fas fa-chalkboard-teacher"></i>
        </div>
        <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³</h3>
        <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
            ØµÙØ­Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.
            Ø¯Ø± Ø§ÛŒÙ† ØµÙØ­Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†ØŒ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³ Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
        </p>
        <div style="display: flex; gap: 10px;">
            <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove();"
                    style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                Ø¨Ø§Ø´Ù‡
            </button>
            <button onclick="window.location.href='{{ route('teacher.exams.wizard.step1') }}?class_id=' + ${classId};"
                    style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ†
            </button>
        </div>
    `;

            document.body.appendChild(modal);

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
            document.body.appendChild(overlay);

            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }

            setTimeout(() => {
                if (document.body.contains(modal)) {
                    modal.remove();
                    overlay.remove();
                }
            }, 8000);
        }

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
        const style = document.createElement('style');
        style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 137: show.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/classes/show.blade.php
ğŸ“ SIZE: 20,845 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³')

@push('styles')
    <style>
        .hero {
            background: radial-gradient(1100px circle at 100% -20%, rgba(13, 110, 253, .16), transparent 60%), radial-gradient(900px circle at 0% 0%, rgba(32, 201, 151, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1.25rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08);
            position: relative;
            overflow: hidden
        }

        .hero-orb {
            position: absolute;
            inset: auto -90px -90px auto;
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(13, 110, 253, .18), transparent 60%);
            filter: blur(2px);
            animation: floaty 7s ease-in-out infinite
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0)
            }

            50% {
                transform: translateY(-10px) translateX(-8px)
            }
        }

        .panel {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 800;
            font-size: .85rem;
            color: #475569
        }

        .badge-soft {
            background: rgba(13, 110, 253, .12);
            color: #0d6efd;
            font-weight: 800;
            border-radius: 999px
        }

        .badge-soft-success {
            background: rgba(25, 135, 84, .12);
            color: #198754;
            font-weight: 800;
            border-radius: 999px
        }

        .stat-card {
            background: #fff;
            border: 1px dashed #e2e8f0;
            border-radius: 1rem;
            padding: .9rem;
            display: flex;
            align-items: center;
            justify-content-between
        }

        .stat-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: linear-gradient(135deg, rgba(13, 110, 253, .12), rgba(13, 110, 253, .02));
            font-size: 1.25rem
        }

        .quick {
            display: flex;
            flex-direction: column;
            gap: .5rem
        }

        .quick a {
            border-radius: 1rem;
            padding: .8rem .9rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fff;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            text-decoration: none;
            color: inherit;
            transition: .2s
        }

        .quick a:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 28px rgba(18, 38, 63, .12)
        }

        .table thead th {
            background: #f8fafc;
            border-bottom: 0
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: #e9ecef;
            font-weight: 800
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- HERO HEADER --}}
        <div class="hero mb-4 fade-up">
            <div class="hero-orb"></div>

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <div class="d-flex align-items-center gap-2 mb-1">
                        <h1 class="h4 fw-bold mb-0"><i class="bi bi-people me-1 text-primary"></i> {{ $class->title }}</h1>
                        <span class="badge {{ $class->is_active ?? 1 ? 'badge-soft-success' : 'badge-soft' }} px-2 py-1">
                            {{ $class->is_active ?? 1 ? 'ÙØ¹Ø§Ù„' : 'Ø¢Ø±Ø´ÛŒÙˆ' }}
                        </span>
                    </div>
                    <div class="text-muted small">
                        <i class="bi bi-book me-1"></i> {{ $class->subject ?? 'Ø¹Ù…ÙˆÙ…ÛŒ' }}
                        <span class="mx-1">â€¢</span>
                        <i class="bi bi-layers me-1"></i> Ù¾Ø§ÛŒÙ‡: {{ $class->grade ?? 'â€”' }}
                    </div>
                    @if ($class->description)
                        <div class="text-muted mt-2">{{ $class->description }}</div>
                    @endif
                </div>

                <div class="d-flex flex-wrap gap-2">
                    <a href="{{ route('teacher.classes.edit', $class) }}"
                        class="btn btn-warning d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-pencil-square"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù„Ø§Ø³
                    </a>
                    <a href="{{ route('teacher.classes.students', $class) }}"
                        class="btn btn-outline-success d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-person-video3"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¹Ø¶Ø§
                    </a>
                    <a href="{{ route('teacher.exams.create', ['class_id' => $class->id]) }}"
                        class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-plus-circle"></i> Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ú©Ù„Ø§Ø³
                    </a>
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>
            </div>

            {{-- Join code strip --}}
            <div
                class="d-flex flex-wrap align-items-center justify-content-between gap-2 mt-3 p-2 px-3 bg-white rounded-3 shadow-sm">
                <div class="fw-semibold"><i class="bi bi-key me-1"></i> Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†:</div>
                <div class="d-flex align-items-center gap-2">
                    <div class="fw-bold fs-5" id="joinCodeText">{{ $class->join_code }}</div>
                    <button class="btn btn-outline-primary btn-sm" id="copyBtn"><i class="bi bi-clipboard"></i>
                        Ú©Ù¾ÛŒ</button>
                    <button class="btn btn-outline-secondary btn-sm" id="regenBtn"><i class="bi bi-shuffle"></i> Ø³Ø§Ø®Øª Ú©Ø¯
                        Ø¬Ø¯ÛŒØ¯</button>
                </div>
                <div class="text-muted small">Ø¨Ø¹Ø¯ Ø§Ø² ØªØºÛŒÛŒØ± Ú©Ø¯ØŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ú©Ø¯ Ø¬Ø¯ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÙ†Ø¯.</div>
            </div>
        </div>


        <div class="row g-3">

            {{-- Left column main --}}
            <div class="col-lg-8">

                {{-- Stats --}}
                <div class="panel p-3 mb-3 fade-up">
                    <div class="row g-2">
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div>
                                    <div class="text-muted small">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</div>
                                    <div class="fs-4 fw-bold">{{ $class->students->count() }}</div>
                                </div>
                                <div class="stat-icon text-primary"><i class="bi bi-people"></i></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div>
                                    <div class="text-muted small">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³</div>
                                    <div class="fs-4 fw-bold">{{ $class->exams_count ?? 0 }}</div>
                                </div>
                                <div class="stat-icon text-info"
                                    style="background:linear-gradient(135deg,rgba(13,202,240,.16),rgba(13,202,240,.02))"><i
                                        class="bi bi-ui-checks-grid"></i></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div>
                                    <div class="text-muted small">ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯</div>
                                    <div class="fw-bold">{{ $class->created_at?->format('Y/m/d') }}</div>
                                </div>
                                <div class="stat-icon text-success"
                                    style="background:linear-gradient(135deg,rgba(25,135,84,.16),rgba(25,135,84,.02))"><i
                                        class="bi bi-calendar2-check"></i></div>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- Students preview list --}}
                <div class="panel p-3 fade-up">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <div class="fw-bold"><i class="bi bi-person-video3 me-1 text-success"></i> Ø§Ø¹Ø¶Ø§ÛŒ Ú©Ù„Ø§Ø³</div>
                        <a href="{{ route('teacher.classes.students', $class) }}" class="small text-decoration-none">Ù…Ø¯ÛŒØ±ÛŒØª
                            Ú©Ø§Ù…Ù„ <i class="bi bi-arrow-left ms-1"></i></a>
                    </div>

                    @if ($class->students->count())
                        <div class="table-responsive">
                            <table class="table align-middle mb-0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th>
                                        <th>Ø§ÛŒÙ…ÛŒÙ„</th>
                                        <th>ØªØ§Ø±ÛŒØ® Ø¹Ø¶ÙˆÛŒØª</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($class->students->take(8) as $i => $student)
                                        <tr>
                                            <td>{{ $i + 1 }}</td>
                                            <td class="d-flex align-items-center gap-2">
                                                <div class="avatar">{{ mb_substr($student->name ?? 'â€”', 0, 1) }}</div>
                                                <div>
                                                    <div class="fw-semibold">{{ $student->name ?? 'â€”' }}</div>
                                                    <div class="text-muted small">
                                                        {{ $student->username ?? ($student->phone ?? '') }}</div>
                                                </div>
                                            </td>
                                            <td>{{ $student->email ?? 'â€”' }}</td>
                                            <td class="small text-muted">
                                                {{ optional($student->pivot)->created_at?->format('Y/m/d') ?? 'â€”' }}</td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="text-center text-muted small py-4">
                            <div class="fs-3 text-success mb-2"><i class="bi bi-person-x"></i></div>
                            Ù‡Ù†ÙˆØ² Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²ÛŒ Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                        </div>
                    @endif
                </div>
                {{-- Exams of this class   --}}
                <div class="card shadow-sm border-0 mt-3">
                    <div class="card-header bg-white fw-bold d-flex justify-content-between align-items-center">
                        <span>Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³</span>

                        <a href="{{ route('teacher.exams.create', ['classroom_id' => $class->id]) }}"
                            class="btn btn-primary btn-sm">
                            <i class="bi bi-plus-circle"></i> Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³
                        </a>
                    </div>

                    <div class="card-body">
                        @if ($class->exams->count() === 0)
                            <div class="alert alert-warning small mb-0">
                                Ù‡Ù†ÙˆØ² Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ø³Ø§Ø®ØªÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                            </div>
                        @else
                            <div class="table-responsive">
                                <table class="table table-sm align-middle">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Ø¹Ù†ÙˆØ§Ù†</th>
                                            <th>Ù…Ø¯Øª</th>
                                            <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                            <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach ($class->exams as $exam)
                                            <tr>
                                                <td>{{ $loop->iteration }}</td>
                                                <td class="fw-semibold">{{ $exam->title }}</td>
                                                <td class="text-muted small">
                                                    {{ $exam->duration ?? ($exam->duration_minutes ?? 'â€”') }} Ø¯Ù‚ÛŒÙ‚Ù‡
                                                </td>
                                                <td>
                                                    @if ($exam->is_active)
                                                        <span class="badge bg-success">ÙØ¹Ø§Ù„</span>
                                                    @else
                                                        <span class="badge bg-secondary">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                                                    @endif
                                                </td>
                                                <td class="text-end">
                                                    <a href="{{ route('teacher.exams.show', $exam) }}"
                                                        class="btn btn-outline-primary btn-sm">
                                                        Ø¬Ø²Ø¦ÛŒØ§Øª
                                                    </a>
                                                    <a href="{{ route('teacher.exams.edit', $exam) }}"
                                                        class="btn btn-outline-secondary btn-sm">
                                                        ÙˆÛŒØ±Ø§ÛŒØ´
                                                    </a>
                                                </td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>
                            </div>
                        @endif
                    </div>
                </div>

            </div>


            {{-- Right column quick actions --}}
            <div class="col-lg-4">
                <div class="panel p-3 fade-up">
                    <div class="fw-bold mb-2"><i class="bi bi-lightning me-1 text-warning"></i> Ø¹Ù…Ù„ÛŒØ§Øª Ø³Ø±ÛŒØ¹</div>
                    <div class="quick">
                        <a href="{{ route('teacher.classes.edit', $class) }}">
                            <span class="d-flex align-items-center gap-2"><i class="bi bi-pencil-square text-warning"></i>
                                ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</span>
                            <i class="bi bi-chevron-left text-muted"></i>
                        </a>
                        <a href="{{ route('teacher.classes.students', $class) }}">
                            <span class="d-flex align-items-center gap-2"><i class="bi bi-person-plus text-success"></i>
                                Ø§ÙØ²ÙˆØ¯Ù†/Ø­Ø°Ù Ø§Ø¹Ø¶Ø§</span>
                            <i class="bi bi-chevron-left text-muted"></i>
                        </a>
                        <a href="{{ route('teacher.exams.create', ['class_id' => $class->id]) }}">
                            <span class="d-flex align-items-center gap-2"><i class="bi bi-plus-circle text-primary"></i>
                                Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯</span>
                            <i class="bi bi-chevron-left text-muted"></i>
                        </a>
                    </div>

                    <hr>
                    <div class="small text-muted">Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø§Ø² Ú©Ø¯ ÙˆØ±ÙˆØ¯ Ø¨Ø±Ø§ÛŒ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒ.</div>
                </div>

                {{-- Danger zone --}}
                <div class="panel p-3 mt-3 fade-up"
                    style="border:1px solid rgba(220,53,69,.2);background:rgba(220,53,69,.04)">
                    <div class="fw-bold text-danger mb-1"><i class="bi bi-exclamation-triangle me-1"></i> Ù†Ø§Ø­ÛŒÙ‡ Ø®Ø·Ø±</div>
                    <div class="small text-muted mb-2">Ø­Ø°Ù Ú©Ù„Ø§Ø³ Ø¨Ø§Ø¹Ø« Ø­Ø°Ù Ø§Ø±ØªØ¨Ø§Ø· Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø¨Ø§ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
                    <form action="{{ route('teacher.classes.destroy', $class) }}" method="POST">
                        @csrf @method('DELETE')
                        <button class="btn btn-outline-danger w-100" onclick="return confirm('Ú©Ù„Ø§Ø³ Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')">
                            Ø­Ø°Ù Ú©Ù„Ø§Ø³
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const copyBtn = document.getElementById('copyBtn');
                const regenBtn = document.getElementById('regenBtn');
                const joinCodeText = document.getElementById('joinCodeText');

                copyBtn?.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(joinCodeText.textContent.trim());
                        copyBtn.classList.remove('btn-outline-primary');
                        copyBtn.classList.add('btn-success');
                        copyBtn.innerHTML = '<i class="bi bi-check2"></i> Ú©Ù¾ÛŒ Ø´Ø¯';
                        setTimeout(() => {
                            copyBtn.classList.add('btn-outline-primary');
                            copyBtn.classList.remove('btn-success');
                            copyBtn.innerHTML = '<i class="bi bi-clipboard"></i> Ú©Ù¾ÛŒ';
                        }, 1200);
                    } catch (e) {
                        alert('Ú©Ù¾ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯');
                    }
                });

                regenBtn?.addEventListener('click', () => {
                    // ÙÙ‚Ø· UIØ› Ú©Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø±Ø§ Ø¨Ø§ÛŒØ¯ Ø¯Ø± backend Ø¹ÙˆØ¶ Ú©Ù†ÛŒ Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ
                    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                    let c = '';
                    for (let i = 0; i < 6; i++) c += chars[Math.floor(Math.random() * chars.length)];
                    joinCodeText.textContent = c;
                    regenBtn.classList.add('btn-success');
                    regenBtn.innerHTML = '<i class="bi bi-check2"></i> Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯';
                    setTimeout(() => {
                        regenBtn.classList.remove('btn-success');
                        regenBtn.innerHTML = '<i class="bi bi-shuffle"></i> Ø³Ø§Ø®Øª Ú©Ø¯ Ø¬Ø¯ÛŒØ¯';
                    }, 1200);
                });
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 138: students.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/classes/students.blade.php
ğŸ“ SIZE: 14,643 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø§Ø¹Ø¶Ø§ÛŒ Ú©Ù„Ø§Ø³')

@push('styles')
    <style>
        .hero {
            background: radial-gradient(1100px circle at 100% -20%, rgba(13, 110, 253, .16), transparent 60%), radial-gradient(900px circle at 0% 0%, rgba(32, 201, 151, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1.25rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08);
            position: relative;
            overflow: hidden
        }

        .hero-orb {
            position: absolute;
            inset: auto -90px -90px auto;
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(13, 110, 253, .18), transparent 60%);
            filter: blur(2px);
            animation: floaty 7s ease-in-out infinite
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0)
            }

            50% {
                transform: translateY(-10px) translateX(-8px)
            }
        }

        .panel {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: #e9ecef;
            font-weight: 800
        }

        .table thead th {
            background: #f8fafc;
            border-bottom: 0
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 800;
            font-size: .85rem;
            color: #475569
        }

        .badge-soft {
            background: rgba(13, 110, 253, .12);
            color: #0d6efd;
            font-weight: 800;
            border-radius: 999px
        }

        .badge-soft-success {
            background: rgba(25, 135, 84, .12);
            color: #198754;
            font-weight: 800;
            border-radius: 999px
        }

        .empty-wrap {
            background: #fff;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            padding: 2rem;
            text-align: center
        }

        .empty-illus {
            width: 84px;
            height: 84px;
            display: grid;
            place-items: center;
            margin: 0 auto 1rem;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(25, 135, 84, .12), rgba(25, 135, 84, .02));
            font-size: 2rem;
            color: #198754
        }

        .invite-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .copy-btn {
            border-radius: .8rem
        }

        .danger-row {
            background: rgba(220, 53, 69, .05)
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- HERO --}}
        <div class="hero mb-4 fade-up">
            <div class="hero-orb"></div>

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <h1 class="h4 fw-bold mb-1"><i class="bi bi-person-video3 me-1 text-success"></i> Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø¹Ø¶Ø§ÛŒ Ú©Ù„Ø§Ø³</h1>
                    <div class="text-muted">
                        {{ $class->title }}
                        <span class="mx-1">â€¢</span>
                        Ù¾Ø§ÛŒÙ‡ {{ $class->grade ?? 'â€”' }}
                    </div>
                </div>

                <div class="d-flex flex-wrap gap-2">
                    <a href="{{ route('teacher.classes.show', $class) }}"
                        class="btn btn-outline-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-eye"></i> Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ù„Ø§Ø³
                    </a>
                    <a href="{{ route('teacher.classes.edit', $class) }}"
                        class="btn btn-warning d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-pencil-square"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ù„Ø§Ø³
                    </a>
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>
            </div>
        </div>

        @if (session('success'))
            <div class="alert alert-success fade-up"><i class="bi bi-check-circle-fill me-1"></i>{{ session('success') }}
            </div>
        @endif
        @if (session('error'))
            <div class="alert alert-danger fade-up"><i class="bi bi-x-circle-fill me-1"></i>{{ session('error') }}</div>
        @endif

        <div class="row g-3">

            {{-- LEFT: members list --}}
            <div class="col-lg-8">
                <div class="panel p-3 fade-up">

                    <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
                        <div class="fw-bold">
                            <i class="bi bi-people me-1 text-success"></i>
                            Ø§Ø¹Ø¶Ø§ÛŒ ÙØ¹Ù„ÛŒ ({{ $class->students->count() }})
                        </div>

                        <div class="d-flex gap-2">
                            <div class="input-group">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-search"></i></span>
                                <input type="text" id="searchInput" class="form-control input-soft"
                                    placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø§Ø¹Ø¶Ø§...">
                            </div>
                        </div>
                    </div>

                    @if ($class->students->count())
                        <div class="table-responsive">
                            <table class="table align-middle mb-0" id="studentsTable">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th>
                                        <th>Ø§ÛŒÙ…ÛŒÙ„/Ù†Ø§Ù…â€ŒÚ©Ø§Ø±Ø¨Ø±ÛŒ</th>
                                        <th>Ø¹Ø¶ÙˆÛŒØª</th>
                                        <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($class->students as $i => $student)
                                        <tr>
                                            <td>{{ $i + 1 }}</td>
                                            <td class="d-flex align-items-center gap-2">
                                                <div class="avatar">{{ mb_substr($student->name ?? 'â€”', 0, 1) }}</div>
                                                <div>
                                                    <div class="fw-semibold name-col">{{ $student->name ?? 'â€”' }}</div>
                                                    <div class="text-muted small">
                                                        {{ $student->username ?? ($student->phone ?? '') }}</div>
                                                </div>
                                            </td>
                                            <td class="email-col">{{ $student->email ?? 'â€”' }}</td>
                                            <td class="small text-muted">
                                                {{ optional($student->pivot)->created_at?->format('Y/m/d') ?? 'â€”' }}</td>
                                            <td class="text-end">
                                                <form
                                                    action="{{ route('teacher.classes.students.remove', [$class, $student]) }}"
                                                    method="POST" class="d-inline">
                                                    @csrf @method('DELETE')
                                                    <button class="btn btn-sm btn-outline-danger"
                                                        onclick="return confirm('Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø§Ø² Ú©Ù„Ø§Ø³ Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')">
                                                        <i class="bi bi-person-dash"></i>
                                                        Ø­Ø°Ù
                                                    </button>
                                                </form>
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="empty-wrap">
                            <div class="empty-illus"><i class="bi bi-person-x"></i></div>
                            <h6 class="fw-bold mb-1">Ù‡Ù†ÙˆØ² Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²ÛŒ Ø¹Ø¶Ùˆ Ø§ÛŒÙ† Ú©Ù„Ø§Ø³ Ù†ÛŒØ³Øª.</h6>
                            <div class="text-muted small">Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ø¯ ÙˆØ±ÙˆØ¯ ÛŒØ§ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÛŒØŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.</div>
                        </div>
                    @endif
                </div>
            </div>


            {{-- RIGHT: invite + add manual --}}
            <div class="col-lg-4">

                {{-- Invite by code --}}
                <div class="invite-card p-3 mb-3 fade-up">
                    <div class="fw-bold mb-2"><i class="bi bi-key me-1 text-primary"></i> Ø¯Ø¹ÙˆØª Ø¨Ø§ Ú©Ø¯ ÙˆØ±ÙˆØ¯</div>
                    <div class="small text-muted mb-2">Ø§ÛŒÙ† Ú©Ø¯ Ø±Ø§ Ø¯Ø± Ú¯Ø±ÙˆÙ‡ ÛŒØ§ Ú©Ù„Ø§Ø³ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†.</div>
                    <div class="input-group">
                        <input type="text" class="form-control input-soft" id="joinCode"
                            value="{{ $class->join_code }}" readonly>
                        <button class="btn btn-outline-primary copy-btn" id="copyBtn"><i
                                class="bi bi-clipboard"></i></button>
                    </div>
                    <div class="d-flex flex-wrap gap-2 mt-2">
                        <span class="meta-pill"><i class="bi bi-broadcast"></i>
                            {{ $class->is_active ?? 1 ? 'ÙØ¹Ø§Ù„' : 'Ø¢Ø±Ø´ÛŒÙˆ' }}</span>
                        <span class="meta-pill"><i class="bi bi-people"></i> {{ $class->students->count() }} Ø¹Ø¶Ùˆ</span>
                    </div>
                </div>

                {{-- Manual add --}}
                <div class="panel p-3 fade-up">
                    <div class="fw-bold mb-2"><i class="bi bi-person-plus me-1 text-success"></i> Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    </div>
                    <div class="small text-muted mb-2">Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ù†Ø§Ù…â€ŒÚ©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†.</div>

                    <form action="{{ route('teacher.classes.students.add', $class) }}" method="POST" class="d-grid gap-2">
                        @csrf
                        <input type="text" name="student" class="form-control input-soft"
                            placeholder="email / username / phone" required>
                        <button
                            class="btn btn-success d-inline-flex align-items-center justify-content-center gap-2 shadow-sm">
                            <i class="bi bi-plus-circle"></i>
                            Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ú©Ù„Ø§Ø³
                        </button>
                    </form>

                    <hr>
                    <div class="small text-muted">
                        Ø§Ú¯Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ØŒ Ù…Ø·Ù…Ø¦Ù† Ø´Ùˆ Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯.
                    </div>
                </div>

            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Copy join code
                const copyBtn = document.getElementById('copyBtn');
                const joinCode = document.getElementById('joinCode');
                copyBtn?.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(joinCode.value);
                        copyBtn.classList.remove('btn-outline-primary');
                        copyBtn.classList.add('btn-success');
                        copyBtn.innerHTML = '<i class="bi bi-check2"></i>';
                        setTimeout(() => {
                            copyBtn.classList.add('btn-outline-primary');
                            copyBtn.classList.remove('btn-success');
                            copyBtn.innerHTML = '<i class="bi bi-clipboard"></i>';
                        }, 1200);
                    } catch (e) {
                        alert('Ú©Ù¾ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯');
                    }
                });

                // Simple client-side search
                const searchInput = document.getElementById('searchInput');
                const table = document.getElementById('studentsTable');
                searchInput?.addEventListener('input', () => {
                    const q = searchInput.value.toLowerCase();
                    table?.querySelectorAll('tbody tr').forEach(tr => {
                        const name = tr.querySelector('.name-col')?.textContent.toLowerCase() || '';
                        const email = tr.querySelector('.email-col')?.textContent.toLowerCase() || '';
                        tr.style.display = (name.includes(q) || email.includes(q)) ? '' : 'none';
                    });
                });
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 139: create.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/create.blade.php
ğŸ“ SIZE: 33,448 bytes
ğŸ•’ MODIFIED: 2025-12-06 22:23:19
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ - ÙÙ†ÛŒ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ')

@push('styles')
    <link rel="stylesheet" href="{{ asset('assets/css/exam-wizard.css') }}">
@endpush

@section('content')
    <div class="create-exam-container">

        {{-- ========== HEADER ========== --}}
        <div class="page-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>
                        <span
                            style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
                        -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ - ÙÙ†ÛŒ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ
                        </span> ğŸ”§
                    </h1>
                    <p class="header-subtitle">
                        Ø¢Ø²Ù…ÙˆÙ† Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù†Ø±Ø¬ÙˆÛŒØ§Ù† ÙÙ†ÛŒ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.
                    </p>
                </div>
                <a href="{{ route('teacher.exams.index') }}" class="btn-back">
                    <i class="fas fa-arrow-right"></i>
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>
            </div>
        </div>

        {{-- ========== PROGRESS BAR ========== --}}
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 14%;"></div>
            </div>
            <div class="progress-steps">
                @php
                    $steps = [
                        1 => 'Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†',
                        2 => 'Ù¾Ø§ÛŒÙ‡ ØªØ­ØµÛŒÙ„ÛŒ',
                        3 => 'Ø´Ø§Ø®Ù‡ ØªØ­ØµÛŒÙ„ÛŒ',
                        4 => 'Ø²Ù…ÛŒÙ†Ù‡ ÙÙ†ÛŒ',
                        5 => 'Ø²ÛŒØ±Ø±Ø´ØªÙ‡',
                        6 => 'Ø¯Ø³ØªÙ‡ Ø¯Ø±Ø³ÛŒ',
                        7 => 'Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø³',
                        8 => 'Ø¬Ø²Ø¦ÛŒØ§Øª',
                    ];
                @endphp
                @foreach ($steps as $num => $name)
                    <div class="step-item @if ($num == 1) active @endif" data-step="{{ $num }}">
                        <div class="step-number">{{ $num }}</div>
                        <div class="step-name">{{ $name }}</div>
                    </div>
                @endforeach
            </div>
        </div>

        {{-- ========== FORM CONTAINER ========== --}}
        <div class="form-container">
            <form method="POST" action="{{ route('teacher.exams.store') }}" id="examForm"
                onsubmit="return validateFinalStep()">
                @csrf

                {{-- Hidden Inputs (UUID expected by controller) --}}
                <input type="hidden" name="exam_type" id="examType" value="">
                <input type="hidden" name="classroom_id" id="classroomId" value="{{ $selectedClassroomId ?? '' }}">

                <input type="hidden" name="section_id" id="sectionId" value="">
                <input type="hidden" name="grade_id" id="gradeId" value="">
                <input type="hidden" name="branch_id" id="branchId" value="">
                <input type="hidden" name="field_id" id="fieldId" value="">
                <input type="hidden" name="subfield_id" id="subfieldId" value="">
                <input type="hidden" name="subject_type_id" id="subjectTypeId" value="">
                <input type="hidden" name="subjects" id="subjectsInput" value="">

                {{-- ===== STEP 1: EXAM TYPE ===== --}}
                <div class="form-section active" id="step1">
                    <div class="section-header">
                        <div class="section-icon">ğŸ¯</div>
                        <h2 class="section-title">Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                        <p class="section-description">
                            Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÛŒØ§Ø² Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø®ÙˆØ¯ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯.
                        </p>
                    </div>

                    <div class="exam-type-grid">
                        <div class="type-card" data-type="public" onclick="selectExamType('public')">
                            <div class="type-icon">ğŸŒ</div>
                            <div class="type-title">Ø¢Ø²Ù…ÙˆÙ† Ø¹Ù…ÙˆÙ…ÛŒ</div>
                            <p class="type-description">Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª. Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ú©Ù„Ø§Ø³ Ù†Ø¯Ø§Ø±Ø¯.
                            </p>
                            <div class="type-badge">Ø¹Ù…ÙˆÙ…ÛŒ</div>
                        </div>

                        <div class="type-card" data-type="class_single" onclick="selectExamType('class_single')">
                            <div class="type-icon">ğŸ“š</div>
                            <div class="type-title">Ú©Ù„Ø§Ø³ÛŒ ØªÚ© Ø¯Ø±Ø³</div>
                            <p class="type-description">Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú©Ù„Ø§Ø³ Ø®Ø§Øµ Ùˆ ÙÙ‚Ø· ÛŒÚ© Ø¯Ø±Ø³ Ù…Ø´Ø®Øµ.</p>
                            <div class="type-badge">ØªØ®ØµØµÛŒ</div>
                        </div>

                        <div class="type-card" data-type="class_comprehensive"
                            onclick="selectExamType('class_comprehensive')">
                            <div class="type-icon">ğŸ“</div>
                            <div class="type-title">Ú©Ù„Ø§Ø³ÛŒ Ø¬Ø§Ù…Ø¹</div>
                            <p class="type-description">Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú©Ù„Ø§Ø³ Ø´Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ø¯Ø±ÙˆØ³ Ù¾Ø§ÛŒÙ‡.</p>
                            <div class="type-badge">Ø¬Ø§Ù…Ø¹</div>
                        </div>
                    </div>

                    {{-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ø§Ø³ --}}
                    <div id="classroomSelectionSection" style="display: none; margin-top: 30px;">
                        <div class="section-header" style="margin-bottom: 20px;">
                            <h3 class="section-title">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ø§Ø³</h3>
                            <p class="section-description">
                                Ù„Ø·ÙØ§Ù‹ Ú©Ù„Ø§Ø³ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ ÛŒØ§ ÛŒÚ© Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù…Ø§ÛŒÛŒØ¯.
                            </p>
                        </div>

                        <div id="existingClassroomsContainer" class="selection-grid"
                            style="grid-template-columns: repeat(2, 1fr);">
                            <div class="loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                                Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§...
                            </div>
                        </div>

                        <div id="createNewClassContainer" style="margin-top: 25px; text-align: center;">
                            <div class="type-card" onclick="createNewClassroom()"
                                style="max-width: 400px; margin: 0 auto; cursor: pointer;
                            background: linear-gradient(135deg, rgba(0, 206, 209, 0.1), rgba(70, 130, 180, 0.1));">
                                <div class="type-icon">â•</div>
                                <div class="type-title">Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯</div>
                                <p class="type-description">Ù‡Ù†ÙˆØ² Ú©Ù„Ø§Ø³ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯ØŸ ÛŒÚ© Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.</p>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- ===== STEP 2: GRADE (dynamic) ===== --}}
                <div class="form-section" id="step2">
                    <div class="section-header">
                        <div class="section-icon">ğŸ“Š</div>
                        <h2 class="section-title">Ù¾Ø§ÛŒÙ‡ ØªØ­ØµÛŒÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                        <p class="section-description">Ù¾Ø§ÛŒÙ‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ† Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯.</p>
                    </div>
                    <div class="selection-grid" id="gradesGrid" style="grid-template-columns: repeat(3, 1fr);">
                        {{-- ajax --}}
                    </div>
                </div>

                {{-- ===== STEP 3: BRANCH (dynamic) ===== --}}
                <div class="form-section" id="step3">
                    <div class="section-header">
                        <div class="section-icon">ğŸ“</div>
                        <h2 class="section-title">Ø´Ø§Ø®Ù‡ ØªØ­ØµÛŒÙ„ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                    </div>
                    <div class="selection-grid" id="branchesGrid" style="grid-template-columns: repeat(2, 1fr);"></div>
                </div>

                {{-- ===== STEP 4: FIELD (dynamic) ===== --}}
                <div class="form-section" id="step4">
                    <div class="section-header">
                        <div class="section-icon">ğŸ­</div>
                        <h2 class="section-title">Ø²Ù…ÛŒÙ†Ù‡ ÙÙ†ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                    </div>
                    <div class="selection-grid" id="fieldsGrid" style="grid-template-columns: repeat(2, 1fr);"></div>
                </div>

                {{-- ===== STEP 5: SUBFIELD (dynamic) ===== --}}
                <div class="form-section" id="step5">
                    <div class="section-header">
                        <div class="section-icon">ğŸ”¬</div>
                        <h2 class="section-title">Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                    </div>
                    <div class="selection-grid" id="subfieldGrid" style="grid-template-columns: repeat(2, 1fr);"></div>
                </div>

                {{-- ===== STEP 6: SUBJECT TYPE (dynamic) ===== --}}
                <div class="form-section" id="step6">
                    <div class="section-header">
                        <div class="section-icon">ğŸ“š</div>
                        <h2 class="section-title">Ø¯Ø³ØªÙ‡ Ø¯Ø±Ø³ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                    </div>
                    <div class="selection-grid" id="subjectTypesGrid" style="grid-template-columns: repeat(3, 1fr);">
                    </div>

                    <div class="coefficient-settings" id="coefficientSettings"></div>
                </div>

                {{-- ===== STEP 7: SUBJECTS ===== --}}
                <div class="form-section" id="step7">
                    <div class="section-header">
                        <div class="section-icon">ğŸ“–</div>
                        <h2 class="section-title">Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</h2>
                    </div>

                    <div class="subject-selection">
                        <div id="subjectsContainer">
                            <div class="loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                                Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø±ÙˆØ³...
                            </div>
                        </div>
                    </div>
                </div>

                {{-- ===== STEP 8: DETAILS ===== --}}
                <div class="form-section" id="step8">
                    <div class="section-header">
                        <div class="section-icon">ğŸ“‹</div>
                        <h2 class="section-title">Ø¬Ø²Ø¦ÛŒØ§Øª Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯</h2>
                    </div>

                    <div class="preview-section">
                        <div class="preview-title">
                            <i class="fas fa-eye"></i>
                            Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¢Ø²Ù…ÙˆÙ†
                        </div>
                        <div class="preview-grid">
                            <div class="preview-item">
                                <div class="preview-label">Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†</div>
                                <div class="preview-value" id="previewExamType">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ù¾Ø§ÛŒÙ‡ ØªØ­ØµÛŒÙ„ÛŒ</div>
                                <div class="preview-value" id="previewGrade">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ø´Ø§Ø®Ù‡ ØªØ­ØµÛŒÙ„ÛŒ</div>
                                <div class="preview-value" id="previewBranch">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ø²Ù…ÛŒÙ†Ù‡ ÙÙ†ÛŒ</div>
                                <div class="preview-value" id="previewField">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ø²ÛŒØ±Ø±Ø´ØªÙ‡</div>
                                <div class="preview-value" id="previewSubfield">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ø¯Ø³ØªÙ‡ Ø¯Ø±Ø³ÛŒ</div>
                                <div class="preview-value" id="previewSubjectType">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±ÙˆØ³</div>
                                <div class="preview-value" id="previewSubjectsCount">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ú©Ù„ Ø³ÙˆØ§Ù„Ø§Øª</div>
                                <div class="preview-value" id="previewTotalQuestions">--</div>
                            </div>
                        </div>
                    </div>

                    <div class="details-form">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-heading"></i>Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ†</label>
                            <input type="text" name="title" class="form-input" id="examTitle"
                                placeholder="Ù…Ø«Ø§Ù„: Ø¢Ø²Ù…ÙˆÙ† Ú©Ø§Ø±Ú¯Ø§Ù‡ Ø¨Ø±Ù‚ ØµÙ†Ø¹ØªÛŒ - Ù¾Ø§ÛŒÙ‡ ÛŒØ§Ø²Ø¯Ù‡Ù…" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-clock"></i>Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ø¢Ø²Ù…ÙˆÙ† (Ø¯Ù‚ÛŒÙ‚Ù‡)</label>
                            <input type="number" name="duration" class="form-input" value="90" min="15"
                                max="300" step="5" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-align-left"></i>ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¢Ø²Ù…ÙˆÙ†</label>
                            <textarea name="description" class="form-textarea" rows="4" placeholder="Ù‡Ø¯Ù Ø¢Ø²Ù…ÙˆÙ†ØŒ Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø·Ø§Ù„Ø¹Ø§ØªÛŒØŒ Ù†Ú©Ø§Øª ..."></textarea>
                        </div>

                        <div class="form-group">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="is_active" id="activeCheck"
                                    value="1" checked>
                                <label class="form-check-label" for="activeCheck">Ø¢Ø²Ù…ÙˆÙ† Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ ÙØ¹Ø§Ù„ Ø´ÙˆØ¯</label>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- NAV BUTTONS --}}
                <div class="nav-buttons">
                    <button type="button" class="btn-nav btn-prev" onclick="prevStep()" style="display:none;">
                        <i class="fas fa-arrow-right"></i> Ù…Ø±Ø­Ù„Ù‡ Ù‚Ø¨Ù„
                    </button>
                    <button type="button" class="btn-nav btn-next" onclick="nextStep()">
                        Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ <i class="fas fa-arrow-left"></i>
                    </button>
                    <button type="submit" class="btn-nav btn-submit" style="display:none;">
                        <i class="fas fa-check"></i> Ø§ÛŒØ¬Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ†
                    </button>
                </div>

            </form>
        </div>
    </div>
@endsection

@push('scripts')
    {{-- SweetAlert2 --}}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    {{-- âœ… createNewClassroom Ø­ÙØ¸ Ø´Ø¯Ù‡ --}}
    <script>
        async function createNewClassroom() {

            const endpoints = {
                sections: "/dashboard/teacher/exams/data/sections",
                grades: "/dashboard/teacher/exams/data/grades",
                branches: "/dashboard/teacher/exams/data/branches",
                fields: "/dashboard/teacher/exams/data/fields",
                subfields: "/dashboard/teacher/exams/data/subfields",
                subjects: "/dashboard/teacher/exams/data/subjects",
            };

            const getJSON = async (url) => {
                const res = await fetch(url, {
                    headers: {
                        "Accept": "application/json",
                        "X-Requested-With": "XMLHttpRequest"
                    }
                });
                if (!res.ok) throw new Error("network");
                return res.json();
            };

            const opt = (items, placeholder = "-- Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ --", labelKey = "name_fa") => {
                let html = `<option value="">${placeholder}</option>`;
                items.forEach(i => {
                    html +=
                        `<option value="${i.id}" data-name="${i[labelKey] || i.title_fa || ''}">${i[labelKey] || i.title_fa}</option>`;
                });
                return html;
            };

            // Ù‚Ø¯Ù… Ø§ÙˆÙ„: Ù„ÙˆØ¯ Ù…Ù‚Ø·Ø¹
            let sections = [];
            try {
                const s = await getJSON(endpoints.sections);
                sections = s.sections || [];
            } catch (e) {
                Swal.fire("Ø®Ø·Ø§", "Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø§Ø·Ø¹ Ù…Ù…Ú©Ù† Ù†ÛŒØ³Øª", "error");
                return;
            }

            Swal.fire({
                title: 'Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³ Ø¬Ø¯ÛŒØ¯',
                html: `
        <div style="text-align:right">

            <label class="mb-2 fw-bold d-block">ğŸ“ Ù…Ù‚Ø·Ø¹</label>
            <select id="cc_section" class="swal2-input">${opt(sections, "Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯")}</select>

            <label class="mb-2 fw-bold d-block mt-3">ğŸ“Š Ù¾Ø§ÛŒÙ‡</label>
            <select id="cc_grade" class="swal2-input" disabled>
                <option value="">Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">ğŸ§© Ø´Ø§Ø®Ù‡ / Ø±Ø´ØªÙ‡</label>
            <select id="cc_branch" class="swal2-input" disabled>
                <option value="">Ø§Ø¨ØªØ¯Ø§ Ù¾Ø§ÛŒÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">ğŸ­ Ø²Ù…ÛŒÙ†Ù‡ Ø¢Ù…ÙˆØ²Ø´ÛŒ</label>
            <select id="cc_field" class="swal2-input" disabled>
                <option value="">Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">ğŸ”¬ Ø²ÛŒØ±Ø±Ø´ØªÙ‡</label>
            <select id="cc_subfield" class="swal2-input" disabled>
                <option value="">Ø§Ø¨ØªØ¯Ø§ Ø²Ù…ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">ğŸ“– Ø¯Ø±Ø³</label>
            <select id="cc_subject" class="swal2-input" disabled>
                <option value="">Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">ğŸ·ï¸ Ù†Ø§Ù… Ú©Ù„Ø§Ø³</label>
            <input type="text" id="cc_title" class="swal2-input" placeholder="Ù…Ø«Ø§Ù„: Ú©Ù„Ø§Ø³ ÛŒØ§Ø²Ø¯Ù‡Ù… Ø´Ø¨Ú©Ù‡ - Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡">

        </div>
        `,
                showCancelButton: true,
                confirmButtonText: "Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³",
                cancelButtonText: "Ø§Ù†ØµØ±Ø§Ù",
                reverseButtons: true,
                width: 650,
                didOpen: () => {

                    const elSection = document.getElementById("cc_section");
                    const elGrade = document.getElementById("cc_grade");
                    const elBranch = document.getElementById("cc_branch");
                    const elField = document.getElementById("cc_field");
                    const elSubfield = document.getElementById("cc_subfield");
                    const elSubject = document.getElementById("cc_subject");

                    // ====== Ù…Ù‚Ø·Ø¹ â†’ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ ======
                    elSection.addEventListener("change", async () => {
                        const sectionId = elSection.value;

                        elGrade.innerHTML = `<option>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</option>`;
                        elGrade.disabled = true;

                        elBranch.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ù¾Ø§ÛŒÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elBranch.disabled = true;

                        elField.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elField.disabled = true;

                        elSubfield.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²Ù…ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubject.disabled = true;

                        if (!sectionId) {
                            elGrade.innerHTML =
                                `<option value="">Ø§Ø¨ØªØ¯Ø§ Ù…Ù‚Ø·Ø¹ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                            return;
                        }

                        const g = await getJSON(`${endpoints.grades}?section_id=${sectionId}`);
                        elGrade.innerHTML = opt(g.grades || [], "Ù¾Ø§ÛŒÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯");
                        elGrade.disabled = false;
                    });

                    // ====== Ù¾Ø§ÛŒÙ‡ â†’ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ ======
                    elGrade.addEventListener("change", async () => {
                        const sectionId = elSection.value;

                        elBranch.innerHTML = `<option>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</option>`;
                        elBranch.disabled = true;

                        elField.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elField.disabled = true;

                        elSubfield.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²Ù…ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubject.disabled = true;

                        if (!sectionId) return;

                        const b = await getJSON(
                        `${endpoints.branches}?section_id=${sectionId}`);
                        elBranch.innerHTML = opt(b.branches || [], "Ø´Ø§Ø®Ù‡/Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯");
                        elBranch.disabled = false;
                    });

                    // ====== Ø´Ø§Ø®Ù‡ â†’ Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§ ======
                    elBranch.addEventListener("change", async () => {
                        const branchId = elBranch.value;

                        elField.innerHTML = `<option>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</option>`;
                        elField.disabled = true;

                        elSubfield.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²Ù…ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubject.disabled = true;

                        if (!branchId) {
                            elField.innerHTML =
                                `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø´Ø§Ø®Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                            return;
                        }

                        const f = await getJSON(`${endpoints.fields}?branch_id=${branchId}`);
                        elField.innerHTML = opt(f.fields || [], "Ø²Ù…ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯");
                        elField.disabled = false;
                    });

                    // ====== Ø²Ù…ÛŒÙ†Ù‡ â†’ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ ======
                    elField.addEventListener("change", async () => {
                        const fieldId = elField.value;

                        elSubfield.innerHTML = `<option>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                        elSubject.disabled = true;

                        if (!fieldId) {
                            elSubfield.innerHTML =
                                `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²Ù…ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                            return;
                        }

                        const sf = await getJSON(`${endpoints.subfields}?field_id=${fieldId}`);
                        elSubfield.innerHTML = opt(sf.subfields || [],
                        "Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯");
                        elSubfield.disabled = false;
                    });

                    // ====== Ø²ÛŒØ±Ø±Ø´ØªÙ‡ â†’ Ø¯Ø±ÙˆØ³ ======
                    elSubfield.addEventListener("change", async () => {
                        const gradeId = elGrade.value;
                        const branchId = elBranch.value;
                        const fieldId = elField.value;
                        const subfieldId = elSubfield.value;

                        elSubject.innerHTML = `<option>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</option>`;
                        elSubject.disabled = true;

                        if (!subfieldId) {
                            elSubject.innerHTML =
                                `<option value="">Ø§Ø¨ØªØ¯Ø§ Ø²ÛŒØ±Ø±Ø´ØªÙ‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>`;
                            return;
                        }

                        const params = new URLSearchParams();
                        if (gradeId) params.append("grade_id", gradeId);
                        if (branchId) params.append("branch_id", branchId);
                        if (fieldId) params.append("field_id", fieldId);
                        if (subfieldId) params.append("subfield_id", subfieldId);

                        const sub = await getJSON(`${endpoints.subjects}?${params.toString()}`);
                        elSubject.innerHTML = opt(sub.subjects || [], "Ø¯Ø±Ø³ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯",
                            "title_fa");
                        elSubject.disabled = false;
                    });

                },
                preConfirm: () => {
                    const sectionId = document.getElementById("cc_section").value;
                    const gradeId = document.getElementById("cc_grade").value;
                    const branchId = document.getElementById("cc_branch").value;
                    const fieldId = document.getElementById("cc_field").value;
                    const subfieldId = document.getElementById("cc_subfield").value;
                    const subjectId = document.getElementById("cc_subject").value;
                    const title = document.getElementById("cc_title").value.trim();

                    if (!sectionId || !gradeId || !branchId || !fieldId || !subfieldId || !subjectId) {
                        Swal.showValidationMessage("Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ Ù…ÙˆØ§Ø±Ø¯ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.");
                        return false;
                    }
                    if (!title) {
                        Swal.showValidationMessage("Ù†Ø§Ù… Ú©Ù„Ø§Ø³ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª.");
                        return false;
                    }

                    const getName = (selectId) => {
                        const el = document.getElementById(selectId);
                        return el.options[el.selectedIndex]?.dataset?.name || el.options[el
                            .selectedIndex]?.text || "";
                    };

                    return {
                        section_id: sectionId,
                        grade_id: gradeId,
                        branch_id: branchId,
                        field_id: fieldId,
                        subfield_id: subfieldId,
                        subject_id: subjectId,

                        section_name: getName("cc_section"),
                        grade_name: getName("cc_grade"),
                        branch_name: getName("cc_branch"),
                        field_name: getName("cc_field"),
                        subfield_name: getName("cc_subfield"),
                        subject_name: getName("cc_subject"),

                        title
                    };
                }
            }).then(async (result) => {
                if (!result.isConfirmed) return;

                const data = result.value;

                Swal.fire({
                    title: "Ø¯Ø± Ø­Ø§Ù„ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³...",
                    allowOutsideClick: false,
                    didOpen: () => Swal.showLoading()
                });

                try {
                    const fd = new FormData();
                    fd.append("title", data.title);
                    fd.append("section_id", data.section_id);
                    fd.append("grade_id", data.grade_id);
                    fd.append("branch_id", data.branch_id);
                    fd.append("field_id", data.field_id);
                    fd.append("subfield_id", data.subfield_id);
                    fd.append("subject_id", data.subject_id);
                    fd.append("is_active", 1);

                    // metadata Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø®ÙˆØ§Ù†Ø§
                    fd.append("metadata", JSON.stringify({
                        section_name: data.section_name,
                        grade_name: data.grade_name,
                        branch_name: data.branch_name,
                        field_name: data.field_name,
                        subfield_name: data.subfield_name,
                        subject_name: data.subject_name
                    }));

                    const res = await fetch("{{ route('teacher.classes.store') }}", {
                        method: "POST",
                        headers: {
                            "X-CSRF-TOKEN": "{{ csrf_token() }}",
                            "X-Requested-With": "XMLHttpRequest",
                            "Accept": "application/json"
                        },
                        body: fd
                    });

                    const responseData = await res.json();
                    Swal.close();

                    if (responseData.success) {
                        Swal.fire("âœ… Ù…ÙˆÙÙ‚ÛŒØª", "Ú©Ù„Ø§Ø³ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯", "success").then(() => {
                            loadExistingClassrooms();

                            if (responseData.classroom) {
                                setTimeout(() => {
                                    selectClassroom({
                                            target: document.querySelector(
                                                `[data-classroom-id="${responseData.classroom.id}"]`
                                                )
                                        },
                                        responseData.classroom.id,
                                        responseData.classroom.title
                                    );
                                }, 300);
                            }
                        });
                    } else {
                        Swal.fire("âŒ Ø®Ø·Ø§", responseData.message || "Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù„Ø§Ø³", "error");
                    }

                } catch (e) {
                    console.error(e);
                    Swal.close();
                    Swal.fire("âŒ Ø®Ø·Ø§ÛŒ Ø´Ø¨Ú©Ù‡", "Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ± Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ø¯.", "error");
                }
            });
        }
    </script>


    {{-- âœ… exam wizard main js --}}
    <script src="{{ asset('assets/js/exam-wizard.js') }}"></script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 140: edit.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/edit.blade.php
ğŸ“ SIZE: 18,154 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢Ø²Ù…ÙˆÙ†')

@push('styles')
    <style>
        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .step-pill {
            border-radius: 999px;
            padding: .35rem .8rem;
            font-weight: 700;
            font-size: .85rem;
            background: #f8fafc;
            color: #334155;
            display: inline-flex;
            align-items: center;
            gap: .4rem
        }

        .step-pill .dot {
            width: 9px;
            height: 9px;
            border-radius: 50%;
            background: #16a34a;
            box-shadow: 0 0 0 4px rgba(22, 163, 74, .12)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .hint {
            font-size: .85rem;
            color: #6c757d
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .preview-badge {
            background: rgba(16, 185, 129, .12);
            color: #059669;
            font-weight: 800
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }

        .floating-help {
            position: sticky;
            top: 90px
        }

        .danger-zone {
            border: 1px solid rgba(220, 53, 69, .2);
            background: rgba(220, 53, 69, .04);
            border-radius: 1rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2 fade-up">
            <div>
                <h4 class="fw-bold mb-1"><i class="bi bi-pencil-square me-1 text-warning"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢Ø²Ù…ÙˆÙ†</h4>
                <div class="text-muted small">
                    ØªØºÛŒÛŒØ±Ø§Øª Ø±Ø§ Ø§Ø¹Ù…Ø§Ù„ Ú©Ù† Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø²Ù†. ÙˆØ¶Ø¹ÛŒØª Ø§Ù†ØªØ´Ø§Ø± Ùˆ ØªØ§Ø±ÛŒØ® Ø±Ø§ Ù‡Ù… Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¢Ù¾Ø¯ÛŒØª Ú©Ù†ÛŒ.
                </div>
            </div>
            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                    class="btn btn-outline-primary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-question-circle"></i>
                    Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§
                </a>
                <a href="{{ route('teacher.exams.index') }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i>
                    Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
            </div>
        </div>

        {{-- Validation errors --}}
        @if ($errors->any())
            <div class="alert alert-danger fade-up">
                <div class="fw-semibold mb-2"><i class="bi bi-exclamation-triangle-fill me-1"></i> Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ
                    Ú©Ù†:</div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        @if (session('success'))
            <div class="alert alert-success fade-up">
                <i class="bi bi-check-circle-fill me-1"></i>
                {{ session('success') }}
            </div>
        @endif

        <div class="row g-3">

            {{-- Form column --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4 fade-up">

                    <div class="d-flex flex-wrap align-items-center justify-content-between mb-3 gap-2">
                        <div class="step-pill"><span class="dot"></span> ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø²Ù…ÙˆÙ†</div>
                        <div class="hint">* ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø³ØªØ§Ø±Ù‡â€ŒØ¯Ø§Ø± Ø¶Ø±ÙˆØ±ÛŒâ€ŒØ§Ù†Ø¯.</div>
                    </div>

                    <form action="{{ route('teacher.exams.update', $exam) }}" method="POST" class="row g-3" novalidate>
                        @csrf
                        @method('PUT')

                        {{-- Title --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold">Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ† <span class="text-danger">*</span></label>
                            <input type="text" name="title" class="form-control input-soft"
                                placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¢Ø²Ù…ÙˆÙ† ÙØµÙ„ Û± Ø±ÛŒØ§Ø¶ÛŒ" value="{{ old('title', $exam->title) }}" required>
                        </div>
                        {{-- âœ… NEW: Scope + Classroom --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold d-block">Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† <span
                                    class="text-danger">*</span></label>

                            @php $scopeVal = old('scope', $exam->scope ?? 'classroom'); @endphp

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="scope" id="editScopeClassroom"
                                    value="classroom" {{ $scopeVal === 'classroom' ? 'checked' : '' }}>
                                <label class="form-check-label" for="editScopeClassroom">Ú©Ù„Ø§Ø³ÛŒ</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="scope" id="editScopeFree"
                                    value="free" {{ $scopeVal === 'free' ? 'checked' : '' }}>
                                <label class="form-check-label" for="editScopeFree">Ø¢Ø²Ø§Ø¯</label>
                            </div>

                            <div class="hint mt-1">Ø§Ú¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ø¢Ø²Ø§Ø¯ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ù‡ Ù‡ÛŒÚ† Ú©Ù„Ø§Ø³ÛŒ ÙˆØµÙ„ Ù†ÛŒØ³Øª.</div>
                        </div>

                        <div class="col-md-6" id="editClassroomBox">
                            <label class="form-label fw-semibold">Ú©Ù„Ø§Ø³ Ù…Ø±Ø¨ÙˆØ·Ù‡ <span class="text-danger">*</span></label>
                            <select name="classroom_id" class="form-select input-soft">
                                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ø§Ø³...</option>
                                @foreach ($classrooms as $c)
                                    <option value="{{ $c->id }}"
                                        {{ old('classroom_id', $exam->classroom_id) == $c->id ? 'selected' : '' }}>
                                        {{ $c->title ?? $c->name }}
                                    </option>
                                @endforeach
                            </select>
                        </div>

                        {{-- Subject & Level --}}
                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ø¯Ø±Ø³ / Ù…ÙˆØ¶ÙˆØ¹ <span class="text-danger">*</span></label>
                            <select name="subject" class="form-select input-soft" required>
                                <option value="" disabled>Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø³</option>
                                @foreach ($subjects ?? [] as $s)
                                    <option value="{{ $s }}"
                                        {{ old('subject', $exam->subject) === $s ? 'selected' : '' }}>{{ $s }}
                                    </option>
                                @endforeach
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ø³Ø·Ø­ Ø¢Ø²Ù…ÙˆÙ† <span class="text-danger">*</span></label>
                            <select name="level" class="form-select input-soft" required>
                                @php $lvl = old('level', $exam->level); @endphp
                                <option value="taghviyati" {{ $lvl === 'taghviyati' ? 'selected' : '' }}>ØªÙ‚ÙˆÛŒØªÛŒ</option>
                                <option value="konkur" {{ $lvl === 'konkur' ? 'selected' : '' }}>Ú©Ù†Ú©ÙˆØ±</option>
                                <option value="olympiad" {{ $lvl === 'olympiad' ? 'selected' : '' }}>Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</option>
                            </select>
                        </div>

                        {{-- Duration & Start time --}}
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Ù…Ø¯Øª Ø¢Ø²Ù…ÙˆÙ† (Ø¯Ù‚ÛŒÙ‚Ù‡) <span
                                    class="text-danger">*</span></label>
                            <input type="number" min="1" name="duration" class="form-control input-soft"
                                value="{{ old('duration', $exam->duration) }}" required>
                        </div>
                        <div class="col-md-8">
                            <label class="form-label fw-semibold">ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† Ø´Ø±ÙˆØ¹ <span
                                    class="text-danger">*</span></label>
                            <input type="datetime-local" name="start_at" class="form-control input-soft"
                                value="{{ old('start_at', optional($exam->start_at)->format('Y-m-d\TH:i')) }}" required>
                            <div class="hint mt-1">ØªØ§Ø±ÛŒØ®/Ø²Ù…Ø§Ù† Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†.</div>
                        </div>

                        {{-- Description --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
                            <textarea name="description" rows="4" class="form-control input-soft"
                                placeholder="ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©ÙˆØªØ§Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù‡Ø¯Ù Ø¢Ø²Ù…ÙˆÙ†...">{{ old('description', $exam->description) }}</textarea>
                        </div>

                        {{-- Publish toggle --}}
                        <div class="col-12">
                            @php $pub = old('is_published', $exam->is_published); @endphp
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="publishSwitch"
                                    name="is_published" value="1" {{ $pub ? 'checked' : '' }}>
                                <label class="form-check-label fw-semibold" for="publishSwitch">Ø¢Ø²Ù…ÙˆÙ† Ù…Ù†ØªØ´Ø± Ø¨Ø§Ø´Ø¯</label>
                            </div>
                            <div class="hint mt-1">Ø¯Ø± ØµÙˆØ±Øª Ø§Ù†ØªØ´Ø§Ø±ØŒ Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ù‡Ø§ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
                        </div>

                        {{-- Actions --}}
                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="submit" class="btn btn-primary btn-wizard shadow-sm">
                                <i class="bi bi-save2"></i>
                                Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                            </button>
                            <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                                class="btn btn-outline-primary btn-wizard shadow-sm">
                                <i class="bi bi-question-circle"></i>
                                Ø±ÙØªÙ† Ø¨Ù‡ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§
                            </a>
                        </div>

                    </form>

                    {{-- Danger zone (optional delete here too) --}}
                    <div class="danger-zone p-3 mt-4">
                        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                            <div>
                                <div class="fw-bold text-danger"><i class="bi bi-trash3 me-1"></i> Ø­Ø°Ù Ø¢Ø²Ù…ÙˆÙ†</div>
                                <div class="small text-muted">Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ø¨Ø§Ø²Ú¯Ø´Øª Ø§Ø³Øª.</div>
                            </div>
                            <form action="{{ route('teacher.exams.destroy', $exam) }}" method="POST">
                                @csrf @method('DELETE')
                                <button class="btn btn-outline-danger btn-wizard"
                                    onclick="return confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø¢Ø²Ù…ÙˆÙ† Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')">
                                    Ø­Ø°Ù Ù‚Ø·Ø¹ÛŒ
                                </button>
                            </form>
                        </div>
                    </div>

                </div>
            </div>

            {{-- Preview / tips column --}}
            <div class="col-lg-4">
                <div class="floating-help fade-up">

                    <div class="preview-card p-3 mb-3">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <div class="fw-bold"><i class="bi bi-eye me-1"></i> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø³Ø±ÛŒØ¹</div>
                            <span class="badge preview-badge">Live</span>
                        </div>
                        <div class="small text-muted mb-2">Ø¨Ø§ ØªØºÛŒÛŒØ± ÙØ±Ù…ØŒ Ø§ÛŒÙ† Ú©Ø§Ø±Øª Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>

                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold" id="pvTitle">{{ $exam->title }}</div>
                            <div class="text-muted small mt-1" id="pvMeta">{{ $exam->level }} â€¢ {{ $exam->subject }}
                                â€¢ {{ $exam->duration }} Ø¯Ù‚ÛŒÙ‚Ù‡</div>
                            <div class="text-muted small mt-2" id="pvStart">Ø´Ø±ÙˆØ¹:
                                {{ optional($exam->start_at)->format('Y/m/d H:i') }}</div>
                            <div class="mt-2">
                                @if ($exam->is_published)
                                    <span class="badge bg-success"><i class="bi bi-broadcast-pin me-1"></i> Ù…Ù†ØªØ´Ø±
                                        Ø´Ø¯Ù‡</span>
                                @else
                                    <span class="badge bg-secondary"><i class="bi bi-pencil-square me-1"></i>
                                        Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³</span>
                                @endif
                            </div>
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ù‡Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>Ù‚Ø¨Ù„ Ø§Ø² Ø§Ù†ØªØ´Ø§Ø±ØŒ Ø­Ø¯Ø§Ù‚Ù„ Ûµ Ø³Ø¤Ø§Ù„ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.</li>
                            <li>Ø§Ú¯Ø± Ø²Ù…Ø§Ù† Ø¨Ø±Ú¯Ø²Ø§Ø±ÛŒ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯ØŒ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ø¨ÙØ±Ø³Øª.</li>
                            <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¨Ø¹Ø¯Ø§Ù‹ Ù…Ø¯Øª Ùˆ Ø³Ø·Ø­ Ø±Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ù†ÛŒ.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const title = document.querySelector('input[name="title"]');
                const subject = document.querySelector('select[name="subject"]');
                const level = document.querySelector('select[name="level"]');
                const duration = document.querySelector('input[name="duration"]');
                const startAt = document.querySelector('input[name="start_at"]');

                const pvTitle = document.getElementById('pvTitle');
                const pvMeta = document.getElementById('pvMeta');
                const pvStart = document.getElementById('pvStart');

                function updatePreview() {
                    if (pvTitle) pvTitle.textContent = title?.value?.trim() || 'Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ†';
                    const s = subject?.value || 'Ø¯Ø±Ø³';
                    const l = level?.value || 'Ø³Ø·Ø­';
                    const d = duration?.value || 'â€”';
                    if (pvMeta) pvMeta.textContent = `${l} â€¢ ${s} â€¢ ${d} Ø¯Ù‚ÛŒÙ‚Ù‡`;
                    if (pvStart) pvStart.textContent = startAt?.value ? `Ø´Ø±ÙˆØ¹: ${startAt.value.replace('T',' ')}` :
                        'Ø²Ù…Ø§Ù† Ø´Ø±ÙˆØ¹';
                }

                [title, subject, level, duration, startAt].forEach(el => el?.addEventListener('input', updatePreview));
                updatePreview();
            });
            // âœ… NEW: toggle classroom box in edit
            const editScopeFree = document.getElementById('editScopeFree');
            const editScopeClassroom = document.getElementById('editScopeClassroom');
            const editClassroomBox = document.getElementById('editClassroomBox');
            const editClassroomSelect = editClassroomBox?.querySelector('select[name="classroom_id"]');

            function toggleEditClassroom() {
                const isFree = editScopeFree?.checked;
                if (editClassroomBox) editClassroomBox.style.display = isFree ? 'none' : 'block';
                if (editClassroomSelect) editClassroomSelect.required = !isFree;
            }

            editScopeFree?.addEventListener('change', toggleEditClassroom);
            editScopeClassroom?.addEventListener('change', toggleEditClassroom);
            toggleEditClassroom();
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 141: index.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/index.blade.php
ğŸ“ SIZE: 30,791 bytes
ğŸ•’ MODIFIED: 2025-12-06 22:02:49
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§')

@push('styles')
    <style>
        /* ØªÙ… Ú©Ø§Ù…Ù„ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .exams-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* ========== HEADER ========== */
        .page-header {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px 30px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 30px;
            border: 2px solid rgba(123, 104, 238, 0.08);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .header-title h1 {
            font-weight: 900;
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-title h1::before {
            content: '';
            width: 8px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .header-subtitle {
            color: var(--gray);
            font-size: 1.05rem;
            line-height: 1.8;
            max-width: 600px;
        }

        .btn-create-exam {
            padding: 15px 28px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient-1);
            color: white;
            border: none;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-create-exam:active {
            transform: scale(0.97);
        }

        .btn-create-exam:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
        }

        .btn-create-exam::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-create-exam:hover::before {
            left: 100%;
        }

        /* ========== FILTER SECTION ========== */
        .filter-section {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px 30px;
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            border: 2px solid rgba(123, 104, 238, 0.08);
            animation: slideInLeft 0.5s ease-out;
        }

        .filter-title {
            font-weight: 900;
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .filter-form {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: end;
        }

        @media (max-width: 768px) {
            .filter-form {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: block;
        }

        .form-select-custom {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 18px center;
            background-size: 16px;
            padding-left: 45px;
        }

        .form-select-custom:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .btn-filter {
            padding: 14px 28px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 1rem;
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            white-space: nowrap;
        }

        .btn-filter:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* ========== EXAMS TABLE ========== */
        .exams-table-container {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(123, 104, 238, 0.08);
            overflow: hidden;
            animation: fadeIn 0.6s ease-out;
            animation-delay: 0.1s;
            animation-fill-mode: both;
        }

        .table-header {
            padding: 25px 30px;
            border-bottom: 2px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0;
        }

        .table-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .exams-count {
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .exams-table {
            width: 100%;
            border-collapse: collapse;
        }

        .exams-table thead {
            background: linear-gradient(90deg, rgba(123, 104, 238, 0.05), rgba(255, 107, 157, 0.05));
        }

        .exams-table th {
            padding: 20px 25px;
            text-align: right;
            font-weight: 900;
            color: var(--dark);
            font-size: 0.95rem;
            border-bottom: 2px solid var(--light-gray);
            white-space: nowrap;
        }

        .exams-table tbody tr {
            transition: all 0.3s;
            border-bottom: 1px solid var(--light-gray);
        }

        .exams-table tbody tr:last-child {
            border-bottom: none;
        }

        .exams-table tbody tr:hover {
            background: var(--primary-light);
            transform: translateX(-5px);
        }

        .exams-table td {
            padding: 20px 25px;
            vertical-align: middle;
            font-weight: 700;
            color: var(--dark);
        }

        .exam-title-cell {
            font-weight: 900 !important;
            font-size: 1.05rem;
        }

        .exam-classroom {
            color: var(--gray);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .exam-duration {
            color: var(--dark);
            font-weight: 900;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .exam-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 900;
            white-space: nowrap;
        }

        .status-active {
            background: rgba(0, 212, 170, 0.15);
            color: #00D4AA;
        }

        .status-inactive {
            background: rgba(138, 141, 155, 0.15);
            color: var(--gray);
        }

        .exam-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-action {
            padding: 10px 18px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            transition: all 0.3s;
            border: 2px solid transparent;
            min-width: 90px;
            justify-content: center;
        }

        .btn-action:active {
            transform: scale(0.95);
        }

        .btn-details {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-details:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        .btn-edit {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-edit:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        /* ========== EMPTY STATE ========== */
        .empty-state {
            padding: 60px 30px;
            text-align: center;
            animation: fadeIn 0.6s ease-out;
        }

        .empty-icon {
            font-size: 5rem;
            color: var(--light-gray);
            margin-bottom: 25px;
            opacity: 0.7;
        }

        .empty-title {
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-description {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        /* ========== ALERTS ========== */
        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border: 2px solid rgba(0, 212, 170, 0.2);
            border-radius: var(--radius-lg);
            padding: 20px 25px;
            color: var(--dark);
            font-weight: 700;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
            position: relative;
            overflow: hidden;
        }

        .alert-success-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.08), transparent);
            border-radius: 0 var(--radius-lg) 0 0;
        }

        .alert-success-custom i {
            color: #00D4AA;
            font-size: 1.3rem;
            margin-left: 10px;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 992px) {
            .exams-table {
                display: block;
                overflow-x: auto;
            }

            .exams-table thead {
                display: none;
            }

            .exams-table tbody tr {
                display: block;
                margin-bottom: 20px;
                border: 2px solid var(--light-gray);
                border-radius: var(--radius-lg);
                padding: 20px;
            }

            .exams-table td {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 12px 0;
                border-bottom: 1px dashed var(--light-gray);
            }

            .exams-table td:last-child {
                border-bottom: none;
                padding-top: 20px;
                justify-content: flex-end;
            }

            .exams-table td::before {
                content: attr(data-label);
                font-weight: 900;
                color: var(--gray);
                font-size: 0.9rem;
                min-width: 100px;
                text-align: left;
            }

            .exam-actions {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .exams-container {
                padding: 15px 10px 60px;
            }

            .page-header {
                padding: 20px;
            }

            .header-title h1 {
                font-size: 1.5rem;
            }

            .btn-create-exam {
                width: 100%;
                justify-content: center;
            }

            .filter-section {
                padding: 20px;
            }

            .table-header {
                padding: 20px;
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                font-size: 4rem;
            }
        }

        @media (max-width: 480px) {
            .btn-action {
                min-width: auto;
                padding: 8px 12px;
                font-size: 0.8rem;
            }

            .exam-status {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .btn-create-exam,
        .btn-filter,
        .btn-action {
            min-height: 44px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="exams-container">
        {{-- ========== PAGE HEADER ========== --}}
        <div class="page-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>
                        <span
                            style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ù†
                        </span>
                        ğŸ“
                    </h1>
                    <p class="header-subtitle">
                        Ù‡Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§ Ø¯Ø± ÛŒÚ© Ù†Ú¯Ø§Ù‡.
                        Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØªØŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ùˆ Ù†ØªØ§ÛŒØ¬ Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
                    </p>
                </div>

                <a href="{{ route('teacher.exams.create') }}" class="btn-create-exam">
                    <i class="fas fa-plus-circle"></i>
                    Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯
                </a>
            </div>
        </div>

        {{-- ========== SUCCESS ALERT ========== --}}
        @if (session('success'))
            <div class="alert-success-custom d-flex align-items-center">
                <i class="fas fa-check-circle"></i>
                <div class="flex-grow-1">{{ session('success') }}</div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        {{-- ========== FILTER SECTION ========== --}}
        <div class="filter-section">
            <h3 class="filter-title">
                <i class="fas fa-filter"></i>
                ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
            </h3>

            <form method="GET" class="filter-form">
                <div class="form-group">
                    <label class="form-label">ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©Ù„Ø§Ø³</label>
                    <select name="classroom_id" class="form-select-custom">
                        <option value="">Ù‡Ù…Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</option>
                        @foreach ($classrooms as $c)
                            <option value="{{ $c->id }}" @selected(request('classroom_id') == $c->id)>
                                {{ $c->title ?? $c->name }}
                            </option>
                        @endforeach
                    </select>
                </div>

                <button type="submit" class="btn-filter">
                    <i class="fas fa-sliders-h"></i>
                    Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±
                </button>
            </form>
        </div>

        {{-- ========== EXAMS TABLE ========== --}}
        @if ($exams->count() === 0)
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <h3 class="empty-title">Ù‡Ù†ÙˆØ² Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ù†Ø³Ø§Ø®ØªÙ‡â€ŒØ§ÛŒØ¯!</h3>
                <p class="empty-description">
                    Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø§ÙˆÙ„ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.
                    Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„ÙÛŒ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø´Ø§Ù…Ù„ ØªØ³ØªÛŒØŒ ØªØ´Ø±ÛŒØ­ÛŒ Ùˆ ØªØ±Ú©ÛŒØ¨ÛŒ Ø¨Ø³Ø§Ø²ÛŒØ¯.
                </p>
                <a href="{{ route('teacher.exams.create') }}" class="btn-create-exam">
                    <i class="fas fa-plus-circle"></i>
                    Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†
                </a>
            </div>
        @else
            <div class="exams-table-container">
                <div class="table-header">
                    <h3 class="table-title">
                        <i class="fas fa-list-check"></i>
                        Ù„ÛŒØ³Øª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                    </h3>
                    <div class="exams-count">
                        <i class="fas fa-hashtag"></i>
                        {{ $exams->count() }} Ø¢Ø²Ù…ÙˆÙ†
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="exams-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ†</th>
                                <th>Ú©Ù„Ø§Ø³</th>
                                <th>Ù…Ø¯Øª Ø²Ù…Ø§Ù†</th>
                                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($exams as $exam)
                                <tr>
                                    <td data-label="Ø´Ù…Ø§Ø±Ù‡">
                                        <span style="color: var(--primary); font-weight: 900; font-size: 1.1rem;">
                                            {{ $loop->iteration }}
                                        </span>
                                    </td>
                                    <td data-label="Ø¹Ù†ÙˆØ§Ù† Ø¢Ø²Ù…ÙˆÙ†" class="exam-title-cell">
                                        {{ $exam->title }}
                                    </td>
                                    <td data-label="Ú©Ù„Ø§Ø³">
                                        <div class="exam-classroom">
                                            <i class="fas fa-people-group"></i>
                                            {{ $exam->classroom->title ?? ($exam->classroom->name ?? 'â€”') }}
                                        </div>
                                    </td>
                                    <td data-label="Ù…Ø¯Øª Ø²Ù…Ø§Ù†">
                                        <div class="exam-duration">
                                            <i class="fas fa-clock"></i>
                                            {{ $exam->duration ?? ($exam->duration_minutes ?? 'â€”') }} Ø¯Ù‚ÛŒÙ‚Ù‡
                                        </div>
                                    </td>
                                    <td data-label="ÙˆØ¶Ø¹ÛŒØª">
                                        @if ($exam->is_active)
                                            <span class="exam-status status-active">
                                                <i class="fas fa-check-circle"></i>
                                                ÙØ¹Ø§Ù„
                                            </span>
                                        @else
                                            <span class="exam-status status-inactive">
                                                <i class="fas fa-pause-circle"></i>
                                                ØºÛŒØ±ÙØ¹Ø§Ù„
                                            </span>
                                        @endif
                                    </td>
                                    <td data-label="Ø¹Ù…Ù„ÛŒØ§Øª">
                                        <div class="exam-actions">
                                            <a href="{{ route('teacher.exams.show', $exam) }}"
                                                class="btn-action btn-details">
                                                <i class="fas fa-eye"></i>
                                                Ø¬Ø²Ø¦ÛŒØ§Øª
                                            </a>
                                            <a href="{{ route('teacher.exams.edit', $exam) }}" class="btn-action btn-edit">
                                                <i class="fas fa-edit"></i>
                                                ÙˆÛŒØ±Ø§ÛŒØ´
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>
        @endif
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-create-exam, .btn-filter, .btn-action, .exams-table tbody tr');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // Ø§ÙÚ©Øª hover Ø¨Ø±Ø§ÛŒ Ø³Ø·Ø±Ù‡Ø§ÛŒ Ø¬Ø¯ÙˆÙ„
            const tableRows = document.querySelectorAll('.exams-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                });

                // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø³Ø·Ø± Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª
                const detailsBtn = row.querySelector('.btn-details');
                if (detailsBtn) {
                    row.addEventListener('click', function(e) {
                        if (!e.target.closest('.btn-action')) {
                            window.location.href = detailsBtn.href;
                        }
                    });
                }
            });

            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
            const animateElements = () => {
                const elements = document.querySelectorAll('.exams-table tbody tr');
                elements.forEach((el, i) => {
                    el.style.animationDelay = `${i * 0.05}s`;
                    el.style.animation = 'fadeIn 0.5s ease-out forwards';
                    el.style.opacity = '0';
                });
            };

            // Ø§Ø¬Ø±Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ ØµÙØ­Ù‡
            setTimeout(animateElements, 300);

            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙÛŒÙ„ØªØ±
            const filterForm = document.querySelector('.filter-form');
            if (filterForm) {
                filterForm.addEventListener('submit', function(e) {
                    const select = this.querySelector('select[name="classroom_id"]');
                    if (select.value) {
                        // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ
                        const submitBtn = this.querySelector('button[type="submit"]');
                        const originalText = submitBtn.innerHTML;
                        submitBtn.innerHTML =
                            '<i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±...';
                        submitBtn.disabled = true;

                        setTimeout(() => {
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                        }, 1000);
                    }
                });
            }

            // Ù†Ù…Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ÙÛŒÙ„ØªØ± Ø´Ø¯Ù‡
            const updateFilterCount = () => {
                const selectedClass = document.querySelector('select[name="classroom_id"]').value;
                const examCount = document.querySelectorAll('.exams-table tbody tr').length;
                const countElement = document.querySelector('.exams-count');

                if (countElement && selectedClass) {
                    const className = document.querySelector(`option[value="${selectedClass}"]`).textContent;
                    countElement.innerHTML = `<i class="fas fa-filter"></i> ${examCount} Ø¢Ø²Ù…ÙˆÙ† (${className})`;
                }
            };

            // Ø±ÙˆÛŒØ¯Ø§Ø¯ ØªØºÛŒÛŒØ± ÙÛŒÙ„ØªØ±
            const classSelect = document.querySelector('select[name="classroom_id"]');
            if (classSelect) {
                classSelect.addEventListener('change', updateFilterCount);
            }
        });

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
        const style = document.createElement('style');
        style.textContent = `
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 142: question-edit.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/question-edit.blade.php
ğŸ“ SIZE: 21,899 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÙˆÛŒØ±Ø§ÛŒØ´ Ø³Ø¤Ø§Ù„')

@push('styles')
    <style>
        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .option-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1rem;
            background: #fff
        }

        .option-row {
            background: #f8fafc;
            border-radius: .8rem;
            padding: .55rem .7rem;
            display: flex;
            align-items: center;
            gap: .6rem
        }

        .option-tag {
            width: 30px;
            height: 30px;
            border-radius: .6rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e5e7eb;
            font-weight: 800
        }

        .correct-glow {
            background: rgba(16, 185, 129, .08);
            border-color: rgba(16, 185, 129, .6)
        }

        .hint {
            font-size: .85rem;
            color: #6c757d
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-pencil-square me-1 text-primary"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ø³Ø¤Ø§Ù„
                </h4>
                <div class="text-muted small">
                    Ø¢Ø²Ù…ÙˆÙ†: <span class="fw-semibold">{{ $exam->title }}</span>
                    <span class="mx-1">â€¢</span>

                    {{-- subject ÙÙ‚Ø· Ø§Ú¯Ø± Ù„ÙˆØ¯ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ --}}
                    @if ($exam->relationLoaded('subject') && $exam->subject)
                        {{ $exam->subject->title ?? ($exam->subject->name ?? 'â€”') }}
                    @else
                        â€”
                    @endif
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
            </div>
        </div>

        {{-- Errors --}}
        @if ($errors->any())
            <div class="alert alert-danger">
                <div class="fw-semibold mb-2">
                    <i class="bi bi-exclamation-triangle-fill me-1"></i>
                    Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†:
                </div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3">
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4">

                    <form action="{{ route('teacher.exams.questions.update', [$exam, $question]) }}" method="POST"
                        class="row g-3" novalidate>
                        @csrf
                        @method('PUT')

                        {{-- Question text --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold">Ù…ØªÙ† Ø³Ø¤Ø§Ù„ <span class="text-danger">*</span></label>
                            <textarea name="question" rows="4" class="form-control input-soft" required placeholder="Ø³Ø¤Ø§Ù„ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³...">{{ old('question', $question->question) }}</textarea>
                        </div>

                        {{-- Score + Explanation --}}
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">Ø§Ù…ØªÛŒØ§Ø²</label>
                            <input type="number" name="score" min="1" class="form-control input-soft"
                                value="{{ old('score', $question->score ?? 1) }}">
                        </div>

                        <div class="col-md-8">
                            <label class="form-label fw-semibold">ØªÙˆØ¶ÛŒØ­/Ø±Ø§Ù‡Ù†Ù…Ø§ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                            <input type="text" name="explanation" class="form-control input-soft"
                                value="{{ old('explanation', $question->explanation) }}"
                                placeholder="Ù…Ø«Ù„Ø§Ù‹ Ù†Ú©ØªÙ‡ ÛŒØ§ ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡...">
                        </div>

                        {{-- Type --}}
                        <div class="col-md-8">
                            <label class="form-label fw-semibold">Ù†ÙˆØ¹ Ø³Ø¤Ø§Ù„ <span class="text-danger">*</span></label>
                            <select name="type" class="form-select input-soft" id="typeSelect" required>
                                @php $type = old('type', $question->type ?? 'mcq'); @endphp
                                <option value="mcq" {{ $type === 'mcq' ? 'selected' : '' }}>Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ</option>
                                <option value="true_false" {{ $type === 'true_false' ? 'selected' : '' }}>ØµØ­ÛŒØ­/ØºÙ„Ø·</option>
                                <option value="fill_blank" {{ $type === 'fill_blank' ? 'selected' : '' }}>Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ</option>
                                <option value="essay" {{ $type === 'essay' ? 'selected' : '' }}>ØªØ´Ø±ÛŒØ­ÛŒ</option>
                            </select>
                            <div class="hint mt-1">Ø¨Ø§ ØªØºÛŒÛŒØ± Ù†ÙˆØ¹ØŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.</div>
                        </div>

                        {{-- Options (MCQ + TrueFalse) --}}
                        <div class="col-12" id="optionsBlock" style="display:none">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="fw-bold"><i class="bi bi-list-check me-1"></i> Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</div>
                                <button type="button" id="addOptionBtn" class="btn btn-outline-primary btn-sm btn-wizard">
                                    <i class="bi bi-plus"></i> Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø²ÛŒÙ†Ù‡
                                </button>
                            </div>

                            @php
                                $legacyOptions = [
                                    old('options.0', $question->option_a),
                                    old('options.1', $question->option_b),
                                    old('options.2', $question->option_c),
                                    old('options.3', $question->option_d),
                                ];
                                $legacyCorrectMap = ['a' => 0, 'b' => 1, 'c' => 2, 'd' => 3];
                                $legacyCorrect = old(
                                    'correct_answer',
                                    $legacyCorrectMap[$question->correct_option] ?? null,
                                );
                            @endphp

                            <div id="optionsWrap" class="d-grid gap-2">
                                @foreach ($legacyOptions as $i => $opt)
                                    <div class="option-card p-2" data-idx="{{ $i }}">
                                        <div class="option-row">
                                            <div class="option-tag">{{ chr(65 + $i) }}</div>
                                            <input type="text" name="options[{{ $i }}]"
                                                class="form-control border-0 bg-transparent" value="{{ $opt ?? '' }}"
                                                placeholder="Ù…ØªÙ† Ú¯Ø²ÛŒÙ†Ù‡">
                                            <div class="form-check ms-auto">
                                                <input class="form-check-input correct-radio" type="radio"
                                                    name="correct_answer" value="{{ $i }}"
                                                    {{ (string) $legacyCorrect === (string) $i ? 'checked' : '' }}>
                                                <label class="form-check-label small">ØµØ­ÛŒØ­</label>
                                            </div>
                                            <button type="button" class="btn btn-sm btn-outline-danger remove-option">
                                                <i class="bi bi-x"></i>
                                            </button>
                                        </div>
                                    </div>
                                @endforeach
                            </div>

                            {{-- Legacy hidden fields for controller --}}
                            <input type="hidden" name="option_a" id="legacyA">
                            <input type="hidden" name="option_b" id="legacyB">
                            <input type="hidden" name="option_c" id="legacyC">
                            <input type="hidden" name="option_d" id="legacyD">
                            <input type="hidden" name="correct_option" id="legacyCorrect">

                            <div class="hint mt-2">
                                Ø¨Ø±Ø§ÛŒ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø­Ø¯Ø§Ù‚Ù„ Û´ Ú¯Ø²ÛŒÙ†Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª. Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­ Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†.
                            </div>

                            {{-- True/False --}}
                            <div id="trueFalseBox" class="mt-3" style="display:none;">
                                <label class="form-label fw-semibold">Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­: <span
                                        class="text-danger">*</span></label>
                                <div class="d-flex gap-3">
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="1"
                                            {{ old('correct_tf', (string) ($question->correct_tf ?? '')) === '1' ? 'checked' : '' }}>
                                        <span class="form-check-label">ØµØ­ÛŒØ­</span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="0"
                                            {{ old('correct_tf', (string) ($question->correct_tf ?? '')) === '0' ? 'checked' : '' }}>
                                        <span class="form-check-label">ØºÙ„Ø·</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        {{-- Fill blank --}}
                        <div class="col-12" id="blankBlock" style="display:none">
                            <label class="form-label fw-semibold">Ù¾Ø§Ø³Ø®(Ù‡Ø§ÛŒ) Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ <span
                                    class="text-danger">*</span></label>
                            <textarea name="correct_blanks" rows="3" class="form-control input-soft"
                                placeholder="Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ú©Ø§Ù…Ø§ ÛŒØ§ Ø®Ø· Ø¬Ø¯ÛŒØ¯ Ø¬Ø¯Ø§ Ú©Ù†...">{{ old('correct_blanks', is_array($question->correct_answer) ? implode(', ', $question->correct_answer) : $question->correct_answer ?? '') }}</textarea>
                        </div>

                        {{-- Essay --}}
                        <div class="col-12" id="descBlock" style="display:none">
                            <label class="form-label fw-semibold">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾Ø§Ø³Ø® ØªØ´Ø±ÛŒØ­ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                            <textarea name="descriptive_answer" rows="4" class="form-control input-soft"
                                placeholder="Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾Ø§Ø³Ø® ÛŒØ§ Ù†Ú©Ø§Øª Ù…Ù‡Ù…...">{{ old('descriptive_answer', $question->explanation) }}</textarea>
                        </div>

                        {{-- Submit --}}
                        <div class="col-12 d-flex gap-2 mt-2">
                            <button type="submit" class="btn btn-success btn-wizard shadow-sm">
                                <i class="bi bi-check2-circle"></i> Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                            </button>
                        </div>

                    </form>
                </div>
            </div>

            {{-- Right side preview --}}
            <div class="col-lg-4">
                <div class="preview-card p-3">
                    <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</div>
                    <div class="border rounded-3 p-3 bg-white">
                        <div class="fw-semibold" id="pvQuestion">{{ $question->question }}</div>
                        <div class="text-muted small mt-2" id="pvType">Ù†ÙˆØ¹: {{ $question->type }}</div>
                        <div class="text-muted small mt-1" id="pvScore">Ø§Ù…ØªÛŒØ§Ø²: {{ $question->score ?? 1 }}</div>
                        <div class="mt-2" id="pvOptions"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const typeSel = document.getElementById('typeSelect');
            const optionsBlock = document.getElementById('optionsBlock');
            const descBlock = document.getElementById('descBlock');
            const blankBlock = document.getElementById('blankBlock');
            const optionsWrap = document.getElementById('optionsWrap');
            const addOptionBtn = document.getElementById('addOptionBtn');
            const trueFalseBox = document.getElementById('trueFalseBox');

            const legacyA = document.getElementById('legacyA');
            const legacyB = document.getElementById('legacyB');
            const legacyC = document.getElementById('legacyC');
            const legacyD = document.getElementById('legacyD');
            const legacyCorrect = document.getElementById('legacyCorrect');

            const pvQuestion = document.getElementById('pvQuestion');
            const pvType = document.getElementById('pvType');
            const pvScore = document.getElementById('pvScore');
            const pvOptions = document.getElementById('pvOptions');

            const qText = document.querySelector('textarea[name="question"]');
            const score = document.querySelector('input[name="score"]');

            const explanationInput = document.querySelector('input[name="explanation"]');
            const descriptiveInput = document.querySelector('textarea[name="descriptive_answer"]');

            function addOption(value = '') {
                const idx = optionsWrap.querySelectorAll('.option-card').length;
                const div = document.createElement('div');
                div.className = 'option-card p-2';
                div.innerHTML = `
        <div class="option-row">
            <div class="option-tag">${String.fromCharCode(65+idx)}</div>
            <input type="text" name="options[${idx}]" class="form-control border-0 bg-transparent" value="${value}" placeholder="Ù…ØªÙ† Ú¯Ø²ÛŒÙ†Ù‡">
            <div class="form-check ms-auto">
                <input class="form-check-input correct-radio" type="radio" name="correct_answer" value="${idx}">
                <label class="form-check-label small">ØµØ­ÛŒØ­</label>
            </div>
            <button type="button" class="btn btn-sm btn-outline-danger remove-option"><i class="bi bi-x"></i></button>
        </div>`;
                optionsWrap.appendChild(div);
            }

            function reindexOptions() {
                const cards = [...optionsWrap.querySelectorAll('.option-card')];
                cards.forEach((card, idx) => {
                    card.dataset.idx = idx;
                    const tag = card.querySelector('.option-tag');
                    if (tag) tag.textContent = String.fromCharCode(65 + idx);
                    const input = card.querySelector('input[name^="options"]');
                    if (input) input.name = `options[${idx}]`;
                    const radio = card.querySelector('.correct-radio');
                    if (radio) radio.value = idx;
                });
                refreshPreviewOptions();
                syncLegacyFields();
            }

            function ensureMinMcqOptions() {
                if (typeSel.value !== 'mcq') return;
                let count = optionsWrap.querySelectorAll('.option-card').length;
                while (count < 4) {
                    addOption('');
                    count++;
                }
                reindexOptions();
            }

            function refreshBlocks() {
                const t = typeSel.value;

                optionsBlock.style.display = (t === 'mcq' || t === 'true_false') ? 'block' : 'none';
                descBlock.style.display = (t === 'essay') ? 'block' : 'none';
                blankBlock.style.display = (t === 'fill_blank') ? 'block' : 'none';

                trueFalseBox.style.display = (t === 'true_false') ? 'block' : 'none';
                optionsWrap.style.display = (t === 'mcq') ? '' : 'none';
                addOptionBtn.style.display = (t === 'mcq') ? '' : 'none';

                pvType.textContent = 'Ù†ÙˆØ¹: ' + t;

                ensureMinMcqOptions();
                refreshPreviewOptions();
                syncLegacyFields();
            }

            function refreshPreviewOptions() {
                if (!pvOptions) return;
                const t = typeSel.value;
                pvOptions.innerHTML = '';
                if (t === 'mcq') {
                    const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')]
                        .map(i => i.value).filter(Boolean);
                    pvOptions.innerHTML =
                        '<div class="text-muted small mt-2">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§:</div>' +
                        opts.map((o, idx) => `<div class="small mt-1">${String.fromCharCode(65+idx)}. ${o}</div>`)
                        .join('');
                }
            }

            function syncLegacyFields() {
                const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')].map(i => i.value || '');

                legacyA.value = opts[0] ?? '';
                legacyB.value = opts[1] ?? '';
                legacyC.value = opts[2] ?? '';
                legacyD.value = opts[3] ?? '';

                const corr = document.querySelector('input[name="correct_answer"]:checked')?.value;
                legacyCorrect.value = (corr !== undefined) ?
                    (['a', 'b', 'c', 'd'][Number(corr)] ?? null) :
                    null;
            }

            addOptionBtn.addEventListener('click', () => {
                addOption('');
                reindexOptions();
            });

            optionsWrap.addEventListener('click', (e) => {
                const btn = e.target.closest('.remove-option');
                if (btn) {
                    const cards = optionsWrap.querySelectorAll('.option-card');
                    if (cards.length <= 4) {
                        alert('Ø¨Ø±Ø§ÛŒ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø­Ø¯Ø§Ù‚Ù„ Û´ Ú¯Ø²ÛŒÙ†Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª.');
                        return;
                    }
                    btn.closest('.option-card')?.remove();
                    reindexOptions();
                }
            });

            optionsWrap.addEventListener('input', (e) => {
                if (e.target.matches('input[name^="options"]')) {
                    refreshPreviewOptions();
                    syncLegacyFields();
                }
            });

            optionsWrap.addEventListener('change', (e) => {
                if (e.target.matches('.correct-radio')) {
                    optionsWrap.querySelectorAll('.option-row')
                        .forEach(r => r.classList.remove('correct-glow'));
                    e.target.closest('.option-row')?.classList.add('correct-glow');
                    syncLegacyFields();
                }
            });

            qText.addEventListener('input', () => pvQuestion.textContent = qText.value || 'Ù…ØªÙ† Ø³Ø¤Ø§Ù„');
            score.addEventListener('input', () => pvScore.textContent = 'Ø§Ù…ØªÛŒØ§Ø²: ' + (score.value || 1));
            typeSel.addEventListener('change', refreshBlocks);

            document.querySelector('form').addEventListener('submit', () => {
                if (typeSel.value === 'essay') {
                    const guide = descriptiveInput?.value?.trim();
                    if (guide && (!explanationInput.value || explanationInput.value.trim().length === 0)) {
                        explanationInput.value = guide;
                    }
                }
                ensureMinMcqOptions();
                syncLegacyFields();
            });

            refreshBlocks();
            ensureMinMcqOptions();
            syncLegacyFields();
        });
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 143: questions-create.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/questions-create.blade.php
ğŸ“ SIZE: 29,467 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÛŒØ¯')

@push('styles')
    <style>
        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .wizard {
            display: flex;
            gap: .5rem;
            flex-wrap: wrap
        }

        .wiz-step {
            flex: 1 1 120px;
            background: #f8fafc;
            border-radius: 1rem;
            padding: .7rem .9rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 800;
            font-size: .9rem;
            color: #334155
        }

        .wiz-step.active {
            background: rgba(13, 110, 253, .1);
            color: #0d6efd
        }

        .wiz-step .num {
            width: 28px;
            height: 28px;
            border-radius: .7rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e2e8f0
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .option-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1rem;
            background: #fff;
            transition: .2s
        }

        .option-card:hover {
            border-color: #cbd5e1;
            box-shadow: 0 8px 20px rgba(18, 38, 63, .06)
        }

        .option-row {
            background: #f8fafc;
            border-radius: .8rem;
            padding: .55rem .7rem;
            display: flex;
            align-items: center;
            gap: .6rem
        }

        .option-tag {
            width: 30px;
            height: 30px;
            border-radius: .6rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e5e7eb;
            font-weight: 800
        }

        .correct-glow {
            background: rgba(16, 185, 129, .08);
            border-color: rgba(16, 185, 129, .6)
        }

        .hint {
            font-size: .85rem;
            color: #6c757d
        }

        .floating-help {
            position: sticky;
            top: 90px
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-plus-circle me-1 text-primary"></i> Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÛŒØ¯
                </h4>
                <div class="text-muted small">
                    Ø¢Ø²Ù…ÙˆÙ†: <span class="fw-semibold">{{ $exam->title }}</span>

                    {{-- subject ÙÙ‚Ø· Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ù„ÙˆØ¯ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡ --}}
                    @if ($exam->relationLoaded('subject') && $exam->subject)
                        â€¢ Ù…ÙˆØ¶ÙˆØ¹: <span class="fw-semibold">{{ $exam->subject->title ?? $exam->subject->name }}</span>
                    @endif

                    â€¢ Ú©Ù„Ø§Ø³: <span
                        class="fw-semibold">{{ $exam->classroom?->title ?? ($exam->classroom?->name ?? 'â€”') }}</span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i> Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
            </div>
        </div>

        {{-- Errors --}}
        @if ($errors->any())
            <div class="alert alert-danger">
                <div class="fw-semibold mb-2">
                    <i class="bi bi-exclamation-triangle-fill me-1"></i>
                    Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†:
                </div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3">

            {{-- Form --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4">

                    {{-- Wizard Steps --}}
                    <div class="wizard mb-3" id="wizard">
                        <div class="wiz-step active" data-step="1">
                            <div class="num">1</div> Ù…ØªÙ† Ùˆ Ø§Ù…ØªÛŒØ§Ø²
                        </div>
                        <div class="wiz-step" data-step="2">
                            <div class="num">2</div> Ù†ÙˆØ¹ Ùˆ Ù¾Ø§Ø³Ø®
                        </div>
                        <div class="wiz-step" data-step="3">
                            <div class="num">3</div> Ù…Ø±ÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ
                        </div>
                    </div>

                    <form action="{{ route('teacher.exams.questions.store', $exam) }}" method="POST" class="row g-3"
                        novalidate>
                        @csrf

                        {{-- Step 1 --}}
                        <div class="col-12 step" data-step="1">
                            <label class="form-label fw-semibold">
                                Ù…ØªÙ† Ø³Ø¤Ø§Ù„ <span class="text-danger">*</span>
                            </label>
                            <textarea name="question" rows="4" class="form-control input-soft" required placeholder="Ø³Ø¤Ø§Ù„ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³...">{{ old('question') }}</textarea>
                        </div>

                        <div class="col-md-4 step" data-step="1">
                            <label class="form-label fw-semibold">
                                Ø§Ù…ØªÛŒØ§Ø²
                            </label>
                            <input type="number" name="score" min="1" class="form-control input-soft"
                                value="{{ old('score', 1) }}">
                        </div>

                        <div class="col-md-8 step" data-step="1">
                            <label class="form-label fw-semibold">ØªÙˆØ¶ÛŒØ­/Ø±Ø§Ù‡Ù†Ù…Ø§ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                            <input type="text" name="explanation" class="form-control input-soft"
                                placeholder="Ù…Ø«Ù„Ø§Ù‹ Ù†Ú©ØªÙ‡ ÛŒØ§ ØªÙˆØ¶ÛŒØ­ Ú©ÙˆØªØ§Ù‡..." value="{{ old('explanation') }}">
                        </div>

                        {{-- Step 2: Type --}}
                        <div class="col-md-8 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">Ù†ÙˆØ¹ Ø³Ø¤Ø§Ù„ <span class="text-danger">*</span></label>
                            <select name="type" class="form-select input-soft" id="typeSelect" required>
                                @php $type = old('type','mcq'); @endphp
                                <option value="mcq" {{ $type === 'mcq' ? 'selected' : '' }}>Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ</option>
                                <option value="true_false" {{ $type === 'true_false' ? 'selected' : '' }}>ØµØ­ÛŒØ­/ØºÙ„Ø·</option>
                                <option value="fill_blank" {{ $type === 'fill_blank' ? 'selected' : '' }}>Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ</option>
                                <option value="essay" {{ $type === 'essay' ? 'selected' : '' }}>ØªØ´Ø±ÛŒØ­ÛŒ</option>
                            </select>
                            <div class="hint mt-1">Ø¨Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ØŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
                        </div>

                        {{-- Step 2: Options block (MCQ + TrueFalse) --}}
                        <div class="col-12 step" data-step="2" id="optionsBlock" style="display:none">

                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="fw-bold"><i class="bi bi-list-check me-1"></i> Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</div>
                                <button type="button" id="addOptionBtn" class="btn btn-outline-primary btn-sm btn-wizard">
                                    <i class="bi bi-plus"></i> Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø²ÛŒÙ†Ù‡
                                </button>
                            </div>

                            <div id="optionsWrap" class="d-grid gap-2">
                                @php
                                    $initialOptions = old('options');
                                    if (!$initialOptions) {
                                        $initialOptions = array_filter(
                                            [old('option_a'), old('option_b'), old('option_c'), old('option_d')],
                                            fn($x) => $x !== null,
                                        );
                                    }
                                    if (!$initialOptions || count($initialOptions) === 0) {
                                        $initialOptions = ['', '', '', ''];
                                    }
                                @endphp

                                @foreach ($initialOptions as $i => $opt)
                                    <div class="option-card p-2" data-idx="{{ $i }}">
                                        <div class="option-row">
                                            <div class="option-tag">{{ chr(65 + $i) }}</div>
                                            <input type="text" name="options[{{ $i }}]"
                                                class="form-control border-0 bg-transparent" value="{{ $opt }}"
                                                placeholder="Ù…ØªÙ† Ú¯Ø²ÛŒÙ†Ù‡">
                                            <div class="form-check ms-auto">
                                                <input class="form-check-input correct-radio" type="radio"
                                                    name="correct_answer" value="{{ $i }}"
                                                    {{ old('correct_answer') === (string) $i ? 'checked' : '' }}>
                                                <label class="form-check-label small">ØµØ­ÛŒØ­</label>
                                            </div>
                                            <button type="button" class="btn btn-sm btn-outline-danger remove-option">
                                                <i class="bi bi-x"></i>
                                            </button>
                                        </div>
                                    </div>
                                @endforeach
                            </div>

                            {{-- Legacy hidden fields for controller compatibility --}}
                            <input type="hidden" name="option_a" id="legacyA">
                            <input type="hidden" name="option_b" id="legacyB">
                            <input type="hidden" name="option_c" id="legacyC">
                            <input type="hidden" name="option_d" id="legacyD">
                            <input type="hidden" name="correct_option" id="legacyCorrect">

                            <div class="hint mt-2">
                                Ø¨Ø±Ø§ÛŒ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø­Ø¯Ø§Ù‚Ù„ Û´ Ú¯Ø²ÛŒÙ†Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª. Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­ Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†.
                            </div>

                            {{-- True/False --}}
                            <div id="trueFalseBox" class="mt-3" style="display:none;">
                                <label class="form-label fw-semibold">
                                    Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†: <span class="text-danger">*</span>
                                </label>

                                <div class="d-flex gap-3">
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="1"
                                            {{ old('correct_tf') === '1' ? 'checked' : '' }}>
                                        <span class="form-check-label">ØµØ­ÛŒØ­</span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="0"
                                            {{ old('correct_tf') === '0' ? 'checked' : '' }}>
                                        <span class="form-check-label">ØºÙ„Ø·</span>
                                    </label>
                                </div>

                                <div class="hint mt-1">Ø¨Ø±Ø§ÛŒ ØµØ­ÛŒØ­/ØºÙ„Ø· ÙÙ‚Ø· Ù‡Ù…ÛŒÙ† Ø¯Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§ÙÛŒ Ø§Ø³Øª.</div>
                            </div>
                        </div>

                        {{-- Step 2: Fill blank block --}}
                        <div class="col-12 step" data-step="2" id="blankBlock" style="display:none">
                            <label class="form-label fw-semibold">
                                Ù¾Ø§Ø³Ø®(Ù‡Ø§ÛŒ) Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ <span class="text-danger">*</span>
                            </label>
                            <textarea name="correct_blanks" rows="3" class="form-control input-soft"
                                placeholder="Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ú©Ø§Ù…Ø§ ÛŒØ§ Ø®Ø· Ø¬Ø¯ÛŒØ¯ Ø¬Ø¯Ø§ Ú©Ù†...">{{ old('correct_blanks') }}</textarea>
                            <div class="hint mt-1">Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†, Ù¾Ø§ÛŒØªØ®Øª Ø§ÛŒØ±Ø§Ù†</div>
                        </div>

                        {{-- Step 2: Essay block --}}
                        <div class="col-12 step" data-step="2" id="descBlock" style="display:none">
                            <label class="form-label fw-semibold">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾Ø§Ø³Ø® ØªØ´Ø±ÛŒØ­ÛŒ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                            <textarea name="descriptive_answer" rows="4" class="form-control input-soft"
                                placeholder="Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾Ø§Ø³Ø® ÛŒØ§ Ù†Ú©Ø§Øª Ù…Ù‡Ù…...">{{ old('descriptive_answer') }}</textarea>
                            <div class="hint mt-1">Ø§Ú¯Ø± explanation Ø®Ø§Ù„ÛŒ Ø¨Ø§Ø´Ø¯ØŒ Ø§ÛŒÙ† Ù…ØªÙ† Ø¯Ø± explanation Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
                        </div>

                        {{-- Step 3 Review --}}
                        <div class="col-12 step" data-step="3" style="display:none">
                            <div class="preview-card p-3">
                                <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ù…Ø±ÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ</div>
                                <div class="small text-muted">Ù‚Ø¨Ù„ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ ÛŒÚ©Ø¨Ø§Ø± Ú†Ú© Ú©Ù†.</div>
                                <div class="border rounded-3 p-3 bg-white mt-2" id="reviewBox"></div>
                            </div>
                        </div>

                        {{-- Nav buttons --}}
                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="button" class="btn btn-outline-secondary btn-wizard" id="prevBtn" disabled>
                                <i class="bi bi-arrow-right"></i> Ù‚Ø¨Ù„ÛŒ
                            </button>
                            <button type="button" class="btn btn-primary btn-wizard shadow-sm" id="nextBtn">
                                Ø¨Ø¹Ø¯ÛŒ <i class="bi bi-arrow-left"></i>
                            </button>
                            <button type="submit" class="btn btn-success btn-wizard shadow-sm" id="submitBtn"
                                style="display:none">
                                <i class="bi bi-check2-circle"></i> Ø°Ø®ÛŒØ±Ù‡ Ø³Ø¤Ø§Ù„
                            </button>
                        </div>

                    </form>
                </div>
            </div>

            {{-- Right column live preview/help --}}
            <div class="col-lg-4">
                <div class="floating-help">

                    <div class="preview-card p-3 mb-3">
                        <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø²Ù†Ø¯Ù‡</div>
                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold" id="pvQuestion">Ù…ØªÙ† Ø³Ø¤Ø§Ù„</div>
                            <div class="text-muted small mt-2" id="pvType">Ù†ÙˆØ¹: mcq</div>
                            <div class="text-muted small mt-1" id="pvScore">Ø§Ù…ØªÛŒØ§Ø²: 1</div>
                            <div class="mt-2" id="pvOptions"></div>
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> Ù†Ú©ØªÙ‡â€ŒÙ‡Ø§</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>MCQ: Ø­Ø¯Ø§Ù‚Ù„ Û´ Ú¯Ø²ÛŒÙ†Ù‡ Ùˆ ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ ØµØ­ÛŒØ­.</li>
                            <li>ØµØ­ÛŒØ­/ØºÙ„Ø·: ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ùˆ Ø­Ø§Ù„Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.</li>
                            <li>Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ: Ú†Ù†Ø¯ Ù¾Ø§Ø³Ø® Ø±Ø§ Ø¨Ø§ Ú©Ø§Ù…Ø§ Ø¬Ø¯Ø§ Ú©Ù†.</li>
                            <li>ØªØ´Ø±ÛŒØ­ÛŒ: ÙÙ‚Ø· Ù…ØªÙ† Ùˆ Ø§Ù…ØªÛŒØ§Ø² Ú©Ø§ÙÛŒ Ø§Ø³Øª.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Wizard
            const steps = [...document.querySelectorAll('.step')];
            const wizSteps = [...document.querySelectorAll('.wiz-step')];
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            let current = 1;

            function setStep(n) {
                current = n;
                steps.forEach(s => s.style.display = (Number(s.dataset.step) === n) ? '' : 'none');
                wizSteps.forEach(w => w.classList.toggle('active', Number(w.dataset.step) === n));
                prevBtn.disabled = n === 1;
                nextBtn.style.display = n < 3 ? '' : 'none';
                submitBtn.style.display = n === 3 ? '' : 'none';
                if (n === 3) fillReview();
            }

            prevBtn.addEventListener('click', () => setStep(Math.max(1, current - 1)));
            nextBtn.addEventListener('click', () => setStep(Math.min(3, current + 1)));

            // Blocks
            const typeSel = document.getElementById('typeSelect');
            const optionsBlock = document.getElementById('optionsBlock');
            const descBlock = document.getElementById('descBlock');
            const blankBlock = document.getElementById('blankBlock');
            const optionsWrap = document.getElementById('optionsWrap');
            const addOptionBtn = document.getElementById('addOptionBtn');
            const trueFalseBox = document.getElementById('trueFalseBox');

            // Legacy hidden inputs
            const legacyA = document.getElementById('legacyA');
            const legacyB = document.getElementById('legacyB');
            const legacyC = document.getElementById('legacyC');
            const legacyD = document.getElementById('legacyD');
            const legacyCorrect = document.getElementById('legacyCorrect');

            // Preview
            const pvQuestion = document.getElementById('pvQuestion');
            const pvType = document.getElementById('pvType');
            const pvScore = document.getElementById('pvScore');
            const pvOptions = document.getElementById('pvOptions');

            const qText = document.querySelector('textarea[name="question"]');
            const score = document.querySelector('input[name="score"]');
            const reviewBox = document.getElementById('reviewBox');

            const explanationInput = document.querySelector('input[name="explanation"]');
            const descriptiveInput = document.querySelector('textarea[name="descriptive_answer"]');

            function ensureMinMcqOptions() {
                if (typeSel.value !== 'mcq') return;
                let count = optionsWrap.querySelectorAll('.option-card').length;
                while (count < 4) {
                    addOption('');
                    count++;
                }
                reindexOptions();
            }

            function refreshBlocks() {
                const t = typeSel?.value;

                optionsBlock.style.display = (t === 'mcq' || t === 'true_false') ? '' : 'none';
                descBlock.style.display = (t === 'essay') ? '' : 'none';
                blankBlock.style.display = (t === 'fill_blank') ? '' : 'none';

                if (trueFalseBox) trueFalseBox.style.display = (t === 'true_false') ? 'block' : 'none';
                if (optionsWrap) optionsWrap.style.display = (t === 'mcq') ? '' : 'none';
                if (addOptionBtn) addOptionBtn.style.display = (t === 'mcq') ? '' : 'none';

                if (pvType) pvType.textContent = 'Ù†ÙˆØ¹: ' + t;

                ensureMinMcqOptions();
                refreshPreviewOptions();
            }

            function refreshPreviewOptions() {
                if (!pvOptions) return;
                const t = typeSel?.value;
                pvOptions.innerHTML = '';

                if (t === 'mcq') {
                    const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')]
                        .map(i => i.value).filter(Boolean);

                    if (opts.length) {
                        pvOptions.innerHTML =
                            '<div class="text-muted small mt-2">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§:</div>' +
                            opts.map((o, idx) =>
                                `<div class="small mt-1">${String.fromCharCode(65+idx)}. ${o}</div>`).join('');
                    }
                }
            }

            function fillReview() {
                const t = typeSel?.value;
                const text = qText?.value?.trim() || 'â€”';
                const sc = score?.value || 1;
                const exp = explanationInput?.value || 'â€”';

                let html = `<div class="fw-semibold mb-1">Ø³Ø¤Ø§Ù„:</div><div>${text}</div>`;
                html += `<div class="mt-2 text-muted small">Ù†ÙˆØ¹: ${t} â€¢ Ø§Ù…ØªÛŒØ§Ø²: ${sc}</div>`;
                html += `<div class="mt-2 small"><span class="fw-semibold">ØªÙˆØ¶ÛŒØ­:</span> ${exp}</div>`;

                if (t === 'mcq') {
                    const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')]
                        .map(i => i.value).filter(Boolean);
                    html += '<div class="fw-semibold mt-3 mb-1">Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§:</div>' +
                        opts.map((o, idx) => `<div class="small">${String.fromCharCode(65+idx)}. ${o}</div>`).join(
                            '');
                }

                if (t === 'true_false') {
                    const checked = document.querySelector('input[name="correct_tf"]:checked');
                    html += `<div class="fw-semibold mt-3 mb-1">Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­:</div>
                <div class="small">${checked ? (checked.value=="1"?"ØµØ­ÛŒØ­":"ØºÙ„Ø·") : "â€”"}</div>`;
                }

                if (t === 'fill_blank') {
                    const blanks = document.querySelector('[name="correct_blanks"]')?.value || 'â€”';
                    html += `<div class="fw-semibold mt-3 mb-1">Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§:</div><div class="small">${blanks}</div>`;
                }

                if (t === 'essay') {
                    const guide = descriptiveInput?.value || 'â€”';
                    html +=
                        `<div class="fw-semibold mt-3 mb-1">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾Ø§Ø³Ø®:</div><div class="small">${guide}</div>`;
                }

                if (reviewBox) reviewBox.innerHTML = html;
            }

            // MCQ options management
            function reindexOptions() {
                const cards = [...optionsWrap.querySelectorAll('.option-card')];
                cards.forEach((card, idx) => {
                    card.dataset.idx = idx;
                    const tag = card.querySelector('.option-tag');
                    if (tag) tag.textContent = String.fromCharCode(65 + idx);
                    const input = card.querySelector('input[name^="options"]');
                    if (input) input.name = `options[${idx}]`;
                    const radio = card.querySelector('.correct-radio');
                    if (radio) radio.value = idx;
                });
                refreshPreviewOptions();
                syncLegacyFields();
            }

            function addOption(value = '') {
                const idx = optionsWrap.querySelectorAll('.option-card').length;
                const div = document.createElement('div');
                div.className = 'option-card p-2';
                div.innerHTML = `
        <div class="option-row">
            <div class="option-tag">${String.fromCharCode(65+idx)}</div>
            <input type="text" name="options[${idx}]" class="form-control border-0 bg-transparent" value="${value}" placeholder="Ù…ØªÙ† Ú¯Ø²ÛŒÙ†Ù‡">
            <div class="form-check ms-auto">
                <input class="form-check-input correct-radio" type="radio" name="correct_answer" value="${idx}">
                <label class="form-check-label small">ØµØ­ÛŒØ­</label>
            </div>
            <button type="button" class="btn btn-sm btn-outline-danger remove-option"><i class="bi bi-x"></i></button>
        </div>`;
                optionsWrap.appendChild(div);
            }

            function syncLegacyFields() {
                const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')].map(i => i.value || '');

                legacyA.value = opts[0] ?? '';
                legacyB.value = opts[1] ?? '';
                legacyC.value = opts[2] ?? '';
                legacyD.value = opts[3] ?? '';

                const corr = document.querySelector('input[name="correct_answer"]:checked')?.value;
                if (corr !== undefined) {
                    legacyCorrect.value = ['a', 'b', 'c', 'd'][Number(corr)] ?? null;
                } else {
                    legacyCorrect.value = null;
                }
            }

            addOptionBtn?.addEventListener('click', () => {
                addOption();
                reindexOptions();
            });

            optionsWrap?.addEventListener('click', (e) => {
                const btn = e.target.closest('.remove-option');
                if (btn) {
                    const cards = optionsWrap.querySelectorAll('.option-card');
                    if (cards.length <= 4) {
                        alert('Ø¨Ø±Ø§ÛŒ Ú†Ù†Ø¯Ú¯Ø²ÛŒÙ†Ù‡â€ŒØ§ÛŒ Ø­Ø¯Ø§Ù‚Ù„ Û´ Ú¯Ø²ÛŒÙ†Ù‡ Ù„Ø§Ø²Ù… Ø§Ø³Øª.');
                        return;
                    }
                    btn.closest('.option-card')?.remove();
                    reindexOptions();
                }
            });

            optionsWrap?.addEventListener('input', (e) => {
                if (e.target.matches('input[name^="options"]')) {
                    refreshPreviewOptions();
                    syncLegacyFields();
                }
            });

            optionsWrap?.addEventListener('change', (e) => {
                if (e.target.matches('.correct-radio')) {
                    optionsWrap.querySelectorAll('.option-row')
                        .forEach(r => r.classList.remove('correct-glow'));
                    e.target.closest('.option-row')?.classList.add('correct-glow');
                    syncLegacyFields();
                }
            });

            // Live preview binds
            qText?.addEventListener('input', () => pvQuestion.textContent = qText.value || 'Ù…ØªÙ† Ø³Ø¤Ø§Ù„');
            score?.addEventListener('input', () => pvScore.textContent = 'Ø§Ù…ØªÛŒØ§Ø²: ' + (score.value || 1));
            typeSel?.addEventListener('change', refreshBlocks);

            document.querySelector('form')?.addEventListener('submit', () => {
                if (typeSel?.value === 'essay') {
                    const guide = descriptiveInput?.value?.trim();
                    if (guide && (!explanationInput.value || explanationInput.value.trim().length === 0)) {
                        explanationInput.value = guide;
                    }
                }
                ensureMinMcqOptions();
                syncLegacyFields();
            });

            setStep(1);
            refreshBlocks();
            ensureMinMcqOptions();
            syncLegacyFields();
        });
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 144: questions.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/questions.blade.php
ğŸ“ SIZE: 9,562 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ†')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .exam-chip {
            background: #eef2ff;
            padding: .25rem .6rem;
            border-radius: 999px;
            font-weight: 700;
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }

        .q-row:hover {
            background: #f9fafb;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header (Questions Management) --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-question-circle me-1 text-primary"></i>
                    Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ†
                </h4>

                <div class="text-muted small">
                    Ø¢Ø²Ù…ÙˆÙ†:
                    <span class="exam-chip">{{ $exam->title }}</span>

                    {{-- âœ… subject Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´Øª Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡ØŒ Ù†Ø¨ÙˆØ¯ Ù…Ø´Ú©Ù„ÛŒ Ù†ÛŒØ³Øª --}}
                    @if ($exam->relationLoaded('subject') || $exam->subject)
                        <span class="mx-1 text-muted">â€¢</span>
                        Ù…ÙˆØ¶ÙˆØ¹:
                        @if ($exam->subject)
                            <span class="fw-semibold">
                                {{ $exam->subject->title ?? $exam->subject->name }}
                            </span>
                        @else
                            <span class="text-warning">Ù†Ø§Ù…Ø´Ø®Øµ</span>
                        @endif
                    @endif

                    @if ($exam->classroom)
                        <span class="mx-1 text-muted">â€¢</span>
                        Ú©Ù„Ø§Ø³:
                        <span class="fw-semibold">
                            {{ $exam->classroom->title ?? $exam->classroom->name }}
                        </span>
                    @endif

                    <span class="mx-1 text-muted">â€¢</span>
                    {{-- âœ… duration ÙÙˆÙ„â€ŒØ¨Ú© --}}
                    Ù…Ø¯Øª: {{ $exam->duration ?? ($exam->duration_minutes ?? 'â€”') }} Ø¯Ù‚ÛŒÙ‚Ù‡
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.edit', $exam) }}"
                    class="btn btn-outline-warning d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-pencil-square"></i>
                    ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢Ø²Ù…ÙˆÙ†
                </a>

                <a href="{{ route('teacher.exams.questions.create', $exam) }}"
                    class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-plus-circle"></i>
                    Ø³ÙˆØ§Ù„ Ø¬Ø¯ÛŒØ¯
                </a>

                <a href="{{ route('teacher.exams.index') }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i>
                    Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>
            </div>
        </div>

        {{-- Alerts --}}
        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif

        @php
            $questions = $questions ?? ($exam->questions ?? collect());
            $totalScore = $questions->sum('score');
        @endphp

        {{-- Summary --}}
        <div class="row g-3 mb-3">
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ØªØ¹Ø¯Ø§Ø¯ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§</div>
                        <div class="fs-4 fw-bold">{{ $questions->count() }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù…ØªÛŒØ§Ø²</div>
                        <div class="fs-4 fw-bold">{{ $totalScore }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª Ø¢Ø²Ù…ÙˆÙ†</div>
                        <div class="mt-2">
                            {{-- âœ… is_published â†’ is_active --}}
                            @if ($exam->is_active)
                                <span class="badge bg-success badge-pill">ÙØ¹Ø§Ù„</span>
                            @else
                                <span class="badge bg-secondary badge-pill">ØºÛŒØ±ÙØ¹Ø§Ù„</span>
                            @endif
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {{-- Questions Table --}}
        <div class="card card-soft">
            <div class="table-responsive">
                <table class="table align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>Ù…ØªÙ† Ø³ÙˆØ§Ù„</th>
                            <th>Ù†ÙˆØ¹</th>
                            <th>Ø§Ù…ØªÛŒØ§Ø²</th>
                            <th>Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­</th>
                            <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                        </tr>
                    </thead>
                    <tbody>

                        @forelse($questions as $q)
                            @php
                                $correct = null;
                                if ($q->type === 'mcq') {
                                    $correct = strtoupper($q->correct_option ?? '');
                                } elseif ($q->type === 'true_false') {
                                    $correct = $q->correct_tf ?? false ? 'ØµØ­ÛŒØ­' : 'ØºÙ„Ø·';
                                } elseif ($q->type === 'fill_blank') {
                                    $correct = is_array($q->correct_answer)
                                        ? implode(' , ', $q->correct_answer)
                                        : $q->correct_answer;
                                } else {
                                    $correct = 'â€” (ØªØ´Ø±ÛŒØ­ÛŒ)';
                                }
                            @endphp

                            <tr class="q-row">
                                {{-- Ø´Ù…Ø§Ø±Ù‡ Ø³ÙˆØ§Ù„ --}}
                                <td class="fw-semibold">{{ $loop->iteration }}</td>

                                <td style="max-width:520px">
                                    {{-- âœ… question_text â†’ question --}}
                                    {{ \Illuminate\Support\Str::limit($q->question, 120) }}
                                </td>

                                <td>
                                    <span class="badge bg-light text-dark border badge-pill">
                                        {{ str_replace('_', ' ', $q->type) }}
                                    </span>
                                </td>

                                <td class="fw-bold">{{ $q->score }}</td>
                                <td class="tiny muted">{{ $correct }}</td>

                                <td class="text-end">
                                    <a href="{{ route('teacher.exams.questions.edit', [$exam, $q]) }}"
                                        class="btn btn-sm btn-outline-warning">
                                        ÙˆÛŒØ±Ø§ÛŒØ´
                                    </a>

                                    <form method="POST"
                                        action="{{ route('teacher.exams.questions.destroy', [$exam, $q]) }}"
                                        class="d-inline" onsubmit="return confirm('Ø³ÙˆØ§Ù„ Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')">
                                        @csrf
                                        @method('DELETE')
                                        <button class="btn btn-sm btn-outline-danger">
                                            Ø­Ø°Ù
                                        </button>
                                    </form>
                                </td>
                            </tr>

                        @empty
                            <tr>
                                <td colspan="6" class="text-center text-muted py-4">
                                    Ù‡Ù†ÙˆØ² Ø³ÙˆØ§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                                </td>
                            </tr>
                        @endforelse

                    </tbody>
                </table>
            </div>
        </div>

        {{-- Pagination (Ø§Ú¯Ø± paginate Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒ) --}}
        @if ($questions instanceof \Illuminate\Pagination\LengthAwarePaginator)
            <div class="mt-3">
                {{ $questions->links() }}
            </div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 145: show.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/exams/show.blade.php
ğŸ“ SIZE: 10,766 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ø¬Ø²Ø¦ÛŒØ§Øª Ø¢Ø²Ù…ÙˆÙ†')

@push('styles')
    <style>
        /* ------------------------------------------------------------------
           Exam Show (Teacher)
           UI Ø³Ø¨Ú©ØŒ Ø´ÙØ§Ù Ùˆ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ Bootstrap 5 + Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø´Ù…Ø§
        ------------------------------------------------------------------ */

        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            background: #fff;
        }

        .chip {
            background: #eef2ff;
            padding: .25rem .6rem;
            border-radius: 999px;
            font-weight: 700;
        }

        .tiny {
            font-size: .85rem;
        }

        .muted {
            color: #6b7280;
        }

        .hero {
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
            background: linear-gradient(135deg, #0d6efd10, #20c99710);
            border: 1px dashed #e5e7eb;
        }

        .hero-orb {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            right: -70px;
            top: -70px;
            background: radial-gradient(circle, #0d6efd22, transparent 60%);
            filter: blur(0px);
        }

        .hero-orb2 {
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            left: -50px;
            bottom: -50px;
            background: radial-gradient(circle, #20c99722, transparent 60%);
        }

        .q-row:hover {
            background: #f9fafb;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- =========================================================
         Header / Hero
         Ù…ØªØºÛŒØ± Ø§ØµÙ„ÛŒ Ø§ÛŒÙ† ØµÙØ­Ù‡ ÙÙ‚Ø· $exam Ø§Ø³Øª
    ========================================================== --}}
        <div class="hero card-soft p-3 p-md-4 mb-4">
            <div class="hero-orb"></div>
            <div class="hero-orb2"></div>

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
                <div>
                    <h4 class="fw-bold mb-1">
                        <i class="bi bi-clipboard-check me-1 text-primary"></i>
                        {{ $exam->title }}
                    </h4>

                    <div class="text-muted small">
                        {{-- Ú©Ù„Ø§Ø³ Ù…Ø±ØªØ¨Ø· --}}
                        Ú©Ù„Ø§Ø³:
                        @if ($exam->classroom)
                            <span class="chip">{{ $exam->classroom->title ?? $exam->classroom->name }}</span>
                        @else
                            <span class="text-warning">Ù†Ø§Ù…Ø´Ø®Øµ</span>
                        @endif

                        <span class="mx-1">â€¢</span>

                        {{-- Ù…Ø¯Øª Ø¢Ø²Ù…ÙˆÙ† --}}
                        Ù…Ø¯Øª: {{ $exam->duration }} Ø¯Ù‚ÛŒÙ‚Ù‡

                        <span class="mx-1">â€¢</span>

                        {{-- ÙˆØ¶Ø¹ÛŒØª Ø§Ù†ØªØ´Ø§Ø± --}}
                        ÙˆØ¶Ø¹ÛŒØª:
                        @if ($exam->is_published)
                            <span class="badge bg-success">Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡</span>
                        @else
                            <span class="badge bg-secondary">Ù¾ÛŒØ´â€ŒÙ†ÙˆÛŒØ³</span>
                        @endif
                    </div>

                    {{-- ØªÙˆØ¶ÛŒØ­ Ø¢Ø²Ù…ÙˆÙ† --}}
                    @if (!empty($exam->description))
                        <div class="tiny muted mt-2">
                            {{ $exam->description }}
                        </div>
                    @endif
                </div>

                {{-- Actions --}}
                <div class="d-flex gap-2 flex-wrap">
                    {{-- ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢Ø²Ù…ÙˆÙ† --}}
                    <a href="{{ route('teacher.exams.edit', $exam) }}"
                        class="btn btn-outline-warning d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-pencil-square"></i>
                        ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢Ø²Ù…ÙˆÙ†
                    </a>

                    {{-- Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„Ø§Øª --}}
                    <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                        class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-question-circle"></i>
                        Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§
                    </a>

                    {{-- Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ --}}
                    <a href="{{ route('teacher.exams.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i>
                        Ø¨Ø§Ø²Ú¯Ø´Øª
                    </a>
                </div>
            </div>
        </div>

        {{-- Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª --}}
        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif


        {{-- =========================================================
         Summary Cards
    ========================================================== --}}
        @php
            $questions = $exam->questions ?? collect();
            $totalScore = $questions->sum('score');
        @endphp

        <div class="row g-3 mb-3">
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ØªØ¹Ø¯Ø§Ø¯ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§</div>
                        <div class="fs-4 fw-bold">{{ $questions->count() }}</div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù…ØªÛŒØ§Ø²</div>
                        <div class="fs-4 fw-bold">{{ $totalScore }}</div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ø´Ù†Ø§Ø³Ù‡ Ø¢Ø²Ù…ÙˆÙ†</div>
                        <div class="fs-5 fw-bold">#{{ $exam->id }}</div>
                    </div>
                </div>
            </div>
        </div>


        {{-- =========================================================
         Questions Preview (read-only)
         Ø§Ú¯Ø± Ø³ÙˆØ§Ù„ Ù†Ø¯Ø§Ø±ÛŒÙ…ØŒ CTA Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ø³ÙˆØ§Ù„ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…
    ========================================================== --}}
        <div class="card card-soft">
            <div class="card-header bg-white fw-bold d-flex justify-content-between align-items-center">
                <span>
                    <i class="bi bi-list-check me-1 text-primary"></i>
                    Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ†
                </span>

                <a href="{{ route('teacher.exams.questions.create', $exam) }}" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-plus"></i> Ø§ÙØ²ÙˆØ¯Ù† Ø³ÙˆØ§Ù„
                </a>
            </div>

            <div class="table-responsive">
                <table class="table align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>Ù…ØªÙ† Ø³ÙˆØ§Ù„</th>
                            <th>Ù†ÙˆØ¹</th>
                            <th>Ø§Ù…ØªÛŒØ§Ø²</th>
                            <th>Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­</th>
                        </tr>
                    </thead>
                    <tbody>
                        @forelse($questions as $q)
                            @php
                                // Ù†Ù…Ø§ÛŒØ´ Ø®Ù„Ø§ØµÙ‡ Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ (Ø·Ø¨Ù‚ Ø³Ø§Ø®ØªØ§Ø± ÙØ¹Ù„ÛŒ Question Ù‡Ø§)
                                $correct = null;
                                if ($q->type === 'mcq') {
                                    $correct = strtoupper($q->correct_option ?? '');
                                } elseif ($q->type === 'true_false') {
                                    $correct = $q->correct_tf ?? false ? 'True' : 'False';
                                } elseif ($q->type === 'fill_blank') {
                                    $correct = is_array($q->correct_answer)
                                        ? implode(' , ', $q->correct_answer)
                                        : $q->correct_answer ?? 'â€”';
                                } else {
                                    $correct = 'â€” (ØªØ´Ø±ÛŒØ­ÛŒ)';
                                }
                            @endphp

                            <tr class="q-row">
                                <td class="fw-semibold">{{ $loop->iteration }}</td>
                                <td style="max-width:520px">
                                    {{ \Illuminate\Support\Str::limit($q->question_text, 140) }}
                                </td>
                                <td>
                                    <span class="badge bg-light text-dark border rounded-pill">
                                        {{ str_replace('_', ' ', $q->type) }}
                                    </span>
                                </td>
                                <td class="fw-bold">{{ $q->score }}</td>
                                <td class="tiny muted">{{ $correct }}</td>
                            </tr>
                        @empty
                            <tr>
                                <td colspan="5" class="text-center text-muted py-5">
                                    Ù‡Ù†ÙˆØ² Ù‡ÛŒÚ† Ø³ÙˆØ§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ† Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
                                    <div class="mt-3">
                                        <a href="{{ route('teacher.exams.questions.create', $exam) }}"
                                            class="btn btn-primary">
                                            <i class="bi bi-plus-circle"></i>
                                            Ø§ÙˆÙ„ÛŒÙ† Ø³ÙˆØ§Ù„ Ø±Ø§ Ø¨Ø³Ø§Ø²
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        @endforelse
                    </tbody>
                </table>
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 146: index.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/index.blade.php
ğŸ“ SIZE: 42,493 bytes
ğŸ•’ MODIFIED: 2025-12-06 22:01:55
----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù… - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯')

@push('styles')
    <style>
        /* ØªÙ… Ú©Ø§Ù…Ù„ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .teacher-dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        /* ========== HERO HEADER ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .btn-hero {
            padding: 16px 32px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1.05rem;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-hero:active {
            transform: scale(0.97);
        }

        .btn-primary-grad {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-primary-grad:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-primary-grad::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-primary-grad:hover::before {
            left: 100%;
        }

        .btn-outline-secondary-grad {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-outline-secondary-grad:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== KPI STATS ========== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
            animation: fadeIn 0.6s ease-out;
            animation-delay: 0.1s;
            animation-fill-mode: both;
        }

        .kpi-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 28px;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .kpi-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .kpi-card:nth-child(2)::before {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.08), transparent);
        }

        .kpi-card:nth-child(3)::before {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.08), transparent);
        }

        .kpi-card:nth-child(4)::before {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.08), transparent);
        }

        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .kpi-title {
            color: var(--gray);
            font-size: 0.95rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-icon {
            width: 60px;
            height: 60px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .kpi-card:hover .kpi-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .kpi-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
            line-height: 1;
        }

        .kpi-trend {
            font-size: 0.9rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
            position: relative;
            z-index: 2;
        }

        .trend-up {
            color: #00D4AA;
        }

        .trend-down {
            color: #FF6B9D;
        }

        /* ========== MAIN DASHBOARD GRID ========== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 35px;
        }

        @media (max-width: 992px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ========== RECENT EXAMS CARD ========== */
        .recent-exams-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(0, 0, 0, 0.05);
            height: 100%;
            position: relative;
            overflow: hidden;
            animation: slideInLeft 0.6s ease-out;
        }

        .recent-exams-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
        }

        .card-title {
            font-weight: 900;
            font-size: 1.4rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .view-all-link {
            color: var(--primary);
            font-weight: 800;
            font-size: 0.95rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }

        .view-all-link:hover {
            gap: 10px;
            color: var(--secondary);
        }

        .exams-list {
            list-style: none;
            margin: 0;
            padding: 0;
            position: relative;
            z-index: 2;
        }

        .exam-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 15px;
            border-radius: var(--radius-md);
            border-bottom: 2px dashed rgba(123, 104, 238, 0.1);
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
        }

        .exam-item:last-child {
            border-bottom: none;
        }

        .exam-item:hover {
            background: var(--primary-light);
            transform: translateX(8px);
            border-bottom-color: transparent;
        }

        .exam-info {
            flex: 1;
        }

        .exam-title {
            font-weight: 900;
            color: var(--dark);
            font-size: 1.05rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exam-title i {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .exam-meta {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meta-item i {
            font-size: 0.95rem;
        }

        .exam-badge {
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }

        .empty-state {
            text-align: center;
            padding: 50px 30px;
            position: relative;
            z-index: 2;
        }

        .empty-icon {
            font-size: 4rem;
            color: var(--light-gray);
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1.1rem;
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .btn-create-first {
            padding: 14px 28px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
        }

        .btn-create-first:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
        }

        /* ========== QUICK ACTIONS CARD ========== */
        .quick-actions-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.6s ease-out;
        }

        .quick-actions-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-2);
        }

        .quick-grid {
            display: grid;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .quick-action {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 22px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            color: inherit;
        }

        .quick-action:hover {
            background: var(--light);
            border-color: var(--primary-light);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .quick-content {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .quick-icon {
            width: 55px;
            height: 55px;
            border-radius: 16px;
            background: var(--primary-light);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .quick-action:hover .quick-icon {
            background: var(--gradient-1);
            color: white;
            transform: scale(1.1);
        }

        .quick-text h4 {
            font-weight: 900;
            color: var(--dark);
            font-size: 1rem;
            margin: 0 0 5px;
        }

        .quick-text p {
            color: var(--gray);
            font-size: 0.85rem;
            margin: 0;
            line-height: 1.5;
        }

        .quick-arrow {
            color: var(--gray);
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .quick-action:hover .quick-arrow {
            transform: translateX(-5px);
            color: var(--primary);
        }

        /* ========== SYSTEM STATUS CARD ========== */
        .system-status-card {
            background: linear-gradient(135deg, #2D3047, #1A1C30);
            color: white;
            border-radius: var(--radius-xl);
            padding: 30px;
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.6s ease-out;
            animation-delay: 0.2s;
            animation-fill-mode: both;
        }

        .system-status-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.15), transparent 70%);
            border-radius: 50%;
            animation: floaty 12s ease-in-out infinite;
        }

        .system-status-card::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.15), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .system-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .system-header i {
            color: var(--accent);
            background: rgba(0, 212, 170, 0.15);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        .system-header h3 {
            font-weight: 900;
            font-size: 1.3rem;
            margin: 0;
        }

        .system-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .system-list {
            display: grid;
            gap: 18px;
            position: relative;
            z-index: 2;
        }

        .system-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .system-item i {
            color: var(--gold);
            font-size: 1rem;
            margin-top: 3px;
            flex-shrink: 0;
        }

        .system-item p {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.95rem;
            margin: 0;
            line-height: 1.6;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .teacher-dashboard {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .hero-actions {
                flex-direction: column;
                width: 100%;
            }

            .btn-hero {
                width: 100%;
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .kpi-card {
                padding: 22px;
            }

            .kpi-value {
                font-size: 2.2rem;
            }

            .dashboard-grid {
                gap: 20px;
            }

            .exam-meta {
                flex-direction: column;
                gap: 8px;
                align-items: flex-start;
            }

            .exam-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .exam-badge {
                align-self: flex-start;
            }

            .quick-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .quick-action {
                padding: 18px;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .kpi-value {
                font-size: 2rem;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .view-all-link {
                align-self: flex-start;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .btn-hero,
        .btn-create-first,
        .quick-action,
        .exam-item {
            min-height: 48px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="teacher-dashboard">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span class="highlight">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø¹Ù„Ù…</span>
                    <span style="color: var(--dark);">ğŸ‘¨â€ğŸ«</span>
                </h1>
                <p class="hero-subtitle">
                    Ø®Ù„Ø§ØµÙ‡â€ŒØ§ÛŒ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ØŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ùˆ ÙØ¹Ø§Ù„ÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø´Ù…Ø§.
                    Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù…Ø§Ø±Ù‡Ø§ Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ù…Ø·Ù„Ø¹ Ø´ÙˆÛŒØ¯.
                </p>
            </div>

            <div class="hero-actions">
                <a href="{{ route('teacher.exams.create') }}" class="btn-hero btn-primary-grad">
                    <i class="fas fa-file-circle-plus"></i>
                    Ø§ÛŒØ¬Ø§Ø¯ Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯
                </a>
                <a href="{{ route('teacher.exams.index') }}" class="btn-hero btn-outline-secondary-grad">
                    <i class="fas fa-clipboard-list"></i>
                    Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>
            </div>
        </div>

        {{-- ========== KPI STATS ========== --}}
        <div class="stats-grid">
            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</div>
                    <div class="kpi-icon" style="background: var(--gradient-1);">
                        <i class="fas fa-file-alt"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['total_exams'] ?? 'â€”' }}</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-arrow-up"></i>
                    Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù…Ø§Ù‡ Ú¯Ø°Ø´ØªÙ‡
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</div>
                    <div class="kpi-icon" style="background: var(--gradient-2);">
                        <i class="fas fa-bolt"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['active_exams'] ?? 'â€”' }}</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-chart-line"></i>
                    Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</div>
                    <div class="kpi-icon" style="background: var(--gradient-3);">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['students_count'] ?? 'â€”' }}</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-users"></i>
                    {{-- ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ² ÙˆØ§Ù‚Ø¹ÛŒ --}}
                    @if (($stats['new_students'] ?? 0) > 0)
                        {{ $stats['new_students'] }} Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¬Ø¯ÛŒØ¯
                    @else
                        Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¬Ø¯ÛŒØ¯
                    @endif
                    {{-- ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´ Ø¢Ù…ÙˆØ² ÙˆØ§Ù‚Ø¹ÛŒ --}}

                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Ù¾Ø§Ø³Ø®â€Œ Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ†Ø´Ø¯Ù‡</div>
                    <div class="kpi-icon" style="background: var(--gradient-4);">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['pending_reviews'] ?? 'â€”' }}</div>
                <div class="kpi-trend trend-down">
                    <i class="fas fa-exclamation-circle"></i>
                    Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ ÙÙˆØ±ÛŒ
                </div>
            </div>
        </div>

        {{-- ========== MAIN DASHBOARD GRID ========== --}}
        <div class="dashboard-grid">
            {{-- RECENT EXAMS --}}
            <div class="recent-exams-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-clock-rotate-left"></i>
                        Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ± Ø´Ù…Ø§
                    </div>
                    <a href="{{ route('teacher.exams.index') }}" class="view-all-link">
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡
                        <i class="fas fa-arrow-left"></i>
                    </a>
                </div>

                {{-- Data Real (no fake defaults, no array support) --}}
                @forelse($recentExams as $exam)
                    <ul class="exams-list">
                        <a href="{{ route('teacher.exams.edit', $exam->id) }}" class="exam-item">
                            <div class="exam-info">
                                <div class="exam-title">
                                    <i class="fas fa-file-pen"></i>
                                    {{ $exam->title }}
                                </div>

                                <div class="exam-meta">
                                    <span class="meta-item">
                                        <i class="fas fa-layer-group"></i>
                                        Ø³Ø·Ø­: {{ $exam->level }}
                                    </span>

                                    <span class="meta-item">
                                        <i class="fas fa-calendar-day"></i>
                                        ØªØ§Ø±ÛŒØ®:
                                        {{ $exam->start_at ? $exam->start_at->format('Y/m/d H:i') : 'Ù†Ø§Ù…Ø´Ø®Øµ' }}
                                    </span>

                                    <span class="meta-item">
                                        <i class="fas fa-question-circle"></i>
                                        Ø³ÙˆØ§Ù„Ø§Øª: {{ $exam->questions_count }}
                                    </span>
                                </div>
                            </div>

                            <div class="exam-badge">
                                <i class="fas fa-user-check"></i>
                                {{ $exam->attempts_count }} Ø´Ø±Ú©Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡
                            </div>
                        </a>
                    </ul>
                @empty
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h3 style="color: var(--dark); margin-bottom: 15px; font-weight: 900;">
                            Ù‡Ù†ÙˆØ² Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯
                        </h3>
                        <p class="empty-text">
                            Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ú©Ø§Ø± Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.
                            Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø¨Ø§ Ø³Ø·ÙˆØ­ Ù…ØªÙØ§ÙˆØª Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.
                        </p>
                        <a href="{{ route('teacher.exams.create') }}" class="btn-create-first">
                            <i class="fas fa-plus-circle"></i>
                            Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙˆÙ„ÛŒÙ† Ø¢Ø²Ù…ÙˆÙ†
                        </a>
                    </div>
                @endforelse
            </div>

            {{-- SIDEBAR --}}
            <div>
                {{-- QUICK ACTIONS --}}
                <div class="quick-actions-card">
                    <div class="card-header" style="border: none; padding: 0 0 20px 0;">
                        <div class="card-title">
                            <i class="fas fa-bolt"></i>
                            Ù…ÛŒØ§Ù†Ø¨Ø±Ù‡Ø§ÛŒ Ù…Ù‡Ù…
                        </div>
                    </div>

                    <div class="quick-grid">
                        <a href="{{ route('teacher.classes.index') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon"
                                    style="color: var(--primary); background: rgba(123, 104, 238, 0.1);">
                                    <i class="fas fa-people-group"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</h4>
                                    <p>Ø³Ø§Ø®ØªØŒ ÙˆÛŒØ±Ø§ÛŒØ´ Ùˆ Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>

                        <a href="{{ route('teacher.students.index') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon" style="color: #00D4AA; background: rgba(0, 212, 170, 0.1);">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>Ù„ÛŒØ³Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</h4>
                                    <p>Ø­Ø¶ÙˆØ± Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>

                        <a href="{{ route('teacher.reports.index') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon" style="color: #4361EE; background: rgba(67, 97, 238, 0.1);">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ Ùˆ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§</h4>
                                    <p>Ù†Ù…ÙˆØ¯Ø§Ø± Ùˆ Ù¾ÛŒØ´Ø±ÙØª</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>

                        <a href="{{ route('teacher.profile') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon" style="color: #FF6B9D; background: rgba(255, 107, 157, 0.1);">
                                    <i class="fas fa-user-cog"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†</h4>
                                    <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>
                    </div>
                </div>

                {{-- SYSTEM STATUS --}}
                <div class="system-status-card">
                    <div class="system-header">
                        <i class="fas fa-shield-check"></i>
                        <h3>ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</h3>
                    </div>
                    <p class="system-description">
                        Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ Ùˆ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù… Ø´Ù…Ø§Ø³Øª.
                        Ø¢Ø®Ø±ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ… Ùˆ ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
                    </p>

                    <div class="system-list">
                        <div class="system-item">
                            <i class="fas fa-bell"></i>
                            <p><strong>ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ:</strong> Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ØªØ´Ø±ÛŒØ­ÛŒ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.</p>
                        </div>
                        <div class="system-item">
                            <i class="fas fa-lightbulb"></i>
                            <p><strong>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯:</strong> Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ù„Ø§Ø³ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† ØªÙ…Ø±ÛŒÙ†ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯.</p>
                        </div>
                        <div class="system-item">
                            <i class="fas fa-chart-line"></i>
                            <p><strong>Ú¯Ø²Ø§Ø±Ø´:</strong> Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª Ú©Ù„Ø§Ø³ÛŒ Ø´Ù…Ø§ Û±ÛµÙª Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡ Ø§Ø³Øª.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø±
            const kpiCards = document.querySelectorAll('.kpi-card');
            kpiCards.forEach((card, i) => {
                card.style.animationDelay = (i * 0.1) + 's';
            });

            // ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-hero, .quick-action, .exam-item, .btn-create-first');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(30);
                    });
                });
            }

            // Ø§ÙÚ©Øª hover Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            const dashboardCards = document.querySelectorAll('.kpi-card, .quick-action, .exam-item');
            dashboardCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(20);
                    }
                });
            });

            // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ
            function showReminderModal() {
                const modal = document.createElement('div');
                modal.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: scaleIn 0.3s ease forwards;
            border: 3px solid var(--primary);
        `;

                modal.innerHTML = `
            <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
                <i class="fas fa-bell"></i>
            </div>
            <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ù…Ù‡Ù…!</h3>
            <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
                Ø´Ù…Ø§ ${document.querySelector('.kpi-card:nth-child(4) .kpi-value').textContent} Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ†Ø´Ø¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯.
                ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Ø¨Ø±Ø§ÛŒ Ø­ÙØ¸ Ú©ÛŒÙÛŒØª Ø¢Ù…ÙˆØ²Ø´ØŒ Ø­Ø¯Ø§Ú©Ø«Ø± Ø¸Ø±Ù Û²Û´ Ø³Ø§Ø¹Øª Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆÙ†Ø¯.
            </p>
            <div style="display: flex; gap: 10px;">
                <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove();"
                        style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                    Ø¨Ø§Ø´Ù‡
                </button>
                <button onclick="window.location.href='{{ route('teacher.exams.index') }}';"
                        style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                    Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </button>
            </div>
        `;

                document.body.appendChild(modal);

                const overlay = document.createElement('div');
                overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        `;
                document.body.appendChild(overlay);

                if (navigator.vibrate) {
                    navigator.vibrate([200, 100, 200]);
                }

                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        modal.remove();
                        overlay.remove();
                    }
                }, 10000);
            }

            // Ù†Ù…Ø§ÛŒØ´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…ÙˆØ¯Ø§Ù„ Ø§Ú¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±Ø±Ø³ÛŒ Ù†Ø´Ø¯Ù‡ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯
            const pendingReviews = parseInt('{{ $stats['pending_reviews'] ?? 0 }}');
            if (pendingReviews > 0) {
                setTimeout(() => {
                    showReminderModal();
                }, 3000);
            }
        });

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
        const style = document.createElement('style');
        style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .highlight {
        background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 900;
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 147: profile.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/profile.blade.php
ğŸ“ SIZE: 48,821 bytes
ğŸ•’ MODIFIED: 2025-12-04 20:32:17
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø¹Ù„Ù…')

@push('styles')
    <style>
        /* ØªÙ… Ú©Ø§Ù…Ù„ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* ========== HERO SECTION ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        /* ========== PROFILE LAYOUT ========== */
        .profile-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            margin-bottom: 35px;
        }

        @media (max-width: 992px) {
            .profile-layout {
                grid-template-columns: 1fr;
            }
        }

        /* ========== SIDEBAR ========== */
        .profile-sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .sidebar-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(123, 104, 238, 0.08);
            position: relative;
            overflow: hidden;
            animation: slideInLeft 0.5s ease-out;
        }

        .sidebar-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        /* ========== AVATAR SECTION ========== */
        .avatar-section {
            text-align: center;
        }

        .avatar-wrapper {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }

        .avatar-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--light);
            box-shadow: var(--shadow-lg);
            background: var(--gradient-1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3.5rem;
            font-weight: 900;
        }

        .avatar-status {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            border: 3px solid var(--light);
            box-shadow: var(--shadow-sm);
        }

        .avatar-upload {
            margin-top: 20px;
        }

        .btn-upload {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--primary-light);
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.9rem;
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
        }

        .btn-upload:hover {
            background: var(--gradient-1);
            color: white;
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* ========== QUICK STATS ========== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            transition: all 0.3s;
        }

        .stat-item:hover {
            background: var(--primary-light);
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 5px;
            line-height: 1;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--gray);
            font-weight: 700;
        }

        /* ========== MAIN CONTENT ========== */
        .profile-main {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .main-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(123, 104, 238, 0.08);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
            position: relative;
            z-index: 2;
        }

        .card-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-edit {
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.9rem;
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-edit:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        /* ========== INFO GRID ========== */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .info-item {
            margin-bottom: 20px;
        }

        .info-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-value {
            color: var(--dark);
            font-weight: 900;
            font-size: 1.1rem;
            padding: 12px 16px;
            background: var(--light-gray);
            border-radius: var(--radius-md);
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .info-value:hover {
            border-color: var(--primary-light);
            background: var(--light);
        }

        /* ========== FORM STYLES ========== */
        .form-group {
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .form-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .form-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 18px center;
            background-size: 16px;
            padding-left: 45px;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .form-textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s;
            min-height: 120px;
            resize: vertical;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        /* ========== PASSWORD SECTION ========== */
        .password-input-group {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.1rem;
        }

        /* ========== ACTION BUTTONS ========== */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
            position: relative;
            z-index: 2;
        }

        .btn-action {
            padding: 16px 24px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-action:active {
            transform: scale(0.97);
        }

        .btn-save {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-save:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-save::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-save:hover::before {
            left: 100%;
        }

        .btn-cancel {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-cancel:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .btn-danger {
            background: transparent;
            color: #FF6B9D;
            border: 2px solid #FF6B9D;
        }

        .btn-danger:hover {
            background: rgba(255, 107, 157, 0.1);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== SETTINGS GRID ========== */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .setting-item {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .setting-item:hover {
            border-color: var(--primary-light);
            transform: translateY(-5px);
            background: var(--light);
        }

        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .setting-title {
            font-weight: 900;
            font-size: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setting-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .setting-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--primary);
        }

        input:checked+.slider:before {
            transform: translateX(24px);
        }

        .setting-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin: 0;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .profile-container {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .sidebar-card,
            .main-card {
                padding: 25px;
            }

            .avatar-image {
                width: 120px;
                height: 120px;
                font-size: 2.8rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .btn-edit {
                align-self: stretch;
                justify-content: center;
            }

            .avatar-image {
                width: 100px;
                height: 100px;
                font-size: 2.2rem;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .btn-action,
        .btn-edit,
        .btn-upload,
        .form-input,
        .form-select {
            min-height: 48px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="profile-container">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span
                        style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ø¹Ù„Ù…
                    </span>
                    ğŸ‘¨â€ğŸ«
                </h1>
                <p class="hero-subtitle">
                    Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø®ØµÛŒØŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ Ù¾Ù†Ù„ Ø¢Ù…ÙˆØ²Ø´ÛŒ.
                </p>
            </div>
        </div>

        {{-- ========== PROFILE LAYOUT ========== --}}
        <div class="profile-layout">
            {{-- ========== SIDEBAR ========== --}}
            <div class="profile-sidebar">
                {{-- Avatar Card --}}
                <div class="sidebar-card avatar-section">
                    <div class="avatar-wrapper">
                        <div class="avatar-image">
                            {{ substr(auth()->user()->name ?? 'Ù…', 0, 1) }}
                        </div>
                        <div class="avatar-status"></div>
                    </div>

                    <h3 style="font-weight: 900; color: var(--dark); margin-bottom: 5px;">
                        {{ auth()->user()->name ?? 'Ù…Ø¹Ù„Ù… Ú¯Ø±Ø§Ù…ÛŒ' }}
                    </h3>
                    <p style="color: var(--gray); margin-bottom: 20px; font-size: 0.95rem;">
                        {{ auth()->user()->email ?? 'teacher@smartedu.ir' }}
                    </p>

                    <div class="avatar-upload">
                        <label for="avatar-upload" class="btn-upload">
                            <i class="fas fa-camera"></i>
                            ØªØºÛŒÛŒØ± ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                        </label>
                        <input type="file" id="avatar-upload" style="display: none;" accept="image/*">
                    </div>
                </div>

                {{-- Quick Stats Card --}}
                <div class="sidebar-card">
                    <h4
                        style="font-weight: 900; color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-chart-bar" style="color: var(--primary);"></i>
                        Ø¢Ù…Ø§Ø± Ø³Ø±ÛŒØ¹
                    </h4>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">Û±Û²</div>
                            <div class="stat-label">Ú©Ù„Ø§Ø³ ÙØ¹Ø§Ù„</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">Û±ÛµÛ¶</div>
                            <div class="stat-label">Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">Û´Û¸</div>
                            <div class="stat-label">Ø¢Ø²Ù…ÙˆÙ† Ø³Ø§Ø®ØªÙ‡â€ŒØ´Ø¯Ù‡</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">Û¹Ûµ%</div>
                            <div class="stat-label">Ø±Ø¶Ø§ÛŒØª</div>
                        </div>
                    </div>
                </div>

                {{-- Account Status Card --}}
                <div class="sidebar-card">
                    <h4
                        style="font-weight: 900; color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-shield-check" style="color: var(--accent);"></i>
                        ÙˆØ¶Ø¹ÛŒØª Ø­Ø³Ø§Ø¨
                    </h4>

                    <div
                        style="background: var(--light-gray); padding: 15px; border-radius: var(--radius-md); margin-bottom: 15px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-weight: 700; color: var(--gray);">Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª:</span>
                            <span style="color: var(--accent); font-weight: 900;">
                                <i class="fas fa-check-circle"></i>
                                ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: 700; color: var(--gray);">Ø¹Ø¶ÙˆÛŒØª Ø§Ø²:</span>
                            <span style="color: var(--dark); font-weight: 900;">Û±Û´Û°Û²/Û°Ûµ/Û±Ûµ</span>
                        </div>
                    </div>

                    <button class="btn-action btn-danger" style="width: 100%; margin-top: 10px;">
                        <i class="fas fa-sign-out-alt"></i>
                        Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨
                    </button>
                </div>
            </div>

            {{-- ========== MAIN CONTENT ========== --}}
            <div class="profile-main">
                {{-- Personal Information Card --}}
                <div class="main-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-user-circle"></i>
                            Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø®ØµÛŒ
                        </div>
                        <button class="btn-edit" onclick="toggleEditMode('personal')">
                            <i class="fas fa-edit"></i>
                            ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
                        </button>
                    </div>

                    <div class="info-grid" id="personal-info">
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-user"></i>
                                Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
                            </div>
                            <div class="info-value">{{ auth()->user()->name ?? 'Ù…Ø¹Ù„Ù… Ù†Ù…ÙˆÙ†Ù‡' }}</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-envelope"></i>
                                Ø§ÛŒÙ…ÛŒÙ„
                            </div>
                            <div class="info-value">{{ auth()->user()->email ?? 'teacher@smartedu.ir' }}</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-phone"></i>
                                ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡
                            </div>
                            <div class="info-value">Û°Û¹Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-graduation-cap"></i>
                                ØªØ®ØµØµ
                            </div>
                            <div class="info-value">Ø±ÛŒØ§Ø¶ÛŒØ§Øª Ùˆ ÙÛŒØ²ÛŒÚ©</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-building"></i>
                                Ù…Ø¯Ø±Ø³Ù‡/Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡
                            </div>
                            <div class="info-value">Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† ØªÛŒØ²Ù‡ÙˆØ´Ø§Ù† Ø´Ù‡ÛŒØ¯ Ø¨Ù‡Ø´ØªÛŒ</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-calendar-alt"></i>
                                Ø³Ø§Ø¨Ù‚Ù‡ ØªØ¯Ø±ÛŒØ³
                            </div>
                            <div class="info-value">Û¸ Ø³Ø§Ù„</div>
                        </div>
                    </div>

                    <form id="personal-form" style="display: none;" class="info-grid">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user"></i>
                                Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ
                            </label>
                            <input type="text" class="form-input" value="{{ auth()->user()->name ?? 'Ù…Ø¹Ù„Ù… Ù†Ù…ÙˆÙ†Ù‡' }}">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-envelope"></i>
                                Ø§ÛŒÙ…ÛŒÙ„
                            </label>
                            <input type="email" class="form-input"
                                value="{{ auth()->user()->email ?? 'teacher@smartedu.ir' }}">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-phone"></i>
                                ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡
                            </label>
                            <input type="tel" class="form-input" value="Û°Û¹Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-graduation-cap"></i>
                                ØªØ®ØµØµ
                            </label>
                            <select class="form-select">
                                <option>Ø±ÛŒØ§Ø¶ÛŒØ§Øª</option>
                                <option>ÙÛŒØ²ÛŒÚ©</option>
                                <option>Ø´ÛŒÙ…ÛŒ</option>
                                <option>Ø²ÛŒØ³Øªâ€ŒØ´Ù†Ø§Ø³ÛŒ</option>
                                <option>Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ</option>
                                <option>Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-building"></i>
                                Ù…Ø¯Ø±Ø³Ù‡/Ø¢Ù…ÙˆØ²Ø´Ú¯Ø§Ù‡
                            </label>
                            <input type="text" class="form-input" value="Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† ØªÛŒØ²Ù‡ÙˆØ´Ø§Ù† Ø´Ù‡ÛŒØ¯ Ø¨Ù‡Ø´ØªÛŒ">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i>
                                Ø³Ø§Ø¨Ù‚Ù‡ ØªØ¯Ø±ÛŒØ³
                            </label>
                            <input type="text" class="form-input" value="Û¸ Ø³Ø§Ù„">
                        </div>

                        <div class="action-buttons">
                            <button type="button" class="btn-action btn-save" onclick="saveChanges('personal')">
                                <i class="fas fa-save"></i>
                                Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                            </button>
                            <button type="button" class="btn-action btn-cancel" onclick="toggleEditMode('personal')">
                                <i class="fas fa-times"></i>
                                Ø§Ù†ØµØ±Ø§Ù
                            </button>
                        </div>
                    </form>
                </div>

                {{-- Security Settings Card --}}
                <div class="main-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-shield-alt"></i>
                            Ø§Ù…Ù†ÛŒØª Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
                        </div>
                        <button class="btn-edit" onclick="toggleEditMode('security')">
                            <i class="fas fa-edit"></i>
                            ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
                        </button>
                    </div>

                    <div id="security-info">
                        <div
                            style="background: var(--light-gray); padding: 20px; border-radius: var(--radius-lg); margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="color: var(--accent); font-size: 1.5rem;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div>
                                    <h4 style="font-weight: 900; color: var(--dark); margin: 0 0 5px;">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø´Ù…Ø§ Ø§Ù…Ù† Ø§Ø³Øª
                                    </h4>
                                    <p style="color: var(--gray); margin: 0; font-size: 0.9rem;">Ø¢Ø®Ø±ÛŒÙ† ØªØºÛŒÛŒØ±: Û² Ù‡ÙØªÙ‡ Ù¾ÛŒØ´
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form id="security-form" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-lock"></i>
                                Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± ÙØ¹Ù„ÛŒ
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="current-password">
                                <button type="button" class="toggle-password"
                                    onclick="togglePassword('current-password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-key"></i>
                                Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="new-password">
                                <button type="button" class="toggle-password" onclick="togglePassword('new-password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-key"></i>
                                ØªÚ©Ø±Ø§Ø± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="confirm-password">
                                <button type="button" class="toggle-password"
                                    onclick="togglePassword('confirm-password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button type="button" class="btn-action btn-save" onclick="saveChanges('security')">
                                <i class="fas fa-save"></i>
                                ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
                            </button>
                            <button type="button" class="btn-action btn-cancel" onclick="toggleEditMode('security')">
                                <i class="fas fa-times"></i>
                                Ø§Ù†ØµØ±Ø§Ù
                            </button>
                        </div>
                    </form>
                </div>

                {{-- Notification Settings Card --}}
                <div class="main-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bell"></i>
                            ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
                        </div>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-envelope"></i>
                                    Ø§ÛŒÙ…ÛŒÙ„ Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù… Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙØªÚ¯ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø§ÛŒÙ…ÛŒÙ„
                            </p>
                        </div>

                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-comment-alt"></i>
                                    Ù¾ÛŒØ§Ù…Ú© Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                Ø¯Ø±ÛŒØ§ÙØª Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ù…Ù‡Ù… Ùˆ ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒâ€ŒÙ‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾ÛŒØ§Ù…Ú©
                            </p>
                        </div>

                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-chart-line"></i>
                                    Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù‡Ø§Ù†Ù‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                            </p>
                        </div>

                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-exclamation-circle"></i>
                                    Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ ÙÙˆØ±ÛŒ
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                Ø¯Ø±ÛŒØ§ÙØª Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù…Ø´Ú©Ù„Ø§Øª ÙÙ†ÛŒ ÛŒØ§ Ù…ÙˆØ§Ø±Ø¯ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-action, .btn-edit, .btn-upload, .setting-item');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÙØ§ÛŒÙ„
            const avatarUpload = document.getElementById('avatar-upload');
            if (avatarUpload) {
                avatarUpload.addEventListener('change', function(e) {
                    if (e.target.files && e.target.files[0]) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const avatarImage = document.querySelector('.avatar-image');
                            avatarImage.style.backgroundImage = `url(${e.target.result})`;
                            avatarImage.style.backgroundSize = 'cover';
                            avatarImage.style.backgroundPosition = 'center';
                            avatarImage.innerHTML = '';

                            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
                            showToast('ØªØµÙˆÛŒØ± Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ Ø´Ø¯!', 'success');
                        };
                        reader.readAsDataURL(e.target.files[0]);
                    }
                });
            }

            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
            const animateElements = () => {
                const cards = document.querySelectorAll('.sidebar-card, .main-card');
                cards.forEach((card, i) => {
                    card.style.animationDelay = `${i * 0.15}s`;
                    card.style.animation = 'fadeIn 0.5s ease-out forwards';
                    card.style.opacity = '0';
                });
            };

            // Ø§Ø¬Ø±Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ ØµÙØ­Ù‡
            setTimeout(animateElements, 300);
        });

        // ØªØ§Ø¨Ø¹ toggle ÙˆÛŒØ±Ø§ÛŒØ´
        function toggleEditMode(section) {
            const infoSection = document.getElementById(`${section}-info`);
            const formSection = document.getElementById(`${section}-form`);
            const editButton = document.querySelector(`[onclick="toggleEditMode('${section}')"]`);

            if (infoSection.style.display !== 'none') {
                infoSection.style.display = 'none';
                formSection.style.display = 'block';
                editButton.innerHTML = '<i class="fas fa-times"></i> Ø§Ù†ØµØ±Ø§Ù';
                editButton.style.background = 'var(--light-gray)';
                editButton.style.color = 'var(--dark)';
            } else {
                infoSection.style.display = 'block';
                formSection.style.display = 'none';
                editButton.innerHTML = '<i class="fas fa-edit"></i> ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª';
                editButton.style.background = 'transparent';
                editButton.style.color = 'var(--primary)';
            }
        }

        // ØªØ§Ø¨Ø¹ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
        function saveChanges(section) {
            // Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
            const saveButton = document.querySelector(`[onclick="saveChanges('${section}')"]`);
            const originalText = saveButton.innerHTML;
            saveButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡...';
            saveButton.disabled = true;

            setTimeout(() => {
                saveButton.innerHTML = originalText;
                saveButton.disabled = false;

                toggleEditMode(section);

                // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
                showToast('ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!', 'success');

                // ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
            }, 1500);
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const toggleButton = input.nextElementSibling;

            if (input.type === 'password') {
                input.type = 'text';
                toggleButton.innerHTML = '<i class="fas fa-eye-slash"></i>';
            } else {
                input.type = 'password';
                toggleButton.innerHTML = '<i class="fas fa-eye"></i>';
            }
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ toast
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: ${type === 'success' ? 'var(--accent)' : 'var(--secondary)'};
        color: white;
        padding: 15px 20px;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
        animation: slideInLeft 0.3s ease;
        max-width: 350px;
    `;

            toast.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
        <span>${message}</span>
    `;

            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
        const style = document.createElement('style');
        style.textContent = `
    @keyframes fadeOut {
        from {
            opacity: 1;
            transform: translateX(0);
        }
        to {
            opacity: 0;
            transform: translateX(-30px);
        }
    }

    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 148: index.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/reports/index.blade.php
ğŸ“ SIZE: 41,409 bytes
ğŸ•’ MODIFIED: 2025-12-04 20:26:23
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ - Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…')

@push('styles')
    <style>
        /* ØªÙ… Ú©Ø§Ù…Ù„ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .reports-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        @keyframes progress-animation {
            from {
                width: 0%;
            }
        }

        /* ========== HERO HEADER ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        /* ========== DASHBOARD CARDS ========== */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }

        .dashboard-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .dashboard-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .card-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-badge {
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ========== PERFORMANCE METRICS ========== */
        .metric-item {
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .metric-name {
            font-weight: 800;
            font-size: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .metric-value {
            font-weight: 900;
            font-size: 1.1rem;
            color: var(--primary);
        }

        .metric-bar {
            height: 12px;
            background: var(--light-gray);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .metric-fill {
            height: 100%;
            border-radius: 10px;
            background: var(--gradient-1);
            width: 0;
            transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .metric-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        /* ========== QUICK INSIGHTS ========== */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .insight-card {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .insight-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-5px);
            background: var(--light);
        }

        .insight-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .insight-value {
            font-size: 1.8rem;
            font-weight: 900;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            line-height: 1;
        }

        .insight-label {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 700;
        }

        /* ========== RECOMMENDATIONS ========== */
        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            border-right: 4px solid var(--primary);
            transition: all 0.3s;
        }

        .recommendation-item:hover {
            background: var(--primary-light);
            transform: translateX(5px);
        }

        .recommendation-icon {
            color: var(--primary);
            font-size: 1.3rem;
            margin-top: 3px;
            flex-shrink: 0;
        }

        .recommendation-text {
            flex: 1;
            color: var(--dark);
            font-weight: 700;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* ========== STUDENT PROGRESS ========== */
        .progress-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .progress-table th {
            padding: 15px;
            text-align: right;
            font-weight: 900;
            color: var(--dark);
            font-size: 0.9rem;
            border-bottom: 2px solid var(--light-gray);
            background: rgba(123, 104, 238, 0.05);
        }

        .progress-table td {
            padding: 15px;
            text-align: right;
            font-weight: 700;
            color: var(--dark);
            border-bottom: 1px solid var(--light-gray);
        }

        .progress-table tr:hover {
            background: var(--primary-light);
        }

        .student-name-cell {
            font-weight: 900 !important;
            color: var(--dark);
        }

        .progress-cell {
            min-width: 150px;
        }

        .progress-bar-small {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill-small {
            height: 100%;
            border-radius: 4px;
            background: var(--gradient-2);
        }

        /* ========== CLASS COMPARISON ========== */
        .comparison-chart {
            height: 200px;
            display: flex;
            align-items: flex-end;
            gap: 15px;
            margin-top: 25px;
            padding: 20px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
        }

        .chart-bar {
            flex: 1;
            background: var(--gradient-1);
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            position: relative;
            transition: all 0.3s;
            min-height: 20px;
        }

        .chart-bar:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 900;
            color: var(--gray);
        }

        .chart-value {
            position: absolute;
            top: -30px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 900;
            color: var(--dark);
        }

        /* ========== ACTION BUTTONS ========== */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .btn-action {
            padding: 18px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-action:active {
            transform: scale(0.97);
        }

        .btn-download {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-download:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-download::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-download:hover::before {
            left: 100%;
        }

        .btn-export {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
        }

        .btn-export:hover {
            background: var(--primary-light);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .btn-share {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-share:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 1200px) {
            .dashboard-cards {
                grid-template-columns: repeat(2, 1fr);
            }

            .insights-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .reports-container {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .dashboard-cards {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .dashboard-card {
                padding: 25px;
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }

            .progress-table {
                display: block;
                overflow-x: auto;
            }

            .comparison-chart {
                flex-direction: column;
                height: auto;
                align-items: stretch;
            }

            .chart-bar {
                height: 40px !important;
                border-radius: var(--radius-sm);
            }

            .chart-label {
                position: relative;
                bottom: 0;
                margin-top: 5px;
            }

            .chart-value {
                position: relative;
                top: 0;
                margin-bottom: 5px;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .card-badge {
                align-self: flex-start;
            }

            .recommendation-item {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ Ø¨Ø²Ø±Ú¯ */
        .btn-action {
            min-height: 48px;
        }

        /* Ø§Ù†ØªØ®Ø§Ø¨ Ù…ØªÙ† */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="reports-container">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span
                        style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ
                    </span>
                    ğŸ“Š
                </h1>
                <p class="hero-subtitle">
                    ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ Ùˆ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø´Ù…Ø§. Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø±Ø§ÛŒ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¨Ù‡ØªØ±.
                </p>
            </div>
        </div>

        {{-- ========== DASHBOARD CARDS ========== --}}
        <div class="dashboard-cards">
            {{-- Ú©Ø§Ø±Øª ØªØ­Ù„ÛŒÙ„ Ú©Ù„Ø§Ø³ÛŒ --}}
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-chart-line"></i>
                        ØªØ­Ù„ÛŒÙ„ Ú©Ù„Ø§Ø³ÛŒ
                    </div>
                    <div class="card-badge">
                        <i class="fas fa-trend-up"></i>
                        Ø±ÙˆÙ†Ø¯ Ù…Ø«Ø¨Øª
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-header">
                        <div class="metric-name">
                            <i class="fas fa-user-graduate"></i>
                            Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª Ú©Ù„Ø§Ø³
                        </div>
                        <div class="metric-value">Û¸Û².Ûµ%</div>
                    </div>
                    <div class="metric-bar">
                        <div class="metric-fill" data-width="82.5"></div>
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-header">
                        <div class="metric-name">
                            <i class="fas fa-clipboard-check"></i>
                            Ù†Ø±Ø® ØªÚ©Ù…ÛŒÙ„ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                        </div>
                        <div class="metric-value">Û¹Û´%</div>
                    </div>
                    <div class="metric-bar">
                        <div class="metric-fill" data-width="94"></div>
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-header">
                        <div class="metric-name">
                            <i class="fas fa-clock"></i>
                            Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ
                        </div>
                        <div class="metric-value">Û²Û´ Ø¯Ù‚ÛŒÙ‚Ù‡</div>
                    </div>
                    <div class="metric-bar">
                        <div class="metric-fill" data-width="75"></div>
                    </div>
                </div>
            </div>

            {{-- Ú©Ø§Ø±Øª Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹ --}}
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-lightbulb"></i>
                        Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹
                    </div>
                    <div class="card-badge">
                        <i class="fas fa-bolt"></i>
                        Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ
                    </div>
                </div>

                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-icon">ğŸ“ˆ</div>
                        <div class="insight-value">+Û±Ûµ%</div>
                        <div class="insight-label">Ø±Ø´Ø¯ Ø¹Ù…Ù„Ú©Ø±Ø¯</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon">ğŸ¯</div>
                        <div class="insight-value">Û¸Û·%</div>
                        <div class="insight-label">ØªØ­Ù‚Ù‚ Ø§Ù‡Ø¯Ø§Ù</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon">â±ï¸</div>
                        <div class="insight-value">Û³.Û²</div>
                        <div class="insight-label">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø³Ø§Ø¹Øª Ù…Ø·Ø§Ù„Ø¹Ù‡</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon">â­</div>
                        <div class="insight-value">Û´.Û¸/Ûµ</div>
                        <div class="insight-label">Ø±Ø¶Ø§ÛŒØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</div>
                    </div>
                </div>
            </div>

            {{-- Ú©Ø§Ø±Øª ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ --}}
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-handshake"></i>
                        ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒØ§ÛŒ
                    </div>
                    <div class="card-badge">
                        <i class="fas fa-star"></i>
                        Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ÙˆÛŒÚ˜Ù‡
                    </div>
                </div>

                <div class="recommendation-item">
                    <div class="recommendation-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="recommendation-text">
                        Ø¨Ø± Ø±ÙˆÛŒ Ù…Ø¨Ø§Ø­Ø« Ù‡Ù†Ø¯Ø³Ù‡ Ùˆ Ù…Ø«Ù„Ø«Ø§Øª ØªÙ…Ø±Ú©Ø² Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ØŒ Ø¶Ø¹Ù Ø¹Ù…ÙˆÙ…ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´â€ŒÙ‡Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>

                <div class="recommendation-item">
                    <div class="recommendation-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="recommendation-text">
                        Ø¨Ø±Ø§ÛŒ Û³ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¨Ø§ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¶Ø¹ÛŒÙØŒ Ø¬Ù„Ø³Ø§Øª Ø±ÙØ¹ Ø§Ø´Ú©Ø§Ù„ Ú¯Ø±ÙˆÙ‡ÛŒ ØªØ±ØªÛŒØ¨ Ø¯Ù‡ÛŒØ¯.
                    </div>
                </div>

                <div class="recommendation-item">
                    <div class="recommendation-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="recommendation-text">
                        Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ú¯ÙˆÙ†Ù‡â€ŒØ§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯ Ú©Ù‡ ÙØ´Ø§Ø± Ø±ÙˆØ§Ù†ÛŒ Ú©Ù…â€ŒØªØ±ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´ÙˆØ¯.
                    </div>
                </div>
            </div>
        </div>

        {{-- ========== STUDENT PROGRESS TABLE ========== --}}
        <div class="dashboard-card" style="margin-bottom: 35px;">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-user-graduate"></i>
                    Ø±ÙˆÙ†Ø¯ Ù¾ÛŒØ´Ø±ÙØª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                </div>
                <div class="card-badge">
                    <i class="fas fa-sort"></i>
                    Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾ÛŒØ´Ø±ÙØª
                </div>
            </div>

            <div class="table-responsive">
                <table class="progress-table">
                    <thead>
                        <tr>
                            <th>Ù†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</th>
                            <th>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</th>
                            <th>Ù¾ÛŒØ´Ø±ÙØª ØªØ­ØµÛŒÙ„ÛŒ</th>
                            <th>Ù…Ø´Ø§Ø±Ú©Øª Ú©Ù„Ø§Ø³ÛŒ</th>
                            <th>ÙˆØ¶Ø¹ÛŒØª Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                Ù…Ø­Ù…Ø¯ Ø§Ø­Ù…Ø¯ÛŒ
                            </td>
                            <td>Û¹Û´%</td>
                            <td class="progress-cell">
                                Û¹Ûµ%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 95%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                Û¸Û¸%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 88%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #00D4AA; font-weight: 900;">
                                    <i class="fas fa-fire"></i>
                                    Ø¹Ø§Ù„ÛŒ
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                Ø³Ø§Ø±Ø§ Ù…Ø­Ù…Ø¯ÛŒ
                            </td>
                            <td>Û¸Û·%</td>
                            <td class="progress-cell">
                                Û¸Û²%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 82%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                Û¹Û±%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 91%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #FFD166; font-weight: 900;">
                                    <i class="fas fa-smile"></i>
                                    Ø®ÙˆØ¨
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                Ø¹Ù„ÛŒ Ø±Ø¶Ø§ÛŒÛŒ
                            </td>
                            <td>Û·Ûµ%</td>
                            <td class="progress-cell">
                                Û¶Ûµ%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 65%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                Û·Û°%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 70%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #FF6B9D; font-weight: 900;">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªÙˆØ¬Ù‡
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                ÙØ§Ø·Ù…Ù‡ Ú©Ø±ÛŒÙ…ÛŒ
                            </td>
                            <td>Û¹Û±%</td>
                            <td class="progress-cell">
                                Û¸Û¹%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 89%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                Û¹Ûµ%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 95%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #00D4AA; font-weight: 900;">
                                    <i class="fas fa-trophy"></i>
                                    Ø¨Ø±Ø¬Ø³ØªÙ‡
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        {{-- ========== CLASS COMPARISON ========== --}}
        <div class="dashboard-card" style="margin-bottom: 35px;">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-balance-scale"></i>
                    Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
                </div>
                <div class="card-badge">
                    <i class="fas fa-chart-bar"></i>
                    Ø¢Ù…Ø§Ø±ÛŒ
                </div>
            </div>

            <div class="comparison-chart">
                <div class="chart-bar" style="height: 85%;">
                    <div class="chart-value">Û¸Ûµ%</div>
                    <div class="chart-label">Ø±ÛŒØ§Ø¶ÛŒ Û±Û°Û±</div>
                </div>
                <div class="chart-bar" style="height: 92%;">
                    <div class="chart-value">Û¹Û²%</div>
                    <div class="chart-label">ÙÛŒØ²ÛŒÚ© Û±Û°Û²</div>
                </div>
                <div class="chart-bar" style="height: 78%;">
                    <div class="chart-value">Û·Û¸%</div>
                    <div class="chart-label">Ø´ÛŒÙ…ÛŒ Û±Û°Û³</div>
                </div>
                <div class="chart-bar" style="height: 88%;">
                    <div class="chart-value">Û¸Û¸%</div>
                    <div class="chart-label">Ø²ÛŒØ³Øª Û±Û°Û´</div>
                </div>
                <div class="chart-bar" style="height: 95%;">
                    <div class="chart-value">Û¹Ûµ%</div>
                    <div class="chart-label">Ù‡Ù†Ø¯Ø³Ù‡ Û±Û°Ûµ</div>
                </div>
            </div>
        </div>

        {{-- ========== ACTION BUTTONS ========== --}}
        <div class="action-buttons">
            <a href="#" class="btn-action btn-download">
                <i class="fas fa-file-pdf"></i>
                Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„ (PDF)
            </a>
            <a href="#" class="btn-action btn-export">
                <i class="fas fa-file-excel"></i>
                Ø®Ø±ÙˆØ¬ÛŒ Excel Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            </a>
            <a href="#" class="btn-action btn-share">
                <i class="fas fa-share-alt"></i>
                Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ø§ Ù‡Ù…Ú©Ø§Ø±Ø§Ù†
            </a>
            <button onclick="window.print()" class="btn-action" style="background: var(--gradient-3); color: white;">
                <i class="fas fa-print"></i>
                Ú†Ø§Ù¾ Ú¯Ø²Ø§Ø±Ø´
            </button>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù†ÙˆØ§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØª
            document.querySelectorAll('.metric-fill').forEach(fill => {
                const width = fill.getAttribute('data-width') || '0';
                setTimeout(() => {
                    fill.style.width = width + '%';
                }, 300);
            });

            // ÙˆÛŒØ¨Ø±Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-action, .insight-card, .recommendation-item, .progress-table tr');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // Ø§ÙÚ©Øª hover Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
            const dashboardCards = document.querySelectorAll('.dashboard-card');
            dashboardCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                });
            });

            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
            const animateElements = () => {
                const cards = document.querySelectorAll('.dashboard-card');
                cards.forEach((card, i) => {
                    card.style.animationDelay = `${i * 0.2}s`;
                    card.style.animation = 'fadeIn 0.5s ease-out forwards';
                    card.style.opacity = '0';
                });
            };

            // Ø§Ø¬Ø±Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø¹Ø¯ Ø§Ø² Ù„ÙˆØ¯ ØµÙØ­Ù‡
            setTimeout(animateElements, 300);

            // Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø³Ø·Ø± Ø¬Ø¯ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
            const tableRows = document.querySelectorAll('.progress-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('click', function(e) {
                    if (!e.target.closest('a')) {
                        const studentName = this.querySelector('.student-name-cell').textContent
                            .trim();
                        showStudentReport(studentName);
                    }
                });
            });

            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù†Ù…ÙˆØ¯Ø§Ø± Ù…Ù‚Ø§ÛŒØ³Ù‡
            const chartBars = document.querySelectorAll('.chart-bar');
            chartBars.forEach((bar, i) => {
                const originalHeight = bar.style.height;
                bar.style.height = '20px';
                setTimeout(() => {
                    bar.style.height = originalHeight;
                }, 500 + (i * 150));
            });
        });

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ú¯Ø²Ø§Ø±Ø´ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
        function showStudentReport(studentName) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        max-width: 500px;
        width: 90%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

            modal.innerHTML = `
        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
            <div style="font-size: 2.5rem; color: var(--primary);">
                <i class="fas fa-user-graduate"></i>
            </div>
            <div>
                <h3 style="margin: 0; color: var(--dark); font-size: 1.3rem; font-weight: 900;">Ú¯Ø²Ø§Ø±Ø´ ØªØ­Ù„ÛŒÙ„ÛŒ ${studentName}</h3>
                <p style="margin: 5px 0 0; color: var(--gray); font-size: 0.9rem;">ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ Ù¾ÛŒØ´Ø±ÙØª</p>
            </div>
        </div>

        <div style="background: var(--light-gray); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div style="text-align: center;">
                    <div style="font-size: 1.8rem; font-weight: 900; color: var(--primary);">Û¸Û·%</div>
                    <div style="font-size: 0.8rem; color: var(--gray);">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.8rem; font-weight: 900; color: var(--accent);">+Û±Û²%</div>
                    <div style="font-size: 0.8rem; color: var(--gray);">Ù¾ÛŒØ´Ø±ÙØª Ù…Ø§Ù‡Ø§Ù†Ù‡</div>
                </div>
            </div>
            <div style="font-size: 0.9rem; color: var(--dark); line-height: 1.6;">
                <strong>Ù†Ù‚Ø§Ø· Ù‚ÙˆØª:</strong> Ø­Ù„ Ù…Ø³Ø§Ø¦Ù„ ØªØ­Ù„ÛŒÙ„ÛŒØŒ Ù…Ø´Ø§Ø±Ú©Øª ÙØ¹Ø§Ù„ Ø¯Ø± Ú©Ù„Ø§Ø³
                <br>
                <strong>Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ù‡Ø¨ÙˆØ¯:</strong> Ø³Ø±Ø¹Øª Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
            </div>
        </div>

        <div style="display: flex; gap: 10px;">
            <button onclick="this.parentElement.remove(); if (this.parentElement.nextElementSibling) this.parentElement.nextElementSibling.remove();"
                    style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                Ø¨Ø³ØªÙ†
            </button>
            <button onclick="window.location.href='{{ route('teacher.students.index') }}';"
                    style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
            </button>
        </div>
    `;

            document.body.appendChild(modal);

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
            document.body.appendChild(overlay);

            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }

            setTimeout(() => {
                if (document.body.contains(modal)) {
                    modal.remove();
                    overlay.remove();
                }
            }, 10000);
        }

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
        const style = document.createElement('style');
        style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 149: attempts.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/students/attempts.blade.php
ğŸ“ SIZE: 7,979 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'AttemptÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .stat {
            background: #f8fafc;
            border-radius: 1rem;
            padding: 1rem;
            height: 100%
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }

        .progress-lg {
            height: 12px;
            border-radius: 999px;
        }

        .table thead th {
            white-space: nowrap;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <div>
                <h4 class="fw-bold mb-1">Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h4>
                <div class="text-muted small">
                    Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²:
                    <span class="fw-semibold">{{ $student->phone ?? 'â€”' }}</span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.students.show', $student->id) }}" class="btn btn-outline-secondary">
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                </a>
            </div>
        </div>

        @php
            // attempts Ù…Ù…Ú©Ù†Ù‡ paginate ÛŒØ§ collection Ø¨Ø§Ø´Ù‡
            $attemptsCol =
                $attempts instanceof \Illuminate\Pagination\LengthAwarePaginator
                    ? collect($attempts->items())
                    : collect($attempts);

            $attemptCount = $attemptsCol->count();
            $avgPercent = $attemptCount ? round($attemptsCol->avg('percent'), 2) : 0;
            $avgScore = $attemptCount ? round($attemptsCol->avg('score_obtained'), 2) : 0;

            $gradedCount = $attemptsCol->where('status', 'graded')->count();
            $submittedCount = $attemptsCol->where('status', 'submitted')->count();
        @endphp

        {{-- Summary Stats --}}
        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ØªØ¹Ø¯Ø§Ø¯ Attempt</div>
                    <div class="fs-3 fw-bold">{{ $attemptCount }}</div>
                    <div class="tiny muted mt-1">
                        graded: {{ $gradedCount }} â€¢ submitted: {{ $submittedCount }}
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¯Ø±ØµØ¯</div>
                    <div class="fs-3 fw-bold">{{ $avgPercent }}%</div>
                    <div class="progress progress-lg mt-2">
                        <div class="progress-bar" style="width: {{ min(100, max(0, $avgPercent)) }}%"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ù‡</div>
                    <div class="fs-3 fw-bold">{{ $avgScore }}</div>
                    <div class="tiny muted mt-1">
                        Ø¨Ø± Ø§Ø³Ø§Ø³ score_obtained
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ</div>
                    <div class="mt-2">
                        @if ($submittedCount > 0)
                            <span class="badge bg-warning text-dark badge-pill">
                                Ù…Ù†ØªØ¸Ø± ØªØµØ­ÛŒØ­ ØªØ´Ø±ÛŒØ­ÛŒ
                            </span>
                        @else
                            <span class="badge bg-success badge-pill">
                                Ù‡Ù…Ù‡ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ Ù†Ù‡Ø§ÛŒÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
                            </span>
                        @endif
                    </div>
                </div>
            </div>
        </div>

        {{-- Attempts Table --}}
        @if ($attemptCount)
            <div class="card card-soft">
                <div class="table-responsive">
                    <table class="table align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>Ø¢Ø²Ù…ÙˆÙ†</th>
                                <th>Ù†Ù…Ø±Ù‡</th>
                                <th>Ø¯Ø±ØµØ¯</th>
                                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                <th>Ø§Ø±Ø³Ø§Ù„</th>
                                <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($attempts as $a)
                                <tr>
                                    <td>{{ $a->id }}</td>

                                    <td class="fw-semibold">
                                        {{ $a->exam->title ?? 'â€”' }}
                                        <div class="tiny muted">
                                            Ø³Ø·Ø­: {{ $a->exam->level ?? 'â€”' }}
                                        </div>
                                    </td>

                                    <td>
                                        {{ $a->score_obtained ?? 0 }}
                                        /
                                        {{ $a->score_total ?? 0 }}
                                    </td>

                                    <td>
                                        <span class="fw-bold">{{ $a->percent ?? 0 }}%</span>
                                    </td>

                                    <td>
                                        @if ($a->status === 'graded')
                                            <span class="badge bg-success badge-pill">graded</span>
                                        @elseif($a->status === 'submitted')
                                            <span class="badge bg-warning text-dark badge-pill">submitted</span>
                                        @else
                                            <span class="badge bg-secondary badge-pill">{{ $a->status }}</span>
                                        @endif
                                    </td>

                                    <td class="tiny muted">
                                        {{ optional($a->submitted_at)->format('Y/m/d H:i') ?? 'â€”' }}
                                    </td>

                                    <td class="text-end">
                                        <a href="{{ route('teacher.attempts.show', $a->id) }}"
                                            class="btn btn-sm btn-outline-primary">
                                            Ø¬Ø²Ø¦ÛŒØ§Øª / ØªØµØ­ÛŒØ­
                                        </a>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>

            {{-- Pagination --}}
            @if ($attempts instanceof \Illuminate\Pagination\LengthAwarePaginator)
                <div class="mt-3">
                    {{ $attempts->links() }}
                </div>
            @endif
        @else
            <div class="text-muted mt-3">
                Ù‡Ù†ÙˆØ² ØªÙ„Ø§Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.
            </div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 150: index.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/students/index.blade.php
ğŸ“ SIZE: 51,108 bytes
ğŸ•’ MODIFIED: 2025-12-04 20:18:38
----------------------------------------------------------------------

âš ï¸  LARGE FILE - SHOWING FIRST 2000 CHARACTERS
..................................................

@extends('layouts.app')
@section('title', 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù…Ù†')

@push('styles')
    <style>
        /* ØªÙ… Ú©Ø§Ù…Ù„ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .students-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
         

... [CONTENT TRUNCATED] ...

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 151: show.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/students/show.blade.php
ğŸ“ SIZE: 11,393 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .stat {
            background: #f8fafc;
            border-radius: 1rem;
            padding: 1rem;
            height: 100%
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <div>
                <h4 class="fw-bold mb-1">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h4>
                <div class="text-muted small">
                    Ø´Ù†Ø§Ø³Ù‡: <span class="fw-semibold">#{{ $student->id }}</span>
                    â€¢ Ø´Ù…Ø§Ø±Ù‡: <span class="fw-semibold">{{ $student->phone }}</span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ url()->previous() }}" class="btn btn-outline-secondary">
                    Ø¨Ø§Ø²Ú¯Ø´Øª
                </a>

                {{-- Ù„ÛŒÙ†Ú© Ø±ÙØªÙ† Ø¨Ù‡ Ù„ÛŒØ³Øª AttemptÙ‡Ø§ --}}
                <a href="{{ route('teacher.students.attempts', $student->id) }}" class="btn btn-primary">
                    Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>

                {{--
            |--------------------------------------------------------------------------
            | NOTE:
            |--------------------------------------------------------------------------
            | Ø§Ú¯Ø± Ø§Ø³Ù… Ø±ÙˆØªØª ÙØ±Ù‚ Ø¯Ø§Ø±Ø¯ØŒ Ø§ÛŒÙ†Ø¬Ø§ Ø§ØµÙ„Ø§Ø­ Ú©Ù†.
            | Ù…Ø«Ù„Ø§:
            | route('teacher.students.attempts.index', $student->id)
            | ÛŒØ§
            | route('teacher.attempts.student', $student->id)
            |--------------------------------------------------------------------------
            --}}
            </div>
        </div>


        @php
            // Ø§Ú¯Ø± attempts Ø§Ø² Ú©Ù†ØªØ±Ù„Ø± Ù†ÛŒÙˆÙ…Ø¯Ù‡ Ø¨ÙˆØ¯ØŒ Ø®Ø§Ù„ÛŒ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±
            $attempts = $attempts ?? collect();

            $attemptCount = $attempts->count();
            $avgPercent = $attemptCount ? round($attempts->avg('percent'), 2) : 0;

            $lastAttempt = $attempts->sortByDesc('submitted_at')->first();

            $gradedCount = $attempts->where('status', 'graded')->count();
            $pendingCount = $attempts->where('status', 'submitted')->count(); // Ù…Ù†ØªØ¸Ø± ØªØµØ­ÛŒØ­ ØªØ´Ø±ÛŒØ­ÛŒ
        @endphp

        {{-- Summary Stats --}}
        <div class="row g-3 mb-4">

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ØªØ¹Ø¯Ø§Ø¯ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§</div>
                    <div class="fs-3 fw-bold">{{ $attemptCount }}</div>
                    <div class="tiny muted mt-1">
                        graded: {{ $gradedCount }} â€¢ submitted: {{ $pendingCount }}
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¯Ø±ØµØ¯</div>
                    <div class="fs-3 fw-bold">{{ $avgPercent }}%</div>
                    <div class="progress mt-2" style="height:12px;border-radius:999px">
                        <div class="progress-bar" style="width: {{ min(100, max(0, $avgPercent)) }}%"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">Ø¢Ø®Ø±ÛŒÙ† ØªÙ„Ø§Ø´</div>
                    @if ($lastAttempt)
                        <div class="fw-bold fs-5 mt-1">
                            {{ $lastAttempt->percent }}%
                        </div>
                        <div class="tiny muted mt-1">
                            ØªØ§Ø±ÛŒØ®: {{ optional($lastAttempt->submitted_at)->format('Y/m/d H:i') ?? 'â€”' }}
                        </div>
                    @else
                        <div class="muted mt-2">Ù‡Ù†ÙˆØ² ØªÙ„Ø§Ø´ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</div>
                    @endif
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ</div>
                    <div class="mt-2">
                        @if ($pendingCount > 0)
                            <span class="badge bg-warning text-dark badge-pill">
                                Ù…Ù†ØªØ¸Ø± ØªØµØ­ÛŒØ­ ØªØ´Ø±ÛŒØ­ÛŒ
                            </span>
                        @else
                            <span class="badge bg-success badge-pill">
                                Ù‡Ù…Ù‡ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ Ù†Ù‡Ø§ÛŒÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
                            </span>
                        @endif
                    </div>
                </div>
            </div>

        </div>


        {{-- Shared Classrooms --}}
        <div class="card card-soft mb-4">
            <div class="card-body">
                <h6 class="fw-bold mb-3">Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© Ø´Ù…Ø§ Ø¨Ø§ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h6>

                @php
                    $sharedClassrooms = $sharedClassrooms ?? collect();
                @endphp

                @if ($sharedClassrooms->count())
                    <div class="row g-2">
                        @foreach ($sharedClassrooms as $c)
                            <div class="col-md-4">
                                <div class="ans-box d-flex justify-content-between align-items-center">
                                    <div>
                                        <div class="fw-semibold">{{ $c->title }}</div>
                                        <div class="tiny muted">{{ $c->subject ?? 'â€”' }} â€¢ {{ $c->grade ?? 'â€”' }}</div>
                                    </div>
                                    <a href="{{ route('teacher.classes.show', $c->id) }}"
                                        class="btn btn-sm btn-outline-primary">
                                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù„Ø§Ø³
                                    </a>
                                </div>
                            </div>
                        @endforeach
                    </div>
                @else
                    <div class="text-muted">Ú©Ù„Ø§Ø³ÛŒ Ù…Ø´ØªØ±Ú© ÛŒØ§ÙØª Ù†Ø´Ø¯.</div>
                @endif
            </div>
        </div>


        {{-- Recent Attempts Preview --}}
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="fw-bold mb-0">Ø¢Ø®Ø±ÛŒÙ† ØªÙ„Ø§Ø´â€ŒÙ‡Ø§</h5>
            <a href="{{ route('teacher.students.attempts', $student->id) }}" class="tiny text-decoration-none">
                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡ â†’
            </a>
        </div>

        @if ($attempts->count())
            <div class="card card-soft">
                <div class="table-responsive">
                    <table class="table align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>Ø¢Ø²Ù…ÙˆÙ†</th>
                                <th>Ù†Ù…Ø±Ù‡</th>
                                <th>Ø¯Ø±ØµØ¯</th>
                                <th>ÙˆØ¶Ø¹ÛŒØª</th>
                                <th>ØªØ§Ø±ÛŒØ® Ø§Ø±Ø³Ø§Ù„</th>
                                <th class="text-end">Ø¹Ù…Ù„ÛŒØ§Øª</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($attempts->sortByDesc('submitted_at')->take(5) as $a)
                                <tr>
                                    <td>{{ $a->id }}</td>
                                    <td class="fw-semibold">
                                        {{ $a->exam->title ?? 'â€”' }}
                                    </td>
                                    <td>
                                        {{ $a->score_obtained ?? 0 }} / {{ $a->score_total ?? 0 }}
                                    </td>
                                    <td>
                                        <span class="fw-bold">{{ $a->percent ?? 0 }}%</span>
                                    </td>
                                    <td>
                                        @if ($a->status === 'graded')
                                            <span class="badge bg-success badge-pill">graded</span>
                                        @elseif($a->status === 'submitted')
                                            <span class="badge bg-warning text-dark badge-pill">submitted</span>
                                        @else
                                            <span class="badge bg-secondary badge-pill">{{ $a->status }}</span>
                                        @endif
                                    </td>
                                    <td class="tiny muted">
                                        {{ optional($a->submitted_at)->format('Y/m/d H:i') ?? 'â€”' }}
                                    </td>
                                    <td class="text-end">
                                        <a href="{{ route('teacher.attempts.show', $a->id) }}"
                                            class="btn btn-sm btn-outline-primary">
                                            Ø¬Ø²Ø¦ÛŒØ§Øª / ØªØµØ­ÛŒØ­
                                        </a>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>
        @else
            <div class="text-muted mt-3">Ù‡Ù†ÙˆØ² ØªÙ„Ø§Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</div>
        @endif


        {{--
    |--------------------------------------------------------------------------
    | CONTROLLER EXPECTATION (for your reference)
    |--------------------------------------------------------------------------
    | Ø¯Ø± TeacherStudentController@show Ø¨Ù‡ØªØ± Ø§Ø³Øª Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨ÙØ±Ø³ØªÛŒ:
    |
    | $student = User::students()->findOrFail($id);
    |
    | // Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© Ø§ÛŒÙ† Ù…Ø¹Ù„Ù… Ø¨Ø§ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
    | $sharedClassrooms = Classroom::where('teacher_id', auth()->id())
    |     ->whereHas('students', fn($q) => $q->where('users.id', $student->id))
    |     ->get();
    |
    | // AttemptÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡Ù…ÛŒÙ† Ù…Ø¹Ù„Ù…
    | $attempts = Attempt::where('student_id', $student->id)
    |    ->whereHas('exam', fn($q) => $q->where('teacher_id', auth()->id()))
    |    ->with('exam')
    |    ->latest('submitted_at')
    |    ->get();
    |
    | return view('dashboard.teacher.students.show',
    |     compact('student','sharedClassrooms','attempts'));
    |--------------------------------------------------------------------------
    --}}
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 152: index.blade.php
ğŸ“ PATH: resources/views/dashboard/teacher/subjects/index.blade.php
ğŸ“ SIZE: 1,108 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
    <div class="container py-4">
        <h4 class="mb-3">Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø³â€ŒÙ‡Ø§ (Subjects)</h4>

        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif

        <div class="card shadow-sm">
            <div class="card-body">
                <form method="POST" action="{{ route('teacher.subjects.store') }}">
                    @csrf
                    <div class="mb-3">
                        <label class="form-label">Ù†Ø§Ù… Ø¯Ø±Ø³</label>
                        <input type="text" name="title" class="form-control @error('title') is-invalid @enderror"
                            value="{{ old('title') }}" placeholder="Ù…Ø«Ù„Ø§Ù‹ Ø±ÛŒØ§Ø¶ÛŒ">
                        @error('title')
                            <div class="invalid-feedback">{{ $message }}</div>
                        @enderror
                    </div>
                    <button class="btn btn-primary">Ø«Ø¨Øª Ø¯Ø±Ø³</button>
                </form>
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 153: index.blade.php
ğŸ“ PATH: resources/views/landing/index.blade.php
ğŸ“ SIZE: 1,343 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@extends('layouts.guest')

@section('title', 'Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ù…ÙˆØ²Ø´ | Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† ØªÙ‚ÙˆÛŒØªÛŒØŒ Ú©Ù†Ú©ÙˆØ± Ùˆ Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯')

@section('content')
    @include('shared.navigation')

    @include('partials.landing.hero')
    @include('partials.landing.features')
    @include('partials.landing.levels')
    @include('partials.landing.pricing')
    @include('partials.landing.screenshots')
    @include('partials.landing.samples')
    @include('partials.landing.demo')
    @include('partials.landing.testimonials')
    @include('partials.landing.cta')
    @include('partials.landing.faq')
    @include('partials.landing.footer')

    @include('shared.auth-modal')

    {{-- ÙÙ‚Ø· Ø§Ú¯Ø± Ø³Ø±ÙˆØ± Ú¯ÙØª Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ù‚Ø´ Ù‡Ø³ØªØŒ Ù…ÙˆØ¯Ø§Ù„ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù† --}}
    @if (session('need_role'))
        @push('scripts')
            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const authModalEl = document.getElementById('authModal');
                    if (!authModalEl || !window.bootstrap) return;

                    const authModal = new bootstrap.Modal(authModalEl);
                    authModal.show();

                    if (window.showStep) showStep(3);
                });
            </script>
        @endpush
    @endif
@endsection

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 154: app.blade.php
ğŸ“ PATH: resources/views/layouts/app.blade.php
ğŸ“ SIZE: 3,538 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:30:17
----------------------------------------------------------------------

<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>@yield('title', 'Smart Edu | Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ')</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

    <link rel="stylesheet" href="{{ asset('assets/css/dashboard.css') }}">

    <style>
        body {
            font-family: Vazirmatn, system-ui, -apple-system, "Segoe UI", sans-serif;
            background: #f8fafc;
            padding-top: 70px;
            /* ÙØ§ØµÙ„Ù‡ Ø²ÛŒØ± navbar Ø«Ø§Ø¨Øª */
        }

        .app-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-body {
            flex: 1;
            display: flex;
            min-height: calc(100vh - 70px);
        }

        .sidebar-wrap {
            width: 260px;
            flex-shrink: 0;
            background: #fff;
            border-left: 1px solid #e5e7eb;
        }

        .content-wrap {
            flex: 1;
            padding: 1.25rem;
            background: #f8fafc;
        }

        @media (max-width: 992px) {
            .sidebar-wrap {
                width: 220px;
            }
        }

        @media (max-width: 768px) {
            .app-body {
                flex-direction: column;
            }

            .sidebar-wrap {
                width: 100%;
                border-left: 0;
                border-bottom: 1px solid #e5e7eb;
            }
        }
    </style>

    @stack('styles')
</head>

<body>
    <div class="app-wrapper">

        {{-- NAVBAR --}}
        @include('layouts.app.navbar')

        <div class="app-body">

{{-- SIDEBAR --}}
<div class="sidebar-wrap">
    @php
        $user = auth()->user();

        // Ù†Ù‚Ø´ ÙØ¹Ù„ÛŒ: Ø§ÙˆÙ„ selected_role (Ù†Ù‚Ø´ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ)ØŒ Ø§Ú¯Ø± Ù†Ø¨ÙˆØ¯ status
        $role = $role
            ?? ($user->selected_role ?? null)
            ?? ($user->status ?? null);
    @endphp

                @if ($role === 'student')
                    @include('layouts.app.sidebar-student')

                @elseif ($role === 'teacher')
                    @include('layouts.app.sidebar-teacher')

                @elseif ($role === 'admin')
                    {{-- âœ… Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± Ø§Ø¯Ù…ÛŒÙ† ØªÙˆÛŒ partials Ù‡Ø³Øª --}}
                    @include('layouts.app.sidebar-admin')

                @else
                    <div class="p-3 text-muted small">
                        Ù†Ù‚Ø´ Ø´Ù…Ø§ Ù…Ø´Ø®Øµ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø§Ø² ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯.
                    </div>
                @endif
            </div>


            {{-- MAIN --}}
            <main class="content-wrap">
                @yield('content')
            </main>

        </div>
    </div>

    <form id="logoutForm" method="POST" action="{{ route('logout') }}" class="d-none">
        @csrf
    </form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @stack('scripts')
</body>

</html>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 155: navbar.blade.php
ğŸ“ PATH: resources/views/layouts/app/navbar.blade.php
ğŸ“ SIZE: 2,695 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top shadow-sm">
    <div class="container-fluid px-3">

        {{-- Brand --}}
        <a class="navbar-brand d-flex align-items-center gap-2 fw-bold" href="{{ route('landing') }}">
            <i class="fas fa-graduation-cap"></i>
            Smart Edu
        </a>

        {{-- Mobile sidebar toggle (ÙØ¹Ù„Ø§Ù‹ ÙÙ‚Ø· UI) --}}
        <button class="btn btn-outline-light d-lg-none ms-2" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#sidebarOffcanvas">
            <i class="fas fa-bars"></i>
        </button>

        {{-- Right side --}}
        <div class="ms-auto d-flex align-items-center gap-3">

            {{-- notifications placeholder --}}
            <button class="btn btn-light btn-sm position-relative">
                <i class="fas fa-bell text-primary"></i>
                <span class="position-absolute top-0 start-0 translate-middle badge rounded-pill bg-danger">
                    0
                </span>
            </button>

            {{-- User dropdown --}}
            <div class="dropdown">
                <button class="btn btn-outline-light btn-sm dropdown-toggle d-flex align-items-center gap-2"
                    type="button" data-bs-toggle="dropdown">
                    <i class="fas fa-user-circle fs-5"></i>
                    <span class="d-none d-md-inline">
                        {{ auth()->user()->name ?? 'Ú©Ø§Ø±Ø¨Ø±' }}
                    </span>
                </button>

                <ul class="dropdown-menu dropdown-menu-end text-end shadow">
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="fas fa-user-edit ms-2"></i>
                            Ù¾Ø±ÙˆÙØ§ÛŒÙ„
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="fas fa-repeat ms-2"></i>
                            ØªØºÛŒÛŒØ± Ù†Ù‚Ø´
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <form method="POST" action="{{ route('logout') }}">
                            @csrf
                            <button class="dropdown-item text-danger">
                                <i class="fas fa-sign-out-alt ms-2"></i>
                                Ø®Ø±ÙˆØ¬
                            </button>
                        </form>
                    </li>
                </ul>
            </div>

        </div>
    </div>
</nav>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 156: sidebar-admin.blade.php
ğŸ“ PATH: resources/views/layouts/app/sidebar-admin.blade.php
ğŸ“ SIZE: 4,773 bytes
ğŸ•’ MODIFIED: 2025-12-07 13:33:59
----------------------------------------------------------------------

{{-- resources/views/partials/sidebar-admin.blade.php --}}
@php
    $currentRoute = request()->route()?->getName();
    $isTaxonomyActive =
        str_starts_with($currentRoute ?? '', 'admin.sections') ||
        str_starts_with($currentRoute ?? '', 'admin.grades') ||
        str_starts_with($currentRoute ?? '', 'admin.branches') ||
        str_starts_with($currentRoute ?? '', 'admin.fields') ||
        str_starts_with($currentRoute ?? '', 'admin.subfields') ||
        str_starts_with($currentRoute ?? '', 'admin.subject-types') ||
        str_starts_with($currentRoute ?? '', 'admin.subjects');

    $openClass = $isTaxonomyActive ? 'show' : '';
    $activeClass = $isTaxonomyActive ? 'active' : '';
@endphp

<aside class="sidebar-admin bg-white border-start h-100" style="width:100%;">

    <div class="px-3 py-2">

        {{-- ===== Dashboard ===== --}}
        <a href="{{ route('admin.dashboard') }}"
            class="d-flex align-items-center gap-2 py-2 px-2 rounded text-decoration-none
                  {{ $currentRoute === 'admin.dashboard' ? 'bg-light fw-bold' : '' }}">
            <i class="fas fa-home text-primary"></i>
            <span>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ†</span>
        </a>

        <hr class="my-3">

        {{-- ===== Taxonomy Group ===== --}}
        <div class="mb-2">
            <button
                class="btn w-100 text-start d-flex justify-content-between align-items-center px-2 py-2 rounded {{ $activeClass }}"
                data-bs-toggle="collapse" data-bs-target="#taxonomyMenu"
                aria-expanded="{{ $isTaxonomyActive ? 'true' : 'false' }}">
                <span class="d-flex align-items-center gap-2">
                    <i class="fas fa-sitemap text-success"></i>
                    Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø³Ø§Ø®ØªØ§Ø±
                </span>
                <i class="fas fa-chevron-down small"></i>
            </button>

            <div id="taxonomyMenu" class="collapse {{ $openClass }} mt-2">

                <a href="{{ route('admin.sections.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.sections') ? 'bg-light fw-bold' : '' }}">
                    ğŸ“Œ Ù…Ù‚Ø§Ø·Ø¹ (Sections)
                </a>

                <a href="{{ route('admin.grades.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.grades') ? 'bg-light fw-bold' : '' }}">
                    ğŸ“ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ (Grades)
                </a>

                <a href="{{ route('admin.branches.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.branches') ? 'bg-light fw-bold' : '' }}">
                    ğŸ§­ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ (Branches)
                </a>

                <a href="{{ route('admin.fields.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.fields') ? 'bg-light fw-bold' : '' }}">
                    ğŸ­ Ø²Ù…ÛŒÙ†Ù‡â€ŒÙ‡Ø§ (Fields)
                </a>

                <a href="{{ route('admin.subfields.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.subfields') ? 'bg-light fw-bold' : '' }}">
                    ğŸ”¬ Ø²ÛŒØ±Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ (Subfields)
                </a>

                <a href="{{ route('admin.subject-types.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.subject-types') ? 'bg-light fw-bold' : '' }}">
                    ğŸ§© Ù†ÙˆØ¹ Ø¯Ø±Ø³ (Subject Types)
                </a>

                <a href="{{ route('admin.subjects.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.subjects') ? 'bg-light fw-bold' : '' }}">
                    ğŸ“š Ø¯Ø±ÙˆØ³ (Subjects)
                </a>

            </div>
        </div>

        <hr class="my-3">

        {{-- ===== Reports / Profile (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) ===== --}}
        <a href="#" class="d-flex align-items-center gap-2 py-2 px-2 rounded text-decoration-none">
            <i class="fas fa-chart-line text-warning"></i>
            <span>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</span>
        </a>

        <a href="#" class="d-flex align-items-center gap-2 py-2 px-2 rounded text-decoration-none">
            <i class="fas fa-user-cog text-secondary"></i>
            <span>Ù¾Ø±ÙˆÙØ§ÛŒÙ„</span>
        </a>

    </div>
</aside>

{{-- ÙØ§ØµÙ„Ù‡ Ù…Ø­ØªÙˆØ§ Ø§Ø² Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± --}}
<style>
    .sidebar-admin a:hover {
        background: #f7f7f7;
    }
</style>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 157: sidebar-student.blade.php
ğŸ“ PATH: resources/views/layouts/app/sidebar-student.blade.php
ğŸ“ SIZE: 2,912 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<aside class="sidebar bg-white border-end p-3 h-100">
    <div class="fw-bold mb-3 text-primary">
        <i class="fas fa-user-graduate ms-1"></i>
        Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
    </div>

    <ul class="nav flex-column gap-1">

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('dashboard.student') ? 'active' : '' }}"
                href="{{ route('student.index') }}">
                <i class="fas fa-home ms-2"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.exams.*') ? 'active' : '' }}"
                href="{{ route('student.exams.index') }}">
                <i class="fas fa-file-pen ms-2"></i> Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.reports.*') ? 'active' : '' }}"
                href="{{ route('student.reports.index') }}">
                <i class="fas fa-chart-line ms-2"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.learning-path') ? 'active' : '' }}"
                href="{{ route('student.learning-path') }}">
                <i class="fas fa-route ms-2"></i> Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.my-teachers.*') ? 'active' : '' }}"
                href="{{ route('student.my-teachers.index') }}">
                <i class="bi bi-people-fill ms-1"></i>

                Ù…Ø¹Ù„Ù…Ø§Ù† Ù…Ù†
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.classrooms.*') ? 'active' : '' }}"
                href="{{ route('student.classrooms.index') }}">
                <i class="fas fa-users ms-2"></i> Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.support.*') ? 'active' : '' }}"
                href="{{ route('student.support.index') }}">
                <i class="fas fa-headset ms-2"></i> Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.profile') ? 'active' : '' }}"
                href="{{ route('student.profile') }}">
                <i class="fas fa-user ms-2"></i> Ù¾Ø±ÙˆÙØ§ÛŒÙ„
            </a>
        </li>

        <li class="nav-item mt-2">
            <hr>
        </li>

        <li class="nav-item">
            <a class="nav-link text-danger" href="#"
                onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
                <i class="fas fa-sign-out-alt ms-2"></i> Ø®Ø±ÙˆØ¬
            </a>
        </li>

    </ul>
</aside>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 158: sidebar-teacher.blade.php
ğŸ“ PATH: resources/views/layouts/app/sidebar-teacher.blade.php
ğŸ“ SIZE: 2,323 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<aside class="sidebar bg-white border-end p-3 h-100">
    <div class="fw-bold mb-3 text-success">
        <i class="fas fa-chalkboard-teacher ms-1"></i>
        Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…
    </div>

    <ul class="nav flex-column gap-1">

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('dashboard.teacher') ? 'active' : '' }}"
                href="{{ route('teacher.index') }}">
                <i class="fas fa-home ms-2"></i> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.exams.*') ? 'active' : '' }}"
                href="{{ route('teacher.exams.index') }}">
                <i class="fas fa-plus-circle ms-2"></i> Ø³Ø§Ø®Øª / Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ø²Ù…ÙˆÙ†
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.classes.*') ? 'active' : '' }}"
                href="{{ route('teacher.classes.index') }}">
                <i class="fas fa-users ms-2"></i> Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.students') ? 'active' : '' }}"
                href="{{ route('teacher.students.index') }}">
                <i class="fas fa-user-graduate ms-2"></i> Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.reports.*') ? 'active' : '' }}"
                href="{{ route('teacher.reports.index') }}">
                <i class="fas fa-chart-bar ms-2"></i> Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.profile') ? 'active' : '' }}"
                href="{{ route('teacher.profile') }}">
                <i class="fas fa-user ms-2"></i> Ù¾Ø±ÙˆÙØ§ÛŒÙ„
            </a>
        </li>

        <li class="nav-item mt-2">
            <hr>
        </li>

        <li class="nav-item">
            <a class="nav-link text-danger" href="#"
                onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
                <i class="fas fa-sign-out-alt ms-2"></i> Ø®Ø±ÙˆØ¬
            </a>
        </li>

    </ul>
</aside>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 159: sidebar.blade.php
ğŸ“ PATH: resources/views/layouts/app/sidebar.blade.php
ğŸ“ SIZE: 4,134 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

{{-- ========== Desktop Sidebar ========== --}}
<div class="bg-white border-end vh-100 position-fixed top-0 end-0 pt-5 d-none d-lg-block"
    style="width: 240px; margin-top:56px;">
    <div class="p-3">

        <div class="text-center mb-4">
            <div class="fw-bold">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</div>
            <small class="text-muted">
                {{ auth()->user()->phone ?? 'Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡' }}
            </small>
        </div>

        <ul class="nav flex-column gap-1">

            <li class="nav-item">
                <a class="nav-link active rounded-3" href="#">
                    <i class="fas fa-home ms-2"></i>
                    Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-file-pen ms-2"></i>
                    Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-chart-line ms-2"></i>
                    Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-medal ms-2"></i>
                    Ø§Ù…ØªÛŒØ§Ø² Ùˆ Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-gear ms-2"></i>
                    ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                </a>
            </li>

        </ul>

        <hr>

        <form method="POST" action="{{ route('logout') }}">
            @csrf
            <button class="btn btn-outline-danger w-100 rounded-3">
                <i class="fas fa-sign-out-alt ms-2"></i>
                Ø®Ø±ÙˆØ¬
            </button>
        </form>

    </div>
</div>


{{-- ========== Mobile Offcanvas Sidebar ========== --}}
<div class="offcanvas offcanvas-end d-lg-none" tabindex="-1" id="sidebarOffcanvas">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold">
            <i class="fas fa-graduation-cap ms-2"></i>
            Smart Edu
        </h5>
        <button type="button" class="btn-close ms-0" data-bs-dismiss="offcanvas"></button>
    </div>

    <div class="offcanvas-body">

        <div class="text-center mb-4">
            <div class="fw-bold">Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ</div>
            <small class="text-muted">
                {{ auth()->user()->phone ?? 'Ø´Ù…Ø§Ø±Ù‡ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡' }}
            </small>
        </div>

        <ul class="nav flex-column gap-1">

            <li class="nav-item">
                <a class="nav-link active rounded-3" href="#">
                    <i class="fas fa-home ms-2"></i>
                    Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-file-pen ms-2"></i>
                    Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-chart-line ms-2"></i>
                    Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-medal ms-2"></i>
                    Ø§Ù…ØªÛŒØ§Ø² Ùˆ Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-gear ms-2"></i>
                    ØªÙ†Ø¸ÛŒÙ…Ø§Øª
                </a>
            </li>

        </ul>

        <hr>

        <form method="POST" action="{{ route('logout') }}">
            @csrf
            <button class="btn btn-outline-danger w-100 rounded-3">
                <i class="fas fa-sign-out-alt ms-2"></i>
                Ø®Ø±ÙˆØ¬
            </button>
        </form>

    </div>
</div>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 160: guest.blade.php
ğŸ“ PATH: resources/views/layouts/guest.blade.php
ğŸ“ SIZE: 1,670 bytes
ğŸ•’ MODIFIED: 2025-12-06 09:57:09
----------------------------------------------------------------------

<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>@yield('title', 'Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ù…ÙˆØ²Ø´ | Smart Edu')</title>

    {{-- Vendor CSS --}}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

    {{-- Shared Theme (Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¨Ø§ partialÙ‡Ø§) --}}
    <link rel="stylesheet" href="{{ asset('assets/css/theme.css') }}">

    {{-- Landing CSS --}}
    <link rel="stylesheet" href="{{ asset('assets/css/landing.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/app.css') }}">

    <style>
        body {
            font-family: Vazirmatn, system-ui, -apple-system, "Segoe UI", sans-serif;
            background: #f8fafc;
            padding-top: 70px;
            /* Ø§Ú¯Ø± navbar Ø«Ø§Ø¨Øª Ø¨Ø§Ø´Ø¯ */
        }
    </style>

    @stack('styles')
</head>

<body>

    @yield('content')

    {{-- Vendor JS --}}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    {{-- Project JS --}}
    <script src="{{ asset('assets/js/app.js') }}"></script>
    <script src="{{ asset('assets/js/landing.js') }}"></script>
    <script src="{{ asset('assets/js/auth.js') }}"></script>

    @stack('scripts')
</body>

</html>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 161: cta.blade.php
ğŸ“ PATH: resources/views/partials/landing/cta.blade.php
ğŸ“ SIZE: 1,987 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section>
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="cta h-100">
                    <h3 class="fw-black mb-2">Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†</h3>
                    <p class="text-muted">
                        Ø¨Ø§ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø¸Ù…ØŒ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…ÛŒâ€ŒÙÙ‡Ù…ÛŒØ¯ Ú©Ø¬Ø§Ù‡Ø§ Ø¶Ø¹Ù Ø¯Ø§Ø±ÛŒØ¯ Ùˆ Ú†Ù‡ ØªÙ…Ø±ÛŒÙ†ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø´Ù…Ø§Ø³Øª.
                    </p>
                    <ul class="text-muted small">
                        <li>Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ¯Ø§Ø±</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± Ùˆ Ù…Ø³ÛŒØ± Ø§Ø®ØªØµØ§ØµÛŒ</li>
                        <li>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙ…Ø±ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø±ÙØ¹ Ø¶Ø¹Ùâ€ŒÙ‡Ø§</li>
                    </ul>
                    <button class="btn btn-primary px-4" data-bs-toggle="modal" data-bs-target="#authModal">
                        Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                    </button>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="cta h-100">
                    <h3 class="fw-black mb-2">Ø¨Ø±Ø§ÛŒ Ù…Ø¹Ù„Ù…Ø§Ù†</h3>
                    <p class="text-muted">
                        Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù… Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ†ØŒ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³ Ùˆ Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø¹Ù…Ù„Ú©Ø±Ø¯.
                    </p>
                    <ul class="text-muted small">
                        <li>Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³ Ùˆ Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</li>
                        <li>Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø§ Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„</li>
                        <li>Ú¯Ø²Ø§Ø±Ø´ Ùˆ ØªØ­Ù„ÛŒÙ„ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ù„Ø§Ø³</li>
                    </ul>
                    <button class="btn btn-outline-primary px-4" data-bs-toggle="modal" data-bs-target="#authModal">
                        Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹Ù„Ù…
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 162: demo.blade.php
ğŸ“ PATH: resources/views/partials/landing/demo.blade.php
ğŸ“ SIZE: 4,143 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="demo" class="bg-light">
    <div class="container">
        <div class="row align-items-center g-4">
            <div class="col-lg-6">
                <h2 class="section-title">Ù†Ù…ÙˆÙ†Ù‡ Ú¯Ø²Ø§Ø±Ø´ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ†</h2>
                <p class="section-sub">
                    Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ†ØŒ ÛŒÚ© Ú¯Ø²Ø§Ø±Ø´ Ú©Ø§Ù…Ù„Ø§Ù‹ Ù‚Ø§Ø¨Ù„â€ŒÙÙ‡Ù… Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ Ú©Ù‡ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…ÛŒâ€ŒÚ¯ÙˆÛŒØ¯
                    Â«Ú©Ø¬Ø§Ù‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ´ØªØ± Ú©Ø§Ø± Ú©Ù†ÛŒØ¯Â» Ùˆ Â«Ú†Ù‡ ØªÙ…Ø±ÛŒÙ†ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø´Ù…Ø§Ø³ØªÂ».
                </p>

                <div class="row g-3 mt-3">
                    <div class="col-6">
                        <div class="mock">
                            <div class="mock-header">
                                <div class="fw-bold">Ù†Ù‚Ø§Ø· Ù‚ÙˆØª</div>
                                <i class="fas fa-thumbs-up text-success"></i>
                            </div>
                            <ul class="small text-muted mb-0">
                                <li>Ø±ÛŒØ§Ø¶ÛŒ: Ù…Ø¹Ø§Ø¯Ù„Ø§Øª (Û¹Û°Ùª)</li>
                                <li>ÙÛŒØ²ÛŒÚ©: Ø­Ø±Ú©Øªâ€ŒØ´Ù†Ø§Ø³ÛŒ (Û¸ÛµÙª)</li>
                                <li>Ø´ÛŒÙ…ÛŒ: Ø§Ø³ØªÙˆÚ©ÛŒÙˆÙ…ØªØ±ÛŒ (Û¸Û°Ùª)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="mock">
                            <div class="mock-header">
                                <div class="fw-bold">Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù</div>
                                <i class="fas fa-triangle-exclamation text-danger"></i>
                            </div>
                            <ul class="small text-muted mb-0">
                                <li>Ø±ÛŒØ§Ø¶ÛŒ: Ø­Ø¯ Ùˆ Ù¾ÛŒÙˆØ³ØªÚ¯ÛŒ (Û´Û°Ùª)</li>
                                <li>ÙÛŒØ²ÛŒÚ©: Ù†ÙˆØ³Ø§Ù† (Û³ÛµÙª)</li>
                                <li>Ø²ÛŒØ³Øª: Ú˜Ù†ØªÛŒÚ© (Û´ÛµÙª)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="mock mt-3">
                    <div class="mock-header">
                        <div class="fw-bold">Ù†Ù…ÙˆØ¯Ø§Ø± Ù¾ÛŒØ´Ø±ÙØª Ù‡ÙØªÚ¯ÛŒ</div>
                        <span class="badge text-bg-primary">Ø®ÙˆØ¯Ú©Ø§Ø±</span>
                    </div>
                    <div class="bars small text-muted">
                        Ø±ÛŒØ§Ø¶ÛŒ <span style="--w:70%"></span>
                        ÙÛŒØ²ÛŒÚ© <span style="--w:55%"></span>
                        Ø´ÛŒÙ…ÛŒ <span style="--w:62%"></span>
                        Ø²ÛŒØ³Øª <span style="--w:48%"></span>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="mock h-100">
                    <div class="mock-header">
                        <div class="fw-bold">Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</div>
                        <i class="fas fa-wand-magic-sparkles text-primary"></i>
                    </div>
                    <p class="text-muted small">
                        Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ†ØŒ ÛŒÚ© Ø¨Ø±Ù†Ø§Ù…Ù‡ ØªÙ…Ø±ÛŒÙ†ÛŒ Ú©ÙˆØªØ§Ù‡ Ùˆ Ù‡Ø¯ÙÙ…Ù†Ø¯ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
                    </p>

                    <div class="p-3 rounded-4 border bg-light">
                        <div class="fw-bold mb-2">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‡ÙØªÙ‡ Ø¢ÛŒÙ†Ø¯Ù‡</div>
                        <ul class="small text-muted mb-0">
                            <li>Û³ ØªÙ…Ø±ÛŒÙ† Ø§Ø² Ù…Ø¨Ø­Ø« Â«Ø­Ø¯ Ùˆ Ù¾ÛŒÙˆØ³ØªÚ¯ÛŒÂ»</li>
                            <li>Û± Ø¢Ø²Ù…ÙˆÙ† ØªÙ‚ÙˆÛŒØªÛŒ ÙØµÙ„ Û³ Ø±ÛŒØ§Ø¶ÛŒ</li>
                            <li>Û² Ø¬Ù„Ø³Ù‡ Ù…Ø±ÙˆØ± Ù†ÙˆØ³Ø§Ù†</li>
                        </ul>
                    </div>

                    <button class="btn btn-outline-primary w-100 mt-3" data-bs-toggle="modal"
                        data-bs-target="#authModal">
                        Ù…Ù† Ù‡Ù… Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… Ú¯Ø²Ø§Ø±Ø´ Ø¨Ú¯ÛŒØ±Ù…
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 163: faq.blade.php
ğŸ“ PATH: resources/views/partials/landing/faq.blade.php
ğŸ“ SIZE: 2,621 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="faq" class="bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Ø³ÙˆØ§Ù„Ø§Øª Ù¾Ø±ØªÚ©Ø±Ø§Ø±</h2>
            <p class="section-sub">Ø§Ú¯Ø± Ø³ÙˆØ§Ù„ Ø´Ù…Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ø¨ÙˆØ¯ØŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù¾Ø§Ø³Ø®Ú¯ÙˆØ³Øª.</p>
        </div>

        <div class="accordion" id="faqAcc">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#q1">
                        Ø¢ÛŒØ§ Ø¨Ø¯ÙˆÙ† Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø§Ø² Ø³Ø§Ù…Ø§Ù†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù…ØŸ
                    </button>
                </h2>
                <div id="q1" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                    <div class="accordion-body text-muted">
                        Ø¨Ù„Ù‡. Ø¯Ø± Ø­Ø§Ù„Øª Ø±Ø§ÛŒÚ¯Ø§Ù†ØŒ Ù‡Ø± Ù‡ÙØªÙ‡ ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´Ø®ØµÛŒ Ø¢Ø²Ù…ÙˆÙ† Ø¯Ø± Ù‡Ø± Ø³Ø·Ø­ Ø¯Ø§Ø±ÛŒØ¯.
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#q2">
                        Ø¯Ø± Ù¾Ù„Ù†â€ŒÙ‡Ø§ Ú†Ù‡ Ú†ÛŒØ²ÛŒ ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
                    </button>
                </h2>
                <div id="q2" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                    <div class="accordion-body text-muted">
                        Ø¨Ø§ Ø§Ø±ØªÙ‚Ø§ÛŒ Ù¾Ù„Ù†ØŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø±Ø¯Ø§Ø´ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø³Ø·Ø­â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#q3">
                        Ù…Ø¹Ù„Ù…Ø§Ù† Ú†Ú¯ÙˆÙ†Ù‡ ØªØ§ÛŒÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŸ
                    </button>
                </h2>
                <div id="q3" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                    <div class="accordion-body text-muted">
                        Ù¾Ø³ Ø§Ø² Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…Ø¹Ù„Ù…ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù… ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 164: features.blade.php
ğŸ“ PATH: resources/views/partials/landing/features.blade.php
ğŸ“ SIZE: 3,166 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="features">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Ú†Ø±Ø§ Ø§ÛŒÙ† Ø³Ø§Ù…Ø§Ù†Ù‡ ØªÙØ§ÙˆØª Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ</h2>
            <p class="section-sub">Ù‡Ø± Ø¬Ù„Ø³Ù‡ Ø¢Ø²Ù…ÙˆÙ†ØŒ ÛŒÚ© Ù‚Ø¯Ù… ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ù‡ Ø³Ù…Øª Ù¾ÛŒØ´Ø±ÙØª Ø§Ø³Øª.</p>
        </div>

        <div class="row g-4">
            @php
                $features = [
                    [
                        'icon' => 'fa-brain',
                        'title' => 'ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù†ØªØ§ÛŒØ¬',
                        'text' =>
                            'Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø¨Ø­Ø«â€ŒÙ‡Ø§ÛŒ Ø¶Ø¹ÛŒÙ Ùˆ Ù‚ÙˆÛŒ Ø±Ø§ ØªØ´Ø®ÛŒØµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ùˆ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ù…ÛŒâ€ŒÚ©Ù†Ø¯.',
                    ],
                    [
                        'icon' => 'fa-route',
                        'title' => 'Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø´Ø®ØµÛŒ',
                        'text' =>
                            'Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø³Ø·Ø­ Ùˆ Ù‡Ø¯Ù Ø´Ù…Ø§ (ØªÙ‚ÙˆÛŒØªÛŒ/Ú©Ù†Ú©ÙˆØ±/Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯)ØŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ùˆ ØªÙ…Ø±ÛŒÙ† Ø§Ø®ØªØµØ§ØµÛŒ Ù…ÛŒâ€ŒØ³Ø§Ø²ÛŒÙ….',
                    ],
                    [
                        'icon' => 'fa-chart-line',
                        'title' => 'Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª Ø¯Ù‚ÛŒÙ‚',
                        'text' =>
                            'Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø´Ø¯ØŒ Ø±ØªØ¨Ù‡ Ø¯Ø± Ú©Ù„Ø§Ø³ØŒ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†ØŒ Ùˆ Ø±ÙˆÙ†Ø¯ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¯Ø± Ù‡Ø± Ø¯Ø±Ø³ Ø±Ø§ Ø´ÙØ§Ù Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒØ¯.',
                    ],
                    [
                        'icon' => 'fa-clock',
                        'title' => 'Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒâ€ŒØ´Ø¯Ù‡',
                        'text' => 'Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ ÙØ¶Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ† ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ ØªØ§ÛŒÙ…Ø±ØŒ Ú©Ù†ØªØ±Ù„ ØªÙ‚Ù„Ø¨ Ùˆ Ø«Ø¨Øª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§.',
                    ],
                    [
                        'icon' => 'fa-chalkboard-teacher',
                        'title' => 'Ù¾Ù†Ù„ ÙˆÛŒÚ˜Ù‡ Ù…Ø¹Ù„Ù…Ø§Ù†',
                        'text' => 'Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ†ØŒ Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ØŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ùˆ Ø§Ø±Ø³Ø§Ù„ ØªÚ©Ù„ÛŒÙ.',
                    ],
                    [
                        'icon' => 'fa-medal',
                        'title' => 'Ù…Ù†Ø§Ø³Ø¨ Ø§Ù‡Ø¯Ø§Ù Ø±Ù‚Ø§Ø¨ØªÛŒ',
                        'text' => 'Ø¨Ø±Ø§ÛŒ Ú©Ù†Ú©ÙˆØ± Ùˆ Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯ØŒ Ø³ÙˆØ§Ù„Ø§Øª Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ø´Ø¯Ù‡ Ùˆ Ø¨Ø§ ØªØ­Ù„ÛŒÙ„ Ø¹Ù…ÛŒÙ‚â€ŒØªØ± Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.',
                    ],
                ];
            @endphp

            @foreach ($features as $f)
                <div class="col-md-4">
                    <div class="feature card p-4">
                        <div class="icon mb-3"><i class="fas {{ $f['icon'] }}"></i></div>
                        <h5 class="fw-bold">{{ $f['title'] }}</h5>
                        <p class="text-muted mb-0">{{ $f['text'] }}</p>
                    </div>
                </div>
            @endforeach
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 165: footer.blade.php
ğŸ“ PATH: resources/views/partials/landing/footer.blade.php
ğŸ“ SIZE: 518 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<footer>
    <div class="container">
        <div class="d-flex flex-column flex-md-row align-items-center justify-content-between gap-2">
            <div class="small">Â© ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ù…ÙˆØ²Ø´ Ø§Ø³Øª.</div>
            <div class="small">
                Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ: <span class="text-white">Û°Û¹Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹</span>
                | Ø§ÛŒÙ…ÛŒÙ„: <span class="text-white">support@example.com</span>
            </div>
        </div>
    </div>
</footer>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 166: hero.blade.php
ğŸ“ PATH: resources/views/partials/landing/hero.blade.php
ğŸ“ SIZE: 5,708 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<header class="hero">
    <div class="container">
        <div class="row align-items-center g-4">

            {{-- RIGHT / TEXT SIDE --}}
            <div class="col-lg-7">
                <div class="hero-badge">
                    <i class="fa-solid fa-sparkles"></i>
                    Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ + ØªØ­Ù„ÛŒÙ„ Ø¹Ù…Ù„Ú©Ø±Ø¯ + Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø´Ø®ØµÛŒ
                </div>

                <h1 class="hero-title">
                    ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù‡Ø¯ÙÙ…Ù†Ø¯ØŒ Ù†ØªÛŒØ¬Ù‡â€ŒÛŒ ÙˆØ§Ù‚Ø¹ÛŒ
                    <span class="hero-gradient">Ø¨Ø±Ø§ÛŒ ØªÙ‚ÙˆÛŒØªÛŒØŒ Ú©Ù†Ú©ÙˆØ± Ùˆ Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</span>
                </h1>

                <p class="hero-sub">
                    Ø¨Ø§ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒâ€ŒØ´Ø¯Ù‡ØŒ ØªØ­Ù„ÛŒÙ„ Ø¯Ù‚ÛŒÙ‚ Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù Ùˆ Ù‚ÙˆØªØŒ Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒØŒ
                    Ø±Ø´Ø¯ ØªØ­ØµÛŒÙ„ÛŒ Ø´Ù…Ø§ Ù‚Ø§Ø¨Ù„ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ù‚Ø§Ø¨Ù„ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                </p>

                <div class="d-flex gap-3 mt-4 hero-actions">
                    <button class="btn btn-primary btn-lg px-4" data-bs-toggle="modal" data-bs-target="#authModal">
                        Ø´Ø±ÙˆØ¹ Ø±Ø§ÛŒÚ¯Ø§Ù†
                        <i class="fas fa-rocket me-2"></i>
                    </button>
                    <button class="btn btn-outline-light btn-lg px-4" onclick="scrollToSection('features')">
                        Ø§Ù…Ú©Ø§Ù†Ø§Øª Ø³Ø§Ù…Ø§Ù†Ù‡
                        <i class="fas fa-arrow-down me-2"></i>
                    </button>
                </div>

                {{-- STATS --}}
                <div class="row g-3 mt-4">
                    <div class="col-md-4">
                        <div class="stat">
                            <i class="fas fa-brain"></i>
                            <div>
                                <div class="n">ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´â€ŒÙ…ØµÙ†ÙˆØ¹ÛŒ</div>
                                <div class="t">Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ†</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="stat">
                            <i class="fas fa-chart-line"></i>
                            <div>
                                <div class="n">Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª</div>
                                <div class="t">Ù‡ÙØªÚ¯ÛŒ Ùˆ Ù…Ø§Ù‡Ø§Ù†Ù‡</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="stat">
                            <i class="fas fa-user-graduate"></i>
                            <div>
                                <div class="n">Ù…Ø³ÛŒØ± Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ</div>
                                <div class="t">Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- LEFT / CARD SIDE --}}
            <div class="col-lg-5">
                <div class="hero-card">
                    <div class="row g-3">

                        <div class="col-12">
                            <div class="d-flex align-items-center gap-3">
                                <div class="icon rounded-4 p-3 bg-white bg-opacity-10">
                                    <i class="fas fa-laptop-code text-info"></i>
                                </div>
                                <div>
                                    <div class="fw-bold fs-5">Ù‡Ù…Ù‡â€ŒÚ†ÛŒØ² Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ Ù…Ù†Ø¸Ù…</div>
                                    <div class="text-white-50 small">Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†ØµØ¨ØŒ Ø§Ø² Ù…ÙˆØ¨Ø§ÛŒÙ„ ÛŒØ§ Ù„Ù¾â€ŒØªØ§Ù¾</div>
                                </div>
                            </div>
                        </div>

                        <hr class="border-light border-opacity-25 my-2">

                        <div class="col-12">
                            <div class="d-flex align-items-center gap-3">
                                <div class="icon rounded-4 p-3 bg-white bg-opacity-10">
                                    <i class="fas fa-shield-halved text-success"></i>
                                </div>
                                <div>
                                    <div class="fw-bold fs-5">Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯</div>
                                    <div class="text-white-50 small">Ø·Ø±Ø§Ø­ÛŒ Ø³ÙˆØ§Ù„ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ + Ø³Ø·Ø­â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ù‚ÛŒÙ‚</div>
                                </div>
                            </div>
                        </div>

                        <hr class="border-light border-opacity-25 my-2">

                        <div class="col-12">
                            <div class="d-flex align-items-center gap-3">
                                <div class="icon rounded-4 p-3 bg-white bg-opacity-10">
                                    <i class="fas fa-people-group text-warning"></i>
                                </div>
                                <div>
                                    <div class="fw-bold fs-5">Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ùˆ Ù…Ø¹Ù„Ù…</div>
                                    <div class="text-white-50 small">Ù¾Ù†Ù„ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§</div>
                                </div>
                            </div>
                        </div>

                    </div> {{-- row --}}
                </div> {{-- hero-card --}}
            </div>

        </div> {{-- main row --}}
    </div> {{-- container --}}
</header>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 167: levels.blade.php
ğŸ“ PATH: resources/views/partials/landing/levels.blade.php
ğŸ“ SIZE: 3,229 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="levels" class="bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Ø³Ù‡ Ø³Ø·Ø­ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø± ÛŒÚ© Ø³Ø§Ù…Ø§Ù†Ù‡</h2>
            <p class="section-sub">Ù‡Ø¯Ù Ø´Ù…Ø§ Ù‡Ø±Ú†Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…Ø³ÛŒØ± Ùˆ Ø¢Ø²Ù…ÙˆÙ† Ù…Ù†Ø§Ø³Ø¨Ø´ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª.</p>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="level-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="level-pill">Ø³Ø·Ø­ Û±</span>
                        <i class="fas fa-book-open fa-2x text-primary"></i>
                    </div>
                    <h5 class="fw-bold">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ØªÙ‚ÙˆÛŒØªÛŒ</h5>
                    <p class="text-muted">Ø¨Ø±Ø§ÛŒ ØªØ«Ø¨ÛŒØª Ù…Ø¨Ø§Ø­Ø« Ù…Ø¯Ø±Ø³Ù‡ Ùˆ Ø±ÙØ¹ Ø§Ø´Ú©Ø§Ù„. Ù…Ù†Ø§Ø³Ø¨ Ù‡Ù…Ù‡ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§.</p>
                    <ul class="text-muted small mb-0">
                        <li>Ø³ÙˆØ§Ù„Ø§Øª Ø·Ø¨Ù‚Ù‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒØ´Ø¯Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©ØªØ§Ø¨ Ø¯Ø±Ø³ÛŒ</li>
                        <li>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙ…Ø±ÛŒÙ† Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ†</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ø¯Ù‚ÛŒÙ‚ Ø³Ø·Ø­ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</li>
                    </ul>
                </div>
            </div>

            <div class="col-md-4">
                <div class="level-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="level-pill" style="background:var(--success)">Ø³Ø·Ø­ Û²</span>
                        <i class="fas fa-graduation-cap fa-2x text-success"></i>
                    </div>
                    <h5 class="fw-bold">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ú©Ù†Ú©ÙˆØ±</h5>
                    <p class="text-muted">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ùˆ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù†Ú©ÙˆØ± Ø¯Ø§Ø®Ù„/Ø®Ø§Ø±Ø¬.</p>
                    <ul class="text-muted small mb-0">
                        <li>Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø´Ø§Ø¨Ù‡ Ú©Ù†Ú©ÙˆØ± ÙˆØ§Ù‚Ø¹ÛŒ</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ø¯Ø±ØµØ¯ØŒ ØªØ±Ø§Ø² Ùˆ Ø±ØªØ¨Ù‡</li>
                        <li>Ú¯Ø²Ø§Ø±Ø´ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Ø¬Ø§Ù…Ø¹Ù‡ Ø¢Ù…Ø§Ø±ÛŒ</li>
                    </ul>
                </div>
            </div>

            <div class="col-md-4">
                <div class="level-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="level-pill" style="background:var(--warning)">Ø³Ø·Ø­ Û³</span>
                        <i class="fas fa-award fa-2x text-warning"></i>
                    </div>
                    <h5 class="fw-bold">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</h5>
                    <p class="text-muted">Ø³ÙˆØ§Ù„Ø§Øª Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®Ø´Ø§Ù†.</p>
                    <ul class="text-muted small mb-0">
                        <li>Ù…Ø¨Ø§Ø­Ø« Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ ØªØ±Ú©ÛŒØ¨ÛŒ</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ù…Ù‡Ø§Ø±Øª Ø­Ù„ Ù…Ø³Ø¦Ù„Ù‡</li>
                        <li>Ù…Ø³ÛŒØ± ØªÙ…Ø±ÛŒÙ†ÛŒ ÙˆÛŒÚ˜Ù‡ Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 168: pricing.blade.php
ğŸ“ PATH: resources/views/partials/landing/pricing.blade.php
ğŸ“ SIZE: 7,823 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="pricing">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="section-title">Ù¾Ù„Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ùˆ Ù‡Ø²ÛŒÙ†Ù‡</h2>
            <p class="section-sub">Ù¾Ù„Ù† Ø®ÙˆØ¯ Ø±Ø§ Ù‡Ø± Ø²Ù…Ø§Ù† Ø®ÙˆØ§Ø³ØªÛŒØ¯ Ø§Ø±ØªÙ‚Ø§ Ø¯Ù‡ÛŒØ¯.</p>
        </div>

        <div
            class="discount-banner mb-4 d-flex flex-column flex-md-row align-items-center justify-content-between gap-3">
            <div>
                <div class="fw-bold fs-5">
                    <i class="fa-solid fa-bolt text-danger me-1"></i>
                    ØªØ®ÙÛŒÙ ÙˆÛŒÚ˜Ù‡ Ø´Ø±ÙˆØ¹ Ø³Ø§Ù„ ØªØ­ØµÛŒÙ„ÛŒ
                </div>
                <div class="text-muted small">
                    ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ø´Ù…Ø§Ø±Ø´ Ù…Ø¹Ú©ÙˆØ³ØŒ Ù¾Ù„Ù†â€ŒÙ‡Ø§ Ø¨Ø§ <b>Û±ÛµÙª ØªØ®ÙÛŒÙ</b> Ù‚Ø§Ø¨Ù„ Ø®Ø±ÛŒØ¯ Ù‡Ø³ØªÙ†Ø¯.
                </div>
            </div>

            <div class="d-flex align-items-center gap-2">
                <span class="text-muted small">Ø²Ù…Ø§Ù† Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡:</span>
                <div class="countdown" id="discountCountdown">--:--:--</div>
                <span class="badge text-bg-danger" id="discountStatus">ÙØ¹Ø§Ù„</span>
            </div>
        </div>

        <div class="d-flex justify-content-center gap-2 mb-5 cycle-selector">
            <button class="btn btn-outline-primary active" data-cycle="monthly"
                onclick="setCycle('monthly', this)">Ù…Ø§Ù‡Ø§Ù†Ù‡</button>
            <button class="btn btn-outline-primary" data-cycle="quarterly" onclick="setCycle('quarterly', this)">Ø³Ù‡â€ŒÙ…Ø§Ù‡Ù‡
                (10Ùª ØªØ®ÙÛŒÙ)</button>
            <button class="btn btn-outline-primary" data-cycle="yearly" onclick="setCycle('yearly', this)">Ø³Ø§Ù„ÛŒØ§Ù†Ù‡ (25Ùª
                ØªØ®ÙÛŒÙ)</button>
        </div>

        <div class="row g-4 align-items-stretch">
            {{-- Free --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card h-100">
                    <h5 class="fw-bold mb-1">Ø±Ø§ÛŒÚ¯Ø§Ù†</h5>
                    <div class="text-muted small mb-3">Ø´Ø±ÙˆØ¹ Ø¨Ø¯ÙˆÙ† Ù¾Ø±Ø¯Ø§Ø®Øª</div>
                    <div class="price mb-3">Û° <small>ØªÙˆÙ…Ø§Ù† / Ù‡Ù…ÛŒØ´Ù‡</small></div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>Û³ Ø¢Ø²Ù…ÙˆÙ† ØªÙ‚ÙˆÛŒØªÛŒ Ø¯Ø± Ù‡ÙØªÙ‡</li>
                        <li>Û² Ø¢Ø²Ù…ÙˆÙ† Ú©Ù†Ú©ÙˆØ± Ø¯Ø± Ù‡ÙØªÙ‡</li>
                        <li>Û± Ø¢Ø²Ù…ÙˆÙ† Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯ Ø¯Ø± Ù‡ÙØªÙ‡</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ù¾Ø§ÛŒÙ‡ Ù†ØªØ§ÛŒØ¬</li>
                        <li class="muted">Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ</li>
                        <li class="muted">Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</li>
                    </ul>

                    <button class="btn btn-outline-primary w-100 mt-3" data-bs-toggle="modal"
                        data-bs-target="#authModal">
                        Ø´Ø±ÙˆØ¹ Ø±Ø§ÛŒÚ¯Ø§Ù†
                    </button>
                </div>
            </div>

            {{-- Plan 1 --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card h-100">
                    <h5 class="fw-bold mb-1">Ù¾Ù„Ù† Ø§ÙˆÙ„</h5>
                    <div class="text-muted small mb-3">Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ‚ÙˆÛŒØªÛŒ</div>

                    <div class="price mb-1">
                        <span class="price-val" data-monthly="99000" data-quarterly="267000"
                            data-yearly="891000">99,000</span>
                        <small>ØªÙˆÙ…Ø§Ù†</small>
                    </div>
                    <div class="text-muted small mb-3 price-label">Ù…Ø§Ù‡Ø§Ù†Ù‡</div>

                    <div class="alert alert-light small py-2">
                        ÙÙ‚Ø· Ø³Ø·Ø­ <b>ØªÙ‚ÙˆÛŒØªÛŒ</b> ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>ØªÙ‚ÙˆÛŒØªÛŒ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ú©Ø§Ù…Ù„</li>
                        <li>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙ…Ø±ÛŒÙ† Ø®ÙˆØ¯Ú©Ø§Ø±</li>
                        <li class="muted">Ú©Ù†Ú©ÙˆØ±</li>
                        <li class="muted">Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</li>
                    </ul>

                    <button class="btn btn-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#authModal">
                        Ø®Ø±ÛŒØ¯ Ù¾Ù„Ù† Ø§ÙˆÙ„
                    </button>
                </div>
            </div>

            {{-- Plan 2 --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card featured h-100">
                    <div class="pricing-badge">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</div>
                    <h5 class="fw-bold mb-1">Ù¾Ù„Ù† Ø¯ÙˆÙ…</h5>
                    <div class="text-muted small mb-3">Ø¨Ø±Ø§ÛŒ Ù…Ø³ÛŒØ± Ú©Ù†Ú©ÙˆØ±</div>

                    <div class="price mb-1">
                        <span class="price-val" data-monthly="169000" data-quarterly="456000"
                            data-yearly="1521000">169,000</span>
                        <small>ØªÙˆÙ…Ø§Ù†</small>
                    </div>
                    <div class="text-muted small mb-3 price-label">Ù…Ø§Ù‡Ø§Ù†Ù‡</div>

                    <div class="alert alert-primary small py-2">
                        Ø³Ø·Ø­â€ŒÙ‡Ø§ÛŒ <b>ØªÙ‚ÙˆÛŒØªÛŒ + Ú©Ù†Ú©ÙˆØ±</b> ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
                    </div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>ØªÙ‚ÙˆÛŒØªÛŒ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</li>
                        <li>Ú©Ù†Ú©ÙˆØ± Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</li>
                        <li>Ú¯Ø²Ø§Ø±Ø´ Ø±ØªØ¨Ù‡ Ùˆ ØªØ±Ø§Ø²</li>
                        <li>Ù…Ø³ÛŒØ± ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ú©Ù†Ú©ÙˆØ±ÛŒ</li>
                        <li class="muted">Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</li>
                    </ul>

                    <button class="btn btn-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#authModal">
                        Ø®Ø±ÛŒØ¯ Ù¾Ù„Ù† Ø¯ÙˆÙ…
                    </button>
                </div>
            </div>

            {{-- Plan 3 --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card h-100">
                    <h5 class="fw-bold mb-1">Ù¾Ù„Ù† Ø³ÙˆÙ…</h5>
                    <div class="text-muted small mb-3">Ú©Ø§Ù…Ù„ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</div>

                    <div class="price mb-1">
                        <span class="price-val" data-monthly="249000" data-quarterly="672000"
                            data-yearly="2241000">249,000</span>
                        <small>ØªÙˆÙ…Ø§Ù†</small>
                    </div>
                    <div class="text-muted small mb-3 price-label">Ù…Ø§Ù‡Ø§Ù†Ù‡</div>

                    <div class="alert alert-warning small py-2">
                        Ù‡Ø± Ø³Ù‡ Ø³Ø·Ø­ <b>ØªÙ‚ÙˆÛŒØªÛŒ + Ú©Ù†Ú©ÙˆØ± + Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</b> ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
                    </div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>ØªÙ‚ÙˆÛŒØªÛŒ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</li>
                        <li>Ú©Ù†Ú©ÙˆØ± Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</li>
                        <li>Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯</li>
                        <li>ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…Ù‡Ø§Ø±ØªÛŒ</li>
                        <li>Ù…Ø³ÛŒØ± ÙˆÛŒÚ˜Ù‡ Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</li>
                    </ul>

                    <button class="btn btn-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#authModal">
                        Ø®Ø±ÛŒØ¯ Ù¾Ù„Ù† Ø³ÙˆÙ…
                    </button>
                </div>
            </div>
        </div>

        <div class="text-center text-muted small mt-4">
            * Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ Ù†Ù…ÙˆÙ†Ù‡ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø§Ø² Ø¯Ø§Ø®Ù„ HTML Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ±Ù†Ø¯.
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 169: samples.blade.php
ğŸ“ PATH: resources/views/partials/landing/samples.blade.php
ğŸ“ SIZE: 5,090 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="samples">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Ù†Ù…ÙˆÙ†Ù‡ Ø³ÙˆØ§Ù„ Ø±Ø§ÛŒÚ¯Ø§Ù†</h2>
            <p class="section-sub">Ù‚Ø¨Ù„ Ø§Ø² Ø®Ø±ÛŒØ¯ØŒ ÛŒÚ© Ø¢Ø²Ù…ÙˆÙ† Ù†Ù…ÙˆÙ†Ù‡ Ø±Ø§ Ù‡Ù…ÛŒÙ† Ø­Ø§Ù„Ø§ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.</p>
        </div>

        <div class="row g-4">
            {{-- sample 1 --}}
            <div class="col-md-4">
                <div class="sample-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h5 class="fw-bold mb-0">Ù†Ù…ÙˆÙ†Ù‡ Ø¢Ø²Ù…ÙˆÙ† ØªÙ‚ÙˆÛŒØªÛŒ</h5>
                        <span class="badge text-bg-primary">Ø³Ø·Ø­ Û±</span>
                    </div>
                    <div class="sample-meta mb-3">
                        <span><i class="fa-regular fa-clock"></i> 15 Ø¯Ù‚ÛŒÙ‚Ù‡</span>
                        <span><i class="fa-solid fa-list-check"></i> 10 Ø³ÙˆØ§Ù„</span>
                        <span><i class="fa-solid fa-signal"></i> Ù…ØªÙˆØ³Ø·</span>
                    </div>
                    <p class="text-muted small">
                        Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ø³Ø¨Ú© Ø³ÙˆØ§Ù„Ø§Øª Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="{{ asset('assets/samples/taghviyati-sample.pdf') }}"
                            class="btn btn-outline-primary w-50">
                            Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF
                        </a>
                        <button class="btn btn-primary w-50" data-bs-toggle="modal" data-bs-target="#authModal">
                            Ø´Ø±ÙˆØ¹ Ø¢Ù†Ù„Ø§ÛŒÙ†
                        </button>
                    </div>
                </div>
            </div>

            {{-- sample 2 --}}
            <div class="col-md-4">
                <div class="sample-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h5 class="fw-bold mb-0">Ù†Ù…ÙˆÙ†Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ú©Ù†Ú©ÙˆØ±</h5>
                        <span class="badge text-bg-success">Ø³Ø·Ø­ Û²</span>
                    </div>
                    <div class="sample-meta mb-3">
                        <span><i class="fa-regular fa-clock"></i> 20 Ø¯Ù‚ÛŒÙ‚Ù‡</span>
                        <span><i class="fa-solid fa-list-check"></i> 15 Ø³ÙˆØ§Ù„</span>
                        <span><i class="fa-solid fa-signal"></i> Ø³Ø®Øª</span>
                    </div>
                    <p class="text-muted small">
                        Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ú©ÙˆØªØ§Ù‡ Ø§Ø² Ø¢Ø²Ù…ÙˆÙ† Ú©Ù†Ú©ÙˆØ± Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ø±ØªØ¨Ù‡ Ùˆ ØªØ­Ù„ÛŒÙ„ Ø¯Ø±ØµØ¯ÛŒ.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="{{ asset('assets/samples/konkur-sample.pdf') }}" class="btn btn-outline-success w-50">
                            Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF
                        </a>
                        <button class="btn btn-success w-50" data-bs-toggle="modal" data-bs-target="#authModal">
                            Ø´Ø±ÙˆØ¹ Ø¢Ù†Ù„Ø§ÛŒÙ†
                        </button>
                    </div>
                </div>
            </div>

            {{-- sample 3 --}}
            <div class="col-md-4">
                <div class="sample-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h5 class="fw-bold mb-0">Ù†Ù…ÙˆÙ†Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ø§Ù„Ù…Ù¾ÛŒØ§Ø¯</h5>
                        <span class="badge text-bg-warning">Ø³Ø·Ø­ Û³</span>
                    </div>
                    <div class="sample-meta mb-3">
                        <span><i class="fa-regular fa-clock"></i> 25 Ø¯Ù‚ÛŒÙ‚Ù‡</span>
                        <span><i class="fa-solid fa-list-check"></i> 8 Ø³ÙˆØ§Ù„</span>
                        <span><i class="fa-solid fa-signal"></i> Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª</span>
                    </div>
                    <p class="text-muted small">
                        Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ù…Ø³ØªØ¹Ø¯ Ø¨Ø±Ø§ÛŒ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ø³ÙˆØ§Ù„Ø§Øª ØªØ±Ú©ÛŒØ¨ÛŒ Ùˆ ØªØ­Ù„ÛŒÙ„ Ù…Ù‡Ø§Ø±ØªÛŒ.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="{{ asset('assets/samples/olympiad-sample.pdf') }}"
                            class="btn btn-outline-warning w-50">
                            Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF
                        </a>
                        <button class="btn btn-warning w-50" data-bs-toggle="modal" data-bs-target="#authModal">
                            Ø´Ø±ÙˆØ¹ Ø¢Ù†Ù„Ø§ÛŒÙ†
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <div class="alert alert-light border small d-inline-block">
                Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¢Ù†Ù„Ø§ÛŒÙ† Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ Ú©Ø§ÙÛŒØ³Øª Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯. (Ú©Ù…ØªØ± Ø§Ø² Û± Ø¯Ù‚ÛŒÙ‚Ù‡)
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 170: screenshots.blade.php
ğŸ“ PATH: resources/views/partials/landing/screenshots.blade.php
ğŸ“ SIZE: 4,282 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="screenshots" class="bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">ØªØµØ§ÙˆÛŒØ± ÙˆØ§Ù‚Ø¹ÛŒ Ù¾Ù†Ù„â€ŒÙ‡Ø§</h2>
            <p class="section-sub">ÛŒÚ© Ù†Ú¯Ø§Ù‡ Ø³Ø±ÛŒØ¹ Ø¨Ù‡ ØªØ¬Ø±Ø¨Ù‡â€ŒÛŒ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ùˆ Ù…Ø¹Ù„Ù…</p>
        </div>

        <div class="carousel-card">
            <div id="panelCarousel" class="carousel slide" data-bs-ride="carousel">

                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="2"></button>
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="3"></button>
                </div>

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/student-dashboard.png') }}"
                            alt="Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h5>
                            <p class="small">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ + Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª + Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ ØªÙ…Ø±ÛŒÙ†</p>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/student-report.png') }}"
                            alt="Ú¯Ø²Ø§Ø±Ø´ Ø¢Ø²Ù…ÙˆÙ† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">Ú¯Ø²Ø§Ø±Ø´ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ø²Ù…ÙˆÙ†</h5>
                            <p class="small">ØªØ­Ù„ÛŒÙ„ Ù†Ù‚Ø§Ø· Ø¶Ø¹Ù Ùˆ Ù‚ÙˆØª Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø±</p>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/teacher-panel.png') }}" alt="Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…</h5>
                            <p class="small">Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ†ØŒ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù‡Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</p>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/class-analytics.png') }}" alt="ØªØ­Ù„ÛŒÙ„ Ú©Ù„Ø§Ø³">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">ØªØ­Ù„ÛŒÙ„ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ú©Ù„Ø§Ø³</h5>
                            <p class="small">Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø´Ø¯ØŒ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ú©Ù„Ø§Ø³ Ùˆ Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ</p>
                        </div>
                    </div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#panelCarousel"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden">Ù‚Ø¨Ù„ÛŒ</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#panelCarousel"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden">Ø¨Ø¹Ø¯ÛŒ</span>
                </button>

            </div>
        </div>

        <div class="text-center mt-3">
            <button class="btn btn-primary px-5" data-bs-toggle="modal" data-bs-target="#authModal">
                ÙˆØ±ÙˆØ¯ Ùˆ ØªØ¬Ø±Ø¨Ù‡ Ù¾Ù†Ù„â€ŒÙ‡Ø§
            </button>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 171: testimonials.blade.php
ğŸ“ PATH: resources/views/partials/landing/testimonials.blade.php
ğŸ“ SIZE: 2,723 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<section id="testimonials">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Ù†Ø¸Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø§</h2>
            <p class="section-sub">Ù†ØªÛŒØ¬Ù‡â€ŒÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² Ø²Ø¨Ø§Ù† Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ùˆ Ù…Ø¹Ù„Ù…Ø§Ù†</p>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="testimonial">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <div class="avatar">Ù…</div>
                        <div>
                            <div class="fw-bold">Ù…Ø­Ù…Ø¯Ø±Ø¶Ø§ - Ú©Ù†Ú©ÙˆØ±ÛŒ</div>
                            <div class="text-muted small">Ù¾Ù„Ù† Ø¯ÙˆÙ…</div>
                        </div>
                    </div>
                    <p class="text-muted small mb-0">
                        Â«Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± Ø¢Ø²Ù…ÙˆÙ† Ø¯Ù‚ÛŒÙ‚ Ù…ÛŒâ€ŒÙÙ‡Ù…Ù… Ú©Ø¬Ø§ Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù….
                        ØªÙˆÛŒ Ø¯Ùˆ Ù…Ø§Ù‡ØŒ Ø¯Ø±ØµØ¯ Ø±ÛŒØ§Ø¶ÛŒâ€ŒØ§Ù… Û²Û°Ùª Ø¨Ø§Ù„Ø§ Ø±ÙØª.Â»
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="testimonial">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <div class="avatar">Ø³</div>
                        <div>
                            <div class="fw-bold">Ø³Ø§Ø±Ø§ - Ù¾Ø§ÛŒÙ‡ Ø¯Ù‡Ù…</div>
                            <div class="text-muted small">Ù¾Ù„Ù† Ø§ÙˆÙ„</div>
                        </div>
                    </div>
                    <p class="text-muted small mb-0">
                        Â«Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§ÛŒ ØªÙ‚ÙˆÛŒØªÛŒ Ø®ÛŒÙ„ÛŒ Ú©Ù…Ú©Ù… Ú©Ø±Ø¯ Ø¯Ø±Ø³â€ŒÙ‡Ø§ Ø±Ùˆ ÙØµÙ„â€ŒØ¨Ù‡â€ŒÙØµÙ„ Ø¨Ø¨Ù†Ø¯Ù….
                        Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§Ø´ Ø®ÛŒÙ„ÛŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ ÙÙ‡Ù…Ù‡.Â»
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="testimonial">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <div class="avatar">Ø¯</div>
                        <div>
                            <div class="fw-bold">Ø¯Ú©ØªØ± Ø­Ø³ÛŒÙ†ÛŒ - Ù…Ø¹Ù„Ù…</div>
                            <div class="text-muted small">Ù¾Ù†Ù„ Ù…Ø¹Ù„Ù…</div>
                        </div>
                    </div>
                    <p class="text-muted small mb-0">
                        Â«Ø³Ø§Ø®Øª Ø¢Ø²Ù…ÙˆÙ† Ùˆ Ø¯ÛŒØ¯Ù† ØªØ­Ù„ÛŒÙ„ ØªÚ©â€ŒØªÚ© Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†
                        Ø¨Ø§Ø¹Ø« Ø´Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù„Ø§Ø³ Ø®ÛŒÙ„ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒâ€ŒØªØ± Ø¨Ø´Ù‡.Â»
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 172: auth-modal.blade.php
ğŸ“ PATH: resources/views/shared/auth-modal.blade.php
ğŸ“ SIZE: 23,640 bytes
ğŸ•’ MODIFIED: 2025-12-08 16:45:39
----------------------------------------------------------------------

<div class="modal fade" id="authModal" tabindex="-1" aria-hidden="true"
     data-send-url="{{ route('auth.sendOtp') }}"
     data-verify-url="{{ route('auth.verifyOtp') }}"
     data-role-url="{{ route('auth.setRole') }}">

    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content rounded-4 border-0 shadow-lg"
            style="
            background: var(--light);
            border-radius: var(--radius-xl) !important;
            border: 3px solid rgba(0, 206, 209, 0.15);
            overflow: hidden;
        ">
            {{-- Ù‡Ø¯Ø± Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§ Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†Øª --}}
            <div class="modal-header"
                style="
                background: linear-gradient(135deg, rgba(0, 206, 209, 0.1), rgba(70, 130, 180, 0.1));
                border-bottom: 2px solid rgba(0, 206, 209, 0.15);
                padding: 25px 30px;
                position: relative;
                overflow: hidden;
            ">
                <div
                    style="position: absolute; top: -50%; right: -20%; width: 200px; height: 200px;
                    background: radial-gradient(circle, rgba(0, 206, 209, 0.08), transparent 70%); border-radius: 50%;">
                </div>

                <h5 class="modal-title fw-bold" id="authModalTitle"
                    style="
                    font-size: 1.5rem;
                    color: var(--dark);
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    position: relative;
                    z-index: 2;
                ">
                    <span
                        style="
                        background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                    ">
                        ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
                    </span>
                    ğŸ”
                </h5>
                <button type="button" class="btn-close ms-0" data-bs-dismiss="modal"
                    style="
                    position: relative;
                    z-index: 2;
                    font-size: 1.2rem;
                    opacity: 0.7;
                    transition: all 0.3s;
                "></button>
            </div>

            {{-- Ø¨Ø¯Ù†Ù‡ Ù…ÙˆØ¯Ø§Ù„ --}}
            <div class="modal-body" style="padding: 40px 30px;">
                {{-- Step 1: Phone --}}
                <div id="phoneStep" class="auth-step">
                    <div class="text-center mb-4">
                        <div
                            style="
                            width: 80px;
                            height: 80px;
                            margin: 0 auto 20px;
                            background: var(--primary-light);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 2rem;
                            color: var(--primary);
                            border: 3px solid var(--primary);
                        ">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h4
                            style="
                            font-weight: 900;
                            color: var(--dark);
                            margin-bottom: 10px;
                            font-size: 1.3rem;
                        ">
                            ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡
                        </h4>
                        <p
                            style="color: var(--gray); font-size: 1.05rem; line-height: 1.6; max-width: 400px; margin: 0 auto;">
                            Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ ÛŒØ§ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…ØŒ Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.
                        </p>
                    </div>

                    <form id="phoneForm">
                        <div class="mb-4" style="position: relative;">
                            <label for="phone" class="form-label"
                                style="
                                color: var(--dark);
                                font-weight: 900;
                                font-size: 1rem;
                                margin-bottom: 12px;
                                display: flex;
                                align-items: center;
                                gap: 10px;
                            ">
                                <i class="fas fa-phone"
                                    style="
                                    color: var(--primary);
                                    background: var(--primary-light);
                                    width: 36px;
                                    height: 36px;
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 1.1rem;
                                "></i>
                                Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡
                            </label>
                            <div class="input-group" dir="ltr"
                                style="
                                border-radius: var(--radius-md);
                                overflow: hidden;
                                border: 2px solid var(--light-gray);
                                transition: all 0.3s;
                            ">
                                <span class="input-group-text"
                                    style="
                                    background: var(--primary);
                                    color: white;
                                    border: none;
                                    font-weight: 900;
                                    padding: 16px 20px;
                                    font-size: 1.05rem;
                                ">
                                    +98
                                </span>
                                <input type="tel" class="form-control text-start" id="phone"
                                    placeholder="9123456789" dir="ltr" required maxlength="10"
                                    style="
                                    padding: 16px 20px;
                                    border: none;
                                    background: var(--light);
                                    color: var(--dark);
                                    font-weight: 700;
                                    font-size: 1.05rem;
                                    transition: all 0.3s;
                                    direction: ltr !important;
                                    text-align: left !important;
                                    unicode-bidi: plaintext;
                                    ">
                            </div>
                            <div class="form-text" style="color: var(--gray); margin-top: 8px; font-size: 0.9rem;">
                                Ø´Ù…Ø§Ø±Ù‡ Ø±Ø§ Ø¨Ø¯ÙˆÙ† ØµÙØ± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯. Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯.
                            </div>
                        </div>

                        <button type="submit" class="btn w-100 py-3"
                            style="
                            background: var(--primary-gradient);
                            color: white;
                            border: none;
                            border-radius: var(--radius-lg);
                            font-weight: 900;
                            font-size: 1.1rem;
                            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                            box-shadow: 0 8px 20px rgba(0, 206, 209, 0.3);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 10px;
                            min-height: 55px;
                        ">
                            <i class="fas fa-sms"></i>
                            Ø¯Ø±ÛŒØ§ÙØª Ú©Ø¯ ØªØ§ÛŒÛŒØ¯
                        </button>
                    </form>
                </div>

                {{-- Step 2: Verify --}}
                <div id="verificationStep" class="auth-step" style="display:none;">
                    <div class="text-center mb-4">
                        <div
                            style="
                            width: 80px;
                            height: 80px;
                            margin: 0 auto 20px;
                            background: var(--success-light);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 2rem;
                            color: var(--success);
                            border: 3px solid var(--success);
                        ">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4
                            style="
                            font-weight: 900;
                            color: var(--dark);
                            margin-bottom: 10px;
                            font-size: 1.3rem;
                        ">
                            ØªØ£ÛŒÛŒØ¯ Ø´Ù…Ø§Ø±Ù‡ Ù‡Ù…Ø±Ø§Ù‡
                        </h4>
                        <p class="mb-1" style="color: var(--gray); font-size: 1.05rem;">Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡</p>

                        {{-- âœ… FIXED --}}
                        <div id="phoneNumberDisplay" class="fw-bold" dir="ltr"
                            style="direction:ltr; text-align:center; color: var(--primary);
                            font-size: 1.2rem; background: var(--primary-light); padding: 8px 20px;
                            border-radius: var(--radius-md); display: inline-block; margin: 10px 0;">
                        </div>
                    </div>

                    <form id="verificationForm">
                        <div class="mb-4">
                            <label for="verificationCode" class="form-label"
                                style="
                                color: var(--dark);
                                font-weight: 900;
                                font-size: 1rem;
                                margin-bottom: 12px;
                                display: flex;
                                align-items: center;
                                gap: 10px;
                            ">
                                <i class="fas fa-key"
                                    style="
                                    color: var(--primary);
                                    background: var(--primary-light);
                                    width: 36px;
                                    height: 36px;
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 1.1rem;
                                "></i>
                                Ú©Ø¯ ØªØ£ÛŒÛŒØ¯ Û¶ Ø±Ù‚Ù…ÛŒ
                            </label>
                            <div style="position: relative;">
                                <input type="text" class="form-control text-center verification-code"
                                    id="verificationCode" placeholder="______" maxlength="6" required
                                    style="
                                    padding: 18px;
                                    font-size: 1.8rem;
                                    letter-spacing: 15px;
                                    font-weight: 900;
                                    border: 3px solid var(--light-gray);
                                    border-radius: var(--radius-md);
                                    background: var(--light);
                                    color: var(--dark);
                                    text-align: center;
                                    transition: all 0.3s;
                                ">
                                <div
                                    style="
                                    position: absolute;
                                    left: 50%;
                                    transform: translateX(-50%);
                                    bottom: -25px;
                                    color: var(--gray);
                                    font-size: 0.9rem;
                                    font-weight: 700;
                                ">
                                    Ú©Ø¯ Û¶ Ø±Ù‚Ù…ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn w-100 py-3 mb-3"
                            style="
                            background: var(--success);
                            color: white;
                            border: none;
                            border-radius: var(--radius-lg);
                            font-weight: 900;
                            font-size: 1.1rem;
                            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                            box-shadow: 0 8px 20px rgba(50, 205, 50, 0.3);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 10px;
                            min-height: 55px;
                        ">
                            <i class="fas fa-check-circle"></i>
                            ØªØ£ÛŒÛŒØ¯ Ùˆ Ø§Ø¯Ø§Ù…Ù‡
                        </button>

                        <button type="button" class="btn w-100 py-3" id="resendCodeBtn"
                            style="
                            background: transparent;
                            color: var(--gray);
                            border: 2px solid var(--light-gray);
                            border-radius: var(--radius-lg);
                            font-weight: 900;
                            font-size: 1rem;
                            transition: all 0.3s;
                            min-height: 55px;
                        ">
                            <i class="fas fa-redo ms-2"></i>
                            Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø¯
                            <span id="countdown" style="color: var(--primary); margin-right: 5px;">(60)</span>
                        </button>
                    </form>
                </div>

                {{-- Step 3: Role --}}
                <div id="roleStep" class="auth-step" style="display:none;">
                    <div class="text-center mb-4">
                        <div
                            style="
                            width: 80px;
                            height: 80px;
                            margin: 0 auto 20px;
                            background: var(--accent-light);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 2rem;
                            color: var(--accent);
                            border: 3px solid var(--accent);
                        ">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h4
                            style="
                            font-weight: 900;
                            color: var(--dark);
                            margin-bottom: 10px;
                            font-size: 1.3rem;
                        ">
                            Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´
                        </h4>
                        <p
                            style="color: var(--gray); font-size: 1.05rem; line-height: 1.6; max-width: 500px; margin: 0 auto;">
                            Ø¨Ø±Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ø§Ø®ØªØµØ§ØµÛŒØŒ Ù†Ù‚Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.
                        </p>
                    </div>

                    <div class="row g-4">
                        <div class="col-md-6">
                            <button type="button" class="btn w-100 h-100 py-4 role-btn"
                                onclick="selectRole('student')"
                                style="
                                border: 3px solid var(--light-gray);
                                background: var(--light);
                                border-radius: var(--radius-lg);
                                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                height: 100%;
                                cursor: pointer;
                            ">
                                <div
                                    style="
                                    width: 80px;
                                    height: 80px;
                                    margin: 0 auto 20px;
                                    background: linear-gradient(135deg, var(--elementary), #357ABD);
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: white;
                                    font-size: 2.5rem;
                                ">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div
                                    style="font-weight: 900; color: var(--dark); font-size: 1.3rem; margin-bottom: 8px;">
                                    Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
                                </div>
                                <small style="color: var(--gray); font-size: 0.95rem; line-height: 1.5;">
                                    ÙˆØ±ÙˆØ¯ Ø³Ø±ÛŒØ¹ Ø¨Ù‡ Ù¾Ù†Ù„ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²ÛŒ
                                </small>
                            </button>
                        </div>

                        <div class="col-md-6">
                            <button type="button" class="btn w-100 h-100 py-4 role-btn"
                                onclick="selectRole('teacher')"
                                style="
                                border: 3px solid var(--light-gray);
                                background: var(--light);
                                border-radius: var(--radius-lg);
                                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                height: 100%;
                                cursor: pointer;
                            ">
                                <div
                                    style="
                                    width: 80px;
                                    height: 80px;
                                    margin: 0 auto 20px;
                                    background: linear-gradient(135deg, var(--middle-school), #28a745);
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: white;
                                    font-size: 2.5rem;
                                ">
                                    <i class="fas fa-chalkboard-teacher"></i>
                                </div>
                                <div
                                    style="font-weight: 900; color: var(--dark); font-size: 1.3rem; margin-bottom: 8px;">
                                    Ù…Ø¹Ù„Ù…
                                </div>
                                <small style="color: var(--gray); font-size: 0.95rem; line-height: 1.5;">
                                    ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù…ÙˆØ²Ø´ÛŒ
                                </small>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            {{-- ÙÙˆØªØ± Ù…ÙˆØ¯Ø§Ù„ --}}
            <div class="modal-footer"
                style="
                border-top: 2px solid var(--light-gray);
                padding: 20px 30px;
                background: var(--light-gray);
            ">
                <div
                    style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    width: 100%;
                    flex-wrap: wrap;
                    gap: 15px;
                ">
                    <div style="color: var(--gray); font-size: 0.95rem;">
                        <i class="fas fa-lock ms-2"></i>
                        Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ù…Ø§ Ù†Ø²Ø¯ Ù…Ø§ Ø§Ù…Ù† Ø§Ø³Øª
                    </div>
                    <div style="display: flex; gap: 15px;">
                        <a href="{{ route('privacy') }}"
                            style="color: var(--primary); text-decoration: none; font-weight: 700; font-size: 0.95rem;">
                            Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ
                        </a>
                        <a href="{{ route('terms') }}"
                            style="color: var(--primary); text-decoration: none; font-weight: 700; font-size: 0.95rem;">
                            Ø´Ø±Ø§ÛŒØ· Ø§Ø³ØªÙØ§Ø¯Ù‡
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --primary: #00CED1;
        --primary-light: rgba(0, 206, 209, 0.1);
        --primary-gradient: linear-gradient(135deg, #00CED1, #20B2AA);
        --secondary: #4682B4;
        --light: #ffffff;
        --dark: #2F4F4F;
        --gray: #708090;
        --light-gray: #F0F8FF;
        --success: #32CD32;
        --success-light: rgba(50, 205, 50, 0.1);
        --elementary: #4A90E2;
        --middle-school: #32CD32;
        --radius-xl: 24px;
        --radius-lg: 20px;
        --radius-md: 16px;
        --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal.fade .modal-content {
        animation: fadeIn 0.4s ease-out;
    }

    .modal-content {
        border: none !important;
        box-shadow: var(--shadow-lg) !important;
    }

    .verification-code {
        font-family: 'Courier New', monospace !important;
        letter-spacing: 10px !important;
    }
</style>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 173: navigation.blade.php
ğŸ“ PATH: resources/views/shared/navigation.blade.php
ğŸ“ SIZE: 786 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url('/') }}">
            <i class="fas fa-graduation-cap"></i>
            Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¢Ù…ÙˆØ²Ø´
        </a>

        <div class="d-flex gap-2">
            <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#authModal">
                <i class="fas fa-sign-in-alt ms-1"></i> ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
            </button>
            <button class="btn btn-light text-dark fw-bold"
                onclick="document.getElementById('pricing').scrollIntoView({behavior:'smooth'})">
                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ù„Ù†â€ŒÙ‡Ø§
            </button>
        </div>
    </div>
</nav>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 174: admin.php
ğŸ“ PATH: routes/admin.php
ğŸ“ SIZE: 3,553 bytes
ğŸ•’ MODIFIED: 2025-12-08 12:11:13
----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;

use App\Http\Controllers\Admin\AdminAuthController;
use App\Http\Controllers\Admin\AdminDashboardController;
use App\Http\Controllers\Admin\AdminUserController;     // âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯
use App\Http\Controllers\Admin\ClassroomController;     // âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯

use App\Http\Controllers\Admin\SectionController;
use App\Http\Controllers\Admin\GradeController;
use App\Http\Controllers\Admin\SubjectController;
use App\Http\Controllers\Admin\BranchController;
use App\Http\Controllers\Admin\FieldController;
use App\Http\Controllers\Admin\SubfieldController;
use App\Http\Controllers\Admin\SubjectTypeController;
use App\Http\Controllers\Admin\ExamController; // âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯      
use App\Http\Controllers\Admin\SubjectTaxonomyController; // âœ… Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯


/*
|--------------------------------------------------------------------------
| Admin Auth Routes (OTP Login) - PUBLIC (no auth middleware)
|--------------------------------------------------------------------------
*/

Route::prefix('admin')->name('admin.')->group(function () {
    Route::get('/login', [AdminAuthController::class, 'showLogin'])->name('login');
    Route::post('/send-otp', [AdminAuthController::class, 'sendOtp'])->name('send-otp');
    Route::post('/verify-otp', [AdminAuthController::class, 'verifyOtp'])->name('verify-otp');
});




/*
|--------------------------------------------------------------------------
| Admin Dashboard + Routes - PROTECTED
|--------------------------------------------------------------------------
*/
Route::prefix('dashboard/admin')
    ->middleware(['auth', 'role.selected', 'role:admin'])
    ->name('admin.')
    ->group(function () {

        Route::get('/', [AdminDashboardController::class, 'index'])
            ->name('dashboard');

        Route::resource('users', AdminUserController::class)
            ->only(['index','show','update','destroy']);

        Route::resource('classrooms', ClassroomController::class)
            ->only(['index','show','update','destroy']);

        // âœ… Ù‡Ù…ÛŒÙ† Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
        Route::resource('exams', ExamController::class)
            ->only(['index','show','update','destroy']);

        Route::resource('sections', SectionController::class);
        Route::resource('grades', GradeController::class);
        Route::resource('branches', BranchController::class);
        Route::resource('fields', FieldController::class);
        Route::resource('subfields', SubfieldController::class);
        Route::resource('subject-types', SubjectTypeController::class);
        Route::resource('subjects', SubjectController::class);

        // âœ… API Ù‚Ø¨Ù„ÛŒ Ø®ÙˆØ¯Øª (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
        Route::get('api/subjects/by-grade/{grade}', [SubjectController::class, 'byGrade'])
            ->name('api.subjects.by-grade');

        // âœ… NEW APIs Ø¨Ø±Ø§ÛŒ dropdown Ù‡ÙˆØ´Ù…Ù†Ø¯
        Route::get('api/grades/by-section/{section}', [SubjectTaxonomyController::class, 'gradesBySection'])
            ->name('api.grades.by-section');

        Route::get('api/branches/by-section/{section}', [SubjectTaxonomyController::class, 'branchesBySection'])
            ->name('api.branches.by-section');

        Route::get('api/fields/by-branch/{branch}', [SubjectTaxonomyController::class, 'fieldsByBranch'])
            ->name('api.fields.by-branch');

        Route::get('api/subfields/by-field/{field}', [SubjectTaxonomyController::class, 'subfieldsByField'])
            ->name('api.subfields.by-field');
    });

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 175: auth.php
ğŸ“ PATH: routes/auth.php
ğŸ“ SIZE: 1,053 bytes
ğŸ•’ MODIFIED: 2025-12-08 16:40:15
----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\AuthController;

Route::prefix('auth')->name('auth.')->group(function () {

    Route::get('/csrf', function () {
        return response()->json(['csrf' => csrf_token()]);
    })->name('csrf');

    Route::post('/send-otp', [AuthController::class, 'sendOtp'])
        ->middleware(['throttle:5,1'])
        ->name('sendOtp');

    Route::post('/verify-otp', [AuthController::class, 'verifyOtp'])
        ->middleware(['throttle:10,1'])
        ->name('verifyOtp');

    Route::post('/set-role', [AuthController::class, 'setRole'])
        ->middleware('auth')
        ->name('setRole');
});

Route::post('/logout', [AuthController::class, 'logout'])
    ->middleware('auth')
    ->name('logout');

Route::get('/dashboard/role-select', function () {
    return view('dashboard.role-select');
})->middleware('auth')->name('role.select');

Route::post('/dashboard/profile/change-role', [AuthController::class, 'changeRole'])
    ->middleware('auth')
    ->name('profile.change-role');

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 176: console.php
ğŸ“ PATH: routes/console.php
ğŸ“ SIZE: 210 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Foundation\Inspiring;
use Illuminate\Support\Facades\Artisan;

Artisan::command('inspire', function () {
    $this->comment(Inspiring::quote());
})->purpose('Display an inspiring quote');

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 177: counselor.php
ğŸ“ PATH: routes/counselor.php
ğŸ“ SIZE: 2,904 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\Counselor\CounselorDashboardController;
use App\Http\Controllers\Counselor\CounselorStudentController;
use App\Http\Controllers\Counselor\CounselorAttemptController;
use App\Http\Controllers\Counselor\CounselorLearningPathController;
use App\Http\Controllers\Counselor\CounselorProfileController;

Route::prefix('dashboard')
    ->middleware(['auth', 'role.selected'])
    ->group(function () {

        Route::prefix('counselor')
            ->name('counselor.')
            ->middleware('role:counselor')
            ->group(function () {

                // âœ… Dashboard
                Route::get('/', [CounselorDashboardController::class, 'index'])
                    ->name('index');

                // âœ… Students
                Route::get('/students', [CounselorStudentController::class, 'index'])
                    ->name('students.index');
                Route::get('/students/{student}', [CounselorStudentController::class, 'show'])
                    ->name('students.show');

                // âœ… Attempts by student
                Route::get('/students/{student}/attempts', [CounselorAttemptController::class, 'index'])
                    ->name('attempts.index');
                Route::get('/attempts/{attempt}', [CounselorAttemptController::class, 'show'])
                    ->name('attempts.show');

                // âœ… Analyze attempt
                Route::get('/attempts/{attempt}/analyze', [CounselorAttemptController::class, 'editAnalysis'])
                    ->name('attempts.analyze.edit');
                Route::post('/attempts/{attempt}/analyze', [CounselorAttemptController::class, 'storeAnalysis'])
                    ->name('attempts.analyze.store');

                // âœ… Learning paths
                Route::get('/learning-paths', [CounselorLearningPathController::class, 'index'])
                    ->name('learning-paths.index');
                Route::get('/learning-paths/create/{student}', [CounselorLearningPathController::class, 'create'])
                    ->name('learning-paths.create');
                Route::post('/learning-paths/{student}', [CounselorLearningPathController::class, 'store'])
                    ->name('learning-paths.store');

                // âœ… Reports (Phase 1 just views)
                Route::view('/reports', 'dashboard.counselor.reports.index')
                    ->name('reports.index');
                Route::view('/reports/{report}', 'dashboard.counselor.reports.show')
                    ->name('reports.show');

                // âœ… Profile
                Route::get('/profile', [CounselorProfileController::class, 'edit'])
                    ->name('profile');
                Route::put('/profile', [CounselorProfileController::class, 'update'])
                    ->name('profile.update');
            });
    });

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 178: student.php
ğŸ“ PATH: routes/student.php
ğŸ“ SIZE: 3,980 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\Student\StudentExamController;
use App\Http\Controllers\Student\StudentClassController;
use App\Http\Controllers\Student\LearningPathController;
use App\Http\Controllers\Student\MyTeachersController;
use App\Http\Controllers\Student\StudentProfileController;
use App\Http\Controllers\Student\PublicExamController;

Route::prefix('dashboard')->middleware(['auth', 'role.selected'])->group(function () {
        Route::prefix('student')->name('student.')->middleware('role:student')->group(function ()
        {

                // Dashboard
                Route::view('/', 'dashboard.student.index')->name('index');


                // Classrooms
                Route::get('/classrooms/join', [StudentClassController::class, 'showJoinForm'])
                    ->name('classrooms.join.form');

                Route::post('/classrooms/join', [StudentClassController::class, 'join'])
                    ->name('classrooms.join');

                Route::get('/classrooms', [StudentClassController::class, 'index'])
                    ->name('classrooms.index');

                Route::get('/classrooms/{classroom}', [StudentClassController::class, 'show'])
                    ->name('classrooms.show');


                // Exams (legacy general list - keep for now)
                Route::get('/exams', [StudentExamController::class, 'index'])
                    ->name('exams.index');

                // âœ… NEW: split exam lists by type
                Route::get('/exams/public', [StudentExamController::class, 'publicIndex'])
                    ->name('exams.public');

                Route::get('/exams/classroom', [StudentExamController::class, 'classroomIndex'])
                    ->name('exams.classroom');

                // Shared exam routes
                Route::get('/exams/{exam}', [StudentExamController::class, 'show'])
                    ->name('exams.show');

                Route::get('/exams/{exam}/take', [StudentExamController::class, 'take'])
                    ->name('exams.take');

                Route::post('/exams/{exam}/start', [StudentExamController::class, 'start'])
                    ->name('exams.start');

                Route::post('/exams/{exam}/submit', [StudentExamController::class, 'submit'])
                    ->name('exams.submit');


                // âœ… NEW: Attempt result & analysis
                Route::get('/attempts/{attempt}/result', [StudentExamController::class, 'result'])
                    ->name('attempts.result');

                Route::get('/attempts/{attempt}/analysis', [StudentExamController::class, 'analysis'])
                    ->name('attempts.analysis');

                // legacy attempt show (keep so old links won't break)
                Route::get('/attempts/{attempt}', [StudentExamController::class, 'attemptShow'])
                    ->name('attempts.show');


                // Reports / Support
                Route::view('/reports', 'dashboard.student.reports.index')
                    ->name('reports.index');

                Route::view('/support', 'dashboard.student.support.index')
                    ->name('support.index');


                // Learning Path / My Teachers
                Route::get('/learning-path', [LearningPathController::class, 'index'])
                    ->name('learning-path');

                Route::get('/my-teachers', [MyTeachersController::class, 'index'])
                    ->name('my-teachers.index');


                // Profile
                Route::get('/profile', [StudentProfileController::class, 'edit'])
                    ->name('profile');

                Route::put('/profile', [StudentProfileController::class, 'update'])
                    ->name('profile.update');

                Route::post('/profile/avatar', [StudentProfileController::class, 'updateAvatar'])
                    ->name('profile.avatar');
        });

    });

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 179: teacher.php
ğŸ“ PATH: routes/teacher.php
ğŸ“ SIZE: 6,863 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Teacher Controllers (App\Http\Controllers\Teacher)
|--------------------------------------------------------------------------
*/
use App\Http\Controllers\Teacher\DashboardController;
use App\Http\Controllers\Teacher\TeacherClassController;
use App\Http\Controllers\Teacher\TeacherExamController;
use App\Http\Controllers\Teacher\TeacherStudentController;
use App\Http\Controllers\Teacher\SubjectController;
use App\Http\Controllers\Teacher\QuestionController;

Route::prefix('dashboard')
    ->middleware(['auth', 'role.selected'])
    ->group(function () {

        Route::prefix('teacher')
            ->name('teacher.')
            ->middleware('role:teacher')
            ->group(function () {

                // ==========================================================
                // Teacher Dashboard
                // ==========================================================
                Route::get('/', [DashboardController::class, 'index'])->name('index');

                // ==========================================================
                // Classes
                // ==========================================================
                Route::get('/classes', [TeacherClassController::class, 'index'])
                    ->name('classes.index');

                Route::resource('classes', TeacherClassController::class)
                    ->parameters(['classes' => 'class'])
                    ->except(['index']);

                Route::get('classes/{class}/students', [TeacherClassController::class, 'students'])
                    ->name('classes.students');

                Route::post('classes/{class}/students', [TeacherClassController::class, 'addStudent'])
                    ->name('classes.students.add');

                Route::delete('classes/{class}/students/{student}', [TeacherClassController::class, 'removeStudent'])
                    ->name('classes.students.remove');

                // ==========================================================
                // Exams (create/store Ø¨Ø±Ú¯Ø´Øª Ø¨Ù‡ resource Ú©Ø§Ù…Ù„)
                // ==========================================================
                Route::resource('exams', TeacherExamController::class);

                // ==========================================================
                // Exams AJAX Data (Ø¨Ø±Ø§ÛŒ ÙˆØµÙ„ Ú©Ø±Ø¯Ù† UUID ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ù‡ ÙØ±Ø§Ù†Øª)
                // Ø§ÛŒÙ† route Ù‡Ø§ Ø±Ø§ Ø¯Ø± TeacherExamController Ù…ÛŒâ€ŒØ³Ø§Ø²ÛŒÙ…
                // ==========================================================
                Route::prefix('exams/data')
                    ->name('exams.data.')
                    ->group(function () {

                        Route::get('/sections', [TeacherExamController::class, 'sections'])
                            ->name('sections');

                        Route::get('/grades', [TeacherExamController::class, 'grades'])
                            ->name('grades');

                        Route::get('/branches', [TeacherExamController::class, 'branches'])
                            ->name('branches');

                        Route::get('/fields', [TeacherExamController::class, 'fields'])
                            ->name('fields');

                        Route::get('/subfields', [TeacherExamController::class, 'subfields'])
                            ->name('subfields');

                        // âœ… FIX: Ø¨Ø§ÛŒØ¯ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ subject-types Ø¨Ø§Ø´Ø¯ ØªØ§ Blade Ø®Ø·Ø§ Ù†Ø¯Ù‡Ø¯
                        Route::get('/subject-types', [TeacherExamController::class, 'subjectTypes'])
                            ->name('subject-types');

                        Route::get('/subjects', [TeacherExamController::class, 'subjects'])
                            ->name('subjects');
                    });

                // ==========================================================
                // Questions
                // ==========================================================
                Route::get('/exams/{exam}/questions', [QuestionController::class, 'index'])
                    ->name('exams.questions.index');
                Route::get('/exams/{exam}/questions/create', [QuestionController::class, 'create'])
                    ->name('exams.questions.create');
                Route::post('/exams/{exam}/questions', [QuestionController::class, 'store'])
                    ->name('exams.questions.store');
                Route::get('/exams/{exam}/questions/{question}/edit', [QuestionController::class, 'edit'])
                    ->name('exams.questions.edit');
                Route::put('/exams/{exam}/questions/{question}', [QuestionController::class, 'update'])
                    ->name('exams.questions.update');
                Route::delete('/exams/{exam}/questions/{question}', [QuestionController::class, 'destroy'])
                    ->name('exams.questions.destroy');

                // ==========================================================
                // Students
                // ==========================================================
                Route::get('/students', [TeacherStudentController::class, 'index'])
                    ->name('students.index');
                Route::get('/students/{student}', [TeacherStudentController::class, 'show'])
                    ->name('students.show');
                Route::get('/students/{student}/attempts', [TeacherStudentController::class, 'attempts'])
                    ->name('students.attempts');

                // Attempts
                Route::get('/attempts/{attempt}', [TeacherStudentController::class, 'attemptShow'])
                    ->name('attempts.show');
                Route::post('/attempts/{attempt}/answers/{answer}/grade', [TeacherStudentController::class, 'gradeEssayAnswer'])
                    ->name('attempts.answers.grade');

                // ==========================================================
                // Subjects
                // ==========================================================
                Route::get('/subjects', [SubjectController::class, 'index'])
                    ->name('subjects.index');
                Route::post('/subjects', [SubjectController::class, 'store'])
                    ->name('subjects.store');

                // ==========================================================
                // Static
                // ==========================================================
                Route::view('/reports', 'dashboard.teacher.reports.index')->name('reports.index');
                Route::view('/profile', 'dashboard.teacher.profile')->name('profile');
            });
    });

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 180: web.php
ğŸ“ PATH: routes/web.php
ğŸ“ SIZE: 942 bytes
ğŸ•’ MODIFIED: 2025-12-08 16:39:59
----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\LandingController;

// Landing Page
Route::get('/', [LandingController::class, 'index'])->name('landing');

// ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ† Ø¹Ù…ÙˆÙ…ÛŒ (Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ Ø¬Ø¯Ø§ Ø¨Ø§Ø´Ø¯)
Route::get('/login', function () {
    return view('auth.login');
})->name('login');

// Route Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ
Route::get('/privacy-policy', function () {
    return view('privacy-policy');
})->name('privacy');

// Route Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ Ø´Ø±Ø§ÛŒØ· Ø§Ø³ØªÙØ§Ø¯Ù‡
Route::get('/terms-of-service', function () {
    return view('terms-of-service');
})->name('terms');

// Authentication Routes
require __DIR__.'/auth.php';

// Dashboard Routes
require __DIR__.'/student.php';
require __DIR__.'/teacher.php';
require __DIR__.'/admin.php';
require __DIR__.'/counselor.php';

// Fallback Route
Route::fallback(function () {
    return redirect()->route('landing');
});

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 181: 2025_12_05_103024_create_users_table.php
ğŸ“ PATH: database/migrations/2025_12_05_103024_create_users_table.php
ğŸ“ SIZE: 728 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:21:59
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->engine = 'InnoDB';
            $table->uuid("id")->primary();
            $table->string('name', 150);
            $table->string('email', 190)->nullable();
            $table->string('phone', 30)->nullable();
            $table->string('password', 255);
            $table->string('status', 30);
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('users');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 182: 2025_12_06_102945_create_academic_assessments_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102945_create_academic_assessments_table.php
ğŸ“ SIZE: 1,281 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:23:31
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('academic_assessments', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->string('section_id')->nullable();
            $table->string('grade_id')->nullable();
            $table->string('branch_id')->nullable();
            $table->string('field_id')->nullable();
            $table->string('subfield_id')->nullable();
            $table->string('subject_id')->nullable();
            $table->string('topic_id')->nullable();
            $table->enum('assessment_type', ['diagnostic','weekly','exam_result','practice']);
            $table->decimal('score_percent', 5, 2);
            $table->decimal('mastery_level', 5, 2);
            $table->longText('weaknesses')->nullable();
            $table->longText('strengths')->nullable();
            $table->dateTime('taken_at');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('academic_assessments');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 183: 2025_12_06_102947_create_ai_artifacts_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102947_create_ai_artifacts_table.php
ğŸ“ SIZE: 1,052 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:26:24
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_artifacts', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('session_id');
            $table->enum('artifact_type', ['content','question','plan','report','rubric','other']);
            $table->string('title', 250)->nullable();
            $table->longText('body')->nullable();
            $table->string('linked_table', 100)->nullable();
            $table->string('linked_id')->nullable();
            $table->enum('status', ['draft','approved','published','rejected']);
            $table->string('reviewer_id')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_artifacts');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 184: 2025_12_06_102948_create_ai_feedback_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102948_create_ai_feedback_table.php
ğŸ“ SIZE: 756 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:12:41
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_feedback', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('session_id');
            $table->string('message_id')->nullable();
            $table->unsignedTinyInteger('rating');
            $table->text('feedback_text')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_feedback');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 185: 2025_12_06_102949_create_ai_messages_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102949_create_ai_messages_table.php
ğŸ“ SIZE: 867 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:13:01
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_messages', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('session_id');
            $table->enum('sender_type', ['user','ai','system']);
            $table->longText('content');
            $table->string('tokens_in')->nullable();
            $table->string('tokens_out')->nullable();
            $table->longText('safety_flags')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_messages');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 186: 2025_12_06_102950_create_ai_sessions_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102950_create_ai_sessions_table.php
ğŸ“ SIZE: 1,300 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:13:17
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_sessions', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('ai_agent_id');
            $table->enum('context_type', ['teaching','counseling','qna','exam_help','mixed']);
            $table->string('section_id')->nullable();
            $table->string('grade_id')->nullable();
            $table->string('branch_id')->nullable();
            $table->string('field_id')->nullable();
            $table->string('subfield_id')->nullable();
            $table->string('subject_id')->nullable();
            $table->string('topic_id')->nullable();
            $table->string('classroom_id')->nullable();
            $table->string('exam_id')->nullable();
            $table->dateTime('started_at');
            $table->dateTime('ended_at')->nullable();
            $table->longText('metadata')->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_sessions');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 187: 2025_12_06_102951_create_attempt_answers_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102951_create_attempt_answers_table.php
ğŸ“ SIZE: 787 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:13:28
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('attempt_answers', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('attempt_id');
            $table->string('question_id');
            $table->longText('answer')->nullable();
            $table->boolean('is_correct')->nullable();
            $table->decimal('score', 6, 2)->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('attempt_answers');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 188: 2025_12_06_102953_1_create_sections_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_1_create_sections_table.php
ğŸ“ SIZE: 773 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:10:19
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('sections', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            $table->string('slug', 100)->unique();  // Ù…Ø«Ù„ "middle", "high"
            $table->string('name_fa', 150);

            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('sections');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 189: 2025_12_06_102953_2_0_create_grades_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_2_0_create_grades_table.php
ğŸ“ SIZE: 1,075 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:15:45
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('grades', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            // âœ… FK Ø¨Ù‡ sections (UUID)
            $table->uuid('section_id');
            $table->foreign('section_id')
                ->references('id')->on('sections')
                ->cascadeOnDelete();

            // âœ… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒÙ‡
            $table->string('value', 50);      // Ù…Ø«Ù„ "10", "11", "12" ÛŒØ§ "7", "8", ...
            $table->string('name_fa', 150);   // Ù…Ø«Ù„ "Ø¯Ù‡Ù…", "ÛŒØ§Ø²Ø¯Ù‡Ù…"
            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('grades');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 190: 2025_12_06_102953_2_1_create_branches_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_2_1_create_branches_table.php
ğŸ“ SIZE: 1,103 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:09:43
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('branches', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            // âœ… FK Ø¨Ù‡ sections (UUID)
            $table->uuid('section_id');
            $table->foreign('section_id')
                ->references('id')->on('sections')
                ->cascadeOnDelete();

            // âœ… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø¨Ø±Ø§ÛŒ Ù„ÛŒØ³Øª Ùˆ Ø§Ù†ØªØ®Ø§Ø¨
            $table->string('slug', 100)->unique();   // Ù…Ø«Ù„Ø§Ù‹ "math" ÛŒØ§ "tajrobi"
            $table->string('name_fa', 150);          // Ù†Ø§Ù… ÙØ§Ø±Ø³ÛŒ
            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('branches');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 191: 2025_12_06_102953_3_create_fields_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_3_create_fields_table.php
ğŸ“ SIZE: 993 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:11:23
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('fields', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            // âœ… FK Ø¨Ù‡ branches (UUID)
            $table->uuid('branch_id');
            $table->foreign('branch_id')
                ->references('id')->on('branches')
                ->cascadeOnDelete();

            $table->string('slug', 100)->unique();
            $table->string('name_fa', 150);

            // âœ… sort_order Ø¹Ø¯Ø¯ÛŒ
            $table->unsignedInteger('sort_order')->default(0);

            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('fields');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 192: 2025_12_06_102953_4_create_subfields_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_4_create_subfields_table.php
ğŸ“ SIZE: 1,043 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:13:23
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('subfields', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            // âœ… FK Ø¨Ù‡ fields (UUID)
            $table->uuid('field_id');
            $table->foreign('field_id')
                ->references('id')->on('fields')
                ->cascadeOnDelete();

            // âœ… ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù„Ø§Ø²Ù…
            $table->string('slug', 100)->unique();
            $table->string('name_fa', 150);
            $table->string('icon')->nullable();
            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('subfields');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 193: 2025_12_06_102953_5_0_create_subject_types_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_5_0_create_subject_types_table.php
ğŸ“ SIZE: 1,143 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:13:26
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('subject_types', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            // âœ… Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ù…Ø·Ø§Ø¨Ù‚ Ù…Ø¯Ù„ SubjectType
            $table->string('slug', 100)->unique();
            $table->string('name_fa', 150);

            $table->decimal('coefficient', 5, 2)->nullable();
            $table->unsignedTinyInteger('weight_percent')->nullable();
            $table->unsignedSmallInteger('default_question_count')->nullable();

            $table->string('color')->nullable();
            $table->string('icon')->nullable();

            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('subject_types');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 194: 2025_12_06_102953_5_1_create_subjects_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_5_1_create_subjects_table.php
ğŸ“ SIZE: 1,684 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:12:43
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('subjects', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… PK UUID
            $table->uuid('id')->primary();

            $table->string('title_fa', 200);
            $table->string('code', 50)->nullable();

            // Ø§Ú¯Ø± Ø³Ø§Ø¹Ø§Øª Ù…Ù…Ú©Ù†Ù‡ Ø¨ÛŒØ´ØªØ± Ø§Ø² 255 Ø¨Ø´Ù‡ØŒ unsignedSmallInteger Ø¨Ù‡ØªØ±Ù‡
            $table->unsignedSmallInteger('hours')->nullable();

            // âœ… Ù‡Ù…Ù‡ FKÙ‡Ø§ UUID
            $table->uuid('grade_id');
            $table->uuid('branch_id');
            $table->uuid('field_id');
            $table->uuid('subfield_id')->nullable();
            $table->uuid('subject_type_id')->nullable();

            $table->text('description')->nullable();
            $table->boolean('is_active')->default(true);

            // âœ… FKÙ‡Ø§ÛŒ UUID
            $table->foreign('grade_id')->references('id')->on('grades')->restrictOnDelete();
            $table->foreign('branch_id')->references('id')->on('branches')->restrictOnDelete();
            $table->foreign('field_id')->references('id')->on('fields')->restrictOnDelete();
            $table->foreign('subfield_id')->references('id')->on('subfields')->nullOnDelete();
            $table->foreign('subject_type_id')->references('id')->on('subject_types')->nullOnDelete();

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('subjects');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 195: 2025_12_06_102953_create_classrooms_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102953_create_classrooms_table.php
ğŸ“ SIZE: 2,211 bytes
ğŸ•’ MODIFIED: 2025-12-06 18:46:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('classrooms', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            $table->string('id')->primary();

            $table->string('teacher_id');
            $table->foreign('teacher_id')
                ->references('id')->on('users')
                ->cascadeOnDelete();

            $table->string('title', 200);
            $table->text('description')->nullable();

            // Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ù‡Ù… Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ù†ÙˆØ¹ id Ø¬Ø¯ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ù‚ØµØ¯ ÛŒÚ©ÛŒ Ø¨Ø§Ø´Ù†Ø¯.
            // Ú†ÙˆÙ† Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒØ§Øª Ù‚Ø¨Ù„Ø§Ù‹ string Ø¨ÙˆØ¯Ù‡ØŒ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ù… string Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±ÛŒÙ…:
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id')->nullable();
            $table->string('subject_type_id')->nullable();

            $table->enum('classroom_type', ['single', 'comprehensive']);

            $table->string('join_code', 20)->unique();
            $table->boolean('is_active')->default(true);

            $table->json('metadata')->nullable();

            $table->timestamps();

            // FKÙ‡Ø§ÛŒ Ø³Ø§Ø®ØªØ§Ø±ÛŒ (Ø§Ú¯Ø± Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ù‚ØµØ¯ id=string Ø¯Ø§Ø±Ù†Ø¯ØŒ Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯)
            $table->foreign('section_id')->references('id')->on('sections')->restrictOnDelete();
            $table->foreign('grade_id')->references('id')->on('grades')->restrictOnDelete();
            $table->foreign('branch_id')->references('id')->on('branches')->restrictOnDelete();
            $table->foreign('field_id')->references('id')->on('fields')->restrictOnDelete();

            $table->foreign('subfield_id')->references('id')->on('subfields')->nullOnDelete();
            $table->foreign('subject_type_id')->references('id')->on('subject_types')->nullOnDelete();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('classrooms');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 196: 2025_12_06_102954_create_classroom_subject_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102954_create_classroom_subject_table.php
ğŸ“ SIZE: 919 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:13:18
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('classroom_subject', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… FKÙ‡Ø§ UUID
            $table->uuid('classroom_id');
            $table->uuid('subject_id');

            $table->foreign('classroom_id')
                ->references('id')->on('classrooms')
                ->cascadeOnDelete();

            $table->foreign('subject_id')
                ->references('id')->on('subjects')
                ->cascadeOnDelete();

            // âœ… Ú©Ù„ÛŒØ¯ Ù…Ø±Ú©Ø¨
            $table->primary(['classroom_id', 'subject_id']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('classroom_subject');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 197: 2025_12_06_102955_create_classroom_user_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102955_create_classroom_user_table.php
ğŸ“ SIZE: 958 bytes
ğŸ•’ MODIFIED: 2025-12-06 21:13:56
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('classroom_user', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // âœ… FKÙ‡Ø§ UUID
            $table->uuid('classroom_id');
            $table->uuid('user_id');

            $table->foreign('classroom_id')
                ->references('id')->on('classrooms')
                ->cascadeOnDelete();

            $table->foreign('user_id')
                ->references('id')->on('users')
                ->cascadeOnDelete();

            // âœ… Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø«Ø¨Øª ØªÚ©Ø±Ø§Ø±ÛŒ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± ÛŒÚ© Ú©Ù„Ø§Ø³
            $table->primary(['classroom_id', 'user_id']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('classroom_user');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 198: 2025_12_06_102956_create_contents_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102956_create_contents_table.php
ğŸ“ SIZE: 1,372 bytes
ğŸ•’ MODIFIED: 2025-12-06 18:46:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('contents', function (Blueprint $table) {
            $table->uuid('user_id');
$table->foreign('user_id')->references('id')->on('users');            $table->string('creator_id');
            $table->enum('type', ['video','pdf','article','link','quiz','other']);
            $table->string('title', 250);
            $table->text('description')->nullable();
            $table->text('file_path')->nullable();
            $table->text('url')->nullable();
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('subject_id');
            $table->string('topic_id')->nullable();
            $table->enum('access_level', ['public','classroom','private']);
            $table->string('classroom_id')->nullable();
            $table->string('ai_generated_by_session_id')->nullable();
            $table->boolean('is_active');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('contents');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 199: 2025_12_06_102958_create_counselor_profiles_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102958_create_counselor_profiles_table.php
ğŸ“ SIZE: 718 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:14:40
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('counselor_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->longText('focus_area')->nullable();
            $table->string('main_section_id')->nullable();
            $table->string('main_branch_id')->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('counselor_profiles');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 200: 2025_12_06_102959_create_exams_table.php
ğŸ“ PATH: database/migrations/2025_12_06_102959_create_exams_table.php
ğŸ“ SIZE: 1,842 bytes
ğŸ•’ MODIFIED: 2025-12-06 20:44:29
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exams', function (Blueprint $table) {

            // âœ… Ú©Ù„ÛŒØ¯ Ø§ØµÙ„ÛŒ UUID
            $table->uuid('id')->primary();

            // Ø§Ú¯Ø± user_id Ù„Ø§Ø²Ù… Ø¯Ø§Ø±ÛŒ Ù†Ú¯Ù‡Ø´ Ø¯Ø§Ø±
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');

            // Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ù‡Ù… Ø¨Ù‡ØªØ±Ù‡ uuid/string Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§Ø´Ù†
            $table->string('teacher_id');
            $table->string('classroom_id')->nullable();

            $table->enum('exam_type', ['public','class_single','class_comprehensive']);
            $table->string('title', 250);
            $table->text('description')->nullable();
            $table->string('duration_minutes');
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('subject_type_id');
            $table->string('total_questions')->nullable();
            $table->longText('coefficients')->nullable();
            $table->dateTime('start_at')->nullable();
            $table->dateTime('end_at')->nullable();
            $table->boolean('shuffle_questions');
            $table->boolean('shuffle_options');
            $table->boolean('ai_assisted');
            $table->string('ai_session_id')->nullable();
            $table->boolean('is_active');
            $table->boolean('is_published');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exams');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 201: 2025_12_06_103000_create_exam_attempts_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103000_create_exam_attempts_table.php
ğŸ“ SIZE: 853 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:15:01
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exam_attempts', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('exam_id');
            $table->string('student_id');
            $table->dateTime('started_at');
            $table->dateTime('finished_at')->nullable();
            $table->enum('status', ['in_progress','submitted','graded']);
            $table->decimal('total_score', 6, 2)->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exam_attempts');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 202: 2025_12_06_103001_create_exam_questions_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103001_create_exam_questions_table.php
ğŸ“ SIZE: 518 bytes
ğŸ•’ MODIFIED: 2025-12-06 18:46:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exam_questions', function (Blueprint $table) {
            $table->string('exam_id');
            $table->string('question_id');
            $table->string('sort_order');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exam_questions');
    }
};
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 203: 2025_12_06_103002_create_exam_subject_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103002_create_exam_subject_table.php
ğŸ“ SIZE: 529 bytes
ğŸ•’ MODIFIED: 2025-12-06 18:46:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exam_subject', function (Blueprint $table) {
            $table->string('exam_id');
            $table->string('subject_id');
            $table->string('question_count')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exam_subject');
    }
};
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 204: 2025_12_06_103005_create_learning_paths_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103005_create_learning_paths_table.php
ğŸ“ SIZE: 1,014 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:22:03
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('learning_paths', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->enum('path_type', ['academic','counseling','mixed']);
            $table->string('title', 250);
            $table->date('start_date');
            $table->date('end_date')->nullable();
            $table->enum('status', ['active','completed','archived']);
            $table->enum('generated_by', ['ai','counselor','teacher','system']);
            $table->longText('metadata')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('learning_paths');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 205: 2025_12_06_103006_create_learning_path_steps_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103006_create_learning_path_steps_table.php
ğŸ“ SIZE: 1,547 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:15:35
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('learning_path_steps', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('learning_path_id');
            $table->enum('step_type', ['topic','subject','content','exercise','exam','counseling_task']);
            $table->string('order_index');
            $table->string('section_id')->nullable();
            $table->string('grade_id')->nullable();
            $table->string('branch_id')->nullable();
            $table->string('field_id')->nullable();
            $table->string('subfield_id')->nullable();
            $table->string('subject_id')->nullable();
            $table->string('topic_id')->nullable();
            $table->string('content_id')->nullable();
            $table->string('exam_id')->nullable();
            $table->string('counseling_task_id')->nullable();
            $table->string('estimated_minutes')->nullable();
            $table->decimal('required_mastery', 5, 2);
            $table->enum('status', ['locked','current','done','skipped']);
            $table->date('due_date')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('learning_path_steps');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 206: 2025_12_06_103007_create_otps_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103007_create_otps_table.php
ğŸ“ SIZE: 1,092 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:28:59
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create("otps", function (Blueprint $table) {
            $table->engine = "InnoDB";

            // âœ… UUID primary key
            $table->uuid("id")->primary();

            $table->string("phone", 15)->index();
            $table->string("code", 6);
            $table->string("token", 255)->nullable();

            // âœ… default Ú¯Ø°Ø§Ø´ØªÛŒÙ… ØªØ§ Ø§Ú¯Ø± Ù†ÙØ±Ø³ØªÛŒ Ø®Ø·Ø§ Ù†Ø¯Ù‡
            $table->enum("type", ["login","register","password_reset"])
                  ->default("login");

            $table->unsignedTinyInteger("attempts")->default(0);
            $table->boolean("verified")->default(false);

            $table->timestamp("expires_at");
            $table->timestamp("verified_at")->nullable();

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists("otps");
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 207: 2025_12_06_103008_create_psycho_assessments_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103008_create_psycho_assessments_table.php
ğŸ“ SIZE: 871 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:15:47
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('psycho_assessments', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->enum('assessment_type', ['stress','motivation','focus','anxiety','mood','sleep']);
            $table->decimal('value', 5, 2);
            $table->text('notes')->nullable();
            $table->dateTime('measured_at');
            $table->enum('source', ['self_report','counselor','ai_inferred']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('psycho_assessments');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 208: 2025_12_06_103009_create_questions_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103009_create_questions_table.php
ğŸ“ SIZE: 1,500 bytes
ğŸ•’ MODIFIED: 2025-12-06 20:48:04
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('questions', function (Blueprint $table) {

            // âœ… Ú©Ù„ÛŒØ¯ Ø§ØµÙ„ÛŒ UUID
            $table->uuid('id')->primary();

            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');

            $table->string('creator_id');
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('subject_id');
            $table->string('topic_id')->nullable();
            $table->unsignedTinyInteger('difficulty');
            $table->enum('question_type', ['mcq','descriptive','true_false','matching','short_answer','other']);
            $table->longText('content');
            $table->longText('options')->nullable();
            $table->longText('correct_answer');
            $table->longText('explanation')->nullable();
            $table->string('ai_generated_by_session_id')->nullable();
            $table->decimal('ai_confidence', 5, 2)->nullable();
            $table->boolean('is_active');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('questions');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 209: 2025_12_06_103010_create_roles_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103010_create_roles_table.php
ğŸ“ SIZE: 606 bytes
ğŸ•’ MODIFIED: 2025-12-06 18:46:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('roles', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->string('name', 100);
            $table->string('slug', 100)->unique();
            $table->boolean('is_active')->default(true);
            $table->timestamps();
        });

    }

    public function down(): void
    {
        Schema::dropIfExists('roles');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 210: 2025_12_06_103013_create_student_counseling_task_logs_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103013_create_student_counseling_task_logs_table.php
ğŸ“ SIZE: 779 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:16:16
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_counseling_task_logs', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->string('counseling_task_id');
            $table->dateTime('done_at');
            $table->unsignedTinyInteger('self_rating')->nullable();
            $table->text('notes')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_counseling_task_logs');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 211: 2025_12_06_103014_create_student_daily_logs_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103014_create_student_daily_logs_table.php
ğŸ“ SIZE: 936 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:16:25
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_daily_logs', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->date('log_date');
            $table->string('study_minutes');
            $table->unsignedTinyInteger('mood')->nullable();
            $table->unsignedTinyInteger('stress_level')->nullable();
            $table->decimal('sleep_hours', 4, 1)->nullable();
            $table->text('free_text')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_daily_logs');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 212: 2025_12_06_103015_create_student_goals_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103015_create_student_goals_table.php
ğŸ“ SIZE: 1,065 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:16:35
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_goals', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->enum('goal_type', ['academic','psychological','career']);
            $table->string('title', 250);
            $table->text('description')->nullable();
            $table->date('target_date')->nullable();
            $table->enum('status', ['active','done','paused']);
            $table->unsignedTinyInteger('priority');
            $table->string('related_subject_id')->nullable();
            $table->string('related_topic_id')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_goals');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 213: 2025_12_06_103016_create_student_learning_profiles_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103016_create_student_learning_profiles_table.php
ğŸ“ SIZE: 910 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:16:43
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_learning_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->longText('preferred_style')->nullable();
            $table->unsignedTinyInteger('pace_level');
            $table->string('study_time_per_day')->nullable();
            $table->longText('goals_json')->nullable();
            $table->text('counselor_notes')->nullable();
            $table->text('ai_summary')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_learning_profiles');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 214: 2025_12_06_103017_create_student_profiles_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103017_create_student_profiles_table.php
ğŸ“ SIZE: 808 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:16:55
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('national_code', 20)->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_profiles');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 215: 2025_12_06_103021_create_teacher_profiles_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103021_create_teacher_profiles_table.php
ğŸ“ SIZE: 820 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:17:06
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('teacher_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->text('bio')->nullable();
            $table->string('main_section_id')->nullable();
            $table->string('main_branch_id')->nullable();
            $table->string('main_field_id')->nullable();
            $table->string('main_subfield_id')->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('teacher_profiles');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 216: 2025_12_06_103022_create_teacher_subject_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103022_create_teacher_subject_table.php
ğŸ“ SIZE: 480 bytes
ğŸ•’ MODIFIED: 2025-12-06 18:46:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('teacher_subject', function (Blueprint $table) {
            $table->string('teacher_id');
            $table->string('subject_id');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('teacher_subject');
    }
};
......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 217: 2025_12_06_103023_create_topics_table.php
ğŸ“ PATH: database/migrations/2025_12_06_103023_create_topics_table.php
ğŸ“ SIZE: 692 bytes
ğŸ•’ MODIFIED: 2025-12-06 19:17:16
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('topics', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('subject_id');
            $table->string('title_fa', 200);
            $table->string('sort_order');
            $table->boolean('is_active');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('topics');
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 218: 2025_12_06_184150_create_role_user_table.php
ğŸ“ PATH: database/migrations/2025_12_06_184150_create_role_user_table.php
ğŸ“ SIZE: 693 bytes
ğŸ•’ MODIFIED: 2025-12-06 20:00:49
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::create("role_user", function (Blueprint $table) {
            $table->uuid("user_id");
            $table->uuid("role_id");

            $table->foreign("user_id")->references("id")->on("users")->cascadeOnDelete();
            $table->foreign("role_id")->references("id")->on("roles")->cascadeOnDelete();

            $table->primary(["user_id","role_id"]);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists("role_user");
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 219: 2025_12_06_213732_add_subject_id_to_classrooms_table.php
ğŸ“ PATH: database/migrations/2025_12_06_213732_add_subject_id_to_classrooms_table.php
ğŸ“ SIZE: 959 bytes
ğŸ•’ MODIFIED: 2025-12-07 05:33:11
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
use Illuminate\Support\Facades\Auth;
return new class extends Migration
{
    public function up(): void
    {
        Schema::table('classrooms', function (Blueprint $table) {
            if (!Schema::hasColumn('classrooms', 'subject_id')) {
                $table->string('subject_id')->nullable()->after('subfield_id');

                $table->foreign('subject_id')
                    ->references('id')
                    ->on('subjects')
                    ->nullOnDelete();
            }
        });
    }

    public function down(): void
    {
        Schema::table('classrooms', function (Blueprint $table) {
            if (Schema::hasColumn('classrooms', 'subject_id')) {
                $table->dropForeign(['subject_id']);
                $table->dropColumn('subject_id');
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 220: 2025_12_07_065944_add_selected_role_to_users_table.php
ğŸ“ PATH: database/migrations/2025_12_07_065944_add_selected_role_to_users_table.php
ğŸ“ SIZE: 620 bytes
ğŸ•’ MODIFIED: 2025-12-07 07:59:52
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::table('users', function (Blueprint $table) {
            // Ù†Ù‚Ø´ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø± (admin / teacher / student)
            $table->string('selected_role', 30)->nullable()->after('status');
        });
    }

    public function down(): void
    {
        Schema::table('users', function (Blueprint $table) {
            $table->dropColumn('selected_role');
        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 221: 2025_12_07_132305_add_slug_to_grades_table.php
ğŸ“ PATH: database/migrations/2025_12_07_132305_add_slug_to_grades_table.php
ğŸ“ SIZE: 563 bytes
ğŸ•’ MODIFIED: 2025-12-07 14:24:14
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table('grades', function (Blueprint $table) {
            $table->string('slug', 100)->unique()->after('name_fa');
        });
    }

    public function down(): void
    {
        Schema::table('grades', function (Blueprint $table) {
            $table->dropUnique(['slug']);
            $table->dropColumn('slug');
        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 222: 2025_12_07_171520_add_slug_to_subjects_table.php
ğŸ“ PATH: database/migrations/2025_12_07_171520_add_slug_to_subjects_table.php
ğŸ“ SIZE: 723 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:15:45
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table('subjects', function (Blueprint $table) {
            if (!Schema::hasColumn("subjects", "slug")) {
                $table->string("slug", 255)->after("title_fa")->unique();
            }
        });
    }

    public function down(): void
    {
        Schema::table('subjects', function (Blueprint $table) {
            if (Schema::hasColumn("subjects", "slug")) {
                $table->dropUnique(["slug"]);
                $table->dropColumn("slug");
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 223: 2025_12_07_171758_add_missing_columns_to_subjects_table.php
ğŸ“ PATH: database/migrations/2025_12_07_171758_add_missing_columns_to_subjects_table.php
ğŸ“ SIZE: 1,853 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:18:07
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (!Schema::hasColumn("subjects", "slug")) {
                $table->string("slug", 255)->after("title_fa")->unique();
            }

            if (!Schema::hasColumn("subjects", "code")) {
                $table->string("code", 50)->nullable()->after("slug");
            }

            if (!Schema::hasColumn("subjects", "hours")) {
                $table->unsignedInteger("hours")->nullable()->default(0)->after("code");
            }

            if (!Schema::hasColumn("subjects", "sort_order")) {
                $table->unsignedInteger("sort_order")->nullable()->default(0)->after("hours");
            }

            if (!Schema::hasColumn("subjects", "is_active")) {
                $table->boolean("is_active")->default(1)->after("sort_order");
            }

        });
    }

    public function down(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (Schema::hasColumn("subjects", "is_active")) {
                $table->dropColumn("is_active");
            }

            if (Schema::hasColumn("subjects", "sort_order")) {
                $table->dropColumn("sort_order");
            }

            if (Schema::hasColumn("subjects", "hours")) {
                $table->dropColumn("hours");
            }

            if (Schema::hasColumn("subjects", "code")) {
                $table->dropColumn("code");
            }

            if (Schema::hasColumn("subjects", "slug")) {
                $table->dropUnique(["slug"]);
                $table->dropColumn("slug");
            }

        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 224: 2025_12_07_172215_add_section_and_sort_order_to_subjects_table.php
ğŸ“ PATH: database/migrations/2025_12_07_172215_add_section_and_sort_order_to_subjects_table.php
ğŸ“ SIZE: 1,127 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:22:39
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (!Schema::hasColumn("subjects", "section_id")) {
                $table->char("section_id", 36)
                    ->after("hours")
                    ->index();
            }

            if (!Schema::hasColumn("subjects", "sort_order")) {
                $table->unsignedInteger("sort_order")
                    ->default(0)
                    ->after("description");
            }
        });
    }

    public function down(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (Schema::hasColumn("subjects", "sort_order")) {
                $table->dropColumn("sort_order");
            }

            if (Schema::hasColumn("subjects", "section_id")) {
                $table->dropIndex(["section_id"]);
                $table->dropColumn("section_id");
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 225: 2025_12_07_172408_add_section_id_to_subjects_table.php
ğŸ“ PATH: database/migrations/2025_12_07_172408_add_section_id_to_subjects_table.php
ğŸ“ SIZE: 789 bytes
ğŸ•’ MODIFIED: 2025-12-07 18:24:17
----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (!Schema::hasColumn("subjects", "section_id")) {
                $table->char("section_id", 36)
                    ->after("hours")
                    ->index();
            }
        });
    }

    public function down(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (Schema::hasColumn("subjects", "section_id")) {
                $table->dropIndex(["section_id"]);
                $table->dropColumn("section_id");
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 226: DatabaseSeeder.php
ğŸ“ PATH: database/seeders/DatabaseSeeder.php
ğŸ“ SIZE: 377 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        $this->call([
            RoleSeeder::class,          // Ø§ÙˆÙ„ Ù†Ù‚Ø´â€ŒÙ‡Ø§
            TechUsageExamsSeeder::class,// Ø¨Ø¹Ø¯ Ø¯ÛŒØªØ§Ù‡Ø§ÛŒ ÙˆØ§Ø¨Ø³ØªÙ‡
            // Ø¨Ù‚ÛŒÙ‡ seeders Ø§Ú¯Ø± Ø¯Ø§Ø±ÛŒ
        ]);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 227: FakeStudentSeeder.php
ğŸ“ PATH: database/seeders/FakeStudentSeeder.php
ğŸ“ SIZE: 1,139 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\User;
use App\Models\Role;
use Illuminate\Support\Facades\Hash;

class FakeStudentSeeder extends Seeder
{
    public function run(): void
    {
        // Ù†Ù‚Ø´ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
        $studentRoleId = Role::where('slug', 'student')->value('id');

        // Ø§Ú¯Ø± Ù†Ù‚Ø´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªØŒ Seeder Ø±Ùˆ Ø®Ø±Ø§Ø¨ Ù†Ú©Ù†
        if (! $studentRoleId) {
            $this->command?->warn("Role [student] not found. Run RoleSeeder first.");
            return;
        }

        // Ø³Ø§Ø®Øª Ú†Ù†Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² ÙÛŒÚ©
        for ($i = 1; $i <= 20; $i++) {

            $user = User::updateOrCreate(
                ['phone' => '09' . rand(100000000, 999999999)],
                [
                    'name'     => "Fake Student {$i}",
                    'email'    => null,
                    'password' => Hash::make('12345678'),
                    'status'   => 'active',
                ]
            );

            // Ø§ØªØµØ§Ù„ Ù†Ù‚Ø´ Ø¯Ø± pivot
            $user->roles()->syncWithoutDetaching([$studentRoleId]);
        }
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 228: RoleSeeder.php
ğŸ“ PATH: database/seeders/RoleSeeder.php
ğŸ“ SIZE: 561 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Role;

class RoleSeeder extends Seeder
{
    public function run(): void
    {
        $roles = [
            ['name' => 'admin', 'title' => 'Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…'],
            ['name' => 'teacher', 'title' => 'Ù…Ø¹Ù„Ù…'],
            ['name' => 'student', 'title' => 'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²'],
            ['name' => 'counselor', 'title' => 'Ù…Ø´Ø§ÙˆØ±'],
        ];

        foreach ($roles as $r) {
            Role::firstOrCreate(['name' => $r['name']], $r);
        }
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 229: SubjectSeeder.php
ğŸ“ PATH: database/seeders/SubjectSeeder.php
ğŸ“ SIZE: 485 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Subject;

class SubjectSeeder extends Seeder
{
    public function run(): void
    {
        $items = [
            ['title' => 'Ø±ÛŒØ§Ø¶ÛŒ'],
            ['title' => 'ÙÛŒØ²ÛŒÚ©'],
            ['title' => 'Ø´ÛŒÙ…ÛŒ'],
            ['title' => 'Ø²ÛŒØ³Øª'],
            ['title' => 'Ø§Ø¯Ø¨ÛŒØ§Øª'],
        ];

        foreach ($items as $it) {
            Subject::firstOrCreate($it);
        }
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 230: TechUsageExamsSeeder.php
ğŸ“ PATH: database/seeders/TechUsageExamsSeeder.php
ğŸ“ SIZE: 1,405 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\User;
use App\Models\Role;
use Illuminate\Support\Facades\Hash;

class TechUsageExamsSeeder extends Seeder
{
    public function run(): void
    {
        // 1) Ø³Ø§Ø®Øª Ù…Ø¹Ù„Ù…
        $teacher = User::updateOrCreate(
            ['id' => '9111434434'],
            [
                'name' => 'Teacher 9111434434',
                'phone' => '09110000000',
                'email' => null,
                'password' => Hash::make('12345678'),
                'status' => 'active', // âœ… Ø¨Ù‡ Ø¬Ø§ÛŒ is_active
            ]
        );

        // 2) Ø§ØªØµØ§Ù„ Ù†Ù‚Ø´ teacher
        $teacherRoleId = Role::where('slug', 'teacher')->value('id');
        if ($teacherRoleId) {
            $teacher->roles()->syncWithoutDetaching([$teacherRoleId]);
        }

        // Ø§Ú¯Ø± Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ù‡Ù… Ø¯Ø§Ø±ÛŒ Ù‡Ù…ÛŒÙ† Ø§Ù„Ú¯Ùˆ
        /*
        $student = User::updateOrCreate(
            ['id' => '...'],
            [
                'name' => 'Student ...',
                'phone' => '09...',
                'password' => Hash::make('12345678'),
                'status' => 'active',
            ]
        );

        $studentRoleId = Role::where('slug', 'student')->value('id');
        if ($studentRoleId) {
            $student->roles()->syncWithoutDetaching([$studentRoleId]);
        }
        */
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 231: EnsureRoleSelected.php
ğŸ“ PATH: app/Http/Middleware/EnsureRoleSelected.php
ğŸ“ SIZE: 1,423 bytes
ğŸ•’ MODIFIED: 2025-12-08 16:33:02
----------------------------------------------------------------------

<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class EnsureRoleSelected
{
    /**
     * Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù„Ø§Ú¯ÛŒÙ† Ø§Ø³Øª ÙˆÙ„ÛŒ Ù‡Ù†ÙˆØ² Ù†Ù‚Ø´ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ø¯Ø§Ø±Ø¯ØŒ
     * Ø¨Ù‡ ØµÙØ­Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´ (ÛŒØ§ landing) Ù‡Ø¯Ø§ÛŒØª Ø´ÙˆØ¯.
     *
     * Ù†Ù‚Ø´ Ø¬Ø§Ø±ÛŒ Ø§Ø² Ø³Ù‡ Ù…Ù†Ø¨Ø¹ Ù…Ù…Ú©Ù†:
     * 1) selected_role Ø¯Ø± "users"
     * 2) primaryRole Ø§Ø² pivot "role_user"
     * 3) status Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† fallback Ù‚Ø¯ÛŒÙ…ÛŒ
     */
    public function handle(Request $request, Closure $next)
    {
        $user = Auth::user();

        // Ø§Ú¯Ø± Ù…Ù‡Ù…Ø§Ù† Ø§Ø³ØªØŒ Ø§Ø¬Ø§Ø²Ù‡ Ø¹Ø¨ÙˆØ± Ø¨Ø¯Ù‡
        if (!$user) {
            return $next($request);
        }

        $currentRole = $user->selected_role
            ?? $user->primaryRole()
            ?? $user->status;

        // Ø§Ú¯Ø± Ù‡ÛŒÚ† Ù†Ù‚Ø´ÛŒ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ø¨ÙØ±Ø³Øª ØµÙØ­Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´
        if (!$currentRole) {
            // Ø§Ú¯Ø± route Ø±Ø³Ù…ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´ Ø¯Ø§Ø±ÛŒ
            if ($request->routeIs('role.select', 'role.set')) {
                return $next($request); // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù„ÙˆÙ¾
            }

            return redirect()->route('role.select');
            // Ø§Ú¯Ø± route Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù‚Ø´ Ù†Ø¯Ø§Ø±ÛŒ:
            // return redirect()->route('landing');
        }

        return $next($request);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 232: RoleMiddleware.php
ğŸ“ PATH: app/Http/Middleware/RoleMiddleware.php
ğŸ“ SIZE: 1,405 bytes
ğŸ•’ MODIFIED: 2025-12-08 16:48:57
----------------------------------------------------------------------

<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class RoleMiddleware
{
    public function handle(Request $request, Closure $next, ...$roles)
    {
        $user = Auth::user();
        if (!$user) {
            abort(401, 'Unauthenticated.');
        }

        $currentRole = $user->selected_role
            ?? $user->primaryRole()
            ?? $user->status;

        // Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø±Ø´ØªÙ‡
        $currentRole = is_string($currentRole)
            ? strtolower(trim($currentRole))
            : $currentRole;

        // Ù…Ù¾ Ø¨Ø±Ø§ÛŒ Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ø§ÛŒØ¬ name/ÙØ§Ø±Ø³ÛŒ/Ø¬Ù…Ø¹
        $map = [
            'admin' => 'admin',
            'administrator' => 'admin',
            'Ø§Ø¯Ù…ÛŒÙ†' => 'admin',

            'teacher' => 'teacher',
            'teachers' => 'teacher',
            'Ù…Ø¹Ù„Ù…' => 'teacher',

            'student' => 'student',
            'students' => 'student',
            'Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²' => 'student',

            'counselor' => 'counselor',
            'Ù…Ø´Ø§ÙˆØ±' => 'counselor',
        ];

        $currentRole = $map[$currentRole] ?? $currentRole;

        if (!$currentRole || !in_array($currentRole, $roles, true)) {
            abort(403, 'Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯.');
        }

        return $next($request);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 233: VerifyCsrfToken.php
ğŸ“ PATH: app/Http/Middleware/VerifyCsrfToken.php
ğŸ“ SIZE: 316 bytes
ğŸ•’ MODIFIED: 2025-12-06 08:55:56
----------------------------------------------------------------------

<?php

namespace App\Http\Middleware;

use Illuminate\Foundation\Http\Middleware\VerifyCsrfToken as Middleware;

class VerifyCsrfToken extends Middleware
{
    protected $except = [
        // âœ… OTP Ø¨Ø±Ø§ÛŒ Ù…Ù‡Ù…Ø§Ù†â€ŒÙ‡Ø§ Ù†Ø¨Ø§ÛŒØ¯ CSRF Ø¨Ø®ÙˆØ§Ø¯
        'auth/send-otp',
        'auth/verify-otp',
    ];
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 234: AppServiceProvider.php
ğŸ“ PATH: app/Providers/AppServiceProvider.php
ğŸ“ SIZE: 361 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        //
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        //
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 235: app.js
ğŸ“ PATH: resources/js/app.js
ğŸ“ SIZE: 22 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

import './bootstrap';

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 236: bootstrap.js
ğŸ“ PATH: resources/js/bootstrap.js
ğŸ“ SIZE: 127 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

import axios from 'axios';
window.axios = axios;

window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 237: app.css
ğŸ“ PATH: resources/css/app.css
ğŸ“ SIZE: 390 bytes
ğŸ•’ MODIFIED: 2025-12-02 08:22:52
----------------------------------------------------------------------

@import 'tailwindcss';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@theme {
    --font-sans: 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 238: app.php
ğŸ“ PATH: config/app.php
ğŸ“ SIZE: 4,272 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Application Name
    |--------------------------------------------------------------------------
    |
    | This value is the name of your application, which will be used when the
    | framework needs to place the application's name in a notification or
    | other UI elements where an application name needs to be displayed.
    |
    */

    'name' => env('APP_NAME', 'Laravel'),

    /*
    |--------------------------------------------------------------------------
    | Application Environment
    |--------------------------------------------------------------------------
    |
    | This value determines the "environment" your application is currently
    | running in. This may determine how you prefer to configure various
    | services the application utilizes. Set this in your ".env" file.
    |
    */

    'env' => env('APP_ENV', 'production'),

    /*
    |--------------------------------------------------------------------------
    | Application Debug Mode
    |--------------------------------------------------------------------------
    |
    | When your application is in debug mode, detailed error messages with
    | stack traces will be shown on every error that occurs within your
    | application. If disabled, a simple generic error page is shown.
    |
    */

    'debug' => (bool) env('APP_DEBUG', false),

    /*
    |--------------------------------------------------------------------------
    | Application URL
    |--------------------------------------------------------------------------
    |
    | This URL is used by the console to properly generate URLs when using
    | the Artisan command line tool. You should set this to the root of
    | the application so that it's available within Artisan commands.
    |
    */

    'url' => env('APP_URL', 'http://localhost'),

    /*
    |--------------------------------------------------------------------------
    | Application Timezone
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default timezone for your application, which
    | will be used by the PHP date and date-time functions. The timezone
    | is set to "UTC" by default as it is suitable for most use cases.
    |
    */

    'timezone' => 'UTC',

    /*
    |--------------------------------------------------------------------------
    | Application Locale Configuration
    |--------------------------------------------------------------------------
    |
    | The application locale determines the default locale that will be used
    | by Laravel's translation / localization methods. This option can be
    | set to any locale for which you plan to have translation strings.
    |
    */

    'locale' => env('APP_LOCALE', 'en'),

    'fallback_locale' => env('APP_FALLBACK_LOCALE', 'en'),

    'faker_locale' => env('APP_FAKER_LOCALE', 'en_US'),

    /*
    |--------------------------------------------------------------------------
    | Encryption Key
    |--------------------------------------------------------------------------
    |
    | This key is utilized by Laravel's encryption services and should be set
    | to a random, 32 character string to ensure that all encrypted values
    | are secure. You should do this prior to deploying the application.
    |
    */

    'cipher' => 'AES-256-CBC',

    'key' => env('APP_KEY'),

    'previous_keys' => [
        ...array_filter(
            explode(',', (string) env('APP_PREVIOUS_KEYS', ''))
        ),
    ],

    /*
    |--------------------------------------------------------------------------
    | Maintenance Mode Driver
    |--------------------------------------------------------------------------
    |
    | These configuration options determine the driver used to determine and
    | manage Laravel's "maintenance mode" status. The "cache" driver will
    | allow maintenance mode to be controlled across multiple machines.
    |
    | Supported drivers: "file", "cache"
    |
    */

    'maintenance' => [
        'driver' => env('APP_MAINTENANCE_DRIVER', 'file'),
        'store' => env('APP_MAINTENANCE_STORE', 'database'),
    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 239: auth.php
ğŸ“ PATH: config/auth.php
ğŸ“ SIZE: 4,029 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Defaults
    |--------------------------------------------------------------------------
    |
    | This option defines the default authentication "guard" and password
    | reset "broker" for your application. You may change these values
    | as required, but they're a perfect start for most applications.
    |
    */

    'defaults' => [
        'guard' => env('AUTH_GUARD', 'web'),
        'passwords' => env('AUTH_PASSWORD_BROKER', 'users'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication Guards
    |--------------------------------------------------------------------------
    |
    | Next, you may define every authentication guard for your application.
    | Of course, a great default configuration has been defined for you
    | which utilizes session storage plus the Eloquent user provider.
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | Supported: "session"
    |
    */

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | User Providers
    |--------------------------------------------------------------------------
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | If you have multiple user tables or models you may configure multiple
    | providers to represent the model / table. These providers may then
    | be assigned to any extra authentication guards you have defined.
    |
    | Supported: "database", "eloquent"
    |
    */

    'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => env('AUTH_MODEL', App\Models\User::class),
        ],

        // 'users' => [
        //     'driver' => 'database',
        //     'table' => 'users',
        // ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Resetting Passwords
    |--------------------------------------------------------------------------
    |
    | These configuration options specify the behavior of Laravel's password
    | reset functionality, including the table utilized for token storage
    | and the user provider that is invoked to actually retrieve users.
    |
    | The expiry time is the number of minutes that each reset token will be
    | considered valid. This security feature keeps tokens short-lived so
    | they have less time to be guessed. You may change this as needed.
    |
    | The throttle setting is the number of seconds a user must wait before
    | generating more password reset tokens. This prevents the user from
    | quickly generating a very large amount of password reset tokens.
    |
    */

    'passwords' => [
        'users' => [
            'provider' => 'users',
            'table' => env('AUTH_PASSWORD_RESET_TOKEN_TABLE', 'password_reset_tokens'),
            'expire' => 60,
            'throttle' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Password Confirmation Timeout
    |--------------------------------------------------------------------------
    |
    | Here you may define the number of seconds before a password confirmation
    | window expires and users are asked to re-enter their password via the
    | confirmation screen. By default, the timeout lasts for three hours.
    |
    */

    'password_timeout' => env('AUTH_PASSWORD_TIMEOUT', 10800),

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 240: cache.php
ğŸ“ PATH: config/cache.php
ğŸ“ SIZE: 3,683 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Cache Store
    |--------------------------------------------------------------------------
    |
    | This option controls the default cache store that will be used by the
    | framework. This connection is utilized if another isn't explicitly
    | specified when running a cache operation inside the application.
    |
    */

    'default' => env('CACHE_STORE', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Cache Stores
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the cache "stores" for your application as
    | well as their drivers. You may even define multiple stores for the
    | same cache driver to group types of items stored in your caches.
    |
    | Supported drivers: "array", "database", "file", "memcached",
    |                    "redis", "dynamodb", "octane",
    |                    "failover", "null"
    |
    */

    'stores' => [

        'array' => [
            'driver' => 'array',
            'serialize' => false,
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_CACHE_CONNECTION'),
            'table' => env('DB_CACHE_TABLE', 'cache'),
            'lock_connection' => env('DB_CACHE_LOCK_CONNECTION'),
            'lock_table' => env('DB_CACHE_LOCK_TABLE'),
        ],

        'file' => [
            'driver' => 'file',
            'path' => storage_path('framework/cache/data'),
            'lock_path' => storage_path('framework/cache/data'),
        ],

        'memcached' => [
            'driver' => 'memcached',
            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),
            'sasl' => [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' => [
                // Memcached::OPT_CONNECT_TIMEOUT => 2000,
            ],
            'servers' => [
                [
                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' => env('MEMCACHED_PORT', 11211),
                    'weight' => 100,
                ],
            ],
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_CACHE_CONNECTION', 'cache'),
            'lock_connection' => env('REDIS_CACHE_LOCK_CONNECTION', 'default'),
        ],

        'dynamodb' => [
            'driver' => 'dynamodb',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' => env('DYNAMODB_ENDPOINT'),
        ],

        'octane' => [
            'driver' => 'octane',
        ],

        'failover' => [
            'driver' => 'failover',
            'stores' => [
                'database',
                'array',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Key Prefix
    |--------------------------------------------------------------------------
    |
    | When utilizing the APC, database, memcached, Redis, and DynamoDB cache
    | stores, there might be other applications using the same cache. For
    | that reason, you may prefix every cache key to avoid collisions.
    |
    */

    'prefix' => env('CACHE_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-cache-'),

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 241: database.php
ğŸ“ PATH: config/database.php
ğŸ“ SIZE: 6,850 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for database operations. This is
    | the connection which will be utilized unless another connection
    | is explicitly specified when you execute a query / statement.
    |
    */

    'default' => env('DB_CONNECTION', 'sqlite'),

    /*
    |--------------------------------------------------------------------------
    | Database Connections
    |--------------------------------------------------------------------------
    |
    | Below are all of the database connections defined for your application.
    | An example configuration is provided for each database system which
    | is supported by Laravel. You're free to add / remove connections.
    |
    */

    'connections' => [

        'sqlite' => [
            'driver' => 'sqlite',
            'url' => env('DB_URL'),
            'database' => env('DB_DATABASE', database_path('database.sqlite')),
            'prefix' => '',
            'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
            'busy_timeout' => null,
            'journal_mode' => null,
            'synchronous' => null,
            'transaction_mode' => 'DEFERRED',
        ],

        'mysql' => [
            'driver' => 'mysql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'mariadb' => [
            'driver' => 'mariadb',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'pgsql' => [
            'driver' => 'pgsql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '5432'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            'search_path' => 'public',
            'sslmode' => 'prefer',
        ],

        'sqlsrv' => [
            'driver' => 'sqlsrv',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', 'localhost'),
            'port' => env('DB_PORT', '1433'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            // 'encrypt' => env('DB_ENCRYPT', 'yes'),
            // 'trust_server_certificate' => env('DB_TRUST_SERVER_CERTIFICATE', 'false'),
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Migration Repository Table
    |--------------------------------------------------------------------------
    |
    | This table keeps track of all the migrations that have already run for
    | your application. Using this information, we can determine which of
    | the migrations on disk haven't actually been run on the database.
    |
    */

    'migrations' => [
        'table' => 'migrations',
        'update_date_on_publish' => true,
    ],

    /*
    |--------------------------------------------------------------------------
    | Redis Databases
    |--------------------------------------------------------------------------
    |
    | Redis is an open source, fast, and advanced key-value store that also
    | provides a richer body of commands than a typical key-value system
    | such as Memcached. You may define your connection settings here.
    |
    */

    'redis' => [

        'client' => env('REDIS_CLIENT', 'phpredis'),

        'options' => [
            'cluster' => env('REDIS_CLUSTER', 'redis'),
            'prefix' => env('REDIS_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-database-'),
            'persistent' => env('REDIS_PERSISTENT', false),
        ],

        'default' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_DB', '0'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

        'cache' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_CACHE_DB', '1'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 242: filesystems.php
ğŸ“ PATH: config/filesystems.php
ğŸ“ SIZE: 2,500 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Filesystem Disk
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default filesystem disk that should be used
    | by the framework. The "local" disk, as well as a variety of cloud
    | based disks are available to your application for file storage.
    |
    */

    'default' => env('FILESYSTEM_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | Filesystem Disks
    |--------------------------------------------------------------------------
    |
    | Below you may configure as many filesystem disks as necessary, and you
    | may even configure multiple disks for the same driver. Examples for
    | most supported storage drivers are configured here for reference.
    |
    | Supported drivers: "local", "ftp", "sftp", "s3"
    |
    */

    'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app/private'),
            'serve' => true,
            'throw' => false,
            'report' => false,
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
            'throw' => false,
            'report' => false,
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
            'use_path_style_endpoint' => env('AWS_USE_PATH_STYLE_ENDPOINT', false),
            'throw' => false,
            'report' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Symbolic Links
    |--------------------------------------------------------------------------
    |
    | Here you may configure the symbolic links that will be created when the
    | `storage:link` Artisan command is executed. The array keys should be
    | the locations of the links and the values should be their targets.
    |
    */

    'links' => [
        public_path('storage') => storage_path('app/public'),
    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 243: logging.php
ğŸ“ PATH: config/logging.php
ğŸ“ SIZE: 4,327 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Monolog\Handler\NullHandler;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\SyslogUdpHandler;
use Monolog\Processor\PsrLogMessageProcessor;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Log Channel
    |--------------------------------------------------------------------------
    |
    | This option defines the default log channel that is utilized to write
    | messages to your logs. The value provided here should match one of
    | the channels present in the list of "channels" configured below.
    |
    */

    'default' => env('LOG_CHANNEL', 'stack'),

    /*
    |--------------------------------------------------------------------------
    | Deprecations Log Channel
    |--------------------------------------------------------------------------
    |
    | This option controls the log channel that should be used to log warnings
    | regarding deprecated PHP and library features. This allows you to get
    | your application ready for upcoming major versions of dependencies.
    |
    */

    'deprecations' => [
        'channel' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),
        'trace' => env('LOG_DEPRECATIONS_TRACE', false),
    ],

    /*
    |--------------------------------------------------------------------------
    | Log Channels
    |--------------------------------------------------------------------------
    |
    | Here you may configure the log channels for your application. Laravel
    | utilizes the Monolog PHP logging library, which includes a variety
    | of powerful log handlers and formatters that you're free to use.
    |
    | Available drivers: "single", "daily", "slack", "syslog",
    |                    "errorlog", "monolog", "custom", "stack"
    |
    */

    'channels' => [

        'stack' => [
            'driver' => 'stack',
            'channels' => explode(',', (string) env('LOG_STACK', 'single')),
            'ignore_exceptions' => false,
        ],

        'single' => [
            'driver' => 'single',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'daily' => [
            'driver' => 'daily',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'days' => env('LOG_DAILY_DAYS', 14),
            'replace_placeholders' => true,
        ],

        'slack' => [
            'driver' => 'slack',
            'url' => env('LOG_SLACK_WEBHOOK_URL'),
            'username' => env('LOG_SLACK_USERNAME', 'Laravel Log'),
            'emoji' => env('LOG_SLACK_EMOJI', ':boom:'),
            'level' => env('LOG_LEVEL', 'critical'),
            'replace_placeholders' => true,
        ],

        'papertrail' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => env('LOG_PAPERTRAIL_HANDLER', SyslogUdpHandler::class),
            'handler_with' => [
                'host' => env('PAPERTRAIL_URL'),
                'port' => env('PAPERTRAIL_PORT'),
                'connectionString' => 'tls://'.env('PAPERTRAIL_URL').':'.env('PAPERTRAIL_PORT'),
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'stderr' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => StreamHandler::class,
            'handler_with' => [
                'stream' => 'php://stderr',
            ],
            'formatter' => env('LOG_STDERR_FORMATTER'),
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'syslog' => [
            'driver' => 'syslog',
            'level' => env('LOG_LEVEL', 'debug'),
            'facility' => env('LOG_SYSLOG_FACILITY', LOG_USER),
            'replace_placeholders' => true,
        ],

        'errorlog' => [
            'driver' => 'errorlog',
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'null' => [
            'driver' => 'monolog',
            'handler' => NullHandler::class,
        ],

        'emergency' => [
            'path' => storage_path('logs/laravel.log'),
        ],

    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 244: mail.php
ğŸ“ PATH: config/mail.php
ğŸ“ SIZE: 3,614 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Mailer
    |--------------------------------------------------------------------------
    |
    | This option controls the default mailer that is used to send all email
    | messages unless another mailer is explicitly specified when sending
    | the message. All additional mailers can be configured within the
    | "mailers" array. Examples of each type of mailer are provided.
    |
    */

    'default' => env('MAIL_MAILER', 'log'),

    /*
    |--------------------------------------------------------------------------
    | Mailer Configurations
    |--------------------------------------------------------------------------
    |
    | Here you may configure all of the mailers used by your application plus
    | their respective settings. Several examples have been configured for
    | you and you are free to add your own as your application requires.
    |
    | Laravel supports a variety of mail "transport" drivers that can be used
    | when delivering an email. You may specify which one you're using for
    | your mailers below. You may also add additional mailers if needed.
    |
    | Supported: "smtp", "sendmail", "mailgun", "ses", "ses-v2",
    |            "postmark", "resend", "log", "array",
    |            "failover", "roundrobin"
    |
    */

    'mailers' => [

        'smtp' => [
            'transport' => 'smtp',
            'scheme' => env('MAIL_SCHEME'),
            'url' => env('MAIL_URL'),
            'host' => env('MAIL_HOST', '127.0.0.1'),
            'port' => env('MAIL_PORT', 2525),
            'username' => env('MAIL_USERNAME'),
            'password' => env('MAIL_PASSWORD'),
            'timeout' => null,
            'local_domain' => env('MAIL_EHLO_DOMAIN', parse_url((string) env('APP_URL', 'http://localhost'), PHP_URL_HOST)),
        ],

        'ses' => [
            'transport' => 'ses',
        ],

        'postmark' => [
            'transport' => 'postmark',
            // 'message_stream_id' => env('POSTMARK_MESSAGE_STREAM_ID'),
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'resend' => [
            'transport' => 'resend',
        ],

        'sendmail' => [
            'transport' => 'sendmail',
            'path' => env('MAIL_SENDMAIL_PATH', '/usr/sbin/sendmail -bs -i'),
        ],

        'log' => [
            'transport' => 'log',
            'channel' => env('MAIL_LOG_CHANNEL'),
        ],

        'array' => [
            'transport' => 'array',
        ],

        'failover' => [
            'transport' => 'failover',
            'mailers' => [
                'smtp',
                'log',
            ],
            'retry_after' => 60,
        ],

        'roundrobin' => [
            'transport' => 'roundrobin',
            'mailers' => [
                'ses',
                'postmark',
            ],
            'retry_after' => 60,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Global "From" Address
    |--------------------------------------------------------------------------
    |
    | You may wish for all emails sent by your application to be sent from
    | the same address. Here you may specify a name and address that is
    | used globally for all emails that are sent by your application.
    |
    */

    'from' => [
        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),
        'name' => env('MAIL_FROM_NAME', 'Example'),
    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 245: otp.php
ğŸ“ PATH: config/otp.php
ğŸ“ SIZE: 104 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [
    'debug'  => env('OTP_DEBUG', true),
    'sender' => env('KAVENEGAR_SENDER', ''),
];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 246: queue.php
ğŸ“ PATH: config/queue.php
ğŸ“ SIZE: 4,199 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Queue Connection Name
    |--------------------------------------------------------------------------
    |
    | Laravel's queue supports a variety of backends via a single, unified
    | API, giving you convenient access to each backend using identical
    | syntax for each. The default queue connection is defined below.
    |
    */

    'default' => env('QUEUE_CONNECTION', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Queue Connections
    |--------------------------------------------------------------------------
    |
    | Here you may configure the connection options for every queue backend
    | used by your application. An example configuration is provided for
    | each backend supported by Laravel. You're also free to add more.
    |
    | Drivers: "sync", "database", "beanstalkd", "sqs", "redis",
    |          "deferred", "background", "failover", "null"
    |
    */

    'connections' => [

        'sync' => [
            'driver' => 'sync',
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_QUEUE_CONNECTION'),
            'table' => env('DB_QUEUE_TABLE', 'jobs'),
            'queue' => env('DB_QUEUE', 'default'),
            'retry_after' => (int) env('DB_QUEUE_RETRY_AFTER', 90),
            'after_commit' => false,
        ],

        'beanstalkd' => [
            'driver' => 'beanstalkd',
            'host' => env('BEANSTALKD_QUEUE_HOST', 'localhost'),
            'queue' => env('BEANSTALKD_QUEUE', 'default'),
            'retry_after' => (int) env('BEANSTALKD_QUEUE_RETRY_AFTER', 90),
            'block_for' => 0,
            'after_commit' => false,
        ],

        'sqs' => [
            'driver' => 'sqs',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'prefix' => env('SQS_PREFIX', 'https://sqs.us-east-1.amazonaws.com/your-account-id'),
            'queue' => env('SQS_QUEUE', 'default'),
            'suffix' => env('SQS_SUFFIX'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'after_commit' => false,
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_QUEUE_CONNECTION', 'default'),
            'queue' => env('REDIS_QUEUE', 'default'),
            'retry_after' => (int) env('REDIS_QUEUE_RETRY_AFTER', 90),
            'block_for' => null,
            'after_commit' => false,
        ],

        'deferred' => [
            'driver' => 'deferred',
        ],

        'background' => [
            'driver' => 'background',
        ],

        'failover' => [
            'driver' => 'failover',
            'connections' => [
                'database',
                'deferred',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Job Batching
    |--------------------------------------------------------------------------
    |
    | The following options configure the database and table that store job
    | batching information. These options can be updated to any database
    | connection and table which has been defined by your application.
    |
    */

    'batching' => [
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'job_batches',
    ],

    /*
    |--------------------------------------------------------------------------
    | Failed Queue Jobs
    |--------------------------------------------------------------------------
    |
    | These options configure the behavior of failed queue job logging so you
    | can control how and where failed jobs are stored. Laravel ships with
    | support for storing failed jobs in a simple file or in a database.
    |
    | Supported drivers: "database-uuids", "dynamodb", "file", "null"
    |
    */

    'failed' => [
        'driver' => env('QUEUE_FAILED_DRIVER', 'database-uuids'),
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'failed_jobs',
    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 247: services.php
ğŸ“ PATH: config/services.php
ğŸ“ SIZE: 1,039 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Third Party Services
    |--------------------------------------------------------------------------
    |
    | This file is for storing the credentials for third party services such
    | as Mailgun, Postmark, AWS and more. This file provides the de facto
    | location for this type of information, allowing packages to have
    | a conventional file to locate the various service credentials.
    |
    */

    'postmark' => [
        'key' => env('POSTMARK_API_KEY'),
    ],

    'resend' => [
        'key' => env('RESEND_API_KEY'),
    ],

    'ses' => [
        'key' => env('AWS_ACCESS_KEY_ID'),
        'secret' => env('AWS_SECRET_ACCESS_KEY'),
        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
    ],

    'slack' => [
        'notifications' => [
            'bot_user_oauth_token' => env('SLACK_BOT_USER_OAUTH_TOKEN'),
            'channel' => env('SLACK_BOT_USER_DEFAULT_CHANNEL'),
        ],
    ],

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 248: session.php
ğŸ“ PATH: config/session.php
ğŸ“ SIZE: 7,848 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Session Driver
    |--------------------------------------------------------------------------
    |
    | This option determines the default session driver that is utilized for
    | incoming requests. Laravel supports a variety of storage options to
    | persist session data. Database storage is a great default choice.
    |
    | Supported: "file", "cookie", "database", "memcached",
    |            "redis", "dynamodb", "array"
    |
    */

    'driver' => env('SESSION_DRIVER', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Session Lifetime
    |--------------------------------------------------------------------------
    |
    | Here you may specify the number of minutes that you wish the session
    | to be allowed to remain idle before it expires. If you want them
    | to expire immediately when the browser is closed then you may
    | indicate that via the expire_on_close configuration option.
    |
    */

    'lifetime' => (int) env('SESSION_LIFETIME', 120),

    'expire_on_close' => env('SESSION_EXPIRE_ON_CLOSE', false),

    /*
    |--------------------------------------------------------------------------
    | Session Encryption
    |--------------------------------------------------------------------------
    |
    | This option allows you to easily specify that all of your session data
    | should be encrypted before it's stored. All encryption is performed
    | automatically by Laravel and you may use the session like normal.
    |
    */

    'encrypt' => env('SESSION_ENCRYPT', false),

    /*
    |--------------------------------------------------------------------------
    | Session File Location
    |--------------------------------------------------------------------------
    |
    | When utilizing the "file" session driver, the session files are placed
    | on disk. The default storage location is defined here; however, you
    | are free to provide another location where they should be stored.
    |
    */

    'files' => storage_path('framework/sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Connection
    |--------------------------------------------------------------------------
    |
    | When using the "database" or "redis" session drivers, you may specify a
    | connection that should be used to manage these sessions. This should
    | correspond to a connection in your database configuration options.
    |
    */

    'connection' => env('SESSION_CONNECTION'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Table
    |--------------------------------------------------------------------------
    |
    | When using the "database" session driver, you may specify the table to
    | be used to store sessions. Of course, a sensible default is defined
    | for you; however, you're welcome to change this to another table.
    |
    */

    'table' => env('SESSION_TABLE', 'sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Cache Store
    |--------------------------------------------------------------------------
    |
    | When using one of the framework's cache driven session backends, you may
    | define the cache store which should be used to store the session data
    | between requests. This must match one of your defined cache stores.
    |
    | Affects: "dynamodb", "memcached", "redis"
    |
    */

    'store' => env('SESSION_STORE'),

    /*
    |--------------------------------------------------------------------------
    | Session Sweeping Lottery
    |--------------------------------------------------------------------------
    |
    | Some session drivers must manually sweep their storage location to get
    | rid of old sessions from storage. Here are the chances that it will
    | happen on a given request. By default, the odds are 2 out of 100.
    |
    */

    'lottery' => [2, 100],

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Name
    |--------------------------------------------------------------------------
    |
    | Here you may change the name of the session cookie that is created by
    | the framework. Typically, you should not need to change this value
    | since doing so does not grant a meaningful security improvement.
    |
    */

    'cookie' => env(
        'SESSION_COOKIE',
        Str::slug((string) env('APP_NAME', 'laravel')).'-session'
    ),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Path
    |--------------------------------------------------------------------------
    |
    | The session cookie path determines the path for which the cookie will
    | be regarded as available. Typically, this will be the root path of
    | your application, but you're free to change this when necessary.
    |
    */

    'path' => env('SESSION_PATH', '/'),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Domain
    |--------------------------------------------------------------------------
    |
    | This value determines the domain and subdomains the session cookie is
    | available to. By default, the cookie will be available to the root
    | domain and all subdomains. Typically, this shouldn't be changed.
    |
    */

    'domain' => env('SESSION_DOMAIN'),

    /*
    |--------------------------------------------------------------------------
    | HTTPS Only Cookies
    |--------------------------------------------------------------------------
    |
    | By setting this option to true, session cookies will only be sent back
    | to the server if the browser has a HTTPS connection. This will keep
    | the cookie from being sent to you when it can't be done securely.
    |
    */

    'secure' => env('SESSION_SECURE_COOKIE'),

    /*
    |--------------------------------------------------------------------------
    | HTTP Access Only
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will prevent JavaScript from accessing the
    | value of the cookie and the cookie will only be accessible through
    | the HTTP protocol. It's unlikely you should disable this option.
    |
    */

    'http_only' => env('SESSION_HTTP_ONLY', true),

    /*
    |--------------------------------------------------------------------------
    | Same-Site Cookies
    |--------------------------------------------------------------------------
    |
    | This option determines how your cookies behave when cross-site requests
    | take place, and can be used to mitigate CSRF attacks. By default, we
    | will set this value to "lax" to permit secure cross-site requests.
    |
    | See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value
    |
    | Supported: "lax", "strict", "none", null
    |
    */

    'same_site' => env('SESSION_SAME_SITE', 'lax'),

    /*
    |--------------------------------------------------------------------------
    | Partitioned Cookies
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will tie the cookie to the top-level site for
    | a cross-site context. Partitioned cookies are accepted by the browser
    | when flagged "secure" and the Same-Site attribute is set to "none".
    |
    */

    'partitioned' => env('SESSION_PARTITIONED_COOKIE', false),

];

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 249: ExampleTest.php
ğŸ“ PATH: tests/Feature/ExampleTest.php
ğŸ“ SIZE: 359 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Tests\Feature;

// use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_the_application_returns_a_successful_response(): void
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 250: TestCase.php
ğŸ“ PATH: tests/TestCase.php
ğŸ“ SIZE: 142 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    //
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 251: ExampleTest.php
ğŸ“ PATH: tests/Unit/ExampleTest.php
ğŸ“ SIZE: 243 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_that_true_is_true(): void
    {
        $this->assertTrue(true);
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 252: .env.example
ğŸ“ PATH: .env.example
ğŸ“ SIZE: 1,086 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

APP_NAME=Laravel
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

CACHE_STORE=database
# CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 253: README.md
ğŸ“ PATH: README.md
ğŸ“ SIZE: 309 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

# smart-edu

Smart Education System built with Laravel 12, Bootstrap 5 and MySQL.

## Documentation

-   [Student Flow & Scenario](docs/student-flow.md)
-   [Teacher Flow & Scenario](docs/teacher-flow.md)
-   [Admin Flow & Scenario](docs/admin-flow.md)
-   [Counselor Flow & Scenario](docs/counselor-flow.md)

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 254: artisan
ğŸ“ PATH: artisan
ğŸ“ SIZE: 425 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

#!/usr/bin/env php
<?php

use Illuminate\Foundation\Application;
use Symfony\Component\Console\Input\ArgvInput;

define('LARAVEL_START', microtime(true));

// Register the Composer autoloader...
require __DIR__.'/vendor/autoload.php';

// Bootstrap Laravel and handle the command...
/** @var Application $app */
$app = require_once __DIR__.'/bootstrap/app.php';

$status = $app->handleCommand(new ArgvInput);

exit($status);

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 255: composer.json
ğŸ“ PATH: composer.json
ğŸ“ SIZE: 3,025 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

{
    "$schema": "https://getcomposer.org/schema.json",
    "name": "laravel/laravel",
    "type": "project",
    "description": "The skeleton application for the Laravel framework.",
    "keywords": ["laravel", "framework"],
    "license": "MIT",
    "require": {
        "php": "^8.2",
        "doctrine/dbal": "^4.4",
        "hekmatinasser/verta": "^8.5",
        "kavenegar/laravel": "^1.3",
        "laravel/framework": "^12.0",
        "laravel/tinker": "^2.10.1",
        "morilog/jalali": "^3.4",
        "spatie/laravel-permission": "^6.23"
    },
    "require-dev": {
        "fakerphp/faker": "^1.23",
        "laravel/pail": "^1.2.2",
        "laravel/pint": "^1.24",
        "laravel/sail": "^1.41",
        "mockery/mockery": "^1.6",
        "nunomaduro/collision": "^8.6",
        "phpunit/phpunit": "^11.5.3"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "setup": [
            "composer install",
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\"",
            "@php artisan key:generate",
            "@php artisan migrate --force",
            "npm install",
            "npm run build"
        ],
        "dev": [
            "Composer\\Config::disableProcessTimeout",
            "npx concurrently -c \"#93c5fd,#c4b5fd,#fb7185,#fdba74\" \"php artisan serve\" \"php artisan queue:listen --tries=1\" \"php artisan pail --timeout=0\" \"npm run dev\" --names=server,queue,logs,vite --kill-others"
        ],
        "test": [
            "@php artisan config:clear --ansi",
            "@php artisan test"
        ],
        "post-autoload-dump": [
            "Illuminate\\Foundation\\ComposerScripts::postAutoloadDump",
            "@php artisan package:discover --ansi"
        ],
        "post-update-cmd": [
            "@php artisan vendor:publish --tag=laravel-assets --ansi --force"
        ],
        "post-root-package-install": [
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\""
        ],
        "post-create-project-cmd": [
            "@php artisan key:generate --ansi",
            "@php -r \"file_exists('database/database.sqlite') || touch('database/database.sqlite');\"",
            "@php artisan migrate --graceful --ansi"
        ],
        "pre-package-uninstall": [
            "Illuminate\\Foundation\\ComposerScripts::prePackageUninstall"
        ]
    },
    "extra": {
        "laravel": {
            "dont-discover": []
        }
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "php-http/discovery": true
        }
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 256: package.json
ğŸ“ PATH: package.json
ğŸ“ SIZE: 414 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

{
    "$schema": "https://www.schemastore.org/package.json",
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@tailwindcss/vite": "^4.0.0",
        "axios": "^1.11.0",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^2.0.0",
        "tailwindcss": "^4.0.0",
        "vite": "^7.0.7"
    }
}

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 257: phpunit.xml
ğŸ“ PATH: phpunit.xml
ğŸ“ SIZE: 1,284 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="vendor/phpunit/phpunit/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         colors="true"
>
    <testsuites>
        <testsuite name="Unit">
            <directory>tests/Unit</directory>
        </testsuite>
        <testsuite name="Feature">
            <directory>tests/Feature</directory>
        </testsuite>
    </testsuites>
    <source>
        <include>
            <directory>app</directory>
        </include>
    </source>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="APP_MAINTENANCE_DRIVER" value="file"/>
        <env name="BCRYPT_ROUNDS" value="4"/>
        <env name="BROADCAST_CONNECTION" value="null"/>
        <env name="CACHE_STORE" value="array"/>
        <env name="DB_CONNECTION" value="sqlite"/>
        <env name="DB_DATABASE" value=":memory:"/>
        <env name="MAIL_MAILER" value="array"/>
        <env name="QUEUE_CONNECTION" value="sync"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="PULSE_ENABLED" value="false"/>
        <env name="TELESCOPE_ENABLED" value="false"/>
        <env name="NIGHTWATCH_ENABLED" value="false"/>
    </php>
</phpunit>

......................................................................

----------------------------------------------------------------------
ğŸ“„ FILE 258: vite.config.js
ğŸ“ PATH: vite.config.js
ğŸ“ SIZE: 331 bytes
ğŸ•’ MODIFIED: 2025-12-07 11:04:28
----------------------------------------------------------------------

import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';
import tailwindcss from '@tailwindcss/vite';

export default defineConfig({
    plugins: [
        laravel({
            input: ['resources/css/app.css', 'resources/js/app.js'],
            refresh: true,
        }),
        tailwindcss(),
    ],
});

......................................................................

======================================================================
ğŸ“Š REPORT SUMMARY
------------------------------
Total files in list: 258
Successfully processed: 255
Not found: 3
Generated on: 2025-12-08 21:09:30
======================================================================
