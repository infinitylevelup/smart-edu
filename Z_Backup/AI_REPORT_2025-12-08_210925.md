# AI Assistant Report

---
ü§ñ AI ASSISTANT REPORT
Generated: 2025-12-08 21:09:25
Input file: project_file_list_2025-12-08_205900.md
Project: smart-edu
Total Files: 258
---


----------------------------------------------------------------------
‚ùå FILE NOT FOUND: Generated: 2025-12-08 20:59:00
----------------------------------------------------------------------


----------------------------------------------------------------------
‚ùå FILE NOT FOUND: Project: smart-edu
----------------------------------------------------------------------


----------------------------------------------------------------------
‚ùå FILE NOT FOUND: Total Categories: 13
----------------------------------------------------------------------


----------------------------------------------------------------------

## üìÑ 4. AdminAuthController.php

**Path:** `app/Http/Controllers/Admin/AdminAuthController.php`  
**Size:** 3,093 bytes  
**Modified:** 2025-12-08 15:35:44

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Models\Role;
use App\Services\OTPService;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Str;

class AdminAuthController extends Controller
{
    public function __construct(private OTPService $otpService)
    {
    }

    public function showLogin()
    {
        return view('dashboard.admin.login');
    }

    private function normalizePhone(string $phone): string
    {
        $phone = trim($phone);
        $phone = preg_replace('/\s+/', '', $phone);
        $phone = preg_replace('/^(\+98|98)/', '', $phone);

        if (str_starts_with($phone, '0')) {
            $phone = substr($phone, 1);
        }

        return $phone;
    }

    public function sendOtp(Request $request)
    {
        $request->validate([
            'phone' => 'required|regex:/^9\d{9}$/',
        ]);

        $phone = $this->normalizePhone($request->phone);

        $user = User::where('phone', $phone)->first();
        if (!$user || ($user->status ?? null) !== 'admin') {
            return response()->json(['message' => 'ÿß€åŸÜ ÿ¥ŸÖÿßÿ±Ÿá ÿßÿØŸÖ€åŸÜ ŸÜ€åÿ≥ÿ™.'], 403);
        }

        $this->otpService->send($phone);

        return response()->json([
            'status'  => 'ok',
            'message' => '⁄©ÿØ Ÿàÿ±ŸàÿØ ÿßÿØŸÖ€åŸÜ ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ÿØ.'
        ]);
    }

    public function verifyOtp(Request $request)
    {
        $request->validate([
            'phone' => 'required|regex:/^9\d{9}$/',
            'code'  => 'required|digits:6',
        ]);

        $phone = $this->normalizePhone($request->phone);

        $user = User::where('phone', $phone)->first();
        if (!$user || ($user->status ?? null) !== 'admin') {
            return response()->json(['message' => 'ÿß€åŸÜ ÿ¥ŸÖÿßÿ±Ÿá ÿßÿØŸÖ€åŸÜ ŸÜ€åÿ≥ÿ™.'], 403);
        }

        if (!$this->otpService->verify($phone, $request->code)) {
            return response()->json(['message' => '⁄©ÿØ ŸÖÿπÿ™ÿ®ÿ± ŸÜ€åÿ≥ÿ™.'], 422);
        }

        Auth::login($user);
        $request->session()->regenerate();
        $request->session()->regenerateToken();

        // ‚úÖ 1) ŸÜŸÇÿ¥ admin ÿ±ÿß ÿ®ÿ≥ÿßÿ≤ €åÿß ÿ®⁄Ø€åÿ±
        $adminRole = Role::firstOrCreate(
            ['slug' => 'admin'],
            [
                'id'        => (string) Str::uuid(),
                'name'      => 'ÿßÿØŸÖ€åŸÜ',
                'is_active' => true,
            ]
        );

        // ‚úÖ 2) ŸÜŸÇÿ¥ admin ÿ±ÿß ÿØÿ± pivot ŸàÿµŸÑ ⁄©ŸÜ (ÿ™⁄©‚ÄåŸÜŸÇÿ¥€å)
        $user->roles()->sync([$adminRole->id]);

        // ‚úÖ 3) ŸÜŸÇÿ¥ ÿßŸÜÿ™ÿÆÿßÿ®€å ÿ®ÿ±ÿß€å ÿ≥ÿß€åÿØÿ®ÿßÿ±/Ÿàÿ±ŸàÿØ ÿ±ÿß ŸáŸÖ ÿ≥ÿ™ ⁄©ŸÜ
        if (($user->selected_role ?? null) !== 'admin') {
            $user->selected_role = 'admin';
            $user->save();
        }

        return response()->json([
            'status'   => 'ok',
            'message'  => 'Ÿàÿ±ŸàÿØ ÿßÿØŸÖ€åŸÜ ŸÖŸàŸÅŸÇ ÿ®ŸàÿØ.',
            'redirect' => route('admin.dashboard'),
            'csrf'     => csrf_token(),
        ]);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 5. AdminDashboardController.php

**Path:** `app/Http/Controllers/Admin/AdminDashboardController.php`  
**Size:** 2,378 bytes  
**Modified:** 2025-12-07 13:18:15

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use App\Models\Classroom;
use App\Models\Subject;

// Taxonomy models (ÿß⁄Øÿ± ÿØÿ± Ÿæÿ±Ÿà⁄òŸá‚Äåÿßÿ™ Ÿáÿ≥ÿ™ŸÜÿØ)
use App\Models\Section;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;
use App\Models\SubjectType;

class AdminDashboardController extends Controller
{
    public function index()
    {
        $counts = [
            'admins'     => User::where('status', 'admin')->count(),
            'teachers'   => User::where('status', 'teacher')->count(),
            'students'   => User::where('status', 'student')->count(),
            'counselors' => User::where('status', 'counselor')->count(),
            'all'        => User::count(),

            'classrooms' => \App\Models\Classroom::count(),
            'subjects'   => \App\Models\Subject::count(),

            'sections'      => class_exists(\App\Models\Section::class) ? \App\Models\Section::count() : 0,
            'grades'        => class_exists(\App\Models\Grade::class) ? \App\Models\Grade::count() : 0,
            'branches'      => class_exists(\App\Models\Branch::class) ? \App\Models\Branch::count() : 0,
            'fields'        => class_exists(\App\Models\Field::class) ? \App\Models\Field::count() : 0,
            'subfields'     => class_exists(\App\Models\Subfield::class) ? \App\Models\Subfield::count() : 0,
            'subject_types' => class_exists(\App\Models\SubjectType::class) ? \App\Models\SubjectType::count() : 0,

            'exams' => class_exists(\App\Models\Exam::class)
                ? \App\Models\Exam::count()
                : 0,
        ];

            // ‚úÖ ÿ¢ÿÆÿ±€åŸÜ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ
        $latestUsers = User::latest()->take(8)->get();

        // ‚úÖ ÿ¢ÿÆÿ±€åŸÜ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
        $latestClassrooms = class_exists(\App\Models\Classroom::class)
            ? \App\Models\Classroom::latest()->take(8)->get()
            : collect();

        // ‚úÖ ÿ¢ÿÆÿ±€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
        $latestExams = class_exists(\App\Models\Exam::class)
            ? \App\Models\Exam::latest()->take(8)->get()
            : collect();

        return view('dashboard.admin.index', compact(
            'counts',
            'latestUsers',
            'latestClassrooms',
            'latestExams'
        ));   
     }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 6. AdminUserController.php

**Path:** `app/Http/Controllers/Admin/AdminUserController.php`  
**Size:** 2,419 bytes  
**Modified:** 2025-12-07 12:08:57

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\User;
use Illuminate\Http\Request;

class AdminUserController extends Controller
{
    public function index(Request $request)
    {
        $query = User::query();

        // ŸÅ€åŸÑÿ™ÿ± ŸÜŸÇÿ¥
        if ($request->filled('role') && $request->role !== 'all') {
            $query->where('role', $request->role);
        }

        // ÿ≥ÿ±⁄Ü (ŸÜÿßŸÖ €åÿß ÿ¥ŸÖÿßÿ±Ÿá)
        if ($request->filled('q')) {
            $q = trim($request->q);
            $query->where(function ($sub) use ($q) {
                $sub->where('name', 'like', "%{$q}%")
                    ->orWhere('phone', 'like', "%{$q}%");
            });
        }

        $users = $query->latest()->paginate(20)->withQueryString();

        return view('dashboard.admin.users.index', [
            'users' => $users,
            'role'  => $request->role ?? 'all',
            'q'     => $request->q ?? '',
        ]);
    }

    public function show(string $id)
    {
        $user = User::findOrFail($id);

        return view('dashboard.admin.users.show', compact('user'));
    }

    /**
     * ÿ¢ŸæÿØ€åÿ™ ÿ≥ÿ±€åÿπ (ŸÅÿπÿßŸÑ/ÿ∫€åÿ±ŸÅÿπÿßŸÑ €åÿß ÿ™ÿ∫€å€åÿ± ŸÜŸÇÿ¥)
     * ÿØÿ± ŸÅÿ±ŸÖ updateÿå ŸÅŸÇÿ∑ ŸÅ€åŸÑÿØŸáÿß€å€å ⁄©Ÿá ÿ®ŸÅÿ±ÿ≥ÿ™€å ÿ™ÿ∫€å€åÿ± ŸÖ€å‚Äå⁄©ŸÜŸÜ
     */
    public function update(Request $request, string $id)
    {
        $user = User::findOrFail($id);

        $data = $request->validate([
            'is_active' => 'nullable|boolean',
            'role'      => 'nullable|in:admin,teacher,student,counselor',
            'name'      => 'nullable|string|max:255',
        ]);

        // checkbox ÿß⁄Øÿ± ŸÜ€åÿßÿØÿå ÿØÿ≥ÿ™ ŸÜÿ≤ŸÜ
        if (!$request->has('is_active')) {
            unset($data['is_active']);
        }

        $user->update($data);

        return back()->with('success', '⁄©ÿßÿ±ÿ®ÿ± ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }

    public function destroy(string $id)
    {
        $user = User::findOrFail($id);

        // ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿÆŸàÿØŸê ÿßÿØŸÖ€åŸÜ
        if (auth()->id() === $user->id) {
            return back()->with('error', 'ŸÜŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ÿ≠ÿ≥ÿßÿ® ÿÆŸàÿØÿ™ÿßŸÜ ÿ±ÿß ÿ≠ÿ∞ŸÅ ⁄©ŸÜ€åÿØ.');
        }

        $user->delete();

        return back()->with('success', '⁄©ÿßÿ±ÿ®ÿ± ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 7. BaseTaxonomyController.php

**Path:** `app/Http/Controllers/Admin/BaseTaxonomyController.php`  
**Size:** 5,155 bytes  
**Modified:** 2025-12-07 18:25:41

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Validation\Rule;   // ‚úÖ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ

abstract class BaseTaxonomyController extends Controller
{
    // ‚úÖ ÿ®ÿß ⁄©ŸÜÿ™ÿ±ŸÑÿ±Ÿáÿß€å ÿ¨ÿØ€åÿØÿ™ ŸáŸÖÿßŸáŸÜ⁄Ø ÿ¥ÿØ
    protected string $modelClass;   // Model::class
    protected string $viewPath;     // e.g. "dashboard.admin.taxonomies.sections"
    protected string $routeName;    // e.g. "admin.sections"
    protected array  $validation;   // rules

    protected array  $listColumns = ['name_fa','slug','sort_order','is_active'];
    protected array  $formColumns = ['name_fa','slug','sort_order','is_active'];

    // ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß€å ŸÇÿßÿ®ŸÑ ŸÖÿ±ÿ™ÿ®‚Äåÿ≥ÿßÿ≤€å (ÿØÿ± ŸÅÿ±ÿ≤ŸÜÿØ override ŸÖ€å‚Äå⁄©ŸÜ€å)
    protected array $sortable = ['name_fa','slug','sort_order','is_active','value'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';


    // ÿß⁄Øÿ± ÿÆŸàÿßÿ≥ÿ™€å ÿπŸÜŸàÿßŸÜ ÿ≥ŸÅÿßÿ±ÿ¥€å ÿ®ÿØ€åÿå ÿ™Ÿà ⁄©ŸÜÿ™ÿ±ŸÑÿ± ŸÅÿ±ÿ≤ŸÜÿØ ÿ≥ÿ™ ⁄©ŸÜ
    protected ?string $title = null;

    // ÿß⁄Øÿ± FK ŸÑÿßÿ≤ŸÖ ÿØÿßÿ±€åÿå ÿß€åŸÜ ŸÖÿ™ÿØ ÿ±ÿß override ⁄©ŸÜ
    protected function parentData(): array { return []; }

    protected function model()
    {
        return app($this->modelClass);
    }

    public function index()
    {
        $model = $this->modelClass;

        $sort = request('sort', $this->defaultSort);
        $dir  = request('dir',  $this->defaultDir);

        // ÿßŸÖŸÜ€åÿ™: ŸÅŸÇÿ∑ ÿ±Ÿà€å ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß€å whitelist ÿßÿ¨ÿßÿ≤Ÿá ÿ®ÿØŸá
        if (!in_array($sort, $this->sortable)) {
            $sort = $this->defaultSort;
        }

        $dir = strtolower($dir) === 'desc' ? 'desc' : 'asc';

        $items = $model::orderBy($sort, $dir)->paginate(20)->withQueryString();

        return view($this->viewPath . '.index', [
            'items'       => $items,
            'listColumns' => $this->listColumns,
            'routeName'   => $this->routeName,
            'title'       => $this->title(),
            'sort'        => $sort,   // ‚úÖ ÿ®ŸÅÿ±ÿ≥ÿ™ ÿ®Ÿá Ÿà€åŸà
            'dir'         => $dir,
        ]);
    }



    public function create()
    {
        return view($this->viewPath . '.create', array_merge([
            'routeName'   => $this->routeName,
            'formColumns' => $this->formColumns,
            'title'       => $this->title(),
        ], $this->parentData()));
    }

    public function store(Request $request)
    {
        $data = $request->validate($this->validation);

        // UUID
        if (empty($data['id'])) {
            $data['id'] = (string) Str::uuid();
        }

        $model = $this->modelClass;
        $model::create($data);

        return redirect()
            ->route($this->routeName . '.index')
            ->with('success', 'ÿ¢€åÿ™ŸÖ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿß€åÿ¨ÿßÿØ ÿ¥ÿØ.');
    }

    public function edit(string $id)
    {
        $model = $this->modelClass;
        $item  = $model::findOrFail($id);

        return view($this->viewPath . '.edit', array_merge([
            'item'        => $item,
            'routeName'   => $this->routeName,
            'formColumns' => $this->formColumns,
            'title'       => $this->title(),
        ], $this->parentData()));
    }

    public function update(Request $request, string $id)
    {
        $model = $this->modelClass;
        $item  = $model::findOrFail($id);

        $rules = [];

        foreach ($this->validation as $field => $rule) {

            // ÿß⁄Øÿ± rule ÿ®Ÿá ÿµŸàÿ±ÿ™ string ÿ®ŸàÿØ Ÿà unique ÿØÿßÿ¥ÿ™
            if (is_string($rule) && str_contains($rule, 'unique:')) {

                // example: unique:grades,slug
                // table=grades , column=slug
                preg_match('/unique:([^,]+),([^,|]+)/', $rule, $m);
                $table  = $m[1] ?? null;
                $column = $m[2] ?? $field;

                // ÿ®ŸÇ€åŸá rule Ÿáÿß (ÿ∫€åÿ± ÿßÿ≤ unique)
                $otherRules = collect(explode('|', $rule))
                    ->reject(fn($r) => str_starts_with($r, 'unique:'))
                    ->values()
                    ->all();

                // unique ÿ®ÿß ignore
                $rules[$field] = array_merge(
                    $otherRules,
                    [ \Illuminate\Validation\Rule::unique($table, $column)->ignore($id) ]
                );

            } else {
                // ÿ®ŸÇ€åŸá rule Ÿáÿß ŸÖÿ´ŸÑ ŸÇÿ®ŸÑ
                $rules[$field] = $rule;
            }
        }

        $data = $request->validate($rules);

        $item->update($data);

        return redirect()
            ->route($this->routeName . '.index')
            ->with('success', 'ÿ¢€åÿ™ŸÖ ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }


    public function destroy(string $id)
    {
        $model = $this->modelClass;
        $item  = $model::findOrFail($id);

        $item->delete();

        return back()->with('success', 'ÿ¢€åÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }

    protected function title(): string
    {
        if ($this->title) return $this->title;

        return class_basename($this->modelClass);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 8. BranchController.php

**Path:** `app/Http/Controllers/Admin/BranchController.php`  
**Size:** 1,108 bytes  
**Modified:** 2025-12-07 16:25:18

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Branch;
use App\Models\Section;

class BranchController extends BaseTaxonomyController
{
    protected string $modelClass = Branch::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.branches';
    protected string $routeName  = 'admin.branches';
    protected ?string $title     = 'ÿ¥ÿßÿÆŸá‚ÄåŸáÿß';

    protected array $validation = [
        'section_id' => 'required|uuid|exists:sections,id',
        'slug'       => 'required|string|max:100|unique:branches,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'sections' => Section::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 9. ClassroomController.php

**Path:** `app/Http/Controllers/Admin/ClassroomController.php`  
**Size:** 1,610 bytes  
**Modified:** 2025-12-07 13:11:29

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Classroom;
use Illuminate\Http\Request;

class ClassroomController extends Controller
{
    public function index(Request $request)
    {
        $q = Classroom::query();

        // ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ÿ≥ÿßÿØŸá (ÿπŸÜŸàÿßŸÜ/⁄©ÿØ ⁄©ŸÑÿßÿ≥)
        if ($search = $request->get('q')) {
            $q->where('title', 'like', "%{$search}%")
              ->orWhere('code', 'like', "%{$search}%");
        }

        $items = $q->latest()->paginate(20)->withQueryString();

        return view('dashboard.admin.classrooms.index', [
            'items' => $items,
        ]);
    }

    public function show(string $id)
    {
        $classroom = Classroom::findOrFail($id);

        return view('dashboard.admin.classrooms.show', [
            'classroom' => $classroom,
        ]);
    }

    public function update(Request $request, string $id)
    {
        $classroom = Classroom::findOrFail($id);

        $data = $request->validate([
            'is_active' => 'nullable|boolean',
        ]);

        $classroom->update([
            'is_active' => (bool)($data['is_active'] ?? false),
        ]);

        return back()->with('success', 'Ÿàÿ∂ÿπ€åÿ™ ⁄©ŸÑÿßÿ≥ ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }

    public function destroy(string $id)
    {
        $classroom = Classroom::findOrFail($id);
        $classroom->delete();

        return redirect()
            ->route('admin.classrooms.index')
            ->with('success', '⁄©ŸÑÿßÿ≥ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 10. ExamController.php

**Path:** `app/Http/Controllers/Admin/ExamController.php`  
**Size:** 1,979 bytes  
**Modified:** 2025-12-08 12:10:03

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

class ExamController extends Controller
{
    /**
     * ‚ö†Ô∏è ⁄ÜŸàŸÜ ŸáŸÜŸàÿ≤ ÿßÿ≥ŸÖ ŸÖÿØŸÑ ÿ¢ÿ≤ŸÖŸàŸÜÿ™ ŸÇÿ∑ÿπ€å ŸÜ€åÿ≥ÿ™ÿå
     * ÿß€åŸÜ ⁄©ŸÜÿ™ÿ±ŸÑÿ± ÿ±Ÿà ÿ∑Ÿàÿ±€å ŸÖ€å‚ÄåŸÜŸà€åÿ≥€åŸÖ ⁄©Ÿá ÿß⁄Øÿ± ŸÖÿØŸÑ Exam Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ¥ÿ™ÿå
     * ÿÆÿ∑ÿß ŸÜÿØŸá Ÿà ÿµŸÅÿ≠Ÿá ÿÆÿßŸÑ€å ÿ®ÿßŸÑÿß ÿ®€åÿßÿØ.
     */

    private function examModel()
    {
        return class_exists(\App\Models\Exam::class) ? \App\Models\Exam::class : null;
    }

    public function index(Request $request)
    {
        $model = $this->examModel();

        $items = $model
            ? $model::latest()->paginate(20)
            : collect(); // ÿß⁄Øÿ± ŸÖÿØŸÑ ŸÜÿ®ŸàÿØ

        return view('dashboard.admin.exams.index', [
            'items' => $items,
        ]);
    }

    public function show(string $id)
    {
        $model = $this->examModel();
        abort_if(!$model, 404);

        $exam = $model::findOrFail($id);

        return view('dashboard.admin.exams.show', [
            'exam' => $exam,
        ]);
    }

    public function update(Request $request, string $id)
    {
        $model = $this->examModel();
        abort_if(!$model, 404);

        $exam = $model::findOrFail($id);

        $data = $request->validate([
            'is_active' => 'nullable|boolean',
        ]);

        $exam->update([
            'is_active' => (bool)($data['is_active'] ?? false),
        ]);

        return back()->with('success', 'Ÿàÿ∂ÿπ€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }

    public function destroy(string $id)
    {
        $model = $this->examModel();
        abort_if(!$model, 404);

        $exam = $model::findOrFail($id);
        $exam->delete();

        return redirect()
            ->route('admin.exams.index')
            ->with('success', 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 11. FieldController.php

**Path:** `app/Http/Controllers/Admin/FieldController.php`  
**Size:** 1,099 bytes  
**Modified:** 2025-12-07 17:29:47

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Field;
use App\Models\Branch;

class FieldController extends BaseTaxonomyController
{
    protected string $modelClass = Field::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.fields';
    protected string $routeName  = 'admin.fields';
    protected ?string $title     = 'ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß';

    protected array $validation = [
        'branch_id'  => 'required|uuid|exists:branches,id',
        'slug'       => 'required|string|max:100|unique:fields,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'branches' => Branch::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 12. GradeController.php

**Path:** `app/Http/Controllers/Admin/GradeController.php`  
**Size:** 1,211 bytes  
**Modified:** 2025-12-07 16:24:07

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Grade;
use App\Models\Section;

class GradeController extends BaseTaxonomyController
{
    protected string $modelClass = Grade::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.grades';
    protected string $routeName  = 'admin.grades';
    protected ?string $title     = 'Ÿæÿß€åŸá‚ÄåŸáÿß';

    protected array $validation = [
        'section_id' => 'required|uuid|exists:sections,id',
        'value'      => 'required|integer|min:1',
        'slug'       => 'required|string|max:100|unique:grades,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    // ‚úÖ ŸÖÿ±ÿ™ÿ®‚Äåÿ≥ÿßÿ≤€å ŸÖÿ´ŸÑ ŸÖŸÇÿ∑ÿπ‚ÄåŸáÿß
    protected array $sortable = ['name_fa','slug','value','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'sections' => Section::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 13. SectionController.php

**Path:** `app/Http/Controllers/Admin/SectionController.php`  
**Size:** 1,791 bytes  
**Modified:** 2025-12-07 16:21:23

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Section;
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Validation\Rule;

class SectionController extends BaseTaxonomyController
{
    protected string $modelClass = Section::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.sections';
    protected string $routeName  = 'admin.sections';
    protected ?string $title     = 'ŸÖŸÇÿ∑ÿπ‚ÄåŸáÿß';

    protected array $validation = [
        'slug'       => 'required|string|max:100|unique:sections,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    // -----------------------------
    // ‚úÖ ÿ≥Ÿàÿ±ÿ™ ŸÇÿ∑ÿπ€å ŸÖÿÆÿµŸàÿµ Sections
    // -----------------------------
    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    public function index()
    {
        $sort = request('sort', $this->defaultSort);
        $dir  = request('dir',  $this->defaultDir);

        if (!in_array($sort, $this->sortable)) {
            $sort = $this->defaultSort;
        }

        $dir = strtolower($dir) === 'desc' ? 'desc' : 'asc';

        $items = Section::orderBy($sort, $dir)
            ->paginate(20)
            ->withQueryString();

        return view($this->viewPath.'.index', [
            'items'     => $items,
            'routeName' => $this->routeName,
            'title'     => $this->title(),
            'sort'      => $sort,
            'dir'       => $dir,
        ]);
    }

    // ÿ®ŸÇ€åŸá ŸÖÿ™ÿØŸáÿß ÿßÿ≤ Base ÿßÿ±ÿ´ ŸÖ€å‚Äåÿ®ÿ±Ÿá Ÿà ŸÜ€åÿßÿ≤ ŸÜ€åÿ≥ÿ™ ⁄Ü€åÿ≤€å ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ€å
}

......................................................................

----------------------------------------------------------------------

## üìÑ 14. SubfieldController.php

**Path:** `app/Http/Controllers/Admin/SubfieldController.php`  
**Size:** 1,115 bytes  
**Modified:** 2025-12-07 17:34:10

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Subfield;
use App\Models\Field;

class SubfieldController extends BaseTaxonomyController
{
    protected string $modelClass = Subfield::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.subfields';
    protected string $routeName  = 'admin.subfields';
    protected ?string $title     = 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß';

    protected array $validation = [
        'field_id'   => 'required|uuid|exists:fields,id',
        'slug'       => 'required|string|max:100|unique:subfields,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'fields' => Field::where('is_active', 1)
                ->orderBy('sort_order')
                ->get(['id','name_fa']),
        ];
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 15. SubjectController.php

**Path:** `app/Http/Controllers/Admin/SubjectController.php`  
**Size:** 2,504 bytes  
**Modified:** 2025-12-07 17:42:53

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\Section;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;
use App\Models\SubjectType;
use App\Models\Subject;
use Illuminate\Http\Request;

class SubjectController extends BaseTaxonomyController
{
    protected string $modelClass = Subject::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.subjects';
    protected string $routeName  = 'admin.subjects';
    protected ?string $title     = 'ÿØÿ±Ÿàÿ≥';

    protected array $validation = [
        'title_fa'        => 'required|string|max:255',
        'slug'            => 'required|string|max:255|unique:subjects,slug',
        'code'            => 'nullable|string|max:50',
        'hours'           => 'nullable|integer|min:0',
        'sort_order'      => 'nullable|integer|min:0',
        'is_active'       => 'nullable|boolean',

        'section_id'      => 'required|uuid|exists:sections,id',
        'grade_id'        => 'required|uuid|exists:grades,id',
        'branch_id'       => 'required|uuid|exists:branches,id',
        'field_id'        => 'required|uuid|exists:fields,id',
        'subfield_id'     => 'nullable|uuid|exists:subfields,id',
        'subject_type_id' => 'nullable|uuid|exists:subject_types,id',
    ];

    protected array $sortable = [
        'title_fa','slug','code','hours','sort_order','is_active','created_at'
    ];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';

    protected function parentData(): array
    {
        return [
            'sections'     => Section::where('is_active', 1)->orderBy('sort_order')->get(),
            'grades'       => Grade::where('is_active', 1)->orderBy('sort_order')->get(),
            'branches'     => Branch::where('is_active', 1)->orderBy('sort_order')->get(),
            'fields'       => Field::where('is_active', 1)->orderBy('sort_order')->get(),
            'subfields'    => Subfield::where('is_active', 1)->orderBy('sort_order')->get(),
            'subjectTypes' => SubjectType::where('is_active', 1)->orderBy('sort_order')->get(),
        ];
    }

    // --------------------------
    // ‚úÖ ÿ®ÿ±ÿß€å dropdown Ÿàÿßÿ®ÿ≥ÿ™Ÿá
    // --------------------------
    public function byGrade(string $gradeId)
    {
        $subjects = Subject::where('grade_id', $gradeId)
            ->orderBy('sort_order')
            ->get(['id','title_fa']);

        return response()->json($subjects);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 16. SubjectTaxonomyController.php

**Path:** `app/Http/Controllers/Admin/SubjectTaxonomyController.php`  
**Size:** 2,107 bytes  
**Modified:** 2025-12-08 11:20:24

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Http\Controllers\Controller;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;

class SubjectTaxonomyController extends Controller
{
    /**
     * ‚úÖ Ÿæÿß€åŸá‚ÄåŸáÿß ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÖŸÇÿ∑ÿπ
     * GET /dashboard/admin/api/grades/by-section/{section}
     */
    public function gradesBySection(string $sectionId)
    {
        $grades = Grade::query()
            ->where('section_id', $sectionId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'section_id']);

        return response()->json($grades);
    }

    /**
     * ‚úÖ ÿ¥ÿßÿÆŸá‚ÄåŸáÿß ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÖŸÇÿ∑ÿπ
     * GET /dashboard/admin/api/branches/by-section/{section}
     */
    public function branchesBySection(string $sectionId)
    {
        $branches = Branch::query()
            ->where('section_id', $sectionId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'section_id']);

        return response()->json($branches);
    }

    /**
     * ‚úÖ ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿ¥ÿßÿÆŸá
     * GET /dashboard/admin/api/fields/by-branch/{branch}
     */
    public function fieldsByBranch(string $branchId)
    {
        $fields = Field::query()
            ->where('branch_id', $branchId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'branch_id']);

        return response()->json($fields);
    }

    /**
     * ‚úÖ ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿ≤ŸÖ€åŸÜŸá
     * GET /dashboard/admin/api/subfields/by-field/{field}
     */
    public function subfieldsByField(string $fieldId)
    {
        $subfields = Subfield::query()
            ->where('field_id', $fieldId)
            ->where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id', 'name_fa', 'slug', 'field_id']);

        return response()->json($subfields);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 17. SubjectTypeController.php

**Path:** `app/Http/Controllers/Admin/SubjectTypeController.php`  
**Size:** 837 bytes  
**Modified:** 2025-12-07 18:11:41

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Admin;

use App\Models\SubjectType;

class SubjectTypeController extends BaseTaxonomyController
{
    protected string $modelClass = SubjectType::class;
    protected string $viewPath   = 'dashboard.admin.taxonomies.subject-types';
    protected string $routeName  = 'admin.subject-types';
    protected ?string $title     = 'ŸÜŸàÿπ ÿØÿ±ÿ≥‚ÄåŸáÿß';

    protected array $validation = [
        'slug'       => 'required|string|max:100|unique:subject_types,slug',
        'name_fa'    => 'required|string|max:200',
        'sort_order' => 'nullable|integer|min:0',
        'is_active'  => 'nullable|boolean',
    ];

    protected array $sortable = ['name_fa','slug','sort_order','is_active','created_at'];
    protected string $defaultSort = 'sort_order';
    protected string $defaultDir  = 'asc';
}

......................................................................

----------------------------------------------------------------------

## üìÑ 18. CounselorAttemptController.php

**Path:** `app/Http/Controllers/Counselor/CounselorAttemptController.php`  
**Size:** 1,083 bytes  
**Modified:** 2025-12-03 02:09:06

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;
use App\Models\Attempt;

class CounselorAttemptController extends Controller
{
    public function index($studentId)
    {
        $attempts = Attempt::where('student_id', $studentId)
            ->with('exam')
            ->latest()
            ->paginate(10);

        return view('dashboard.counselor.attempts.index', compact('attempts', 'studentId'));
    }

    public function show(Attempt $attempt)
    {
        $attempt->load(['exam', 'answers.question']);
        return view('dashboard.counselor.attempts.show', compact('attempt'));
    }

    public function analyze(Attempt $attempt)
    {
        $attempt->load(['exam', 'answers.question']);
        return view('dashboard.counselor.attempts.analyze', compact('attempt'));
    }

    public function storeAnalysis(Attempt $attempt)
    {
        // ÿ®ÿπÿØÿßŸã ŸÖŸÜÿ∑ŸÇ ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ≠ŸÑ€åŸÑ ÿ±Ÿà ŸÖ€å‚ÄåŸÜŸà€åÿ≥€åŸÖ
        return redirect()->route('counselor.attempts.show', $attempt)->with('success', 'Analysis saved.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 19. CounselorDashboardController.php

**Path:** `app/Http/Controllers/Counselor/CounselorDashboardController.php`  
**Size:** 236 bytes  
**Modified:** 2025-12-03 02:08:47

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;

class CounselorDashboardController extends Controller
{
    public function index()
    {
        return view('dashboard.counselor.index');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 20. CounselorLearningPathController.php

**Path:** `app/Http/Controllers/Counselor/CounselorLearningPathController.php`  
**Size:** 630 bytes  
**Modified:** 2025-12-03 02:09:16

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;

class CounselorLearningPathController extends Controller
{
    public function index()
    {
        return view('dashboard.counselor.learning-paths.index');
    }

    public function create($studentId)
    {
        return view('dashboard.counselor.learning-paths.create', compact('studentId'));
    }

    public function store($studentId)
    {
        // ÿ®ÿπÿØÿßŸã ŸÖŸÜÿ∑ŸÇ ÿ≥ÿßÿÆÿ™ ŸÖÿ≥€åÿ± ÿ±Ÿà ŸÖ€å‚ÄåŸÜŸà€åÿ≥€åŸÖ
        return redirect()->route('counselor.learning-paths.index')->with('success', 'Learning path created.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 21. CounselorProfileController.php

**Path:** `app/Http/Controllers/Counselor/CounselorProfileController.php`  
**Size:** 489 bytes  
**Modified:** 2025-12-03 02:09:23

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;
use Illuminate\Support\Facades\Auth;

class CounselorProfileController extends Controller
{
    public function index()
    {
        $counselor = Auth::user();
        return view('dashboard.counselor.profile', compact('counselor'));
    }

    public function update()
    {
        // ÿ®ÿπÿØÿßŸã ŸÖŸÜÿ∑ŸÇ ÿ¢ŸæÿØ€åÿ™ Ÿæÿ±ŸàŸÅÿß€åŸÑ
        return back()->with('success', 'Profile updated.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 22. CounselorStudentController.php

**Path:** `app/Http/Controllers/Counselor/CounselorStudentController.php`  
**Size:** 549 bytes  
**Modified:** 2025-12-03 02:08:56

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Counselor;

use App\Http\Controllers\Controller;
use App\Models\User;

class CounselorStudentController extends Controller
{
    public function index()
    {
        $students = User::where('role', 'student')->latest()->paginate(10);
        return view('dashboard.counselor.students.index', compact('students'));
    }

    public function show(User $student)
    {
        abort_unless($student->role === 'student', 404);
        return view('dashboard.counselor.students.show', compact('student'));
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 23. LearningPathController.php

**Path:** `app/Http/Controllers/Student/LearningPathController.php`  
**Size:** 9,372 bytes  
**Modified:** 2025-12-04 18:09:28

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use App\Models\Attempt;
use App\Models\Exam;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Schema;

class LearningPathController extends Controller
{
    public function index()
    {
        $student = Auth::user();

        // ==============================
        // 1) ÿ¢ÿÆÿ±€åŸÜ Attempt Ÿáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
        // ==============================
        $attempts = Attempt::query()
            ->with([
                'exam.subject',
                'answers.question',
            ])
            ->where('student_id', $student->id)
            ->whereIn('status', ['submitted', 'graded', 'finished'])
            ->latest('submitted_at')
            ->take(5)
            ->get();

        // ÿß⁄Øÿ± ŸáŸÜŸàÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ€å ŸÜÿØÿßÿØŸá
        if ($attempts->isEmpty()) {
            $overallPercent = 0;
            $currentLevel = 1;
            $levelProgress = 0;
            $focusTopics = ['ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ ÿßŸàŸÑ', 'ÿ¢ÿ¥ŸÜÿß€å€å ÿ®ÿß ÿ±ŸàŸÜÿØ ÿ≥ŸàÿßŸÑÿßÿ™', 'ŸÖÿØ€åÿ±€åÿ™ ÿ≤ŸÖÿßŸÜ'];
            $recommendedLevel = 'taghviyati';

            $suggestedExams = $this->suggestDefaultExams($student->id);

            return view('dashboard.student.learning-path', compact(
                'overallPercent',
                'currentLevel',
                'levelProgress',
                'focusTopics',
                'recommendedLevel',
                'suggestedExams'
            ));
        }

        // ==============================
        // 2) ŸÖÿ≠ÿßÿ≥ÿ®ÿßÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™ Ÿà Level
        // ==============================
        $overallPercent = round($attempts->avg(fn($a) => (float) ($a->percent ?? 0)));

        $currentLevel = max(1, (int) floor($overallPercent / 25) + 1);
        $currentLevel = min($currentLevel, 5);

        $levelProgress = $overallPercent % 25;
        $levelProgress = round(($levelProgress / 25) * 100);

        // ==============================
        // 3) ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ŸÜŸÇÿßÿ∑ ÿ∂ÿπŸÅ
        // ==============================
        $wrongAnswers = $attempts
            ->flatMap(fn($a) => $a->answers()->get())   // ‚úÖ FIX HERE
            ->filter(fn($ans) => (int) $ans->is_correct === 0);
            // ->values();
        $weakSubjects = $wrongAnswers
            ->groupBy(fn($ans) =>
                optional($ans->question->exam->subject)->title
                ?? optional($ans->question->exam->subject)->name
                ?? 'ÿ®ÿØŸàŸÜ ÿØÿ±ÿ≥'
            )
            ->map->count()
            ->sortDesc()
            ->keys()
            ->take(2)
            ->values()
            ->all();

        $weakTypes = $wrongAnswers
            ->groupBy(fn($ans) => $ans->question->type ?? 'unknown')
            ->map->count()
            ->sortDesc()
            ->keys()
            ->take(2)
            ->values()
            ->map(function ($t) {
                return match ($t) {
                    'mcq'        => 'ÿ™ÿ≥ÿ™‚ÄåŸáÿß€å €¥ ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å',
                    'true_false' => 'ÿµÿ≠€åÿ≠/ÿ∫ŸÑÿ∑',
                    'fill_blank' => 'ÿ¨ÿß€å ÿÆÿßŸÑ€å',
                    'essay'      => 'ÿ™ÿ¥ÿ±€åÿ≠€å',
                    default      => 'ÿ≥ŸàÿßŸÑÿßÿ™ ÿ™ÿ±⁄©€åÿ®€å',
                };
            })
            ->all();

        $weakDifficulties = $wrongAnswers
            ->groupBy(fn($ans) => $ans->question->difficulty ?? 'medium')
            ->map->count()
            ->sortDesc()
            ->keys()
            ->take(1)
            ->values()
            ->map(function ($d) {
                return match ($d) {
                    'easy'  => 'ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≥ÿßÿØŸá (ÿ™ŸÖÿ±⁄©ÿ≤ ÿ±Ÿà€å ÿØŸÇÿ™)',
                    'hard'  => 'ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≥ÿÆÿ™ (ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ™ŸÖÿ±€åŸÜ ÿ®€åÿ¥ÿ™ÿ±)',
                    default => 'ÿ≥ŸàÿßŸÑÿßÿ™ ŸÖÿ™Ÿàÿ≥ÿ∑ (ÿ™ŸÇŸà€åÿ™ Ÿæÿß€åŸá)',
                };
            })
            ->all();

        $focusTopics = array_values(array_unique(array_filter([
            ...array_map(fn($s) => "ÿ∂ÿπŸÅ ÿØÿ± ÿØÿ±ÿ≥: " . $s, $weakSubjects),
            ...array_map(fn($t) => "ÿ™ŸÇŸà€åÿ™ ŸÖŸáÿßÿ±ÿ™: " . $t, $weakTypes),
            ...$weakDifficulties,
        ])));

        $focusTopics = array_slice($focusTopics, 0, 3);

        if (count($focusTopics) < 3) {
            $focusTopics = array_merge($focusTopics, [
                'ŸÖÿØ€åÿ±€åÿ™ ÿ≤ŸÖÿßŸÜ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ',
                'ŸÖÿ±Ÿàÿ± ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ ÿ∫ŸÑÿ∑',
                'ÿ™⁄©ÿ±ÿßÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©Ÿàÿ™ÿßŸá',
            ]);
            $focusTopics = array_slice($focusTopics, 0, 3);
        }

        // ==============================
        // 4) Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ≥ÿ∑ÿ≠ ⁄©ŸÑ€å
        // ==============================
        $recommendedLevel = match (true) {
            $overallPercent >= 85 => 'olympiad',
            $overallPercent >= 60 => 'konkur',
            default               => 'taghviyati',
        };

        // ==============================
        // 5) 3 ÿ¢ÿ≤ŸÖŸàŸÜ Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å ŸàÿßŸÇÿπ€å ÿßÿ≤ DB
        // ==============================
        $suggestedExams = $this->suggestNextExams(
            studentId: $student->id,
            attempts: $attempts,
            overallPercent: $overallPercent,
            weakSubjects: $weakSubjects
        );

        return view('dashboard.student.learning-path', compact(
            'overallPercent',
            'currentLevel',
            'levelProgress',
            'focusTopics',
            'recommendedLevel',
            'suggestedExams'
        ));
    }


    /**
     * Ÿæ€åÿ¥ŸÜŸáÿßÿØ 3 ÿ¢ÿ≤ŸÖŸàŸÜ:
     * 1) ÿ≥ÿÆÿ™‚Äåÿ™ÿ± / ÿ≥ÿ∑ÿ≠ ÿ®ÿßŸÑÿßÿ™ÿ±
     * 2) ŸÖÿ¥ÿßÿ®Ÿá ÿ®ÿ±ÿß€å ÿ±⁄©Ÿàÿ±ÿØ
     * 3) ⁄©Ÿàÿ™ÿßŸá ÿ™ŸÇŸà€åÿ™€å
     */
private function suggestNextExams(int $studentId, $attempts, int $overallPercent, array $weakSubjects)
{
    $user = Auth::user();

    $classroomIds = $user->classrooms?->pluck('id') ?? collect();

    $doneExamIds = Attempt::where('student_id', $studentId)
        ->whereIn('status', ['submitted', 'graded', 'finished'])
        ->pluck('exam_id')
        ->unique();

    // ‚úÖ base ŸÖŸÇÿßŸàŸÖ
    $base = Exam::query()
        ->withCount('questions')
        ->where('is_published', 1)
        ->where('is_active', 1)
        ->whereNotIn('id', $doneExamIds)
        ->when(Schema::hasColumn('exams','start_at'), function ($q) {
            $q->where(function ($x) {
                $x->whereNull('start_at')
                  ->orWhere('start_at', '<=', now());
            });
        })
        ->where(function ($q) use ($classroomIds) {

            if (Schema::hasColumn('exams','scope')) {
                $q->whereIn('scope', ['free', 'public', 'general', 'all'])
                  ->orWhereNull('scope');
            } else {
                $q->whereRaw('1=1');
            }

            if ($classroomIds->isNotEmpty() && Schema::hasColumn('exams','classroom_id')) {
                $q->orWhereIn('classroom_id', $classroomIds);
            }
        });

    $lastExam      = $attempts->first()?->exam;
    $lastLevel     = $lastExam->level ?? null;
    $lastSubjectId = $lastExam->subject_id ?? null;

    // 1) ÿ≥ÿÆÿ™‚Äåÿ™ÿ±
    $harder = (clone $base)
        ->when(true, function ($q) use ($overallPercent) {
            if ($overallPercent >= 85) $q->where('level', 'olympiad');
            elseif ($overallPercent >= 60) $q->where('level', 'konkur');
            else $q->where('level', 'taghviyati');
        })
        ->when($lastSubjectId, fn($q) => $q->where('subject_id', $lastSubjectId))
        ->latest()
        ->first();

    // 2) ŸÖÿ¥ÿßÿ®Ÿá
    $similar = (clone $base)
        ->when($lastLevel, fn($q) => $q->where('level', $lastLevel))
        ->when($lastSubjectId, fn($q) => $q->where('subject_id', $lastSubjectId))
        ->latest()
        ->first();

    // 3) ⁄©Ÿàÿ™ÿßŸá
    $short = (clone $base)
        ->where('level', 'taghviyati')
        ->orderBy('duration', 'asc')
        ->first();

    // ÿß⁄Øÿ± ÿ∂ÿπŸÅ ÿØÿ±ÿ≥ ÿØÿßÿ±€åŸÖ
    if (!empty($weakSubjects)) {
        $weakExam = (clone $base)
            ->whereHas('subject', function ($q) use ($weakSubjects) {
                $q->where(function ($qq) use ($weakSubjects) {
                    $qq->whereIn('title', $weakSubjects);
                });
            })

            ->latest()
            ->first();

        $harder ??= $weakExam;
        $similar ??= $weakExam;
        $short  ??= $weakExam;
    }

    $out = collect([$harder, $similar, $short])
        ->filter()
        ->unique('id')
        ->values();

    // ‚úÖ ÿß⁄Øÿ± ŸáŸÜŸàÿ≤ ⁄©ŸÖÿ™ÿ± ÿßÿ≤ 3 ÿ®ŸàÿØÿå ÿßÿ≤ Ÿáÿ±⁄Ü€å Ÿáÿ≥ÿ™ Ÿæÿ± ⁄©ŸÜ
    if ($out->count() < 3) {
        $fill = (clone $base)
            ->latest()
            ->take(3 - $out->count())
            ->get();

        $out = $out->concat($fill)->unique('id')->values();
    }

    return $out;
}




    /**
     * Ÿæ€åÿ¥ŸÜŸáÿßÿØ Ÿæ€åÿ¥‚ÄåŸÅÿ±ÿ∂ ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ™ÿßÿ≤Ÿá‚ÄåŸàÿßÿ±ÿØ
     */
    private function suggestDefaultExams(int $studentId)
    {
        return Exam::query()
            ->withCount('questions')
            ->where('scope', 'free')
            ->where('is_published', 1)
            ->where('is_active', 1)
            ->orderBy('duration', 'asc')
            ->take(3)
            ->get();
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 24. MyTeachersController.php

**Path:** `app/Http/Controllers/Student/MyTeachersController.php`  
**Size:** 1,715 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use Illuminate\Support\Facades\Auth;
use App\Models\User;

class MyTeachersController extends Controller
{
    public function index()
    {
        $student = Auth::user();

        /**
         * ÿ≥ŸÜÿßÿ±€åŸà€å ÿ±ÿß€åÿ¨:
         * - student ÿ®Ÿá classrooms ŸàÿµŸÑŸá (pivot classroom_student)
         * - classroom ÿ®Ÿá teacher (€åÿß teachers) ŸàÿµŸÑŸá
         *
         * ŸÖÿß Ÿáÿ± ÿØŸà ÿ≠ÿßŸÑÿ™ ÿ±Ÿà ÿ≥ÿßŸæŸàÿ±ÿ™ ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ.
         */

        $teachers = collect();

        // ÿ≠ÿßŸÑÿ™ 1: classroom -> teacher_id (€å⁄© ŸÖÿπŸÑŸÖ ÿ®ÿ±ÿß€å Ÿáÿ± ⁄©ŸÑÿßÿ≥)
        if (method_exists($student, 'classrooms')) {
            $classrooms = $student->classrooms()->with('teacher')->get();

            $teachers = $classrooms
                ->pluck('teacher')
                ->filter()
                ->unique('id')
                ->values();
        }

        // ÿ≠ÿßŸÑÿ™ 2: classroom -> teachers()  (⁄ÜŸÜÿØ ŸÖÿπŸÑŸÖ ÿ®ÿ±ÿß€å €å⁄© ⁄©ŸÑÿßÿ≥)
        if ($teachers->isEmpty() && method_exists($student, 'classrooms')) {
            $classrooms = $student->classrooms()->with('teachers')->get();

            $teachers = $classrooms
                ->flatMap(fn($c) => $c->teachers ?? [])
                ->filter()
                ->unique('id')
                ->values();
        }

        // ÿ≠ÿßŸÑÿ™ 3 (Fallback): ÿß⁄Øÿ± ÿ±ÿßÿ®ÿ∑Ÿá ⁄©ŸÑÿßÿ≥ ŸÜÿØÿßÿ±€å Ÿà ŸÖÿ≥ÿ™ŸÇ€åŸÖ teacher_student ÿØÿßÿ±€å
        if ($teachers->isEmpty() && method_exists($student, 'teachers')) {
            $teachers = $student->teachers()->get();
        }

        return view('dashboard.student.my-teachers', compact('teachers'));
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 25. PublicExamController.php

**Path:** `app/Http/Controllers/Student/PublicExamController.php`  
**Size:** 4,769 bytes  
**Modified:** 2025-12-03 07:49:51

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

use App\Models\Exam;
use App\Models\Attempt;
use App\Models\Question;

class PublicExamController extends Controller
{
    // 1) ŸÑ€åÿ≥ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å free
    public function index()
    {
        $exams = Exam::query()
            ->where('scope', 'free')
            ->where('is_published', true)
            ->where('is_active', true)
            ->withCount('questions')
            ->latest()
            ->paginate(12);

        return view('dashboard.student.exams.free.index', compact('exams'));
    }

    // 2) ŸÜŸÖÿß€åÿ¥ ÿµŸÅÿ≠Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ (ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß)
    public function show(Exam $exam)
    {
        abort_unless($exam->scope === 'free', 404);
        abort_unless($exam->is_published && $exam->is_active, 403);

        $questions = $exam->questions()->where('is_active', true)->get();

        // ÿß⁄Øÿ± attempt ŸÇÿ®ŸÑÿßŸã submitted ÿ¥ÿØŸá ÿ®ÿßÿ¥ÿØÿå ŸÖÿ≥ÿ™ŸÇ€åŸÖ ŸÜÿ™€åÿ¨Ÿá ÿ±ÿß ŸÜÿ¥ÿßŸÜ ÿ®ÿØŸá
        $attempt = Attempt::query()
            ->where('exam_id', $exam->id)
            ->where('student_id', auth()->id())
            ->latest()
            ->first();

        if ($attempt && $attempt->isFinal()) {
            return redirect()->route('student.exams.free.result', [$exam->id, $attempt->id]);
        }

        return view('dashboard.student.exams.free.show', compact('exam', 'questions'));
    }

    // 3) ÿ¥ÿ±Ÿàÿπ attempt (ÿß⁄Øÿ± ÿÆŸàÿßÿ≥ÿ™€å ÿØ⁄©ŸÖŸá Start ÿ±ÿ≥ŸÖ€å ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€å)
    public function start(Exam $exam)
    {
        abort_unless($exam->scope === 'free', 404);

        $attempt = Attempt::create([
            'exam_id' => $exam->id,
            'student_id' => auth()->id(),
            'status' => 'in_progress',
            'started_at' => now(),
        ]);

        return redirect()->route('student.exams.free.show', $exam->id);
    }

    // 4) submit Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß + ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÜŸÖÿ±Ÿá
    public function submit(Request $request, Exam $exam)
    {
        abort_unless($exam->scope === 'free', 404);

        $questions = $exam->questions()->where('is_active', true)->get();

        // attempt ÿ¨ÿßÿ±€å €åÿß ÿ¨ÿØ€åÿØ
        $attempt = Attempt::query()->firstOrCreate(
            [
                'exam_id' => $exam->id,
                'student_id' => auth()->id(),
                'status' => 'in_progress',
            ],
            [
                'started_at' => now(),
            ]
        );

        $answers = [];
        $scoreObtained = 0;
        $scoreTotal = 0;

        foreach ($questions as $q) {
            $scoreTotal += (int)($q->score ?? 1);

            $key = "q_{$q->id}";

            if ($q->type === 'mcq') {
                $ans = $request->input($key); // a/b/c/d
                if ($ans) {
                    $answers[$q->id] = $ans;

                    // correct_option legacy €åÿß correct_answer ÿ¨ÿØ€åÿØ
                    $correct = $q->correct_option ?? (is_array($q->correct_answer) ? $q->correct_answer[0] : null);
                    if ($correct && $ans === $correct) {
                        $scoreObtained += (int)($q->score ?? 1);
                    }
                }
            }

            elseif ($q->type === 'true_false') {
                // ŸÖ€å‚Äåÿ¢€åÿØ ÿ®Ÿá ÿµŸàÿ±ÿ™ "true"/"false"
                $ansRaw = $request->input($key);
                if ($ansRaw !== null) {
                    $ans = filter_var($ansRaw, FILTER_VALIDATE_BOOLEAN, FILTER_NULL_ON_FAILURE);
                    $answers[$q->id] = $ans;

                    if (!is_null($q->correct_tf) && $ans === (bool)$q->correct_tf) {
                        $scoreObtained += (int)($q->score ?? 1);
                    }
                }
            }
        }

        $percent = $scoreTotal > 0 ? round(($scoreObtained / $scoreTotal) * 100, 2) : 0;

        $attempt->update([
            'answers' => $answers,
            'status' => 'submitted',
            'submitted_at' => now(),
            'finished_at' => now(),
            'score_obtained' => $scoreObtained,
            'score_total' => $scoreTotal,
            'percent' => $percent,
            'score' => $scoreObtained, // ÿ≥ÿ™ŸàŸÜ score decimal
        ]);

        return redirect()->route('student.exams.free.result', [$exam->id, $attempt->id]);
    }

    // 5) ÿµŸÅÿ≠Ÿá ŸÜÿ™€åÿ¨Ÿá
    public function result(Exam $exam, Attempt $attempt)
    {
        abort_unless($exam->id === $attempt->exam_id, 404);
        abort_unless($attempt->student_id === auth()->id(), 403);

        $questions = $exam->questions()->where('is_active', true)->get();

        return view('dashboard.student.exams.free.result', compact('exam','attempt','questions'));
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 26. StudentClassController.php

**Path:** `app/Http/Controllers/Student/StudentClassController.php`  
**Size:** 4,438 bytes  
**Modified:** 2025-12-02 11:50:46

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use App\Models\ClassRoom;  //ÿßÿµŸÑÿßÿ≠ ÿ®Ÿá ClassRoom
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

/**
 * StudentClassController
 * ----------------------------------------------------------------
 * ⁄©ŸÜÿ™ÿ±ŸÑÿ± ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
 *
 * ÿß€åŸÜ ⁄©ŸÜÿ™ÿ±ŸÑÿ± ŸÖÿ≥ÿ¶ŸàŸÑ ÿß€åŸÜ ⁄©ÿßÿ±Ÿáÿßÿ≥ÿ™:
 * 1) index        : ŸÜŸÖÿß€åÿ¥ ŸÑ€åÿ≥ÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿπÿ∂Ÿà ÿ¥ÿØŸá‚Äå€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
 * 2) show         : ŸÜŸÖÿß€åÿ¥ ÿµŸÅÿ≠Ÿá ÿ¨ÿ≤ÿ¶€åÿßÿ™ €å⁄© ⁄©ŸÑÿßÿ≥ ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
 * 3) showJoinForm : ŸÜŸÖÿß€åÿ¥ ŸÅÿ±ŸÖ Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ÿ®ÿß join_code
 * 4) join         : ÿπÿ∂Ÿà€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿØÿ± ⁄©ŸÑÿßÿ≥ ÿ®ÿß join_code
 *
 * BladeŸáÿß€å ŸÖÿ±ÿ®Ÿàÿ∑:
 * - dashboard.student.classrooms.index
 * - dashboard.student.classrooms.show
 * - dashboard.student.join-class
 */
class StudentClassController extends Controller
{
    /**
     * ŸÑ€åÿ≥ÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
     * ------------------------------------------------------------
     * ŸÅŸÇÿ∑ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å€å ⁄©Ÿá ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿπÿ∂Ÿà ÿ¢ŸÜ‚ÄåŸáÿßÿ≥ÿ™ ÿ±ÿß ŸÖ€å‚Äå⁄Ø€åÿ±ÿØ.
     *
     * Route:
     * GET /dashboard/student/classrooms
     * name: student.classrooms.index
     */
    public function index()
    {
        $student = Auth::user();

        // ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿπÿ∂Ÿà ÿ¥ÿØŸá + ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿπŸÑŸÖ
        $classrooms = $student->classrooms()
            ->with('teacher')
            ->withCount(['students','exams'])
            ->latest()
            ->get();

        return view('dashboard.student.classrooms.index', compact('classrooms'));
    }

    /**
     * ŸÜŸÖÿß€åÿ¥ €å⁄© ⁄©ŸÑÿßÿ≥ ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
     * ------------------------------------------------------------
     * ÿßŸÖŸÜ€åÿ™ ŸÖŸáŸÖ:
     * ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ŸÅŸÇÿ∑ ÿß⁄Øÿ± ÿπÿ∂Ÿà ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ÿ®ÿßÿ¥ÿØ ÿßÿ¨ÿßÿ≤Ÿá ÿØ€åÿØŸÜ ÿµŸÅÿ≠Ÿá ÿ±ÿß ÿØÿßÿ±ÿØ.
     *
     * Route:
     * GET /dashboard/student/classrooms/{classroom}
     * name: student.classrooms.show
     */
    public function show(ClassRoom $classroom)  // ‚úÖ ÿßÿµŸÑÿßÿ≠ ÿ¥ÿØ
    {
        $student = Auth::user();

        // ⁄Ü⁄© ÿπÿ∂Ÿà€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿØÿ± ⁄©ŸÑÿßÿ≥
        $isMember = $student->classrooms()
            ->where('classroom_id', $classroom->id)
            ->exists();

        abort_unless($isMember, 403, 'ÿ¥ŸÖÿß ÿπÿ∂Ÿà ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÜ€åÿ≥ÿ™€åÿØ.');

        // ŸÑŸàÿØ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ™⁄©ŸÖ€åŸÑ€å ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ ÿØÿ± ÿµŸÅÿ≠Ÿá
        $classroom->load([
            'teacher',
            'exams' => fn($q) => $q->latest(),
        ]);

        return view('dashboard.student.classrooms.show', compact('classroom'));
    }

    /**
     * ŸÜŸÖÿß€åÿ¥ ŸÅÿ±ŸÖ Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥
     * ------------------------------------------------------------
     * Route:
     * GET /dashboard/student/classrooms/join
     * name: student.classrooms.join.form
     */
    public function showJoinForm()
    {
        return view('dashboard.student.classrooms.join-class');
    }

    /**
     * ÿπÿ∂Ÿà€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿØÿ± ⁄©ŸÑÿßÿ≥ ÿ®ÿß join_code
     * ------------------------------------------------------------
     * Flow:
     * 1) ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å join_code
     * 2) Ÿæ€åÿØÿß ⁄©ÿ±ÿØŸÜ ⁄©ŸÑÿßÿ≥
     * 3) ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿπÿ∂Ÿà€åÿ™ ÿØŸàÿ®ÿßÿ±Ÿá
     * 4) attach ÿØÿ± pivot (classroom_student)
     * 5) redirect ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
     *
     * Route:
     * POST /dashboard/student/classrooms/join
     * name: student.classrooms.join
     */
    public function join(Request $request)
    {
        $request->validate([
            'join_code' => ['required', 'string', 'exists:classrooms,join_code'],
        ]);

        $student = Auth::user();

        $classroom = Classroom::where('join_code', $request->join_code)->firstOrFail();

        // ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿπÿ∂Ÿà€åÿ™ ÿ™⁄©ÿ±ÿßÿ±€å
        if ($student->classrooms()->where('classroom_id', $classroom->id)->exists()) {
            return back()->withErrors([
                'join_code' => 'ÿ¥ŸÖÿß ŸÇÿ®ŸÑÿßŸã ÿπÿ∂Ÿà ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ Ÿáÿ≥ÿ™€åÿØ.'
            ]);
        }

        // ÿπÿ∂Ÿà€åÿ™ ÿØÿ± pivot
        $student->classrooms()->attach($classroom->id);

        return redirect()->route('student.classrooms.index')
            ->with('success', 'ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ€åÿØ.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 27. StudentExamController.php

**Path:** `app/Http/Controllers/Student/StudentExamController.php`  
**Size:** 14,966 bytes  
**Modified:** 2025-12-05 22:16:33

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use App\Models\Exam;
use App\Models\Attempt;
use App\Models\AttemptAnswer;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\DB;
use App\Services\GamificationService;

class StudentExamController extends Controller
{
    /**
     * Legacy index (backward compatible)
     * Shows free + classroom exams (only joined classrooms)
     */
public function index(Request $request)
{
    $student = Auth::user();

    // ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å€å ⁄©Ÿá ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿπÿ∂Ÿà ÿ¢ŸÜ‚ÄåŸáÿßÿ≥ÿ™
    $classroomIds = $student->classrooms()->pluck('classrooms.id')->toArray();

    $now = now();

    $exams = Exam::query()
        ->where(function ($q) use ($classroomIds) {

            // 1) ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å (free ŸÇÿØ€åŸÖ€å)
            $q->where('exam_type', 'public')

              // 2) ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥€å ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å€å ⁄©Ÿá ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿπÿ∂Ÿàÿ¥Ÿá
              ->orWhere(function ($q2) use ($classroomIds) {
                  $q2->whereIn('exam_type', ['class_single', 'class_comprehensive'])
                     ->whereIn('classroom_id', $classroomIds);
              });
        })
        // ÿß⁄Øÿ± ÿ≥ÿ™ŸàŸÜ is_active ÿØÿ± DB ÿØÿßÿ±€å (⁄©Ÿá ÿØÿßÿ±€å)ÿå ŸÅŸÇÿ∑ ŸÅÿπÿßŸÑ‚ÄåŸáÿß
        ->where('is_active', 1)

        // (ÿßÿÆÿ™€åÿßÿ±€å ŸàŸÑ€å ÿÆŸàÿ®) ŸÅŸÇÿ∑ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å€å ⁄©Ÿá ÿ≤ŸÖÿßŸÜÿ¥ ÿ±ÿ≥€åÿØŸá/ŸÖŸÜŸÇÿ∂€å ŸÜÿ¥ÿØŸá
        ->where(function ($q) use ($now) {
            $q->whereNull('start_at')->orWhere('start_at', '<=', $now);
        })
        ->where(function ($q) use ($now) {
            $q->whereNull('end_at')->orWhere('end_at', '>=', $now);
        })

        ->latest()
        ->paginate(10);

    return view('dashboard.student.exams.public', compact('exams'));
}


    /**
     * Public exams list
     */
    public function publicIndex(Request $request)
    {
        $student = Auth::user();

        $examsQuery = Exam::query()
            ->where('scope', 'free')
            ->with('classroom')
            ->withCount('questions')
            ->with(['attempts' => function ($q) use ($student) {
                $q->where('student_id', $student->id)->latest();
            }])
            ->latest();

        $exams = $examsQuery->paginate(9)->withQueryString();

        return view('dashboard.student.exams.public', compact('exams'));
    }

    /**
     * Classroom exams list (joined classrooms only)
     */
    public function classroomIndex(Request $request)
    {
        $student = Auth::user();
        $classroomIds = $student->classrooms()->pluck('classrooms.id');

        $examsQuery = Exam::query()
            ->where('scope', 'classroom')
            ->whereIn('classroom_id', $classroomIds)
            ->where(function ($pub) {
                $pub->whereNull('is_published')->orWhere('is_published', true);
            })
            ->where(function ($act) {
                $act->whereNull('is_active')->orWhere('is_active', true);
            })
            ->with('classroom')
            ->withCount('questions')
            ->with(['attempts' => function ($q) use ($student) {
                $q->where('student_id', $student->id)->latest();
            }])
            ->latest();

        if ($request->filled('classroom_id')) {
            $examsQuery->where('classroom_id', $request->classroom_id);
        }

        $exams = $examsQuery->paginate(9)->withQueryString();
        $classrooms = $student->classrooms()->get();

        return view('dashboard.student.exams.classroom', compact('exams', 'classrooms'));
    }

    /**
     * Exam details
     */
    public function show(Exam $exam)
    {
        $this->authorizeExamForStudent($exam);

        $exam->load(['classroom', 'questions']);
        $exam->difficulty = $this->normalizeDifficulty($exam->difficulty);

        $student = Auth::user();

        $lastAttempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->latest()
            ->first();

        $isFinalAttempt = $this->isFinalAttempt($lastAttempt);

        return view('dashboard.student.exams.show', compact('exam', 'lastAttempt', 'isFinalAttempt'));
    }

    /**
     * Take exam page
     */
    public function take(Exam $exam)
    {
        $this->authorizeExamForStudent($exam);

        $student = Auth::user();
        $exam->load('questions');

        if (empty($exam->duration_minutes) && !empty($exam->duration)) {
            $exam->duration_minutes = $exam->duration;
        }

        $attempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->whereNull('finished_at')
            ->latest()
            ->first();

        return view('dashboard.student.exams.take', compact('exam', 'attempt'));
    }

    /**
     * Start exam
     */
    public function start(Exam $exam)
    {
        $this->authorizeExamForStudent($exam);

        $student = Auth::user();

        $lastAttempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->latest()
            ->first();

        if ($this->isFinalAttempt($lastAttempt)) {
            return redirect()
                ->route('student.exams.show', $exam)
                ->with('warning', 'ÿ¥ŸÖÿß ŸÇÿ®ŸÑÿßŸã ÿØÿ± ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¥ÿ±⁄©ÿ™ ⁄©ÿ±ÿØŸá‚Äåÿß€åÿØ Ÿà ÿßŸÖ⁄©ÿßŸÜ ÿ®ÿ±⁄Øÿ≤ÿßÿ±€å ŸÖÿ¨ÿØÿØ Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ.');
        }

        $attempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->whereNull('finished_at')
            ->latest()
            ->first();

        if (!$attempt) {
            $attempt = Attempt::create([
                'exam_id'        => $exam->id,
                'student_id'     => $student->id,
                'answers'        => [],
                'score'          => 0,
                'percent'        => 0,
                'score_total'    => 0,
                'score_obtained' => 0,
                'started_at'     => now(),
                'finished_at'    => null,
                'submitted_at'   => null,
                'status'         => 'in_progress',
            ]);
        }

        // ‚úÖ CHANGED: ÿ®Ÿáÿ™ÿ±Ÿá route model binding ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ®ÿ¥Ÿá
        return redirect()->route('student.exams.take', $exam);
        // ŸÇÿ®ŸÑ€å: return redirect()->route('student.exams.take', $exam->id);
    }

    /**
     * Submit exam answers + grading
     */
    public function submit(Request $request, Exam $exam, GamificationService $gamification)
    {
        $this->authorizeExamForStudent($exam);

        $request->validate([
            'answers' => ['required', 'array'],
        ]);

        $student = Auth::user();
        $exam->load('questions');

        $attempt = Attempt::where('exam_id', $exam->id)
            ->where('student_id', $student->id)
            ->whereNull('finished_at')
            ->latest()
            ->firstOrFail();

        DB::transaction(function () use ($request, $exam, $attempt) {
            AttemptAnswer::where('attempt_id', $attempt->id)->delete();

            $answersInput = $request->input('answers', []);

            $scoreTotal = 0;
            $scoreObtained = 0;

            foreach ($exam->questions as $q) {
                $qScore = (int) ($q->score ?? 1);
                $scoreTotal += $qScore;

                $studentAnswer = $answersInput[$q->id] ?? null;

                $grading = $this->gradeQuestion($q, $studentAnswer, $qScore);

                AttemptAnswer::create([
                    'attempt_id'    => $attempt->id,
                    'question_id'   => $q->id,
                    'answer'        => $studentAnswer,
                    'is_correct'    => $grading['is_correct'],
                    'score_awarded' => $grading['score_awarded'],
                ]);

                $scoreObtained += $grading['score_awarded'];
            }

            $percent = $scoreTotal > 0 ? round(($scoreObtained / $scoreTotal) * 100, 2) : 0;

            $attempt->update([
                'answers'        => $answersInput,

                'score_total'    => $scoreTotal,
                'score_obtained' => $scoreObtained,

                'score'          => $scoreObtained,
                'percent'        => $percent,

                'submitted_at'   => now(),
                'finished_at'    => now(),
                'status'         => 'submitted',
            ]);
        });

        $attempt->refresh();

        $baseXp = $exam->scope === 'free' ? 20 : 25;
        $scoreXp = (int) floor(((float) $attempt->percent) / 5);
        $totalAward = $baseXp + $scoreXp;

        $gamification->awardXp(
            $student,
            'exam',
            $exam->id,
            $totalAward
        );

        return redirect()
            ->route('student.attempts.result', $attempt->id)
            ->with('success', 'Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ.');
    }

    /**
     * Attempt Result page
     */
    public function result(Attempt $attempt)
    {
        $student = Auth::user();
        abort_unless($attempt->student_id == $student->id, 403);

        $attempt->load([
            'exam.questions',
            'answers.question'
        ]);

        $exam = $attempt->exam;

        // ‚úÖ CHANGED: ÿ®Ÿá‚ÄåÿµŸàÿ±ÿ™ ÿµÿ±€åÿ≠ ÿ±ÿßÿ®ÿ∑Ÿá answers ÿ±ÿß ÿ®⁄Ø€åÿ±
        // ⁄ÜŸàŸÜ ÿ≥ÿ™ŸàŸÜ JSON Ÿà ÿ±ÿßÿ®ÿ∑Ÿá ŸáŸÖŸÜÿßŸÖ‚ÄåÿßŸÜÿØ Ÿà ŸÖŸÖ⁄©ŸÜŸá ÿ®ÿß⁄Ø ÿ±ŸÜÿØŸàŸÖ ÿ®ÿØŸá
        $attemptAnswerModels = $attempt->getRelation('answers');

        return view('dashboard.student.attempts.result', [
            'attempt' => $attempt,
            'exam' => $exam,
            'attemptAnswers' => $attemptAnswerModels, // ‚úÖ ÿ±ÿßÿ®ÿ∑Ÿá ŸàÿßŸÇÿπ€å
            'legacyAnswers' => $attempt->getAttribute('answers'), // ‚úÖ ÿØÿ± ÿµŸàÿ±ÿ™ ŸÜ€åÿßÿ≤ ÿ®Ÿá JSON
        ]);
    }

    /**
     * Attempt Analysis (Phase 1 stub)
     */
    public function analysis(Attempt $attempt)
    {
        $student = Auth::user();
        abort_unless($attempt->student_id == $student->id, 403);

        $attempt->load([
            'exam',
            'answers.question'
        ]);

        $analysis = null;

        return view('dashboard.student.attempts.analysis', [
            'attempt' => $attempt,
            'exam' => $attempt->exam,
            'analysis' => $analysis,
        ]);
    }

    /**
     * Legacy attempt show ‚Üí redirect to result
     */
    public function attemptShow(Attempt $attempt)
    {
        return redirect()->route('student.attempts.result', $attempt->id);
    }

    protected function authorizeExamForStudent(Exam $exam): void
    {
        $student = Auth::user();

        if ($exam->scope === 'free') {
            return;
        }

        $isMember = $student->classrooms()
            ->where('classroom_id', $exam->classroom_id)
            ->exists();

        abort_unless($isMember, 403, 'ÿ¥ŸÖÿß ÿπÿ∂Ÿà ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÜ€åÿ≥ÿ™€åÿØ.');
    }

    /**
     * Final attempt means student already submitted once
     */
    private function isFinalAttempt(?Attempt $attempt): bool
    {
        if (!$attempt) return false;

        return
            !is_null($attempt->finished_at) ||
            !is_null($attempt->submitted_at) ||
            in_array($attempt->status ?? null, ['submitted', 'graded']);
    }

    /**
     * Normalize difficulty to easy|medium|hard
     */
    private function normalizeDifficulty(?string $difficulty): string
    {
        $difficulty = strtolower(trim((string) $difficulty));

        return match ($difficulty) {
            'easy', 'low', 'simple' => 'easy',
            'hard', 'high', 'difficult' => 'hard',
            default => 'medium',
        };
    }

    /**
     * Grade a single question
     */
    private function gradeQuestion($q, $studentAnswer, int $qScore): array
    {
        $type = $q->type ?? 'mcq';

        $correctOption = $q->correct_option ?? null;
        $correctAnswer = $q->correct_answer ?? null;

        $isCorrect = null;
        $awarded = 0;

        if ($type === 'essay') {
            $isCorrect = null;
            $awarded = 0;

        } elseif ($type === 'mcq') {
            $studentKey = is_array($studentAnswer) ? ($studentAnswer[0] ?? null) : $studentAnswer;

            if (!empty($correctOption)) {
                $isCorrect = strtolower((string) $studentKey) === strtolower((string) $correctOption);
            } else {
                $correctArr = is_string($correctAnswer) ? json_decode($correctAnswer, true) : $correctAnswer;
                $correctArr = is_array($correctArr) ? $correctArr : [$correctArr];
                $isCorrect = in_array(
                    strtolower((string) $studentKey),
                    array_map(fn($v)=>strtolower((string)$v), $correctArr)
                );
            }
            $awarded = $isCorrect ? $qScore : 0;

        } elseif ($type === 'true_false') {

            // ‚úÖ CHANGED: ÿ≥ÿßÿ≤⁄Øÿßÿ±€å ⁄©ÿßŸÖŸÑ ÿ®ÿß boolean Ÿà correct_tf
            $studentVal = $studentAnswer;
            if (is_string($studentVal)) $studentVal = strtolower($studentVal);
            if ($studentVal === 'true') $studentVal = true;
            if ($studentVal === 'false') $studentVal = false;

            // ÿßŸàŸÑŸà€åÿ™ ÿ®ÿß correct_tf ÿß⁄Øÿ± ŸÖŸàÿ¨ŸàÿØ ÿ®ŸàÿØ
            if (!is_null($q->correct_tf)) {
                $correctVal = (bool) $q->correct_tf;
            } else {
                $correctVal = $correctAnswer;
                if (is_string($correctVal)) {
                    $correctVal = strtolower($correctVal);
                    $correctVal = $correctVal === 'true';
                }
            }

            $isCorrect = (bool)$studentVal === (bool)$correctVal;
            $awarded = $isCorrect ? $qScore : 0;

        } elseif ($type === 'fill_blank') {
            $studentText = is_array($studentAnswer) ? implode(',', $studentAnswer) : (string)$studentAnswer;
            $studentParts = array_filter(array_map(fn($v)=>trim(mb_strtolower($v)), explode(',', $studentText)));

            $correctArr = is_string($correctAnswer) ? json_decode($correctAnswer, true) : $correctAnswer;
            $correctArr = is_array($correctArr) ? $correctArr : [$correctArr];
            $correctArr = array_filter(array_map(fn($v)=>trim(mb_strtolower((string)$v)), $correctArr));

            $isCorrect = false;
            foreach ($studentParts as $sp) {
                if (in_array($sp, $correctArr, true)) {
                    $isCorrect = true;
                    break;
                }
            }

            $awarded = $isCorrect ? $qScore : 0;

        } else {
            $isCorrect = false;
            $awarded = 0;
        }

        return [
            'is_correct' => $isCorrect,
            'score_awarded' => $awarded,
        ];
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 28. StudentProfileController.php

**Path:** `app/Http/Controllers/Student/StudentProfileController.php`  
**Size:** 1,959 bytes  
**Modified:** 2025-12-03 03:15:33

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Student;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Storage;
use Illuminate\Validation\Rule;
use App\Models\StudentGamificationProfile; // ‚úÖ add

class StudentProfileController extends Controller
{
    public function edit()
    {
        $user = Auth::user();

        // ‚úÖ Gamification profile (Phase A)
        $gamification = StudentGamificationProfile::firstOrCreate(
            ['student_id' => $user->id],
            ['total_xp' => 0, 'level' => 1]
        );

        return view('dashboard.student.profile', compact('user', 'gamification'));
    }

    public function update(Request $request)
    {
        $user = Auth::user();

        $validated = $request->validate([
            'name'  => ['required','string','max:255'],
            'email' => ['nullable','email','max:255', Rule::unique('users')->ignore($user->id)],
            'phone' => ['nullable','string','max:30', Rule::unique('users')->ignore($user->id)],
            'national_code' => ['nullable','string','max:20'],
            'bio' => ['nullable','string','max:1000'],
        ]);

        $user->fill($validated);
        $user->save();

        return back()->with('success', 'ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ ‚úÖ');
    }

    public function updateAvatar(Request $request)
    {
        $user = Auth::user();

        $request->validate([
            'avatar' => ['required','image','mimes:jpg,jpeg,png,webp','max:2048'],
        ]);

        if ($user->avatar && Storage::disk('public')->exists($user->avatar)) {
            Storage::disk('public')->delete($user->avatar);
        }

        $path = $request->file('avatar')->store('avatars', 'public');

        $user->avatar = $path;
        $user->save();

        return back()->with('success', 'ÿπ⁄©ÿ≥ Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿ™ÿ∫€å€åÿ± ⁄©ÿ±ÿØ üì∏');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 29. DashboardController.php

**Path:** `app/Http/Controllers/Teacher/DashboardController.php`  
**Size:** 2,583 bytes  
**Modified:** 2025-12-05 14:17:43

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;
use Illuminate\Support\Facades\Auth; // ÿ®ÿ±ÿß€å ⁄Øÿ±ŸÅÿ™ŸÜ id ⁄©ÿßÿ±ÿ®ÿ± ŸÑÿß⁄Ø€åŸÜ‚Äåÿ¥ÿØŸá
use App\Http\Controllers\Controller;
use App\Models\Exam;
use App\Models\Question;

/**
 * Teacher Dashboard Controller
 *
 * ÿß€åŸÜ ⁄©ŸÜÿ™ÿ±ŸÑÿ± ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å ÿµŸÅÿ≠Ÿá‚Äå€å ÿßÿµŸÑ€å ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ ÿßÿ≥ÿ™:
 * /dashboard/teacher
 *
 * ŸáÿØŸÅ:
 * - ÿ¨ŸÖÿπ‚Äåÿ¢Ÿàÿ±€å ÿ¢ŸÖÿßÿ± ⁄©ŸÑ€å (ÿ™ÿπÿØÿßÿØ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿßÿå ŸÅÿπÿßŸÑ/ÿ∫€åÿ±ŸÅÿπÿßŸÑÿå ÿ™ÿπÿØÿßÿØ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß)
 * - ⁄Øÿ±ŸÅÿ™ŸÜ ⁄ÜŸÜÿØ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¢ÿÆÿ± ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ ÿØÿ± ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
 *
 * ŸÜ⁄©ÿ™Ÿá:
 * ⁄ÜŸàŸÜ ŸÇÿ®ŸÑÿßŸã ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ŸÖÿπŸÑŸÖ ÿ®ÿß Route::view ŸÑŸàÿØ ŸÖ€å‚Äåÿ¥ÿØÿå
 * Ÿá€å⁄Ü ÿØ€åÿ™ÿß€å€å ÿ®Ÿá Ÿà€åŸà ŸÜŸÖ€å‚Äåÿ±ÿ≥€åÿØ. ÿß€åŸÜ ⁄©ŸÜÿ™ÿ±ŸÑÿ± ŸáŸÖÿßŸÜ ÿØÿßÿØŸá‚ÄåŸáÿß ÿ±ÿß ÿ™ÿßŸÖ€åŸÜ ŸÖ€å‚Äå⁄©ŸÜÿØ.
 */
class DashboardController extends Controller
{
    /**
     * ŸÜŸÖÿß€åÿ¥ ÿµŸÅÿ≠Ÿá ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ŸÖÿπŸÑŸÖ
     *
     * ÿÆÿ±Ÿàÿ¨€å:
     * view('dashboard.teacher.index')
     * ŸáŸÖÿ±ÿßŸá ÿ®ÿß:
     * - $stats : ÿ¢ŸÖÿßÿ± ÿÆŸÑÿßÿµŸá
     * - $recentExams : ÿ¢ÿÆÿ±€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
     */

public function index()
{
    $user = Auth::user();

    // ÿß⁄Øÿ± Ÿæÿ±ŸàŸÅÿß€åŸÑ teacher ÿ¨ÿØÿß ÿØÿßÿ±€åÿå ÿßÿ≤ ÿßŸàŸÜ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ
    $teacher = $user->teacher ?? null;

    // ÿß⁄Øÿ± exams.teacher_id ÿ®Ÿá ÿ¨ÿØŸàŸÑ teachers ŸàÿµŸÑ ÿßÿ≥ÿ™ ‚Üí id Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿπŸÑŸÖ
    // ÿß⁄Øÿ± exams.teacher_id ŸáŸÖÿßŸÜ user_id ÿßÿ≥ÿ™ ‚Üí id ÿÆŸàÿØ user
    $teacherKey = $teacher?->id ?? $user->id;

    /**
     * ⁄©Ÿàÿ¶ÿ±€å Ÿæÿß€åŸá ÿ®ÿ±ÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸÖÿπŸÑŸÖ
     */
    $examsQuery = Exam::where('teacher_id', $teacherKey);

    /**
     * stats ÿ®ÿß ⁄©ŸÑ€åÿØŸáÿß€å ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ ŸÖÿ∑ÿßÿ®ŸÇ Blade
     */
    $stats = [
        'total_exams' => (clone $examsQuery)->count(),

        'active_exams' => (clone $examsQuery)
            ->where('is_published', true)
            ->count(),

        // ŸÅÿπŸÑÿßŸã ÿ™ÿß ŸàŸÇÿ™€å ŸÖÿØŸÑ/ÿ±ÿßÿ®ÿ∑Ÿá‚Äå€å ⁄©ŸÑÿßÿ≥ Ÿà attempt/answer ÿ±Ÿà ŸÖ⁄Ü ŸÜ⁄©ÿ±ÿØ€åŸÖ
        'students_count' => 0,
        'new_students' => 0,
        'pending_reviews' => 0,
    ];

    /**
     * ÿ¢ÿÆÿ±€åŸÜ €µ ÿ¢ÿ≤ŸÖŸàŸÜ + ÿ¥ŸÖÿßÿ±ÿ¥ ÿ≥ŸàÿßŸÑÿßÿ™ Ÿà ÿ¥ÿ±⁄©ÿ™‚Äå⁄©ŸÜŸÜÿØŸá‚ÄåŸáÿß
     * ŸÜ⁄©ÿ™Ÿá: ÿ®ÿß€åÿØ ÿ±Ÿà€å Exam ÿ±ÿßÿ®ÿ∑Ÿá‚Äå€å questions Ÿà attempts ÿ™ÿπÿ±€åŸÅ ÿ¥ÿØŸá ÿ®ÿßÿ¥ÿØ.
     */
    $recentExams = (clone $examsQuery)
        ->latest()
        ->withCount(['questions', 'attempts'])
        ->take(5)
        ->get();

    return view('dashboard.teacher.index', compact('stats', 'recentExams'));
}



}

......................................................................

----------------------------------------------------------------------

## üìÑ 30. QuestionController.php

**Path:** `app/Http/Controllers/Teacher/QuestionController.php`  
**Size:** 8,003 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use Illuminate\Support\Facades\Auth;
use App\Http\Controllers\Controller;
use App\Models\Exam;
use App\Models\Question;
use Illuminate\Http\Request;

class QuestionController extends Controller
{
    // ŸÑ€åÿ≥ÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ
    public function index(Exam $exam)
    {
        $exam->load('classroom');

        $questions = $exam->questions()->latest()->get();
        return view('dashboard.teacher.exams.questions', compact('exam','questions'));
    }

    // ŸÅÿ±ŸÖ ÿß€åÿ¨ÿßÿØ ÿ≥ŸàÿßŸÑ ÿ¨ÿØ€åÿØ
    public function create(Exam $exam)
    {
        $this->authorizeTeacherExam($exam);

        return view('dashboard.teacher.exams.questions-create', compact('exam'));
    }

    public function store(Request $request, Exam $exam)
    {
        $this->authorizeTeacherExam($exam);

        // ‚úÖ ŸáŸÖ question (ŸÅÿ±ŸÖ ÿ¨ÿØ€åÿØ) ŸáŸÖ question_text (legacy)
        $baseRules = [
            'type'        => 'required|in:mcq,true_false,fill_blank,essay',

            'question'      => 'required_without:question_text|string|max:2000',
            'question_text' => 'required_without:question|string|max:2000',

            'score'       => 'nullable|integer|min:1|max:100',
            'explanation' => 'nullable|string|max:2000',
        ];

        $typeRules = match ($request->type) {
            'mcq' => [
                'option_a'       => 'required|string|max:1000',
                'option_b'       => 'required|string|max:1000',
                'option_c'       => 'required|string|max:1000',
                'option_d'       => 'required|string|max:1000',
                'correct_option' => 'required|in:a,b,c,d',
            ],
            'true_false' => [
                'correct_tf' => 'required|boolean',
            ],
            'fill_blank' => [
                'correct_blanks' => 'required|string|max:2000',
            ],
            'essay' => [],
            default => []
        };

        $validated = $request->validate(array_merge($baseRules, $typeRules));

        // ‚úÖ ŸÖÿ™ŸÜ ÿ≥ŸàÿßŸÑ ÿ±ÿß ÿßÿ≤ Ÿáÿ± ⁄©ÿØÿßŸÖ ⁄©Ÿá ÿ¢ŸÖÿØŸá ÿ®⁄Ø€åÿ±
        $questionText = $validated['question'] ?? $validated['question_text'];

        $payload = [
            'type'          => $validated['type'],
            'question_text' => $questionText,   // ‚úÖ ÿ∞ÿÆ€åÿ±Ÿá ÿØÿ± ÿ≥ÿ™ŸàŸÜ ŸàÿßŸÇÿπ€å DB
            'score'         => $validated['score'] ?? 1,
            'explanation'   => $validated['explanation'] ?? null,
        ];

        // reset multi-type fields
        $payload['options']        = null;
        $payload['correct_answer'] = null;
        $payload['correct_tf']     = null;

        // Legacy MCQ
        if ($validated['type'] === 'mcq') {
            $payload['option_a']       = $validated['option_a'];
            $payload['option_b']       = $validated['option_b'];
            $payload['option_c']       = $validated['option_c'];
            $payload['option_d']       = $validated['option_d'];
            $payload['correct_option'] = $validated['correct_option'];
        }

        if ($validated['type'] === 'true_false') {
            $payload['correct_tf'] = (bool) $validated['correct_tf'];
        }

        if ($validated['type'] === 'fill_blank') {
            $answers = preg_split("/[,\\n]+/", $validated['correct_blanks']);
            $answers = array_values(array_filter(array_map('trim', $answers)));
            $payload['correct_answer'] = $answers;
        }

        $exam->questions()->create($payload);

        return redirect()
            ->route('teacher.exams.questions.index', $exam)
            ->with('success', 'ÿ≥ÿ§ÿßŸÑ ÿ¨ÿØ€åÿØ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.');
    }

    public function edit(Exam $exam, Question $question)
    {
        $this->authorizeTeacherExam($exam);

        if ($question->exam_id !== $exam->id) {
            abort(404);
        }

        return view('dashboard.teacher.exams.question-edit', compact('exam', 'question'));
    }

    public function update(Request $request, Exam $exam, Question $question)
    {
        $this->authorizeTeacherExam($exam);

        if ($question->exam_id !== $exam->id) {
            abort(404);
        }

        $baseRules = [
            'type'        => 'required|in:mcq,true_false,fill_blank,essay',

            'question'      => 'required_without:question_text|string|max:2000',
            'question_text' => 'required_without:question|string|max:2000',

            'score'       => 'nullable|integer|min:1|max:100',
            'explanation' => 'nullable|string|max:2000',
        ];

        $typeRules = match ($request->type) {
            'mcq' => [
                'option_a'       => 'required|string|max:1000',
                'option_b'       => 'required|string|max:1000',
                'option_c'       => 'required|string|max:1000',
                'option_d'       => 'required|string|max:1000',
                'correct_option' => 'required|in:a,b,c,d',
            ],
            'true_false' => [
                'correct_tf' => 'required|boolean',
            ],
            'fill_blank' => [
                'correct_blanks' => 'required|string|max:2000',
            ],
            'essay' => [],
            default => []
        };

        $validated = $request->validate(array_merge($baseRules, $typeRules));

        $questionText = $validated['question'] ?? $validated['question_text'];

        $payload = [
            'type'          => $validated['type'],
            'question_text' => $questionText,
            'score'         => $validated['score'] ?? 1,
            'explanation'   => $validated['explanation'] ?? null,
        ];

        // reset fields
        $payload['options']        = null;
        $payload['correct_answer'] = null;
        $payload['correct_tf']     = null;

        // legacy MCQ reset
        $payload['option_a'] = $payload['option_b'] = $payload['option_c'] = $payload['option_d'] = null;
        $payload['correct_option'] = null;

        if ($validated['type'] === 'mcq') {
            $payload['option_a']       = $validated['option_a'];
            $payload['option_b']       = $validated['option_b'];
            $payload['option_c']       = $validated['option_c'];
            $payload['option_d']       = $validated['option_d'];
            $payload['correct_option'] = $validated['correct_option'];
        }

        if ($validated['type'] === 'true_false') {
            $payload['correct_tf'] = (bool) $validated['correct_tf'];
        }

        if ($validated['type'] === 'fill_blank') {
            $answers = preg_split("/[,\\n]+/", $validated['correct_blanks']);
            $answers = array_values(array_filter(array_map('trim', $answers)));
            $payload['correct_answer'] = $answers;
        }

        $question->update($payload);

        return redirect()
            ->route('teacher.exams.questions.index', $exam)
            ->with('success', 'ÿ≥ÿ§ÿßŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ Ÿà€åÿ±ÿß€åÿ¥ ÿ¥ÿØ.');
    }

    public function destroy(Exam $exam, Question $question)
    {
        $this->authorizeTeacherExam($exam);

        if ($question->exam_id !== $exam->id) {
            abort(404);
        }

        $question->delete();

        return redirect()
            ->route('teacher.exams.questions.index', $exam)
            ->with('success', 'ÿ≥ÿ§ÿßŸÑ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }

    private function authorizeTeacherExam(Exam $exam): void
    {
        if ($exam->scope === 'free') {
            abort_unless(
                $exam->teacher_id === Auth::id(),
                403,
                'ÿ¥ŸÖÿß ÿßÿ¨ÿßÿ≤Ÿá ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ±ÿß ŸÜÿØÿßÿ±€åÿØ.'
            );
            return;
        }

        $exam->loadMissing('classroom');

        abort_unless(
            $exam->classroom && $exam->classroom->teacher_id === Auth::id(),
            403,
            'ÿ¥ŸÖÿß ÿßÿ¨ÿßÿ≤Ÿá ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ±ÿß ŸÜÿØÿßÿ±€åÿØ.'
        );
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 31. SubjectController.php

**Path:** `app/Http/Controllers/Teacher/SubjectController.php`  
**Size:** 906 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use App\Http\Controllers\Controller;
use Illuminate\Http\Request;

/**
 * ŸÖÿØ€åÿ±€åÿ™ ÿØÿ±ÿ≥‚ÄåŸáÿß (Subjects) ÿ™Ÿàÿ≥ÿ∑ ŸÖÿπŸÑŸÖ
 */
class SubjectController extends Controller
{
    /**
     * ŸÑ€åÿ≥ÿ™ ÿØÿ±ÿ≥‚ÄåŸáÿß
     * view: dashboard.teacher.subjects.index
     */
    public function index()
    {
        return view('dashboard.teacher.subjects.index');
    }

    /**
     * ÿ≥ÿßÿÆÿ™ ÿØÿ±ÿ≥ ÿ¨ÿØ€åÿØ
     * (ŸÅÿπŸÑÿßŸã ŸÖ€åŸÜ€åŸÖÿßŸÑÿõ ÿ®ÿπÿØÿßŸã ÿ®Ÿá ŸÖÿØŸÑ Subject ŸàÿµŸÑ ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ)
     */
    public function store(Request $request)
    {
        $request->validate([
            'title' => ['required', 'string', 'max:255'],
        ]);

        // TODO: ÿ∞ÿÆ€åÿ±Ÿá ÿØÿ± ŸÖÿØŸÑ Subject
        // Subject::create([...])

        return back()->with('success', 'ÿØÿ±ÿ≥ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ. (ŸÅÿπŸÑÿßŸã ÿ¢ÿ≤ŸÖÿß€åÿ¥€å)');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 32. TeacherClassController.php

**Path:** `app/Http/Controllers/Teacher/TeacherClassController.php`  
**Size:** 7,155 bytes  
**Modified:** 2025-12-07 05:36:55

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;
use App\Models\User;
use App\Http\Controllers\Controller;
use App\Models\Classroom;
use Illuminate\Http\Request;
use Illuminate\Support\Str;
use Illuminate\Support\Facades\Auth;
class TeacherClassController extends Controller
{
    public function index(Request $request)
    {
        $teacherId = Auth::id();

        $q = $request->q;
        $grade = $request->grade;
        $status = $request->status;
        $sort = $request->sort ?? 'latest';

        $classes = Classroom::query()
            ->where('teacher_id', $teacherId)
            ->when($q, function($query) use ($q){
                $query->where(function($qq) use ($q){
                    $qq->where('title', 'like', "%$q%")
                       ->orWhere('subject', 'like', "%$q%")
                       ->orWhere('join_code', 'like', "%$q%");
                });
            })
            ->when($grade && $grade !== 'all', fn($query)=>$query->where('grade', $grade))
            ->when($status && $status !== 'all', function($query) use ($status){
                $query->where('is_active', $status === 'active');
            })
            ->withCount('students')
            ->withCount('exams')
            ->when($sort === 'oldest', fn($query)=>$query->oldest())
            ->when($sort === 'students', fn($query)=>$query->orderByDesc('students_count'))
            ->when($sort === 'title_asc', fn($query)=>$query->orderBy('title'))
            ->when($sort === 'title_desc', fn($query)=>$query->orderByDesc('title'))
            ->when($sort === 'latest', fn($query)=>$query->latest())
            ->paginate(9)
            ->withQueryString();
 // ÿß⁄Øÿ± ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ AJAX ÿßÿ≥ÿ™
    if ($request->ajax() || $request->filled('ajax')) {
        return response()->json([
            'success' => true,
            'classrooms' => $classes->map(function($class) {
                return [
                    'id' => $class->id,
                    'title' => $class->title,
                    'subject' => $class->subject,
                    'grade' => $class->grade,
                    'students_count' => $class->students_count,
                    'exams_count' => $class->exams_count,
                    'is_active' => $class->is_active
                ];
            })
        ]);
    }
// ⁄©ÿØ ŸÇÿ®ŸÑ€å ÿ¥ŸÖÿß ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ view...
        return view('dashboard.teacher.classes.index', compact('classes'));
    }

    public function create()
    {
        return view('dashboard.teacher.classes.create');
    }

public function store(Request $request)
{
    $teacherId = Auth::id();

    $data = $request->validate([
        'title'       => 'required|string|max:255',
        'section_id'  => 'required|uuid|exists:sections,id',
        'grade_id'    => 'required|uuid|exists:grades,id',
        'branch_id'   => 'required|uuid|exists:branches,id',
        'field_id'    => 'required|uuid|exists:fields,id',
        'subfield_id' => 'required|uuid|exists:subfields,id',
        'subject_id'  => 'required|uuid|exists:subjects,id',
        'is_active'   => 'nullable|boolean',
        'metadata'    => 'nullable|string',
    ]);

    $classroom = Classroom::create([
        'id'          => (string) Str::uuid(),
        'teacher_id'  => $teacherId,
        'title'       => $data['title'],
        'section_id'  => $data['section_id'],
        'grade_id'    => $data['grade_id'],
        'branch_id'   => $data['branch_id'],
        'field_id'    => $data['field_id'],
        'subfield_id' => $data['subfield_id'],
        'subject_id'  => $data['subject_id'],
        'is_active'   => (bool)($data['is_active'] ?? true),
        'metadata'    => $data['metadata'] ?? null,
    ]);

    if ($request->ajax()) {
        return response()->json([
            'success' => true,
            'classroom' => [
                'id' => $classroom->id,
                'title' => $classroom->title,
            ]
        ]);
    }

    return redirect()
        ->route('teacher.classes.index')
        ->with('success', '⁄©ŸÑÿßÿ≥ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿß€åÿ¨ÿßÿØ ÿ¥ÿØ.');
}

    // üî• ÿ™ÿßÿ®ÿπ ÿ™ŸàŸÑ€åÿØ ⁄©ÿØ ÿπÿ∂Ÿà€åÿ™
    private function generateJoinCode()
    {
        do {
            $code = strtoupper(substr(md5(uniqid()), 0, 8));
        } while (Classroom::where('join_code', $code)->exists());

        return $code;
    }

    public function show(Classroom $class)
    {
        $this->authorizeTeacher($class);

        $class->load('students');

        return view('dashboard.teacher.classes.show', compact('class'));
    }

    public function edit(Classroom $class)
    {
        $this->authorizeTeacher($class);

        return view('dashboard.teacher.classes.edit', compact('class'));
    }

    public function update(Request $request, Classroom $class)
    {
        $this->authorizeTeacher($class);

        $data = $request->validate([
            'title' => ['required','string','max:255'],
            'subject' => ['nullable','string','max:255'],
            'grade' => ['nullable','string','max:50'],
            'description' => ['nullable','string'],
            'is_active' => ['nullable','boolean'],
        ]);

        $data['is_active'] = $request->boolean('is_active', true);

        $class->update($data);

        return redirect()->route('teacher.classes.index')
            ->with('success', '⁄©ŸÑÿßÿ≥ ÿ¢ŸæÿØ€åÿ™ ÿ¥ÿØ.');
    }
    // ÿ≠ÿ∞ŸÅ ⁄©ŸÑÿßÿ≥
    public function destroy(Classroom $class)
    {
        $this->authorizeTeacher($class);

        $class->delete();

        return back()->with('success', '⁄©ŸÑÿßÿ≥ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }
    // ŸÜŸÖÿß€åÿ¥ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ⁄©ŸÑÿßÿ≥
    public function students(Classroom $class)
    {
        $this->authorizeTeacher($class);
        $class->load('students');

        return view('dashboard.teacher.classes.students', compact('class'));
    }
    // ÿ®ÿ±ÿ±ÿ≥€å ÿß€åŸÜ⁄©Ÿá ŸÖÿπŸÑŸÖ ŸÖÿßŸÑ⁄© ⁄©ŸÑÿßÿ≥ ÿßÿ≥ÿ™
    public function addStudent(Request $request, Classroom $class)
    {
        $this->authorizeTeacher($class);

        $request->validate([
            'student' => ['required','string']
        ]);

        $key = $request->student;

        $student = User::query()
            ->where('email', $key)
            ->orWhere('username', $key)
            ->orWhere('phone', $key)
            ->first();

        if(!$student){
            return back()->with('error', 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ Ÿæ€åÿØÿß ŸÜÿ¥ÿØ.');
        }

        $class->students()->syncWithoutDetaching([$student->id]);

        return back()->with('success', 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.');
    }
    // ÿ≠ÿ∞ŸÅ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿßÿ≤ ⁄©ŸÑÿßÿ≥
    public function removeStudent(Classroom $class, User $student)
    {
        $this->authorizeTeacher($class);

        $class->students()->detach($student->id);

        return back()->with('success', 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿßÿ≤ ⁄©ŸÑÿßÿ≥ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }
    // ÿ®ÿ±ÿ±ÿ≥€å ÿß€åŸÜ⁄©Ÿá ŸÖÿπŸÑŸÖ ŸÖÿßŸÑ⁄© ⁄©ŸÑÿßÿ≥ ÿßÿ≥ÿ™
    private function authorizeTeacher(Classroom $class)
    {
        abort_unless($class->teacher_id ===Auth::id(), 403);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 33. TeacherExamController.php

**Path:** `app/Http/Controllers/Teacher/TeacherExamController.php`  
**Size:** 8,878 bytes  
**Modified:** 2025-12-08 09:22:50

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use App\Http\Controllers\Controller;
use App\Models\Section;
use App\Models\Grade;
use App\Models\Branch;
use App\Models\Field;
use App\Models\Subfield;
use App\Models\SubjectType;
use App\Models\Subject;
use App\Models\Exam;
use App\Models\Classroom;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Str;

class TeacherExamController extends Controller
{
    // ==========================================================
    // Exams CRUD (ÿß⁄Øÿ± ŸÇÿ®ŸÑÿßŸã ÿØÿßÿ¥ÿ™€åÿå ŸÖŸÜÿ∑ŸÇ ŸÇÿ®ŸÑ€å‚Äåÿßÿ™ ÿ±Ÿà ŸÜ⁄ØŸá ÿØÿßÿ±
    // ÿß€åŸÜÿ¨ÿß ŸÅŸÇÿ∑ ÿßÿ≥⁄©ŸÑÿ™ ÿßŸÖŸÜ ⁄Øÿ∞ÿßÿ¥ÿ™ŸÖ ÿ™ÿß route Ÿáÿß ÿÆÿ∑ÿß ŸÜÿØŸáŸÜÿØ)
    // ==========================================================
    public function index()
    {
        $teacherId = Auth::id();

        $exams = Exam::query()
            ->where('teacher_id', $teacherId)
            ->latest()
            ->paginate(10);

        return view('dashboard.teacher.exams.index', compact('exams'));
    }

    public function create(Request $request)
    {
        // ÿß⁄Øÿ± ⁄©ŸÑÿßÿ≥ ÿßŸÜÿ™ÿÆÿßÿ®€å ÿßÿ≤ ÿµŸÅÿ≠Ÿá ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß €åÿß ... ÿßŸàŸÖÿØŸá
        $selectedClassroomId = $request->get('classroom_id');

        return view('dashboard.teacher.exams.create', compact('selectedClassroomId'));
    }

    public function store(Request $request)
    {
        $teacherId = Auth::id();

        $data = $request->validate([
            'title'            => 'required|string|max:255',
            'description'      => 'nullable|string',
            'duration'         => 'required|integer|min:15|max:300',
            'exam_type'        => 'required|string',

            'classroom_id'     => 'nullable|uuid|exists:classrooms,id',

            'section_id'       => 'required|uuid|exists:sections,id',
            'grade_id'         => 'required|uuid|exists:grades,id',
            'branch_id'        => 'required|uuid|exists:branches,id',
            'field_id'         => 'required|uuid|exists:fields,id',
            'subfield_id'      => 'nullable|uuid|exists:subfields,id',
            'subject_type_id'  => 'nullable|uuid|exists:subject_types,id',
            'subjects'         => 'required|string', // JSON of UUIDs
            'is_active'        => 'nullable|boolean',
        ]);

        // ŸÖÿßŸÑ⁄©€åÿ™ ⁄©ŸÑÿßÿ≥ (ÿß⁄Øÿ± ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©ŸÑÿßÿ≥€å ÿßÿ≥ÿ™)
        if (!empty($data['classroom_id'])) {
            $class = Classroom::findOrFail($data['classroom_id']);
            abort_unless($class->teacher_id === $teacherId, 403);
        }

        $exam = Exam::create([
            'id'              => (string) Str::uuid(),
            'teacher_id'      => $teacherId,
            'classroom_id'    => $data['classroom_id'] ?? null,
            'title'           => $data['title'],
            'description'     => $data['description'] ?? null,
            'duration'        => $data['duration'],
            'exam_type'       => $data['exam_type'],
            'section_id'      => $data['section_id'],
            'grade_id'        => $data['grade_id'],
            'branch_id'       => $data['branch_id'],
            'field_id'        => $data['field_id'],
            'subfield_id'     => $data['subfield_id'] ?? null,
            'subject_type_id' => $data['subject_type_id'] ?? null,
            'subjects'        => $data['subjects'],
            'is_active'       => (bool)($data['is_active'] ?? true),
        ]);

        return redirect()
            ->route('teacher.exams.show', $exam->id)
            ->with('success', 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿß€åÿ¨ÿßÿØ ÿ¥ÿØ.');
    }

    public function show(Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);
        return view('dashboard.teacher.exams.show', compact('exam'));
    }

    public function edit(Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);
        return view('dashboard.teacher.exams.edit', compact('exam'));
    }

    public function update(Request $request, Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);

        $data = $request->validate([
            'title'       => 'required|string|max:255',
            'description' => 'nullable|string',
            'duration'    => 'required|integer|min:15|max:300',
            'is_active'   => 'nullable|boolean',
        ]);

        $exam->update([
            'title'       => $data['title'],
            'description' => $data['description'] ?? null,
            'duration'    => $data['duration'],
            'is_active'   => (bool)($data['is_active'] ?? true),
        ]);

        return back()->with('success', 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }

    public function destroy(Exam $exam)
    {
        abort_unless($exam->teacher_id === Auth::id(), 403);
        $exam->delete();
        return back()->with('success', 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.');
    }

    // ==========================================================
    // ‚úÖ AJAX Taxonomy Endpoints
    // ==========================================================

    // 1) Sections
    public function sections()
    {
        $sections = Section::where('is_active', 1)
            ->orderBy('sort_order')
            ->get(['id','name_fa','slug']);

        return response()->json(['sections' => $sections]);
    }

    // 2) Grades (filter by section_id)
    public function grades(Request $request)
    {
        $q = Grade::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('section_id')) {
            $q->where('section_id', $request->section_id);
        }

        $grades = $q->get(['id','name_fa','slug','section_id']);

        return response()->json(['grades' => $grades]);
    }

    // 3) Branches (filter by section_id AND/OR grade_id)
    public function branches(Request $request)
    {
        $q = Branch::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('section_id')) {
            $q->where('section_id', $request->section_id);
        }

        // ÿß⁄Øÿ± ÿØÿ± DB ÿ¥ÿßÿÆŸá‚ÄåŸáÿß ÿ®Ÿá Ÿæÿß€åŸá ŸáŸÖ ŸàÿµŸÑ ÿ®ÿßÿ¥ŸÜÿØÿå ÿß€åŸÜ ŸÅ€åŸÑÿ™ÿ± ÿ±ÿß ŸÅÿπÿßŸÑ ŸÖ€å‚Äå⁄©ŸÜÿØ
        if ($request->filled('grade_id') && Schema::hasColumn('branches', 'grade_id')) {
            $q->where('grade_id', $request->grade_id);
        }

        $branches = $q->get(['id','name_fa','slug','section_id']);

        return response()->json(['branches' => $branches]);
    }

    // 4) Fields (filter by branch_id)
    public function fields(Request $request)
    {
        $q = Field::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('branch_id')) {
            $q->where('branch_id', $request->branch_id);
        }

        $fields = $q->get(['id','name_fa','slug','branch_id']);

        return response()->json(['fields' => $fields]);
    }

    // 5) Subfields (filter by field_id)
    public function subfields(Request $request)
    {
        $q = Subfield::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        if ($request->filled('field_id')) {
            $q->where('field_id', $request->field_id);
        }

        $subfields = $q->get(['id','name_fa','slug','field_id']);

        return response()->json(['subfields' => $subfields]);
    }

    // 6) Subject Types (optionally filter by section/grade/branch/field/subfield if columns exist on DB)
    public function subjectTypes(Request $request)
    {
        $q = SubjectType::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        // ÿß⁄Øÿ± subject_types ÿ¨ÿØŸàŸÑŸê ÿ±ÿ®ÿ∑€å ŸÜÿØÿßÿ±ÿØÿå ÿß€åŸÜŸáÿß ÿ®€å‚Äåÿßÿ´ÿ±ŸÜÿØ
        foreach (['section_id','grade_id','branch_id','field_id','subfield_id'] as $col) {
            if ($request->filled($col) && \Schema::hasColumn('subject_types', $col)) {
                $q->where($col, $request->$col);
            }
        }

        $subjectTypes = $q->get(['id','name_fa','slug','coefficient','weight_percent','default_question_count']);

        return response()->json(['subjectTypes' => $subjectTypes]);
    }

    // 7) Subjects (filter by grade/branch/field/subfield/subject_type)
    public function subjects(Request $request)
    {
        $q = Subject::query()
            ->where('is_active', 1)
            ->orderBy('sort_order');

        foreach (['section_id','grade_id','branch_id','field_id','subfield_id','subject_type_id'] as $col) {
            if ($request->filled($col)) {
                $q->where($col, $request->$col);
            }
        }

        $subjects = $q->get(['id','title_fa','slug','grade_id','branch_id','field_id','subfield_id','subject_type_id']);

        return response()->json(['subjects' => $subjects]);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 34. TeacherStudentController.php

**Path:** `app/Http/Controllers/Teacher/TeacherStudentController.php`  
**Size:** 12,938 bytes  
**Modified:** 2025-12-06 11:49:52

----------------------------------------------------------------------

<?php

namespace App\Http\Controllers\Teacher;

use App\Http\Controllers\Controller;
use App\Models\Attempt;
use App\Models\Classroom;
use App\Models\User;
use Illuminate\Http\Request;
use App\Models\AttemptAnswer;

class TeacherStudentController extends Controller
{
    /**
     * ŸÜŸÖÿß€åÿ¥ ŸÑ€åÿ≥ÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß€å ŸÖÿπŸÑŸÖ
     */
    public function index(Request $request)
    {
        $teacher = auth()->user();

        /*
        |--------------------------------------------------------------------------
        | NEW LOGIC (stable)
        |--------------------------------------------------------------------------
        | classrooms() ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿßÿ≥ÿ™ (pivot classroom_student)
        | ÿ®ÿ±ÿß€å ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿπŸÑŸÖ ÿ®ÿß€åÿØ ÿßÿ≤ teachingClassrooms() ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åŸÖ.
        */

        $classroomsQuery = $teacher->teachingClassrooms();

        // ŸÅ€åŸÑÿ™ÿ± ⁄©ŸÑÿßÿ≥ (ÿßÿÆÿ™€åÿßÿ±€å)
        if ($request->filled('classroom_id')) {
            $classroomsQuery->where('id', $request->classroom_id);
        }

        $classrooms = $classroomsQuery->with('students')->get();

        // ‚úÖ €å⁄©‚Äåÿ®ÿßÿ± ÿ¢€å‚ÄåÿØ€å ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿπŸÑŸÖ ÿ±ÿß ÿ®⁄Ø€åÿ± (ÿ®ÿ±ÿß€å performance)
        $teacherClassroomIds = $teacher->teachingClassrooms()->pluck('id');

        // ÿ¨ŸÖÿπ ⁄©ÿ±ÿØŸÜ ŸáŸÖŸá ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ŸÖÿ™ÿπŸÑŸÇ ÿ®Ÿá ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿπŸÑŸÖ
        $studentsQuery = User::query()
            // ‚úÖ DB ÿ¨ÿØ€åÿØ: ŸÜŸÇÿ¥ ÿßÿ≤ pivot role_user
            ->whereHas('roles', fn($q) => $q->where('slug', 'student'))
            ->whereHas('classrooms', function ($q) use ($teacherClassroomIds) {
                $q->whereIn('classrooms.id', $teacherClassroomIds);
            })
            ->with(['studentProfile', 'classrooms']);

        // ÿ¨ÿ≥ÿ™ÿ¨Ÿà
        if ($request->filled('search')) {
            $search = $request->search;
            $studentsQuery->where(function ($q) use ($search) {
                $q->where('phone', 'like', "%{$search}%");
            });
        }

        $students = $studentsQuery->paginate(10);

        return view('dashboard.teacher.students.index', compact(
            'classrooms', 'students'
        ));

        /*
        |--------------------------------------------------------------------------
        | OLD CODE (kept for rollback)
        |--------------------------------------------------------------------------
        | $classrooms = $teacher->classrooms()
        |     ->with('students')
        |     ->get();
        |
        | $students = $teacher->students()
        |     ->with(['studentProfile', 'classrooms'])
        |     ->paginate(10);
        |
        | ÿß€åŸÜ ŸÖŸÜÿ∑ŸÇ ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá pivot ŸÇÿ®ŸÑ€å classroom_user ÿ®ŸàÿØ.
        */
    }

    /**
     * Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿßÿ≤ ÿØ€åÿØ ŸÖÿπŸÑŸÖ
     * ----------------------------------------
     * ‚úÖ FIXES:
     * 1) ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿ¥ÿ™ÿ±⁄© ŸÅŸÇÿ∑ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ Ÿáÿ≥ÿ™ŸÜÿØ
     * 2) AttemptŸáÿß ŸÅŸÇÿ∑ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ Ÿáÿ≥ÿ™ŸÜÿØ
     * 3) stats ÿ®ÿß ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß€å ŸàÿßŸÇÿπ€å attempts ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖ€å‚Äåÿ¥ŸàÿØ
     */
    public function show(User $student)
    {
        $teacher = auth()->user();

        // ÿßŸÖŸÜ€åÿ™: ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ®ÿß€åÿØ ÿπÿ∂Ÿà €å⁄©€å ÿßÿ≤ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ ÿ®ÿßÿ¥ÿØ
        $allowed = $teacher->teachingClassrooms()
            ->whereHas('students', fn ($q) => $q->where('users.id', $student->id))
            ->exists();

        abort_unless($allowed, 403);

        // ‚úÖ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿ¥ÿ™ÿ±⁄© ŸÖÿπŸÑŸÖ Ÿà ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
        $sharedClassrooms = $teacher->teachingClassrooms()
            ->whereHas('students', fn($q) => $q->where('users.id', $student->id))
            ->get();

        // ‚úÖ Attempt Ÿáÿß€å ÿß€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ
        $attempts = Attempt::where('student_id', $student->id)
            ->whereHas('exam', fn($q) => $q->where('teacher_id', $teacher->id))
            ->with('exam')
            ->latest('submitted_at')
            ->get();

        $latestAttempts = $attempts->take(5);

        // ‚úÖ ÿ¢ŸÖÿßÿ± ŸàÿßŸÇÿπ€å (ÿ®ÿß ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß€å ŸÖŸàÿ¨ŸàÿØ)
        $stats = [
            'attempts_count' => $attempts->count(),
            'avg_percent'    => round($attempts->avg('percent') ?? 0, 2),
            'avg_score'      => round($attempts->avg('score_obtained') ?? 0, 2),
        ];

        return view('dashboard.teacher.students.show', compact(
            'student', 'sharedClassrooms', 'attempts', 'latestAttempts', 'stats'
        ));

        /*
        |--------------------------------------------------------------------------
        | OLD CODE (kept)
        |--------------------------------------------------------------------------
        | $classrooms = $student->classrooms()->get();
        |
        | $latestAttempts = Attempt::where('student_id', $student->id)
        |     ->with('exam')
        |     ->latest()
        |     ->take(5)
        |     ->get();
        |
        | $statsQuery = Attempt::where('student_id', $student->id)
        |     ->whereNotNull('finished_at');
        |
        | $stats = [
        |     'attempts_count' => (clone $statsQuery)->count(),
        |     'avg_score'      => round((clone $statsQuery)->avg('score') ?? 0, 2), // ‚ùå score ŸÜÿØÿßÿ±€åŸÖ
        |     'avg_percent'    => round((clone $statsQuery)->avg('percent') ?? 0, 2),
        | ];
        |
        | return view(... compact('student','classrooms','latestAttempts','stats'));
        */
    }

    /**
     * ŸÑ€åÿ≥ÿ™ AttemptŸáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
     * ----------------------------------------
     * ‚úÖ FIX: ŸÅŸÇÿ∑ AttemptŸáÿß€å ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ
     */
    public function attempts(User $student)
    {
        $teacher = auth()->user();

        $allowed = $teacher->teachingClassrooms()
            ->whereHas('students', fn ($q) => $q->where('users.id', $student->id))
            ->exists();

        abort_unless($allowed, 403);

        $attempts = Attempt::where('student_id', $student->id)
            ->whereHas('exam', fn($q) => $q->where('teacher_id', $teacher->id))
            ->with('exam')
            ->latest('submitted_at')
            ->paginate(10);

        return view('dashboard.teacher.students.attempts', compact('student', 'attempts'));

        /*
        |--------------------------------------------------------------------------
        | OLD CODE (kept)
        |--------------------------------------------------------------------------
        | $attempts = Attempt::where('student_id', $student->id)
        |     ->with('exam')
        |     ->latest()
        |     ->paginate(10);
        */
    }

    /**
     * ÿ¨ÿ≤ÿ¶€åÿßÿ™ Attempt ÿ®ÿ±ÿß€å ÿ™ÿµÿ≠€åÿ≠
     * ----------------------------------------
     * ‚úÖ FIX: ÿßŸÖŸÜ€åÿ™ + ŸÑŸàÿØ ÿ±Ÿàÿßÿ®ÿ∑ ŸÑÿßÿ≤ŸÖ ÿ®ÿ±ÿß€å teacher/attempts/show
     */
    public function attemptShow(Attempt $attempt)
    {
        $teacher = auth()->user();

        // ÿßŸÖŸÜ€åÿ™ ÿØŸÇ€åŸÇ‚Äåÿ™ÿ±: Attempt ÿ®ÿß€åÿØ ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ ÿ®ÿßÿ¥ÿØ
        $allowed = $attempt->exam
            && $attempt->exam->teacher_id == $teacher->id;

        abort_unless($allowed, 403);

        $attempt->load(['student', 'exam.questions', 'answers.question']);

        return view('dashboard.teacher.attempts.show', compact('attempt'));

        /*
        |--------------------------------------------------------------------------
        | OLD SECURITY CHECK (kept)
        |--------------------------------------------------------------------------
        | $allowed = $teacher->teachingClassrooms()
        |   ->whereHas('students', fn ($q) => $q->where('users.id', $attempt->student_id))
        |   ->exists();
        */
    }

    /**
     * ÿ´ÿ®ÿ™ ŸÜŸÖÿ±Ÿá ÿ™ÿ¥ÿ±€åÿ≠€å ÿ®ÿ±ÿß€å Attempt
     * ----------------------------------------
     * ‚úÖ FIXES:
     * - ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ score_awarded Ÿà graded_at
     * - ÿ¨ŸÖÿπ ŸÜŸÖÿ±Ÿá ÿ®ÿß score_awarded
     * - status: submitted ‚Üí graded
     */
    public function gradeEssay(Request $request, Attempt $attempt)
    {
        $teacher = auth()->user();

        // Attempt ÿ®ÿß€åÿØ ŸÖÿ™ÿπŸÑŸÇ ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ ÿ®ÿßÿ¥ÿØ
        $allowed = $attempt->exam
            && $attempt->exam->teacher_id == $teacher->id;

        abort_unless($allowed, 403);

        $data = $request->validate([
            'scores' => ['required', 'array'],
            'scores.*' => ['nullable', 'numeric', 'min:0'],
            'feedbacks' => ['nullable', 'array'],
            'feedbacks.*' => ['nullable', 'string'],
        ]);

        foreach ($data['scores'] as $answerId => $score) {

            $answer = $attempt->answers()
                ->where('id', $answerId)
                ->with('question')
                ->first();

            if ($answer && $answer->question->type === 'essay') {

                $max = (int)($answer->question->score ?? 0);
                $finalScore = min(max((int)($score ?? 0), 0), $max);

                $answer->update([
                    'score_awarded'    => $finalScore,
                    'teacher_feedback' => $data['feedbacks'][$answerId] ?? $answer->teacher_feedback,
                    'graded_by'        => $teacher->id,
                    'graded_at'        => now(),
                ]);
            }
        }

        // ŸÖÿ≠ÿßÿ≥ÿ®Ÿá ŸÖÿ¨ÿØÿØ ŸÜŸÖÿ±Ÿá ŸÜŸáÿß€å€å
        $attempt->refresh();

        $attempt->score_obtained = $attempt->answers()->sum('score_awarded');

        // ÿß⁄Øÿ± score_total ÿÆÿßŸÑ€å ÿ®ŸàÿØÿå ÿßÿ≤ ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≠ÿ≥ÿßÿ® ⁄©ŸÜ
        if (!$attempt->score_total) {
            $attempt->score_total = $attempt->exam->questions()->sum('score');
        }

        $attempt->percent = $attempt->score_total > 0
            ? round(($attempt->score_obtained / $attempt->score_total) * 100, 2)
            : 0;

        // ÿ¢€åÿß ŸáŸÜŸàÿ≤ essay ÿ®ÿØŸàŸÜ ÿ™ÿµÿ≠€åÿ≠ ÿØÿßÿ±€åŸÖÿü
        $hasUngradedEssay = $attempt->answers()
            ->whereHas('question', fn($q) => $q->where('type', 'essay'))
            ->whereNull('graded_at')
            ->exists();

        $attempt->status = $hasUngradedEssay ? 'submitted' : 'graded';

        if (!$hasUngradedEssay && !$attempt->finished_at) {
            $attempt->finished_at = now();
        }

        $attempt->save();

        return redirect()
            ->back()
            ->with('success', 'ŸÜŸÖÿ±Ÿá‚ÄåŸáÿß€å ÿ™ÿ¥ÿ±€åÿ≠€å ÿ´ÿ®ÿ™ ÿ¥ÿØ Ÿà Attempt ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }

    /**
     * Grade single essay answer (route: teacher.attempts.answers.grade)
     */
    public function gradeEssayAnswer(Request $request, Attempt $attempt, AttemptAnswer $answer)
    {
        $teacher = auth()->user();

        // ÿßŸÖŸÜ€åÿ™: ÿß€åŸÜ Attempt ŸÖÿ™ÿπŸÑŸÇ ÿ®Ÿá ŸÖÿπŸÑŸÖ ÿ®ÿßÿ¥ÿØ
        abort_unless($attempt->exam && $attempt->exam->teacher_id == $teacher->id, 403);

        // ÿßŸÖŸÜ€åÿ™: answer ÿ®ÿß€åÿØ ŸÖÿ™ÿπŸÑŸÇ ÿ®Ÿá ŸáŸÖ€åŸÜ attempt ÿ®ÿßÿ¥ÿØ
        abort_unless($answer->attempt_id == $attempt->id, 403);

        $data = $request->validate([
            'score_awarded'    => ['required','numeric','min:0'],
            'teacher_feedback' => ['nullable','string'],
        ]);

        // ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å essay
        abort_unless($answer->question && $answer->question->type === 'essay', 403);

        $max = (int)($answer->question->score ?? 0);
        $finalScore = min(max((int)$data['score_awarded'], 0), $max);

        $answer->update([
            'score_awarded'    => $finalScore,
            'teacher_feedback' => $data['teacher_feedback'] ?? $answer->teacher_feedback,
            'graded_by'        => $teacher->id,
            'graded_at'        => now(),
            'is_correct'       => null,
        ]);

        // ÿ¢ŸæÿØ€åÿ™ Attempt ÿ®ÿπÿØ ÿßÿ≤ Ÿáÿ± ÿ™ÿµÿ≠€åÿ≠
        $attempt->refresh();

        $attempt->score_obtained = $attempt->answers()->sum('score_awarded');

        if (!$attempt->score_total) {
            $attempt->score_total = $attempt->exam->questions()->sum('score');
        }

        $attempt->percent = $attempt->score_total > 0
            ? round(($attempt->score_obtained / $attempt->score_total) * 100, 2)
            : 0;

        $hasUngradedEssay = $attempt->answers()
            ->whereHas('question', fn($q) => $q->where('type','essay'))
            ->whereNull('graded_at')
            ->exists();

        $attempt->status = $hasUngradedEssay ? 'submitted' : 'graded';

        if (!$hasUngradedEssay && !$attempt->finished_at) {
            $attempt->finished_at = now();
        }

        $attempt->save();

        return back()->with('success', 'ŸÜŸÖÿ±Ÿá ÿ™ÿ¥ÿ±€åÿ≠€å ÿ´ÿ®ÿ™ ÿ¥ÿØ Ÿà ŸÜÿ™€åÿ¨Ÿá ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 35. AcademicAssessment.php

**Path:** `app/Models/AcademicAssessment.php`  
**Size:** 463 bytes  
**Modified:** 2025-12-06 10:29:47

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AcademicAssessment extends Model
{
    use HasFactory;

    protected $table = 'academic_assessments';

    protected $fillable = ['student_id', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'assessment_type', 'score_percent', 'mastery_level', 'weaknesses', 'strengths', 'taken_at'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 36. AiAgent.php

**Path:** `app/Models/AiAgent.php`  
**Size:** 347 bytes  
**Modified:** 2025-12-06 10:29:51

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiAgent extends Model
{
    use HasFactory;

    protected $table = 'ai_agents';

    protected $fillable = ['slug', 'name_fa', 'role_type', 'model_provider', 'model_name', 'system_prompt', 'config', 'is_active'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 37. AiArtifact.php

**Path:** `app/Models/AiArtifact.php`  
**Size:** 351 bytes  
**Modified:** 2025-12-06 10:29:55

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiArtifact extends Model
{
    use HasFactory;

    protected $table = 'ai_artifacts';

    protected $fillable = ['session_id', 'artifact_type', 'title', 'body', 'linked_table', 'linked_id', 'status', 'reviewer_id'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 38. AiFeedback.php

**Path:** `app/Models/AiFeedback.php`  
**Size:** 314 bytes  
**Modified:** 2025-12-06 10:29:59

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiFeedback extends Model
{
    use HasFactory;

    protected $table = 'ai_feedback';

    protected $fillable = ['session_id', 'message_id', 'user_id', 'rating', 'feedback_text'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 39. AiMessage.php

**Path:** `app/Models/AiMessage.php`  
**Size:** 330 bytes  
**Modified:** 2025-12-06 10:30:03

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiMessage extends Model
{
    use HasFactory;

    protected $table = 'ai_messages';

    protected $fillable = ['session_id', 'sender_type', 'content', 'tokens_in', 'tokens_out', 'safety_flags'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 40. AiSession.php

**Path:** `app/Models/AiSession.php`  
**Size:** 446 bytes  
**Modified:** 2025-12-06 10:30:07

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class AiSession extends Model
{
    use HasFactory;

    protected $table = 'ai_sessions';

    protected $fillable = ['ai_agent_id', 'user_id', 'context_type', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'classroom_id', 'exam_id', 'started_at', 'ended_at', 'metadata'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 41. Attempt.php

**Path:** `app/Models/Attempt.php`  
**Size:** 4,230 bytes  
**Modified:** 2025-12-06 11:53:25

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Attempt extends Model
{
    /**
     * ‚úÖ DB ÿ¨ÿØ€åÿØ: exam_attempts
     */
    protected $table = 'exam_attempts';

    /**
     * Fillable
     * ------------------------------------------------------------
     * ‚úÖ ÿ¥ÿßŸÖŸÑ ŸÅ€åŸÑÿØŸáÿß€å ŸàÿßŸÇÿπ€å DB ÿ¨ÿØ€åÿØ + ŸÅ€åŸÑÿØŸáÿß€å legacy
     * ÿ™ÿß ⁄©ÿØŸáÿß€å ŸÇÿ®ŸÑ€å ŸÜÿ™ÿ±⁄©ŸÜÿØ.
     */
    protected $fillable = [
        'exam_id',
        'student_id',

        // ‚úÖ DB ÿ¨ÿØ€åÿØ
        'status',
        'started_at',
        'finished_at',
        'total_score',

        // ---------------- legacy (ÿß⁄Øÿ± ÿØÿ± DB ŸÜÿ®ŸàÿØŸÜÿØÿå ŸÜÿßÿØ€åÿØŸá ⁄Øÿ±ŸÅÿ™Ÿá ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ)
        'submitted_at',
        'answers',
        'percent',
        'score_total',
        'score_obtained',
        'meta',
    ];

    /**
     * Casts
     * ------------------------------------------------------------
     */
    protected $casts = [
        // legacy
        'answers'       => 'array',
        'meta'          => 'array',

        // ‚úÖ DB ÿ¨ÿØ€åÿØ
        'started_at'    => 'datetime',
        'finished_at'   => 'datetime',

        'total_score'   => 'decimal:2',

        // legacy
        'submitted_at'  => 'datetime',
        'percent'       => 'decimal:2',
        'score_total'   => 'decimal:2',
        'score_obtained'=> 'decimal:2',
    ];

    /**
     * Relationships
     * ------------------------------------------------------------
     */
    public function exam(): BelongsTo
    {
        return $this->belongsTo(Exam::class);
    }

    public function student(): BelongsTo
    {
        return $this->belongsTo(User::class, 'student_id');
    }

    public function answers(): HasMany
    {
        return $this->hasMany(AttemptAnswer::class, 'attempt_id');
    }

    // ==========================================================
    // Compatibility Accessors (for old code)
    // ==========================================================

    /**
     * ‚úÖ old: submitted_at
     * new DB doesn't have it, so we infer:
     * - if status != in_progress => treat finished_at as submitted_at
     */
    public function getSubmittedAtAttribute()
    {
        if ($this->attributes['submitted_at'] ?? null) {
            return $this->attributes['submitted_at'];
        }

        return $this->finished_at;
    }

    /**
     * ‚úÖ old: score_obtained
     * new: total_score (but total_score in DB is more like final score)
     * we map score_obtained -> total_score if missing.
     */
    public function getScoreObtainedAttribute()
    {
        return $this->attributes['score_obtained']
            ?? $this->attributes['total_score']
            ?? 0;
    }

    /**
     * ‚úÖ old: score_total
     * no direct column in DB new.
     * if exists in attributes use it, else compute from exam questions.
     */
    public function getScoreTotalAttribute()
    {
        if (isset($this->attributes['score_total'])) {
            return $this->attributes['score_total'];
        }

        return $this->exam
            ? (float) $this->exam->questions()->sum('score')
            : 0;
    }

    /**
     * ‚úÖ old: percent
     * compute percent dynamically if not stored.
     */
    public function getPercentAttribute()
    {
        if (isset($this->attributes['percent'])) {
            return (float) $this->attributes['percent'];
        }

        $obtained = (float) $this->score_obtained;
        $total    = (float) $this->score_total;

        return $total > 0
            ? round(($obtained / $total) * 100, 2)
            : 0;
    }

    // ==========================================================
    // Helpers
    // ==========================================================

    /**
     * ‚úÖ ÿ™ÿ¥ÿÆ€åÿµ ÿß€åŸÜ⁄©Ÿá Attempt ŸÜŸáÿß€å€å ÿßÿ≥ÿ™ €åÿß ŸÜŸá
     * ÿ®ÿ±ÿß€å ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖÿ¨ÿØÿØ
     */
    public function isFinal(): bool
    {
        return !is_null($this->finished_at)
            || in_array($this->status, ['submitted', 'graded'])
            || !is_null($this->submitted_at);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 42. AttemptAnswer.php

**Path:** `app/Models/AttemptAnswer.php`  
**Size:** 2,415 bytes  
**Modified:** 2025-12-06 11:53:39

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class AttemptAnswer extends Model
{
    use HasFactory;

    /**
     * ‚úÖ DB ÿ¨ÿØ€åÿØ
     */
    protected $table = 'attempt_answers';

    /**
     * Fillable
     * ------------------------------------------------------------
     * ‚úÖ ŸÅ€åŸÑÿØŸáÿß€å ŸàÿßŸÇÿπ€å DB ÿ¨ÿØ€åÿØ + legacy
     */
    protected $fillable = [
        'attempt_id',
        'question_id',

        // ‚úÖ DB ÿ¨ÿØ€åÿØ
        'answer',
        'is_correct',
        'score',

        // ---------------- legacy (ŸÅÿπŸÑÿßŸã ÿØÿ± DB ŸÜ€åÿ≥ÿ™ŸÜÿØ)
        'score_awarded',
        'teacher_feedback',
        'graded_by',
        'graded_at',
    ];

    /**
     * Casts
     * ------------------------------------------------------------
     */
    protected $casts = [
        // ÿØÿ± SQL ŸÜŸàÿπ longtext ÿ®ŸàÿØ Ÿà json_valid ÿØÿßÿ¥ÿ™€åŸÖ
        'answer'        => 'array',  // ÿ®Ÿáÿ™ÿ± ÿßÿ≤ json ÿ®ÿ±ÿß€å ⁄©ÿßÿ± ÿ®ÿß mixed
        'is_correct'    => 'boolean',

        // ‚úÖ DB ÿ¨ÿØ€åÿØ
        'score'         => 'decimal:2',

        // legacy
        'score_awarded' => 'decimal:2',
        'graded_at'     => 'datetime',
    ];

    // ==========================================================
    // Relationships
    // ==========================================================

    public function attempt(): BelongsTo
    {
        return $this->belongsTo(Attempt::class, 'attempt_id');
    }

    public function question(): BelongsTo
    {
        return $this->belongsTo(Question::class, 'question_id');
    }

    // ==========================================================
    // Compatibility Accessors (for old code)
    // ==========================================================

    /**
     * ‚úÖ old: score_awarded
     * new DB: score
     */
    public function getScoreAwardedAttribute()
    {
        return $this->attributes['score_awarded']
            ?? $this->attributes['score']
            ?? 0;
    }

    /**
     * ‚úÖ ÿß⁄Øÿ± ⁄©ÿØ ŸÇÿØ€åŸÖ€å score_awarded ÿ≥ÿ™ ⁄©ÿ±ÿØÿå
     * ŸÖÿß ÿ±Ÿà€å score ÿ∞ÿÆ€åÿ±Ÿá ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ
     */
    public function setScoreAwardedAttribute($value)
    {
        $this->attributes['score'] = $value;
        $this->attributes['score_awarded'] = $value; // legacy safe
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 43. Branch.php

**Path:** `app/Models/Branch.php`  
**Size:** 931 bytes  
**Modified:** 2025-12-07 16:27:25

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Branch extends Model
{
    use HasFactory;

    protected $table = 'branches';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'section_id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // ÿ±Ÿàÿßÿ®ÿ∑
    public function section(){ return $this->belongsTo(\App\Models\Section::class); }
    public function fields(){ return $this->hasMany(\App\Models\Field::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 44. Classroom.php

**Path:** `app/Models/Classroom.php`  
**Size:** 4,357 bytes  
**Modified:** 2025-12-06 22:27:48

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Str;

class Classroom extends Model
{
    use HasFactory;

    protected $table = 'classrooms';

    // ‚úÖ ⁄ÜŸàŸÜ PK ÿ¨ÿØŸàŸÑ UUID ÿßÿ≥ÿ™
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'teacher_id',
        'title',
        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_type_id',
        'metadata',
        'is_active',
        'classroom_type',
        'join_code',
        'description',
    ];

    protected $casts = [
        'is_active'  => 'boolean',
        'metadata'   => 'array',
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
    ];

    // ==========================================================
    // Relationships
    // ==========================================================

    /** Teacher who owns the classroom */
    public function teacher(): BelongsTo
    {
        return $this->belongsTo(User::class, 'teacher_id');
    }

    /**
     * All classroom members (students + teachers)
     * pivot: classroom_user(classroom_id, user_id)
     */
    public function users(): BelongsToMany
    {
        return $this->belongsToMany(
            User::class,
            'classroom_user',
            'classroom_id',
            'user_id'
        );
        // ‚úÖ no withTimestamps() -> pivot has no timestamps in DB
    }

    /**
     * Backward-compatible alias (some old code may call members())
     */
    public function members(): BelongsToMany
    {
        return $this->users();
    }

    /**
     * Classroom students
     * Since classroom_user has no role column,
     * we filter user roles through role_user pivot.
     */
    public function students(): BelongsToMany
    {
        return $this->users()
            ->whereHas('roles', fn ($q) => $q->where('slug', 'student'));
    }

    /**
     * Classroom teachers (future multi-teacher support)
     */
    public function teachers(): BelongsToMany
    {
        return $this->users()
            ->whereHas('roles', fn ($q) => $q->where('slug', 'teacher'));
    }

    /** Exams belonging to this classroom */
    public function exams(): HasMany
    {
        return $this->hasMany(Exam::class, 'classroom_id');
    }

    /**
     * Subjects attached to this classroom
     * pivot: classroom_subject(classroom_id, subject_id)
     */
    public function subjects(): BelongsToMany
    {
        return $this->belongsToMany(
            Subject::class,
            'classroom_subject',
            'classroom_id',
            'subject_id'
        );
        // ‚úÖ no withTimestamps() -> pivot has no timestamps
    }

    // --- Taxonomy relations ---

    public function section(): BelongsTo
    {
        return $this->belongsTo(Section::class, 'section_id');
    }

    public function grade(): BelongsTo
    {
        return $this->belongsTo(Grade::class, 'grade_id');
    }

    public function branch(): BelongsTo
    {
        return $this->belongsTo(Branch::class, 'branch_id');
    }

    public function field(): BelongsTo
    {
        return $this->belongsTo(Field::class, 'field_id');
    }

    public function subfield(): BelongsTo
    {
        return $this->belongsTo(Subfield::class, 'subfield_id');
    }

    public function subjectType(): BelongsTo
    {
        return $this->belongsTo(SubjectType::class, 'subject_type_id');
    }

    // ==========================================================
    // Boot / Mutators
    // ==========================================================
    protected static function booted()
    {
        static::creating(function ($classroom) {

            // ‚úÖ ÿ≥ÿßÿÆÿ™ ÿÆŸàÿØ⁄©ÿßÿ± UUID ÿ®ÿ±ÿß€å id
            if (empty($classroom->id)) {
                $classroom->id = (string) Str::uuid();
            }

            if (empty($classroom->join_code)) {
                // join_code is unique in DB
                $classroom->join_code = strtoupper(str()->random(6));
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 45. Content.php

**Path:** `app/Models/Content.php`  
**Size:** 475 bytes  
**Modified:** 2025-12-06 10:30:27

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Content extends Model
{
    use HasFactory;

    protected $table = 'contents';

    protected $fillable = ['creator_id', 'type', 'title', 'description', 'file_path', 'url', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'access_level', 'classroom_id', 'ai_generated_by_session_id', 'is_active'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 46. CounselingTask.php

**Path:** `app/Models/CounselingTask.php`  
**Size:** 330 bytes  
**Modified:** 2025-12-06 10:30:31

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class CounselingTask extends Model
{
    use HasFactory;

    protected $table = 'counseling_tasks';

    protected $fillable = ['title', 'description', 'task_type', 'recommended_minutes', 'is_active'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 47. CounselorProfile.php

**Path:** `app/Models/CounselorProfile.php`  
**Size:** 323 bytes  
**Modified:** 2025-12-06 10:30:35

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class CounselorProfile extends Model
{
    use HasFactory;

    protected $table = 'counselor_profiles';

    protected $fillable = ['user_id', 'focus_area', 'main_section_id', 'main_branch_id'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 48. Exam.php

**Path:** `app/Models/Exam.php`  
**Size:** 4,586 bytes  
**Modified:** 2025-12-06 21:28:47

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Support\Str;

class Exam extends Model
{
    use HasFactory;

    protected $table = 'exams';

    // ‚úÖ UUID PK
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'teacher_id',
        'classroom_id',

        'exam_type',
        'title',
        'description',
        'duration_minutes',

        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_type_id',

        'total_questions',
        'coefficients',

        'start_at',
        'end_at',

        'shuffle_questions',
        'shuffle_options',
        'ai_assisted',
        'ai_session_id',

        'is_active',
        'is_published',
    ];

    protected $casts = [
        'duration_minutes'  => 'integer',
        'total_questions'   => 'integer',

        'coefficients'      => 'array',

        'shuffle_questions' => 'boolean',
        'shuffle_options'   => 'boolean',
        'ai_assisted'       => 'boolean',

        'is_active'         => 'boolean',
        'is_published'      => 'boolean',

        'start_at'          => 'datetime',
        'end_at'            => 'datetime',
        'created_at'        => 'datetime',
        'updated_at'        => 'datetime',
    ];

    // ==========================================================
    // Relationships
    // ==========================================================

    /** ŸÖÿπŸÑŸÖ ÿ≥ÿßÿ≤ŸÜÿØŸá ÿ¢ÿ≤ŸÖŸàŸÜ */
    public function teacher(): BelongsTo
    {
        return $this->belongsTo(User::class, 'teacher_id');
    }

    /** ⁄©ŸÑÿßÿ≥ ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ (ÿßÿÆÿ™€åÿßÿ±€å) */
    public function classroom(): BelongsTo
    {
        return $this->belongsTo(Classroom::class, 'classroom_id');
    }

    /**
     * ÿ≥ŸàÿßŸÑÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ
     * pivot: exam_questions(exam_id, question_id, sort_order)
     */
    public function questions(): BelongsToMany
    {
        return $this->belongsToMany(
            Question::class,
            'exam_questions',
            'exam_id',
            'question_id'
        )->withPivot('sort_order');
    }

    /**
     * ÿ¥ÿ±⁄©ÿ™‚Äå⁄©ŸÜŸÜÿØŸá‚ÄåŸáÿß / ÿ™ŸÑÿßÿ¥‚ÄåŸáÿß
     * ÿ¨ÿØŸàŸÑ: exam_attempts
     */
    public function attempts(): HasMany
    {
        return $this->hasMany(ExamAttempt::class, 'exam_id');
    }

    /**
     * ÿØÿ±Ÿàÿ≥ ÿ¢ÿ≤ŸÖŸàŸÜ (ÿß⁄Øÿ± ÿ¢ÿ≤ŸÖŸàŸÜ ⁄ÜŸÜÿØÿØÿ±ÿ≥ ÿ®ÿßÿ¥ÿØ)
     * pivot: exam_subject(exam_id, subject_id, question_count)
     */
    public function subjects(): BelongsToMany
    {
        return $this->belongsToMany(
            Subject::class,
            'exam_subject',
            'exam_id',
            'subject_id'
        )->withPivot('question_count');
    }

    // --- ÿØÿ≥ÿ™Ÿá‚Äåÿ®ŸÜÿØ€å‚ÄåŸáÿß€å ÿ≥ÿ∑ÿ≠€å (ŸáŸÖŸá ÿßÿÆÿ™€åÿßÿ±€å) ---
    public function section(): BelongsTo
    {
        return $this->belongsTo(Section::class, 'section_id');
    }

    public function grade(): BelongsTo
    {
        return $this->belongsTo(Grade::class, 'grade_id');
    }

    public function branch(): BelongsTo
    {
        return $this->belongsTo(Branch::class, 'branch_id');
    }

    public function field(): BelongsTo
    {
        return $this->belongsTo(Field::class, 'field_id');
    }

    public function subfield(): BelongsTo
    {
        return $this->belongsTo(Subfield::class, 'subfield_id');
    }

    public function subjectType(): BelongsTo
    {
        return $this->belongsTo(SubjectType::class, 'subject_type_id');
    }

    /** ÿß⁄Øÿ± ÿ¢ÿ≤ŸÖŸàŸÜ AI ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥ÿØ */
    public function aiSession(): BelongsTo
    {
        return $this->belongsTo(AiSession::class, 'ai_session_id');
    }

    // ==========================================================
    // Route Model Binding (UUID)
    // ==========================================================
    public function getRouteKeyName()
    {
        return 'id';
    }

    // ==========================================================
    // Boot UUID
    // ==========================================================
    protected static function booted()
    {
        static::creating(function ($exam) {
            if (empty($exam->id)) {
                $exam->id = (string) Str::uuid();
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 49. ExamAttempt.php

**Path:** `app/Models/ExamAttempt.php`  
**Size:** 330 bytes  
**Modified:** 2025-12-06 10:30:43

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class ExamAttempt extends Model
{
    use HasFactory;

    protected $table = 'exam_attempts';

    protected $fillable = ['exam_id', 'student_id', 'started_at', 'finished_at', 'status', 'total_score'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 50. Field.php

**Path:** `app/Models/Field.php`  
**Size:** 931 bytes  
**Modified:** 2025-12-07 17:31:11

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Field extends Model
{
    use HasFactory;

    protected $table = 'fields';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'branch_id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // ÿ±Ÿàÿßÿ®ÿ∑
    public function branch(){ return $this->belongsTo(\App\Models\Branch::class); }
    public function subfields(){ return $this->hasMany(\App\Models\Subfield::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 51. Grade.php

**Path:** `app/Models/Grade.php`  
**Size:** 893 bytes  
**Modified:** 2025-12-07 15:53:13

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Grade extends Model
{
    use HasFactory;

    protected $table = 'grades';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'section_id',
        'slug',
        'value',      // ‚úÖ ÿ≠ÿ™ŸÖÿßŸã ÿß€åŸÜÿ¨ÿß ÿ®ÿßÿ¥ÿØ
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // ÿ±Ÿàÿßÿ®ÿ∑
    public function section(){ return $this->belongsTo(\App\Models\Section::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 52. LearningPath.php

**Path:** `app/Models/LearningPath.php`  
**Size:** 353 bytes  
**Modified:** 2025-12-06 10:30:59

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class LearningPath extends Model
{
    use HasFactory;

    protected $table = 'learning_paths';

    protected $fillable = ['student_id', 'path_type', 'title', 'start_date', 'end_date', 'status', 'generated_by', 'metadata'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 53. LearningPathStep.php

**Path:** `app/Models/LearningPathStep.php`  
**Size:** 512 bytes  
**Modified:** 2025-12-06 10:31:03

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class LearningPathStep extends Model
{
    use HasFactory;

    protected $table = 'learning_path_steps';

    protected $fillable = ['learning_path_id', 'step_type', 'order_index', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'subject_id', 'topic_id', 'content_id', 'exam_id', 'counseling_task_id', 'estimated_minutes', 'required_mastery', 'status', 'due_date'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 54. Otp.php

**Path:** `app/Models/Otp.php`  
**Size:** 1,158 bytes  
**Modified:** 2025-12-06 19:29:14

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Otp extends Model
{
    use HasFactory;

    protected $table = "otps";

    // ‚úÖ ⁄ÜŸàŸÜ uuid Ÿáÿ≥ÿ™
    public $incrementing = false;
    protected $keyType = "string";

    protected $fillable = [
        "id",
        "phone",
        "code",
        "token",
        "type",
        "attempts",
        "verified",
        "expires_at",
        "verified_at",
    ];

    protected $casts = [
        "expires_at"  => "datetime",
        "verified_at" => "datetime",
    ];

    // ‚úÖ auto fill id + type
    protected static function booted()
    {
        static::creating(function ($otp) {
            if (empty($otp->id)) {
                $otp->id = (string) Str::uuid();
            }

            if (empty($otp->type)) {
                $otp->type = "login";
            }

            if (!isset($otp->attempts)) {
                $otp->attempts = 0;
            }

            if (!isset($otp->verified)) {
                $otp->verified = false;
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 55. PsychoAssessment.php

**Path:** `app/Models/PsychoAssessment.php`  
**Size:** 337 bytes  
**Modified:** 2025-12-06 10:31:11

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class PsychoAssessment extends Model
{
    use HasFactory;

    protected $table = 'psycho_assessments';

    protected $fillable = ['student_id', 'assessment_type', 'value', 'notes', 'measured_at', 'source'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 56. Question.php

**Path:** `app/Models/Question.php`  
**Size:** 955 bytes  
**Modified:** 2025-12-06 20:48:17

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Question extends Model
{
    use HasFactory;

    protected $table = 'questions';

    // ‚úÖ UUID PK
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'creator_id',
        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_id',
        'topic_id',
        'difficulty',
        'question_type',
        'content',
        'options',
        'correct_answer',
        'explanation',
        'ai_generated_by_session_id',
        'ai_confidence',
        'is_active'
    ];

    protected static function booted()
    {
        static::creating(function ($q) {
            if (empty($q->id)) {
                $q->id = (string) Str::uuid();
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 57. Role.php

**Path:** `app/Models/Role.php`  
**Size:** 277 bytes  
**Modified:** 2025-12-06 17:35:25

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;

class Role extends Model
{
    protected $table = 'roles';

    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = ['id','name','slug','description','is_active'];
}

......................................................................

----------------------------------------------------------------------

## üìÑ 58. Section.php

**Path:** `app/Models/Section.php`  
**Size:** 785 bytes  
**Modified:** 2025-12-07 06:51:13

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Section extends Model
{
    use HasFactory;

    protected $table = 'sections';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // ÿ±Ÿàÿßÿ®ÿ∑
    public function grades(){ return $this->hasMany(Grade::class); }
    public function branches(){ return $this->hasMany(Branch::class); }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 59. StudentCounselingTaskLog.php

**Path:** `app/Models/StudentCounselingTaskLog.php`  
**Size:** 350 bytes  
**Modified:** 2025-12-06 10:31:29

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentCounselingTaskLog extends Model
{
    use HasFactory;

    protected $table = 'student_counseling_task_logs';

    protected $fillable = ['student_id', 'counseling_task_id', 'done_at', 'self_rating', 'notes'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 60. StudentDailyLog.php

**Path:** `app/Models/StudentDailyLog.php`  
**Size:** 355 bytes  
**Modified:** 2025-12-06 10:31:33

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentDailyLog extends Model
{
    use HasFactory;

    protected $table = 'student_daily_logs';

    protected $fillable = ['student_id', 'log_date', 'study_minutes', 'mood', 'stress_level', 'sleep_hours', 'free_text'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 61. StudentGamificationProfile.php

**Path:** `app/Models/StudentGamificationProfile.php`  
**Size:** 1,189 bytes  
**Modified:** 2025-12-03 08:49:47

----------------------------------------------------------------------

<?php
// app/Models/StudentGamificationProfile.php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class StudentGamificationProfile extends Model
{
    use HasFactory;

    protected $fillable = [
        'student_id',
        'total_xp',
        'level',
        'current_streak',
        'longest_streak',
        'last_activity_at',
    ];

    protected $casts = [
        'total_xp'         => 'integer',
        'level'            => 'integer',
        'current_streak'   => 'integer',
        'longest_streak'   => 'integer',
        'last_activity_at' => 'datetime',
    ];

    /* ================= Relationships ================= */

    public function student(): BelongsTo
    {
        return $this->belongsTo(User::class, 'student_id');
    }

    /* ================= Helpers (ÿßÿÆÿ™€åÿßÿ±€å ŸàŸÑ€å ŸÖŸÅ€åÿØ) ================= */

    public function addXp(int $xp): void
    {
        $this->increment('total_xp', $xp);
    }

    public function touchActivity(): void
    {
        $this->last_activity_at = now();
        $this->save();
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 62. StudentGoal.php

**Path:** `app/Models/StudentGoal.php`  
**Size:** 381 bytes  
**Modified:** 2025-12-06 10:31:37

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentGoal extends Model
{
    use HasFactory;

    protected $table = 'student_goals';

    protected $fillable = ['student_id', 'goal_type', 'title', 'description', 'target_date', 'status', 'priority', 'related_subject_id', 'related_topic_id'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 63. StudentLearningProfile.php

**Path:** `app/Models/StudentLearningProfile.php`  
**Size:** 390 bytes  
**Modified:** 2025-12-06 10:31:41

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentLearningProfile extends Model
{
    use HasFactory;

    protected $table = 'student_learning_profiles';

    protected $fillable = ['student_id', 'preferred_style', 'pace_level', 'study_time_per_day', 'goals_json', 'counselor_notes', 'ai_summary'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 64. StudentProfile.php

**Path:** `app/Models/StudentProfile.php`  
**Size:** 351 bytes  
**Modified:** 2025-12-06 10:31:45

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class StudentProfile extends Model
{
    use HasFactory;

    protected $table = 'student_profiles';

    protected $fillable = ['user_id', 'section_id', 'grade_id', 'branch_id', 'field_id', 'subfield_id', 'national_code'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 65. Subfield.php

**Path:** `app/Models/Subfield.php`  
**Size:** 847 bytes  
**Modified:** 2025-12-07 17:32:50

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Subfield extends Model
{
    use HasFactory;

    protected $table = 'subfields';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'field_id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // ÿ±Ÿàÿßÿ®ÿ∑
    public function field(){ return $this->belongsTo(\App\Models\Field::class); }
    public function subjects(){ return $this->hasMany(\App\Models\Subject::class); }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 66. Subject.php

**Path:** `app/Models/Subject.php`  
**Size:** 1,509 bytes  
**Modified:** 2025-12-07 18:19:11

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Subject extends Model
{
    use HasFactory;

    protected $table = 'subjects';
    public $incrementing = false;
    protected $keyType = 'string';

    public function section()     { return $this->belongsTo(\App\Models\Section::class); }
    public function grade()       { return $this->belongsTo(\App\Models\Grade::class); }
    public function branch()      { return $this->belongsTo(\App\Models\Branch::class); }
    public function field()       { return $this->belongsTo(\App\Models\Field::class); }
    public function subfield()    { return $this->belongsTo(\App\Models\Subfield::class); }
    public function subjectType() { return $this->belongsTo(\App\Models\SubjectType::class); }

    protected $fillable = [
        'id',
        'title_fa',
        'slug',
        'code',
        'hours',
        'sort_order',
        'is_active',
        'section_id',
        'grade_id',
        'branch_id',
        'field_id',
        'subfield_id',
        'subject_type_id',
    ];




    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }



    // exams pivot
    public function exams()
    {
        return $this->belongsToMany(Exam::class, 'exam_subject', 'subject_id', 'exam_id');
    }

}

......................................................................

----------------------------------------------------------------------

## üìÑ 67. SubjectType.php

**Path:** `app/Models/SubjectType.php`  
**Size:** 775 bytes  
**Modified:** 2025-12-07 17:39:12

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class SubjectType extends Model
{
    use HasFactory;

    protected $table = 'subject_types';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'id',
        'slug',
        'name_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    // ÿ±Ÿàÿßÿ®ÿ∑
    public function subjects()
    {
        return $this->hasMany(Subject::class, 'subject_type_id');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 68. TeacherProfile.php

**Path:** `app/Models/TeacherProfile.php`  
**Size:** 349 bytes  
**Modified:** 2025-12-06 10:32:02

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class TeacherProfile extends Model
{
    use HasFactory;

    protected $table = 'teacher_profiles';

    protected $fillable = ['user_id', 'bio', 'main_section_id', 'main_branch_id', 'main_field_id', 'main_subfield_id'];
}
......................................................................

----------------------------------------------------------------------

## üìÑ 69. Topic.php

**Path:** `app/Models/Topic.php`  
**Size:** 733 bytes  
**Modified:** 2025-12-07 06:05:36

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Illuminate\Support\Str;

class Topic extends Model
{
    use HasFactory;

    protected $table = 'topics';
    public $incrementing = false;
    protected $keyType = 'string';

    protected $fillable = [
        'subject_id',
        'title_fa',
        'sort_order',
        'is_active',
    ];

    protected static function booted()
    {
        static::creating(function ($m) {
            if (empty($m->id)) {
                $m->id = (string) Str::uuid();
            }
        });
    }

    public function subject()
    {
        return $this->belongsTo(Subject::class, 'subject_id');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 70. User.php

**Path:** `app/Models/User.php`  
**Size:** 5,248 bytes  
**Modified:** 2025-12-06 20:37:36

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Notifications\Notifiable;
use Illuminate\Database\Eloquent\Relations\HasMany;
use Illuminate\Database\Eloquent\Relations\HasOne;
use Illuminate\Database\Eloquent\Relations\BelongsToMany;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Support\Str;

/**
 * User Model (Smart-Edu)
 * - Roles are stored in roles table and role_user pivot (single-role)
 * - NO dependency on users.role column
 *
 * users columns:
 * id, name, email, phone, password, status, is_active, created_at, updated_at
 */
class User extends Authenticatable
{
    use HasFactory, Notifiable;

    public $incrementing = false;
    protected $keyType = 'string';

    /**
     * Mass Assignment fields
     */
    protected $fillable = [
        'id',
        'name',
        'email',
        'phone',
        'password',
        'status',
        // 'role'  ‚ùå ÿ≠ÿ∞ŸÅ ÿ¥ÿØ (ŸÜŸÇÿ¥ ÿßÿ≤ pivot ÿÆŸàÿßŸÜÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ)
        'is_active',
    ];

    /**
     * Hidden fields
     */
    protected $hidden = [
        'password',
        'remember_token',
    ];

    /**
     * Casts
     */
    protected $casts = [
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
        'is_active'  => 'boolean',
    ];

    // ==========================================================
    // Role helpers (PIVOT-BASED)
    // ==========================================================

    /**
     * Backward compatible attribute accessor:
     * ÿß⁄Øÿ± ÿ¨ÿß€å€å ŸáŸÜŸàÿ≤ $user->role ÿ±ÿß ŸÖ€å‚ÄåÿÆŸàÿßŸÜÿØÿå
     * ÿßÿ≤ pivot ŸÖŸÇÿØÿßÿ± role ÿ±ÿß ÿ®ÿ±ŸÖ€å‚Äå⁄Øÿ±ÿØÿßŸÜ€åŸÖ.
     */
    public function getRoleAttribute($value = null): ?string
    {
        $this->loadMissing('roles');
        return $this->roles->first()?->slug;
    }

    /**
     * single-role primary slug
     */
    public function primaryRole(): ?string
    {
        $this->loadMissing('roles');
        return $this->roles->first()?->slug;
    }

    public function hasRole(string $slug): bool
    {
        $this->loadMissing('roles');
        return $this->roles->contains('slug', $slug);
    }

    public function isStudent(): bool
    {
        return $this->hasRole('student');
    }

    public function isTeacher(): bool
    {
        return $this->hasRole('teacher');
    }

    public function isCounselor(): bool
    {
        return $this->hasRole('counselor');
    }

    public function isAdmin(): bool
    {
        return $this->hasRole('admin');
    }

    /**
     * Scope: filter users by role (pivot-based)
     * Usage: User::role('student')->get()
     */
    public function scopeRole(Builder $query, string $slug): Builder
    {
        return $query->whereHas('roles', function ($q) use ($slug) {
            $q->where('slug', $slug);
        });
    }

    // ==========================================================
    // Relationships
    // ==========================================================

    /**
     * Roles (pivot: role_user)
     */
    public function roles(): BelongsToMany
    {
        return $this->belongsToMany(
            Role::class,
            "role_user",
            "user_id",
            "role_id"
        );
    }

    /**
     * Classrooms created by this user as teacher
     */
    public function teachingClassrooms(): HasMany
    {
        return $this->hasMany(Classroom::class, 'teacher_id');
    }

    /**
     * Backward compatible alias for old code.
     */
    public function taughtClassrooms(): HasMany
    {
        return $this->teachingClassrooms();
    }

    /**
     * Classrooms the user joined as student
     * pivot: classroom_user (classroom_id, user_id)
     */
    public function classrooms(): BelongsToMany
    {
        return $this->belongsToMany(
            Classroom::class,
            'classroom_user',
            'user_id',
            'classroom_id'
        );
    }

    /**
     * Student profile
     */
    public function studentProfile(): HasOne
    {
        return $this->hasOne(StudentProfile::class, 'user_id');
    }

    /**
     * Teacher profile
     */
    public function teacherProfile(): HasOne
    {
        return $this->hasOne(TeacherProfile::class, 'user_id');
    }

    /**
     * Counselor profile (optional)
     */
    public function counselorProfile(): HasOne
    {
        return $this->hasOne(CounselorProfile::class, 'user_id');
    }

    /**
     * Exams created by this user as teacher
     */
    public function examsCreated(): HasMany
    {
        return $this->hasMany(Exam::class, 'teacher_id');
    }

    // ==========================================================
    // Boot (auto-generate string id)
    // ==========================================================
    protected static function booted()
    {
        static::creating(function ($user) {
            if (empty($user->id)) {
                // ÿß⁄Øÿ± ŸÖ€å‚ÄåÿÆŸàÿß€å id ŸáŸÖŸàŸÜ ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ ÿ®ÿßÿ¥Ÿá:
                // $user->id = $user->phone;

                // ÿØÿ± ÿ∫€åÿ± ÿß€åŸÜ ÿµŸàÿ±ÿ™ UUID:
                $user->id = (string) Str::uuid();
            }
        });
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 71. XpLog.php

**Path:** `app/Models/XpLog.php`  
**Size:** 603 bytes  
**Modified:** 2025-12-03 08:53:30

----------------------------------------------------------------------

<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\BelongsTo;

class XpLog extends Model
{
    protected $fillable = [
        'student_id',
        'source_type',   // exam | quiz | streak | ...
        'source_id',     // id ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ŸáŸÖŸàŸÜ source
        'xp_amount',
    ];

    protected $casts = [
        'student_id' => 'integer',
        'source_id'  => 'integer',
        'xp_amount'  => 'integer',
    ];

    public function student(): BelongsTo
    {
        return $this->belongsTo(User::class, 'student_id');
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 72. index.blade.php

**Path:** `resources/views/dashboard/admin/classrooms/index.blade.php`  
**Size:** 3,182 bytes  
**Modified:** 2025-12-07 13:12:22

----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß</h5>

        <form class="d-flex" method="GET">
            <input name="q" value="{{ request('q') }}"
                   class="form-control form-control-sm me-2"
                   placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿπŸÜŸàÿßŸÜ/⁄©ÿØ ⁄©ŸÑÿßÿ≥">
            <button class="btn btn-sm btn-primary">ÿ¨ÿ≥ÿ™ÿ¨Ÿà</button>
        </form>
    </div>

    @if(session('success'))
        <div class="alert alert-success py-2">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                <tr>
                    <th>#</th>
                    <th>ÿπŸÜŸàÿßŸÜ</th>
                    <th>⁄©ÿØ</th>
                    <th>ŸÖÿπŸÑŸëŸÖ</th>
                    <th>Ÿàÿ∂ÿπ€åÿ™</th>
                    <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                </tr>
                </thead>
                <tbody>
                @forelse($items as $i => $c)
                    <tr>
                        <td>{{ $items->firstItem() + $i }}</td>
                        <td class="fw-semibold">{{ $c->title ?? '---' }}</td>
                        <td>{{ $c->code ?? '---' }}</td>
                        <td>{{ $c->teacher_name ?? ($c->teacher->name ?? '---') }}</td>
                        <td>
                            @if(($c->is_active ?? true))
                                <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                            @else
                                <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                            @endif
                        </td>
                        <td class="text-end">
                            <a href="{{ route('admin.classrooms.show', $c->id) }}"
                               class="btn btn-sm btn-outline-primary">
                                ŸÖÿ¥ÿßŸáÿØŸá
                            </a>

                            <form action="{{ route('admin.classrooms.destroy', $c->id) }}"
                                  method="POST" class="d-inline"
                                  onsubmit="return confirm('⁄©ŸÑÿßÿ≥ ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                @csrf
                                @method('DELETE')
                                <button class="btn btn-sm btn-outline-danger">
                                    ÿ≠ÿ∞ŸÅ
                                </button>
                            </form>
                        </td>
                    </tr>
                @empty
                    <tr><td colspan="6" class="text-center py-4 text-muted">⁄©ŸÑÿßÿ≥€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.</td></tr>
                @endforelse
                </tbody>
            </table>
        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 73. show.blade.php

**Path:** `resources/views/dashboard/admin/classrooms/show.blade.php`  
**Size:** 2,524 bytes  
**Modified:** 2025-12-07 13:12:42

----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥</h5>
        <a href="{{ route('admin.classrooms.index') }}" class="btn btn-sm btn-secondary">
            ÿ®ÿ±⁄Øÿ¥ÿ™
        </a>
    </div>

    @if(session('success'))
        <div class="alert alert-success py-2">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="text-muted small">ÿπŸÜŸàÿßŸÜ</div>
                    <div class="fw-semibold">{{ $classroom->title ?? '---' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="text-muted small">⁄©ÿØ ⁄©ŸÑÿßÿ≥</div>
                    <div class="fw-semibold">{{ $classroom->code ?? '---' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="text-muted small">ŸÖÿπŸÑŸëŸÖ</div>
                    <div class="fw-semibold">
                        {{ $classroom->teacher_name ?? ($classroom->teacher->name ?? '---') }}
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™</div>
                    <div class="fw-semibold">
                        @if(($classroom->is_active ?? true))
                            <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                        @else
                            <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                        @endif
                    </div>
                </div>
            </div>

            <hr>

            <form method="POST" action="{{ route('admin.classrooms.update', $classroom->id) }}">
                @csrf
                @method('PUT')

                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" name="is_active" value="1"
                        {{ ($classroom->is_active ?? true) ? 'checked' : '' }}>
                    <label class="form-check-label">⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ</label>
                </div>

                <button class="btn btn-sm btn-primary mt-3">ÿ∞ÿÆ€åÿ±Ÿá Ÿàÿ∂ÿπ€åÿ™</button>
            </form>
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 74. index.blade.php

**Path:** `resources/views/dashboard/admin/exams/index.blade.php`  
**Size:** 1,991 bytes  
**Modified:** 2025-12-07 13:21:19

----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">
    <h5 class="fw-bold mb-3">ŸÖÿØ€åÿ±€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß</h5>

    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>ÿπŸÜŸàÿßŸÜ</th>
                        <th>Ÿàÿ∂ÿπ€åÿ™</th>
                        <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>
                <tbody>
                @forelse($items as $i => $e)
                    <tr>
                        <td>{{ method_exists($items,'firstItem') ? $items->firstItem()+$i : $i+1 }}</td>
                        <td>{{ $e->title ?? $e->name ?? '---' }}</td>
                        <td>
                            @if(($e->is_active ?? true))
                                <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                            @else
                                <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                            @endif
                        </td>
                        <td class="text-end">
                            <a href="{{ route('admin.exams.show', $e->id) }}"
                               class="btn btn-sm btn-outline-primary">
                                ŸÖÿ¥ÿßŸáÿØŸá
                            </a>
                        </td>
                    </tr>
                @empty
                    <tr><td colspan="4" class="text-center py-4 text-muted">ÿ¢ÿ≤ŸÖŸàŸÜ€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.</td></tr>
                @endforelse
                </tbody>
            </table>
        </div>

        @if(method_exists($items,'links'))
        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
        @endif
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 75. show.blade.php

**Path:** `resources/views/dashboard/admin/exams/show.blade.php`  
**Size:** 879 bytes  
**Modified:** 2025-12-07 13:21:44

----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
<div class="container py-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ</h5>
        <a href="{{ route('admin.exams.index') }}" class="btn btn-sm btn-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="text-muted small">ÿπŸÜŸàÿßŸÜ</div>
            <div class="fw-semibold mb-3">{{ $exam->title ?? $exam->name ?? '---' }}</div>

            <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™</div>
            @if(($exam->is_active ?? true))
                <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
            @else
                <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
            @endif
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 76. index.blade.php

**Path:** `resources/views/dashboard/admin/index.blade.php`  
**Size:** 9,443 bytes  
**Modified:** 2025-12-07 13:14:51

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿßÿØŸÖ€åŸÜ')

@section('content')
<div class="container-fluid py-3">

    {{-- ÿπŸÜŸàÿßŸÜ --}}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="mb-0">ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿßÿØŸÖ€åŸÜ</h4>
        <span class="text-muted small">ÿ¢ÿÆÿ±€åŸÜ ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å: {{ now()->format('Y/m/d H:i') }}</span>
    </div>

    {{-- ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å ÿ¢ŸÖÿßÿ± --}}
    <div class="row g-3 mb-4">

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">ÿßÿØŸÖ€åŸÜ‚ÄåŸáÿß</div>
                    <div class="fs-3 fw-bold">{{ $counts['admins'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">ŸÖÿπŸÑŸÖ‚ÄåŸáÿß</div>
                    <div class="fs-3 fw-bold">{{ $counts['teachers'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß</div>
                    <div class="fs-3 fw-bold">{{ $counts['students'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">⁄©ŸÑÿßÿ≥‚ÄåŸáÿß</div>
                    <div class="fs-3 fw-bold">{{ $counts['classrooms'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">ÿØÿ±Ÿàÿ≥</div>
                    <div class="fs-3 fw-bold">{{ $counts['subjects'] }}</div>
                </div>
            </div>
        </div>

        <div class="col-6 col-lg-2">
            <div class="card shadow-sm h-100">
                <div class="card-body text-center">
                    <div class="fw-bold text-muted mb-1">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß</div>
                    <div class="fs-3 fw-bold">{{ $counts['exams'] }}</div>
                </div>
            </div>
        </div>

    </div>


    <div class="row g-3">

        {{-- ÿ¢ÿÆÿ±€åŸÜ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ --}}
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white fw-bold">
                    ÿ¢ÿÆÿ±€åŸÜ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover mb-0 align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ŸÜÿßŸÖ</th>
                                    <th>ÿ¥ŸÖÿßÿ±Ÿá</th>
                                    <th>ŸÜŸÇÿ¥</th>
                                    <th class="text-nowrap">ÿ™ÿßÿ±€åÿÆ</th>
                                </tr>
                            </thead>
                            <tbody>
                                @forelse($latestUsers as $u)
                                    <tr>
                                        <td>{{ $u->name ?? '---' }}</td>
                                        <td>{{ $u->phone }}</td>
                                        <td>
                                            <span class="badge bg-secondary">
                                                {{ $u->role ?? 'guest' }}
                                            </span>
                                        </td>
                                        <td class="small text-muted text-nowrap">
                                            {{ $u->created_at?->format('Y/m/d') }}
                                        </td>
                                    </tr>
                                @empty
                                    <tr>
                                        <td colspan="4" class="text-center text-muted py-4">
                                            ⁄©ÿßÿ±ÿ®ÿ±€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                                        </td>
                                    </tr>
                                @endforelse
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer bg-white text-end">
                    <a href="{{ route('admin.users.index') }}" class="btn btn-sm btn-outline-primary">
                        ŸÖÿØ€åÿ±€åÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ
                    </a>
                </div>
            </div>
        </div>


        {{-- ÿ¢ÿÆÿ±€åŸÜ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß --}}
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white fw-bold">
                    ÿ¢ÿÆÿ±€åŸÜ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
                </div>

                <div class="card-body p-0">
                    @if($latestClassrooms->count())
                        <div class="table-responsive">
                            <table class="table table-hover mb-0 align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>ÿπŸÜŸàÿßŸÜ</th>
                                        <th>ŸÖÿπŸÑŸÖ</th>
                                        <th class="text-nowrap">ÿ™ÿßÿ±€åÿÆ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach($latestClassrooms as $c)
                                        <tr>
                                            <td>{{ $c->title ?? $c->name ?? '---' }}</td>
                                            <td>{{ $c->teacher?->name ?? '---' }}</td>
                                            <td class="small text-muted text-nowrap">
                                                {{ $c->created_at?->format('Y/m/d') }}
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="text-center text-muted py-4">
                            ⁄©ŸÑÿßÿ≥€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                        </div>
                    @endif
                </div>

                <div class="card-footer bg-white text-end">
                    <a href="{{ route('admin.classrooms.index') }}" class="btn btn-sm btn-outline-primary">
                        ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
                    </a>
                </div>
            </div>
        </div>


        {{-- ÿ¢ÿÆÿ±€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß --}}
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm h-100">
                <div class="card-header bg-white fw-bold">
                    ÿ¢ÿÆÿ±€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </div>

                <div class="card-body p-0">
                    @if($latestExams->count())
                        <div class="table-responsive">
                            <table class="table table-hover mb-0 align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>ÿπŸÜŸàÿßŸÜ</th>
                                        <th>ŸÖÿπŸÑŸÖ</th>
                                        <th class="text-nowrap">ÿ™ÿßÿ±€åÿÆ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach($latestExams as $e)
                                        <tr>
                                            <td>{{ $e->title ?? '---' }}</td>
                                            <td>{{ $e->teacher?->name ?? '---' }}</td>
                                            <td class="small text-muted text-nowrap">
                                                {{ $e->created_at?->format('Y/m/d') }}
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="text-center text-muted py-4">
                            ÿ¢ÿ≤ŸÖŸàŸÜ€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                        </div>
                    @endif
                </div>

                <div class="card-footer bg-white text-end">
                    <a href="{{ route('admin.exams.index') }}" class="btn btn-sm btn-outline-primary">
                        ŸÖÿØ€åÿ±€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                    </a>
                </div>
            </div>
        </div>

    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 77. login.blade.php

**Path:** `resources/views/dashboard/admin/login.blade.php`  
**Size:** 9,124 bytes  
**Modified:** 2025-12-07 12:06:08

----------------------------------------------------------------------

@extends('layouts.guest')

@section('title', 'Ÿàÿ±ŸàÿØ ÿßÿØŸÖ€åŸÜ')

@section('content')
<div class="container d-flex align-items-center justify-content-center min-vh-100">
    <div class="col-12 col-md-6 col-lg-4">
        <div class="card shadow-sm border-0 rounded-4">
            <div class="card-body p-4">

                <h5 class="fw-bold mb-1 text-center">Ÿàÿ±ŸàÿØ ÿßÿØŸÖ€åŸÜ</h5>
                <p class="text-muted small text-center mb-4">
                    ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ ÿßÿØŸÖ€åŸÜ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ ÿ™ÿß ⁄©ÿØ Ÿàÿ±ŸàÿØ ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ŸàÿØ
                </p>

                {{-- Alerts --}}
                <div id="alertBox" class="alert d-none" role="alert"></div>

                {{-- Step 1: Phone --}}
                <div id="stepPhone">
                    <div class="mb-3">
                        <label class="form-label">ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ (ÿ®ÿØŸàŸÜ 0)</label>
                        <div class="input-group">
                            <span class="input-group-text">+98</span>
                            <input type="text" class="form-control text-start" id="phone"
                                   placeholder="9xxxxxxxxx" maxlength="10" autocomplete="tel">
                        </div>
                        <div class="form-text text-danger d-none" id="phoneError"></div>
                    </div>

                    <button id="btnSendOtp" class="btn btn-primary w-100">
                        ÿßÿ±ÿ≥ÿßŸÑ ⁄©ÿØ ÿ™ÿß€å€åÿØ
                    </button>
                </div>

                {{-- Step 2: Code --}}
                <div id="stepCode" class="d-none">
                    <div class="mb-3">
                        <label class="form-label">⁄©ÿØ ÿ™ÿß€å€åÿØ €∂ ÿ±ŸÇŸÖ€å</label>
                        <input type="text" class="form-control text-center fs-5 tracking-wide"
                               id="code" placeholder="------" maxlength="6" inputmode="numeric">
                        <div class="form-text text-danger d-none" id="codeError"></div>
                    </div>

                    <button id="btnVerifyOtp" class="btn btn-success w-100 mb-3">
                        ÿ™ÿß€å€åÿØ Ÿà Ÿàÿ±ŸàÿØ
                    </button>

                    <div class="d-flex justify-content-between align-items-center small">
                        <button id="btnResendOtp" class="btn btn-link p-0 text-decoration-none" disabled>
                            ÿßÿ±ÿ≥ÿßŸÑ ŸÖÿ¨ÿØÿØ
                        </button>
                        <span class="text-muted">
                            <span id="timer">01:00</span> ÿ™ÿß ÿßÿ±ÿ≥ÿßŸÑ ŸÖÿ¨ÿØÿØ
                        </span>
                    </div>

                    <hr class="my-3">

                    <button id="btnBack" class="btn btn-outline-secondary w-100">
                        ÿ™ÿ∫€å€åÿ± ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ
                    </button>
                </div>

            </div>
        </div>

        <p class="text-center text-muted small mt-3">
            Smart-Edu Admin Panel
        </p>
    </div>
</div>
@endsection

@push('scripts')
<script>
(function () {
    const sendUrl   = "{{ route('admin.send-otp') }}";
    const verifyUrl = "{{ route('admin.verify-otp') }}";

    const csrfToken = "{{ csrf_token() }}";

    const stepPhone = document.getElementById('stepPhone');
    const stepCode  = document.getElementById('stepCode');

    const phoneInput = document.getElementById('phone');
    const codeInput  = document.getElementById('code');

    const btnSendOtp   = document.getElementById('btnSendOtp');
    const btnVerifyOtp = document.getElementById('btnVerifyOtp');
    const btnResendOtp = document.getElementById('btnResendOtp');
    const btnBack      = document.getElementById('btnBack');

    const alertBox  = document.getElementById('alertBox');
    const phoneError = document.getElementById('phoneError');
    const codeError  = document.getElementById('codeError');
    const timerEl    = document.getElementById('timer');

    let timer = 60;
    let timerInterval = null;
    let lastPhone = null;

    function showAlert(type, message) {
        alertBox.className = `alert alert-${type}`;
        alertBox.textContent = message;
        alertBox.classList.remove('d-none');
    }
    function hideAlert() {
        alertBox.classList.add('d-none');
    }

    function showPhoneError(msg) {
        phoneError.textContent = msg;
        phoneError.classList.remove('d-none');
    }
    function hidePhoneError() {
        phoneError.classList.add('d-none');
    }

    function showCodeError(msg) {
        codeError.textContent = msg;
        codeError.classList.remove('d-none');
    }
    function hideCodeError() {
        codeError.classList.add('d-none');
    }

    function validatePhone(phone) {
        return /^9\d{9}$/.test(phone);
    }

    function startTimer() {
        timer = 60;
        btnResendOtp.disabled = true;

        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timer--;
            const m = String(Math.floor(timer / 60)).padStart(2, '0');
            const s = String(timer % 60).padStart(2, '0');
            timerEl.textContent = `${m}:${s}`;

            if (timer <= 0) {
                clearInterval(timerInterval);
                btnResendOtp.disabled = false;
                timerEl.textContent = "00:00";
            }
        }, 1000);
    }

    async function postJson(url, data) {
        const res = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRF-TOKEN": csrfToken,
                "Accept": "application/json"
            },
            body: JSON.stringify(data)
        });
        const json = await res.json().catch(() => ({}));
        return { ok: res.ok, status: res.status, json };
    }

    btnSendOtp.addEventListener('click', async () => {
        hideAlert(); hidePhoneError();

        const phone = phoneInput.value.trim();
        if (!validatePhone(phone)) {
            showPhoneError("ÿ¥ŸÖÿßÿ±Ÿá ÿ®ÿß€åÿØ ŸÖÿ´ŸÑ 9xxxxxxxxx ÿ®ÿßÿ¥ÿØ.");
            return;
        }

        btnSendOtp.disabled = true;
        btnSendOtp.innerHTML = 'ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ±ÿ≥ÿßŸÑ...';

        const { ok, status, json } = await postJson(sendUrl, { phone });

        btnSendOtp.disabled = false;
        btnSendOtp.innerHTML = 'ÿßÿ±ÿ≥ÿßŸÑ ⁄©ÿØ ÿ™ÿß€å€åÿØ';

        if (!ok) {
            showAlert("danger", json.message || "ÿÆÿ∑ÿß ÿØÿ± ÿßÿ±ÿ≥ÿßŸÑ ⁄©ÿØ.");
            return;
        }

        lastPhone = phone;
        showAlert("success", json.message || "⁄©ÿØ ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ÿØ.");

        stepPhone.classList.add('d-none');
        stepCode.classList.remove('d-none');

        codeInput.value = "";
        codeInput.focus();

        startTimer();
    });

    btnVerifyOtp.addEventListener('click', async () => {
        hideAlert(); hideCodeError();

        const code = codeInput.value.trim();
        if (!/^\d{6}$/.test(code)) {
            showCodeError("⁄©ÿØ ÿ®ÿß€åÿØ €∂ ÿ±ŸÇŸÖ ÿ®ÿßÿ¥ÿØ.");
            return;
        }

        btnVerifyOtp.disabled = true;
        btnVerifyOtp.innerHTML = 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿ±ÿ±ÿ≥€å...';

        const { ok, json } = await postJson(verifyUrl, {
            phone: lastPhone,
            code: code
        });

        btnVerifyOtp.disabled = false;
        btnVerifyOtp.innerHTML = 'ÿ™ÿß€å€åÿØ Ÿà Ÿàÿ±ŸàÿØ';

        if (!ok) {
            showAlert("danger", json.message || "⁄©ÿØ ŸÖÿπÿ™ÿ®ÿ± ŸÜ€åÿ≥ÿ™.");
            return;
        }

        showAlert("success", json.message || "Ÿàÿ±ŸàÿØ ŸÖŸàŸÅŸÇ.");

        // ÿ±€åÿØÿß€åÿ±⁄©ÿ™ ÿ®Ÿá ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿßÿØŸÖ€åŸÜ
        if (json.redirect) {
            window.location.href = json.redirect;
        }
    });

    btnResendOtp.addEventListener('click', async () => {
        hideAlert(); hideCodeError();

        if (!lastPhone) return;

        btnResendOtp.disabled = true;
        const { ok, json } = await postJson(sendUrl, { phone: lastPhone });

        if (!ok) {
            btnResendOtp.disabled = false;
            showAlert("danger", json.message || "ÿÆÿ∑ÿß ÿØÿ± ÿßÿ±ÿ≥ÿßŸÑ ŸÖÿ¨ÿØÿØ.");
            return;
        }

        showAlert("success", json.message || "⁄©ÿØ ÿØŸàÿ®ÿßÿ±Ÿá ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ÿØ.");
        startTimer();
    });

    btnBack.addEventListener('click', () => {
        hideAlert();
        stepCode.classList.add('d-none');
        stepPhone.classList.remove('d-none');

        phoneInput.focus();
        clearInterval(timerInterval);
    });

    // Enter key support
    phoneInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') btnSendOtp.click();
    });
    codeInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') btnVerifyOtp.click();
    });

})();
</script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 78. _form.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/_form.blade.php`  
**Size:** 5,808 bytes  
**Modified:** 2025-12-07 08:12:45

----------------------------------------------------------------------

@php
    /**
     * ŸÅÿ±ŸÖ ŸÖÿ¥ÿ™ÿ±⁄© Taxonomy
     * ÿßŸÜÿ™ÿ∏ÿßÿ±:
     * $title, $routeName, $item (ÿØÿ± edit), $mode=create|edit
     * $formFields: ÿ¢ÿ±ÿß€åŸá‚Äå€å ŸÅ€åŸÑÿØŸáÿß
     *
     * Ÿáÿ± ŸÅ€åŸÑÿØ:
     * [
     *   'name' => 'slug',
     *   'label'=> 'ÿßÿ≥ŸÑÿß⁄Ø',
     *   'type' => 'text|number|textarea|select|checkbox',
     *   'options' => [ ['value'=>'x','label'=>'y'], ... ] ÿ®ÿ±ÿß€å select
     *   'required' => true|false
     *   'placeholder' => '...'
     * ]
     */

    $title = $title ?? 'ÿ¢€åÿ™ŸÖ';
    $routeName = $routeName ?? 'admin.sections';
    $mode = $mode ?? 'create';
    $item = $item ?? null;

    $formFields = $formFields ?? [
        [
            'name' => 'name_fa',
            'label' => 'ŸÜÿßŸÖ ŸÅÿßÿ±ÿ≥€å',
            'type' => 'text',
            'required' => true,
            'placeholder' => 'ŸÖÿ´ÿßŸÑ: ŸÅŸÜ€å Ÿà ÿ≠ÿ±ŸÅŸá‚Äåÿß€å',
        ],
        [
            'name' => 'slug',
            'label' => 'ÿßÿ≥ŸÑÿß⁄Ø',
            'type' => 'text',
            'required' => true,
            'placeholder' => 'ŸÖÿ´ÿßŸÑ: technical',
        ],
        ['name' => 'sort_order', 'label' => 'ÿ™ÿ±ÿ™€åÿ®', 'type' => 'number', 'required' => false, 'placeholder' => '0'],
        ['name' => 'is_active', 'label' => 'ŸÅÿπÿßŸÑ ÿßÿ≥ÿ™ÿü', 'type' => 'checkbox'],
    ];

    // ÿ¢ÿØÿ±ÿ≥ action
    $action = $mode === 'edit' ? route($routeName . '.update', $item->id) : route($routeName . '.store');
@endphp

<form action="{{ $action }}" method="POST">
    @csrf
    @if ($mode === 'edit')
        @method('PUT')
    @endif

    <div class="row g-3">

        @foreach ($formFields as $field)
            @php
                $name = $field['name'];
                $type = $field['type'] ?? 'text';
                $label = $field['label'] ?? $name;
                $required = $field['required'] ?? false;
                $placeholder = $field['placeholder'] ?? '';
                $options = $field['options'] ?? [];
                $value = old($name, $item ? data_get($item, $name) : null);
            @endphp

            {{-- checkbox --}}
            @if ($type === 'checkbox')
                <div class="col-12">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="{{ $name }}" name="{{ $name }}"
                            value="1"
                            {{ old($name, $item ? (data_get($item, $name) ? 1 : 0) : 1) ? 'checked' : '' }}>
                        <label class="form-check-label fw-bold" for="{{ $name }}">
                            {{ $label }}
                        </label>
                    </div>
                </div>

                {{-- textarea --}}
            @elseif($type === 'textarea')
                <div class="col-12">
                    <label for="{{ $name }}" class="form-label fw-bold">
                        {{ $label }} @if ($required)
                            <span class="text-danger">*</span>
                        @endif
                    </label>
                    <textarea id="{{ $name }}" name="{{ $name }}" rows="4"
                        class="form-control @error($name) is-invalid @enderror" placeholder="{{ $placeholder }}"
                        @if ($required) required @endif>{{ $value }}</textarea>
                    @error($name)
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror
                </div>

                {{-- select --}}
            @elseif($type === 'select')
                <div class="col-md-6">
                    <label for="{{ $name }}" class="form-label fw-bold">
                        {{ $label }} @if ($required)
                            <span class="text-danger">*</span>
                        @endif
                    </label>
                    <select id="{{ $name }}" name="{{ $name }}"
                        class="form-select @error($name) is-invalid @enderror"
                        @if ($required) required @endif>
                        <option value="">-- ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ --</option>
                        @foreach ($options as $opt)
                            <option value="{{ $opt['value'] }}"
                                {{ (string) $value === (string) $opt['value'] ? 'selected' : '' }}>
                                {{ $opt['label'] }}
                            </option>
                        @endforeach
                    </select>
                    @error($name)
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror
                </div>

                {{-- number/text --}}
            @else
                <div class="col-md-6">
                    <label for="{{ $name }}" class="form-label fw-bold">
                        {{ $label }} @if ($required)
                            <span class="text-danger">*</span>
                        @endif
                    </label>
                    <input type="{{ $type }}" id="{{ $name }}" name="{{ $name }}"
                        value="{{ $value }}" class="form-control @error($name) is-invalid @enderror"
                        placeholder="{{ $placeholder }}" @if ($required) required @endif>
                    @error($name)
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror
                </div>
            @endif
        @endforeach
    </div>

    <div class="d-flex gap-2 mt-4">
        <button type="submit" class="btn btn-primary">
            {{ $mode === 'edit' ? 'ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™' : 'ÿß€åÿ¨ÿßÿØ' }}
        </button>

        <a href="{{ route($routeName . '.index') }}" class="btn btn-secondary">
            ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
        </a>
    </div>
</form>

......................................................................

----------------------------------------------------------------------

## üìÑ 79. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/branches/create.blade.php`  
**Size:** 3,023 bytes  
**Modified:** 2025-12-07 16:25:59

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/branches/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿ¥ÿßÿÆŸá‚ÄåŸáÿß') . ' | ÿß€åÿ¨ÿßÿØ')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿß€åÿ¨ÿßÿØ {{ $title ?? 'ÿ¥ÿßÿÆŸá' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- section_id --}}
                <div class="mb-3">
                    <label class="form-label">ŸÖŸÇÿ∑ÿπ</label>
                    <select name="section_id" class="form-select" required>
                        <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...</option>
                        @foreach($sections as $s)
                            <option value="{{ $s->id }}" {{ old('section_id') == $s->id ? 'selected' : '' }}>
                                {{ $s->name_fa }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ÿ¥ÿßÿÆŸá</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 80. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/branches/edit.blade.php`  
**Size:** 4,023 bytes  
**Modified:** 2025-12-07 16:28:20

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/branches/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿ¥ÿßÿÆŸá‚ÄåŸáÿß') . ' | Ÿà€åÿ±ÿß€åÿ¥')

@section('content')
<div class="container-fluid py-3">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">
            Ÿà€åÿ±ÿß€åÿ¥ {{ $title ?? 'ÿ¥ÿßÿÆŸá' }}
        </h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">
            ÿ®ÿ±⁄Øÿ¥ÿ™
        </a>
    </div>

    {{-- Errors --}}
    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    {{-- Form Card --}}
    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- section_id --}}
                @if(isset($sections))
                    <div class="mb-3">
                        <label class="form-label">ŸÖŸÇÿ∑ÿπ</label>
                        <select name="section_id" class="form-select" required>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}"
                                    {{ old('section_id', $item->section_id) == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ÿ¥ÿßÿÆŸá</label>
                    <input type="text"
                           name="name_fa"
                           class="form-control"
                           required
                           value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text"
                           name="slug"
                           class="form-control"
                           required
                           value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number"
                           name="sort_order"
                           class="form-control"
                           min="0"
                           value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input"
                           type="checkbox"
                           name="is_active"
                           value="1"
                           id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                {{-- submit --}}
                <div class="d-flex justify-content-end gap-2">
                    <button type="submit" class="btn btn-primary">
                        ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
                    </button>
                    <a href="{{ route($routeName.'.index') }}" class="btn btn-light">
                        ÿßŸÜÿµÿ±ÿßŸÅ
                    </a>
                </div>

            </form>
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 81. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/branches/index.blade.php`  
**Size:** 4,457 bytes  
**Modified:** 2025-12-07 16:25:42

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/branches/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'ÿ¥ÿßÿÆŸá‚ÄåŸáÿß'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'ÿ¥ÿßÿÆŸá‚ÄåŸáÿß' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'ŸÜÿßŸÖ ÿ¥ÿßÿÆŸá', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">ŸÜÿßŸÖ ŸÖŸÇÿ∑ÿπ</th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>{{ $item->section?->name_fa ?? '---' }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-muted py-4">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 82. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/create.blade.php`  
**Size:** 927 bytes  
**Modified:** 2025-12-07 08:13:27

----------------------------------------------------------------------

@extends('layouts.app')

@php
    $title = $title ?? 'ÿ¢€åÿ™ŸÖ';
    $routeName = $routeName ?? 'admin.sections';
@endphp

@section('title', 'ÿß€åÿ¨ÿßÿØ ' . $title)

@section('content')
    <div class="container py-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">ÿß€åÿ¨ÿßÿØ {{ $title }}</h3>
            <a href="{{ route($routeName . '.index') }}" class="btn btn-outline-secondary btn-sm">
                ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ŸÑ€åÿ≥ÿ™
            </a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                @include('dashboard.admin.taxonomies._form', [
                    'mode' => 'create',
                    'title' => $title,
                    'routeName' => $routeName,
                    'formFields' => $formFields ?? null,
                ])
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 83. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/edit.blade.php`  
**Size:** 993 bytes  
**Modified:** 2025-12-07 08:14:00

----------------------------------------------------------------------

@extends('layouts.app')

@php
    $title = $title ?? 'ÿ¢€åÿ™ŸÖ';
    $routeName = $routeName ?? 'admin.sections';
    $item = $item ?? null;
@endphp

@section('title', 'Ÿà€åÿ±ÿß€åÿ¥ ' . $title)

@section('content')
    <div class="container py-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">Ÿà€åÿ±ÿß€åÿ¥ {{ $title }}</h3>
            <a href="{{ route($routeName . '.index') }}" class="btn btn-outline-secondary btn-sm">
                ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ŸÑ€åÿ≥ÿ™
            </a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                @include('dashboard.admin.taxonomies._form', [
                    'mode' => 'edit',
                    'title' => $title,
                    'routeName' => $routeName,
                    'item' => $item,
                    'formFields' => $formFields ?? null,
                ])
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 84. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/fields/create.blade.php`  
**Size:** 3,024 bytes  
**Modified:** 2025-12-07 17:30:23

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/fields/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß') . ' | ÿß€åÿ¨ÿßÿØ')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿß€åÿ¨ÿßÿØ {{ $title ?? 'ÿ≤ŸÖ€åŸÜŸá' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- branch_id --}}
                <div class="mb-3">
                    <label class="form-label">ÿ¥ÿßÿÆŸá</label>
                    <select name="branch_id" class="form-select" required>
                        <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...</option>
                        @foreach($branches as $b)
                            <option value="{{ $b->id }}" {{ old('branch_id') == $b->id ? 'selected' : '' }}>
                                {{ $b->name_fa }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ÿ≤ŸÖ€åŸÜŸá</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 85. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/fields/edit.blade.php`  
**Size:** 3,256 bytes  
**Modified:** 2025-12-07 17:30:30

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/fields/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß') . ' | Ÿà€åÿ±ÿß€åÿ¥')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ÿà€åÿ±ÿß€åÿ¥ {{ $title ?? 'ÿ≤ŸÖ€åŸÜŸá' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- branch_id --}}
                @if(isset($branches))
                    <div class="mb-3">
                        <label class="form-label">ÿ¥ÿßÿÆŸá</label>
                        <select name="branch_id" class="form-select" required>
                            @foreach($branches as $b)
                                <option value="{{ $b->id }}"
                                    {{ old('branch_id', $item->branch_id) == $b->id ? 'selected' : '' }}>
                                    {{ $b->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ÿ≤ŸÖ€åŸÜŸá</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 86. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/fields/index.blade.php`  
**Size:** 4,460 bytes  
**Modified:** 2025-12-07 17:30:14

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/fields/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'ŸÜÿßŸÖ ÿ≤ŸÖ€åŸÜŸá', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">ŸÜÿßŸÖ ÿ¥ÿßÿÆŸá</th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>{{ $item->branch?->name_fa ?? '---' }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-muted py-4">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 87. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/grades/create.blade.php`  
**Size:** 4,517 bytes  
**Modified:** 2025-12-07 15:46:37

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/grades/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ÿæÿß€åŸá‚ÄåŸáÿß') . ' | ÿß€åÿ¨ÿßÿØ')

@section('content')
<div class="container-fluid py-3">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">
            ÿß€åÿ¨ÿßÿØ {{ $title ?? 'Ÿæÿß€åŸá' }}
        </h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">
            <i class="bi bi-arrow-right"></i>
            ÿ®ÿ±⁄Øÿ¥ÿ™
        </a>
    </div>

    {{-- Errors --}}
    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    {{-- Form Card --}}
    <div class="card shadow-sm">
        <div class="card-body">

            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- Parent: Section --}}
                @if(isset($sections))
                    <div class="mb-3">
                        <label class="form-label">ŸÖŸÇÿ∑ÿπ</label>
                        <select name="section_id" class="form-select" required>
                            <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...</option>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}"
                                    {{ old('section_id') == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- value (required in DB) --}}
                <div class="mb-3">
                    <label class="form-label">ÿπÿØÿØ Ÿæÿß€åŸá (value)</label>
                    <input type="number"
                           name="value"
                           class="form-control"
                           min="1"
                           required
                           value="{{ old('value') }}">
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ Ÿæÿß€åŸá</label>
                    <input type="text"
                           name="name_fa"
                           class="form-control"
                           required
                           value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text"
                           name="slug"
                           class="form-control"
                           required
                           value="{{ old('slug') }}">
                    <div class="form-text">ŸÖÿ´ÿßŸÑ: paye-aval</div>
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number"
                           name="sort_order"
                           class="form-control"
                           min="0"
                           value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input"
                           type="checkbox"
                           name="is_active"
                           value="1"
                           id="is_active"
                           {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                {{-- Submit --}}
                <div class="d-flex justify-content-end gap-2">
                    <button type="submit" class="btn btn-primary">
                        ÿ∞ÿÆ€åÿ±Ÿá
                    </button>
                    <a href="{{ route($routeName.'.index') }}" class="btn btn-light">
                        ÿßŸÜÿµÿ±ÿßŸÅ
                    </a>
                </div>

            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 88. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/grades/edit.blade.php`  
**Size:** 4,107 bytes  
**Modified:** 2025-12-07 15:59:07

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/grades/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'Ÿæÿß€åŸá‚ÄåŸáÿß') . ' | Ÿà€åÿ±ÿß€åÿ¥')

@section('content')
<div class="container-fluid py-3">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">
            Ÿà€åÿ±ÿß€åÿ¥ {{ $title ?? 'Ÿæÿß€åŸá' }}
        </h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">
            ÿ®ÿ±⁄Øÿ¥ÿ™
        </a>
    </div>

    {{-- Errors --}}
    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- Parent: Section --}}
                @if(isset($sections))
                    <div class="mb-3">
                        <label class="form-label">ŸÖŸÇÿ∑ÿπ</label>
                        <select name="section_id" class="form-select" required>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}"
                                    {{ old('section_id', $item->section_id) == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- value --}}
                <div class="mb-3">
                    <label class="form-label">ÿπÿØÿØ Ÿæÿß€åŸá (value)</label>
                    <input type="number"
                           name="value"
                           class="form-control"
                           min="1"
                           required
                           value="{{ old('value', $item->value) }}">
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ Ÿæÿß€åŸá</label>
                    <input type="text"
                           name="name_fa"
                           class="form-control"
                           required
                           value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text"
                           name="slug"
                           class="form-control"
                           required
                           value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number"
                           name="sort_order"
                           class="form-control"
                           min="0"
                           value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input"
                           type="checkbox"
                           name="is_active"
                           value="1"
                           id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 89. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/grades/index.blade.php`  
**Size:** 5,493 bytes  
**Modified:** 2025-12-07 15:49:26

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/grades/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'Ÿæÿß€åŸá‚ÄåŸáÿß'))

@php
    // ÿ≥ÿßÿÆÿ™ ŸÑ€åŸÜ⁄© ÿ≥Ÿàÿ±ÿ™ ÿ®ÿ±ÿß€å Ÿáÿ± ÿ≥ÿ™ŸàŸÜ
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? '';
    $currentDir  = $dir ?? '';
@endphp

@section('content')
<div class="container-fluid py-4">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'Ÿæÿß€åŸá‚ÄåŸáÿß' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    {{-- Success --}}
    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        {{-- ŸÜÿßŸÖ Ÿæÿß€åŸá --}}
                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'ŸÜÿßŸÖ Ÿæÿß€åŸá', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ÿßÿ≥ŸÑÿß⁄Ø --}}
                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ŸÖŸÇÿØÿßÿ± Ÿæÿß€åŸá --}}
                        <th class="text-nowrap">
                            {!! sortLink('value', 'ŸÖŸÇÿØÿßÿ± Ÿæÿß€åŸá', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥ --}}
                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ŸÜÿßŸÖ ŸÖŸÇÿ∑ÿπ (ŸÅÿπŸÑÿßŸã ÿ®ÿØŸàŸÜ ÿ≥Ÿàÿ±ÿ™) --}}
                        <th class="text-nowrap">ŸÜÿßŸÖ ŸÖŸÇÿ∑ÿπ</th>

                        {{-- Ÿàÿ∂ÿπ€åÿ™ --}}
                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            {{-- ŸÜÿßŸÖ Ÿæÿß€åŸá --}}
                            <td>{{ $item->name_fa }}</td>

                            {{-- ÿßÿ≥ŸÑÿß⁄Ø --}}
                            <td dir="ltr">{{ $item->slug }}</td>

                            {{-- ŸÖŸÇÿØÿßÿ± Ÿæÿß€åŸá --}}
                            <td>{{ $item->value }}</td>

                            {{-- ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥ --}}
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            {{-- ŸÜÿßŸÖ ŸÖŸÇÿ∑ÿπ --}}
                            <td>{{ $item->section?->name_fa ?? '---' }}</td>

                            {{-- Ÿàÿ∂ÿπ€åÿ™ --}}
                            <td>
                                @if ($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            {{-- ÿπŸÖŸÑ€åÿßÿ™ --}}
                            <td class="text-nowrap">
                                <a href="{{ route($routeName . '.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                <form action="{{ route($routeName . '.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="8" class="text-muted py-4">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        {{-- Pagination --}}
        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 90. form.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/partials/form.blade.php`  
**Size:** 2,611 bytes  
**Modified:** 2025-12-07 06:40:21

----------------------------------------------------------------------

@php $item = $item ?? null; @endphp

{{-- ÿß⁄Øÿ± FK ŸÑÿßÿ≤ŸÖ ÿØÿßÿ¥ÿ™ÿå Ÿáÿ± ⁄©ŸÜÿ™ÿ±ŸÑÿ± ÿØ€åÿ™ÿß ŸÖ€åÿØŸá Ÿà ÿß€åŸÜÿ¨ÿß ŸÖ€å‚ÄåÿÆŸàŸÜ€åŸÖ --}}
@if (isset($sections))
    <div class="mb-3">
        <label class="form-label">section_id</label>
        <select name="section_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ŸÖŸÇÿ∑ÿπ</option>
            @foreach ($sections as $s)
                <option value="{{ $s->id }}" @selected(old('section_id', $item->section_id ?? '') == $s->id)>
                    {{ $s->name_fa }}
                </option>
            @endforeach
        </select>
    </div>
@endif

@if (isset($branches))
    <div class="mb-3">
        <label class="form-label">branch_id</label>
        <select name="branch_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿßÿÆŸá</option>
            @foreach ($branches as $b)
                <option value="{{ $b->id }}" @selected(old('branch_id', $item->branch_id ?? '') == $b->id)>
                    {{ $b->name_fa }}
                </option>
            @endforeach
        </select>
    </div>
@endif

@if (isset($fields))
    <div class="mb-3">
        <label class="form-label">field_id</label>
        <select name="field_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤ŸÖ€åŸÜŸá</option>
            @foreach ($fields as $f)
                <option value="{{ $f->id }}" @selected(old('field_id', $item->field_id ?? '') == $f->id)>
                    {{ $f->name_fa }}
                </option>
            @endforeach
        </select>
    </div>
@endif

{{-- ŸÅ€åŸÑÿØŸáÿß€å ÿπŸÖŸàŸÖ€å --}}
<div class="mb-3">
    <label class="form-label">name_fa</label>
    <input name="name_fa" class="form-control" value="{{ old('name_fa', $item->name_fa ?? '') }}">
</div>

<div class="mb-3">
    <label class="form-label">slug</label>
    <input name="slug" class="form-control" value="{{ old('slug', $item->slug ?? '') }}">
</div>

<div class="mb-3">
    <label class="form-label">sort_order</label>
    <input type="number" name="sort_order" class="form-control" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
</div>

<div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" name="is_active" value="1" @checked(old('is_active', $item->is_active ?? true))>
    <label class="form-check-label">ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ</label>
</div>

@if ($errors->any())
    <div class="alert alert-danger">
        <ul class="mb-0">
            @foreach ($errors->all() as $e)
                <li>{{ $e }}</li>
            @endforeach
        </ul>
    </div>
@endif

......................................................................

----------------------------------------------------------------------

## üìÑ 91. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/sections/create.blade.php`  
**Size:** 3,107 bytes  
**Modified:** 2025-12-07 06:45:47

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . $title)

@section('content')
    <div class="container py-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="fw-bold">ŸÖÿØ€åÿ±€åÿ™ {{ $title }}</h3>
            <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
                + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
            </a>
        </div>

        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif

        <div class="card shadow-sm">
            <div class="card-body table-responsive">
                <table class="table table-bordered align-middle text-center">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            @foreach ($listColumns as $col)
                                <th>{{ $col }}</th>
                            @endforeach
                            <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                        </tr>
                    </thead>
                    <tbody>
                        @forelse($items as $i => $item)
                            <tr>
                                <td>{{ $items->firstItem() + $i }}</td>

                                @foreach ($listColumns as $col)
                                    <td>
                                        @if ($col === 'is_active')
                                            {!! $item->$col
                                                ? '<span class="badge bg-success">ŸÅÿπÿßŸÑ</span>'
                                                : '<span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>' !!}
                                        @else
                                            {{ $item->$col ?? '-' }}
                                        @endif
                                    </td>
                                @endforeach

                                <td class="text-nowrap">
                                    <a href="{{ route($routeName . '.edit', $item->id) }}"
                                        class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                    <form action="{{ route($routeName . '.destroy', $item->id) }}" method="POST"
                                        class="d-inline" onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                        @csrf
                                        @method('DELETE')
                                        <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                    </form>
                                </td>
                            </tr>
                        @empty
                            <tr>
                                <td colspan="99">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                            </tr>
                        @endforelse
                    </tbody>
                </table>

                {{ $items->links() }}
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 92. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/sections/edit.blade.php`  
**Size:** 775 bytes  
**Modified:** 2025-12-07 06:45:47

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿà€åÿ±ÿß€åÿ¥ ' . $title)

@section('content')
    <div class="container py-4">
        <h3 class="fw-bold mb-3">Ÿà€åÿ±ÿß€åÿ¥ {{ $title }}</h3>

        <div class="card shadow-sm">
            <div class="card-body">
                <form action="{{ route($routeName . '.update', $item->id) }}" method="POST">
                    @csrf
                    @method('PUT')

                    @include('dashboard.admin.taxonomies.partials.form', ['item' => $item])

                    <button class="btn btn-primary">ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å</button>
                    <a href="{{ route($routeName . '.index') }}" class="btn btn-secondary">ÿ®ÿßÿ≤⁄Øÿ¥ÿ™</a>
                </form>
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 93. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/sections/index.blade.php`  
**Size:** 4,502 bytes  
**Modified:** 2025-12-07 16:17:52

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/sections/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'ŸÖŸÇÿ∑ÿπ‚ÄåŸáÿß'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? '';
    $currentDir  = $dir ?? '';
@endphp

@section('content')
<div class="container-fluid py-4">

    {{-- Header --}}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'ŸÖŸÇÿ∑ÿπ‚ÄåŸáÿß' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        {{-- ŸÜÿßŸÖ ŸÖŸÇÿ∑ÿπ --}}
                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'ŸÜÿßŸÖ ŸÖŸÇÿ∑ÿπ', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ÿßÿ≥ŸÑÿß⁄Ø --}}
                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        {{-- ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥ --}}
                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥', $currentSort, $currentDir) !!}
                        </th>

                        {{-- Ÿàÿ∂ÿπ€åÿ™ --}}
                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>
                                @if ($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}" class="btn btn-sm btn-primary">
                                    Ÿà€åÿ±ÿß€åÿ¥
                                </a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}" method="POST"
                                      class="d-inline" onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="6" class="text-muted py-4">
                                ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ
                            </td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 94. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subfields/create.blade.php`  
**Size:** 3,036 bytes  
**Modified:** 2025-12-07 17:33:33

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subfields/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß') . ' | ÿß€åÿ¨ÿßÿØ')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿß€åÿ¨ÿßÿØ {{ $title ?? 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- field_id --}}
                <div class="mb-3">
                    <label class="form-label">ÿ≤ŸÖ€åŸÜŸá</label>
                    <select name="field_id" class="form-select" required>
                        <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...</option>
                        @foreach($fields as $f)
                            <option value="{{ $f->id }}" {{ old('field_id') == $f->id ? 'selected' : '' }}>
                                {{ $f->name_fa }}
                            </option>
                        @endforeach
                    </select>
                </div>

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 95. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subfields/edit.blade.php`  
**Size:** 3,265 bytes  
**Modified:** 2025-12-07 17:33:24

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subfields/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß') . ' | Ÿà€åÿ±ÿß€åÿ¥')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ÿà€åÿ±ÿß€åÿ¥ {{ $title ?? 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- field_id --}}
                @if(isset($fields))
                    <div class="mb-3">
                        <label class="form-label">ÿ≤ŸÖ€åŸÜŸá</label>
                        <select name="field_id" class="form-select" required>
                            @foreach($fields as $f)
                                <option value="{{ $f->id }}"
                                    {{ old('field_id', $item->field_id) == $f->id ? 'selected' : '' }}>
                                    {{ $f->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>
                @endif

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 96. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subfields/index.blade.php`  
**Size:** 4,476 bytes  
**Modified:** 2025-12-07 17:33:56

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subfields/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'ŸÜÿßŸÖ ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">ŸÜÿßŸÖ ÿ≤ŸÖ€åŸÜŸá</th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>{{ $item->field?->name_fa ?? '---' }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-muted py-4">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 97. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subject-types/create.blade.php`  
**Size:** 2,419 bytes  
**Modified:** 2025-12-07 17:39:41

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subject_types/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ŸÜŸàÿπ ÿØÿ±ÿ≥‚ÄåŸáÿß') . ' | ÿß€åÿ¨ÿßÿØ')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿß€åÿ¨ÿßÿØ {{ $title ?? 'ŸÜŸàÿπ ÿØÿ±ÿ≥' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ŸÜŸàÿπ ÿØÿ±ÿ≥</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa') }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug') }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 98. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subject-types/edit.blade.php`  
**Size:** 2,571 bytes  
**Modified:** 2025-12-07 17:39:32

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subject_types/edit.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ŸÜŸàÿπ ÿØÿ±ÿ≥‚ÄåŸáÿß') . ' | Ÿà€åÿ±ÿß€åÿ¥')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">Ÿà€åÿ±ÿß€åÿ¥ {{ $title ?? 'ŸÜŸàÿπ ÿØÿ±ÿ≥' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.update', $item->id) }}" method="POST">
                @csrf
                @method('PUT')

                {{-- name_fa --}}
                <div class="mb-3">
                    <label class="form-label">ŸÜÿßŸÖ ŸÜŸàÿπ ÿØÿ±ÿ≥</label>
                    <input type="text" name="name_fa" class="form-control"
                           required value="{{ old('name_fa', $item->name_fa) }}">
                </div>

                {{-- slug --}}
                <div class="mb-3">
                    <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                    <input type="text" name="slug" class="form-control"
                           required value="{{ old('slug', $item->slug) }}">
                </div>

                {{-- sort_order --}}
                <div class="mb-3">
                    <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                    <input type="number" name="sort_order" class="form-control"
                           min="0" value="{{ old('sort_order', $item->sort_order ?? 0) }}">
                </div>

                {{-- is_active --}}
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="is_active"
                           value="1" id="is_active"
                           {{ old('is_active', $item->is_active) ? 'checked' : '' }}>
                    <label class="form-check-label" for="is_active">
                        ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                    </label>
                </div>

                <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™</button>
            </form>
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 99. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subject-types/index.blade.php`  
**Size:** 4,329 bytes  
**Modified:** 2025-12-07 17:39:52

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subject_types/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'ŸÜŸàÿπ ÿØÿ±ÿ≥‚ÄåŸáÿß'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'ŸÜŸàÿπ ÿØÿ±ÿ≥‚ÄåŸáÿß' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('name_fa', 'ŸÜÿßŸÖ ŸÜŸàÿπ ÿØÿ±ÿ≥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->name_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="6" class="text-muted py-4">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 100. create.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subjects/create.blade.php`  
**Size:** 11,533 bytes  
**Modified:** 2025-12-08 13:00:22

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subjects/create.blade.php --}}
@extends('layouts.app')

@section('title', ($title ?? 'ÿØÿ±Ÿàÿ≥') . ' | ÿß€åÿ¨ÿßÿØ')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold mb-0">ÿß€åÿ¨ÿßÿØ {{ $title ?? 'ÿØÿ±ÿ≥' }}</h5>
        <a href="{{ route($routeName.'.index') }}" class="btn btn-sm btn-outline-secondary">ÿ®ÿ±⁄Øÿ¥ÿ™</a>
    </div>

    @if ($errors->any())
        <div class="alert alert-danger small">
            <ul class="mb-0">
                @foreach ($errors->all() as $err)
                    <li>{{ $err }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <form action="{{ route($routeName.'.store') }}" method="POST">
                @csrf

                <div class="row g-3">

                    <div class="col-md-6">
                        <label class="form-label">ŸÜÿßŸÖ ÿØÿ±ÿ≥</label>
                        <input type="text" name="title_fa" class="form-control"
                               required value="{{ old('title_fa') }}">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">ÿßÿ≥ŸÑÿß⁄Ø</label>
                        <input type="text" name="slug" class="form-control"
                               required value="{{ old('slug') }}">
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">⁄©ÿØ ÿØÿ±ÿ≥</label>
                        <input type="text" name="code" class="form-control"
                               value="{{ old('code') }}">
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">ÿ≥ÿßÿπÿ™</label>
                        <input type="number" name="hours" min="0" class="form-control"
                               value="{{ old('hours', 0) }}">
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">ÿ™ÿ±ÿ™€åÿ® ŸÜŸÖÿß€åÿ¥</label>
                        <input type="number" name="sort_order" min="0" class="form-control"
                               value="{{ old('sort_order', 0) }}">
                    </div>

                    {{-- =========================
                         Taxonomy FK (Smart)
                       ========================= --}}

                    {{-- ŸÖŸÇÿ∑ÿπ --}}
                    <div class="col-md-4">
                        <label class="form-label">ŸÖŸÇÿ∑ÿπ</label>
                        <select id="section_id" name="section_id" class="form-select" required
                                data-grades-url="{{ route('admin.api.grades.by-section', ':id') }}"
                                data-branches-url="{{ route('admin.api.branches.by-section', ':id') }}">
                            <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...</option>
                            @foreach($sections as $s)
                                <option value="{{ $s->id }}" {{ old('section_id') == $s->id ? 'selected' : '' }}>
                                    {{ $s->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>

                    {{-- Ÿæÿß€åŸá (Ÿàÿßÿ®ÿ≥ÿ™Ÿá ÿ®Ÿá ŸÖŸÇÿ∑ÿπ) --}}
                    <div class="col-md-4">
                        <label class="form-label">Ÿæÿß€åŸá</label>
                        <select id="grade_id" name="grade_id" class="form-select" required disabled>
                            <option value="">ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
                        </select>
                    </div>

                    {{-- ÿ¥ÿßÿÆŸá (Ÿàÿßÿ®ÿ≥ÿ™Ÿá ÿ®Ÿá ŸÖŸÇÿ∑ÿπ) --}}
                    <div class="col-md-4">
                        <label class="form-label">ÿ¥ÿßÿÆŸá</label>
                        <select id="branch_id" name="branch_id" class="form-select" required disabled
                                data-fields-url="{{ route('admin.api.fields.by-branch', ':id') }}">
                            <option value="">ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
                        </select>
                    </div>

                    {{-- ÿ≤ŸÖ€åŸÜŸá (Ÿàÿßÿ®ÿ≥ÿ™Ÿá ÿ®Ÿá ÿ¥ÿßÿÆŸá) --}}
                    <div class="col-md-4">
                        <label class="form-label">ÿ≤ŸÖ€åŸÜŸá</label>
                        <select id="field_id" name="field_id" class="form-select" required disabled
                                data-subfields-url="{{ route('admin.api.subfields.by-field', ':id') }}">
                            <option value="">ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
                        </select>
                    </div>

                    {{-- ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá (Ÿàÿßÿ®ÿ≥ÿ™Ÿá ÿ®Ÿá ÿ≤ŸÖ€åŸÜŸá / ÿßÿÆÿ™€åÿßÿ±€å) --}}
                    <div class="col-md-4">
                        <label class="form-label">ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                        <select id="subfield_id" name="subfield_id" class="form-select" disabled>
                            <option value="">---</option>
                        </select>
                    </div>

                    {{-- ŸÜŸàÿπ ÿØÿ±ÿ≥ (ÿßÿÆÿ™€åÿßÿ±€å / ŸÖÿ≥ÿ™ŸÇŸÑ) --}}
                    <div class="col-md-4">
                        <label class="form-label">ŸÜŸàÿπ ÿØÿ±ÿ≥ (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                        <select id="subject_type_id" name="subject_type_id" class="form-select">
                            <option value="">---</option>
                            @foreach($subjectTypes as $st)
                                <option value="{{ $st->id }}" {{ old('subject_type_id') == $st->id ? 'selected' : '' }}>
                                    {{ $st->name_fa }}
                                </option>
                            @endforeach
                        </select>
                    </div>

                    {{-- Active --}}
                    <div class="col-12">
                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" name="is_active"
                                   value="1" id="is_active" {{ old('is_active', 1) ? 'checked' : '' }}>
                            <label class="form-check-label" for="is_active">
                                ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                            </label>
                        </div>
                    </div>

                </div>

                <div class="mt-3">
                    <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá</button>
                </div>

            </form>
        </div>
    </div>
</div>
@endsection


@push('scripts')
<script>
document.addEventListener('DOMContentLoaded', () => {
    const section  = document.getElementById('section_id');
    const grade    = document.getElementById('grade_id');
    const branch   = document.getElementById('branch_id');
    const field    = document.getElementById('field_id');
    const subfield = document.getElementById('subfield_id');

    const oldGrade    = "{{ old('grade_id') }}";
    const oldBranch   = "{{ old('branch_id') }}";
    const oldField    = "{{ old('field_id') }}";
    const oldSubfield = "{{ old('subfield_id') }}";

    function reset(sel, placeholder="ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...", disable=true) {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        sel.disabled = disable;
    }

    function fill(sel, items, oldValue=null, placeholder="ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...") {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        items.forEach(i => {
            const opt = document.createElement('option');
            opt.value = i.id;
            opt.textContent = i.name_fa;
            if (oldValue && oldValue === i.id) opt.selected = true;
            sel.appendChild(opt);
        });
        sel.disabled = false;
    }

    async function get(url) {
        const r = await fetch(url, { headers: {Accept: 'application/json'} });
        if(!r.ok) return [];
        return await r.json();
    }

    async function loadGradesAndBranches(sectionId, useOld=true){
        reset(grade,  'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);
        reset(branch, 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);
        reset(field,  'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ', true);
        reset(subfield,'---', true);

        const gradesUrl   = section.dataset.gradesUrl.replace(':id', sectionId);
        const branchesUrl = section.dataset.branchesUrl.replace(':id', sectionId);

        const [gradesData, branchesData] = await Promise.all([
            get(gradesUrl),
            get(branchesUrl),
        ]);

        fill(grade, gradesData, useOld ? oldGrade : null, 'ÿßŸÜÿ™ÿÆÿßÿ® Ÿæÿß€åŸá...');
        fill(branch, branchesData, useOld ? oldBranch : null, 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿßÿÆŸá...');

        if(useOld && oldBranch){
            await loadFields(oldBranch, true);
        }
    }

    async function loadFields(branchId, useOld=true){
        reset(field, 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);
        reset(subfield,'---', true);

        const fieldsUrl = branch.dataset.fieldsUrl.replace(':id', branchId);
        const fieldsData = await get(fieldsUrl);

        fill(field, fieldsData, useOld ? oldField : null, 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤ŸÖ€åŸÜŸá...');

        if(useOld && oldField){
            await loadSubfields(oldField, true);
        }
    }

    async function loadSubfields(fieldId, useOld=true){
        reset(subfield,'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);

        const subfieldsUrl = field.dataset.subfieldsUrl.replace(':id', fieldId);
        const subfieldsData = await get(subfieldsUrl);

        if(subfieldsData.length){
            fill(subfield, subfieldsData, useOld ? oldSubfield : null, 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá (ÿßÿÆÿ™€åÿßÿ±€å)...');
        } else {
            reset(subfield,'---', false);
        }
    }

    section.addEventListener('change', async () => {
        if(!section.value){
            reset(grade,  'ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(branch, 'ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(field,  'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(subfield,'---');
            return;
        }
        await loadGradesAndBranches(section.value, false);
    });

    branch.addEventListener('change', async () => {
        if(!branch.value){
            reset(field, 'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(subfield,'---');
            return;
        }
        await loadFields(branch.value, false);
    });

    field.addEventListener('change', async () => {
        if(!field.value){
            reset(subfield,'---');
            return;
        }
        await loadSubfields(field.value, false);
    });

    // ŸÑŸàÿØ ÿßŸàŸÑ€åŸá ÿß⁄Øÿ± old section ÿØÿßÿ¥ÿ™
    if(section.value){
        loadGradesAndBranches(section.value, true);
    } else {
        reset(grade,  'ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
        reset(branch, 'ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
        reset(field,  'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
        reset(subfield,'---');
    }
});
</script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 101. edit.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subjects/edit.blade.php`  
**Size:** 4,588 bytes  
**Modified:** 2025-12-08 13:01:26

----------------------------------------------------------------------

@push('scripts')
<script>
document.addEventListener('DOMContentLoaded', () => {
    const section  = document.getElementById('section_id');
    const grade    = document.getElementById('grade_id');
    const branch   = document.getElementById('branch_id');
    const field    = document.getElementById('field_id');
    const subfield = document.getElementById('subfield_id');

    // ‚úÖ old() ÿß⁄Øÿ± ŸÅÿ±ŸÖ ÿÆÿ∑ÿß ÿÆŸàÿ±ÿØÿå Ÿà⁄Øÿ±ŸÜŸá ŸÖŸÇÿØÿßÿ± ŸÅÿπŸÑ€å ŸÖÿØŸÑ
    const oldGrade    = "{{ old('grade_id', $item->grade_id) }}";
    const oldBranch   = "{{ old('branch_id', $item->branch_id) }}";
    const oldField    = "{{ old('field_id', $item->field_id) }}";
    const oldSubfield = "{{ old('subfield_id', $item->subfield_id) }}";

    function reset(sel, placeholder="ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...", disable=true) {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        sel.disabled = disable;
    }

    function fill(sel, items, oldValue=null, placeholder="ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ...") {
        sel.innerHTML = `<option value="">${placeholder}</option>`;
        items.forEach(i => {
            const opt = document.createElement('option');
            opt.value = i.id;
            opt.textContent = i.name_fa;
            if (oldValue && oldValue === i.id) opt.selected = true;
            sel.appendChild(opt);
        });
        sel.disabled = false;
    }

    async function get(url) {
        const r = await fetch(url, { headers: {Accept: 'application/json'} });
        if(!r.ok) return [];
        return await r.json();
    }

    async function loadGradesAndBranches(sectionId){
        reset(grade,  'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);
        reset(branch, 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);
        reset(field,  'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ', true);
        reset(subfield,'---', true);

        const gradesUrl   = section.dataset.gradesUrl.replace(':id', sectionId);
        const branchesUrl = section.dataset.branchesUrl.replace(':id', sectionId);

        const [gradesData, branchesData] = await Promise.all([
            get(gradesUrl),
            get(branchesUrl),
        ]);

        fill(grade, gradesData, oldGrade, 'ÿßŸÜÿ™ÿÆÿßÿ® Ÿæÿß€åŸá...');
        fill(branch, branchesData, oldBranch, 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿßÿÆŸá...');

        if(oldBranch){
            await loadFields(oldBranch);
        }
    }

    async function loadFields(branchId){
        reset(field, 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);
        reset(subfield,'---', true);

        const fieldsUrl = branch.dataset.fieldsUrl.replace(':id', branchId);
        const fieldsData = await get(fieldsUrl);

        fill(field, fieldsData, oldField, 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤ŸÖ€åŸÜŸá...');

        if(oldField){
            await loadSubfields(oldField);
        }
    }

    async function loadSubfields(fieldId){
        reset(subfield,'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...', true);

        const subfieldsUrl = field.dataset.subfieldsUrl.replace(':id', fieldId);
        const subfieldsData = await get(subfieldsUrl);

        if(subfieldsData.length){
            fill(subfield, subfieldsData, oldSubfield, 'ÿßŸÜÿ™ÿÆÿßÿ® ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá (ÿßÿÆÿ™€åÿßÿ±€å)...');
        } else {
            reset(subfield,'---', false);
        }
    }

    section.addEventListener('change', async () => {
        if(!section.value){
            reset(grade,  'ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(branch, 'ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(field,  'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(subfield,'---');
            return;
        }

        // ŸàŸÇÿ™€å ⁄©ÿßÿ±ÿ®ÿ± ÿ™ÿ∫€å€åÿ± ÿØÿ≥ÿ™€å ÿØÿßÿØ old Ÿáÿß ÿØ€å⁄Øÿ± ŸÖŸÑÿß⁄© ŸÜ€åÿ≥ÿ™
        const sectionId = section.value;
        reset(grade,  'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...');
        reset(branch, 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...');
        await loadGradesAndBranches(sectionId);
    });

    branch.addEventListener('change', async () => {
        if(!branch.value){
            reset(field, 'ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ');
            reset(subfield,'---');
            return;
        }
        await loadFields(branch.value);
    });

    field.addEventListener('change', async () => {
        if(!field.value){
            reset(subfield,'---');
            return;
        }
        await loadSubfields(field.value);
    });

    // ‚úÖ ŸÑŸàÿØ ÿßŸàŸÑ€åŸá ÿ±Ÿà€å ŸÖŸÇÿßÿØ€åÿ± ŸÅÿπŸÑ€å ÿØÿ±ÿ≥
    if(section.value){
        loadGradesAndBranches(section.value);
    }
});
</script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 102. form.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subjects/form.blade.php`  
**Size:** 4,426 bytes  
**Modified:** 2025-12-07 06:38:34

----------------------------------------------------------------------

@php $item = $item ?? null; @endphp

<div class="row g-3">

    <div class="col-md-4">
        <label class="form-label">ŸÖŸÇÿ∑ÿπ (section)</label>
        <select name="section_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ®</option>
            @foreach ($sections as $s)
                <option value="{{ $s->id }}" @selected(old('section_id', $item->section_id ?? '') == $s->id)>
                    {{ $s->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">Ÿæÿß€åŸá (grade)</label>
        <select name="grade_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ®</option>
            @foreach ($grades as $g)
                <option value="{{ $g->id }}" @selected(old('grade_id', $item->grade_id ?? '') == $g->id)>
                    {{ $g->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">ÿ¥ÿßÿÆŸá (branch)</label>
        <select name="branch_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ®</option>
            @foreach ($branches as $b)
                <option value="{{ $b->id }}" @selected(old('branch_id', $item->branch_id ?? '') == $b->id)>
                    {{ $b->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">ÿ≤ŸÖ€åŸÜŸá (field)</label>
        <select name="field_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ®</option>
            @foreach ($fields as $f)
                <option value="{{ $f->id }}" @selected(old('field_id', $item->field_id ?? '') == $f->id)>
                    {{ $f->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá (subfield)</label>
        <select name="subfield_id" class="form-select">
            <option value="">ÿßÿÆÿ™€åÿßÿ±€å</option>
            @foreach ($subfields as $sf)
                <option value="{{ $sf->id }}" @selected(old('subfield_id', $item->subfield_id ?? '') == $sf->id)>
                    {{ $sf->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-4">
        <label class="form-label">ÿØÿ≥ÿ™Ÿá ÿØÿ±ÿ≥€å (subject type)</label>
        <select name="subject_type_id" class="form-select">
            <option value="">ÿßŸÜÿ™ÿÆÿßÿ®</option>
            @foreach ($subjectTypes as $st)
                <option value="{{ $st->id }}" @selected(old('subject_type_id', $item->subject_type_id ?? '') == $st->id)>
                    {{ $st->name_fa }}
                </option>
            @endforeach
        </select>
    </div>

    <div class="col-md-6">
        <label class="form-label">ÿπŸÜŸàÿßŸÜ ÿØÿ±ÿ≥</label>
        <input name="title_fa" class="form-control" value="{{ old('title_fa', $item->title_fa ?? '') }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">slug</label>
        <input name="slug" class="form-control" value="{{ old('slug', $item->slug ?? '') }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">⁄©ÿØ ÿØÿ±ÿ≥</label>
        <input name="code" class="form-control" value="{{ old('code', $item->code ?? '') }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">ÿ≥ÿßÿπÿ™</label>
        <input type="number" name="hours" class="form-control" value="{{ old('hours', $item->hours ?? 0) }}">
    </div>

    <div class="col-md-3">
        <label class="form-label">ÿ™ÿ±ÿ™€åÿ®</label>
        <input type="number" name="sort_order" class="form-control"
            value="{{ old('sort_order', $item->sort_order ?? 0) }}">
    </div>

    <div class="col-md-3 d-flex align-items-end">
        <div class="form-check">
            <input class="form-check-input" type="checkbox" name="is_active" value="1"
                @checked(old('is_active', $item->is_active ?? true))>
            <label class="form-check-label">ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ</label>
        </div>
    </div>
</div>

@if ($errors->any())
    <div class="alert alert-danger mt-3">
        <ul class="mb-0">
            @foreach ($errors->all() as $e)
                <li>{{ $e }}</li>
            @endforeach
        </ul>
    </div>
@endif

......................................................................

----------------------------------------------------------------------

## üìÑ 103. index.blade.php

**Path:** `resources/views/dashboard/admin/taxonomy/subjects/index.blade.php`  
**Size:** 5,372 bytes  
**Modified:** 2025-12-07 17:43:20

----------------------------------------------------------------------

{{-- resources/views/dashboard/admin/taxonomy/subjects/index.blade.php --}}
@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ' . ($title ?? 'ÿØÿ±Ÿàÿ≥'))

@php
    function sortLink($key, $label, $currentSort, $currentDir) {
        $dir = ($currentSort === $key && $currentDir === 'asc') ? 'desc' : 'asc';

        $arrow = '';
        if ($currentSort === $key) {
            $arrow = $currentDir === 'asc' ? '‚ñ≤' : '‚ñº';
        }

        $url = request()->fullUrlWithQuery(['sort' => $key, 'dir' => $dir]);

        return '<a href="'.$url.'" class="text-decoration-none text-dark fw-bold">'.$label.' '.$arrow.'</a>';
    }

    $currentSort = $sort ?? request('sort', 'sort_order');
    $currentDir  = $dir ?? request('dir', 'asc');
@endphp

@section('content')
<div class="container-fluid py-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="fw-bold mb-0">ŸÖÿØ€åÿ±€åÿ™ {{ $title ?? 'ÿØÿ±Ÿàÿ≥' }}</h3>

        <a href="{{ route($routeName . '.create') }}" class="btn btn-success">
            + ÿß€åÿ¨ÿßÿØ ÿ¨ÿØ€åÿØ
        </a>
    </div>

    @if (session('success'))
        <div class="alert alert-success small">{{ session('success') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body table-responsive">

            <table class="table table-bordered align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th style="width:60px">#</th>

                        <th class="text-nowrap">
                            {!! sortLink('title_fa', 'ŸÜÿßŸÖ ÿØÿ±ÿ≥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('slug', 'ÿßÿ≥ŸÑÿß⁄Ø', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('code', '⁄©ÿØ ÿØÿ±ÿ≥', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">ŸÖŸÇÿ∑ÿπ</th>
                        <th class="text-nowrap">Ÿæÿß€åŸá</th>
                        <th class="text-nowrap">ÿ¥ÿßÿÆŸá</th>
                        <th class="text-nowrap">ÿ≤ŸÖ€åŸÜŸá</th>
                        <th class="text-nowrap">ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá</th>
                        <th class="text-nowrap">ŸÜŸàÿπ ÿØÿ±ÿ≥</th>

                        <th class="text-nowrap">
                            {!! sortLink('sort_order', 'ÿ™ÿ±ÿ™€åÿ®', $currentSort, $currentDir) !!}
                        </th>

                        <th class="text-nowrap">
                            {!! sortLink('is_active', 'Ÿàÿ∂ÿπ€åÿ™', $currentSort, $currentDir) !!}
                        </th>

                        <th style="width:150px">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>

                <tbody>
                    @forelse($items as $i => $item)
                        <tr>
                            <td>{{ $items->firstItem() + $i }}</td>

                            <td>{{ $item->title_fa }}</td>
                            <td dir="ltr">{{ $item->slug }}</td>
                            <td>{{ $item->code ?? '-' }}</td>

                            <td>{{ $item->section?->name_fa ?? '---' }}</td>
                            <td>{{ $item->grade?->name_fa ?? '---' }}</td>
                            <td>{{ $item->branch?->name_fa ?? '---' }}</td>
                            <td>{{ $item->field?->name_fa ?? '---' }}</td>
                            <td>{{ $item->subfield?->name_fa ?? '---' }}</td>
                            <td>{{ $item->subjectType?->name_fa ?? '---' }}</td>

                            <td>{{ $item->sort_order ?? 0 }}</td>

                            <td>
                                @if($item->is_active)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>

                            <td class="text-nowrap">
                                <a href="{{ route($routeName.'.edit', $item->id) }}"
                                   class="btn btn-sm btn-primary">Ÿà€åÿ±ÿß€åÿ¥</a>

                                <form action="{{ route($routeName.'.destroy', $item->id) }}"
                                      method="POST"
                                      class="d-inline"
                                      onsubmit="return confirm('ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü');">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-danger">ÿ≠ÿ∞ŸÅ</button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="99" class="text-muted py-4">ÿØ€åÿ™ÿß€å€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ</td>
                        </tr>
                    @endforelse
                </tbody>
            </table>

        </div>

        <div class="card-footer bg-white">
            {{ $items->links() }}
        </div>
    </div>
</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 104. index.blade.php

**Path:** `resources/views/dashboard/admin/users/index.blade.php`  
**Size:** 5,866 bytes  
**Modified:** 2025-12-07 12:09:30

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ')

@section('content')
<div class="container-fluid py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">ŸÖÿØ€åÿ±€åÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ</h4>
    </div>

    {{-- Ÿæ€åÿßŸÖ‚ÄåŸáÿß --}}
    @if(session('success'))
        <div class="alert alert-success">{{ session('success') }}</div>
    @elseif(session('error'))
        <div class="alert alert-danger">{{ session('error') }}</div>
    @endif

    {{-- ŸÅ€åŸÑÿ™ÿ± Ÿà ÿ≥ÿ±⁄Ü --}}
    <form method="GET" class="row g-2 mb-3">
        <div class="col-12 col-md-4">
            <input type="text" name="q" value="{{ $q }}" class="form-control"
                   placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ŸÜÿßŸÖ €åÿß ÿ¥ŸÖÿßÿ±Ÿá">
        </div>

        <div class="col-12 col-md-3">
            <select name="role" class="form-select">
                <option value="all" @selected($role=='all')>ŸáŸÖŸá ŸÜŸÇÿ¥‚ÄåŸáÿß</option>
                <option value="admin" @selected($role=='admin')>ÿßÿØŸÖ€åŸÜ</option>
                <option value="teacher" @selected($role=='teacher')>ŸÖÿπŸÑŸÖ</option>
                <option value="student" @selected($role=='student')>ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</option>
                <option value="counselor" @selected($role=='counselor')>ŸÖÿ¥ÿßŸàÿ±</option>
            </select>
        </div>

        <div class="col-12 col-md-2">
            <button class="btn btn-primary w-100">ÿßÿπŸÖÿßŸÑ</button>
        </div>

        <div class="col-12 col-md-3 text-md-end">
            <a href="{{ route('admin.users.index') }}" class="btn btn-outline-secondary w-100">
                Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ŸÅ€åŸÑÿ™ÿ±Ÿáÿß
            </a>
        </div>
    </form>

    {{-- ÿ¨ÿØŸàŸÑ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ --}}
    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>ŸÜÿßŸÖ</th>
                        <th>ÿ¥ŸÖÿßÿ±Ÿá</th>
                        <th>ŸÜŸÇÿ¥</th>
                        <th>Ÿàÿ∂ÿπ€åÿ™</th>
                        <th class="text-nowrap">ÿ™ÿßÿ±€åÿÆ ÿ´ÿ®ÿ™</th>
                        <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                    </tr>
                </thead>
                <tbody>
                    @forelse($users as $u)
                        <tr>
                            <td>{{ $loop->iteration + ($users->currentPage()-1)*$users->perPage() }}</td>
                            <td>{{ $u->name ?? '---' }}</td>
                            <td>{{ $u->phone }}</td>
                            <td>
                                <span class="badge bg-secondary">{{ $u->role ?? 'guest' }}</span>
                            </td>
                            <td>
                                @if($u->is_active ?? true)
                                    <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                @else
                                    <span class="badge bg-danger">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                @endif
                            </td>
                            <td class="small text-muted text-nowrap">
                                {{ $u->created_at?->format('Y/m/d') }}
                            </td>

                            <td class="text-end">
                                {{-- ŸÖÿ¥ÿßŸáÿØŸá --}}
                                <a href="{{ route('admin.users.show', $u->id) }}"
                                   class="btn btn-sm btn-outline-primary">
                                    ŸÖÿ¥ÿßŸáÿØŸá
                                </a>

                                {{-- ŸÅÿπÿßŸÑ/ÿ∫€åÿ±ŸÅÿπÿßŸÑ --}}
                                <form action="{{ route('admin.users.update', $u->id) }}"
                                      method="POST" class="d-inline">
                                    @csrf
                                    @method('PUT')
                                    <input type="hidden" name="is_active" value="{{ ($u->is_active ?? true) ? 0 : 1 }}">
                                    <button class="btn btn-sm btn-outline-warning"
                                            onclick="return confirm('Ÿàÿ∂ÿπ€åÿ™ ⁄©ÿßÿ±ÿ®ÿ± ÿ™ÿ∫€å€åÿ± ⁄©ŸÜÿØÿü')">
                                        {{ ($u->is_active ?? true) ? 'ÿ∫€åÿ±ŸÅÿπÿßŸÑ' : 'ŸÅÿπÿßŸÑ' }}
                                    </button>
                                </form>

                                {{-- ÿ≠ÿ∞ŸÅ --}}
                                <form action="{{ route('admin.users.destroy', $u->id) }}"
                                      method="POST" class="d-inline">
                                    @csrf
                                    @method('DELETE')
                                    <button class="btn btn-sm btn-outline-danger"
                                            onclick="return confirm('ÿ≠ÿ∞ŸÅ ⁄©ÿßÿ±ÿ®ÿ±ÿü')">
                                        ÿ≠ÿ∞ŸÅ
                                    </button>
                                </form>
                            </td>
                        </tr>
                    @empty
                        <tr>
                            <td colspan="7" class="text-center text-muted py-4">
                                ⁄©ÿßÿ±ÿ®ÿ±€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.
                            </td>
                        </tr>
                    @endforelse
                </tbody>
            </table>
        </div>
    </div>

    {{-- ÿµŸÅÿ≠Ÿá‚Äåÿ®ŸÜÿØ€å --}}
    <div class="mt-3">
        {{ $users->links() }}
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 105. show.blade.php

**Path:** `resources/views/dashboard/admin/users/show.blade.php`  
**Size:** 3,896 bytes  
**Modified:** 2025-12-07 12:09:52

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ÿßÿ±ÿ®ÿ±')

@section('content')
<div class="container py-3">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ÿßÿ±ÿ®ÿ±</h4>
        <a href="{{ route('admin.users.index') }}" class="btn btn-outline-secondary btn-sm">
            ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
        </a>
    </div>

    @if(session('success'))
        <div class="alert alert-success">{{ session('success') }}</div>
    @elseif(session('error'))
        <div class="alert alert-danger">{{ session('error') }}</div>
    @endif

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="row g-3">

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">ŸÜÿßŸÖ</div>
                    <div>{{ $user->name ?? '---' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ</div>
                    <div>{{ $user->phone }}</div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">ŸÜŸÇÿ¥</div>
                    <div>{{ $user->role ?? 'guest' }}</div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">Ÿàÿ∂ÿπ€åÿ™</div>
                    <div>
                        @if($user->is_active ?? true)
                            <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                        @else
                            <span class="badge bg-danger">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                        @endif
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="fw-bold text-muted mb-1">ÿ™ÿßÿ±€åÿÆ ÿ´ÿ®ÿ™</div>
                    <div>{{ $user->created_at?->format('Y/m/d H:i') }}</div>
                </div>

            </div>

            <hr class="my-4">

            {{-- ŸÅÿ±ŸÖ Ÿà€åÿ±ÿß€åÿ¥ ÿ≥ÿ±€åÿπ --}}
            <form method="POST" action="{{ route('admin.users.update', $user->id) }}" class="row g-3">
                @csrf
                @method('PUT')

                <div class="col-md-4">
                    <label class="form-label">ŸÜÿßŸÖ</label>
                    <input type="text" name="name" value="{{ $user->name }}" class="form-control">
                </div>

                <div class="col-md-4">
                    <label class="form-label">ŸÜŸÇÿ¥</label>
                    <select name="role" class="form-select">
                        <option value="admin" @selected($user->role=='admin')>ÿßÿØŸÖ€åŸÜ</option>
                        <option value="teacher" @selected($user->role=='teacher')>ŸÖÿπŸÑŸÖ</option>
                        <option value="student" @selected($user->role=='student')>ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</option>
                        <option value="counselor" @selected($user->role=='counselor')>ŸÖÿ¥ÿßŸàÿ±</option>
                    </select>
                </div>

                <div class="col-md-4 d-flex align-items-end">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="is_active" value="1"
                               id="activeCheck" @checked($user->is_active ?? true)>
                        <label class="form-check-label" for="activeCheck">
                            ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ
                        </label>
                    </div>
                </div>

                <div class="col-12 text-end">
                    <button class="btn btn-primary">ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™</button>
                </div>
            </form>

        </div>
    </div>

</div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 106. analyze.blade.php

**Path:** `resources/views/dashboard/counselor/attempts/analyze.blade.php`  
**Size:** 3,462 bytes  
**Modified:** 2025-12-03 00:59:08

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Analyze Attempt')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">ÿ™ÿ≠ŸÑ€åŸÑ Attempt</h1>
                <div class="text-muted small">{{ $attempt->exam->title ?? '' }}</div>
            </div>
            <a href="{{ route('counselor.attempts.show', $attempt->id) }}" class="btn btn-outline-secondary">
                ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
            </a>
        </div>

        <form method="POST" action="{{ route('counselor.attempts.analyze.store', $attempt->id) }}">
            @csrf

            <div class="row g-3">

                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-header bg-white border-0">
                            <h2 class="h6 mb-0">ÿ™ÿ≠ŸÑ€åŸÑ ÿ™ÿ≠ÿµ€åŸÑ€å (Academic)</h2>
                        </div>
                        <div class="card-body">

                            <label class="form-label small">ŸÜŸÇÿßÿ∑ ŸÇŸàÿ™ ÿ™ÿ≠ÿµ€åŸÑ€å</label>
                            <textarea name="academic_strengths" class="form-control" rows="4" placeholder="ŸÖÿ´ŸÑÿßŸã: ÿØŸÇÿ™ ÿ®ÿßŸÑÿß ÿØÿ± ÿ™ÿ≥ÿ™‚ÄåŸáÿß€å ŸÅÿµŸÑ 1">
{{ old('academic_strengths', optional($attempt->counselorAnalysis)->academic_strengths) }}</textarea>

                            <label class="form-label small mt-3">ŸÜŸÇÿßÿ∑ ÿ∂ÿπŸÅ ÿ™ÿ≠ÿµ€åŸÑ€å</label>
                            <textarea name="academic_weaknesses" class="form-control" rows="4"
                                placeholder="ŸÖÿ´ŸÑÿßŸã: ÿ∂ÿπŸÅ ÿØÿ± ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≥ÿÆÿ™ Ÿà ÿ≤ŸÖÿßŸÜ‚ÄåÿØÿßÿ±">
{{ old('academic_weaknesses', optional($attempt->counselorAnalysis)->academic_weaknesses) }}</textarea>

                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="card shadow-sm border-0">
                        <div class="card-header bg-white border-0">
                            <h2 class="h6 mb-0">ÿ™ÿ≠ŸÑ€åŸÑ Ÿæÿ±Ÿàÿ±ÿ¥€å/ÿ±Ÿàÿ≠€å (Developmental)</h2>
                        </div>
                        <div class="card-body">

                            <label class="form-label small">€åÿßÿØÿØÿßÿ¥ÿ™‚ÄåŸáÿß€å ÿ±Ÿàÿ≠€å Ÿà Ÿæÿ±Ÿàÿ±ÿ¥€å</label>
                            <textarea name="developmental_notes" class="form-control" rows="5"
                                placeholder="ŸÖÿ´ŸÑÿßŸã: ÿßÿ∂ÿ∑ÿ±ÿßÿ® ÿØÿ± ŸÖŸàÿßÿ¨ŸáŸá ÿ®ÿß ÿ≥ŸàÿßŸÑÿßÿ™ ÿ®ŸÑŸÜÿØ">
{{ old('developmental_notes', optional($attempt->counselorAnalysis)->developmental_notes) }}</textarea>

                            <label class="form-label small mt-3">Ÿæ€åÿ¥ŸÜŸáÿßÿØ ŸÖÿ≥€åÿ± Ÿà ŸÖÿπÿ±ŸÅ€å ŸÖÿ™ÿÆÿµÿµ</label>
                            <textarea name="recommendations" class="form-control" rows="3"
                                placeholder="ŸÖÿ´ŸÑÿßŸã: Ÿæ€åÿ¥ŸÜŸáÿßÿØ ŸÖÿπŸÑŸÖ X Ÿà ÿ™ŸÖÿ±€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©Ÿàÿ™ÿßŸá">
{{ old('recommendations', optional($attempt->counselorAnalysis)->recommendations) }}</textarea>

                        </div>
                    </div>
                </div>

            </div>

            <div class="d-flex justify-content-end mt-3">
                <button class="btn btn-primary px-4">
                    ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ≠ŸÑ€åŸÑ
                </button>
            </div>

        </form>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 107. index.blade.php

**Path:** `resources/views/dashboard/counselor/attempts/index.blade.php`  
**Size:** 3,327 bytes  
**Modified:** 2025-12-03 00:58:16

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Student Attempts')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">AttemptŸáÿß€å {{ $student->name }}</h1>
                <div class="text-muted small">ŸÑ€åÿ≥ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØŸá Ÿà ŸÇÿßÿ®ŸÑ ÿ™ÿ≠ŸÑ€åŸÑ</div>
            </div>
            <a href="{{ route('counselor.students.show', $student->id) }}" class="btn btn-outline-secondary">
                ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá Ÿæÿ±ŸàŸÅÿß€åŸÑ
            </a>
        </div>

        <div class="card shadow-sm border-0">
            <div class="card-body">

                @if ($attempts->count() == 0)
                    <div class="alert alert-warning mb-0">
                        ŸáŸÜŸàÿ≤ Attempt€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                    </div>
                @else
                    <div class="table-responsive">
                        <table class="table align-middle">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>ÿ¢ÿ≤ŸÖŸàŸÜ</th>
                                    <th>ÿØÿ±ÿ≥</th>
                                    <th>ÿØÿ±ÿµÿØ</th>
                                    <th>ÿ™ÿßÿ±€åÿÆ</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($attempts as $i => $attempt)
                                    <tr>
                                        <td>{{ $attempts->firstItem() + $i }}</td>
                                        <td>{{ $attempt->exam->title ?? '‚Äî' }}</td>
                                        <td>{{ $attempt->exam->subject->title ?? ($attempt->exam->subject->name ?? '‚Äî') }}
                                        </td>
                                        <td>{{ $attempt->percent ?? 0 }}%</td>
                                        <td>{{ optional($attempt->submitted_at ?? $attempt->created_at)->format('Y/m/d') }}
                                        </td>
                                        <td class="text-end">
                                            <a class="btn btn-sm btn-outline-primary"
                                                href="{{ route('counselor.attempts.show', $attempt->id) }}">
                                                ŸÜÿ™€åÿ¨Ÿá
                                            </a>
                                            <a class="btn btn-sm btn-primary"
                                                href="{{ route('counselor.attempts.analyze.edit', $attempt->id) }}">
                                                ÿ™ÿ≠ŸÑ€åŸÑ
                                            </a>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-3">
                        {{ $attempts->links() }}
                    </div>
                @endif

            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 108. show.blade.php

**Path:** `resources/views/dashboard/counselor/attempts/show.blade.php`  
**Size:** 3,615 bytes  
**Modified:** 2025-12-03 00:58:46

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Attempt Result')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">ŸÜÿ™€åÿ¨Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ</h1>
                <div class="text-muted small">{{ $attempt->exam->title ?? '' }}</div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('counselor.attempts.analyze.edit', $attempt->id) }}" class="btn btn-primary">
                    ÿ™ÿ≠ŸÑ€åŸÑ ÿß€åŸÜ Attempt
                </a>
                <a href="{{ url()->previous() }}" class="btn btn-outline-secondary">
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
            </div>
        </div>

        <div class="row g-3">
            <div class="col-lg-4">
                <div class="card shadow-sm border-0">
                    <div class="card-body">
                        <div class="text-muted small">ÿØÿ±ÿµÿØ</div>
                        <div class="fs-3 fw-bold">{{ $attempt->percent ?? 0 }}%</div>
                        <hr>
                        <div class="text-muted small">ŸÜŸÖÿ±Ÿá</div>
                        <div class="fw-semibold">
                            {{ $attempt->score_obtained ?? ($attempt->score ?? 0) }}
                            /
                            {{ $attempt->score_total ?? 0 }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-8">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-0">
                        <h2 class="h6 mb-0">Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß</h2>
                    </div>
                    <div class="card-body text-muted small">
                        ŸÅÿπŸÑÿßŸã ŸÜŸÖÿß€åÿ¥ ⁄©ÿßŸÖŸÑ Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß ŸÖÿ´ŸÑ Student Result ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>
        </div>

        {{-- Existing counselor analysis preview --}}
        <div class="card shadow-sm border-0 mt-3">
            <div class="card-header bg-white border-0">
                <h2 class="h6 mb-0">ÿ™ÿ≠ŸÑ€åŸÑ ÿ´ÿ®ÿ™‚Äåÿ¥ÿØŸá ŸÖÿ¥ÿßŸàÿ±</h2>
            </div>
            <div class="card-body">
                @if ($attempt->counselorAnalysis)
                    <div class="mb-2">
                        <strong>ŸÜŸÇÿßÿ∑ ŸÇŸàÿ™ ÿ™ÿ≠ÿµ€åŸÑ€å:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->academic_strengths }}</div>
                    </div>
                    <div class="mb-2">
                        <strong>ŸÜŸÇÿßÿ∑ ÿ∂ÿπŸÅ ÿ™ÿ≠ÿµ€åŸÑ€å:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->academic_weaknesses }}</div>
                    </div>
                    <div class="mb-2">
                        <strong>€åÿßÿØÿØÿßÿ¥ÿ™‚ÄåŸáÿß€å Ÿæÿ±Ÿàÿ±ÿ¥€å/ÿ±Ÿàÿ≠€å:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->developmental_notes }}</div>
                    </div>
                    <div>
                        <strong>Ÿæ€åÿ¥ŸÜŸáÿßÿØŸáÿß:</strong>
                        <div class="text-muted">{{ $attempt->counselorAnalysis->recommendations }}</div>
                    </div>
                @else
                    <div class="text-muted small">
                        ŸáŸÜŸàÿ≤ ÿ™ÿ≠ŸÑ€åŸÑ€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                    </div>
                @endif
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 109. index.blade.php

**Path:** `resources/views/dashboard/counselor/index.blade.php`  
**Size:** 4,516 bytes  
**Modified:** 2025-12-03 00:57:03

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Counselor Dashboard')

@section('content')
    <div class="container-fluid">

        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h1 class="h4 mb-1">ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ŸÖÿ¥ÿßŸàÿ±</h1>
                <p class="text-muted mb-0">ŸÖÿØ€åÿ±€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß Ÿà ÿ™ÿ≠ŸÑ€åŸÑ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß</p>
            </div>

            <div class="d-flex gap-2 flex-wrap">
                <a href="{{ route('counselor.students.index') }}" class="btn btn-primary">
                    <i class="bi bi-people-fill me-1"></i> ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß
                </a>
                <a href="{{ route('counselor.learning-paths.index') }}" class="btn btn-outline-primary">
                    <i class="bi bi-signpost-split me-1"></i> ŸÖÿ≥€åÿ±Ÿáÿß€å Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å
                </a>
                <a href="{{ route('counselor.reports.index') }}" class="btn btn-outline-secondary">
                    <i class="bi bi-bar-chart-line me-1"></i> ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß
                </a>
            </div>
        </div>

        {{-- Stats row --}}
        @php $stats = $stats ?? []; @endphp
        <div class="row g-3 mb-4">

            <div class="col-md-4 col-sm-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small mb-1">ÿ™ÿπÿØÿßÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß</div>
                            <div class="fs-4 fw-bold">{{ $stats['students_count'] ?? 0 }}</div>
                        </div>
                        <i class="bi bi-people fs-2 text-primary"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-4 col-sm-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small mb-1">ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß€å ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ±</div>
                            <div class="fs-4 fw-bold">{{ $stats['pending_analyses'] ?? 0 }}</div>
                        </div>
                        <i class="bi bi-hourglass-split fs-2 text-warning"></i>
                    </div>
                </div>
            </div>

            <div class="col-md-4 col-sm-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <div class="text-muted small mb-1">ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß€å ⁄©ÿßŸÖŸÑ‚Äåÿ¥ÿØŸá</div>
                            <div class="fs-4 fw-bold">{{ $stats['completed_analyses'] ?? 0 }}</div>
                        </div>
                        <i class="bi bi-check-circle fs-2 text-success"></i>
                    </div>
                </div>
            </div>

        </div>

        {{-- Quick section --}}
        <div class="row g-3">
            <div class="col-lg-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                        <h2 class="h6 mb-0">ÿ¢ÿÆÿ±€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß€å ÿ´ÿ®ÿ™‚Äåÿ¥ÿØŸá</h2>
                        <a class="small text-decoration-none" href="{{ route('counselor.students.index') }}">
                            ŸÖÿ¥ÿßŸáÿØŸá ŸáŸÖŸá
                        </a>
                    </div>
                    <div class="card-body text-muted small">
                        ÿß€åŸÜ ÿ®ÿÆÿ¥ ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿ®ÿß ŸÑ€åÿ≥ÿ™ ŸàÿßŸÇÿπ€å Ÿæÿ± ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
                        <h2 class="h6 mb-0">AttemptŸáÿß€å ÿ¢ŸÖÿßÿØŸá ÿ™ÿ≠ŸÑ€åŸÑ</h2>
                    </div>
                    <div class="card-body text-muted small">
                        ÿß€åŸÜ ÿ®ÿÆÿ¥ ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿ®ÿß attemptŸáÿß€å ÿ®ÿØŸàŸÜ ÿ™ÿ≠ŸÑ€åŸÑ Ÿæÿ± ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 110. create.blade.php

**Path:** `resources/views/dashboard/counselor/learning-paths/create.blade.php`  
**Size:** 546 bytes  
**Modified:** 2025-12-03 02:05:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Create Learning Path')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">ÿß€åÿ¨ÿßÿØ ŸÖÿ≥€åÿ± Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å ÿ®ÿ±ÿß€å {{ $student->name }}</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ŸÅÿ±ŸÖ ÿ≥ÿßÿÆÿ™ ŸÖÿ≥€åÿ± ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.
                ŸÅÿπŸÑÿßŸã ŸÅŸÇÿ∑ ÿßÿ≥⁄©ŸÑÿ™ ÿß€åŸÜ ÿµŸÅÿ≠Ÿá ÿ¢ŸÖÿßÿØŸá ÿßÿ≥ÿ™.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 111. index.blade.php

**Path:** `resources/views/dashboard/counselor/learning-paths/index.blade.php`  
**Size:** 520 bytes  
**Modified:** 2025-12-03 00:59:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Learning Paths')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">ŸÖÿ≥€åÿ±Ÿáÿß€å Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ÿØÿ± ŸÅÿßÿ≤ 1 ŸÅŸÇÿ∑ ÿ≥ÿßÿÆÿ™ÿßÿ± ÿ¢ŸÖÿßÿØŸá ÿßÿ≥ÿ™.
                ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ŸÖÿ≥€åÿ±Ÿáÿß€å Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å ÿ´ÿ®ÿ™ Ÿà ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 112. profile.blade.php

**Path:** `resources/views/dashboard/counselor/profile.blade.php`  
**Size:** 457 bytes  
**Modified:** 2025-12-03 01:01:11

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Counselor Profile')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿ¥ÿßŸàÿ±</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ŸÅÿ±ŸÖ Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿ¥ÿßŸàÿ± ŸÖÿ¥ÿßÿ®Ÿá Teacher/Student ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿ™⁄©ŸÖ€åŸÑ ŸÖ€å‚Äåÿ¥ŸàÿØ.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 113. index.blade.php

**Path:** `resources/views/dashboard/counselor/reports/index.blade.php`  
**Size:** 429 bytes  
**Modified:** 2025-12-03 01:00:31

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Counselor Reports')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ŸÖÿ¥ÿßŸàÿ±</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ŸÑ€åÿ≥ÿ™ ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 114. show.blade.php

**Path:** `resources/views/dashboard/counselor/reports/show.blade.php`  
**Size:** 419 bytes  
**Modified:** 2025-12-03 01:00:51

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Report')

@section('content')
    <div class="container-fluid">
        <h1 class="h5 mb-3">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄Øÿ≤ÿßÿ±ÿ¥</h1>

        <div class="card shadow-sm border-0">
            <div class="card-body text-muted small">
                ŸÜŸÖÿß€åÿ¥ ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄Øÿ≤ÿßÿ±ÿ¥ ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿ™⁄©ŸÖ€åŸÑ ŸÖ€å‚Äåÿ¥ŸàÿØ.
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 115. index.blade.php

**Path:** `resources/views/dashboard/counselor/students/index.blade.php`  
**Size:** 2,677 bytes  
**Modified:** 2025-12-03 00:57:26

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Students')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h1 class="h5 mb-0">ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß</h1>
        </div>

        <div class="card shadow-sm border-0">
            <div class="card-body">

                @if ($students->count() == 0)
                    <div class="alert alert-warning mb-0">
                        ŸÅÿπŸÑÿßŸã ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.
                    </div>
                @else
                    <div class="table-responsive">
                        <table class="table align-middle">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>ŸÜÿßŸÖ</th>
                                    <th>ÿß€åŸÖ€åŸÑ</th>
                                    <th>ÿ™ÿßÿ±€åÿÆ ÿπÿ∂Ÿà€åÿ™</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($students as $i => $student)
                                    <tr>
                                        <td>{{ $students->firstItem() + $i }}</td>
                                        <td>{{ $student->name }}</td>
                                        <td>{{ $student->email }}</td>
                                        <td>{{ optional($student->created_at)->format('Y/m/d') }}</td>
                                        <td class="text-end">
                                            <a class="btn btn-sm btn-outline-primary"
                                                href="{{ route('counselor.students.show', $student->id) }}">
                                                ŸÖÿ¥ÿßŸáÿØŸá
                                            </a>
                                            <a class="btn btn-sm btn-outline-secondary"
                                                href="{{ route('counselor.attempts.index', $student->id) }}">
                                                AttemptŸáÿß
                                            </a>
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-3">
                        {{ $students->links() }}
                    </div>
                @endif

            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 116. show.blade.php

**Path:** `resources/views/dashboard/counselor/students/show.blade.php`  
**Size:** 1,854 bytes  
**Modified:** 2025-12-03 00:57:55

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Student Profile')

@section('content')
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
                <h1 class="h5 mb-1">{{ $student->name }}</h1>
                <div class="text-muted small">{{ $student->email }}</div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('counselor.attempts.index', $student->id) }}" class="btn btn-primary">
                    AttemptŸáÿß
                </a>
                <a href="{{ route('counselor.learning-paths.create', $student->id) }}" class="btn btn-outline-primary">
                    ÿ≥ÿßÿÆÿ™ ŸÖÿ≥€åÿ± Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å
                </a>
            </div>
        </div>

        <div class="row g-3">
            <div class="col-lg-6">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-0">
                        <h2 class="h6 mb-0">ÿÆŸÑÿßÿµŸá Ÿàÿ∂ÿπ€åÿ™</h2>
                    </div>
                    <div class="card-body text-muted small">
                        ÿß€åŸÜ ÿ®ÿÆÿ¥ ÿØÿ± ŸÅÿßÿ≤ ÿ®ÿπÿØ€å ÿ®ÿß ÿ¢ŸÖÿßÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß Ÿà Ÿæ€åÿ¥ÿ±ŸÅÿ™ Ÿæÿ± ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-white border-0">
                        <h2 class="h6 mb-0">ÿ¢ÿÆÿ±€åŸÜ ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß</h2>
                    </div>
                    <div class="card-body text-muted small">
                        ÿß€åŸÜ ÿ®ÿÆÿ¥ ÿ®ÿπÿØÿßŸã ÿßÿ≤ counselor_analyses Ÿæÿ± ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 117. role-select.blade.php

**Path:** `resources/views/dashboard/role-select.blade.php`  
**Size:** 2,040 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥')

@section('content')
    <div class="container py-5">

        <div class="text-center mb-4">
            <h4 class="fw-bold">ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥</h4>
            <p class="text-muted small">ÿ®ÿ±ÿß€å ÿßŸàŸÑ€åŸÜ Ÿàÿ±ŸàÿØÿå ŸÜŸÇÿ¥ ÿÆŸàÿØ ÿ±ÿß ŸÖÿ¥ÿÆÿµ ⁄©ŸÜ€åÿØ ÿ™ÿß Ÿàÿßÿ±ÿØ ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿ¥Ÿà€åÿØ.</p>
        </div>

        @if ($errors->any())
            <div class="alert alert-warning small">
                ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ€åÿØ:
                <ul class="mb-0 mt-1">
                    @foreach ($errors->all() as $err)
                        <li>{{ $err }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3 justify-content-center">

            <div class="col-md-4">
                <form method="POST" action="{{ route('auth.setRole') }}">
                    @csrf
                    <input type="hidden" name="role" value="student">
                    <button class="btn btn-outline-primary w-100 py-4 h-100">
                        <i class="fas fa-user-graduate fa-3x mb-3"></i>
                        <div class="fw-bold">ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</div>
                        <div class="text-muted small">Ÿàÿ±ŸàÿØ ÿ®Ÿá ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</div>
                    </button>
                </form>
            </div>

            <div class="col-md-4">
                <form method="POST" action="{{ route('auth.setRole') }}">
                    @csrf
                    <input type="hidden" name="role" value="teacher">
                    <button class="btn btn-outline-success w-100 py-4 h-100">
                        <i class="fas fa-chalkboard-teacher fa-3x mb-3"></i>
                        <div class="fw-bold">ŸÖÿπŸÑŸÖ</div>
                        <div class="text-muted small">Ÿàÿ±ŸàÿØ ÿ®Ÿá ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ</div>
                    </button>
                </form>
            </div>

        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 118. result.blade.php

**Path:** `resources/views/dashboard/student/attempts/result.blade.php`  
**Size:** 29,395 bytes  
**Modified:** 2025-12-03 08:25:15

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ŸÜÿ™€åÿ¨Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;

            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;

            --edu-amber: #f59e0b;
            --edu-amber-2: #fbbf24;
            --edu-amber-soft: #fffbeb;

            --edu-red: #dc2626;
            --edu-red-soft: #fff1f2;

            --edu-gray: #0f172a;
            --edu-muted: #64748b;
            --edu-bg: #f8fafc;

            --radius-xl: 1.25rem;
            --radius-lg: 1rem;
        }

        .result-page {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-hero {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1.1rem 1.2rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 16px 40px rgba(37, 99, 235, .22);
            max-width: 1200px;
            margin-inline: auto;
        }

        .result-hero::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 320px;
            height: 320px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(15deg);
            opacity: .85;
            pointer-events: none;
        }

        .result-hero h3 {
            font-weight: 900;
            font-size: 1.25rem;
            margin: 0;
            display: flex;
            gap: .5rem;
            align-items: center;
        }

        .result-hero .sub {
            font-size: .85rem;
            color: rgba(255, 255, 255, .95);
            margin-top: .25rem;
        }

        .score-ring {
            width: 170px;
            height: 170px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            margin-inline: auto;
            background: conic-gradient(var(--edu-green) calc(var(--percent)*1%), #e2e8f0 0);
            position: relative;
            box-shadow: 0 12px 30px rgba(15, 23, 42, .12);
            animation: ringPop .8s ease both;
        }

        @keyframes ringPop {
            from {
                transform: scale(.9);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .score-ring::before {
            content: "";
            position: absolute;
            inset: 12px;
            background: #fff;
            border-radius: 50%;
            box-shadow: inset 0 0 0 2px #f1f5f9;
        }

        .score-ring .inner {
            position: relative;
            text-align: center;
        }

        .score-ring .percent {
            font-size: 2rem;
            font-weight: 900;
            color: var(--edu-gray);
            line-height: 1;
        }

        .score-ring .label {
            font-size: .8rem;
            font-weight: 800;
            color: var(--edu-muted);
            margin-top: .25rem;
        }

        .reward-card {
            border-radius: var(--radius-xl);
            background: #fff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            animation: cardIn .6s ease both;
        }

        @keyframes cardIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .reward-badge {
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            padding: .45rem .7rem;
            border-radius: 999px;
            font-weight: 900;
            font-size: .8rem;
            border: 1px solid transparent;
        }

        .reward-badge.gold {
            background: #fff7ed;
            color: #9a3412;
            border-color: #fed7aa;
        }

        .reward-badge.silver {
            background: #f8fafc;
            color: #334155;
            border-color: #e2e8f0;
        }

        .reward-badge.bronze {
            background: #fffbeb;
            color: #92400e;
            border-color: #fde68a;
        }

        .stat {
            border-radius: var(--radius-lg);
            background: #fff;
            border: 1px solid #e2e8f0;
            padding: .9rem 1rem;
            display: flex;
            gap: .75rem;
            align-items: center;
            box-shadow: 0 8px 18px rgba(15, 23, 42, .05);
        }

        .stat .icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            font-size: 1.2rem;
            font-weight: 900;
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            flex-shrink: 0;
        }

        .stat.green .icon {
            background: var(--edu-green-soft);
            color: var(--edu-green);
        }

        .stat.amber .icon {
            background: var(--edu-amber-soft);
            color: #92400e;
        }

        .stat .label {
            font-size: .78rem;
            color: var(--edu-muted);
            font-weight: 800;
        }

        .stat .value {
            font-size: 1.05rem;
            font-weight: 900;
            color: var(--edu-gray);
            margin-top: .1rem;
        }

        .motivate {
            border-radius: var(--radius-lg);
            padding: .9rem 1rem;
            border: 1px dashed #cbd5e1;
            background: #f8fafc;
            font-size: .9rem;
            line-height: 1.9;
            color: #334155;
            display: flex;
            align-items: start;
            gap: .6rem;
        }

        .motivate .emoji {
            font-size: 1.4rem;
            line-height: 1;
        }

        .motivate.good {
            border-color: #bbf7d0;
            background: #fbfffd;
        }

        .motivate.bad {
            border-color: #fde68a;
            background: #fffbeb;
        }

        .btn-cta {
            border-radius: .95rem;
            font-weight: 900;
            padding: .8rem 1rem;
            border: none;
            background: linear-gradient(135deg, var(--edu-blue), var(--edu-blue-2));
            box-shadow: 0 12px 28px rgba(37, 99, 235, .28);
            transition: .2s ease;
        }

        .btn-cta:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 34px rgba(37, 99, 235, .38);
        }

        .btn-ghost {
            border-radius: .95rem;
            font-weight: 900;
            padding: .8rem 1rem;
        }

        .reward-wrap {
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #ffffff, #f8fafc);
            border: 1px solid #e2e8f0;
            box-shadow: 0 12px 30px rgba(15, 23, 42, .06);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            max-width: 1200px;
            margin-inline: auto;
        }

        .reward-wrap::after {
            content: "";
            position: absolute;
            inset: -40% -20% auto auto;
            width: 260px;
            height: 260px;
            background: radial-gradient(circle, rgba(14, 165, 233, .18), transparent 70%);
            pointer-events: none;
        }

        .level-pill {
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            font-weight: 900;
            font-size: .9rem;
            padding: .45rem .8rem;
            border-radius: 999px;
            background: #0f172a;
            color: #fff;
            box-shadow: 0 10px 22px rgba(15, 23, 42, .22);
        }

        .checkpoint {
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 900;
            font-size: .9rem;
            background: #0ea5e90f;
            color: #0ea5e9;
            border: 1px solid #0ea5e933;
            padding: .6rem .8rem;
            border-radius: 1rem;
        }

        .medal {
            display: flex;
            align-items: center;
            gap: .75rem;
            padding: .9rem 1rem;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            background: #fff;
            transition: .2s ease;
        }

        .medal:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(37, 99, 235, .10);
        }

        .medal .icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            font-size: 1.6rem;
            font-weight: 900;
            flex-shrink: 0;
        }

        .medal.gold .icon {
            background: #fff7ed;
            color: #f59e0b;
            border: 1px solid #fde68a;
        }

        .medal.silver .icon {
            background: #eff6ff;
            color: #2563eb;
            border: 1px solid #bfdbfe;
        }

        .medal.bronze .icon {
            background: #ecfdf3;
            color: #16a34a;
            border: 1px solid #bbf7d0;
        }

        .medal .title {
            font-weight: 900;
            font-size: 1rem;
        }

        .medal .sub {
            font-size: .85rem;
            color: #64748b;
            font-weight: 700;
        }

        .next-box {
            border-radius: 1.25rem;
            padding: 1rem 1.1rem;
            border: 1px dashed #cbd5e1;
            background: #f8fafc;
        }

        .next-btn {
            border-radius: 1rem;
            font-weight: 900;
            padding: .85rem 1rem;
            background: linear-gradient(135deg, #2563eb, #0ea5e9);
            border: none;
            color: #fff;
            box-shadow: 0 12px 28px rgba(37, 99, 235, .28);
            transition: .2s ease;
        }

        .next-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 34px rgba(37, 99, 235, .38);
        }

        .pop-star {
            animation: pop .7s ease both;
        }

        @keyframes pop {
            0% {
                transform: scale(.6);
                opacity: 0
            }

            60% {
                transform: scale(1.1);
                opacity: 1
            }

            100% {
                transform: scale(1);
                opacity: 1
            }
        }

        .review-card {
            border-radius: var(--radius-xl);
            background: #fff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
            overflow: hidden;
            max-width: 1200px;
            margin-inline: auto;
        }

        .review-item {
            border-bottom: 1px dashed #e2e8f0;
            padding: 1rem 1.1rem;
        }

        .review-item:last-child {
            border-bottom: 0;
        }

        .ans-chip {
            font-size: .78rem;
            font-weight: 900;
            padding: .35rem .55rem;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            gap: .3rem;
        }

        .ans-chip.correct {
            background: var(--edu-green-soft);
            color: var(--edu-green);
            border: 1px solid #bbf7d0;
        }

        .ans-chip.wrong {
            background: var(--edu-red-soft);
            color: var(--edu-red);
            border: 1px solid #fecaca;
        }
    </style>
@endpush

@section('content')
    @php
        // ====== Ÿæÿß€åŸá + fallbacks ======
        $percent = (float) ($attempt->percent ?? ($attempt->percentage ?? 0));

        $scoreObtained = (int) ($attempt->score_obtained ?? ($attempt->score ?? 0));

        $scoreTotal =
            (int) ($attempt->score_total ?? ($attempt->total_score ?? ($exam?->questions?->sum('score') ?? 0)));

        // ====== answers relation vs answers JSON ======
        $attemptAnswerModels = collect($attempt->getRelation('answers') ?? []);

        if ($attemptAnswerModels->isEmpty() && is_array($attempt->answers ?? null)) {
            // answers JSON: [question_id => user_answer]
            $attemptAnswerModels = collect($attempt->answers)->map(function ($userAns, $qid) use ($exam) {
                $q = $exam?->questions?->firstWhere('id', (int) $qid);
                return (object) [
                    'question' => $q,
                    'answer' => $userAns,
                    'is_correct' => null, // ⁄ÜŸàŸÜ JSON Ÿáÿ≥ÿ™ÿå ÿØÿ±ÿ≥ÿ™/ÿ∫ŸÑÿ∑ ŸÜÿØÿßÿ±€åŸÖ
                ];
            });
        }

        $wrongAnswers = $attemptAnswerModels->filter(fn($a) => (int) ($a->is_correct ?? 0) === 0);
        $correctAnswers = $attemptAnswerModels->filter(fn($a) => (int) ($a->is_correct ?? 0) === 1);

        $correctCount = $correctAnswers->count();
        $wrongCount = $wrongAnswers->count();

        // ====== Ÿæ€åÿßŸÖ ÿßŸÜ⁄Ø€åÿ≤ÿ¥€å ======
        if ($percent >= 85) {
            $statusTitle = 'ŸÅŸàŸÇ‚ÄåÿßŸÑÿπÿßÿØŸá ÿ®ŸàÿØ€å! üåü';
            $statusMsg = 'ÿ™Ÿà ŸàÿßŸÇÿπÿßŸã ÿ¢ŸÖÿßÿØŸá‚Äåÿß€å ÿ≥ÿ∑ÿ≠ ÿ®ÿπÿØ€å ÿ±Ÿà ÿ®ÿ≤ŸÜ€å. ÿ®ÿ±€åŸÖ €åŸá ÿ¢ÿ≤ŸÖŸàŸÜ ÿ≥ÿÆÿ™‚Äåÿ™ÿ±ÿü';
            $badge = 'gold';
            $nextHint = '⁄ÜÿßŸÑÿ¥ ÿßŸÖÿ±Ÿàÿ≤ÿ™ ÿ±Ÿà ⁄©ÿßŸÖŸÑ ⁄©ÿ±ÿØ€åÿõ ÿ≥ÿ∑ÿ≠ ÿ®ÿπÿØ€å ŸÖŸÜÿ™ÿ∏ÿ±ÿ™Ÿá!';
        } elseif ($percent >= 60) {
            $statusTitle = 'ÿÆ€åŸÑ€å ÿÆŸàÿ® Ÿæ€åÿ¥ ÿ±ŸÅÿ™€å! üí™';
            $statusMsg = '⁄ÜŸÜÿØÿ™ÿß ŸÜ⁄©ÿ™Ÿá ŸÖŸàŸÜÿØŸá ÿ™ÿß ÿπÿßŸÑ€å ÿ¥€å. ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿπÿØ€å ÿ±Ÿà ÿ®ÿ≤ŸÜ ÿ™ÿß ÿ±⁄©Ÿàÿ±ÿØÿ™ ÿ±Ÿà ÿ®ÿ¥⁄©ŸÜ€å.';
            $badge = 'silver';
            $nextHint = 'ŸÅŸÇÿ∑ ⁄ÜŸÜÿØ ŸÇÿØŸÖ ÿ™ÿß ÿ≥ÿ∑ÿ≠ ŸÇŸáÿ±ŸÖÿßŸÜ€å ŸÅÿßÿµŸÑŸá ÿØÿßÿ±€å.';
        } else {
            $statusTitle = 'ÿ¥ÿ±Ÿàÿπ ÿÆŸàÿ®€å ÿ®ŸàÿØ! üöÄ';
            $statusMsg = 'ÿßÿ¥ÿ™ÿ®ÿßŸá‚ÄåŸáÿß €åÿπŸÜ€å ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å. €åŸá ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©Ÿàÿ™ÿßŸá‚Äåÿ™ÿ± ÿ®ÿ≤ŸÜ ÿ™ÿß ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ± ŸÇŸà€å ÿ¥€å.';
            $badge = 'bronze';
            $nextHint = 'Ÿáÿ± ŸÇŸáÿ±ŸÖÿßŸÜ€å ÿßŸàŸÑÿ¥ ⁄ÜŸÜÿØ ÿ®ÿßÿ± ÿ≤ŸÖ€åŸÜ ŸÖ€å‚ÄåÿÆŸàÿ±Ÿá.';
        }

        // ====== LevelUp / Next exam suggestion ======
        if ($percent >= 85) {
            $levelUpText = 'ÿ≥ÿ∑ÿ≠ €≤ ÿ®ÿßÿ≤ ÿ¥ÿØ üéâ';
            $medalType = 'gold';
            $medalTitle = 'ŸÖÿØÿßŸÑ ÿ∑ŸÑÿß€å€å ⁄Øÿ±ŸÅÿ™€å!';
            $medalSub = 'ÿ™Ÿà ÿ¢ŸÖÿßÿØŸá‚Äå€å ⁄ÜÿßŸÑÿ¥ ÿ≥ÿÆÿ™‚Äåÿ™ÿ± Ÿáÿ≥ÿ™€å.';
            $nextMsg = '€åŸá ÿ¢ÿ≤ŸÖŸàŸÜ ÿßŸÑŸÖŸæ€åÿßÿØ€å/ÿ≥ÿÆÿ™‚Äåÿ™ÿ± ÿ®ÿ≤ŸÜ Ÿà ÿ±⁄©Ÿàÿ±ÿØ ÿ±Ÿà ÿ®ÿßŸÑÿß ÿ®ÿ®ÿ±.';
            $nextFilter = 'olympiad';
            $nextIcon = 'bi-award-fill';
        } elseif ($percent >= 60) {
            $levelUpText = 'ÿ≥ÿ∑ÿ≠ €±Ÿ´€µ ŸÅÿπÿßŸÑ ÿ¥ÿØ ‚ú®';
            $medalType = 'silver';
            $medalTitle = 'ŸÖÿØÿßŸÑ ŸÜŸÇÿ±Ÿá ⁄Øÿ±ŸÅÿ™€å!';
            $medalSub = 'ŸÅŸÇÿ∑ ⁄ÜŸÜÿØ ŸÇÿØŸÖ ÿ™ÿß ÿ∑ŸÑÿß€å€å ÿ¥ÿØŸÜ ŸÅÿßÿµŸÑŸá ÿØÿßÿ±€å.';
            $nextMsg = '€å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖÿ¥ÿßÿ®Ÿá ÿ®ÿ≤ŸÜ ÿ™ÿß ÿ±⁄©Ÿàÿ±ÿØÿ™Ÿà ÿ®ÿ¥⁄©ŸÜ€å.';
            $nextFilter = 'konkur';
            $nextIcon = 'bi-bullseye';
        } else {
            $levelUpText = 'ÿ¥ÿ±Ÿàÿπ ŸÖÿ≥€åÿ± ŸÇŸáÿ±ŸÖÿßŸÜ€å üß†';
            $medalType = 'bronze';
            $medalTitle = 'ŸÖÿØÿßŸÑ ÿ®ÿ±ŸÜÿ≤€å ⁄Øÿ±ŸÅÿ™€å!';
            $medalSub = 'ÿßÿ¥ÿ™ÿ®ÿßŸá €åÿπŸÜ€å €åÿßÿØ⁄Ø€åÿ±€åÿõ ÿß€åŸÜ ÿØŸÇ€åŸÇÿßŸã ÿÆŸàÿ®Ÿá.';
            $nextMsg = '€å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÇŸà€åÿ™€å ⁄©Ÿàÿ™ÿßŸá‚Äåÿ™ÿ± ÿ®ÿ≤ŸÜ ÿ™ÿß ÿ≥ÿ±€åÿπ ŸÇŸà€å ÿ¥€å.';
            $nextFilter = 'taghviyati';
            $nextIcon = 'bi-lightning-fill';
        }

        // ====== Back route smart ======
        $backRoute =
            $exam?->scope === 'free' || $exam?->is_public
                ? route('student.exams.public')
                : route('student.exams.index');
    @endphp

    <div class="result-page container py-3 py-md-4">

        {{-- ================= HERO ================= --}}
        <div class="result-hero mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                    <h3>
                        <i class="bi bi-trophy"></i>
                        ŸÜÿ™€åÿ¨Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ
                    </h3>
                    <div class="sub">
                        ÿ¢ÿ≤ŸÖŸàŸÜ: <span class="fw-bold">{{ $exam?->title ?? '‚Äî' }}</span>
                    </div>
                </div>
                <a href="{{ $backRoute }}" class="btn btn-light btn-sm fw-bold">
                    <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
            </div>
        </div>

        {{-- ================= SCORE + REWARD SUMMARY ================= --}}
        <div class="row g-3 align-items-stretch mb-3" style="max-width:1200px;margin-inline:auto;">
            <div class="col-12 col-lg-4">
                <div class="reward-card h-100 text-center">
                    <div class="score-ring mx-auto" style="--percent: {{ $percent }};">
                        <div class="inner">
                            <div class="percent">{{ round($percent) }}%</div>
                            <div class="label">ÿØÿ±ÿµÿØ ÿ¥ŸÖÿß</div>
                        </div>
                    </div>

                    <div class="mt-3 fw-bold fs-5">{{ $statusTitle }}</div>
                    <div class="text-muted small mt-1">{{ $statusMsg }}</div>

                    <div class="small text-muted mt-2 fw-bold">
                        ÿØÿ±ÿ≥ÿ™: <span class="text-success">{{ $correctCount }}</span>
                        |
                        ÿ∫ŸÑÿ∑: <span class="text-danger">{{ $wrongCount }}</span>
                    </div>

                    <div class="mt-3">
                        <span class="reward-badge {{ $badge }}">
                            <i class="bi bi-award-fill"></i>
                            ŸÜÿ¥ÿßŸÜ ÿßŸÖÿ±Ÿàÿ≤
                            @if ($badge == 'gold')
                                ÿ∑ŸÑÿß€å€å
                            @elseif($badge == 'silver')
                                ŸÜŸÇÿ±Ÿá‚Äåÿß€å
                            @else
                                ÿ®ÿ±ŸÜÿ≤€å
                            @endif
                        </span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-8">
                <div class="reward-card h-100">
                    <div class="row g-3">
                        <div class="col-12 col-md-4">
                            <div class="stat green">
                                <div class="icon"><i class="bi bi-check-circle"></i></div>
                                <div>
                                    <div class="label">ÿ™ÿπÿØÿßÿØ ÿØÿ±ÿ≥ÿ™</div>
                                    <div class="value">{{ $correctCount }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4">
                            <div class="stat">
                                <div class="icon"><i class="bi bi-x-circle"></i></div>
                                <div>
                                    <div class="label">ÿ™ÿπÿØÿßÿØ ÿ∫ŸÑÿ∑</div>
                                    <div class="value">{{ $wrongCount }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-md-4">
                            <div class="stat amber">
                                <div class="icon"><i class="bi bi-stars"></i></div>
                                <div>
                                    <div class="label">ÿßŸÖÿ™€åÿßÿ≤ ⁄©ŸÑ</div>
                                    <div class="value">{{ $scoreObtained }} / {{ $scoreTotal }}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="motivate good mt-3">
                        <div class="emoji">üéØ</div>
                        <div>
                            <div class="fw-bold">ŸÜ⁄©ÿ™Ÿá‚Äå€å ŸÖŸáŸÖ:</div>
                            {{ $nextHint }}
                        </div>
                    </div>

                    @if ($percent < 60)
                        <div class="motivate bad mt-2">
                            <div class="emoji">üî•</div>
                            <div>
                                <div class="fw-bold">⁄ÜÿßŸÑÿ¥ ÿ®ÿπÿØ€å ÿ®ÿ±ÿß€å ÿ±ÿ¥ÿØ ÿ≥ÿ±€åÿπ:</div>
                                €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÇŸà€åÿ™€å ⁄©Ÿàÿ™ÿßŸá ÿ®ÿ≤ŸÜÿõ ŸÖÿπŸÖŸàŸÑÿßŸã ÿ®ÿπÿØ ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ ÿØŸàŸÖÿå ÿ¨Ÿáÿ¥ ŸÜŸÖÿ±Ÿá ŸÖ€å‚Äåÿ®€åŸÜ€å.
                            </div>
                        </div>
                    @else
                        <div class="motivate good mt-2">
                            <div class="emoji">‚ö°</div>
                            <div>
                                <div class="fw-bold">ÿ®ÿ≤ŸÜ ÿ±⁄©Ÿàÿ±ÿØ ÿ¨ÿØ€åÿØ!</div>
                                ÿß⁄Øÿ± ŸáŸÖ€åŸÜ ÿßŸÑÿßŸÜ €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ÿØ€å⁄ØŸá ÿ®ÿØ€åÿå ŸÖÿ∫ÿ≤ÿ™ ŸáŸÜŸàÿ≤ ÿØÿ± ÿ≠ÿßŸÑÿ™ ¬´€åÿßÿØ⁄Ø€åÿ±€å ŸÅÿπÿßŸÑ¬ªŸá Ÿà ÿ®Ÿáÿ™ÿ± ÿ¨Ÿàÿßÿ® ŸÖ€å‚ÄåÿØ€å.
                            </div>
                        </div>
                    @endif

                    <div class="d-flex flex-wrap gap-2 mt-3">
                        <a href="{{ $backRoute }}" class="btn btn-cta">
                            ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ®ÿπÿØ€å
                            <i class="bi bi-arrow-left ms-1"></i>
                        </a>

                        <a href="{{ route('student.classrooms.index') }}" class="btn btn-outline-secondary btn-ghost">
                            ÿØ€åÿØŸÜ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
                            <i class="bi bi-people ms-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {{-- ================= CHECKPOINT + NEXT EXAM ================= --}}
        <div class="reward-wrap mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
                <div class="level-pill pop-star">
                    <i class="bi bi-stars"></i>
                    {{ $levelUpText }}
                </div>

                <div class="checkpoint pop-star">
                    <i class="bi bi-graph-up-arrow"></i>
                    ÿØÿ±ÿ≥ÿ™: {{ $correctCount }} | ÿ∫ŸÑÿ∑: {{ $wrongCount }}
                </div>
            </div>

            <div class="medal {{ $medalType }}">
                <div class="icon pop-star">
                    @if ($medalType === 'gold')
                        <i class="bi bi-trophy-fill"></i>
                    @elseif($medalType === 'silver')
                        <i class="bi bi-gem"></i>
                    @else
                        <i class="bi bi-shield-fill-check"></i>
                    @endif
                </div>
                <div>
                    <div class="title">{{ $medalTitle }}</div>
                    <div class="sub mt-1">{{ $medalSub }}</div>
                </div>
            </div>

            <div class="next-box mt-3">
                <div class="fw-bold mb-2 d-flex align-items-center gap-2">
                    <i class="bi {{ $nextIcon }} text-primary"></i>
                    Ÿæ€åÿ¥ŸÜŸáÿßÿØ ŸÖÿ±ÿ≠ŸÑŸá‚Äå€å ÿ®ÿπÿØ€å
                </div>
                <div class="text-muted small mb-3" style="line-height:1.9">
                    {{ $nextMsg }}
                </div>

                {{-- query-string ŸÅ€åŸÑÿ™ÿ± ÿ≥ÿ∑ÿ≠ --}}
                <a href="{{ $backRoute }}?level={{ $nextFilter }}" class="btn next-btn w-100">
                    ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿπÿØ€å
                    <i class="bi bi-play-fill ms-1"></i>
                </a>

                <div class="small text-muted text-center mt-2">
                    Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜ €å⁄© ŸÇÿØŸÖ ÿ®Ÿá ŸÇŸáÿ±ŸÖÿßŸÜ€å ŸÜÿ≤ÿØ€å⁄©‚Äåÿ™ÿ±ÿ™ ŸÖ€å‚Äå⁄©ŸÜŸá üí™
                </div>
            </div>
        </div>

        {{-- ================= WRONG ONLY ================= --}}
        <div class="review-card mt-3">
            <div class="p-3 p-md-4 border-bottom">
                <div class="fw-bold d-flex align-items-center gap-2">
                    <i class="bi bi-fire text-warning"></i>
                    ÿ≥ŸàÿßŸÑÿßÿ™€å ⁄©Ÿá ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ™ŸÖÿ±€åŸÜ ÿ®€åÿ¥ÿ™ÿ± ÿØÿßÿ±ŸÜÿØ
                </div>
                <div class="small text-muted mt-1">
                    ŸÅŸÇÿ∑ ÿ≥ŸàÿßŸÑÿßÿ™€å ⁄©Ÿá ÿßÿ¥ÿ™ÿ®ÿßŸá ÿ¨Ÿàÿßÿ® ÿØÿßÿØ€å ÿß€åŸÜÿ¨ÿß Ÿáÿ≥ÿ™ŸÜÿØ ‚Äî
                    <span class="fw-bold text-danger">{{ $wrongCount }}</span> ÿ≥ŸàÿßŸÑ.
                </div>
            </div>

            @if ($wrongCount == 0)
                <div class="p-3 p-md-4 text-center text-success fw-bold">
                    üëè ÿπÿßŸÑ€å! Ÿá€å⁄Ü ÿ≥ŸàÿßŸÑ ÿ∫ŸÑÿ∑€å ŸÜÿØÿßÿ±€å.
                </div>
            @else
                @foreach ($wrongAnswers as $ans)
                    @php $q = $ans->question ?? null; @endphp

                    <div class="review-item">
                        <div class="d-flex justify-content-between align-items-center gap-2 mb-2">
                            <div class="fw-bold">
                                ÿ≥ŸàÿßŸÑ {{ $loop->iteration }}
                            </div>
                            <span class="ans-chip wrong">
                                <i class="bi bi-x-circle"></i> ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ™ŸÖÿ±€åŸÜ
                            </span>
                        </div>

                        <div class="text-muted" style="line-height:1.9">
                            {!! nl2br(e($q->question_text ?? ($q->question ?? '‚Äî'))) !!}
                        </div>

                        @if (!empty($q?->explanation))
                            <div class="mt-2 p-2 rounded-3" style="background:#f8fafc; border:1px dashed #e2e8f0;">
                                <div class="small fw-bold mb-1">
                                    <i class="bi bi-lightbulb"></i> ÿ™Ÿàÿ∂€åÿ≠:
                                </div>
                                <div class="small text-muted">{{ $q->explanation }}</div>
                            </div>
                        @endif
                    </div>
                @endforeach
            @endif
        </div>

        {{-- ================= CORRECT ONLY ================= --}}
        <div class="review-card mt-3">
            <div class="p-3 p-md-4 border-bottom">
                <div class="fw-bold d-flex align-items-center gap-2">
                    <i class="bi bi-check2-circle text-success"></i>
                    ÿ≥ŸàÿßŸÑÿßÿ™€å ⁄©Ÿá ÿØÿ±ÿ≥ÿ™ ÿ¨Ÿàÿßÿ® ÿØÿßÿØ€å
                </div>
                <div class="small text-muted mt-1">
                    ÿß€åŸÜ‚ÄåŸáÿß ÿ≥ŸàÿßŸÑÿßÿ™€å‚ÄåÿßŸÜ ⁄©Ÿá ÿØÿ±ÿ≥ÿ™ ÿ≤ÿØ€å ‚Äî
                    <span class="fw-bold text-success">{{ $correctCount }}</span> ÿ≥ŸàÿßŸÑ.
                </div>
            </div>

            @if ($correctCount == 0)
                <div class="p-3 p-md-4 text-center text-muted fw-bold">
                    ŸáŸÜŸàÿ≤ ÿ≥ŸàÿßŸÑ ÿØÿ±ÿ≥ÿ™ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá.
                </div>
            @else
                @foreach ($correctAnswers as $ans)
                    @php $q = $ans->question ?? null; @endphp

                    <div class="review-item">
                        <div class="d-flex justify-content-between align-items-center gap-2 mb-2">
                            <div class="fw-bold">
                                ÿ≥ŸàÿßŸÑ {{ $loop->iteration }}
                            </div>
                            <span class="ans-chip correct">
                                <i class="bi bi-check2-circle"></i> ÿØÿ±ÿ≥ÿ™
                            </span>
                        </div>

                        <div class="text-muted" style="line-height:1.9">
                            {!! nl2br(e($q->question_text ?? ($q->question ?? '‚Äî'))) !!}
                        </div>

                        @if (!empty($q?->explanation))
                            <div class="mt-2 p-2 rounded-3" style="background:#fbfffd; border:1px dashed #bbf7d0;">
                                <div class="small fw-bold mb-1 text-success">
                                    <i class="bi bi-lightbulb"></i> ÿ™Ÿàÿ∂€åÿ≠ ÿ™⁄©ŸÖ€åŸÑ€å:
                                </div>
                                <div class="small text-muted">{{ $q->explanation }}</div>
                            </div>
                        @endif
                    </div>
                @endforeach
            @endif
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 119. index.blade.php

**Path:** `resources/views/dashboard/student/classrooms/index.blade.php`  
**Size:** 35,877 bytes  
**Modified:** 2025-12-04 19:09:16

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', '⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÖ ÿ±ŸÜ⁄Ø ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .classrooms-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* ŸáÿØÿ± ÿµŸÅÿ≠Ÿá */
        .page-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
        }

        .page-title-section h1 {
            font-weight: 800;
            font-size: 1.8rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .page-title-section h1 i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 600px;
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸáÿØÿ± */
        .header-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* ÿ¢ŸÑÿ±ÿ™‚ÄåŸáÿß */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        /* ŸÜŸàÿßÿ± ÿ¨ÿ≥ÿ™ÿ¨Ÿà */
        .search-bar {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 15px 20px;
            box-shadow: var(--shadow-md);
            margin-bottom: 25px;
            border: 2px solid rgba(0, 0, 0, 0.05);
            animation: fadeIn 0.6s ease-out;
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-icon {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .search-input {
            border: none;
            background: transparent;
            outline: none;
            width: 100%;
            font-size: 1rem;
            color: var(--dark);
            padding: 8px 0;
        }

        .search-input::placeholder {
            color: var(--gray);
        }

        .search-input:focus {
            box-shadow: none;
        }

        /* ⁄©ÿßÿ±ÿ™ ⁄©ŸÑÿßÿ≥ */
        .class-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }

        .class-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .class-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .class-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .class-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .class-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .class-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        .class-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .class-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
            z-index: 1;
        }

        /* ŸáÿØÿ± ⁄©ÿßÿ±ÿ™ */
        .class-header {
            background: var(--gradient-1);
            color: white;
            padding: 25px 20px;
            position: relative;
            overflow: hidden;
        }

        .class-header::before {
            content: '';
            position: absolute;
            top: -50px;
            left: -50px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.15), transparent 70%);
            border-radius: 50%;
        }

        .class-chip {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 2;
            animation: pulse 2s infinite;
        }

        .class-title {
            font-weight: 800;
            font-size: 1.3rem;
            margin: 0 0 10px 0;
            color: white;
            position: relative;
            z-index: 2;
        }

        .class-meta {
            font-size: 0.9rem;
            opacity: 0.9;
            color: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        /* ÿ®ÿØŸÜŸá ⁄©ÿßÿ±ÿ™ */
        .class-body {
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .teacher-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding: 12px;
            background: var(--light-gray);
            border-radius: var(--radius-md);
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .teacher-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--primary-light);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .teacher-name {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--dark);
        }

        .teacher-label {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .class-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 12px;
            background: var(--light-gray);
            border-radius: var(--radius-md);
            border: 2px dashed rgba(0, 0, 0, 0.05);
            min-height: 60px;
        }

        .class-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            background: var(--light-gray);
            color: var(--dark);
            border: 2px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .stat-badge:hover {
            transform: translateY(-3px);
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        .stat-badge i {
            font-size: 0.9rem;
        }

        .status-badge {
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .status-active {
            background: var(--accent-light);
            color: var(--accent);
            border: 2px solid rgba(0, 212, 170, 0.2);
        }

        .status-inactive {
            background: var(--light-gray);
            color: var(--gray);
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .status-published {
            background: var(--primary-light);
            color: var(--primary);
            border: 2px solid rgba(123, 104, 238, 0.2);
        }

        .status-draft {
            background: var(--secondary-light);
            color: var(--secondary);
            border: 2px solid rgba(255, 107, 157, 0.2);
        }

        .class-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .action-btn:active {
            transform: scale(0.97);
        }

        .btn-enter {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-enter:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-enter::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-enter:hover::before {
            right: 100%;
        }

        .btn-exams {
            background: var(--light-gray);
            color: var(--dark);
            border-color: rgba(0, 0, 0, 0.05);
        }

        .btn-exams:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.15);
        }

        /* Ÿàÿ∂ÿπ€åÿ™ ÿÆÿßŸÑ€å */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 30px;
            text-align: center;
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
            border: 2px dashed var(--primary-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .empty-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: var(--primary);
            font-size: 3rem;
            animation: float 4s ease-in-out infinite;
        }

        .empty-title {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .empty-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å ŸÖŸàÿ®ÿß€åŸÑ */
        @media (max-width: 768px) {
            .classrooms-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-title-section h1 {
                font-size: 1.5rem;
            }

            .page-title-section h1 i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .header-buttons {
                width: 100%;
                flex-direction: column;
            }

            .btn-primary-custom,
            .btn-outline-custom {
                width: 100%;
                justify-content: center;
            }

            .class-body {
                padding: 15px;
            }

            .class-actions {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            .empty-actions {
                flex-direction: column;
            }
        }

        @media (min-width: 992px) {
            .class-actions {
                flex-direction: row;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .action-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        $classrooms = $classrooms ?? collect();

        $joinFormRoute = route('student.classrooms.join.form');
        $dashboardRoute = route('student.index');
        $examsIndexRoute = route('student.exams.index');
    @endphp

    <div class="classrooms-page">
        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="page-title-section">
                <h1>
                    <i class="fas fa-users-class"></i>
                    ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ
                </h1>
                <p class="page-subtitle">
                    ÿß€åŸÜÿ¨ÿß ÿ™ŸÖÿßŸÖ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å€å ⁄©Ÿá ÿπÿ∂Ÿà Ÿáÿ≥ÿ™€å ÿØ€åÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØÿõ
                    ÿßÿ≤ ŸáŸÖ€åŸÜÿ¨ÿß ŸÖ€å‚Äåÿ™ŸàŸÜ€å Ÿàÿßÿ±ÿØ ⁄©ŸÑÿßÿ≥ ÿ®ÿ¥€å €åÿß ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿßÿ¥ ÿ±Ÿà ÿ®ÿ®€åŸÜ€å. üéì
                </p>
            </div>

            <div class="header-buttons">
                <a href="{{ $joinFormRoute }}" class="btn-primary-custom">
                    <i class="fas fa-plus-circle"></i>
                    ÿπÿ∂Ÿà€åÿ™ ÿ®ÿß ⁄©ÿØ ⁄©ŸÑÿßÿ≥
                </a>
                <a href="{{ route('student.classrooms.index') }}" class="btn-outline-custom">
                    <i class="fas fa-sync-alt"></i>
                    ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å
                </a>
            </div>
        </div>

        {{-- ================= ALERTS ================= --}}
        @if (session('success'))
            <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--accent);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('success') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if (session('error'))
            <div class="alert-custom alert-danger-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--secondary);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('error') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        {{-- ================= SEARCH BAR ================= --}}
        @if ($classrooms->count())
            <div class="search-bar">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input id="classSearch" type="text" class="search-input"
                        placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß (ÿπŸÜŸàÿßŸÜÿå ŸÖÿπŸÑŸÖÿå ⁄©ÿØ ⁄©ŸÑÿßÿ≥...)">
                </div>
            </div>
        @endif

        {{-- ================= EMPTY STATE ================= --}}
        @if ($classrooms->isEmpty())
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>

                <h2 class="empty-title">ŸáŸÜŸàÿ≤ ÿπÿ∂Ÿà Ÿá€å⁄Ü ⁄©ŸÑÿßÿ≥€å ŸÜ€åÿ≥ÿ™€å!</h2>

                <p class="empty-text">
                    ÿ®ÿ±ÿß€å ÿ¥ÿ±Ÿàÿπ €åÿßÿØ⁄Ø€åÿ±€åÿå ⁄©ÿØ Ÿàÿ±ŸàÿØ ⁄©ŸÑÿßÿ≥ ÿ±ÿß ÿßÿ≤ ŸÖÿπŸÑŸÖÿ™ ÿ®⁄Ø€åÿ±
                    Ÿà ŸáŸÖ€åŸÜÿ¨ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ ÿ™ÿß ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ŸÖÿ™ÿµŸÑ ÿ®ÿ¥€å Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß ÿ®ÿ±ÿßÿ™ ŸÅÿπÿßŸÑ ÿ®ÿ¥Ÿá.
                    ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß ÿØŸÜ€åÿß€å ÿ¨ÿØ€åÿØ€å ÿßÿ≤ €åÿßÿØ⁄Ø€åÿ±€å ÿ±Ÿà ÿ®ÿ±ÿßÿ™ ÿ®ÿßÿ≤ ŸÖ€å‚Äå⁄©ŸÜŸÜ ‚ú®
                </p>

                <div class="empty-actions">
                    <a href="{{ $joinFormRoute }}" class="btn-primary-custom" style="padding: 15px 30px;">
                        <i class="fas fa-key"></i>
                        ÿπÿ∂Ÿà€åÿ™ ÿ®ÿß ⁄©ÿØ ⁄©ŸÑÿßÿ≥
                    </a>
                    <a href="{{ $dashboardRoute }}" class="btn-outline-custom" style="padding: 15px 30px;">
                        <i class="fas fa-home"></i>
                        ÿ®ÿ±⁄Øÿ¥ÿ™ ÿ®Ÿá ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
                    </a>
                </div>
            </div>
        @else
            {{-- ================= CLASSROOMS GRID ================= --}}
            <div class="row g-4" id="classGrid">
                @foreach ($classrooms as $classroom)
                    @php
                        $teacher = $classroom->teacher ?? null;
                        $title = $classroom->title ?? ($classroom->name ?? '⁄©ŸÑÿßÿ≥ ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ');
                        $joinCode = $classroom->join_code ?? null;
                        $examsCount =
                            $classroom->exams_count ?? (isset($classroom->exams) ? $classroom->exams->count() : 0);
                        $studentsCount = $classroom->students_count ?? null;
                        $teacherName = $teacher->display_name ?? ($teacher->name ?? 'ŸÜÿßŸÖÿ¥ÿÆÿµ');
                        $teacherInitial = mb_substr(trim($teacherName), 0, 1) ?: 'ŸÖ';

                        $searchText = \Illuminate\Support\Str::lower(
                            trim(
                                $title .
                                    ' ' .
                                    $teacherName .
                                    ' ' .
                                    ($joinCode ?? '') .
                                    ' ' .
                                    ($classroom->subject ?? '') .
                                    ' ' .
                                    ($classroom->grade ?? ''),
                            ),
                        );
                    @endphp

                    <div class="col-md-6 col-xl-4 class-item" data-search="{{ $searchText }}">
                        <div class="class-card">
                            {{-- ŸáÿØÿ± ⁄©ÿßÿ±ÿ™ --}}
                            <div class="class-header">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h3 class="class-title">{{ $title }}</h3>
                                        <div class="class-meta">
                                            @if (!empty($classroom->subject) || !empty($classroom->grade))
                                                <span>
                                                    <i class="fas fa-book"></i>
                                                    {{ $classroom->subject ?? 'ÿπŸÖŸàŸÖ€å' }}
                                                </span>
                                            @endif

                                            @if (!empty($classroom->grade))
                                                <span>
                                                    <i class="fas fa-graduation-cap"></i>
                                                    Ÿæÿß€åŸá {{ $classroom->grade }}
                                                </span>
                                            @endif
                                        </div>
                                    </div>

                                    @if ($joinCode)
                                        <span class="class-chip">
                                            <i class="fas fa-key"></i>
                                            {{ $joinCode }}
                                        </span>
                                    @endif
                                </div>
                            </div>

                            {{-- ÿ®ÿØŸÜŸá ⁄©ÿßÿ±ÿ™ --}}
                            <div class="class-body">
                                {{-- ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÖÿπŸÑŸÖ --}}
                                <div class="teacher-info">
                                    <div class="teacher-avatar">
                                        {{ $teacherInitial }}
                                    </div>
                                    <div>
                                        <div class="teacher-label">ŸÖÿπŸÑŸÖ</div>
                                        <div class="teacher-name">{{ $teacherName }}</div>
                                    </div>
                                </div>

                                {{-- ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ --}}
                                <div class="class-description">
                                    @if (!empty($classroom->description))
                                        {{ \Illuminate\Support\Str::limit($classroom->description, 95) }}
                                    @else
                                        ÿ™Ÿàÿ∂€åÿ≠€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸáÿõ ŸÖ€å‚Äåÿ™ŸàŸÜ€å ÿ®ÿß Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ®€åÿ¥ÿ™ÿ± ÿ±Ÿà ÿ®ÿ®€åŸÜ€å.
                                    @endif
                                </div>

                                {{-- ÿ¢ŸÖÿßÿ± Ÿà Ÿàÿ∂ÿπ€åÿ™ --}}
                                <div class="class-stats">
                                    <span class="stat-badge">
                                        <i class="fas fa-clipboard-list"></i>
                                        {{ $examsCount }} ÿ¢ÿ≤ŸÖŸàŸÜ
                                    </span>

                                    @if (!is_null($studentsCount))
                                        <span class="stat-badge">
                                            <i class="fas fa-user-friends"></i>
                                            {{ $studentsCount }} ÿπÿ∂Ÿà
                                        </span>
                                    @endif

                                    <span
                                        class="status-badge {{ $classroom->is_active ? 'status-active' : 'status-inactive' }}">
                                        <i class="fas fa-circle"></i>
                                        {{ $classroom->is_active ? 'ŸÅÿπÿßŸÑ' : 'ÿ∫€åÿ±ŸÅÿπÿßŸÑ' }}
                                    </span>

                                    @if (isset($classroom->is_published))
                                        <span
                                            class="status-badge {{ $classroom->is_published ? 'status-published' : 'status-draft' }}">
                                            <i class="fas fa-{{ $classroom->is_published ? 'globe' : 'edit' }}"></i>
                                            {{ $classroom->is_published ? 'ŸÖŸÜÿ™ÿ¥ÿ± ÿ¥ÿØŸá' : 'Ÿæ€åÿ¥‚ÄåŸÜŸà€åÿ≥' }}
                                        </span>
                                    @endif
                                </div>

                                {{-- ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿßŸÇÿØÿßŸÖ --}}
                                <div class="class-actions">
                                    <a href="{{ route('student.classrooms.show', $classroom) }}"
                                        class="action-btn btn-enter">
                                        <i class="fas fa-door-open"></i>
                                        Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥
                                    </a>
                                    <a href="{{ $examsIndexRoute }}" class="action-btn btn-exams">
                                        <i class="fas fa-clipboard-check"></i>
                                        ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        @endif

    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ ÿ®ÿ±ÿß€å ÿ™ÿπÿßŸÖŸÑÿßÿ™
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ⁄©ŸÑÿß€åŸÜÿ™ ÿ≥ÿß€åÿØ
                const searchInput = document.getElementById('classSearch');
                const classItems = document.querySelectorAll('.class-item');

                if (searchInput && classItems.length > 0) {
                    searchInput.addEventListener('input', function() {
                        const query = this.value.toLowerCase().trim();

                        classItems.forEach(item => {
                            const searchText = item.getAttribute('data-search') || '';
                            if (searchText.includes(query)) {
                                item.style.display = 'block';
                                // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ÿ∏ŸáŸàÿ±
                                item.style.animation = 'fadeIn 0.3s ease';
                            } else {
                                item.style.display = 'none';
                            }
                        });

                        if (navigator.vibrate && query.length > 0) {
                            navigator.vibrate(20);
                        }
                    });

                    // Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿ®ÿß ÿØ⁄©ŸÖŸá ESC
                    searchInput.addEventListener('keydown', function(e) {
                        if (e.key === 'Escape') {
                            this.value = '';
                            this.dispatchEvent(new Event('input'));
                        }
                    });
                }

                // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß
                const classCards = document.querySelectorAll('.class-card');
                classCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }

                            // ÿØÿ± ÿ≠ÿßŸÑÿ™ ŸàÿßŸÇÿπ€å ÿ®Ÿá ÿµŸÅÿ≠Ÿá ⁄©ŸÑÿßÿ≥ ŸáÿØÿß€åÿ™ ŸÖ€å‚Äåÿ¥ŸàÿØ
                            // window.location.href = this.querySelector('.btn-enter').href;
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥
                const enterButtons = document.querySelectorAll('.btn-enter');
                enterButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate([30, 50, 30]);
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                const examButtons = document.querySelectorAll('.btn-exams');
                examButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿπÿ∂Ÿà€åÿ™ Ÿà ÿ®ÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å
                document.querySelectorAll('.btn-primary-custom, .btn-outline-custom').forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
                const style = document.createElement('style');
                style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    `;
                document.head.appendChild(style);
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 120. join-class.blade.php

**Path:** `resources/views/dashboard/student/classrooms/join-class.blade.php`  
**Size:** 4,785 bytes  
**Modified:** 2025-12-03 10:25:52

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥')

@push('styles')
    <style>
        .page-wrap {
            padding: 1.5rem 0;
        }

        .soft-card {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            background: #fff;
        }

        .page-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: .75rem;
            margin-bottom: 1rem;
        }

        .page-title {
            font-weight: 800;
            letter-spacing: -.3px;
        }

        .hint {
            color: #64748b;
            font-size: .9rem;
        }

        .join-input {
            font-weight: 700;
            letter-spacing: .08em;
        }
    </style>
@endpush

@section('content')
    <div class="container page-wrap">

        {{-- ============================================================
     | Header
     |============================================================= --}}
        <div class="page-header">
            <div>
                <h4 class="page-title mb-1">
                    <i class="bi bi-box-arrow-in-right text-primary me-1"></i>
                    Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ÿ®ÿß ⁄©ÿØ
                </h4>
                <div class="hint">
                    ⁄©ÿØ Ÿàÿ±ŸàÿØ (join_code) ÿ±ÿß ÿßÿ≤ ŸÖÿπŸÑŸÖÿ™ ÿ®⁄Ø€åÿ± Ÿà ÿß€åŸÜÿ¨ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ ÿ™ÿß ÿπÿ∂Ÿà ⁄©ŸÑÿßÿ≥ ÿ¥Ÿà€å.
                </div>
            </div>

            <a href="{{ route('student.classrooms.index') }}"
                class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                <i class="bi bi-arrow-right"></i>
                ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
            </a>
        </div>

        {{-- ============================================================
     | Card
     |============================================================= --}}
        <div class="soft-card p-3 p-md-4">

            {{-- Ÿæ€åÿßŸÖ ŸÖŸàŸÅŸÇ€åÿ™ --}}
            @if (session('success'))
                <div class="alert alert-success soft-card p-3">
                    <i class="bi bi-check-circle-fill me-1"></i>
                    {{ session('success') }}
                </div>
            @endif

            {{-- Ÿæ€åÿßŸÖ Ÿáÿ¥ÿØÿßÿ± --}}
            @if (session('warning'))
                <div class="alert alert-warning soft-card p-3">
                    <i class="bi bi-exclamation-triangle-fill me-1"></i>
                    {{ session('warning') }}
                </div>
            @endif

            {{-- Ÿæ€åÿßŸÖ ÿÆÿ∑ÿß ⁄©ŸÑ€å --}}
            @if ($errors->any())
                <div class="alert alert-danger soft-card p-3 small">
                    ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ:
                    <ul class="mb-0 mt-1">
                        @foreach ($errors->all() as $err)
                            <li>{{ $err }}</li>
                        @endforeach
                    </ul>
                </div>
            @endif

            <form method="POST" action="{{ route('student.classrooms.join') }}" class="mt-2">
                @csrf

                <div class="mb-3">
                    <label class="form-label fw-bold">⁄©ÿØ Ÿàÿ±ŸàÿØ ⁄©ŸÑÿßÿ≥</label>

                    {{-- dir="ltr" ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ ÿØÿ±ÿ≥ÿ™ ⁄©ÿØ --}}
                    <input type="text" dir="ltr" name="join_code"
                        class="form-control join-input @error('join_code') is-invalid @enderror"
                        value="{{ old('join_code') }}" placeholder="ŸÖÿ´ŸÑÿßŸã: ABC123" autocomplete="off">

                    @error('join_code')
                        <div class="invalid-feedback">{{ $message }}</div>
                    @enderror

                    <div class="form-text">
                        ÿ®ÿπÿØ ÿßÿ≤ ÿ´ÿ®ÿ™ ⁄©ÿØÿå ⁄©ŸÑÿßÿ≥ ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ¬´⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ¬ª ÿßÿ∂ÿßŸÅŸá ŸÖ€å‚Äåÿ¥ŸàÿØ Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥ ÿ®ÿ±ÿß€åÿ™ ŸÅÿπÿßŸÑ ÿÆŸàÿßŸáÿØ ÿ¥ÿØ.
                    </div>
                </div>

                <div class="d-flex gap-2 flex-wrap">
                    <button class="btn btn-primary d-inline-flex align-items-center gap-2">
                        <i class="bi bi-check2-circle"></i>
                        ÿπÿ∂Ÿà€åÿ™ ÿØÿ± ⁄©ŸÑÿßÿ≥
                    </button>

                    <a href="{{ route('student.classrooms.index') }}"
                        class="btn btn-link d-inline-flex align-items-center gap-1">
                        <i class="bi bi-arrow-right"></i>
                        ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>

            </form>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 121. show.blade.php

**Path:** `resources/views/dashboard/student/classrooms/show.blade.php`  
**Size:** 13,996 bytes  
**Modified:** 2025-12-03 10:25:16

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥')

@push('styles')
    <style>
        /* ------------------------------------------------------------------
                     | Page Shell
                     |-------------------------------------------------------------------*/
        .page-wrap {
            padding: 1.5rem 0;
        }

        .soft-card {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            background: #fff;
        }

        /* ------------------------------------------------------------------
                     | Classroom Header
                     |-------------------------------------------------------------------*/
        .class-header {
            background: linear-gradient(135deg, #eef2ff 0%, #f8fafc 100%);
            border-radius: 1.25rem;
            padding: 1.25rem 1.25rem 1rem 1.25rem;
            position: relative;
            overflow: hidden;
        }

        .class-chip {
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            background: #ffffffcc;
            border: 1px dashed #c7d2fe;
            font-weight: 800;
            padding: .25rem .7rem;
            border-radius: 999px;
            font-size: .85rem;
        }

        .meta {
            color: #64748b;
            font-size: .9rem;
        }

        .tiny {
            font-size: .85rem;
        }

        .stat-pill {
            background: #fff;
            border: 1px solid #eef2f7;
            padding: .45rem .8rem;
            border-radius: 999px;
            font-weight: 700;
            font-size: .85rem;
        }

        /* ------------------------------------------------------------------
                     | Exams List
                     |-------------------------------------------------------------------*/
        .exam-card {
            border: 1px solid #eef2f7;
            border-radius: 1.1rem;
            transition: .2s ease;
            background: #fff;
        }

        .exam-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08);
            border-color: #e5e7eb;
        }

        .exam-badge {
            border-radius: 999px;
            font-size: .8rem;
            padding: .3rem .6rem;
            font-weight: 700;
        }

        /* ------------------------------------------------------------------
                     | Empty Exams
                     |-------------------------------------------------------------------*/
        .empty-wrap {
            text-align: center;
            padding: 2.5rem 1rem;
        }

        .empty-illus {
            width: 90px;
            height: 90px;
            border-radius: 1.75rem;
            background: #eef2ff;
            display: grid;
            place-items: center;
            margin: 0 auto 1rem;
            color: #4f46e5;
            font-size: 2rem;
        }

        .empty-title {
            font-weight: 800;
            margin-bottom: .5rem;
        }

        .empty-text {
            color: #64748b;
            max-width: 520px;
            margin: 0 auto 1.25rem;
        }
    </style>
@endpush


@section('content')
    <div class="container page-wrap">

        {{-- ============================================================
     | Top Actions
     |============================================================= --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-easel2-fill text-primary me-1"></i>
                    ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥
                </h4>
                <div class="text-muted small">
                    ÿØÿ± ÿß€åŸÜ ÿµŸÅÿ≠Ÿá ÿßÿ∑ŸÑÿßÿπÿßÿ™ ⁄©ŸÑÿßÿ≥ Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ÿ¢ŸÜ ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('student.classrooms.index') }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i>
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
                </a>

                <a href="{{ route('student.classrooms.join.form') }}"
                    class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-box-arrow-in-right"></i>
                    ÿπÿ∂Ÿà€åÿ™ ÿØÿ± ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ
                </a>
            </div>
        </div>


        @php
            $title = $classroom->title ?? ($classroom->name ?? '⁄©ŸÑÿßÿ≥ ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ');

            $joinCode = $classroom->join_code ?? null;

            $teacher = $classroom->teacher ?? null;
            $teacherName = $teacher->display_name ?? ($teacher->name ?? 'ŸÜÿßŸÖÿ¥ÿÆÿµ');

            $exams = $classroom->exams ?? collect();
        @endphp

        {{-- ============================================================
     | Classroom Header Card
     |============================================================= --}}
        <div class="class-header soft-card mb-3">

            <div class="d-flex flex-wrap justify-content-between align-items-start gap-2">
                <div>
                    <div class="fw-bold fs-4 mb-1">
                        {{ $title }}
                    </div>

                    {{-- subject/grade ŸÅŸÇÿ∑ ÿß⁄Øÿ± ŸàÿßŸÇÿπÿßŸã Ÿàÿ¨ŸàÿØ ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥ŸÜÿØ ŸÜŸÖÿß€åÿ¥ ÿ®ÿØŸá --}}
                    @if (!empty($classroom->subject) || !empty($classroom->grade))
                        <div class="meta">
                            {{ $classroom->subject ?? 'ŸÖŸàÿ∂Ÿàÿπ ŸÜÿßŸÖÿ¥ÿÆÿµ' }}
                            @if (!empty($classroom->grade))
                                <span class="mx-1">‚Ä¢</span>
                                Ÿæÿß€åŸá: {{ $classroom->grade }}
                            @endif
                        </div>
                    @endif
                </div>

                <div class="d-flex flex-column align-items-end gap-2">
                    @if ($joinCode)
                        <span class="class-chip">
                            <i class="bi bi-key-fill text-primary"></i>
                            {{ $joinCode }}
                        </span>
                    @endif

                    <span class="badge {{ $classroom->is_active ? 'bg-success' : 'bg-secondary' }} exam-badge">
                        {{ $classroom->is_active ? '⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ' : '⁄©ŸÑÿßÿ≥ ÿ∫€åÿ±ŸÅÿπÿßŸÑ' }}
                    </span>

                    @if (isset($classroom->is_published))
                        <span
                            class="badge {{ $classroom->is_published ? 'bg-primary' : 'bg-light text-dark border' }} exam-badge">
                            {{ $classroom->is_published ? 'ŸÖŸÜÿ™ÿ¥ÿ± ÿ¥ÿØŸá' : 'Ÿæ€åÿ¥‚ÄåŸÜŸà€åÿ≥' }}
                        </span>
                    @endif
                </div>
            </div>

            {{-- Description --}}
            <div class="mt-3">
                @if (!empty($classroom->description))
                    <div class="small text-muted">
                        {{ $classroom->description }}
                    </div>
                @else
                    <div class="small text-muted">
                        ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ÿ™Ÿàÿ∂€åÿ≠€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                    </div>
                @endif
            </div>

            {{-- Teacher Info --}}
            <div class="mt-3 d-flex align-items-center gap-2">
                <div class="rounded-circle bg-white d-grid place-items-center border" style="width:42px;height:42px;">
                    <i class="bi bi-person-badge text-secondary"></i>
                </div>
                <div>
                    <div class="tiny text-muted">ŸÖÿπŸÑŸÖ ⁄©ŸÑÿßÿ≥</div>
                    <div class="fw-semibold">{{ $teacherName }}</div>
                </div>
            </div>

            {{-- Stats --}}
            <div class="d-flex flex-wrap gap-2 mt-3">
                <div class="stat-pill">
                    <i class="bi bi-journal-text me-1 text-primary"></i>
                    ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß: {{ $exams->count() }}
                </div>

                @if (isset($classroom->students_count))
                    <div class="stat-pill">
                        <i class="bi bi-people me-1 text-success"></i>
                        ÿßÿπÿ∂ÿß: {{ $classroom->students_count }}
                    </div>
                @endif
            </div>
        </div>


        {{-- ============================================================
     | Exams Section
     |============================================================= --}}
        <div class="soft-card p-3 p-md-4">

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
                <h5 class="fw-bold mb-0">
                    <i class="bi bi-ui-checks-grid text-primary me-1"></i>
                    ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥
                </h5>

                {{-- ŸÅÿπŸÑÿßŸã ÿ®ÿØŸàŸÜ classroom_id ⁄ÜŸàŸÜ ŸÅ€åŸÑÿ™ÿ± ÿØÿ± ⁄©ŸÜÿ™ÿ±ŸÑÿ± ŸÜ€åÿ≥ÿ™ --}}
                <a href="{{ route('student.exams.index') }}" class="btn btn-outline-primary btn-sm">
                    ŸÖÿ¥ÿßŸáÿØŸá ŸáŸÖŸá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>
            </div>

            {{-- Empty exams --}}
            @if ($exams->isEmpty())
                <div class="empty-wrap">
                    <div class="empty-illus">
                        <i class="bi bi-journal-x"></i>
                    </div>

                    <h6 class="empty-title">ŸáŸÜŸàÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÖŸÜÿ™ÿ¥ÿ± ŸÜÿ¥ÿØŸá</h6>

                    <p class="empty-text">
                        ÿ®Ÿá ŸÖÿ≠ÿ∂ ÿß€åŸÜ⁄©Ÿá ŸÖÿπŸÑŸÖ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ€å ÿ®ÿ≥ÿßÿ≤ÿØ €åÿß ŸÖŸÜÿ™ÿ¥ÿ± ⁄©ŸÜÿØÿå
                        ŸáŸÖ€åŸÜÿ¨ÿß ŸÑ€åÿ≥ÿ™ ŸÖ€å‚Äåÿ¥ŸàÿØ Ÿà ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿ¥ÿ±⁄©ÿ™ ⁄©ŸÜ€å.
                    </p>

                    <a href="{{ route('student.classrooms.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2">
                        <i class="bi bi-arrow-right"></i>
                        ÿ®ÿ±⁄Øÿ¥ÿ™ ÿ®Ÿá ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
                    </a>
                </div>
            @else
                {{-- Exams list --}}
                <div class="row g-3">
                    @foreach ($exams as $exam)
                        @php
                            $qCount =
                                $exam->questions_count ?? (isset($exam->questions) ? $exam->questions->count() : null);

                            $duration = $exam->duration ?? 0;
                        @endphp

                        <div class="col-md-6 col-xl-4">
                            <div class="exam-card p-3 h-100">

                                <div class="d-flex justify-content-between align-items-start gap-2">
                                    <div>
                                        <div class="fw-bold mb-1">
                                            {{ $exam->title ?? 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ' }}
                                        </div>
                                        <div class="tiny text-muted">
                                            ŸÖÿØÿ™: {{ $duration }} ÿØŸÇ€åŸÇŸá
                                            @if (!is_null($qCount))
                                                <span class="mx-1">‚Ä¢</span>
                                                ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß: {{ $qCount }}
                                            @endif
                                        </div>
                                    </div>

                                    @if (isset($exam->is_published))
                                        <span
                                            class="badge {{ $exam->is_published ? 'bg-success' : 'bg-light text-dark border' }} exam-badge">
                                            {{ $exam->is_published ? 'ŸÖŸÜÿ™ÿ¥ÿ± ÿ¥ÿØŸá' : 'Ÿæ€åÿ¥‚ÄåŸÜŸà€åÿ≥' }}
                                        </span>
                                    @endif
                                </div>

                                @if (!empty($exam->description))
                                    <div class="small text-muted mt-2">
                                        {{ \Illuminate\Support\Str::limit($exam->description, 90) }}
                                    </div>
                                @endif

                                <div class="d-flex gap-2 mt-3">
                                    <a href="{{ route('student.exams.show', $exam) }}"
                                        class="btn btn-outline-primary w-100 btn-sm">
                                        ÿ¨ÿ≤ÿ¶€åÿßÿ™
                                    </a>

                                    @if ($exam->is_published ?? false)
                                        <a href="{{ route('student.exams.take', $exam) }}"
                                            class="btn btn-primary w-100 btn-sm">
                                            ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ
                                        </a>
                                    @else
                                        <button class="btn btn-secondary w-100 btn-sm" disabled>
                                            ŸáŸÜŸàÿ≤ ŸÖŸÜÿ™ÿ¥ÿ± ŸÜÿ¥ÿØŸá
                                        </button>
                                    @endif
                                </div>

                            </div>
                        </div>
                    @endforeach
                </div>

            @endif
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 122. classroom.blade.php

**Path:** `resources/views/dashboard/student/exams/classroom.blade.php`  
**Size:** 15,884 bytes  
**Modified:** 2025-12-03 08:32:27

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Classroom Exams')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;

            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;

            --edu-amber: #f59e0b;
            --edu-amber-soft: #fffbeb;

            --edu-gray: #0f172a;
            --edu-muted: #64748b;

            --edu-card: #ffffff;
            --edu-bg: #f8fafc;

            --radius-xl: 1.25rem;
            --radius-lg: 1rem;
        }

        .exam-page {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(6px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        .exam-header {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 12px 30px rgba(37, 99, 235, .18);
            max-width: 1200px;
            margin-inline: auto;
        }

        .exam-header::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 280px;
            height: 280px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(18deg);
            opacity: .75;
            pointer-events: none;
        }

        .exam-header h4 {
            font-size: 1.15rem;
            font-weight: 900;
            margin-bottom: .25rem;
        }

        .exam-header .subtitle {
            color: rgba(255, 255, 255, .92);
            font-size: .82rem;
            line-height: 1.7;
        }

        .filter-box {
            background: #fff;
            border-radius: .9rem;
            padding: .55rem .7rem;
            box-shadow: 0 6px 16px rgba(15, 23, 42, .06);
            border: 1px solid #e2e8f0;
            min-width: 210px;
        }

        .exam-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1rem;
            align-items: stretch;
            max-width: 1200px;
            margin-inline: auto;
            margin-top: .75rem;
        }

        .exam-card {
            background: var(--edu-card);
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-lg);
            position: relative;
            overflow: hidden;
            transition: .25s ease;
            box-shadow: 0 8px 22px rgba(15, 23, 42, .06);
            animation: cardIn .55s ease both;
            display: flex;
            flex-direction: column;
        }

        @keyframes cardIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(.98)
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1)
            }
        }

        .exam-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 36px rgba(37, 99, 235, .12);
            border-color: #c7d2fe;
        }

        .exam-card .accent {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--edu-blue), var(--edu-green-2));
        }

        .exam-card.done .accent {
            background: linear-gradient(90deg, var(--edu-amber), #fb7185);
        }

        .exam-card.done {
            background: #fffdfa;
            border: 1px dashed #f59e0b66;
        }

        .exam-body {
            padding: 1rem 1rem .9rem;
        }

        .exam-title {
            font-weight: 900;
            color: var(--edu-gray);
            font-size: 1.05rem;
            letter-spacing: .2px;
            display: flex;
            align-items: center;
            gap: .5rem;
        }

        .exam-title i {
            color: var(--edu-blue);
            font-size: 1.15rem;
        }

        .exam-desc {
            color: var(--edu-muted);
            font-size: .9rem;
            line-height: 1.8;
            margin-top: .35rem;
            min-height: 42px;
        }

        .badge-soft {
            padding: .42rem .6rem;
            font-size: .78rem;
            border-radius: 999px;
            font-weight: 800;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            border: 1px solid transparent;
            white-space: nowrap;
        }

        .badge-blue {
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            border-color: #bfdbfe;
        }

        .badge-green {
            background: var(--edu-green-soft);
            color: var(--edu-green);
            border-color: #bbf7d0;
        }

        .badge-amber {
            background: var(--edu-amber-soft);
            color: #92400e;
            border-color: #fde68a;
        }

        .badge-dark {
            background: #0f172a;
            color: #fff;
        }

        .badge-light2 {
            background: #f1f5f9;
            color: #0f172a;
            border: 1px solid #e2e8f0;
        }

        .motivate {
            background: linear-gradient(90deg, #f8fafc, #eef2ff);
            border: 1px solid #e2e8f0;
            border-radius: .8rem;
            padding: .45rem .6rem;
            font-size: .8rem;
            color: #334155;
            display: flex;
            align-items: center;
            gap: .45rem;
            margin-top: .6rem;
        }

        .motivate i {
            color: var(--edu-blue-2);
        }

        .done-alert {
            background: var(--edu-amber-soft);
            border: 1px solid #fde68a;
            color: #92400e;
            border-radius: .85rem;
            padding: .5rem .75rem;
            font-size: .84rem;
            display: flex;
            align-items: center;
            gap: .5rem;
            margin-top: .6rem;
            animation: softPulse 2s infinite ease-in-out;
        }

        @keyframes softPulse {

            0%,
            100% {
                transform: scale(1)
            }

            50% {
                transform: scale(1.015)
            }
        }

        .exam-actions {
            padding: 0 1rem 1rem;
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: .5rem;
        }

        .btn-start {
            border-radius: .9rem;
            font-weight: 900;
            padding: .7rem .9rem;
            background: linear-gradient(135deg, var(--edu-blue), var(--edu-blue-2));
            border: none;
            box-shadow: 0 10px 24px rgba(37, 99, 235, .25);
            transition: .2s ease;
        }

        .btn-start:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 30px rgba(37, 99, 235, .35);
        }

        .btn-result {
            border-radius: .9rem;
            font-weight: 900;
            padding: .7rem .9rem;
            background: linear-gradient(135deg, var(--edu-green), var(--edu-green-2));
            border: none;
            box-shadow: 0 10px 24px rgba(34, 197, 94, .25);
        }

        .btn-disabled {
            border-radius: .9rem;
            font-weight: 800;
            background: #f1f5f9 !important;
            color: #334155 !important;
            border: 1px dashed #cbd5e1 !important;
            opacity: .9 !important;
        }

        .exam-card .bg-icon {
            position: absolute;
            left: -10px;
            bottom: -12px;
            font-size: 4.6rem;
            color: #e2e8f0;
            opacity: .35;
            transform: rotate(-8deg);
            pointer-events: none;
        }

        .exam-card.done .bg-icon {
            color: #fde68a;
            opacity: .25;
        }
    </style>
@endpush


@section('content')
    <div class="exam-page">

        {{-- Header + Classroom filter --}}
        <div class="exam-header mb-3 d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div>
                <h4>
                    <i class="bi bi-people-fill me-1"></i>
                    Classroom Exams
                </h4>
                <div class="subtitle">
                    These exams belong to your joined classrooms. Choose a class and start improving üí™
                </div>
            </div>

            @php
                $classrooms = $classrooms ?? collect();
                $selectedClassroomId = request('classroom_id');
            @endphp

            @if ($classrooms->count())
                <form method="GET" action="{{ route('student.exams.classroom') }}"
                    class="filter-box d-flex align-items-center gap-2">
                    <i class="bi bi-funnel text-primary"></i>
                    <select name="classroom_id" class="form-select form-select-sm border-0 shadow-none"
                        onchange="this.form.submit()">
                        <option value="">All classrooms</option>
                        @foreach ($classrooms as $c)
                            <option value="{{ $c->id }}"
                                {{ (string) $selectedClassroomId === (string) $c->id ? 'selected' : '' }}>
                                {{ $c->title ?? $c->name }}
                            </option>
                        @endforeach
                    </select>

                    {{-- keep other query params --}}
                    @foreach (request()->except('classroom_id') as $k => $v)
                        <input type="hidden" name="{{ $k }}" value="{{ $v }}">
                    @endforeach
                </form>
            @endif
        </div>


        {{-- Empty State --}}
        @if ($exams->count() == 0)
            <div class="alert alert-warning d-flex align-items-center gap-2 rounded-3 shadow-sm">
                <i class="bi bi-emoji-frown fs-4"></i>
                No classroom exams are available right now.
            </div>
        @else
            <div class="exam-grid">
                @foreach ($exams as $exam)
                    @php
                        // safest last attempt (in case controller didn't sort)
$lastAttempt = $exam->attempts ? $exam->attempts->sortByDesc('id')->first() : null;

$isFinalAttempt =
    $lastAttempt &&
    (!is_null($lastAttempt->finished_at) ||
        !is_null($lastAttempt->submitted_at) ||
        in_array($lastAttempt->status ?? null, ['submitted', 'graded']));

// level icon + badge (NEW levels)
$levelIcon = match ($exam->level) {
    'easy' => 'bi-emoji-smile',
    'average' => 'bi-speedometer2',
    'hard' => 'bi-lightning-charge',
    'tough' => 'bi-fire',
    default => 'bi-lightning-charge',
};

$levelBadge = match ($exam->level) {
    'easy' => ['class' => 'badge-green', 'text' => 'Easy'],
    'average' => ['class' => 'badge-blue', 'text' => 'Average'],
    'hard' => ['class' => 'badge-amber', 'text' => 'Hard'],
    'tough' => ['class' => 'badge-dark', 'text' => 'Tough'],
    default => ['class' => 'badge-blue', 'text' => ucfirst($exam->level)],
                        };
                    @endphp

                    <div class="exam-card {{ $isFinalAttempt ? 'done' : '' }}">
                        <div class="accent"></div>

                        {{-- background icon --}}
                        <i class="bi {{ $levelIcon }} bg-icon"></i>

                        <div class="exam-body">
                            {{-- Title + badge --}}
                            <div class="d-flex align-items-start justify-content-between gap-2">
                                <div class="exam-title">
                                    <i class="bi bi-file-earmark-text"></i>
                                    {{ $exam->title }}
                                </div>

                                <span class="badge-soft badge-blue">
                                    <i class="bi bi-people-fill"></i> Classroom
                                </span>
                            </div>

                            <p class="exam-desc">
                                {{ $exam->description ?? 'No description' }}
                            </p>

                            <div class="d-flex flex-wrap gap-2 mt-2">

                                {{-- classroom name --}}
                                @if ($exam->classroom)
                                    <span class="badge-soft badge-blue">
                                        <i class="bi bi-mortarboard-fill"></i>
                                        {{ $exam->classroom->title ?? $exam->classroom->name }}
                                    </span>
                                @endif

                                {{-- difficulty/level --}}
                                <span class="badge-soft {{ $levelBadge['class'] }}">
                                    <i class="bi {{ $levelIcon }}"></i>
                                    {{ $levelBadge['text'] }}
                                </span>

                                <span class="badge-soft badge-light2">
                                    <i class="bi bi-clock-history"></i>
                                    {{ $exam->duration }} min
                                </span>

                                @if ($isFinalAttempt)
                                    <span class="badge-soft badge-amber">
                                        <i class="bi bi-check2-circle"></i> Completed
                                    </span>
                                @endif
                            </div>

                            <div class="motivate">
                                <i class="bi bi-graph-up-arrow"></i>
                                Every exam is one step forward ‚Äî keep going!
                            </div>

                            @if ($isFinalAttempt)
                                <div class="done-alert">
                                    <i class="bi bi-shield-exclamation"></i>
                                    You already took this exam. Retake is disabled.
                                </div>
                            @endif
                        </div>

                        <div class="exam-actions">
                            @if ($isFinalAttempt)
                                <a href="{{ route('student.attempts.result', $lastAttempt->id) }}"
                                    class="btn btn-result w-100">
                                    View Result <i class="bi bi-eye ms-1"></i>
                                </a>

                                <button class="btn btn-disabled w-100" disabled>
                                    Start Exam (Disabled) <i class="bi bi-lock-fill ms-1"></i>
                                </button>
                            @else
                                <a href="{{ route('student.exams.show', $exam) }}" class="btn btn-start w-100">
                                    Go to Exam <i class="bi bi-arrow-left ms-1"></i>
                                </a>
                            @endif
                        </div>
                    </div>
                @endforeach
            </div>

            @if ($exams instanceof \Illuminate\Pagination\LengthAwarePaginator)
                <div class="mt-3">
                    {{ $exams->links() }}
                </div>
            @endif
        @endif
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 123. public.blade.php

**Path:** `resources/views/dashboard/student/exams/public.blade.php`  
**Size:** 60,157 bytes  
**Modified:** 2025-12-04 19:34:28

----------------------------------------------------------------------

> **Note:** Large file - content truncated

..................................................

@extends('layouts.app')
@section('title', 'ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÖ ÿ±ŸÜ⁄Ø ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .public-exams-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        /* ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
  

... [CONTENT TRUNCATED] ...

......................................................................

----------------------------------------------------------------------

## üìÑ 124. show.blade.php

**Path:** `resources/views/dashboard/student/exams/show.blade.php`  
**Size:** 20,819 bytes  
**Modified:** 2025-12-03 08:18:27

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;
            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;
            --edu-amber: #f59e0b;
            --edu-amber-2: #fbbf24;
            --edu-amber-soft: #fffbeb;
            --edu-red: #dc2626;
            --edu-red-soft: #fff1f2;
            --edu-gray: #0f172a;
            --edu-muted: #64748b;
            --edu-bg: #f8fafc;
            --radius-xl: 1.25rem;
            --radius-lg: 1rem;
        }

        .page-wrap {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(6px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-soft {
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-xl);
            background: #fff;
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
            overflow: hidden;
        }

        .exam-hero {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1.15rem 1.25rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 14px 35px rgba(37, 99, 235, .2);
            max-width: 1100px;
            margin-inline: auto;
            isolation: isolate;
        }

        .exam-hero::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(18deg);
            opacity: .85;
            pointer-events: none;
            z-index: -1;
        }

        .exam-hero::before {
            content: "";
            position: absolute;
            inset: auto auto -40% -25%;
            width: 380px;
            height: 380px;
            background: radial-gradient(circle, rgba(255, 255, 255, .16), transparent 70%);
            z-index: -1;
        }

        .exam-hero h3 {
            font-weight: 900;
            font-size: 1.32rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: .55rem;
        }

        .exam-hero .subtitle {
            font-size: .9rem;
            color: rgba(255, 255, 255, .95);
            margin-top: .35rem;
            line-height: 1.9;
        }

        .mission-badge {
            display: flex;
            align-items: center;
            gap: .5rem;
            margin-top: .6rem;
            font-size: .85rem;
            font-weight: 900;
            color: #ffffff;
            opacity: .95;
        }

        .mission-badge .dot {
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background: #fff;
            box-shadow: 0 0 0 6px rgba(255, 255, 255, .18);
            animation: ping 1.8s infinite ease-in-out;
        }

        @keyframes ping {
            0% {
                transform: scale(1);
                opacity: .9;
            }

            70% {
                transform: scale(1.8);
                opacity: 0;
            }

            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            padding: .5rem .75rem;
            border-radius: 999px;
            font-weight: 900;
            font-size: .82rem;
            border: 1px solid transparent;
            white-space: nowrap;
            background: #fff;
            color: var(--edu-gray);
            box-shadow: 0 6px 14px rgba(15, 23, 42, .06);
            transition: .2s ease;
        }

        .chip:hover {
            transform: translateY(-1px);
        }

        .chip.blue {
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            border-color: #bfdbfe;
        }

        .chip.green {
            background: var(--edu-green-soft);
            color: var(--edu-green);
            border-color: #bbf7d0;
        }

        .chip.amber {
            background: var(--edu-amber-soft);
            color: #92400e;
            border-color: #fde68a;
        }

        .chip.dark {
            background: #0f172a;
            color: #fff;
        }

        .stat {
            border-radius: var(--radius-lg);
            background: #fff;
            border: 1px solid #e2e8f0;
            padding: .95rem 1rem;
            display: flex;
            align-items: center;
            gap: .8rem;
            box-shadow: 0 8px 20px rgba(15, 23, 42, .05);
            transition: .2s ease;
            position: relative;
            overflow: hidden;
        }

        .stat:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(37, 99, 235, .12);
        }

        .stat .icon {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            font-size: 1.25rem;
            font-weight: 900;
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            flex-shrink: 0;
        }

        .stat.green .icon {
            background: var(--edu-green-soft);
            color: var(--edu-green);
        }

        .stat.amber .icon {
            background: var(--edu-amber-soft);
            color: #92400e;
        }

        .stat .label {
            font-size: .8rem;
            color: var(--edu-muted);
            font-weight: 800;
        }

        .stat .value {
            font-size: 1.05rem;
            font-weight: 900;
            color: var(--edu-gray);
            margin-top: .12rem;
        }

        .stat .subvalue {
            font-size: .78rem;
            color: var(--edu-muted);
            font-weight: 700;
            margin-top: .1rem;
        }

        .difficulty-pill {
            display: inline-flex;
            align-items: center;
            gap: .4rem;
            font-size: .8rem;
            font-weight: 900;
            border-radius: 999px;
            padding: .25rem .6rem;
            border: 1px solid transparent;
        }

        .difficulty-easy {
            background: #ecfdf3;
            color: #166534;
            border-color: #bbf7d0;
        }

        .difficulty-medium {
            background: #eff6ff;
            color: #1d4ed8;
            border-color: #bfdbfe;
        }

        .difficulty-hard {
            background: #fff1f2;
            color: #b91c1c;
            border-color: #fecaca;
        }

        .alert-final {
            border: 0;
            border-radius: var(--radius-xl);
            background: linear-gradient(90deg, #fff1f2, #ffe4e6);
            box-shadow: 0 12px 28px rgba(220, 38, 38, .22);
            position: relative;
            overflow: hidden;
            animation: softPulse 1.6s infinite ease-in-out;
            padding: 1rem 1.1rem;
            max-width: 1100px;
            margin-inline: auto;
        }

        .alert-final::before {
            content: "";
            position: absolute;
            top: -55%;
            right: -15%;
            width: 260px;
            height: 260px;
            background: radial-gradient(circle, rgba(255, 255, 255, .9), transparent 60%);
            animation: floatGlow 2.8s infinite ease-in-out;
        }

        @keyframes softPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02);
            }
        }

        @keyframes floatGlow {

            0%,
            100% {
                transform: translate(0, 0);
                opacity: .5;
            }

            50% {
                transform: translate(-25px, 20px);
                opacity: .95;
            }
        }

        .btn-start {
            position: relative;
            border-radius: 1rem;
            font-weight: 900;
            padding: 1rem 1rem;
            border: none;
            background: linear-gradient(135deg, var(--edu-blue), var(--edu-blue-2));
            box-shadow: 0 12px 28px rgba(37, 99, 235, .28);
            transition: .2s ease;
            overflow: hidden;
            letter-spacing: .2px;
        }

        .btn-start::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .35), transparent);
            transform: translateX(-120%);
            animation: shine 2.8s infinite ease-in-out;
        }

        @keyframes shine {
            0% {
                transform: translateX(-120%);
            }

            55% {
                transform: translateX(120%);
            }

            100% {
                transform: translateX(120%);
            }
        }

        .btn-start:hover {
            transform: translateY(-1px);
            box-shadow: 0 16px 34px rgba(37, 99, 235, .38);
        }

        .btn-result {
            border-radius: .95rem;
            font-weight: 900;
            padding: .9rem 1rem;
            border: none;
            background: linear-gradient(135deg, var(--edu-green), var(--edu-green-2));
            box-shadow: 0 12px 28px rgba(34, 197, 94, .28);
        }

        .hint {
            background: #f8fafc;
            border: 1px dashed #cbd5e1;
            color: #334155;
            border-radius: .9rem;
            padding: .8rem .9rem;
            font-size: .9rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            line-height: 1.9;
        }

        .prep-bar {
            height: 8px;
            border-radius: 999px;
            background: #e2e8f0;
            overflow: hidden;
            position: relative;
            margin-top: .7rem;
        }

        .prep-bar .fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #22c55e, #0ea5e9, #2563eb);
            animation: fillup 1.2s ease forwards;
        }

        @keyframes fillup {
            to {
                width: 100%;
            }
        }

        .challenge {
            border: 1px solid #e2e8f0;
            border-radius: 1rem;
            background: #fff;
            padding: .9rem 1rem;
            display: flex;
            gap: .7rem;
            align-items: flex-start;
            box-shadow: 0 8px 18px rgba(15, 23, 42, .05);
        }

        .challenge .ico {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: var(--edu-amber-soft);
            color: #92400e;
            font-size: 1.2rem;
            font-weight: 900;
            flex-shrink: 0;
        }
    </style>
@endpush

@section('content')
    @php
        $qCount = $exam->questions_count ?? ($exam->questions->count() ?? 0);
        $duration = $exam->duration ?? 0;

        // ‚úÖ difficulty mapping from level (easy/average/hard/tough)
        $diffKey = $exam->level ?? 'average';

        $diffText = match ($diffKey) {
            'easy' => 'ÿ¢ÿ≥ÿßŸÜ',
            'hard' => 'ÿ≥ÿÆÿ™',
            'tough' => 'ÿÆ€åŸÑ€å ÿ≥ÿÆÿ™',
            default => 'ŸÖÿ™Ÿàÿ≥ÿ∑', // average
        };

        $diffClass = match ($diffKey) {
            'easy' => 'difficulty-easy',
            'hard', 'tough' => 'difficulty-hard',
            default => 'difficulty-medium',
        };

        $motivationLine = match ($diffKey) {
            'easy' => '⁄Øÿ±ŸÖ‚Äå⁄©ŸÜ ÿπÿßŸÑ€å ÿ®ÿ±ÿß€å ÿ¥ÿ±Ÿàÿπ üíö',
            'hard' => '⁄ÜÿßŸÑÿ¥ ÿ¨ÿØ€åÿå ÿßŸÖÿß ÿ™Ÿà ÿßÿ≤ Ÿæÿ≥ÿ¥ ÿ®ÿ±ŸÖ€åÿß€å üî•',
            'tough' => 'ŸÖÿ±ÿ≠ŸÑŸá‚Äå€å ÿ≠ÿ±ŸÅŸá‚Äåÿß€å‚ÄåŸáÿß ‚Äî ÿ®ÿ™ÿ±⁄©ŸàŸÜ üí•',
            default => 'ÿ≥ÿ∑ÿ≠ ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ ÿ®ÿ±ÿß€å ÿ±ÿ¥ÿØ ÿ≥ÿ±€åÿπ üöÄ',
        };

        // ‚úÖ level chip data
        $levelChip = match ($diffKey) {
            'easy' => ['green', 'bi-lightning-fill', 'ÿ¢ÿ≥ÿßŸÜ'],
            'hard' => ['blue', 'bi-bullseye', 'ÿ≥ÿÆÿ™'],
            'tough' => ['amber', 'bi-award-fill', 'ÿÆ€åŸÑ€å ÿ≥ÿÆÿ™'],
            default => ['blue', 'bi-speedometer2', 'ŸÖÿ™Ÿàÿ≥ÿ∑'],
        };
    @endphp

    <div class="page-wrap container py-3 py-md-4">

        {{-- ================= HERO HEADER ================= --}}
        <div class="exam-hero mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                    <h3>
                        <i class="bi bi-file-earmark-text"></i>
                        {{ $exam->title }}
                    </h3>

                    <div class="subtitle">
                        ÿ¢ŸÖÿßÿØŸá‚Äåÿß€å €å⁄© ŸÇÿØŸÖ ÿØ€å⁄ØŸá ÿ®Ÿá ÿ≥ŸÖÿ™ ŸáÿØŸÅ‚ÄåŸáÿßÿ™ ŸÜÿ≤ÿØ€å⁄©‚Äåÿ™ÿ± ÿ®ÿ¥€åÿü ‚ú®
                        <br>
                        <span class="fw-bold">{{ $motivationLine }}</span>
                    </div>

                    <div class="mission-badge">
                        <span class="dot"></span>
                        ŸÖÿ£ŸÖŸàÿ±€åÿ™ ÿßŸÖÿ±Ÿàÿ≤: ÿ´ÿ®ÿ™ €å⁄© ÿ±⁄©Ÿàÿ±ÿØ ÿ®Ÿáÿ™ÿ± ÿßÿ≤ ŸÇÿ®ŸÑ!
                    </div>

                    <div class="prep-bar">
                        <div class="fill"></div>
                    </div>
                </div>

                <a href="{{ route('student.exams.public') }}" class="btn btn-light btn-sm fw-bold">
                    <i class="bi bi-arrow-right"></i>
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å
                </a>
            </div>

            {{-- chips row --}}
            <div class="d-flex flex-wrap gap-2 mt-3">
                @if ($exam->scope === 'free')
                    <span class="chip dark"><i class="bi bi-globe2"></i> ÿ¢ÿ≤ŸÖŸàŸÜ ÿπŸÖŸàŸÖ€å</span>
                @else
                    <span class="chip blue">
                        <i class="bi bi-people-fill"></i>
                        ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©ŸÑÿßÿ≥€å
                        @if ($exam->classroom)
                            - {{ $exam->classroom->title ?? $exam->classroom->name }}
                        @endif
                    </span>
                @endif

                <span class="chip {{ $levelChip[0] }}">
                    <i class="bi {{ $levelChip[1] }}"></i>
                    {{ $levelChip[2] }}
                </span>

                <span class="chip">
                    <i class="bi bi-clock-history"></i>
                    ŸÖÿØÿ™ {{ $duration }} ÿØŸÇ€åŸÇŸá
                </span>

                <span class="chip {{ $diffClass }}">
                    <i class="bi bi-speedometer2"></i>
                    ÿ≥ÿÆÿ™€å: {{ $diffText }}
                </span>
            </div>
        </div>


        {{-- ================= FLASH ================= --}}
        @if (session('warning'))
            <div class="alert alert-warning rounded-3 shadow-sm">{{ session('warning') }}</div>
        @endif
        @if (session('success'))
            <div class="alert alert-success rounded-3 shadow-sm">{{ session('success') }}</div>
        @endif


        {{-- ================= STATS (preview) ================= --}}
        <div class="row g-3 mb-3">
            <div class="col-12 col-md-4">
                <div class="stat">
                    <div class="icon"><i class="bi bi-question-circle"></i></div>
                    <div>
                        <div class="label">ÿ™ÿπÿØÿßÿØ ÿ≥ŸàÿßŸÑÿßÿ™</div>
                        <div class="value">{{ $qCount }}</div>
                        <div class="subvalue">ÿ™ŸÇÿ±€åÿ®ÿßŸã {{ max(1, ceil($qCount / 2)) }} ÿØŸÇ€åŸÇŸá ÿ™ŸÖÿ±⁄©ÿ≤</div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-4">
                <div class="stat green">
                    <div class="icon"><i class="bi bi-star-fill"></i></div>
                    <div>
                        <div class="label">ÿ≥ÿ∑ÿ≠ ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                        <div class="value">
                            <span class="difficulty-pill {{ $diffClass }}">
                                {{ $diffText }}
                            </span>
                        </div>
                        <div class="subvalue">ŸáÿØŸÅ: ÿ®Ÿáÿ™ÿ± ÿßÿ≤ ÿØŸÅÿπŸá‚Äå€å ŸÇÿ®ŸÑ</div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-4">
                <div class="stat amber">
                    <div class="icon"><i class="bi bi-shield-check"></i></div>
                    <div>
                        <div class="label">ŸÇÿßŸÜŸàŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                        <div class="value">ŸÅŸÇÿ∑ €å⁄©‚Äåÿ®ÿßÿ±</div>
                        <div class="subvalue">Ÿæÿ≥ ÿ®ÿß ÿ™ŸÖÿ±⁄©ÿ≤ ÿ¥ÿ±Ÿàÿπ ⁄©ŸÜ</div>
                    </div>
                </div>
            </div>
        </div>


        {{-- ================= DESCRIPTION ================= --}}
        <div class="card-soft p-3 p-md-4 mb-3">
            <div class="fw-bold mb-2 d-flex align-items-center gap-2">
                <i class="bi bi-info-circle text-primary"></i>
                ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ
            </div>
            <div class="text-muted" style="line-height:1.9">
                {{ $exam->description ?? 'ÿ®ÿØŸàŸÜ ÿ™Ÿàÿ∂€åÿ≠' }}
            </div>
        </div>


        {{-- ================= CHALLENGE / MINDSET BOX ================= --}}
        <div class="challenge mb-3">
            <div class="ico"><i class="bi bi-rocket-takeoff"></i></div>
            <div>
                <div class="fw-bold mb-1">ŸÇÿ®ŸÑ ÿßÿ≤ ÿ¥ÿ±Ÿàÿπ €å⁄© ŸÜ⁄©ÿ™Ÿá‚Äå€å ÿ∑ŸÑÿß€å€å üëá</div>
                <div class="text-muted small" style="line-height:1.9">
                    ÿ≥ÿπ€å ⁄©ŸÜ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß ÿ±Ÿà ÿ®ÿØŸàŸÜ ÿπÿ¨ŸÑŸá ÿ¨Ÿàÿßÿ® ÿ®ÿØ€å.
                    ÿß⁄Øÿ± ÿ¨ÿß€å€å ⁄Ø€åÿ± ⁄©ÿ±ÿØ€å ÿ±ÿØ ÿ¥Ÿà Ÿà ÿ¢ÿÆÿ± ÿ®ÿ±⁄Øÿ±ÿØ.
                    ÿß€åŸÜ ÿ±Ÿàÿ¥ ŸÖÿπŸÖŸàŸÑÿßŸã ÿ®ÿßÿπÿ´ ÿßŸÅÿ≤ÿß€åÿ¥ ŸÜŸÖÿ±Ÿá ŸÖ€åÿ¥Ÿá.
                </div>
            </div>
        </div>


        {{-- ================= FINAL / NORMAL STATE ================= --}}
        @if ($isFinalAttempt)
            <div class="alert-final d-flex align-items-center gap-3 mb-3">
                <div class="fs-2">‚ö†Ô∏è</div>
                <div>
                    <div class="fw-bold mb-1">
                        ÿ¥ŸÖÿß ŸÇÿ®ŸÑÿßŸã ÿØÿ± ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¥ÿ±⁄©ÿ™ ⁄©ÿ±ÿØŸá‚Äåÿß€åÿØ.
                    </div>
                    <div class="small text-muted">
                        ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ŸÅŸÇÿ∑ €å⁄©‚Äåÿ®ÿßÿ± ŸÇÿßÿ®ŸÑ ÿ®ÿ±⁄Øÿ≤ÿßÿ±€å ÿßÿ≥ÿ™ Ÿà ÿßŸÖ⁄©ÿßŸÜ ÿ¥ÿ±⁄©ÿ™ ŸÖÿ¨ÿØÿØ Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ.
                    </div>
                </div>
            </div>

            <div class="d-flex flex-wrap gap-2">
                <a href="{{ route('student.attempts.result', $lastAttempt->id) }}" class="btn btn-result">
                    ŸÖÿ¥ÿßŸáÿØŸá ŸÜÿ™€åÿ¨Ÿá ŸÇÿ®ŸÑ€å
                    <i class="bi bi-eye ms-1"></i>
                </a>

                <a href="{{ route('student.exams.public') }}" class="btn btn-outline-secondary fw-bold">
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å
                </a>
            </div>
        @else
            <div class="card-soft p-3 p-md-4">
                <div class="hint mb-3">
                    <i class="bi bi-hourglass-split text-primary"></i>
                    ÿ®ÿß ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜÿå ÿ™ÿß€åŸÖÿ± ŸÅÿπÿßŸÑ ŸÖ€å‚Äåÿ¥ŸàÿØ Ÿà ŸÅŸÇÿ∑ €å⁄©‚Äåÿ®ÿßÿ± ÿßŸÖ⁄©ÿßŸÜ ÿ¥ÿ±⁄©ÿ™ ÿØÿßÿ±€åÿØ.
                    <span class="fw-bold">ŸÜŸÅÿ≥ ÿπŸÖ€åŸÇ ÿ®⁄©ÿ¥ Ÿà ÿ¥ÿ±Ÿàÿπ ⁄©ŸÜ üòå</span>
                </div>

                <form method="POST" action="{{ route('student.exams.start', $exam->id) }}">
                    @csrf
                    <button class="btn btn-start w-100">
                        ÿ¥ÿ±Ÿàÿπ ŸÖÿ£ŸÖŸàÿ±€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ
                        <i class="bi bi-play-fill ms-1"></i>
                    </button>
                </form>

                <div class="small text-muted text-center mt-3">
                    ÿ®ÿπÿØ ÿßÿ≤ ÿ≤ÿØŸÜ ÿ¥ÿ±Ÿàÿπÿå ÿ™ÿß€åŸÖÿ± ÿ®ŸÑÿßŸÅÿßÿµŸÑŸá ŸÅÿπÿßŸÑ ŸÖ€åÿ¥Ÿá. ÿ¢ŸÖÿßÿØŸá‚Äåÿß€åÿü
                </div>
            </div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 125. take.blade.php

**Path:** `resources/views/dashboard/student/exams/take.blade.php`  
**Size:** 30,400 bytes  
**Modified:** 2025-12-03 08:22:14

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ¥ÿ±⁄©ÿ™ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ')

@push('styles')
    <style>
        :root {
            --edu-blue: #2563eb;
            --edu-blue-2: #0ea5e9;
            --edu-blue-soft: #eff6ff;

            --edu-green: #16a34a;
            --edu-green-2: #22c55e;
            --edu-green-soft: #ecfdf3;

            --edu-amber: #f59e0b;
            --edu-amber-2: #fbbf24;
            --edu-amber-soft: #fffbeb;

            --edu-red: #dc2626;
            --edu-red-soft: #fff1f2;

            --edu-gray: #0f172a;
            --edu-muted: #64748b;
            --edu-bg: #f8fafc;

            --radius-xl: 1.25rem;
            --radius-lg: .9rem;
        }

        .take-page {
            animation: pageFade .6s ease both;
        }

        @keyframes pageFade {
            from {
                opacity: 0;
                transform: translateY(6px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-soft {
            border: 1px solid #e2e8f0;
            background: #fff;
            border-radius: var(--radius-xl);
            box-shadow: 0 10px 28px rgba(15, 23, 42, .06);
        }

        .top-hero {
            background: linear-gradient(135deg, var(--edu-blue) 0%, var(--edu-blue-2) 55%, var(--edu-green-2) 100%);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 1rem 1.1rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 14px 35px rgba(37, 99, 235, .2);
            max-width: 1200px;
            margin-inline: auto;
            isolation: isolate;
        }

        .top-hero::after {
            content: "";
            position: absolute;
            inset: -35% -20% auto auto;
            width: 280px;
            height: 280px;
            background: radial-gradient(circle, rgba(255, 255, 255, .35), transparent 70%);
            transform: rotate(18deg);
            opacity: .85;
            pointer-events: none;
            z-index: -1;
        }

        .top-hero h4 {
            font-weight: 900;
            margin: 0;
            font-size: 1.15rem;
        }

        .top-hero .sub {
            font-size: .85rem;
            color: rgba(255, 255, 255, .92);
            margin-top: .25rem;
        }

        .timer-pill {
            background: #0f172a;
            color: #fff;
            border-radius: 999px;
            padding: .45rem .9rem;
            font-weight: 900;
            font-size: .95rem;
            letter-spacing: .5px;
            display: inline-flex;
            align-items: center;
            gap: .45rem;
            box-shadow: 0 8px 20px rgba(0, 0, 0, .18);
            transition: .2s ease;
        }

        .timer-pill.warn {
            background: #b45309;
        }

        .timer-pill.danger {
            background: #dc2626;
            animation: pulse 1.2s infinite ease-in-out;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.04);
            }
        }

        .progress-wrap {
            background: rgba(255, 255, 255, .15);
            border-radius: 999px;
            height: 9px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, .25);
        }

        .progress-bar-edu {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #fff, #dbeafe);
            transition: .35s ease;
        }

        .progress-text {
            font-size: .82rem;
            color: rgba(255, 255, 255, .98);
            font-weight: 900;
            white-space: nowrap;
        }

        .progress-meta {
            font-size: .8rem;
            font-weight: 900;
            color: rgba(255, 255, 255, .95);
            display: flex;
            align-items: center;
            gap: .35rem;
            background: rgba(0, 0, 0, .18);
            padding: .2rem .6rem;
            border-radius: 999px;
        }

        .q-section {
            display: none;
        }

        .q-section.active {
            display: block;
            animation: qIn .35s ease both;
        }

        @keyframes qIn {
            from {
                opacity: 0;
                transform: translateY(8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .q-head {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: .5rem;
            margin-bottom: .6rem;
        }

        .q-number {
            font-weight: 900;
            color: var(--edu-gray);
            display: flex;
            align-items: center;
            gap: .45rem;
            font-size: 1rem;
        }

        .badge-type {
            background: var(--edu-blue-soft);
            color: var(--edu-blue);
            border: 1px solid #bfdbfe;
            font-weight: 900;
            border-radius: 999px;
            padding: .35rem .6rem;
            font-size: .78rem;
        }

        .q-card {
            border: 1px solid #bfdbfe;
            background: linear-gradient(180deg, #ffffff, #f8fbff);
            border-radius: var(--radius-lg);
            padding: 1rem 1.1rem;
            position: relative;
            box-shadow: inset 0 0 0 2px #eff6ff;
            line-height: 1.9;
            font-size: 1rem;
        }

        .q-card::before {
            content: "ÿ≥ÿ§ÿßŸÑ";
            position: absolute;
            top: .75rem;
            left: .75rem;
            font-size: .72rem;
            font-weight: 900;
            color: #1d4ed8;
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            padding: .12rem .5rem;
            border-radius: 999px;
        }

        .answer-box {
            margin-top: .9rem;
            border: 1px dashed #86efac;
            background: #f6fffa;
            border-radius: var(--radius-lg);
            padding: .9rem;
            position: relative;
        }

        .answer-box::before {
            content: "Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß";
            position: absolute;
            top: -10px;
            right: 14px;
            font-size: .72rem;
            font-weight: 900;
            color: #166534;
            background: #ecfdf3;
            border: 1px solid #bbf7d0;
            padding: .1rem .5rem;
            border-radius: 999px;
        }

        .opt-item {
            border: 1px solid #e2e8f0;
            border-radius: .9rem;
            padding: .8rem .9rem;
            cursor: pointer;
            transition: .12s ease;
            display: flex;
            align-items: center;
            gap: .6rem;
            background: #ffffff;
            font-weight: 700;
        }

        .opt-item:hover {
            background: #f8fafc;
            border-color: #94a3b8;
            transform: translateY(-1px);
        }

        .opt-item.active {
            border-color: #86efac;
            background: #ecfdf3;
            box-shadow: 0 8px 18px rgba(34, 197, 94, .12);
        }

        .opt-item input {
            transform: translateY(1px) scale(1.08);
        }

        .essay-input {
            min-height: 140px;
            border-radius: .9rem;
        }

        .fill-input {
            border-radius: .9rem;
        }

        .nav-btn {
            border-radius: .9rem;
            font-weight: 900;
            padding: .6rem .95rem;
        }

        .sticky-box {
            position: sticky;
            top: 1rem;
        }

        .dots-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: .5rem;
        }

        .q-dot {
            width: 36px;
            height: 36px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            font-weight: 900;
            cursor: pointer;
            border: 1px solid #e2e8f0;
            background: #f8fafc;
            transition: .15s ease;
            font-size: .85rem;
        }

        .q-dot:hover {
            transform: translateY(-1px);
            border-color: #cbd5e1;
        }

        .q-dot.active {
            background: var(--edu-blue);
            color: #fff;
            border-color: var(--edu-blue);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, .12);
        }

        .q-dot.answered {
            background: var(--edu-green-soft);
            border-color: var(--edu-green);
            color: var(--edu-green);
            box-shadow: 0 0 0 4px rgba(34, 197, 94, .12);
        }

        .q-dot.flagged {
            background: var(--edu-amber-soft);
            border-color: var(--edu-amber-2);
            color: #92400e;
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
            font-size: .78rem;
            color: var(--edu-muted);
            font-weight: 800;
        }

        .legend span {
            display: flex;
            align-items: center;
            gap: .35rem;
        }

        .submit-section {
            border: 1px dashed #cbd5e1;
            background: #f8fafc;
            border-radius: var(--radius-lg);
        }

        .reward-flash {
            position: fixed;
            inset: 0;
            pointer-events: none;
            display: none;
            z-index: 9999;
            background: radial-gradient(circle at top, rgba(34, 197, 94, .12), transparent 55%);
            animation: flash .6s ease both;
        }

        @keyframes flash {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @media (max-width: 992px) {
            .dots-grid {
                grid-template-columns: repeat(10, 1fr);
            }

            .sticky-box {
                position: static;
            }
        }
    </style>
@endpush

@section('content')

    {{-- Guard --}}
    @if (empty($attempt))
        <div class="container py-4">
            <div class="alert alert-warning d-flex justify-content-between align-items-center flex-wrap gap-2">
                <div>ÿ®ÿ±ÿß€å ÿ¥ÿ±⁄©ÿ™ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿß€åÿØ ÿßŸàŸÑ ¬´ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ¬ª ÿ±ÿß ÿ®ÿ≤ŸÜ€åÿØ.</div>
                <a href="{{ route('student.exams.show', $exam->id) }}" class="btn btn-primary btn-sm">
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿµŸÅÿ≠Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ
                </a>
            </div>
        </div>
        @php return; @endphp
    @endif

    <div class="reward-flash" id="rewardFlash"></div>

    <div class="take-page container py-3 py-md-4">

        {{-- ================= TOP HERO ================= --}}
        <div class="top-hero mb-3">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                    <h4>
                        <i class="bi bi-pencil-square me-1"></i>
                        ÿ¥ÿ±⁄©ÿ™ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ
                    </h4>
                    <div class="sub">
                        ÿ¢ÿ≤ŸÖŸàŸÜ: <span class="fw-bold">{{ $exam->title }}</span>
                    </div>
                </div>

                <div class="d-flex align-items-center gap-2">
                    {{-- ‚úÖ Timer based on exams.duration --}}
                    @if (!empty($exam->duration))
                        <div class="timer-pill" id="timerPill" data-min="{{ $exam->duration }}">
                            <i class="bi bi-stopwatch"></i>
                            <span id="timerText">{{ $exam->duration }}:00</span>
                        </div>
                    @endif

                    <a href="{{ route('student.exams.show', $exam->id) }}" class="btn btn-light btn-sm fw-bold">
                        <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>
            </div>

            {{-- progress --}}
            <div class="mt-3 d-flex align-items-center gap-2">
                <div class="progress-wrap flex-grow-1">
                    <div class="progress-bar-edu" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">0%</div>
                <div class="progress-meta" id="progressMeta">
                    <i class="bi bi-layers"></i>
                    ÿ≥ÿ§ÿßŸÑ 1 ÿßÿ≤ {{ $exam->questions->count() }}
                </div>
            </div>
        </div>


        <div class="row g-3">

            {{-- ================= QUESTIONS ================= --}}
            <div class="col-lg-9">

                <form method="POST" action="{{ route('student.exams.submit', $exam->id) }}" id="examForm">
                    @csrf

                    @if (isset($attempt) && $attempt)
                        <input type="hidden" name="attempt_id" value="{{ $attempt->id }}">
                    @endif

                    @foreach ($exam->questions as $q)
                        @php
                            $savedAnswers = $attempt?->answers ?? [];
                            $saved = $savedAnswers[$q->id] ?? null;

                            // ‚úÖ normalize saved for mcq
                            if (is_array($saved)) {
                                $saved = $saved[0] ?? null;
                            }

                            // ‚úÖ MCQ options support legacy + JSON
                            $opts = [];
                            if ($q->type === 'mcq') {
                                if (is_array($q->options) && count($q->options)) {
                                    $opts = $q->options; // expected {"a":"..","b":".."}
                                } else {
                                    $opts = [
                                        'a' => $q->option_a,
                                        'b' => $q->option_b,
                                        'c' => $q->option_c,
                                        'd' => $q->option_d,
                                    ];
                                }
                            }
                        @endphp

                        <div class="card-soft p-3 p-md-4 mb-3 q-section" id="q-{{ $q->id }}"
                            data-qid="{{ $q->id }}" data-index="{{ $loop->index }}">

                            {{-- Head --}}
                            <div class="q-head">
                                <div class="q-number">
                                    <span class="badge bg-primary rounded-pill">{{ $loop->iteration }}</span>
                                    ÿ≥ŸàÿßŸÑ {{ $loop->iteration }}
                                </div>

                                <div class="d-flex align-items-center gap-2">
                                    <span class="badge-type">{{ $q->type }}</span>

                                    @if (!empty($q->score))
                                        <span class="small text-muted fw-bold">
                                            ÿßŸÖÿ™€åÿßÿ≤: {{ $q->score }}
                                        </span>
                                    @endif

                                    {{-- flag --}}
                                    <button type="button" class="btn btn-outline-warning btn-sm nav-btn flag-btn"
                                        data-flag="{{ $q->id }}">
                                        <i class="bi bi-flag"></i>
                                    </button>
                                </div>
                            </div>

                            {{-- Question text --}}
                            <div class="q-card mb-3">
                                {!! nl2br(e($q->question ?? $q->question_text)) !!}
                            </div>

                            {{-- Answer box --}}
                            <div class="answer-box">
                                @if ($q->type === 'mcq')
                                    <div class="vstack gap-2">
                                        @foreach ($opts as $key => $text)
                                            @if ($text)
                                                <label class="opt-item {{ $saved == $key ? 'active' : '' }}">
                                                    <input class="form-check-input m-0" type="radio"
                                                        name="answers[{{ $q->id }}]" value="{{ $key }}"
                                                        @checked($saved == $key)>
                                                    <div class="flex-grow-1">
                                                        <span class="fw-bold me-1">{{ strtoupper($key) }}.</span>
                                                        {{ is_string($text) ? $text : json_encode($text) }}
                                                    </div>
                                                </label>
                                            @endif
                                        @endforeach
                                    </div>
                                @elseif($q->type === 'true_false')
                                    <div class="vstack gap-2">
                                        <label
                                            class="opt-item {{ $saved === 'true' || $saved === true || $saved === 1 ? 'active' : '' }}">
                                            <input class="form-check-input m-0" type="radio"
                                                name="answers[{{ $q->id }}]" value="true"
                                                @checked($saved === 'true' || $saved === true || $saved === 1)>
                                            <div class="flex-grow-1 fw-bold">ÿµÿ≠€åÿ≠</div>
                                        </label>

                                        <label
                                            class="opt-item {{ $saved === 'false' || $saved === false || $saved === 0 ? 'active' : '' }}">
                                            <input class="form-check-input m-0" type="radio"
                                                name="answers[{{ $q->id }}]" value="false"
                                                @checked($saved === 'false' || $saved === false || $saved === 0)>
                                            <div class="flex-grow-1 fw-bold">ÿ∫ŸÑÿ∑</div>
                                        </label>
                                    </div>
                                @elseif($q->type === 'fill_blank')
                                    <div>
                                        <label class="form-label small text-muted fw-bold">
                                            Ÿæÿßÿ≥ÿÆ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ (ÿß⁄Øÿ± ⁄ÜŸÜÿØ ÿ¨Ÿàÿßÿ® ÿØÿßÿ±ÿØ ÿ®ÿß ¬´⁄©ÿßŸÖÿß¬ª ÿ¨ÿØÿß ⁄©ŸÜ)
                                        </label>
                                        <input type="text" name="answers[{{ $q->id }}]"
                                            value="{{ old('answers.' . $q->id, $saved) }}" class="form-control fill-input"
                                            placeholder="ŸÖÿ´ÿßŸÑ: ÿ™Ÿáÿ±ÿßŸÜ, ÿß€åÿ±ÿßŸÜ">
                                    </div>
                                @elseif($q->type === 'essay')
                                    <div>
                                        <label class="form-label small text-muted fw-bold">Ÿæÿßÿ≥ÿÆ ÿ™ÿ¥ÿ±€åÿ≠€å</label>
                                        <textarea name="answers[{{ $q->id }}]" class="form-control essay-input" rows="4"
                                            placeholder="Ÿæÿßÿ≥ÿÆ ÿÆŸàÿØ ÿ±ÿß ÿ®ŸÜŸà€åÿ≥...">{{ old('answers.' . $q->id, $saved) }}</textarea>
                                        <div class="small text-muted mt-1">
                                            ÿß€åŸÜ ÿ≥ŸàÿßŸÑ ÿ™Ÿàÿ≥ÿ∑ ŸÖÿπŸÑŸÖ ÿ™ÿµÿ≠€åÿ≠ ŸÖ€å‚Äåÿ¥ŸàÿØ.
                                        </div>
                                    </div>
                                @else
                                    <div class="alert alert-warning small">
                                        ŸÜŸàÿπ ÿ≥ŸàÿßŸÑ ŸÜÿßÿ¥ŸÜÿßÿÆÿ™Ÿá ÿßÿ≥ÿ™. ŸÑÿ∑ŸÅÿßŸã ÿ®Ÿá Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿßÿ∑ŸÑÿßÿπ ÿØŸá€åÿØ.
                                    </div>
                                @endif
                            </div>

                            {{-- nav buttons --}}
                            <div class="d-flex justify-content-between mt-4">
                                <button type="button" class="btn btn-outline-secondary btn-sm nav-btn prev-btn">
                                    <i class="bi bi-chevron-right"></i> ÿ≥ŸàÿßŸÑ ŸÇÿ®ŸÑ€å
                                </button>
                                <button type="button" class="btn btn-outline-primary btn-sm nav-btn next-btn">
                                    ÿ≥ŸàÿßŸÑ ÿ®ÿπÿØ€å <i class="bi bi-chevron-left"></i>
                                </button>
                            </div>
                        </div>

                        @if ($loop->last)
                            {{-- Submit --}}
                            <div class="card-soft p-3 p-md-4 submit-section">
                                <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                                    <div class="text-muted small fw-bold">
                                        ÿ®ÿπÿØ ÿßÿ≤ ÿßÿ±ÿ≥ÿßŸÑÿå ÿßŸÖ⁄©ÿßŸÜ ÿ™ÿ∫€å€åÿ± Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß ŸÜ€åÿ≥ÿ™.
                                    </div>
                                    <button id="finalSubmitBtnMain" type="submit" class="btn btn-success px-4 fw-bold">
                                        <i class="bi bi-check2-circle"></i> ÿßÿ±ÿ≥ÿßŸÑ ŸÜŸáÿß€å€å
                                    </button>
                                </div>
                            </div>
                        @endif
                    @endforeach

                </form>
            </div>


            {{-- ================= SIDE NAV ================= --}}
            <div class="col-lg-3">
                <div class="card-soft p-3 sticky-box">
                    <div class="fw-bold mb-2 d-flex align-items-center gap-2">
                        <i class="bi bi-map"></i>
                        ŸÖÿ≥€åÿ± ÿ≥ÿ§ÿßŸÑ‚ÄåŸáÿß
                    </div>

                    <div class="dots-grid" id="dotsBox">
                        @foreach ($exam->questions as $q)
                            <div class="q-dot" data-goto="q-{{ $q->id }}">
                                {{ $loop->iteration }}
                            </div>
                        @endforeach
                    </div>

                    <hr>

                    <div class="legend">
                        <span><span class="q-dot active"></span> ÿ≥ÿ§ÿßŸÑ ŸÅÿπŸÑ€å</span>
                        <span><span class="q-dot answered"></span> Ÿæÿßÿ≥ÿÆ ÿØÿßÿØŸá‚Äåÿ¥ÿØŸá</span>
                        <span><span class="q-dot flagged"></span> ÿπŸÑÿßŸÖÿ™‚ÄåÿØÿßÿ±</span>
                    </div>

                    <div class="small text-muted mt-2">
                        ÿ±Ÿà€å ÿ¥ŸÖÿßÿ±Ÿá‚ÄåŸáÿß ÿ®ÿ≤ŸÜ ÿ™ÿß ÿ≥ÿ±€åÿπ ÿ®ÿ±€å ŸáŸÖŸàŸÜ ÿ≥ÿ§ÿßŸÑ.
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection


@push('scripts')
    <script>
        (function() {
            const sections = Array.from(document.querySelectorAll('.q-section'));
            const dots = Array.from(document.querySelectorAll('.q-dot'));
            const submitBox = document.querySelector('.submit-section');

            let currentIndex = 0;
            const total = sections.length;

            function isQuestionAnswered(section) {
                const qid = section.dataset.qid;
                const checkedRadio = section.querySelector(`input[type="radio"][name="answers[${qid}]"]:checked`);
                if (checkedRadio) return true;

                const textInput = section.querySelector(`input[type="text"][name="answers[${qid}]"]`);
                if (textInput && textInput.value.trim()) return true;

                const textarea = section.querySelector(`textarea[name="answers[${qid}]"]`);
                if (textarea && textarea.value.trim()) return true;

                return false;
            }

            function updateAnsweredState(section) {
                const qid = section.dataset.qid;
                const idx = sections.findIndex(s => s.dataset.qid == qid);
                if (idx < 0) return;

                if (isQuestionAnswered(section)) dots[idx].classList.add('answered');
                else dots[idx].classList.remove('answered');
            }

            function updateProgress() {
                const answeredCount = sections.filter(s => isQuestionAnswered(s)).length;
                const percent = Math.round((answeredCount / total) * 100);

                const bar = document.getElementById('progressBar');
                const text = document.getElementById('progressText');
                const meta = document.getElementById('progressMeta');

                if (bar) bar.style.width = percent + '%';
                if (text) text.textContent = percent + '%';
                if (meta) meta.innerHTML = `<i class="bi bi-layers"></i> ÿ≥ÿ§ÿßŸÑ ${currentIndex+1} ÿßÿ≤ ${total}`;
            }

            function showRewardFlash() {
                const fx = document.getElementById('rewardFlash');
                if (!fx) return;
                fx.style.display = 'block';
                setTimeout(() => fx.style.display = 'none', 500);
            }

            function fixNavButtonsForCurrent() {
                const currentSection = sections[currentIndex];
                if (!currentSection) return;

                const prevBtn = currentSection.querySelector('.prev-btn');
                const nextBtn = currentSection.querySelector('.next-btn');
                if (prevBtn) prevBtn.disabled = (currentIndex === 0);
                if (nextBtn) nextBtn.disabled = (currentIndex === total - 1);
            }

            function showQuestion(i) {
                currentIndex = Math.min(Math.max(i, 0), total - 1);

                sections.forEach((s, idx) => s.classList.toggle('active', idx === currentIndex));
                dots.forEach((d, idx) => d.classList.toggle('active', idx === currentIndex));

                if (submitBox) {
                    submitBox.style.display = (currentIndex === total - 1) ? 'block' : 'none';
                }

                fixNavButtonsForCurrent();
                updateProgress();

                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }

            // init
            sections.forEach((s, idx) => idx === 0 ? s.classList.add('active') : s.classList.remove('active'));
            dots[0]?.classList.add('active');
            if (submitBox) submitBox.style.display = 'none';
            updateProgress();
            fixNavButtonsForCurrent();

            // prev/next
            document.querySelectorAll('.prev-btn').forEach(btn =>
                btn.addEventListener('click', () => showQuestion(currentIndex - 1))
            );
            document.querySelectorAll('.next-btn').forEach(btn =>
                btn.addEventListener('click', () => showQuestion(currentIndex + 1))
            );

            // dots jump
            dots.forEach((dot, idx) => dot.addEventListener('click', () => showQuestion(idx)));

            // option highlight + answered state
            document.querySelectorAll('.opt-item input[type=radio]').forEach(inp => {
                inp.addEventListener('change', e => {
                    const section = e.target.closest('.q-section');
                    const options = section.querySelectorAll('.opt-item');
                    options.forEach(o => o.classList.remove('active'));
                    e.target.closest('.opt-item')?.classList.add('active');

                    updateAnsweredState(section);
                    updateProgress();
                    showRewardFlash();
                });
            });

            document.querySelectorAll('input[type=text], textarea').forEach(inp => {
                inp.addEventListener('input', e => {
                    const section = e.target.closest('.q-section');
                    updateAnsweredState(section);
                    updateProgress();
                });
            });

            // flagging
            document.querySelectorAll('.flag-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const section = e.target.closest('.q-section');
                    const qid = section.dataset.qid;
                    const idx = sections.findIndex(s => s.dataset.qid == qid);
                    if (idx < 0) return;
                    dots[idx].classList.toggle('flagged');
                });
            });

            // Timer
            const timerPill = document.getElementById('timerPill');
            if (timerPill) {
                let minutes = parseInt(timerPill.dataset.min || '0');
                let seconds = minutes * 60;
                const timerText = document.getElementById('timerText');

                function setTimerStyle() {
                    timerPill.classList.remove('warn', 'danger');
                    if (seconds <= 60) timerPill.classList.add('danger');
                    else if (seconds <= 5 * 60) timerPill.classList.add('warn');
                }

                function tick() {
                    seconds--;
                    if (seconds < 0) seconds = 0;

                    const m = Math.floor(seconds / 60);
                    const s = seconds % 60;
                    timerText.textContent = `${m}:${String(s).padStart(2,'0')}`;

                    setTimerStyle();

                    if (seconds <= 0) document.getElementById('examForm').submit();
                }

                setTimerStyle();
                setInterval(tick, 1000);
            }

        })();
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 126. index.blade.php

**Path:** `resources/views/dashboard/student/index.blade.php`  
**Size:** 50,880 bytes  
**Modified:** 2025-12-04 19:47:55

----------------------------------------------------------------------

> **Note:** Large file - content truncated

..................................................

@extends('layouts.app')

@section('title', 'ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ - ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ')

@push('styles')
    <style>
        /* ÿ™ŸÖ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .stu-dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframe

... [CONTENT TRUNCATED] ...

......................................................................

----------------------------------------------------------------------

## üìÑ 127. index1.blade.php

**Path:** `resources/views/dashboard/student/index1.blade.php`  
**Size:** 23,700 bytes  
**Modified:** 2025-12-04 19:46:21

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ - ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ')

@push('styles')
    <style>
        :root {
            --p: #4361ee;
            --p2: #3a0ca3;
            --acc: #f72585;
            --ok: #4cc9f0;
            --warn: #f8961e;
            --dark: #0f172a;
            --muted: #64748b;
            --bg: #f8fafc;
            --card: #ffffff;
            --radius: 18px;
            --shadow: 0 10px 30px rgba(0, 0, 0, .06);
            --shadow-hover: 0 18px 40px rgba(0, 0, 0, .10);
            --grad: linear-gradient(135deg, var(--p), var(--p2));
            --grad2: linear-gradient(135deg, #7209b7, #f72585);
            --grad3: linear-gradient(135deg, #4cc9f0, #4895ef);
            --grad4: linear-gradient(135deg, #f8961e, #f9c74f);
        }

        .stu-dashboard {
            background: var(--bg);
            background-image: radial-gradient(#4361ee12 2px, transparent 2px);
            background-size: 40px 40px;
            border-radius: 14px;
            padding: 8px;
            animation: fadeIn .5s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(6px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        /* top header actions row (keep your three buttons) */
        .top-actions .btn {
            border-radius: 12px;
            font-weight: 800;
            padding: .6rem .9rem;
        }

        /* Welcome banner */
        .welcome {
            background: var(--card);
            border-radius: 22px;
            box-shadow: var(--shadow);
            border: 1px solid #eef2f7;
            padding: 22px 22px;
            position: relative;
            overflow: hidden;
        }

        .welcome::after {
            content: "";
            position: absolute;
            inset: auto -30% -60% auto;
            width: 340px;
            height: 340px;
            background: radial-gradient(circle, rgba(67, 97, 238, .12), transparent 65%);
            transform: rotate(12deg);
        }

        .welcome h2 {
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--dark);
        }

        .welcome p {
            color: var(--muted);
            line-height: 1.9;
            font-size: .98rem;
            margin: 0;
        }

        .welcome .rocket {
            width: 72px;
            height: 72px;
            border-radius: 18px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 2rem;
            background: var(--grad);
            box-shadow: 0 8px 20px rgba(67, 97, 238, .25);
            animation: float 2.4s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-8px)
            }
        }

        /* Stat cards */
        .stat-card {
            background: var(--card);
            border-radius: 16px;
            box-shadow: var(--shadow);
            border: 1px solid #eef2f7;
            padding: 16px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: .25s ease;
            min-height: 96px;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .stat-title {
            color: var(--muted);
            font-size: .85rem;
            font-weight: 700;
        }

        .stat-value {
            font-size: 1.6rem;
            font-weight: 900;
            color: var(--dark);
        }

        .stat-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 1.35rem;
        }

        .icon-1 {
            background: var(--grad);
        }

        .icon-2 {
            background: var(--grad3);
        }

        .icon-3 {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .icon-4 {
            background: var(--grad4);
        }

        /* main grid cards */
        .dash-card {
            background: var(--card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            border: 1px solid #eef2f7;
            padding: 18px;
            transition: .3s ease;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .dash-card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-hover);
        }

        .dash-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--grad);
            transform: scaleX(0);
            transform-origin: left;
            transition: .4s ease;
        }

        .dash-card:hover::before {
            transform: scaleX(1);
        }

        .dash-card .card-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .dash-card .card-head h3 {
            font-weight: 900;
            font-size: 1.05rem;
            margin: 0;
            color: var(--dark);
        }

        .dash-card .head-icon {
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            color: #fff;
            font-size: 1.4rem;
        }

        /* exam list */
        .exam-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .exam-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 10px;
            border-radius: 10px;
            border-bottom: 1px dashed #eef2f7;
            transition: .2s ease;
        }

        .exam-item:last-child {
            border-bottom: none;
        }

        .exam-item:hover {
            background: rgba(67, 97, 238, .05);
            transform: translateX(4px);
        }

        .exam-name {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 800;
            color: #111827;
            font-size: .95rem;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
        }

        .dot-ok {
            background: var(--ok);
            box-shadow: 0 0 0 4px rgba(76, 201, 240, .15);
        }

        .dot-warn {
            background: var(--warn);
            box-shadow: 0 0 0 4px rgba(248, 150, 30, .15);
        }

        .dot-acc {
            background: var(--acc);
            box-shadow: 0 0 0 4px rgba(247, 37, 133, .12);
        }

        .exam-meta {
            font-size: .82rem;
            color: var(--muted);
            white-space: nowrap;
        }

        /* skills progress */
        .skill-item {
            margin-bottom: 14px;
        }

        .skill-head {
            display: flex;
            justify-content: space-between;
            font-weight: 800;
            font-size: .9rem;
            color: #111827;
            margin-bottom: 6px;
        }

        .skill-bar {
            height: 9px;
            background: #eef2f7;
            border-radius: 999px;
            overflow: hidden;
        }

        .skill-fill {
            height: 100%;
            border-radius: 999px;
            background: var(--grad);
            width: 0;
            transition: width 1.2s ease;
        }

        /* reports mini stats */
        .mini-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 8px;
        }

        .mini {
            background: #fff;
            border: 1px solid #eef2f7;
            border-radius: 12px;
            padding: 10px;
            text-align: center;
            font-weight: 900;
        }

        .mini .val {
            font-size: 1.3rem;
            background: var(--grad);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .mini .lbl {
            font-size: .8rem;
            color: var(--muted);
            font-weight: 700;
        }

        /* advisor */
        .advisor-box {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .advisor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: var(--grad2);
            color: #fff;
            font-size: 1.4rem;
            box-shadow: 0 6px 16px rgba(114, 9, 183, .25);
        }

        .advisor-info h4 {
            margin: 0;
            font-weight: 900;
            font-size: 1rem;
        }

        .advisor-info p {
            margin: 2px 0 0;
            font-size: .86rem;
            color: var(--muted);
            line-height: 1.7;
        }

        .advisor-actions .btn {
            border-radius: 12px;
            font-weight: 900;
            padding: .55rem .8rem;
        }

        .btn-grad {
            background: var(--grad);
            color: #fff;
            border: none;
        }

        .btn-soft {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            font-weight: 800;
        }

        /* quick actions row */
        .quick-row .qa {
            background: #fff;
            border: 1px solid #eef2f7;
            border-radius: 14px;
            padding: 12px 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 900;
            color: #0f172a;
            box-shadow: var(--shadow);
            transition: .2s ease;
            text-decoration: none;
        }

        .quick-row .qa:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }

        .qa i {
            font-size: 1.1rem;
            color: #334155;
        }

        @media (max-width: 992px) {
            .mini-stats {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid stu-dashboard">

        {{-- ========== TOP ACTIONS (same routes) ========== --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2 top-actions">
            <div>
                <h1 class="h5 fw-bold mb-1">ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</h1>
                <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿßÿå Ÿæ€åÿ¥ÿ±ŸÅÿ™ Ÿà ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß€å ÿ¥ŸÖÿß ÿØÿ± €å⁄© ŸÜ⁄ØÿßŸá.</div>
            </div>

            <div class="d-flex gap-2 flex-wrap">
                <a href="{{ route('student.exams.public') }}" class="btn btn-primary">
                    <i class="fa-solid fa-globe ms-1"></i> ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å
                </a>
                <a href="{{ route('student.exams.classroom') }}" class="btn btn-outline-primary">
                    <i class="fa-solid fa-people-group ms-1"></i> ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥€å
                </a>
                <a href="{{ route('student.reports.index') }}" class="btn btn-outline-secondary">
                    <i class="fa-solid fa-chart-simple ms-1"></i> ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß Ÿà ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß
                </a>
            </div>
        </div>

        {{-- ========== WELCOME ========== --}}
        <div class="welcome mb-3 d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div>
                <h2 class="mb-2">ÿ≥ŸÑÿßŸÖ {{ auth()->user()->name ?? 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤' }}! ÿ¢ŸÖÿßÿØŸá Ÿæ€åÿ¥ÿ±ŸÅÿ™ Ÿáÿ≥ÿ™€åÿü üöÄ</h2>
                <p>
                    ÿßŸÖÿ±Ÿàÿ≤ ÿ®ÿß €åŸá ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©Ÿàÿ™ÿßŸá ÿ¥ÿ±Ÿàÿπ ⁄©ŸÜÿõ ŸáŸÖ€åŸÜ ŸÇÿØŸÖ‚ÄåŸáÿß€å ⁄©Ÿà⁄Ü€å⁄©ÿå
                    ÿ™Ÿà ÿ±Ÿà ÿ®Ÿá ŸáÿØŸÅ‚ÄåŸáÿß€å ÿ®ÿ≤ÿ±⁄Ø ŸÖ€å‚Äåÿ±ÿ≥ŸàŸÜŸá.
                </p>
            </div>
            <div class="rocket"><i class="fa-solid fa-rocket"></i></div>
        </div>

        {{-- ========== STATS ROW ========== --}}
        <div class="row g-3 mb-3">
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿØÿ± ÿØÿ≥ÿ™ÿ±ÿ≥</div>
                        <div class="stat-value">{{ $stats['available_exams'] ?? '‚Äî' }}</div>
                    </div>
                    <div class="stat-icon icon-1"><i class="fa-solid fa-file-circle-check"></i></div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿßŸÜÿ¨ÿßŸÖ‚Äåÿ¥ÿØŸá</div>
                        <div class="stat-value">{{ $stats['taken_exams'] ?? '‚Äî' }}</div>
                    </div>
                    <div class="stat-icon icon-3"><i class="fa-solid fa-square-check"></i></div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±Ÿá</div>
                        <div class="stat-value">{{ $stats['avg_score'] ?? '‚Äî' }}</div>
                    </div>
                    <div class="stat-icon icon-2"><i class="fa-solid fa-gauge-high"></i></div>
                </div>
            </div>
            <div class="col-md-3 col-sm-6">
                <div class="stat-card">
                    <div>
                        <div class="stat-title">ÿ≥ÿ∑ÿ≠ ŸÅÿπŸÑ€å</div>
                        <div class="stat-value">{{ $stats['current_level'] ?? '‚Äî' }}</div>
                    </div>
                    <div class="stat-icon icon-4"><i class="fa-solid fa-layer-group"></i></div>
                </div>
            </div>
        </div>

        {{-- ========== MAIN GRID (4 cards like sample) ========== --}}
        <div class="row g-3">

            {{-- Advisor --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿ¥ŸÖÿß</h3>
                        <div class="head-icon" style="background:var(--grad4)"><i class="fa-solid fa-user-graduate"></i>
                        </div>
                    </div>

                    <div class="advisor-box mb-3">
                        <div class="advisor-avatar"><i class="fa-solid fa-user-tie"></i></div>
                        <div class="advisor-info">
                            <h4>{{ $advisor['name'] ?? 'Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ ÿ¥ŸÖÿß' }}</h4>
                            <p>{{ $advisor['title'] ?? 'ŸÖÿ¥ÿßŸàÿ± ÿ™ÿ≠ÿµ€åŸÑ€å' }}</p>
                            <p class="small">ÿ≤ŸÖÿßŸÜ Ÿæÿßÿ≥ÿÆ⁄ØŸà€å€å: {{ $advisor['hours'] ?? '€∏ ÿµÿ®ÿ≠ ÿ™ÿß €∏ ÿ¥ÿ®' }}</p>
                        </div>
                    </div>

                    <div class="advisor-actions d-flex gap-2">
                        <a href="{{ $advisorChatUrl ?? route('student.support.index') }}" class="btn btn-grad flex-fill">
                            ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ <i class="fa-solid fa-comment-dots ms-1"></i>
                        </a>
                        <button class="btn btn-soft flex-fill" type="button" disabled>
                            ÿ™ŸÖÿßÿ≥ ÿ™ÿµŸà€åÿ±€å <i class="fa-solid fa-video ms-1"></i>
                        </button>
                    </div>
                </div>
            </div>

            {{-- Skills --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>ŸÖŸáÿßÿ±ÿ™‚ÄåŸáÿß€å ÿØÿ±ÿ≥€å</h3>
                        <div class="head-icon" style="background:var(--grad)"><i class="fa-solid fa-brain"></i></div>
                    </div>

                    @php
                        $skills = $skills ?? [
                            ['name' => 'ÿ±€åÿßÿ∂€å Ÿà ÿ≠ÿ≥ÿßÿ®ÿßŸÜ', 'percent' => 85],
                            ['name' => 'ŸÅ€åÿ≤€å⁄©', 'percent' => 78],
                            ['name' => 'ÿ¥€åŸÖ€å', 'percent' => 70],
                            ['name' => 'ÿ≤€åÿ≥ÿ™‚Äåÿ¥ŸÜÿßÿ≥€å', 'percent' => 92],
                        ];
                    @endphp

                    @foreach ($skills as $sk)
                        <div class="skill-item">
                            <div class="skill-head">
                                <span>{{ $sk['name'] }}</span>
                                <span class="text-primary">{{ $sk['percent'] }}%</span>
                            </div>
                            <div class="skill-bar">
                                <div class="skill-fill" style="width: {{ $sk['percent'] }}%"></div>
                            </div>
                        </div>
                    @endforeach
                </div>
            </div>

            {{-- Reports --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>ÿ¢ÿÆÿ±€åŸÜ ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß</h3>
                        <div class="head-icon" style="background:var(--grad3)"><i class="fa-solid fa-chart-bar"></i></div>
                    </div>

                    <div class="text-muted small mb-2">
                        ÿÆŸÑÿßÿµŸá ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿßÿÆ€åÿ± ÿ¥ŸÖÿß:
                    </div>

                    <div class="mini-stats">
                        <div class="mini">
                            <div class="val">{{ $stats['avg_score'] ?? '‚Äî' }}%</div>
                            <div class="lbl">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±ÿßÿ™</div>
                        </div>
                        <div class="mini">
                            <div class="val">{{ $stats['taken_exams'] ?? '‚Äî' }}</div>
                            <div class="lbl">ÿ¢ÿ≤ŸÖŸàŸÜ ÿßŸÜÿ¨ÿßŸÖ‚Äåÿ¥ÿØŸá</div>
                        </div>
                        <div class="mini">
                            <div class="val">{{ $stats['study_hours'] ?? '‚Äî' }}</div>
                            <div class="lbl">ÿ≥ÿßÿπÿ™ ŸÖÿ∑ÿßŸÑÿπŸá</div>
                        </div>
                        <div class="mini">
                            <div class="val">{{ $stats['badges'] ?? '‚Äî' }}</div>
                            <div class="lbl">ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß</div>
                        </div>
                    </div>

                    <a href="{{ route('student.reports.index') }}"
                        class="btn btn-outline-primary w-100 mt-3 fw-bold rounded-3">
                        ŸÖÿ¥ÿßŸáÿØŸá ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß <i class="fa-solid fa-arrow-left ms-1"></i>
                    </a>
                </div>
            </div>

            {{-- Exams status --}}
            <div class="col-lg-3">
                <div class="dash-card">
                    <div class="card-head">
                        <h3>Ÿàÿ∂ÿπ€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß</h3>
                        <div class="head-icon" style="background:var(--grad2)"><i class="fa-solid fa-clipboard-list"></i>
                        </div>
                    </div>

                    @php
                        $activeExams = $activeExams ?? [];
                    @endphp

                    @if (count($activeExams))
                        <ul class="exam-list">
                            @foreach ($activeExams as $ex)
                                @php
                                    $st = $ex['status'] ?? 'available';
                                    $dotClass =
                                        $st === 'in_progress' ? 'dot-warn' : ($st === 'pending' ? 'dot-acc' : 'dot-ok');
                                    $dateText = $ex['date_text'] ?? 'ÿ®Ÿá‚Äåÿ≤ŸàÿØ€å';
                                @endphp
                                <li class="exam-item">
                                    <div class="exam-name">
                                        <span class="dot {{ $dotClass }}"></span>
                                        <span>{{ $ex['title'] ?? 'ÿ¢ÿ≤ŸÖŸàŸÜ' }}</span>
                                    </div>
                                    <div class="exam-meta">{{ $dateText }}</div>
                                </li>
                            @endforeach
                        </ul>
                    @else
                        <div class="text-center text-muted small py-4">
                            ŸÅÿπŸÑÿßŸã ÿ¢ÿ≤ŸÖŸàŸÜ ŸÅÿπÿßŸÑ€å ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ ŸÜ€åÿ≥ÿ™.
                        </div>
                    @endif

                    <a href="{{ route('student.exams.public') }}" class="btn btn-primary w-100 mt-2 fw-bold rounded-3">
                        ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ <i class="fa-solid fa-play ms-1"></i>
                    </a>
                </div>
            </div>
        </div>

        {{-- ========== QUICK ACTIONS (same routes) ========== --}}
        <div class="dash-card mt-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div class="fw-bold">ŸÖ€åÿßŸÜÿ®ÿ±Ÿáÿß€å ÿ≥ÿ±€åÿπ</div>
                <div class="text-muted small">ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ±€åŸÜ ŸÖÿ≥€åÿ± ÿ®ÿ±ÿß€å ÿßÿØÿßŸÖŸá ÿØÿßÿØŸÜ</div>
            </div>

            <div class="row g-2 quick-row">
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.exams.public') }}">
                        <i class="fa-solid fa-globe"></i> ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.exams.classroom') }}">
                        <i class="fa-solid fa-people-group"></i> ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥€å
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.reports.index') }}">
                        <i class="fa-solid fa-chart-line"></i> ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.profile') }}">
                        <i class="fa-solid fa-user-gear"></i> Ÿæÿ±ŸàŸÅÿß€åŸÑ
                    </a>
                </div>
                <div class="col-md-2 col-sm-4 col-6">
                    <a class="qa" href="{{ route('student.support.index') }}">
                        <i class="fa-solid fa-headset"></i> Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å
                    </a>
                </div>
            </div>
        </div>

    </div>
@endsection

@push('scripts')
    <script>
        // animate skill bars on load
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.skill-fill').forEach((el, i) => {
                const w = el.style.width;
                el.style.width = '0%';
                setTimeout(() => el.style.width = w, 200 + i * 120);
            });
        });
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 128. learning-path.blade.php

**Path:** `resources/views/dashboard/student/learning-path.blade.php`  
**Size:** 45,898 bytes  
**Modified:** 2025-12-04 18:35:59

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÜÿ∏€åŸÖÿßÿ™ Ÿæÿß€åŸá Ÿà ÿ™ŸÖ ÿ±ŸÜ⁄Ø ÿ¨ÿØ€åÿØ */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
            --radius-sm: 8px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .lp-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-15px) rotate(5deg);
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ŸáÿØÿ± ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å */
        .lp-hero {
            background: var(--gradient-1);
            color: #fff;
            border-radius: var(--radius-xl);
            padding: 25px 20px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            margin-bottom: 25px;
            border: 2px solid rgba(255, 255, 255, 0.15);
            animation: slideInRight 0.5s ease-out;
        }

        .lp-hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
            border-radius: 0 20px 0 0;
        }

        .lp-hero::after {
            content: 'üöÄ';
            position: absolute;
            bottom: -20px;
            left: -20px;
            font-size: 120px;
            opacity: 0.1;
            transform: rotate(-15deg);
            animation: float 6s ease-in-out infinite;
        }

        .lp-hero h4 {
            font-weight: 800;
            margin: 0 0 10px 0;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            z-index: 1;
        }

        .lp-hero .sub {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        /* ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å ŸÜÿ±ŸÖ */
        .card-soft {
            border-radius: var(--radius-xl);
            background: var(--light);
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: var(--shadow-md);
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-bottom: 20px;
            animation: fadeIn 0.6s ease-out;
        }

        .card-soft:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        /* ÿ≠ŸÑŸÇŸá Ÿæ€åÿ¥ÿ±ŸÅÿ™ */
        .ring {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            margin: 0 auto 20px;
            background: conic-gradient(var(--primary) calc(var(--p)*1%), var(--light-gray) 0);
            position: relative;
            box-shadow: var(--shadow-md);
            animation: pulse 3s infinite;
        }

        .ring::before {
            content: "";
            position: absolute;
            inset: 15px;
            background: var(--light);
            border-radius: 50%;
            box-shadow: inset 0 0 0 3px var(--light-gray);
        }

        .ring .inner {
            position: relative;
            text-align: center;
            z-index: 2;
        }

        .ring .big {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--dark);
            line-height: 1;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .ring .small {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--gray);
            margin-top: 8px;
        }

        /* ⁄Ü€åŸæ‚ÄåŸáÿß€å ÿ¢ŸÖÿßÿ±€å */
        .chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            border: 2px solid transparent;
            background: var(--light);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .chip:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .chip.primary {
            background: var(--primary-light);
            color: var(--primary);
            border-color: rgba(123, 104, 238, 0.2);
        }

        .chip.secondary {
            background: var(--secondary-light);
            color: var(--secondary);
            border-color: rgba(255, 107, 157, 0.2);
        }

        .chip.accent {
            background: var(--accent-light);
            color: var(--accent);
            border-color: rgba(0, 212, 170, 0.2);
        }

        .chip.dark {
            background: var(--dark);
            color: var(--light);
            border-color: rgba(45, 48, 71, 0.3);
        }

        .chip.gold {
            background: linear-gradient(135deg, #FFD166, #FFB347);
            color: #5C4033;
            border-color: rgba(255, 209, 102, 0.3);
        }

        /* ŸÖ€åŸÑ‚Äåÿßÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß */
        .milestone {
            display: flex;
            align-items: center;
            gap: 15px;
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: 2px solid #eef2ff;
            background: var(--light);
            transition: all 0.3s ease;
            margin-bottom: 12px;
            animation: slideInRight 0.6s ease-out;
            animation-fill-mode: both;
        }

        .milestone:nth-child(1) {
            animation-delay: 0.1s;
        }

        .milestone:nth-child(2) {
            animation-delay: 0.2s;
        }

        .milestone:nth-child(3) {
            animation-delay: 0.3s;
        }

        .milestone:nth-child(4) {
            animation-delay: 0.4s;
        }

        .milestone:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .milestone .icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: grid;
            place-items: center;
            font-size: 1.8rem;
            font-weight: 900;
            flex-shrink: 0;
            background: var(--primary-light);
            color: var(--primary);
            border: 3px solid rgba(123, 104, 238, 0.2);
            transition: all 0.3s;
        }

        .milestone.done .icon {
            background: var(--accent-light);
            color: var(--accent);
            border-color: rgba(0, 212, 170, 0.3);
            animation: bounce 2s infinite;
        }

        .milestone.locked .icon {
            background: var(--light-gray);
            color: var(--gray);
            border-color: #e2e8f0;
        }

        .milestone .title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--dark);
        }

        .milestone .sub {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 600;
            margin-top: 4px;
        }

        .milestone .badge {
            font-size: 0.8rem;
            font-weight: 800;
            border-radius: 50px;
            padding: 6px 12px;
            white-space: nowrap;
        }

        /* ŸÑ€åÿ≥ÿ™ ÿ™ŸÖÿ±⁄©ÿ≤ */
        .focus-item {
            border: 2px dashed var(--primary-light);
            border-radius: var(--radius-lg);
            padding: 12px 15px;
            background: var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: var(--dark);
            transition: all 0.3s;
            margin-bottom: 10px;
        }

        .focus-item:hover {
            border-color: var(--primary);
            background: var(--primary-light);
            transform: translateX(-5px);
        }

        .focus-item i {
            font-size: 1.2rem;
            color: var(--primary);
        }

        /* ⁄©ÿßÿ±ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿπÿØ€å */
        .next-box {
            border-radius: var(--radius-xl);
            padding: 20px;
            border: 2px dashed var(--primary);
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), rgba(255, 107, 157, 0.05));
            position: relative;
            overflow: hidden;
            animation: pulse 2s infinite;
        }

        .next-box::before {
            content: '‚ö°';
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 40px;
            opacity: 0.1;
            animation: float 4s ease-in-out infinite;
        }

        .next-btn {
            border-radius: var(--radius-lg);
            font-weight: 800;
            padding: 15px 20px;
            background: var(--gradient-1);
            border: none;
            color: #fff;
            box-shadow: 0 12px 28px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 34px rgba(123, 104, 238, 0.4);
        }

        .next-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .next-btn:hover::before {
            right: 100%;
        }

        /* ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å */
        .suggest-card {
            border-radius: var(--radius-xl);
            background: var(--light);
            border: 2px solid rgba(0, 0, 0, 0.05);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            isolation: isolate;
            height: 100%;
            padding: 20px;
            animation: fadeIn 0.7s ease-out;
            animation-fill-mode: both;
        }

        .suggest-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .suggest-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .suggest-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .suggest-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-1);
            opacity: 0.9;
        }

        .suggest-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .suggest-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            display: grid;
            place-items: center;
            font-size: 1.8rem;
            font-weight: 900;
            flex-shrink: 0;
            background: var(--primary-light);
            color: var(--primary);
            border: 3px solid rgba(123, 104, 238, 0.2);
            box-shadow: inset 0 0 0 3px rgba(255, 255, 255, 0.8);
            transition: all 0.3s;
        }

        .suggest-card:hover .suggest-icon {
            transform: scale(1.1) rotate(5deg);
            background: var(--gradient-1);
            color: white;
        }

        .suggest-card.amber .suggest-icon {
            background: rgba(255, 209, 102, 0.2);
            color: #D4A017;
            border-color: rgba(255, 209, 102, 0.3);
        }

        .suggest-card.green .suggest-icon {
            background: var(--accent-light);
            color: var(--accent);
            border-color: rgba(0, 212, 170, 0.3);
        }

        .suggest-title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .suggest-desc {
            font-size: 0.9rem;
            color: var(--gray);
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .recommended-badge {
            position: absolute;
            top: 15px;
            right: -45px;
            transform: rotate(35deg);
            background: var(--gradient-1);
            color: #fff;
            font-weight: 800;
            font-size: 0.8rem;
            padding: 5px 40px;
            box-shadow: 0 8px 16px rgba(123, 104, 238, 0.35);
            z-index: 2;
        }

        .mini-progress {
            height: 10px;
            border-radius: 50px;
            background: var(--light-gray);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
            margin: 15px 0;
        }

        .mini-progress>div {
            height: 100%;
            width: var(--w, 0%);
            background: var(--gradient-1);
            transition: width 0.6s ease;
            border-radius: 50px;
        }

        /* ÿØ⁄©ŸÖŸá ÿ¥ÿ±Ÿàÿπ ŸÅŸàÿ±€å */
        .btn-start-now {
            border-radius: var(--radius-lg);
            font-weight: 800;
            padding: 15px;
            border: none;
            color: #fff;
            position: relative;
            background: var(--gradient-1);
            box-shadow: 0 12px 28px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        .btn-start-now:hover {
            transform: translateY(-3px);
            box-shadow: 0 18px 36px rgba(123, 104, 238, 0.4);
        }

        .btn-start-now::after {
            content: "";
            position: absolute;
            top: -40%;
            right: -60%;
            width: 55%;
            height: 160%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.7), transparent);
            transform: rotate(18deg);
            animation: btnShine 2.6s infinite ease-in-out;
        }

        @keyframes btnShine {
            0% {
                right: -60%;
                opacity: 0
            }

            30% {
                opacity: .9
            }

            60% {
                right: 120%;
                opacity: 0
            }

            100% {
                right: 120%;
                opacity: 0
            }
        }

        .pulse-soft {
            animation: pulseSoft 1.9s infinite ease-in-out;
        }

        @keyframes pulseSoft {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        /* ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ÿØ⁄©ŸÖŸá */
        .btn-start-now.clicked .burst::before {
            animation: burst1 .6s ease-out forwards;
        }

        .btn-start-now.clicked .burst::after {
            animation: burst2 .7s ease-out forwards;
        }

        @keyframes burst1 {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1
            }

            70% {
                transform: translate(-180%, -140%) scale(1.4);
                opacity: .8
            }

            100% {
                transform: translate(-220%, -180%) scale(0);
                opacity: 0
            }
        }

        @keyframes burst2 {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1
            }

            70% {
                transform: translate(140%, -160%) scale(1.6);
                opacity: .8
            }

            100% {
                transform: translate(180%, -220%) scale(0);
                opacity: 0
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿπŸÖŸàŸÖ€å */
        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
        }

        /* Ÿáÿß€åŸÑÿß€åÿ™ ŸÖÿ™ŸÜ */
        .highlight {
            position: relative;
            display: inline-block;
        }

        .highlight::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, rgba(123, 104, 238, 0.2), rgba(255, 107, 157, 0.2));
            z-index: -1;
            border-radius: 4px;
        }

        /* ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å‚ÄåŸáÿß€å ŸÖŸàÿ®ÿß€åŸÑ */
        @media (max-width: 768px) {
            .lp-page {
                padding: 15px 10px 90px;
            }

            .lp-hero {
                padding: 20px 15px;
            }

            .lp-hero h4 {
                font-size: 1.3rem;
            }

            .ring {
                width: 150px;
                height: 150px;
            }

            .ring .big {
                font-size: 2rem;
            }

            .milestone {
                padding: 15px;
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }

            .milestone .icon {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
            }

            .suggest-card {
                padding: 15px;
            }

            .btn-start-now,
            .next-btn {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }

        /* ÿßÿ≥⁄©ÿ±ŸàŸÑ ŸÜÿ±ŸÖ */
        html {
            scroll-behavior: smooth;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .btn-start-now,
        .next-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }
    </style>
@endpush

@section('content')
    @php
        $overallPercent = (int) ($overallPercent ?? 0);
        $currentLevel = $currentLevel ?? 1;
        $levelProgress = $levelProgress ?? $overallPercent;
        $focusTopics = $focusTopics ?? ['ÿØÿ±⁄© ŸÖÿ∑ŸÑÿ®', 'ÿ≠ŸÑ ŸÖÿ≥ÿ¶ŸÑŸá', 'ÿ≥ÿ±ÿπÿ™ Ÿæÿßÿ≥ÿÆ‚Äå⁄ØŸà€å€å', 'ŸÖÿØ€åÿ±€åÿ™ ÿ≤ŸÖÿßŸÜ'];

        $recommendedLevel =
            $recommendedLevel ??
            ($overallPercent >= 85 ? 'olympiad' : ($overallPercent >= 60 ? 'konkur' : 'taghviyati'));

        if ($overallPercent >= 85) {
            $headline = 'ÿ™Ÿà ÿ¢ŸÖÿßÿØŸá‚Äå€å ÿ≥ÿ∑ÿ≠ ÿ®ÿßŸÑÿßÿ™ÿ±€å Ÿáÿ≥ÿ™€å! üèÜ';
            $subline = 'ÿßÿ≤ ÿß€åŸÜÿ¨ÿß ÿ®Ÿá ÿ®ÿπÿØÿå ⁄ÜÿßŸÑÿ¥‚ÄåŸáÿß ÿ¨ÿ∞ÿßÿ®‚Äåÿ™ÿ± ŸÖ€å‚Äåÿ¥ŸÜ. ÿ®ÿ±€åŸÖ ÿ®ÿ±ÿß€å ŸÖÿ±ÿ≠ŸÑŸá‚Äå€å ÿ≥ÿÆÿ™‚Äåÿ™ÿ±.';
            $nextText = 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿßŸÑŸÖŸæ€åÿßÿØ€å / ÿ≥ÿ∑ÿ≠ ÿ≥ÿÆÿ™';
            $nextIcon = 'fas fa-trophy';
            $nextColor = 'gold';
        } elseif ($overallPercent >= 60) {
            $headline = 'ÿÆ€åŸÑ€å ÿÆŸàÿ® ÿØÿ± ŸÖÿ≥€åÿ± ÿ±ÿ¥ÿØ Ÿáÿ≥ÿ™€å! ‚ö°';
            $subline = 'ŸÅŸÇÿ∑ ⁄ÜŸÜÿØ ÿ™ŸÖÿ±€åŸÜ ÿØ€å⁄ØŸá ÿ™ÿß ÿ±⁄©Ÿàÿ±ÿØ ÿ¨ÿØ€åÿØ ŸÅÿßÿµŸÑŸá ÿØÿßÿ±€å.';
            $nextText = 'ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖÿ¥ÿßÿ®Ÿá ÿ®ÿ±ÿß€å ÿ±⁄©Ÿàÿ±ÿØ';
            $nextIcon = 'fas fa-bullseye';
            $nextColor = 'accent';
        } else {
            $headline = 'ÿ¥ÿ±Ÿàÿπ ÿÆŸàÿ®€å ÿ®ŸàÿØŸáÿå ÿßÿØÿßŸÖŸá ÿ®ÿØŸá! üöÄ';
            $subline = 'ÿ®ÿß ⁄ÜŸÜÿØ ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©Ÿàÿ™ÿßŸá ÿ™ŸÇŸà€åÿ™€åÿå ÿ¨Ÿáÿ¥ ÿ≥ÿ±€åÿπ ŸÖ€å‚Äåÿ®€åŸÜ€å.';
            $nextText = 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÇŸà€åÿ™€å ⁄©Ÿàÿ™ÿßŸá';
            $nextIcon = 'fas fa-bolt';
            $nextColor = 'primary';
        }

        $milestones = [
            ['title' => 'ÿ¥ÿ±Ÿàÿπ ŸÖÿ≥€åÿ±', 'sub' => 'ÿßŸàŸÑ€åŸÜ ŸÇÿØŸÖ ŸáŸÖ€åÿ¥Ÿá ŸÖŸáŸÖŸá', 'min' => 0, 'icon' => 'fas fa-flag'],
            ['title' => 'ÿ´ÿ®ÿßÿ™ ÿ™ŸÖÿ±€åŸÜ', 'sub' => '€≥ ÿ¢ÿ≤ŸÖŸàŸÜ Ÿæÿ¥ÿ™‚Äåÿ≥ÿ±ŸáŸÖ', 'min' => 35, 'icon' => 'fas fa-calendar-check'],
            ['title' => 'ÿ±⁄©Ÿàÿ±ÿØ ÿ¥ÿÆÿµ€å', 'sub' => 'ÿ®Ÿáÿ®ŸàÿØ ÿ≠ÿØÿßŸÇŸÑ €±€∞Ÿ™', 'min' => 60, 'icon' => 'fas fa-chart-line'],
            ['title' => 'ÿ≥ÿ∑ÿ≠ ŸÇŸáÿ±ŸÖÿßŸÜ€å', 'sub' => 'ÿ¢ŸÖÿßÿØŸá‚Äå€å ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ≥ÿÆÿ™', 'min' => 85, 'icon' => 'fas fa-crown'],
        ];

        $levelText = fn($lv) => match ($lv) {
            'taghviyati' => 'ÿ™ŸÇŸà€åÿ™€å',
            'konkur' => '⁄©ŸÜ⁄©Ÿàÿ±€å',
            'olympiad' => 'ÿßŸÑŸÖŸæ€åÿßÿØ€å',
            default => $lv ?? 'ŸÜÿßŸÖÿ¥ÿÆÿµ',
        };

        $diffText = fn($df) => match ($df) {
            'easy' => 'ÿ¢ÿ≥ÿßŸÜ',
            'hard' => 'ÿ≥ÿÆÿ™',
            'medium' => 'ŸÖÿ™Ÿàÿ≥ÿ∑',
            default => $df ?? 'ŸÖÿ™Ÿàÿ≥ÿ∑',
        };

        $suggestedExams = isset($suggestedExams) ? collect($suggestedExams) : collect();

        // ÿ±Ÿàÿ™‚ÄåŸáÿß€å ÿßŸÖŸÜ
        $examsIndexRoute = route('student.exams.index');
        $profileRoute = \Route::has('student.profile') ? route('student.profile') : '#';
    @endphp

    <div class="lp-page">
        {{-- ================= HERO ================= --}}
        <div class="lp-hero">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
                <div>
                    <h4>
                        <i class="fas fa-map-marked-alt"></i>
                        ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å ÿ¥ÿÆÿµ€å
                    </h4>
                    <div class="sub">
                        ÿß€åŸÜÿ¨ÿß ŸÜŸÇÿ¥Ÿá‚Äå€å Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ™Ÿàÿ¶Ÿáÿõ Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜ €åŸá ŸÇÿØŸÖŸá.
                        ŸÖÿ≥€åÿ±ÿ™ ÿ±Ÿà ÿßÿØÿßŸÖŸá ÿ®ÿØŸá ÿ™ÿß ŸÖÿ±ÿ≠ŸÑŸá‚ÄåŸáÿß€å ÿ¨ÿØ€åÿØ ÿ®ÿßÿ≤ ÿ®ÿ¥ŸÜ ‚ú®
                    </div>
                </div>

                <a href="{{ $examsIndexRoute }}" class="btn"
                    style="background: white; color: var(--primary); font-weight: 700; border-radius: 12px; padding: 10px 20px;">
                    <i class="fas fa-arrow-left"></i> ŸáŸÖŸá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>
            </div>

            <div class="d-flex flex-wrap gap-2 mt-3">
                <span class="chip dark"><i class="fas fa-shield-alt"></i> ŸÖÿ≥€åÿ± ÿßŸÖŸÜ Ÿà ŸÖÿ±ÿ≠ŸÑŸá‚Äåÿß€å</span>
                <span class="chip primary"><i class="fas fa-chart-line"></i> Ÿæ€åÿ¥ÿ±ŸÅÿ™ ŸÇÿßÿ®ŸÑ ÿßŸÜÿØÿßÿ≤Ÿá‚Äå⁄Ø€åÿ±€å</span>
                <span class="chip accent"><i class="fas fa-trophy"></i> ŸæÿßÿØÿßÿ¥ ÿ®ÿ±ÿß€å ÿ±ÿ¥ÿØ</span>
                <span class="chip secondary"><i class="fas fa-bolt"></i> ⁄ÜÿßŸÑÿ¥ ÿ®ÿ±ÿß€å Ÿá€åÿ¨ÿßŸÜ</span>
            </div>
        </div>

        {{-- ================= SUMMARY ================= --}}
        <div class="row g-3 mb-4">
            <div class="col-12 col-lg-4">
                <div class="card-soft text-center h-100">
                    <div class="ring" style="--p: {{ $overallPercent }};">
                        <div class="inner">
                            <div class="big">{{ round($overallPercent) }}%</div>
                            <div class="small">Ÿæ€åÿ¥ÿ±ŸÅÿ™ ⁄©ŸÑ€å</div>
                        </div>
                    </div>

                    <div class="fw-bold fs-5 mt-2 mb-3">{{ $headline }}</div>
                    <div class="text-muted mb-3" style="line-height: 1.8; font-size: 0.9rem;">
                        {{ $subline }}
                    </div>

                    <div class="mt-3">
                        <span class="chip primary">
                            <i class="fas fa-user-graduate"></i>
                            ÿ≥ÿ∑ÿ≠ ŸÅÿπŸÑ€å: {{ $currentLevel }}
                        </span>
                        <span class="chip {{ $nextColor }} ms-2">
                            <i class="fas fa-arrow-up"></i>
                            {{ $levelText($recommendedLevel) }}
                        </span>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-8">
                <div class="card-soft h-100">
                    <div class="fw-bold mb-3 d-flex align-items-center gap-2" style="font-size: 1.1rem;">
                        <i class="fas fa-bullseye text-primary"></i>
                        ÿ™ŸÖÿ±⁄©ÿ≤ ŸáŸÖ€åŸÜ ŸáŸÅÿ™Ÿá
                    </div>

                    <div class="row g-2">
                        @foreach ($focusTopics as $t)
                            <div class="col-12 col-md-6">
                                <div class="focus-item">
                                    <i class="fas fa-dot-circle text-primary"></i>
                                    {{ $t }}
                                </div>
                            </div>
                        @endforeach
                    </div>

                    <div class="mt-4 next-box">
                        <div class="fw-bold d-flex align-items-center gap-2 mb-2" style="font-size: 1.1rem;">
                            <i class="{{ $nextIcon }} text-primary"></i>
                            Ÿæ€åÿ¥ŸÜŸáÿßÿØ ŸÖÿ±ÿ≠ŸÑŸá ÿ®ÿπÿØ€å
                        </div>
                        <div class="text-muted mb-3" style="line-height: 1.7; font-size: 0.9rem;">
                            {{ $nextText }} ‚Äî ⁄ÜŸàŸÜ ÿßŸÑÿßŸÜ ÿØŸÇ€åŸÇÿßŸã ÿ®Ÿáÿ™ÿ±€åŸÜ ÿ≤ŸÖÿßŸÜ ÿ®ÿ±ÿß€å ÿßÿØÿßŸÖŸá‚Äå€å €åÿßÿØ⁄Ø€åÿ±€åŸá.
                        </div>
                        <a href="{{ $examsIndexRoute }}" class="next-btn">
                            ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å
                            <i class="fas fa-play ms-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        {{-- ================= MILESTONES ================= --}}
        <div class="card-soft mb-4">
            <div class="fw-bold mb-3 d-flex align-items-center gap-2" style="font-size: 1.1rem;">
                <i class="fas fa-mountain text-primary"></i>
                ŸÖÿ±ÿ≠ŸÑŸá‚ÄåŸáÿß€å ŸÖÿ≥€åÿ±
            </div>
            <div class="text-muted mb-4" style="line-height: 1.7; font-size: 0.9rem;">
                ÿß€åŸÜ‚ÄåŸáÿß ŸÜŸÇÿßÿ∑€å Ÿáÿ≥ÿ™ŸÜ ⁄©Ÿá ŸàŸÇÿ™€å ÿ®Ÿáÿ¥ŸàŸÜ ÿ®ÿ±ÿ≥€åÿå ÿ≠ÿ≥ ¬´ÿßÿ±ÿ™ŸÇÿßÿ°¬ª ŸÖ€å‚Äå⁄Ø€åÿ±€å Ÿà ÿ≥ÿ∑ÿ≠ ÿ®ÿπÿØ€å ÿ®ÿßÿ≤ ŸÖ€åÿ¥Ÿá.
            </div>

            <div>
                @foreach ($milestones as $m)
                    @php
                        $done = $overallPercent >= $m['min'];
                        $locked = !$done && $m['min'] > $overallPercent;
                    @endphp

                    <div class="milestone {{ $done ? 'done' : ($locked ? 'locked' : '') }}">
                        <div class="icon">
                            <i class="{{ $m['icon'] }}"></i>
                        </div>

                        <div class="flex-grow-1">
                            <div class="title">{{ $m['title'] }}</div>
                            <div class="sub">{{ $m['sub'] }}</div>
                        </div>

                        @if ($done)
                            <span class="badge" style="background: var(--accent); color: white; font-weight: 700;">ÿ®ÿßÿ≤
                                ÿ¥ÿØ</span>
                        @else
                            <span class="badge"
                                style="background: var(--light-gray); color: var(--dark); font-weight: 700;">ŸÜ€åÿßÿ≤ ÿ®Ÿá
                                {{ $m['min'] }}Ÿ™</span>
                        @endif
                    </div>
                @endforeach
            </div>
        </div>

        {{-- ================= SUGGESTED EXAMS (SAFE) ================= --}}
        @if ($suggestedExams->count())
            @php
                $labels = [
                    0 => [
                        'title' => '⁄ÜÿßŸÑÿ¥ ÿ≥ÿÆÿ™‚Äåÿ™ÿ± üî•',
                        'class' => 'amber',
                        'icon' => 'fas fa-fire',
                        'recommended' => true,
                    ],
                    1 => [
                        'title' => 'ŸÖÿ¥ÿßÿ®Ÿá ÿ®ÿ±ÿß€å ÿ±⁄©Ÿàÿ±ÿØ üéØ',
                        'class' => 'blue',
                        'icon' => 'fas fa-bullseye',
                        'recommended' => false,
                    ],
                    2 => [
                        'title' => '⁄©Ÿàÿ™ÿßŸá Ÿà ÿ™ŸÇŸà€åÿ™€å ‚ö°',
                        'class' => 'green',
                        'icon' => 'fas fa-bolt',
                        'recommended' => false,
                    ],
                ];
            @endphp

            <div class="card-soft mb-4">
                <div class="fw-bold mb-3 d-flex align-items-center gap-2" style="font-size: 1.1rem;">
                    <i class="fas fa-magic text-primary"></i>
                    Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ®ÿπÿØ€å ÿ®ÿ±ÿß€å ÿ™Ÿà
                </div>

                <div class="text-muted mb-4" style="line-height: 1.7; font-size: 0.9rem;">
                    ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÜÿ™€åÿ¨Ÿá‚ÄåŸáÿßÿ™ ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá‚ÄåÿßŸÜÿØ ÿ™ÿß ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ± ÿ±ÿ¥ÿØ ⁄©ŸÜ€å.
                </div>

                <div class="row g-3">
                    @foreach ($suggestedExams as $i => $ex)
                        @php
                            $meta = $labels[$i] ?? [
                                'title' => 'ÿ¢ÿ≤ŸÖŸàŸÜ Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å',
                                'class' => 'primary',
                                'icon' => 'fas fa-play',
                                'recommended' => false,
                            ];
                            $qCount = $ex->questions_count ?? (isset($ex->questions) ? $ex->questions->count() : 0);
                            $level = $levelText($ex->level ?? null);
                            $difficulty = $diffText($ex->difficulty ?? null);
                            $fakeProgress = min(100, max(5, $overallPercent + $i * 12));
                            $examShowRoute = route('student.exams.show', $ex->id);
                            $examTakeRoute = \Route::has('student.exams.take')
                                ? route('student.exams.take', $ex->id)
                                : $examsIndexRoute;
                        @endphp

                        <div class="col-12 col-md-6 col-lg-4">
                            <div class="suggest-card {{ $meta['class'] }} h-100">
                                @if ($meta['recommended'])
                                    <div class="recommended-badge">Ÿæ€åÿ¥ŸÜŸáÿßÿØ Ÿà€å⁄òŸá ‚≠ê</div>
                                @endif

                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <span class="chip {{ $meta['class'] }}">
                                        <i class="{{ $meta['icon'] }}"></i>
                                        {{ $meta['title'] }}
                                    </span>
                                    <span class="chip dark">{{ $level }}</span>
                                </div>

                                <div class="d-flex align-items-start gap-3">
                                    <div class="suggest-icon">
                                        <i class="{{ $meta['icon'] }}"></i>
                                    </div>

                                    <div class="flex-grow-1">
                                        <div class="suggest-title">{{ $ex->title ?? 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ' }}</div>
                                        <div class="suggest-desc">
                                            {{ \Illuminate\Support\Str::limit($ex->description ?? 'ÿ®ÿØŸàŸÜ ÿ™Ÿàÿ∂€åÿ≠', 80) }}
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-1">
                                        <span class="small fw-bold" style="color: var(--dark);">Ÿæ€åÿ¥ÿ±ŸÅÿ™ Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å</span>
                                        <span class="small fw-bold"
                                            style="color: var(--primary);">{{ $fakeProgress }}%</span>
                                    </div>
                                    <div class="mini-progress" style="--w: {{ $fakeProgress }}%;">
                                        <div></div>
                                    </div>
                                </div>

                                <div class="d-flex flex-wrap gap-2 mt-3">
                                    <span class="chip primary">
                                        <i class="fas fa-question-circle"></i>
                                        {{ $qCount }} ÿ≥ŸàÿßŸÑ
                                    </span>
                                    <span class="chip">
                                        <i class="fas fa-clock"></i>
                                        {{ $ex->duration ?? 0 }} ÿØŸÇ€åŸÇŸá
                                    </span>
                                    <span class="chip secondary">
                                        <i class="fas fa-gauge-high"></i>
                                        {{ $difficulty }}
                                    </span>
                                    @if (isset($ex->subject))
                                        <span class="chip accent">
                                            <i class="fas fa-book"></i>
                                            {{ $ex->subject->title ?? ($ex->subject->name ?? 'ÿØÿ±ÿ≥') }}
                                        </span>
                                    @endif
                                </div>

                                <div class="mt-4 d-grid gap-2">
                                    <a href="{{ $examShowRoute }}" class="btn-outline-custom text-center">
                                        ŸÖÿ¥ÿßŸáÿØŸá ÿ¨ÿ≤ÿ¶€åÿßÿ™
                                        <i class="fas fa-eye ms-1"></i>
                                    </a>
                                    <a href="{{ $examTakeRoute }}" class="btn-start-now pulse-soft">
                                        ÿ¥ÿ±Ÿàÿπ ŸÅŸàÿ±€å
                                        <i class="fas fa-play ms-1"></i>
                                        <span class="burst"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    @endforeach
                </div>
            </div>
        @else
            <div class="card-soft mb-4 text-center" style="padding: 40px 20px;">
                <div class="mb-3" style="font-size: 3rem; color: var(--gray);">üìö</div>
                <div class="fw-bold mb-2" style="color: var(--dark);">ŸÅÿπŸÑÿßŸã ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ€å ÿ®ÿ±ÿß€å Ÿæ€åÿ¥ŸÜŸáÿßÿØ ŸÜÿØÿßÿ±€åŸÖ</div>
                <div class="text-muted">€å⁄©ŸÖ ÿØ€å⁄ØŸá ÿ™ŸÖÿ±€åŸÜ ⁄©ŸÜ ÿ™ÿß Ÿæ€åÿ¥ŸÜŸáÿßÿØŸáÿß€å ÿ®ÿπÿØ€å ÿ®ÿßÿ≤ ÿ®ÿ¥ŸÜ üòâ</div>
                <a href="{{ $examsIndexRoute }}" class="btn-primary-custom mt-3">
                    ÿ®ÿ±Ÿà ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                    <i class="fas fa-arrow-left ms-1"></i>
                </a>
            </div>
        @endif

        {{-- ================= FINAL MOTIVATION ================= --}}
        <div class="card-soft text-center">
            <div class="mb-3" style="font-size: 3rem;">üí™</div>
            <div class="fw-bold fs-4 mb-2">ŸÅŸÇÿ∑ ÿ®ÿß ¬´ÿßÿØÿßŸÖŸá ÿØÿßÿØŸÜ¬ª ŸÇŸà€å ŸÖ€å‚Äåÿ¥€å</div>
            <div class="text-muted mb-4" style="line-height: 1.8; max-width: 500px; margin: 0 auto;">
                ŸÖÿ∫ÿ≤ÿ™ ÿ®ÿπÿØ ÿßÿ≤ Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜÿå ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ± Ÿà ÿØŸÇ€åŸÇ‚Äåÿ™ÿ± ŸÖ€å‚Äåÿ¥Ÿá.
                ŸáŸÖ€åŸÜ ÿßŸÑÿßŸÜ €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ÿØ€å⁄ØŸá ÿ®ÿØŸá ÿ™ÿß ŸÖŸàÿ¨ €åÿßÿØ⁄Ø€åÿ±€å ⁄©ÿßŸÖŸÑ ÿ®ÿ¥Ÿá.
            </div>

            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="{{ $examsIndexRoute }}" class="btn-primary-custom">
                    ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ ÿ®ÿØŸá
                    <i class="fas fa-play ms-1"></i>
                </a>
                <a href="{{ $profileRoute }}" class="btn-outline-custom">
                    Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖŸÜ
                    <i class="fas fa-user ms-1"></i>
                </a>
            </div>
        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ÿ™ÿπÿßŸÖŸÑ€å
                const startButtons = document.querySelectorAll('.btn-start-now');

                startButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄©
                        this.classList.add('clicked');
                        setTimeout(() => {
                            this.classList.remove('clicked');
                        }, 700);

                        // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ (ÿß⁄Øÿ± Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ¥ŸàÿØ)
                        if (navigator.vibrate) {
                            navigator.vibrate(50);
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ⁄Ü€åŸæ
                const chips = document.querySelectorAll('.chip');
                chips.forEach(chip => {
                    chip.addEventListener('click', function() {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ŸÖ€åŸÑ‚Äåÿßÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß
                const milestones = document.querySelectorAll('.milestone');
                milestones.forEach(stone => {
                    stone.addEventListener('click', function() {
                        const title = this.querySelector('.title').textContent;
                        const sub = this.querySelector('.sub').textContent;

                        // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄©
                        this.style.transform = 'scale(0.98)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 200);

                        // ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ ÿ≥ÿßÿØŸá
                        if (!this.classList.contains('locked')) {
                            showQuickModal('ŸÖÿ±ÿ≠ŸÑŸá', `${title}\n\n${sub}`, 'primary');
                        } else {
                            showQuickModal('ŸÇŸÅŸÑ ÿ¥ÿØŸá',
                                `ÿß€åŸÜ ŸÖÿ±ÿ≠ŸÑŸá ŸáŸÜŸàÿ≤ ÿ®ÿßÿ≤ ŸÜÿ¥ÿØŸá\n\nÿ®ÿ±ÿß€å ÿ®ÿßÿ≤ ÿ¥ÿØŸÜ ŸÜ€åÿßÿ≤ ÿ®Ÿá Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ®€åÿ¥ÿ™ÿ± ÿØÿßÿ±€å`,
                                'secondary');
                        }
                    });
                });

                // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ ÿ≥ÿ±€åÿπ
                function showQuickModal(title, message, type = 'primary') {
                    const modal = document.createElement('div');
                    modal.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            max-width: 320px;
            width: 85%;
            animation: scaleIn 0.3s ease forwards;
            border: 3px solid ${type === 'primary' ? '#7B68EE' : type === 'secondary' ? '#FF6B9D' : '#00D4AA'};
        `;

                    modal.innerHTML = `
            <div style="font-size: 2.5rem; margin-bottom: 15px; color: ${type === 'primary' ? '#7B68EE' : type === 'secondary' ? '#FF6B9D' : '#00D4AA'}">
                ${type === 'primary' ? 'üéØ' : type === 'secondary' ? 'üîí' : '‚ú®'}
            </div>
            <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">${title}</h3>
            <p style="color: var(--gray); margin-bottom: 25px; font-size: 0.95rem; line-height: 1.5; white-space: pre-line;">${message}</p>
            <button onclick="this.parentElement.remove(); if (this.parentElement.nextElementSibling) this.parentElement.nextElementSibling.remove();" style="width:100%; padding: 12px; border: none; background: ${type === 'primary' ? '#7B68EE' : type === 'secondary' ? '#FF6B9D' : '#00D4AA'}; color: white; border-radius: 12px; font-weight: 600; font-size: 0.9rem;">ÿ®ÿßÿ¥Ÿá!</button>
        `;

                    document.body.appendChild(modal);

                    const overlay = document.createElement('div');
                    overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        `;
                    document.body.appendChild(overlay);

                    setTimeout(() => {
                        if (document.body.contains(modal)) {
                            modal.remove();
                            overlay.remove();
                        }
                    }, 4000);
                }

                // ÿßŸÅÿ≤ŸàÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ÿßÿ∂ÿßŸÅ€å
                const style = document.createElement('style');
                style.textContent = `
        @keyframes scaleIn {
            from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
    `;
                document.head.appendChild(style);
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 129. my-teachers.blade.php

**Path:** `resources/views/dashboard/student/my-teachers.blade.php`  
**Size:** 30,798 bytes  
**Modified:** 2025-12-04 19:03:43

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ŸÖÿπŸÑŸÖÿßŸÜ ŸÖŸÜ - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÖ ÿ±ŸÜ⁄Ø ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .teachers-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* ŸáÿØÿ± ÿµŸÅÿ≠Ÿá */
        .page-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
        }

        .page-title-section h1 {
            font-weight: 800;
            font-size: 1.8rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .page-title-section h1 i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 600px;
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸáÿØÿ± */
        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* ⁄©ÿßÿ±ÿ™ ŸÖÿπŸÑŸÖ */
        .teacher-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }

        .teacher-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .teacher-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .teacher-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .teacher-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .teacher-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .teacher-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        .teacher-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .teacher-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
            z-index: 1;
        }

        /* ŸáÿØÿ± ⁄©ÿßÿ±ÿ™ */
        .teacher-header {
            background: var(--gradient-1);
            color: white;
            padding: 25px 20px;
            position: relative;
            overflow: hidden;
        }

        .teacher-header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent 70%);
            border-radius: 50%;
        }

        .teacher-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 2rem;
            font-weight: 800;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            border: 4px solid white;
            position: relative;
            z-index: 2;
            transition: all 0.3s;
            animation: float 3s ease-in-out infinite;
        }

        .teacher-card:hover .teacher-avatar {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        }

        .teacher-info {
            position: relative;
            z-index: 2;
            margin-top: 15px;
        }

        .teacher-name {
            font-weight: 800;
            font-size: 1.3rem;
            margin: 0 0 5px 0;
            color: white;
        }

        .teacher-meta {
            font-size: 0.9rem;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.95);
        }

        .teacher-meta i {
            font-size: 0.9rem;
        }

        /* ÿ®ÿØŸÜŸá ⁄©ÿßÿ±ÿ™ */
        .teacher-body {
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .teacher-specialty {
            background: var(--accent-light);
            color: var(--accent);
            padding: 10px 15px;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            border: 2px solid rgba(0, 212, 170, 0.2);
            animation: pulse 2s infinite;
        }

        .teacher-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .teacher-chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            background: var(--light-gray);
            color: var(--dark);
            border: 2px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
        }

        .teacher-chip:hover {
            transform: translateY(-3px);
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        .teacher-chip i {
            font-size: 0.9rem;
        }

        .teacher-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .action-btn:active {
            transform: scale(0.97);
        }

        .btn-profile {
            background: var(--light-gray);
            color: var(--dark);
            border-color: rgba(0, 0, 0, 0.05);
        }

        .btn-profile:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.15);
        }

        .btn-message {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
        }

        .btn-message:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-message::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-message:hover::before {
            right: 100%;
        }

        /* Ÿàÿ∂ÿπ€åÿ™ ÿÆÿßŸÑ€å */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 30px;
            text-align: center;
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
            border: 2px dashed var(--primary-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .empty-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: var(--primary);
            font-size: 3rem;
            animation: float 4s ease-in-out infinite;
        }

        .empty-title {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .empty-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        /* ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å ŸÖŸàÿ®ÿß€åŸÑ */
        @media (max-width: 768px) {
            .teachers-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-title-section h1 {
                font-size: 1.5rem;
            }

            .page-title-section h1 i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .teacher-avatar {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .teacher-name {
                font-size: 1.1rem;
            }

            .teacher-body {
                padding: 15px;
            }

            .teacher-chips {
                justify-content: center;
            }

            .action-btn {
                padding: 12px;
                font-size: 0.9rem;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            .empty-actions {
                flex-direction: column;
            }

            .btn-primary-custom,
            .btn-outline-custom {
                width: 100%;
                justify-content: center;
            }
        }

        @media (min-width: 992px) {
            .teacher-actions {
                flex-direction: row;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .action-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        // ‚úÖ ŸÖŸÇÿßŸàŸÖ ÿØÿ± ÿ®ÿ±ÿßÿ®ÿ± null
        $teachers = $teachers ?? collect();

        // Route-safe Ÿáÿß
        $hasTeacherShow = \Route::has('student.teachers.show');
        $hasMessageCreate = \Route::has('student.messages.create');

        $classroomsRoute = route('student.classrooms.index');
    @endphp

    <div class="teachers-page">
        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="page-title-section">
                <h1>
                    <i class="fas fa-chalkboard-teacher"></i>
                    ŸÖÿπŸÑŸÖÿßŸÜ ŸÖŸÜ
                </h1>
                <p class="page-subtitle">
                    ŸÑ€åÿ≥ÿ™ ŸÖÿπŸÑŸÖ‚ÄåŸáÿß€å€å ⁄©Ÿá ÿØÿ± ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ¥ŸÖÿß ŸÅÿπÿßŸÑ Ÿáÿ≥ÿ™ŸÜÿØ.
                    Ÿáÿ± ŸÖÿπŸÑŸÖ €å⁄© ÿ±ÿßŸáŸÜŸÖÿß€å ÿßÿÆÿ™ÿµÿßÿµ€å ÿØÿ± ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å ÿ¥ŸÖÿßÿ≥ÿ™ üë®‚Äçüè´
                </p>
            </div>

            <a href="{{ $classroomsRoute }}" class="btn-outline-custom">
                <i class="fas fa-users"></i>
                ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ
            </a>
        </div>

        {{-- ================= TEACHERS LIST ================= --}}
        @if ($teachers->count())
            <div class="row g-4">
                @foreach ($teachers as $t)
                    @php
                        $name = $t->display_name ?? ($t->name ?? 'ŸÖÿπŸÑŸÖ');
                        $initials = mb_substr(trim($name), 0, 1) ?: 'ŸÖ';
                        $email = $t->email ?? 'ÿß€åŸÖ€åŸÑ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá';
                        $phone = $t->phone ?? null;
                        $specialty = $t->specialty ?? null;
                        $role = $t->role ?? 'teacher';
                        $roleText = match ($role) {
                            'teacher' => 'ŸÖÿπŸÑŸÖ',
                            'assistant' => 'ÿØÿ≥ÿ™€åÿßÿ±',
                            'expert' => 'ŸÖÿ™ÿÆÿµÿµ',
                            default => $role,
                        };

                        // ÿ™ÿßÿ±€åÿÆ ÿ®Ÿá ÿ≥ÿßÿØŸá‚Äåÿ™ÿ±€åŸÜ ÿ¥⁄©ŸÑ
                        $createdAt = $t->created_at ?? null;
                        $formattedDate = $createdAt ? $createdAt->format('Y/m/d') : null;
                    @endphp

                    <div class="col-12 col-md-6 col-lg-4">
                        <div class="teacher-card">
                            <div class="teacher-header">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="teacher-avatar">
                                        {{ $initials }}
                                    </div>

                                    <div class="teacher-info">
                                        <h3 class="teacher-name">{{ $name }}</h3>
                                        <div class="teacher-meta">
                                            <i class="fas fa-envelope"></i>
                                            {{ $email }}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="teacher-body">
                                @if (!empty($specialty))
                                    <div class="teacher-specialty">
                                        <i class="fas fa-graduation-cap"></i>
                                        {{ $specialty }}
                                    </div>
                                @endif

                                <div class="teacher-chips">
                                    <span class="teacher-chip">
                                        <i class="fas fa-user-tag"></i>
                                        ŸÜŸÇÿ¥: {{ $roleText }}
                                    </span>

                                    @if (!empty($phone))
                                        <span class="teacher-chip">
                                            <i class="fas fa-phone"></i>
                                            {{ $phone }}
                                        </span>
                                    @endif

                                    @if (!empty($formattedDate))
                                        <span class="teacher-chip">
                                            <i class="fas fa-calendar-alt"></i>
                                            ÿßÿ≤ {{ $formattedDate }}
                                        </span>
                                    @endif
                                </div>

                                <div class="teacher-actions">
                                    {{-- Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿπŸÑŸÖ --}}
                                    @if ($hasTeacherShow)
                                        <a href="{{ route('student.teachers.show', $t->id) }}"
                                            class="action-btn btn-profile">
                                            <i class="fas fa-user-circle"></i>
                                            Ÿæÿ±ŸàŸÅÿß€åŸÑ
                                        </a>
                                    @else
                                        <button class="action-btn btn-profile"
                                            onclick="showComingSoonModal('Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿπŸÑŸÖ')">
                                            <i class="fas fa-user-circle"></i>
                                            Ÿæÿ±ŸàŸÅÿß€åŸÑ
                                        </button>
                                    @endif

                                    {{-- Ÿæ€åÿßŸÖ ÿ®Ÿá ŸÖÿπŸÑŸÖ --}}
                                    @if ($hasMessageCreate)
                                        <a href="{{ route('student.messages.create', ['teacher' => $t->id]) }}"
                                            class="action-btn btn-message">
                                            <i class="fas fa-comment-dots"></i>
                                            Ÿæ€åÿßŸÖ
                                        </a>
                                    @else
                                        <button class="action-btn btn-message"
                                            onclick="showComingSoonModal('Ÿæ€åÿßŸÖ ÿ®Ÿá ŸÖÿπŸÑŸÖ')">
                                            <i class="fas fa-comment-dots"></i>
                                            Ÿæ€åÿßŸÖ
                                        </button>
                                    @endif
                                </div>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        @else
            {{-- ================= EMPTY STATE ================= --}}
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-user-graduate"></i>
                </div>

                <h2 class="empty-title">ŸáŸÜŸàÿ≤ ŸÖÿπŸÑŸÖ€å ŸÜÿØÿßÿ±€å!</h2>

                <p class="empty-text">
                    ÿ®ÿ±ÿß€å ÿØ€åÿØŸÜ ŸÖÿπŸÑŸÖÿßŸÜ ÿ®ÿß€åÿØ ÿØÿ± ⁄©ŸÑÿßÿ≥€å ÿπÿ∂Ÿà ÿ®ÿ¥€å.
                    ŸÖÿπŸÑŸÖÿßŸÜ ÿ±ÿßŸáŸÜŸÖÿß€åÿßŸÜ ÿßÿµŸÑ€å ÿ™Ÿà ÿØÿ± ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å Ÿáÿ≥ÿ™ŸÜÿØ Ÿà
                    ŸáŸÖ€åÿ¥Ÿá ÿ®ÿ±ÿß€å ⁄©ŸÖ⁄© ÿ®Ÿá ÿ™Ÿà ÿ¢ŸÖÿßÿØŸá‚ÄåÿßŸÜÿØ.
                </p>

                <div class="empty-actions">
                    <a href="{{ $classroomsRoute }}" class="btn-primary-custom">
                        <i class="fas fa-search"></i>
                        ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ⁄©ŸÑÿßÿ≥
                    </a>

                    @if (\Route::has('student.exams.index'))
                        <a href="{{ route('student.exams.index') }}" class="btn-outline-custom">
                            <i class="fas fa-play-circle"></i>
                            ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖÿ≥ÿ™ŸÇŸÑ
                        </a>
                    @endif
                </div>
            </div>
        @endif

    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ ÿ®ÿ±ÿß€å ÿ™ÿπÿßŸÖŸÑÿßÿ™
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß ŸáŸÜ⁄ØÿßŸÖ ŸáÿßŸàÿ±
                const teacherCards = document.querySelectorAll('.teacher-card');
                teacherCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄© ÿ±Ÿà€å ⁄©ŸÑ ⁄©ÿßÿ±ÿ™
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å Ÿæ€åÿßŸÖ
                const messageButtons = document.querySelectorAll('.btn-message:not([disabled])');
                messageButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        if (this.tagName === 'BUTTON') return;

                        // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄©
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate([30, 50, 30]);
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å Ÿæÿ±ŸàŸÅÿß€åŸÑ
                const profileButtons = document.querySelectorAll('.btn-profile:not([disabled])');
                profileButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        if (this.tagName === 'BUTTON') return;

                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ⁄Ü€åŸæ‚ÄåŸáÿß
                const chips = document.querySelectorAll('.teacher-chip');
                chips.forEach(chip => {
                    chip.addEventListener('click', function() {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ⁄©ŸÑÿßÿ≥
                const searchClassBtn = document.querySelector('a[href*="classrooms"]');
                if (searchClassBtn) {
                    searchClassBtn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                }
            });

            // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ "ÿ®Ÿá ÿ≤ŸàÿØ€å"
            function showComingSoonModal(feature) {
                const modal = document.createElement('div');
                modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

                modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
            <i class="fas fa-tools"></i>
        </div>
        <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">${feature}</h3>
        <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
            ÿß€åŸÜ ŸÇÿßÿ®ŸÑ€åÿ™ ÿØÿ± ÿ≠ÿßŸÑ ÿ™Ÿàÿ≥ÿπŸá ÿßÿ≥ÿ™ Ÿà ÿ®Ÿá ÿ≤ŸàÿØ€å ÿØÿ± ÿØÿ≥ÿ™ÿ±ÿ≥ ŸÇÿ±ÿßÿ± ÿÆŸàÿßŸáÿØ ⁄Øÿ±ŸÅÿ™.
        </p>
        <button onclick="this.parentElement.remove(); if (this.parentElement.nextElementSibling) this.parentElement.nextElementSibling.remove();"
                style="width:100%; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
            ÿ®ÿßÿ¥Ÿáÿå ŸÖŸÜÿ™ÿ∏ÿ± ŸÖ€å‚ÄåŸÖŸàŸÜŸÖ!
        </button>
    `;

                document.body.appendChild(modal);

                const overlay = document.createElement('div');
                overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
                document.body.appendChild(overlay);

                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }

                // ÿ≠ÿ∞ŸÅ ÿÆŸàÿØ⁄©ÿßÿ± ÿ®ÿπÿØ ÿßÿ≤ 5 ÿ´ÿßŸÜ€åŸá
                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        modal.remove();
                        overlay.remove();
                    }
                }, 5000);
            }

            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
            const style = document.createElement('style');
            style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
            document.head.appendChild(style);
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 130. profile.blade.php

**Path:** `resources/views/dashboard/student/profile.blade.php`  
**Size:** 42,303 bytes  
**Modified:** 2025-12-04 19:26:17

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖŸÜ - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÖ ÿ±ŸÜ⁄Ø ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-gold: linear-gradient(135deg, #FFD166, #FFB347);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .profile-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* ÿ¢ŸÑÿ±ÿ™‚ÄåŸáÿß */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 25px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-warning-custom {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.1), rgba(255, 209, 102, 0.05));
            border-right: 4px solid var(--gold);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        /* ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å Ÿæÿ±ŸàŸÅÿß€åŸÑ */
        .profile-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 2px solid transparent;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        /* ⁄©ÿßÿ±ÿ™ ÿ¢Ÿàÿßÿ™ÿßÿ± */
        .avatar-section {
            text-align: center;
            position: relative;
            padding-bottom: 25px;
            margin-bottom: 25px;
            border-bottom: 2px dashed var(--primary-light);
        }

        .avatar-wrap {
            width: 140px;
            height: 140px;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            margin: 0 auto 20px;
            background: var(--light-gray);
            position: relative;
            animation: float 4s ease-in-out infinite;
        }

        .avatar-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .avatar-wrap:hover img {
            transform: scale(1.1);
        }

        .avatar-level {
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--gradient-gold);
            color: #5C4033;
            padding: 6px 15px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(255, 209, 102, 0.3);
            border: 3px solid white;
            animation: pulse 2s infinite;
        }

        .user-name {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            margin: 0 0 5px 0;
        }

        .user-role {
            color: var(--primary);
            font-weight: 700;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background: var(--primary-light);
            border-radius: 50px;
        }

        /* ŸÅÿ±ŸÖ ÿ¢ŸæŸÑŸàÿØ ÿ¢Ÿàÿßÿ™ÿßÿ± */
        .upload-form {
            position: relative;
            margin-top: 20px;
        }

        .upload-btn {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding: 14px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 800;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
        }

        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .upload-btn::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .upload-btn:hover::before {
            right: 100%;
        }

        .file-input {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            right: 0;
            opacity: 0;
            cursor: pointer;
        }

        /* ÿ®ÿÆÿ¥ ⁄Ø€åŸÖŸÅ€å⁄©€åÿ¥ŸÜ */
        .gm-stat {
            background: var(--light-gray);
            border: 2px solid rgba(0, 0, 0, 0.05);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .gm-stat:hover {
            transform: translateY(-3px);
            background: var(--primary-light);
            border-color: var(--primary-light);
            box-shadow: var(--shadow-sm);
        }

        .gm-stat-title {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .gm-stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--dark);
            line-height: 1;
        }

        .gm-stat-subtitle {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 5px;
        }

        /* ŸÜŸàÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™ */
        .progress-container {
            margin: 25px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--dark);
        }

        .progress-bar-custom {
            height: 16px;
            background: var(--light-gray);
            border-radius: 50px;
            overflow: hidden;
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-1);
            border-radius: 50px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* ÿ®ÿÆÿ¥ streak */
        .streak-section {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.1), rgba(255, 107, 157, 0.1));
            border-radius: var(--radius-lg);
            padding: 20px;
            margin: 25px 0;
            border: 2px dashed var(--gold);
            text-align: center;
        }

        .streak-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            animation: pulse 1.5s infinite;
        }

        .streak-count {
            font-size: 2.5rem;
            font-weight: 800;
            color: #D4A017;
            line-height: 1;
        }

        .streak-label {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* ÿ®ÿÆÿ¥ ÿ™ÿ∫€å€åÿ± ŸÜŸÇÿ¥ */
        .role-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 2px dashed var(--primary-light);
        }

        .role-form {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 20px;
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        .role-select {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--radius-md);
            border: 2px solid var(--primary);
            background: white;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 16px center;
            padding-left: 45px;
            cursor: pointer;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* ŸÅÿ±ŸÖ Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™ */
        .edit-form-section {
            padding: 25px;
            background: var(--light);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
        }

        .form-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-light);
        }

        .form-header i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            animation: bounce 2s infinite;
        }

        .form-header h3 {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--dark);
            margin: 0;
        }

        .form-label {
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 8px;
            display: block;
        }

        .form-control-custom {
            width: 100%;
            padding: 14px 16px;
            border-radius: var(--radius-md);
            border: 2px solid rgba(0, 0, 0, 0.1);
            background: var(--light-gray);
            font-size: 1rem;
            color: var(--dark);
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .form-control-custom:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.1);
        }

        .form-control-custom:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .textarea-custom {
            min-height: 120px;
            resize: vertical;
        }

        .btn-save {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 16px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .btn-save:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
        }

        .btn-save::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-save:hover::before {
            right: 100%;
        }

        .btn-save:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        @media (max-width: 768px) {
            .profile-page {
                padding: 15px 10px 90px;
            }

            .profile-card {
                padding: 20px;
            }

            .avatar-wrap {
                width: 120px;
                height: 120px;
            }

            .gm-stat-value {
                font-size: 1.8rem;
            }

            .streak-count {
                font-size: 2rem;
            }

            .edit-form-section {
                padding: 20px;
            }

            .form-header {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .form-header i {
                width: 45px;
                height: 45px;
            }

            .form-header h3 {
                font-size: 1.2rem;
            }

            .form-control-custom {
                padding: 12px;
                font-size: 0.95rem;
            }

            .btn-save,
            .upload-btn,
            .btn-outline-custom {
                padding: 14px;
                font-size: 0.95rem;
            }
        }

        .btn-save,
        .upload-btn,
        .btn-outline-custom {
            min-height: 44px;
        }

        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        // ----------------------------
        // Safe defaults
        // ----------------------------
        $user = $user ?? auth()->user();

        if (!$user) {
            $user = (object) [
                'name' => '⁄©ÿßÿ±ÿ®ÿ±',
                'email' => null,
                'phone' => null,
                'national_code' => null,
                'bio' => null,
                'role' => 'student',
                'avatar' => null,
            ];
        }

        $role = $user->role ?? 'student';

        $avatarPath = !empty($user->avatar) ? 'storage/' . $user->avatar : null;
        $avatarUrl =
            $avatarPath && file_exists(public_path($avatarPath))
                ? asset($avatarPath)
                : asset('assets/images/samples/user.png');

        $gm =
            $gamification ??
            (object) [
                'total_xp' => 0,
                'level' => 1,
                'current_streak' => 0,
                'longest_streak' => 0,
            ];

        $gm->total_xp = (int) ($gm->total_xp ?? 0);
        $gm->level = max(1, (int) ($gm->level ?? 1));
        $gm->current_streak = (int) ($gm->current_streak ?? 0);
        $gm->longest_streak = (int) ($gm->longest_streak ?? 0);

        $xpPerLevel = 200;
        $levelBaseXp = max(0, ($gm->level - 1) * $xpPerLevel);
        $nextLevelXp = $gm->level * $xpPerLevel;

        $progressXp = max(0, $gm->total_xp - $levelBaseXp);
        $needXp = max(1, $nextLevelXp - $levelBaseXp);
        $percent = min(100, round(($progressXp / $needXp) * 100));

        $hasAvatarRoute = \Route::has('student.profile.avatar');
        $hasChangeRoleRoute = \Route::has('profile.change-role');
        $hasUpdateRoute = \Route::has('student.profile.update');
    @endphp

    <div class="profile-page">
        {{-- ================= ALERTS ================= --}}
        @if (session('success'))
            <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--accent);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('success') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if (session('warning'))
            <div class="alert-custom alert-warning-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--gold);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('warning') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if ($errors->any())
            <div class="alert-custom alert-danger-custom">
                <div class="d-flex align-items-center gap-3 mb-2">
                    <div style="font-size: 1.5rem; color: var(--secondary);">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="fw-bold">ÿÆÿ∑ÿß ÿØÿ± ÿ∞ÿÆ€åÿ±Ÿá ÿßÿ∑ŸÑÿßÿπÿßÿ™</div>
                </div>
                <ul class="mb-0 ps-3">
                    @foreach ($errors->all() as $e)
                        <li>{{ $e }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-4">
            {{-- ===== ÿ≥ÿ™ŸàŸÜ ÿ≥ŸÖÿ™ ⁄ÜŸæ: ÿ¢Ÿàÿßÿ™ÿßÿ± Ÿà ⁄Ø€åŸÖŸÅ€å⁄©€åÿ¥ŸÜ ===== --}}
            <div class="col-12 col-lg-4">
                <div class="profile-card">
                    <div class="avatar-section">
                        <div class="avatar-wrap">
                            <img id="avatarPreview" src="{{ $avatarUrl }}" alt="ÿ¢Ÿàÿßÿ™ÿßÿ±">
                            <div class="avatar-level">ÿ≥ÿ∑ÿ≠ {{ $gm->level }}</div>
                        </div>

                        <h2 class="user-name">{{ $user->name ?? '⁄©ÿßÿ±ÿ®ÿ±' }}</h2>
                        <div class="user-role">
                            <i class="fas fa-user-tag"></i>
                            {{ $role === 'student' ? 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤' : 'ŸÖÿπŸÑŸÖ' }}
                        </div>
                    </div>

                    {{-- ÿ¢ŸæŸÑŸàÿØ ÿ¢Ÿàÿßÿ™ÿßÿ± --}}
                    @if ($hasAvatarRoute)
                        <form action="{{ route('student.profile.avatar') }}" method="POST" enctype="multipart/form-data"
                            class="upload-form">
                            @csrf
                            <div class="upload-btn">
                                <i class="fas fa-camera"></i>
                                ÿ™ÿ∫€å€åÿ± ÿπ⁄©ÿ≥ Ÿæÿ±ŸàŸÅÿß€åŸÑ
                                <input type="file" name="avatar" id="avatarInput" class="file-input" accept="image/*">
                            </div>
                        </form>
                    @else
                        <div class="upload-form">
                            <button class="upload-btn" disabled>
                                <i class="fas fa-camera"></i>
                                ÿ™ÿ∫€å€åÿ± ÿπ⁄©ÿ≥ (ÿ®Ÿá ÿ≤ŸàÿØ€å)
                            </button>
                        </div>
                    @endif

                    {{-- ÿ¢ŸÖÿßÿ± ⁄Ø€åŸÖŸÅ€å⁄©€åÿ¥ŸÜ --}}
                    <div class="mt-4">
                        <div class="gm-stat">
                            <div class="gm-stat-title">
                                <i class="fas fa-trophy" style="color: var(--gold);"></i>
                                ÿßŸÖÿ™€åÿßÿ≤ ⁄©ŸÑ€å (XP)
                            </div>
                            <div class="gm-stat-value">{{ $gm->total_xp }}</div>
                            <div class="gm-stat-subtitle">ÿßÿ≤ {{ $nextLevelXp }} ÿßŸÖÿ™€åÿßÿ≤ ÿ™ÿß ÿ≥ÿ∑ÿ≠ ÿ®ÿπÿØ€å</div>
                        </div>

                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ≥ÿ∑ÿ≠ {{ $gm->level }}</span>
                                <span>{{ $percent }}%</span>
                            </div>
                            <div class="progress-bar-custom">
                                <div class="progress-fill" style="width: {{ $percent }}%;"></div>
                            </div>
                            <div class="d-flex justify-content-between text-sm mt-2"
                                style="color: var(--gray); font-size: 0.9rem;">
                                <span>{{ $progressXp }} XP</span>
                                <span>{{ $needXp }} XP</span>
                            </div>
                        </div>

                        {{-- ÿ®ÿÆÿ¥ Streak --}}
                        <div class="streak-section">
                            <div class="streak-icon">üî•</div>
                            <div class="streak-count">{{ $gm->current_streak }}</div>
                            <div class="streak-label">ÿ±Ÿàÿ≤ ŸÖÿ™ŸàÿßŸÑ€å ŸÅÿπÿßŸÑ€åÿ™</div>
                            <div class="mt-2" style="color: var(--gray); font-size: 0.9rem;">
                                ÿ®Ÿáÿ™ÿ±€åŸÜ ÿ±⁄©Ÿàÿ±ÿØ: {{ $gm->longest_streak }} ÿ±Ÿàÿ≤
                            </div>
                        </div>

                        {{-- ÿ™ÿ∫€å€åÿ± ŸÜŸÇÿ¥ --}}
                        <div class="role-section">
                            <h4 class="fw-bold mb-3" style="color: var(--dark);">
                                <i class="fas fa-random me-2" style="color: var(--primary);"></i>
                                ÿ™ÿ∫€å€åÿ± ŸÜŸÇÿ¥
                            </h4>

                            @if ($hasChangeRoleRoute)
                                <form action="{{ route('profile.change-role') }}" method="POST" class="role-form">
                                    @csrf
                                    <select name="role" class="role-select">
                                        <option value="student" {{ $role === 'student' ? 'selected' : '' }}>ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                                        </option>
                                        <option value="teacher" {{ $role === 'teacher' ? 'selected' : '' }}>ŸÖÿπŸÑŸÖ</option>
                                    </select>
                                    <button type="submit" class="btn-outline-custom">
                                        <i class="fas fa-save"></i>
                                        ÿ∞ÿÆ€åÿ±Ÿá ŸÜŸÇÿ¥ ÿ¨ÿØ€åÿØ
                                    </button>
                                </form>
                            @else
                                <div class="role-form">
                                    <select class="role-select" disabled>
                                        <option>ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</option>
                                        <option>ŸÖÿπŸÑŸÖ</option>
                                    </select>
                                    <button class="btn-outline-custom" disabled>
                                        <i class="fas fa-save"></i>
                                        ÿ∞ÿÆ€åÿ±Ÿá ŸÜŸÇÿ¥ ÿ¨ÿØ€åÿØ (ÿ®Ÿá ÿ≤ŸàÿØ€å)
                                    </button>
                                </div>
                            @endif

                            <div class="mt-3" style="color: var(--gray); font-size: 0.9rem; line-height: 1.6;">
                                ÿß⁄Øÿ± ŸÜŸÇÿ¥ ÿ±Ÿà ÿπŸàÿ∂ ⁄©ŸÜ€åÿå ÿ®ÿπÿØ ÿßÿ≤ ÿ±ŸÅÿ±ÿ¥ ÿ®Ÿá ŸæŸÜŸÑ ŸáŸÖŸàŸÜ ŸÜŸÇÿ¥ ŸÖŸÜÿ™ŸÇŸÑ ŸÖ€å‚Äåÿ¥€å.
                                ÿß€åŸÜ ÿ™ÿ∫€å€åÿ± ŸÅŸÇÿ∑ ŸÜŸÖÿß€åÿ¥‚ÄåÿØŸáŸÜÿØŸá ŸÜŸàÿπ ŸÅÿπÿßŸÑ€åÿ™ ÿ™Ÿà ÿØÿ± ÿ≥€åÿ≥ÿ™ŸÖ ÿÆŸàÿßŸáÿØ ÿ®ŸàÿØ.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- ===== ÿ≥ÿ™ŸàŸÜ ÿ≥ŸÖÿ™ ÿ±ÿßÿ≥ÿ™: Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ===== --}}
            <div class="col-12 col-lg-8">
                <div class="edit-form-section">
                    <div class="form-header">
                        <i class="fas fa-user-edit"></i>
                        <h3>Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ¥ÿÆÿµ€å</h3>
                    </div>

                    @if ($hasUpdateRoute)
                        <form action="{{ route('student.profile.update') }}" method="POST">
                            @csrf
                            @method('PUT')

                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <label class="form-label">ŸÜÿßŸÖ Ÿà ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å</label>
                                    <input type="text" name="name" value="{{ old('name', $user->name ?? '') }}"
                                        class="form-control-custom" required placeholder="ŸÜÿßŸÖ ⁄©ÿßŸÖŸÑ ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ">
                                </div>

                                <div class="col-12 col-md-6">
                                    <label class="form-label">ÿß€åŸÖ€åŸÑ</label>
                                    <input type="email" name="email" value="{{ old('email', $user->email ?? '') }}"
                                        class="form-control-custom" placeholder="example@domain.com">
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ</label>
                                    <input type="text" name="phone" value="{{ old('phone', $user->phone ?? '') }}"
                                        class="form-control-custom" placeholder="€∞€π€±€≤€≥€¥€µ€∂€∑€∏€π">
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">⁄©ÿØ ŸÖŸÑ€å</label>
                                    <input type="text" name="national_code"
                                        value="{{ old('national_code', $user->national_code ?? '') }}"
                                        class="form-control-custom" placeholder="ÿßÿÆÿ™€åÿßÿ±€å">
                                </div>

                                <div class="col-12 mt-3">
                                    <label class="form-label">ÿØÿ±ÿ®ÿßÿ±Ÿá ŸÖŸÜ</label>
                                    <textarea name="bio" rows="4" class="form-control-custom textarea-custom"
                                        placeholder="⁄ÜŸÜÿØ ÿÆÿ∑ ÿØÿ±ÿ®ÿßÿ±Ÿá ÿÆŸàÿØÿ™ÿå ÿπŸÑÿß€åŸÇ €åÿß ÿßŸáÿØÿßŸÅÿ™ ÿ®ŸÜŸà€åÿ≥...">{{ old('bio', $user->bio ?? '') }}</textarea>
                                </div>

                                <div class="col-12">
                                    <button type="submit" class="btn-save">
                                        <i class="fas fa-check-circle"></i>
                                        ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
                                    </button>
                                </div>
                            </div>
                        </form>
                    @else
                        <form>
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <label class="form-label">ŸÜÿßŸÖ Ÿà ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å</label>
                                    <input type="text" value="{{ $user->name ?? '' }}" class="form-control-custom"
                                        disabled>
                                </div>

                                <div class="col-12 col-md-6">
                                    <label class="form-label">ÿß€åŸÖ€åŸÑ</label>
                                    <input type="email" value="{{ $user->email ?? '' }}" class="form-control-custom"
                                        disabled>
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">ÿ¥ŸÖÿßÿ±Ÿá ŸÖŸàÿ®ÿß€åŸÑ</label>
                                    <input type="text" value="{{ $user->phone ?? '' }}" class="form-control-custom"
                                        disabled>
                                </div>

                                <div class="col-12 col-md-6 mt-3">
                                    <label class="form-label">⁄©ÿØ ŸÖŸÑ€å</label>
                                    <input type="text" value="{{ $user->national_code ?? '' }}"
                                        class="form-control-custom" disabled>
                                </div>

                                <div class="col-12 mt-3">
                                    <label class="form-label">ÿØÿ±ÿ®ÿßÿ±Ÿá ŸÖŸÜ</label>
                                    <textarea rows="4" class="form-control-custom textarea-custom" disabled>{{ $user->bio ?? '' }}</textarea>
                                </div>

                                <div class="col-12">
                                    <button class="btn-save" disabled>
                                        <i class="fas fa-clock"></i>
                                        ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™ (ÿ®Ÿá ÿ≤ŸàÿØ€å)
                                    </button>
                                </div>
                            </div>
                        </form>
                    @endif

                    <div class="mt-4 p-3"
                        style="background: var(--accent-light); border-radius: var(--radius-md); border-right: 4px solid var(--accent);">
                        <div class="d-flex align-items-start gap-3">
                            <i class="fas fa-lightbulb" style="color: var(--accent); font-size: 1.3rem;"></i>
                            <div>
                                <div class="fw-bold mb-1" style="color: var(--dark);">ŸÜ⁄©ÿßÿ™ ŸÖŸáŸÖ:</div>
                                <ul class="mb-0" style="color: var(--gray); font-size: 0.9rem; line-height: 1.6;">
                                    <li>ÿßÿ∑ŸÑÿßÿπÿßÿ™ÿ™ ÿ±Ÿà ÿØŸÇ€åŸÇ Ÿàÿßÿ±ÿØ ⁄©ŸÜ ÿ™ÿß ÿØÿ± ÿµŸàÿ±ÿ™ ŸÜ€åÿßÿ≤ ÿ®ÿ™ŸàŸÜ€åŸÖ ÿ®ÿßŸáÿßÿ™ ÿØÿ± ÿ™ŸÖÿßÿ≥ ÿ®ÿßÿ¥€åŸÖ</li>
                                    <li>ÿ®€åŸà⁄Øÿ±ÿßŸÅ€å ⁄©Ÿàÿ™ÿßŸá ŸÖ€å‚Äåÿ™ŸàŸÜŸá ÿ®Ÿá ŸÖÿπŸÑŸÖ‚ÄåŸáÿß ⁄©ŸÖ⁄© ⁄©ŸÜŸá ÿ®Ÿáÿ™ÿ± ÿ®ÿßŸáÿßÿ™ ÿ¢ÿ¥ŸÜÿß ÿ®ÿ¥ŸÜ</li>
                                    <li>ÿ™ÿ∫€å€åÿ±ÿßÿ™ÿ™ ÿ®ÿπÿØ ÿßÿ≤ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØŸÜ ÿ®ŸÑÿßŸÅÿßÿµŸÑŸá ÿßÿπŸÖÿßŸÑ ŸÖ€å‚Äåÿ¥ŸÜ</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {

            if (navigator.vibrate) {
                navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                    navigator.msVibrate;
            }

            const avatarInput = document.getElementById('avatarInput');
            const avatarPreview = document.getElementById('avatarPreview');

            if (avatarInput && avatarPreview) {
                avatarInput.addEventListener('change', function(e) {
                    const file = e.target.files?.[0];
                    if (!file) return;

                    if (file.size > 5 * 1024 * 1024) {
                        showErrorModal('ÿ≠ÿ¨ŸÖ ŸÅÿß€åŸÑ ÿ®ÿß€åÿØ ⁄©ŸÖÿ™ÿ± ÿßÿ≤ €µ ŸÖ⁄Øÿßÿ®ÿß€åÿ™ ÿ®ÿßÿ¥ÿØ');
                        this.value = '';
                        return;
                    }

                    const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];
                    if (!validTypes.includes(file.type)) {
                        showErrorModal('ŸÅŸÇÿ∑ ŸÅÿß€åŸÑ‚ÄåŸáÿß€å ÿ™ÿµŸà€åÿ±€å (JPG, PNG, GIF, WebP) ŸÖÿ¨ÿßÿ≤ Ÿáÿ≥ÿ™ŸÜÿØ');
                        this.value = '';
                        return;
                    }

                    const url = URL.createObjectURL(file);
                    avatarPreview.src = url;

                    if (navigator.vibrate) navigator.vibrate(50);

                    showSuccessModal('ÿ¢Ÿàÿßÿ™ÿßÿ± ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØ! ÿ®ÿ±ÿß€å ÿ∞ÿÆ€åÿ±Ÿá ÿØ⁄©ŸÖŸá ÿ¢ŸæŸÑŸàÿØ ÿ±Ÿà ÿ®ÿ≤ŸÜ');

                    setTimeout(() => {
                        const form = avatarInput.closest('form');
                        if (form) form.submit();
                    }, 2000);
                });
            }

            const buttons = document.querySelectorAll(
            '.btn-save, .upload-btn, .btn-outline-custom:not([disabled])');
            buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.disabled) return;

                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);

                    if (navigator.vibrate) navigator.vibrate(30);
                });
            });

            const profileCards = document.querySelectorAll('.profile-card');
            profileCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) navigator.vibrate(20);
                });
            });

            const gmStats = document.querySelectorAll('.gm-stat');
            gmStats.forEach(stat => {
                stat.addEventListener('click', function() {
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                    if (navigator.vibrate) navigator.vibrate(20);
                });
            });
        });

        function showErrorModal(message) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--secondary);
    `;

            modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 15px; color: var(--secondary);">
            <i class="fas fa-exclamation-circle"></i>
        </div>
        <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">ÿÆÿ∑ÿß!</h3>
        <p style="color: var(--gray); margin-bottom: 20px; font-size: 1rem; line-height: 1.5;">${message}</p>
        <button class="close-modal"
                style="width:100%; padding: 12px; border: none; background: var(--secondary); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
            ŸÖÿ™Ÿàÿ¨Ÿá ÿ¥ÿØŸÖ
        </button>
    `;

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;

            document.body.appendChild(overlay);
            document.body.appendChild(modal);

            modal.querySelector('.close-modal')?.addEventListener('click', () => {
                modal.remove();
                overlay.remove();
            });

            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
        }

        function showSuccessModal(message) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--accent);
    `;

            modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 15px; color: var(--accent);">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">ŸÖŸàŸÅŸÇ€åÿ™!</h3>
        <p style="color: var(--gray); margin-bottom: 20px; font-size: 1rem; line-height: 1.5;">${message}</p>
        <button class="close-modal"
                style="width:100%; padding: 12px; border: none; background: var(--accent); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
            ÿπÿßŸÑ€åŸá!
        </button>
    `;

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;

            document.body.appendChild(overlay);
            document.body.appendChild(modal);

            modal.querySelector('.close-modal')?.addEventListener('click', () => {
                modal.remove();
                overlay.remove();
            });

            if (navigator.vibrate) navigator.vibrate([50, 50, 50]);

            setTimeout(() => {
                if (document.body.contains(modal)) {
                    modal.remove();
                    overlay.remove();
                }
            }, 3000);
        }

        const style = document.createElement('style');
        style.textContent = `
@keyframes scaleIn {
    from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
    to   { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}
@keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
}
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 131. index.blade.php

**Path:** `resources/views/dashboard/student/reports/index.blade.php`  
**Size:** 31,293 bytes  
**Modified:** 2025-12-04 18:47:26

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', '⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ŸÖŸÜ - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÖ ÿ±ŸÜ⁄Ø ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .reports-page {
            animation: fadeIn 0.6s ease both;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        /* ŸáÿØÿ± ÿµŸÅÿ≠Ÿá */
        .page-header {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px;
            box-shadow: var(--shadow-md);
            margin-bottom: 25px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .page-title {
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 0;
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸáÿØÿ± */
        .header-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .header-buttons {
                margin-top: 0;
            }
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
            color: white;
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
        }

        /* ÿ¢ŸÑÿ±ÿ™‚ÄåŸáÿß */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        /* ⁄©ÿßÿ±ÿ™ ⁄Øÿ≤ÿßÿ±ÿ¥ */
        .report-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 22px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
            position: relative;
            overflow: hidden;
        }

        .report-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .report-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .report-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        .report-card:nth-child(4) {
            animation-delay: 0.4s;
        }

        .report-card:nth-child(5) {
            animation-delay: 0.5s;
        }

        .report-card:nth-child(6) {
            animation-delay: 0.6s;
        }

        .report-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .report-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .report-title {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--dark);
            line-height: 1.4;
            flex: 1;
        }

        .score-badge {
            background: var(--gradient-1);
            color: white;
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 0.95rem;
            white-space: nowrap;
            box-shadow: 0 4px 12px rgba(123, 104, 238, 0.3);
            animation: pulse 2s infinite;
        }

        .report-meta {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .meta-item {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-left: 15px;
        }

        .meta-item:first-child {
            margin-left: 0;
        }

        .meta-item i {
            font-size: 0.9rem;
        }

        .report-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .status-completed {
            background: var(--accent-light);
            color: var(--accent);
        }

        .status-pending {
            background: rgba(255, 209, 102, 0.15);
            color: #D4A017;
        }

        .status-review {
            background: var(--secondary-light);
            color: var(--secondary);
        }

        .report-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
        }

        .action-btn:active {
            transform: scale(0.96);
        }

        .btn-result {
            background: var(--light-gray);
            color: var(--dark);
            border-color: rgba(0, 0, 0, 0.05);
        }

        .btn-result:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.15);
        }

        .btn-analysis {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-analysis:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-analysis::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-analysis:hover::before {
            right: 100%;
        }

        /* Ÿàÿ∂ÿπ€åÿ™ ÿÆÿßŸÑ€å */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 30px;
            text-align: center;
            box-shadow: var(--shadow-md);
            animation: slideInRight 0.6s ease-out;
            border: 2px dashed var(--primary-light);
        }

        .empty-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: var(--primary);
            font-size: 3rem;
            animation: bounce 3s infinite;
        }

        .empty-title {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        /* ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å ŸÖŸàÿ®ÿß€åŸÑ */
        @media (max-width: 768px) {
            .reports-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                padding: 20px;
            }

            .page-title {
                font-size: 1.3rem;
            }

            .header-buttons {
                flex-direction: column;
                width: 100%;
            }

            .btn-primary-custom,
            .btn-outline-custom {
                width: 100%;
                justify-content: center;
            }

            .report-card {
                padding: 18px;
            }

            .report-header {
                flex-direction: column;
                gap: 10px;
            }

            .score-badge {
                align-self: flex-start;
            }

            .meta-item {
                display: block;
                margin-left: 0;
                margin-bottom: 5px;
            }

            .report-actions {
                flex-direction: column;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .action-btn,
        .btn-primary-custom,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        /**
         * ÿßŸÜÿ™ÿ∏ÿßÿ± ŸÖÿπŸÖŸàŸÑ ŸÖÿß ÿß€åŸÜŸá ⁄©Ÿá ⁄©ŸÜÿ™ÿ±ŸÑÿ± €å⁄©€å ÿßÿ≤ ÿß€åŸÜ‚ÄåŸáÿß ÿ±Ÿà ÿ®ÿØŸá:
         * - $reports (collection)
         * - €åÿß $attempts (collection)
         * ŸÅÿπŸÑÿßŸã Ÿáÿ± ÿØŸà ÿ±Ÿà ÿ≥ÿßŸæŸàÿ±ÿ™ ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ ÿ®ÿß fallback.
         */
        $reports = $reports ?? null;
        $attempts = $attempts ?? null;

        $items = collect();

        if ($reports instanceof \Illuminate\Support\Collection) {
            $items = $reports;
        } elseif ($attempts instanceof \Illuminate\Support\Collection) {
            $items = $attempts;
        }

        // ÿ±Ÿàÿ™‚ÄåŸáÿß€å ÿßŸÖŸÜ
        $examsIndexRoute = route('student.exams.index');
        $dashboardRoute = route('student.index');
        $classroomsRoute = route('student.classrooms.index');
        $profileRoute = \Route::has('student.profile') ? route('student.profile') : '#';
    @endphp

    <div class="reports-page">

        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="d-flex flex-wrap justify-content-between align-items-start gap-3">
                <div>
                    <h1 class="page-title">
                        <i class="fas fa-chart-line" style="color: var(--primary);"></i>
                        ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ŸÖŸÜ
                    </h1>
                    <p class="page-subtitle">
                        ÿØÿ± ÿß€åŸÜ ÿ®ÿÆÿ¥ ŸÖ€å‚Äåÿ™ŸàŸÜ€å ⁄Øÿ≤ÿßÿ±ÿ¥ ÿπŸÖŸÑ⁄©ÿ±ÿØÿ™ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß Ÿà ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß€å ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ±Ÿà ÿ®ÿ®€åŸÜ€å.
                        Ÿáÿ± ⁄Øÿ≤ÿßÿ±ÿ¥ €å⁄© ÿØÿßÿ≥ÿ™ÿßŸÜ ÿßÿ≤ Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ™Ÿà ÿ±Ÿà ÿ™ÿπÿ±€åŸÅ ŸÖ€å‚Äå⁄©ŸÜŸá üìà
                    </p>
                </div>

                <div class="d-flex flex-column flex-md-row gap-2 header-buttons">
                    <a href="{{ $examsIndexRoute }}" class="btn-primary-custom">
                        <i class="fas fa-play-circle"></i>
                        ÿ¥ÿ±Ÿàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ
                    </a>
                    <a href="{{ $dashboardRoute }}" class="btn-outline-custom">
                        <i class="fas fa-home"></i>
                        ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
                    </a>
                </div>
            </div>
        </div>

        {{-- ================= ALERTS ================= --}}
        @if (session('success'))
            <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--accent);">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('success') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        @if (session('error'))
            <div class="alert-custom alert-danger-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--secondary);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="flex-grow-1">
                    {{ session('error') }}
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        {{-- ================= EMPTY STATE ================= --}}
        @if ($items->isEmpty())
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>

                <h2 class="empty-title">ŸáŸÜŸàÿ≤ ⁄Øÿ≤ÿßÿ±ÿ¥€å ŸÜÿØÿßÿ±€å!</h2>

                <p class="empty-text">
                    ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß ÿ®ÿπÿØ ÿßÿ≤ ÿ¥ÿ±⁄©ÿ™ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß ÿß€åÿ¨ÿßÿØ ŸÖ€å‚Äåÿ¥ŸÜ.
                    Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜ €å⁄© ŸÇÿØŸÖ ÿ®Ÿá ÿ≥ŸÖÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™ Ÿà Ÿáÿ± ⁄Øÿ≤ÿßÿ±ÿ¥ €å⁄© ŸÜŸÇÿ¥Ÿá ÿ±ÿßŸá ÿ®ÿ±ÿß€å ŸÖŸàŸÅŸÇ€åÿ™‚ÄåŸáÿß€å ÿ®ÿπÿØ€å‚Äåÿ≥ÿ™.
                </p>

                <div class="d-flex flex-column flex-md-row justify-content-center gap-3">
                    <a href="{{ $examsIndexRoute }}" class="btn-primary-custom" style="padding: 15px 30px;">
                        <i class="fas fa-bolt"></i>
                        ÿ¥ÿ±Ÿàÿπ ÿßŸàŸÑ€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ
                    </a>
                    <a href="{{ $classroomsRoute }}" class="btn-outline-custom" style="padding: 15px 30px;">
                        <i class="fas fa-users"></i>
                        ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ
                    </a>
                </div>
            </div>
        @else
            {{-- ================= REPORTS LIST ================= --}}
            <div class="row g-3">
                @foreach ($items as $item)
                    @php
                        // ÿ®€åÿ¥ÿ™ÿ±€åŸÜ ÿ≠ÿßŸÑÿ™‚ÄåŸáÿß€å ŸÖŸÖ⁄©ŸÜ:
                        $exam = $item->exam ?? null;
                        $examTitle = $exam->title ?? ($item->exam_title ?? 'ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿØŸàŸÜ ÿπŸÜŸàÿßŸÜ');
                        $classTitle = $exam->classroom->title ?? ($exam->classroom->name ?? null);
                        $subjectName = $exam->subject->name ?? ($exam->subject->title ?? null);

                        $score = $item->score ?? ($item->total_score ?? null);
                        $submittedAt = $item->submitted_at ?? ($item->created_at ?? null);
                        $status = $item->status ?? 'completed'; // completed/pending/review

                        $statusClass = match ($status) {
                            'completed' => 'status-completed',
                            'pending' => 'status-pending',
                            'review' => 'status-review',
                            default => 'status-completed',
                        };

                        $statusIcon = match ($status) {
                            'completed' => 'fas fa-check-circle',
                            'pending' => 'fas fa-clock',
                            'review' => 'fas fa-eye',
                            default => 'fas fa-chart-line',
                        };

                        $statusText = match ($status) {
                            'completed' => 'ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá',
                            'pending' => 'ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ±',
                            'review' => 'ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿ±ÿ±ÿ≥€å',
                            default => 'ÿ™⁄©ŸÖ€åŸÑ ÿ¥ÿØŸá',
                        };
                    @endphp

                    <div class="col-md-6 col-lg-4">
                        <div class="report-card">
                            <div class="report-header">
                                <h3 class="report-title">{{ $examTitle }}</h3>
                                @if (!is_null($score))
                                    <div class="score-badge">
                                        {{ $score }}
                                    </div>
                                @endif
                            </div>

                            <div class="report-status {{ $statusClass }}">
                                <i class="{{ $statusIcon }}"></i>
                                <span>{{ $statusText }}</span>
                            </div>

                            <div class="report-meta">
                                @if ($classTitle)
                                    <div class="meta-item">
                                        <i class="fas fa-chalkboard-teacher"></i>
                                        ⁄©ŸÑÿßÿ≥: {{ $classTitle }}
                                    </div>
                                @endif

                                @if ($subjectName)
                                    <div class="meta-item">
                                        <i class="fas fa-book"></i>
                                        ÿØÿ±ÿ≥: {{ $subjectName }}
                                    </div>
                                @endif

                                @if ($submittedAt)
                                    <div class="meta-item">
                                        <i class="fas fa-calendar-alt"></i>
                                        ÿ™ÿßÿ±€åÿÆ: {{ jdate($submittedAt)->format('Y/m/d') }}
                                    </div>
                                @endif
                            </div>

                            <div class="report-actions">
                                @if (Route::has('student.attempts.result') && !empty($item->id))
                                    <a href="{{ route('student.attempts.result', $item) }}" class="action-btn btn-result">
                                        <i class="fas fa-poll"></i>
                                        ŸÜÿ™€åÿ¨Ÿá
                                    </a>
                                @else
                                    <button class="action-btn btn-result" disabled>
                                        <i class="fas fa-poll"></i>
                                        ŸÜÿ™€åÿ¨Ÿá
                                    </button>
                                @endif

                                @if (Route::has('student.attempts.analysis') && !empty($item->id))
                                    <a href="{{ route('student.attempts.analysis', $item) }}"
                                        class="action-btn btn-analysis">
                                        <i class="fas fa-chart-pie"></i>
                                        ÿ™ÿ≠ŸÑ€åŸÑ
                                    </a>
                                @else
                                    <button class="action-btn btn-analysis" disabled>
                                        <i class="fas fa-chart-pie"></i>
                                        ÿ™ÿ≠ŸÑ€åŸÑ
                                    </button>
                                @endif
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>

            {{-- ================= PAGINATION (ÿß⁄Øÿ± Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØ) ================= --}}
            @if (method_exists($items, 'links'))
                <div class="d-flex justify-content-center mt-4">
                    <div class="pagination-custom">
                        {{ $items->links() }}
                    </div>
                </div>
            @endif
        @endif

    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ ÿ®ÿ±ÿß€å ÿ™ÿπÿßŸÖŸÑÿßÿ™
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß ŸáŸÜ⁄ØÿßŸÖ ŸáÿßŸàÿ±
                const reportCards = document.querySelectorAll('.report-card');
                reportCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄© ÿ±Ÿà€å ⁄©ŸÑ ⁄©ÿßÿ±ÿ™
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ÿ™ÿ≠ŸÑ€åŸÑ
                const analysisButtons = document.querySelectorAll('.btn-analysis:not([disabled])');
                analysisButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄©
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate([30, 50, 30]);
                        }

                        // ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å
                        showLoadingModal('ÿ™ÿ≠ŸÑ€åŸÑ ÿ¢ŸÖÿßÿ±€å', 'ÿØÿ± ÿ≠ÿßŸÑ ÿ™ÿ≠ŸÑ€åŸÑ ŸÜÿ™ÿß€åÿ¨ ÿ¢ÿ≤ŸÖŸàŸÜ...');
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÜÿ™€åÿ¨Ÿá
                const resultButtons = document.querySelectorAll('.btn-result:not([disabled])');
                resultButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å
                function showLoadingModal(title, message) {
                    const modal = document.createElement('div');
                    modal.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            max-width: 320px;
            width: 85%;
            animation: scaleIn 0.3s ease forwards;
            border: 3px solid var(--primary);
        `;

                    modal.innerHTML = `
            <div style="font-size: 2.5rem; margin-bottom: 15px; color: var(--primary);">
                <i class="fas fa-chart-line fa-spin"></i>
            </div>
            <h3 style="margin-bottom: 12px; color: var(--dark); font-size: 1.2rem; font-weight: 700;">${title}</h3>
            <p style="color: var(--gray); margin-bottom: 20px; font-size: 0.95rem; line-height: 1.5;">${message}</p>
            <div class="progress" style="height: 8px; border-radius: 10px; background: var(--light-gray); overflow: hidden;">
                <div class="progress-bar" style="height:100%; width:0%; background: var(--gradient-1); border-radius:10px; animation: loading 1.5s infinite;"></div>
            </div>
        `;

                    document.body.appendChild(modal);

                    const overlay = document.createElement('div');
                    overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        `;
                    document.body.appendChild(overlay);

                    // ÿ≠ÿ∞ŸÅ ÿÆŸàÿØ⁄©ÿßÿ± ÿ®ÿπÿØ ÿßÿ≤ 2 ÿ´ÿßŸÜ€åŸá (ÿØÿ± ÿ≠ÿßŸÑÿ™ ŸàÿßŸÇÿπ€å ÿß€åŸÜ ÿßÿ™ŸÅÿßŸÇ ŸÜŸÖ€å‚ÄåÿßŸÅÿ™Ÿá)
                    setTimeout(() => {
                        if (document.body.contains(modal)) {
                            modal.remove();
                            overlay.remove();
                        }
                    }, 2000);
                }

                // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
                const style = document.createElement('style');
                style.textContent = `
        @keyframes scaleIn {
            from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        @keyframes loading {
            0% { width: 0%; transform: translateX(-100%); }
            50% { width: 100%; transform: translateX(0%); }
            100% { width: 100%; transform: translateX(100%); }
        }

        .fa-spin {
            animation: fa-spin 1s infinite linear;
        }

        @keyframes fa-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    `;
                document.head.appendChild(style);
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 132. index.blade.php

**Path:** `resources/views/dashboard/student/support/index.blade.php`  
**Size:** 32,170 bytes  
**Modified:** 2025-12-04 19:16:23

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å - SmartEdu')

@push('styles')
    <style>
        /* ÿ™ŸÖ ÿ±ŸÜ⁄Ø ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --radius-xl: 20px;
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .support-page {
            animation: fadeIn 0.6s ease both;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px 15px 100px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(50px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* ŸáÿØÿ± ÿµŸÅÿ≠Ÿá */
        .page-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
        }

        .page-title-section h1 {
            font-weight: 800;
            font-size: 1.8rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .page-title-section h1 i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: bounce 2s infinite;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 600px;
        }

        /* ÿØ⁄©ŸÖŸá ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ */
        .btn-outline-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-weight: 700;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-custom:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        /* ⁄©ÿßÿ±ÿ™ ÿßÿµŸÑ€å */
        .main-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(0, 0, 0, 0.05);
            animation: fadeIn 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        /* ÿ¢ŸÑÿ±ÿ™‚ÄåŸáÿß */
        .alert-custom {
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            border: none;
            box-shadow: var(--shadow-sm);
            margin-bottom: 25px;
            animation: slideInRight 0.6s ease-out;
        }

        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border-right: 4px solid var(--accent);
            color: var(--dark);
        }

        .alert-danger-custom {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(255, 107, 157, 0.05));
            border-right: 4px solid var(--secondary);
            color: var(--dark);
        }

        .alert-info-custom {
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.1), rgba(123, 104, 238, 0.05));
            border-right: 4px solid var(--primary);
            color: var(--dark);
            margin-top: 25px;
            animation: pulse 2s infinite;
        }

        /* ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ÿ±ÿßŸáŸÜŸÖÿß */
        .help-text {
            color: var(--gray);
            font-size: 1rem;
            line-height: 1.8;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            border: 2px dashed rgba(123, 104, 238, 0.2);
            position: relative;
            z-index: 2;
        }

        /* ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å */
        .support-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px;
            box-shadow: var(--shadow-md);
            border: 2px solid rgba(0, 0, 0, 0.05);
            height: 100%;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.6s ease-out;
            animation-fill-mode: both;
        }

        .support-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .support-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .support-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .support-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .support-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .support-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-light);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 3px solid rgba(123, 104, 238, 0.2);
            transition: all 0.3s;
            animation: float 3s ease-in-out infinite;
        }

        .support-card:hover .support-icon {
            transform: scale(1.1) rotate(10deg);
            background: var(--gradient-1);
            color: white;
        }

        .support-title {
            font-weight: 800;
            font-size: 1.2rem;
            color: var(--dark);
            margin: 0;
        }

        .support-description {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
            min-height: 80px;
        }

        .support-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
        }

        .action-btn {
            padding: 15px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .action-btn:active {
            transform: scale(0.97);
        }

        .btn-primary-custom {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.3);
        }

        .btn-primary-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.4);
        }

        .btn-primary-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: right 0.6s;
        }

        .btn-primary-custom:hover::before {
            right: 100%;
        }

        .btn-outline-secondary-custom {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-secondary-custom:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            color: var(--dark);
            box-shadow: var(--shadow-md);
        }

        .btn-outline-success-custom {
            background: transparent;
            color: #16a34a;
            border: 2px solid #16a34a;
            box-shadow: var(--shadow-sm);
        }

        .btn-outline-success-custom:hover {
            background: rgba(22, 163, 74, 0.1);
            transform: translateY(-3px);
            color: #16a34a;
            box-shadow: var(--shadow-md);
        }

        /* Ÿàÿ∂ÿπ€åÿ™ ÿ∫€åÿ±ŸÅÿπÿßŸÑ */
        .coming-soon {
            position: relative;
            opacity: 0.8;
        }

        .coming-soon::after {
            content: 'ÿ®Ÿá ÿ≤ŸàÿØ€å';
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--gradient-1);
            color: white;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 800;
            z-index: 3;
            animation: pulse 1.5s infinite;
        }

        /* ÿ®ÿÆÿ¥ FAQ */
        .faq-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px dashed var(--primary-light);
        }

        .faq-title {
            font-weight: 800;
            font-size: 1.3rem;
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-item {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 18px 20px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .faq-item:hover {
            border-color: var(--primary-light);
            transform: translateX(-5px);
        }

        .faq-question {
            font-weight: 700;
            color: var(--dark);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
        }

        .faq-answer {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-top: 10px;
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        /* ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å ŸÖŸàÿ®ÿß€åŸÑ */
        @media (max-width: 768px) {
            .support-page {
                padding: 15px 10px 90px;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .page-title-section h1 {
                font-size: 1.5rem;
            }

            .page-title-section h1 i {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .main-card {
                padding: 20px;
            }

            .support-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .support-icon {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }

            .support-description {
                min-height: auto;
            }

            .action-btn {
                padding: 12px;
                font-size: 0.9rem;
            }

            .faq-item {
                padding: 15px;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .action-btn,
        .btn-outline-custom {
            min-height: 44px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    @php
        $dashboardRoute = route('student.index');
    @endphp

    <div class="support-page">
        {{-- ================= HEADER ================= --}}
        <div class="page-header">
            <div class="page-title-section">
                <h1>
                    <i class="fas fa-headset"></i>
                    Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                </h1>
                <p class="page-subtitle">
                    ÿß⁄Øÿ± ŸÖÿ¥⁄©ŸÑ€å ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿßÿå ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß €åÿß ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å ÿØÿßÿ¥ÿ™€åÿå ÿßÿ≤ ÿß€åŸÜÿ¨ÿß ÿ®ÿß ŸÖÿß ÿØÿ± ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿßÿ¥.
                    ÿ™€åŸÖ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ŸáŸÖ€åÿ¥Ÿá ⁄©ŸÜÿßÿ±ÿ™Ÿá! ü§ù
                </p>
            </div>

            <a href="{{ $dashboardRoute }}" class="btn-outline-custom">
                <i class="fas fa-home"></i>
                ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
            </a>
        </div>

        {{-- ================= MAIN CARD ================= --}}
        <div class="main-card">
            {{-- ÿ¢ŸÑÿ±ÿ™‚ÄåŸáÿß --}}
            @if (session('success'))
                <div class="alert-custom alert-success-custom d-flex align-items-center gap-3">
                    <div style="font-size: 1.5rem; color: var(--accent);">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="flex-grow-1">
                        {{ session('success') }}
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            @endif

            @if (session('error'))
                <div class="alert-custom alert-danger-custom d-flex align-items-center gap-3">
                    <div style="font-size: 1.5rem; color: var(--secondary);">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="flex-grow-1">
                        {{ session('error') }}
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            @endif

            {{-- ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ÿ±ÿßŸáŸÜŸÖÿß --}}
            <div class="help-text">
                <div class="d-flex align-items-start gap-3">
                    <div style="font-size: 1.8rem; color: var(--primary);">üí°</div>
                    <div>
                        ÿ™€åŸÖ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ™ŸÑÿßÿ¥ ŸÖ€å‚Äå⁄©ŸÜÿØ ÿØÿ± ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ±€åŸÜ ÿ≤ŸÖÿßŸÜ Ÿæÿßÿ≥ÿÆ⁄ØŸà ÿ®ÿßÿ¥ÿØ.
                        ŸÑÿ∑ŸÅÿßŸã ŸáŸÜ⁄ØÿßŸÖ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ €åÿß ÿ™€å⁄©ÿ™ÿå ŸÖŸàÿ∂Ÿàÿπ Ÿà ÿ™Ÿàÿ∂€åÿ≠ ŸÖÿ¥⁄©ŸÑ ÿ±ÿß ÿØŸÇ€åŸÇ ÿ®ŸÜŸà€åÿ≥ ÿ™ÿß ÿ®ÿ™ŸàŸÜ€åŸÖ ÿ®Ÿáÿ™ÿ± ⁄©ŸÖ⁄©ÿ™ ⁄©ŸÜ€åŸÖ.
                        ŸÖÿπŸÖŸàŸÑÿßŸã ÿ∏ÿ±ŸÅ €≤€¥ ÿ≥ÿßÿπÿ™ Ÿæÿßÿ≥ÿÆ ŸÖ€å‚ÄåÿØ€åŸÖ! ‚è∞
                    </div>
                </div>
            </div>

            {{-- ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å --}}
            <div class="row g-4">
                {{-- ⁄©ÿßÿ±ÿ™ ÿ™€å⁄©ÿ™ --}}
                <div class="col-12 col-md-6">
                    <div class="support-card coming-soon">
                        <div class="support-header">
                            <div class="support-icon">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div>
                                <h3 class="support-title">ÿßÿ±ÿ≥ÿßŸÑ ÿ™€å⁄©ÿ™</h3>
                            </div>
                        </div>

                        <p class="support-description">
                            ŸÖÿ¥⁄©ŸÑÿ™ ÿ±Ÿà ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿ™€å⁄©ÿ™ ÿ´ÿ®ÿ™ ⁄©ŸÜ ÿ™ÿß ÿ™€åŸÖ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ®ÿ±ÿ±ÿ≥€åÿ¥ ⁄©ŸÜŸá.
                            ŸÖ€å‚Äåÿ™ŸàŸÜ€å Ÿàÿ∂ÿπ€åÿ™ ÿ™€å⁄©ÿ™ÿ™ ÿ±Ÿà Ÿæ€å⁄Ø€åÿ±€å ⁄©ŸÜ€å Ÿà Ÿæÿßÿ≥ÿÆ ÿ±Ÿà ÿØÿ± ŸáŸÖ€åŸÜ ÿµŸÅÿ≠Ÿá ÿ®ÿ®€åŸÜ€å.
                            ÿ≥€åÿ≥ÿ™ŸÖ ÿ™€å⁄©ÿ™ ÿ®Ÿáÿ™ÿ±€åŸÜ ÿ±ÿßŸá ÿ®ÿ±ÿß€å ŸÖÿ¥⁄©ŸÑÿßÿ™ Ÿæ€å⁄Ü€åÿØŸá‚Äåÿ™ÿ±Ÿá.
                        </p>

                        <div class="support-actions">
                            <button class="action-btn btn-primary-custom" onclick="showComingSoonModal('ÿ≥€åÿ≥ÿ™ŸÖ ÿ™€å⁄©ÿ™')">
                                <i class="fas fa-plus-circle"></i>
                                ÿß€åÿ¨ÿßÿØ ÿ™€å⁄©ÿ™ ÿ¨ÿØ€åÿØ
                            </button>
                        </div>
                    </div>
                </div>

                {{-- ⁄©ÿßÿ±ÿ™ ÿ™ŸÖÿßÿ≥ ŸÖÿ≥ÿ™ŸÇ€åŸÖ --}}
                <div class="col-12 col-md-6">
                    <div class="support-card coming-soon">
                        <div class="support-header">
                            <div class="support-icon">
                                <i class="fas fa-phone-alt"></i>
                            </div>
                            <div>
                                <h3 class="support-title">ÿ™ŸÖÿßÿ≥ ŸÖÿ≥ÿ™ŸÇ€åŸÖ</h3>
                            </div>
                        </div>

                        <p class="support-description">
                            ÿ®ÿ±ÿß€å ŸÖÿ¥⁄©ŸÑÿßÿ™ ŸÅŸàÿ±€å Ÿà ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≥ÿ±€åÿπ ŸÖ€å‚Äåÿ™ŸàŸÜ€å ŸÖÿ≥ÿ™ŸÇ€åŸÖÿßŸã ÿ®ÿß ŸÖÿß ÿ™ŸÖÿßÿ≥ ÿ®⁄Ø€åÿ±€å.
                            ÿ¥ŸÖÿßÿ±Ÿá Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å Ÿà Ÿàÿßÿ™ÿ≥ÿßŸæ ÿ®Ÿá ÿ≤ŸàÿØ€å ÿß€åŸÜÿ¨ÿß ŸÇÿ±ÿßÿ± ŸÖ€å‚Äå⁄Ø€åÿ±Ÿá.
                            ÿ≥ÿßÿπÿßÿ™ Ÿæÿßÿ≥ÿÆ⁄ØŸà€å€å: ÿ¥ŸÜÿ®Ÿá ÿ™ÿß ⁄ÜŸáÿßÿ±ÿ¥ŸÜÿ®Ÿáÿå €π ÿµÿ®ÿ≠ ÿ™ÿß €µ ÿ®ÿπÿØÿßÿ≤ÿ∏Ÿáÿ± üïî
                        </p>

                        <div class="support-actions">
                            <button class="action-btn btn-outline-secondary-custom"
                                onclick="showComingSoonModal('ÿ™ŸÖÿßÿ≥ ÿ™ŸÑŸÅŸÜ€å')">
                                <i class="fas fa-phone"></i>
                                ÿ™ŸÖÿßÿ≥ ÿ™ŸÑŸÅŸÜ€å
                            </button>
                            <button class="action-btn btn-outline-success-custom"
                                onclick="showComingSoonModal('Ÿàÿßÿ™ÿ≥ÿßŸæ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å')">
                                <i class="fab fa-whatsapp"></i>
                                Ÿàÿßÿ™ÿ≥ÿßŸæ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            {{-- ÿ¢ŸÑÿ±ÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™€å --}}
            <div class="alert-info-custom d-flex align-items-center gap-3">
                <div style="font-size: 1.5rem; color: var(--primary);">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="flex-grow-1">
                    ŸÅÿπŸÑÿßŸã ÿß€åŸÜ ÿµŸÅÿ≠Ÿá ŸÜŸÖŸàŸÜŸá ÿßÿ≥ÿ™ Ÿà ÿ≥€åÿ≥ÿ™ŸÖ ⁄©ÿßŸÖŸÑ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ®Ÿá ÿ≤ŸàÿØ€å ÿ±ÿßŸá‚ÄåÿßŸÜÿØÿßÿ≤€å ŸÖ€å‚Äåÿ¥Ÿá.
                    ÿØÿ± ÿß€åŸÜ ŸÖÿØÿ™ÿå ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿß€åŸÖ€åŸÑ €åÿß Ÿæ€åÿßŸÖ ÿ®Ÿá ŸÖÿπŸÑŸÖ ŸÖ€å‚Äåÿ™ŸàŸÜ€å ŸÖÿ¥⁄©ŸÑÿßÿ™ÿ™ ÿ±Ÿà ŸÖÿ∑ÿ±ÿ≠ ⁄©ŸÜ€å. üöÄ
                </div>
            </div>

            {{-- ================= FAQ SECTION ================= --}}
            <div class="faq-section">
                <h3 class="faq-title">
                    <i class="fas fa-question-circle" style="color: var(--primary);"></i>
                    ÿ≥ŸàÿßŸÑÿßÿ™ ŸÖÿ™ÿØÿßŸàŸÑ
                </h3>

                <div class="faq-list">
                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>⁄ÜŸÇÿØÿ± ÿ∑ŸàŸÑ ŸÖ€å‚Äå⁄©ÿ¥Ÿá ÿ™ÿß Ÿæÿßÿ≥ÿÆ ÿ™€å⁄©ÿ™ ÿ±Ÿà ÿ®⁄Ø€åÿ±ŸÖÿü</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            ŸÖÿπŸÖŸàŸÑÿßŸã ÿ∏ÿ±ŸÅ €≤€¥ ÿ≥ÿßÿπÿ™ ⁄©ÿßÿ±€å Ÿæÿßÿ≥ÿÆ ŸÖ€å‚ÄåÿØ€åŸÖ. ÿß⁄Øÿ± ŸÖÿ¥⁄©ŸÑ ŸÅŸàÿ±€å ÿ®ÿßÿ¥Ÿáÿå ÿ≥ÿπ€å ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ± Ÿæÿßÿ≥ÿÆ ÿ®ÿØ€åŸÖ.
                        </div>
                    </div>

                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>ÿ®ÿ±ÿß€å ŸÖÿ¥⁄©ŸÑÿßÿ™ ŸÅŸÜ€å ÿ¢ÿ≤ŸÖŸàŸÜ ⁄Ü€å⁄©ÿßÿ± ⁄©ŸÜŸÖÿü</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            ÿßŸàŸÑ ŸÖÿ±Ÿàÿ±⁄Øÿ±ÿ™ ÿ±Ÿà ÿ±ŸÅÿ±ÿ¥ ⁄©ŸÜ. ÿß⁄Øÿ± ŸÖÿ¥⁄©ŸÑ ÿßÿØÿßŸÖŸá ÿØÿßÿ¥ÿ™ÿå ÿßÿ≤ ÿ™€å⁄©ÿ™ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ Ÿà ÿπ⁄©ÿ≥ ÿßÿ≤ ÿÆÿ∑ÿß ÿ®ÿ±ÿßŸÖŸàŸÜ ÿ®ŸÅÿ±ÿ≥ÿ™.
                        </div>
                    </div>

                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>⁄Üÿ∑Ÿàÿ± ŸÖ€å‚Äåÿ™ŸàŸÜŸÖ ÿ®Ÿá ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ ÿßÿ∂ÿßŸÅŸá ÿ®ÿ¥ŸÖÿü</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            ⁄©ÿØ ⁄©ŸÑÿßÿ≥ ÿ±Ÿà ÿßÿ≤ ŸÖÿπŸÑŸÖÿ™ ÿ®⁄Ø€åÿ± Ÿà ÿØÿ± ÿµŸÅÿ≠Ÿá "⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ" ÿßÿ≤ ⁄Øÿ≤€åŸÜŸá "ÿπÿ∂Ÿà€åÿ™ ÿ®ÿß ⁄©ÿØ ⁄©ŸÑÿßÿ≥" ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ.
                        </div>
                    </div>

                    <div class="faq-item" onclick="toggleFaq(this)">
                        <div class="faq-question">
                            <span>ÿß⁄Øÿ± ŸÜÿ™ÿß€åÿ¨ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ±Ÿà ŸÜÿ®€åŸÜŸÖ ⁄Üÿ∑Ÿàÿ±ÿü</span>
                            <i class="fas fa-chevron-down" style="color: var(--primary);"></i>
                        </div>
                        <div class="faq-answer">
                            ŸÜÿ™ÿß€åÿ¨ ŸÖÿπŸÖŸàŸÑÿßŸã ÿ®ŸÑÿßŸÅÿßÿµŸÑŸá ÿ®ÿπÿØ ÿßÿ≤ ÿßÿ™ŸÖÿßŸÖ ÿ¢ÿ≤ŸÖŸàŸÜ ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸÜ. ÿß⁄Øÿ± ÿØ€åÿØ€åÿå ⁄ÜŸÜÿØ ÿØŸÇ€åŸÇŸá ÿµÿ®ÿ± ⁄©ŸÜ Ÿà ÿØŸàÿ®ÿßÿ±Ÿá
                            ÿµŸÅÿ≠Ÿá ÿ±Ÿà ÿ±ŸÅÿ±ÿ¥ ⁄©ŸÜ.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ ÿ®ÿ±ÿß€å ÿ™ÿπÿßŸÖŸÑÿßÿ™
                if (navigator.vibrate) {
                    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate ||
                        navigator.msVibrate;
                }

                // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß
                const supportCards = document.querySelectorAll('.support-card');
                supportCards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    });

                    card.addEventListener('click', function(e) {
                        if (!e.target.closest('.action-btn')) {
                            // ÿßŸÅ⁄©ÿ™ ⁄©ŸÑ€å⁄© ÿ±Ÿà€å ⁄©ŸÑ ⁄©ÿßÿ±ÿ™
                            this.style.transform = 'scale(0.98)';
                            setTimeout(() => {
                                this.style.transform = '';
                            }, 150);

                            if (navigator.vibrate) {
                                navigator.vibrate(30);
                            }
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å action
                const actionButtons = document.querySelectorAll('.action-btn');
                actionButtons.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                });

                // ÿØ⁄©ŸÖŸá ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                const backButton = document.querySelector('.btn-outline-custom');
                if (backButton) {
                    backButton.addEventListener('click', function(e) {
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);

                        if (navigator.vibrate) {
                            navigator.vibrate(30);
                        }
                    });
                }
            });

            // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ "ÿ®Ÿá ÿ≤ŸàÿØ€å"
            function showComingSoonModal(feature) {
                const modal = document.createElement('div');
                modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 350px;
        width: 85%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

                modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
            <i class="fas fa-tools"></i>
        </div>
        <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">${feature}</h3>
        <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
            ÿß€åŸÜ ŸÇÿßÿ®ŸÑ€åÿ™ ÿØÿ± ÿ≠ÿßŸÑ ÿ™Ÿàÿ≥ÿπŸá ÿßÿ≥ÿ™ Ÿà ÿ®Ÿá ÿ≤ŸàÿØ€å ÿØÿ± ÿØÿ≥ÿ™ÿ±ÿ≥ ŸÇÿ±ÿßÿ± ÿÆŸàÿßŸáÿØ ⁄Øÿ±ŸÅÿ™.
            ÿØÿ± ÿß€åŸÜ ŸÖÿØÿ™ ŸÖ€å‚Äåÿ™ŸàŸÜ€å ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿß€åŸÖ€åŸÑ ÿ®ÿß ŸÖÿß ÿØÿ± ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿßÿ¥€å.
        </p>
        <div style="display: flex; gap: 10px;">
            <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove();"
                    style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                ÿ®ÿßÿ¥Ÿá
            </button>
            <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove(); window.location.href='mailto:support@s-mart-edu.ir';"
                    style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                ÿßÿ±ÿ≥ÿßŸÑ ÿß€åŸÖ€åŸÑ
            </button>
        </div>
    `;

                document.body.appendChild(modal);

                const overlay = document.createElement('div');
                overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
                document.body.appendChild(overlay);

                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }

                // ÿ≠ÿ∞ŸÅ ÿÆŸàÿØ⁄©ÿßÿ± ÿ®ÿπÿØ ÿßÿ≤ 5 ÿ´ÿßŸÜ€åŸá
                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        modal.remove();
                        overlay.remove();
                    }
                }, 5000);
            }

            // ÿ™ÿßÿ®ÿπ toggle FAQ
            function toggleFaq(element) {
                element.classList.toggle('active');

                // ŸÑÿ±ÿ≤ÿ¥ ŸÖŸàÿ®ÿß€åŸÑ
                if (navigator.vibrate) {
                    navigator.vibrate(30);
                }

                // ÿ®ÿ≥ÿ™ŸÜ ÿ®ŸÇ€åŸá FAQ‚ÄåŸáÿß
                if (element.classList.contains('active')) {
                    document.querySelectorAll('.faq-item').forEach(item => {
                        if (item !== element) {
                            item.classList.remove('active');
                        }
                    });
                }
            }

            // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
            const style = document.createElement('style');
            style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
            document.head.appendChild(style);
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 133. show.blade.php

**Path:** `resources/views/dashboard/teacher/attempts/show.blade.php`  
**Size:** 17,052 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ¨ÿ≤ÿ¶€åÿßÿ™ Attempt ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .q-card {
            border: 1px solid #eef2f7;
            border-radius: 1rem;
            transition: .15s ease;
        }

        .q-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, .05);
        }

        .ans-box {
            background: #f9fafb;
            border-radius: .75rem;
            padding: .75rem 1rem;
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }

        .progress-lg {
            height: 12px;
            border-radius: 999px;
        }

        .sticky-actions {
            position: sticky;
            bottom: 10px;
            z-index: 20;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <div>
                <h4 class="fw-bold mb-1">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ™ŸÑÿßÿ¥ (Attempt)</h4>
                <div class="text-muted small">
                    ÿ¢ÿ≤ŸÖŸàŸÜ:
                    <span class="fw-semibold">{{ $attempt->exam->title ?? '‚Äî' }}</span>
                    ‚Ä¢ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤:
                    <span class="fw-semibold">{{ $attempt->student->phone ?? '‚Äî' }}</span>
                    ‚Ä¢ ÿßÿ±ÿ≥ÿßŸÑ:
                    <span class="fw-semibold">
                        {{ optional($attempt->submitted_at)->format('Y/m/d H:i') ?? '‚Äî' }}
                    </span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ url()->previous() }}" class="btn btn-outline-secondary">
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
                <a href="{{ route('teacher.students.show', $attempt->student_id) }}" class="btn btn-outline-primary">
                    Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                </a>
            </div>
        </div>

        @php
            // ‚úÖ answers ŸàÿßŸÇÿπ€å (AttemptAnswer) ÿßÿ≤ ÿ±ÿßÿ®ÿ∑Ÿá
            $answers = $attempt->answers()->with('question')->get();

            $totalScore = $attempt->score_total ?? ($attempt->exam?->questions?->sum('score') ?? 0);

            $obtained = $attempt->score_obtained ?? 0;
            $percent = $attempt->percent ?? 0;
            $status = $attempt->status ?? 'submitted';

            $isPending = $status === 'submitted';

            $essayPendingCount = $answers
                ->filter(function ($a) {
                    return $a->question?->type === 'essay' && $a->graded_at === null;
                })
                ->count();
        @endphp

        {{-- Attempt Summary --}}
        <div class="row g-3 mb-4">
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ŸÜŸÖÿ±Ÿá ŸÜŸáÿß€å€å</div>
                        <div class="fs-3 fw-bold">
                            {{ $obtained }}
                            <span class="fs-6 muted">/ {{ $totalScore }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ÿØÿ±ÿµÿØ</div>
                        <div class="fs-3 fw-bold">{{ $percent }}%</div>
                        <div class="progress progress-lg mt-2">
                            <div class="progress-bar" style="width: {{ min(100, max(0, $percent)) }}%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™</div>
                        <div class="mt-2">
                            @if ($isPending)
                                <span class="badge bg-warning text-dark badge-pill">
                                    ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿ™ÿµÿ≠€åÿ≠ (Essay ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá: {{ $essayPendingCount }})
                                </span>
                            @else
                                <span class="badge bg-success badge-pill">
                                    ÿ™ÿµÿ≠€åÿ≠ ÿ¥ÿØŸá
                                </span>
                            @endif
                        </div>
                    </div>
                </div>
            </div>
        </div>


        {{-- Questions & Answers --}}
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="fw-bold mb-0">ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß Ÿà Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß</h5>
            <span class="tiny muted">ÿ®ÿ±ÿß€å ÿ®ÿßÿ≤ ÿ¥ÿØŸÜ ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ±Ÿà€å ¬´ŸÜŸÖÿß€åÿ¥¬ª ÿ®ÿ≤ŸÜ</span>
        </div>

        @if ($answers->count())
            <div class="row g-3">

                @foreach ($answers as $i => $ans)
                    @php
                        $q = $ans->question;
                        $type = $q?->type ?? '-';
                        $questionScore = $q?->score ?? 0;

                        // decode student answer json
                        $studentRaw = $ans->answer;
                        $studentAnswer = $studentRaw;

                        if (is_string($studentRaw)) {
                            $decoded = json_decode($studentRaw, true);
                            if (json_last_error() === JSON_ERROR_NONE) {
                                $studentAnswer = $decoded;
                            }
                        }

                        $isEssay = $type === 'essay';
                        $isCorrect = (int) ($ans->is_correct ?? 0) === 1;

                        $awarded = $ans->score_awarded ?? 0;
                        $gradedAt = $ans->graded_at;

                        // correct answer display
                        $correctDisplay = null;
                        if ($type === 'mcq') {
                            $correctDisplay = strtoupper($q->correct_option ?? '');
                        } elseif ($type === 'true_false') {
                            $correctDisplay = $q->correct_tf ?? false ? 'True' : 'False';
                        } elseif ($type === 'fill_blank') {
                            $correctDisplay = is_array($q->correct_answer)
                                ? implode(' , ', $q->correct_answer)
                                : $q->correct_answer;
                        }

                        $mcqOptions = [
                            'a' => $q->option_a,
                            'b' => $q->option_b,
                            'c' => $q->option_c,
                            'd' => $q->option_d,
                        ];
                    @endphp

                    <div class="col-12">
                        <div class="q-card p-3">

                            {{-- Header line --}}
                            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-2">
                                <div class="d-flex align-items-center gap-2 flex-wrap">
                                    <span class="badge bg-light text-dark border badge-pill">
                                        ÿ≥ŸàÿßŸÑ {{ $i + 1 }}
                                    </span>

                                    <span class="badge bg-secondary badge-pill">
                                        {{ str_replace('_', ' ', $type) }}
                                    </span>

                                    <span class="badge bg-info badge-pill">
                                        ÿßŸÖÿ™€åÿßÿ≤: {{ $awarded }} / {{ $questionScore }}
                                    </span>

                                    @if ($isEssay)
                                        @if (!$gradedAt)
                                            <span class="badge bg-warning text-dark badge-pill">
                                                ŸÜ€åÿßÿ≤ŸÖŸÜÿØ ÿ™ÿµÿ≠€åÿ≠
                                            </span>
                                        @else
                                            <span class="badge bg-success badge-pill">
                                                ÿ™ÿµÿ≠€åÿ≠ ÿ¥ÿØ
                                            </span>
                                        @endif
                                    @else
                                        @if ($isCorrect)
                                            <span class="badge bg-success badge-pill">ÿØÿ±ÿ≥ÿ™</span>
                                        @else
                                            <span class="badge bg-danger badge-pill">ÿ∫ŸÑÿ∑</span>
                                        @endif
                                    @endif
                                </div>

                                <button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#q{{ $ans->id }}">
                                    ŸÜŸÖÿß€åÿ¥
                                </button>
                            </div>

                            <div class="collapse" id="q{{ $ans->id }}">

                                {{-- Question --}}
                                <div class="mb-3">
                                    <div class="fw-semibold mb-1">ÿµŸàÿ±ÿ™ ÿ≥ŸàÿßŸÑ:</div>
                                    <div class="ans-box">{{ $q?->question_text ?? '‚Äî' }}</div>
                                </div>

                                {{-- MCQ options --}}
                                @if ($type === 'mcq')
                                    <div class="mb-3">
                                        <div class="fw-semibold mb-1">⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß:</div>
                                        <div class="row g-2">
                                            @foreach ($mcqOptions as $key => $val)
                                                @if ($val !== null)
                                                    <div class="col-md-6">
                                                        <div
                                                            class="ans-box tiny d-flex justify-content-between align-items-center">
                                                            <span>{{ strtoupper($key) }}) {{ $val }}</span>

                                                            @if (($studentAnswer ?? '') == $key)
                                                                <span class="badge bg-primary">ÿßŸÜÿ™ÿÆÿßÿ® ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</span>
                                                            @endif

                                                            @if (($q->correct_option ?? '') == $key)
                                                                <span class="badge bg-success">⁄Øÿ≤€åŸÜŸá ÿµÿ≠€åÿ≠</span>
                                                            @endif
                                                        </div>
                                                    </div>
                                                @endif
                                            @endforeach
                                        </div>
                                    </div>
                                @endif

                                {{-- Student / Correct --}}
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="fw-semibold mb-1">Ÿæÿßÿ≥ÿÆ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤:</div>
                                        <div class="ans-box">
                                            @if (is_array($studentAnswer))
                                                <ul class="mb-0">
                                                    @foreach ($studentAnswer as $v)
                                                        <li>{{ $v }}</li>
                                                    @endforeach
                                                </ul>
                                            @else
                                                {{ $studentAnswer ?? '‚Äî' }}
                                            @endif
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <div class="fw-semibold mb-1">Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠:</div>
                                        <div class="ans-box">
                                            @if ($isEssay)
                                                <span class="muted">ÿ™ÿ¥ÿ±€åÿ≠€å ÿßÿ≥ÿ™ Ÿà Ÿæÿßÿ≥ÿÆ ŸÖÿ±ÿ¨ÿπ ŸÜÿØÿßÿ±ÿØ.</span>
                                            @else
                                                {{ $correctDisplay ?? '‚Äî' }}
                                            @endif
                                        </div>
                                    </div>
                                </div>

                                {{-- Explanation --}}
                                @if (!empty($q?->explanation))
                                    <div class="mt-3">
                                        <div class="fw-semibold mb-1">ÿ™Ÿàÿ∂€åÿ≠ ÿ≥ŸàÿßŸÑ:</div>
                                        <div class="ans-box tiny">{{ $q->explanation }}</div>
                                    </div>
                                @endif

                                {{-- Essay Grading Form --}}
                                @if ($isEssay)
                                    <hr class="my-3">

                                    <form method="POST"
                                        action="{{ route('teacher.attempts.answers.grade', [
                                            'attempt' => $attempt->id,
                                            'answer' => $ans->id,
                                        ]) }}"
                                        class="row g-3">

                                        @csrf

                                        <div class="col-md-3">
                                            <label class="form-label fw-semibold">ŸÜŸÖÿ±Ÿá ÿß€åŸÜ ÿ≥ŸàÿßŸÑ</label>
                                            <input type="number" name="score_awarded" class="form-control" min="0"
                                                max="{{ $questionScore }}" step="1"
                                                value="{{ old('score_awarded', $awarded) }}" required>
                                            <div class="tiny muted mt-1">
                                                ÿ≠ÿØÿß⁄©ÿ´ÿ±: {{ $questionScore }}
                                            </div>
                                        </div>

                                        <div class="col-md-9">
                                            <label class="form-label fw-semibold">ÿ®ÿßÿ≤ÿÆŸàÿ±ÿØ ŸÖÿπŸÑŸÖ</label>
                                            <textarea name="teacher_feedback" class="form-control" rows="2" placeholder="ÿ®ÿßÿ≤ÿÆŸàÿ±ÿØ ⁄©Ÿàÿ™ÿßŸá ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤...">{{ old('teacher_feedback', $ans->teacher_feedback) }}</textarea>
                                        </div>

                                        <div class="col-12 d-flex align-items-center gap-2">
                                            <button class="btn btn-success">
                                                ÿ´ÿ®ÿ™ ŸÜŸÖÿ±Ÿá ÿ™ÿ¥ÿ±€åÿ≠€å
                                            </button>

                                            @if ($gradedAt)
                                                <span class="tiny muted">
                                                    ÿ¢ÿÆÿ±€åŸÜ ÿ™ÿµÿ≠€åÿ≠:
                                                    {{ \Carbon\Carbon::parse($gradedAt)->format('Y/m/d H:i') }}
                                                </span>
                                            @endif
                                        </div>

                                    </form>
                                @endif

                            </div>
                        </div>
                    </div>
                @endforeach
            </div>
        @else
            <div class="text-muted mt-3">Ÿæÿßÿ≥ÿÆ€å ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ.</div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 134. create.blade.php

**Path:** `resources/views/dashboard/teacher/classes/create.blade.php`  
**Size:** 17,563 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ≥ÿßÿÆÿ™ ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ')

@push('styles')
    <style>
        .form-shell {
            background: radial-gradient(900px circle at 100% -30%, rgba(13, 110, 253, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08)
        }

        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .chip {
            background: rgba(13, 110, 253, .1);
            color: #0d6efd;
            font-weight: 800;
            border-radius: 999px;
            padding: .25rem .65rem;
            font-size: .8rem
        }

        .wizard {
            display: flex;
            gap: .5rem;
            flex-wrap: wrap
        }

        .wiz-step {
            flex: 1 1 140px;
            background: #f8fafc;
            border-radius: 1rem;
            padding: .7rem .9rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 800;
            font-size: .9rem;
            color: #334155
        }

        .wiz-step.active {
            background: rgba(13, 110, 253, .12);
            color: #0d6efd
        }

        .wiz-step .num {
            width: 28px;
            height: 28px;
            border-radius: .7rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e2e8f0
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 700;
            font-size: .85rem;
            color: #475569
        }

        .floating {
            position: sticky;
            top: 90px
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="form-shell mb-4 fade-up">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <h1 class="h4 fw-bold mb-1"><i class="bi bi-plus-circle me-1 text-primary"></i> ÿ≥ÿßÿÆÿ™ ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ</h1>
                    <p class="text-muted mb-0">ÿ®ÿ±ÿß€å ÿ¥ÿ±Ÿàÿπ ÿ¢ŸÖŸàÿ≤ÿ¥ÿå €å⁄© ⁄©ŸÑÿßÿ≥ ÿ®ÿ≥ÿßÿ≤ Ÿà ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß ÿ±ÿß ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ.</p>
                </div>
                <div class="d-flex gap-2">
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>
            </div>
        </div>

        {{-- Errors --}}
        @if ($errors->any())
            <div class="alert alert-danger fade-up">
                <div class="fw-semibold mb-2"><i class="bi bi-exclamation-triangle-fill me-1"></i> ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å
                    ⁄©ŸÜ:</div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3">

            {{-- Form column --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4 fade-up">

                    {{-- Wizard Steps --}}
                    <div class="wizard mb-3" id="wizard">
                        <div class="wiz-step active" data-step="1">
                            <div class="num">1</div> ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿß€åŸá
                        </div>
                        <div class="wiz-step" data-step="2">
                            <div class="num">2</div> ÿ¨ÿ≤ÿ¶€åÿßÿ™ Ÿà ÿ™ŸÜÿ∏€åŸÖÿßÿ™
                        </div>
                        <div class="wiz-step" data-step="3">
                            <div class="num">3</div> ŸÖÿ±Ÿàÿ± ŸÜŸáÿß€å€å
                        </div>
                    </div>

                    <form action="{{ route('teacher.classes.store') }}" method="POST" class="row g-3" novalidate>
                        @csrf

                        {{-- Step 1 --}}
                        <div class="col-12 step" data-step="1">
                            <label class="form-label fw-semibold">ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥ <span class="text-danger">*</span></label>
                            <input type="text" name="title" class="form-control input-soft" required
                                value="{{ old('title') }}" placeholder="ŸÖÿ´ŸÑÿßŸã: ÿ±€åÿßÿ∂€å ŸÜŸáŸÖ - ⁄©ŸÑÿßÿ≥ A">
                        </div>

                        <div class="col-md-6 step" data-step="1">
                            <label class="form-label fw-semibold">ÿØÿ±ÿ≥</label>
                            <input type="text" name="subject" class="form-control input-soft"
                                value="{{ old('subject') }}" placeholder="ŸÖÿ´ŸÑÿßŸã ÿ±€åÿßÿ∂€åÿå ÿπŸÑŸàŸÖÿå ÿ≤ÿ®ÿßŸÜ...">
                        </div>

                        <div class="col-md-6 step" data-step="1">
                            <label class="form-label fw-semibold">Ÿæÿß€åŸá</label>
                            <select name="grade" class="form-select input-soft">
                                @php $grade = old('grade',''); @endphp
                                <option value="" {{ $grade === '' ? 'selected' : '' }}>ÿßŸÜÿ™ÿÆÿßÿ® Ÿæÿß€åŸá</option>
                                <option value="7" {{ $grade === '7' ? 'selected' : '' }}>ŸáŸÅÿ™ŸÖ</option>
                                <option value="8" {{ $grade === '8' ? 'selected' : '' }}>Ÿáÿ¥ÿ™ŸÖ</option>
                                <option value="9" {{ $grade === '9' ? 'selected' : '' }}>ŸÜŸáŸÖ</option>
                                <option value="10" {{ $grade === '10' ? 'selected' : '' }}>ÿØŸáŸÖ</option>
                                <option value="11" {{ $grade === '11' ? 'selected' : '' }}>€åÿßÿ≤ÿØŸáŸÖ</option>
                                <option value="12" {{ $grade === '12' ? 'selected' : '' }}>ÿØŸàÿßÿ≤ÿØŸáŸÖ</option>
                            </select>
                        </div>

                        {{-- Step 2 --}}
                        <div class="col-12 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ⁄©ŸÑÿßÿ≥</label>
                            <textarea name="description" rows="4" class="form-control input-soft"
                                placeholder="ÿ™Ÿàÿ∂€åÿ≠ ⁄©Ÿàÿ™ÿßŸá ÿØÿ±ÿ®ÿßÿ±ŸáŸî ÿßŸáÿØÿßŸÅÿå ŸÖŸÜÿßÿ®ÿπÿå ÿ≤ŸÖÿßŸÜ‚Äåÿ®ŸÜÿØ€å Ÿà...">{{ old('description') }}</textarea>
                        </div>

                        <div class="col-md-6 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">Ÿàÿ∂ÿπ€åÿ™ ⁄©ŸÑÿßÿ≥</label>
                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input" type="checkbox" id="activeSwitch" name="is_active"
                                    value="1" {{ old('is_active', 1) ? 'checked' : '' }}>
                                <label class="form-check-label" for="activeSwitch">⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ</label>
                            </div>
                            <div class="hint mt-2 text-muted small">⁄©ŸÑÿßÿ≥ ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ®ÿ±ÿß€å ÿ¢ÿ±ÿ¥€åŸà €åÿß ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ™ŸÖÿßŸÖ‚Äåÿ¥ÿØŸá ŸÖŸÜÿßÿ≥ÿ® ÿßÿ≥ÿ™.
                            </div>
                        </div>

                        <div class="col-md-6 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">⁄©ÿØ Ÿàÿ±ŸàÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</label>
                            <div class="input-group">
                                <input type="text" class="form-control input-soft" id="joinCode"
                                    value="{{ old('join_code') }}" placeholder="ÿÆŸàÿØ⁄©ÿßÿ± ÿ≥ÿßÿÆÿ™Ÿá ŸÖ€å‚Äåÿ¥ŸàÿØ" disabled>
                                <button type="button" class="btn btn-outline-primary btn-wizard" id="genCodeBtn"><i
                                        class="bi bi-shuffle"></i> ÿ≥ÿßÿÆÿ™ ⁄©ÿØ</button>
                            </div>
                            <div class="text-muted small mt-1">ÿ®ÿπÿØ ÿßÿ≤ ÿ≥ÿßÿÆÿ™ ⁄©ŸÑÿßÿ≥ ÿß€åŸÜ ⁄©ÿØ ÿ±ÿß ÿ®Ÿá ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ®ÿØŸá.</div>
                        </div>

                        {{-- Step 3 Review --}}
                        <div class="col-12 step" data-step="3" style="display:none">
                            <div class="preview-card p-3">
                                <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> ŸÖÿ±Ÿàÿ± ŸÜŸáÿß€å€å</div>
                                <div class="small text-muted">ŸÇÿ®ŸÑ ÿßÿ≤ ÿ∞ÿÆ€åÿ±Ÿá €å⁄©ÿ®ÿßÿ± ⁄Ü⁄© ⁄©ŸÜ.</div>
                                <div class="border rounded-3 p-3 bg-white mt-2" id="reviewBox"></div>
                            </div>
                        </div>

                        {{-- Nav buttons --}}
                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="button" class="btn btn-outline-secondary btn-wizard" id="prevBtn" disabled>
                                <i class="bi bi-arrow-right"></i> ŸÇÿ®ŸÑ€å
                            </button>
                            <button type="button" class="btn btn-primary btn-wizard shadow-sm" id="nextBtn">
                                ÿ®ÿπÿØ€å <i class="bi bi-arrow-left"></i>
                            </button>
                            <button type="submit" class="btn btn-success btn-wizard shadow-sm" id="submitBtn"
                                style="display:none">
                                <i class="bi bi-check2-circle"></i> ÿ≥ÿßÿÆÿ™ ⁄©ŸÑÿßÿ≥
                            </button>
                        </div>

                    </form>
                </div>
            </div>

            {{-- Right column (live preview + tips) --}}
            <div class="col-lg-4">
                <div class="floating fade-up">

                    <div class="preview-card p-3 mb-3">
                        <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ÿ≤ŸÜÿØŸá</div>
                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold fs-6" id="pvTitle">ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥</div>
                            <div class="text-muted small mt-2" id="pvSubject">ÿØÿ±ÿ≥: ‚Äî</div>
                            <div class="text-muted small mt-1" id="pvGrade">Ÿæÿß€åŸá: ‚Äî</div>
                            <div class="d-flex flex-wrap gap-2 mt-2">
                                <span class="meta-pill" id="pvActive"><i class="bi bi-broadcast"></i> ŸÅÿπÿßŸÑ</span>
                                <span class="meta-pill" id="pvCode"><i class="bi bi-key"></i> ⁄©ÿØ: ‚Äî</span>
                            </div>
                            <div class="text-muted small mt-3" id="pvDesc"></div>
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> ŸÜ⁄©ÿ™Ÿá‚ÄåŸáÿß</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥ Ÿàÿßÿ∂ÿ≠ Ÿà ŸÇÿßÿ®ŸÑ ÿ™ÿ¥ÿÆ€åÿµ ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ.</li>
                            <li>⁄©ÿØ Ÿàÿ±ŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿ≥ÿßÿÆÿ™ ÿØÿ± ⁄Øÿ±ŸàŸá ⁄©ŸÑÿßÿ≥ ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜ.</li>
                            <li>ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ⁄©ŸÑÿßÿ≥ ÿ±ÿß ÿ®ÿπÿØÿßŸã ÿ¢ÿ±ÿ¥€åŸà ⁄©ŸÜ€å.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Wizard
                const steps = [...document.querySelectorAll('.step')];
                const wizSteps = [...document.querySelectorAll('.wiz-step')];
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const submitBtn = document.getElementById('submitBtn');
                let current = 1;

                function setStep(n) {
                    current = n;
                    steps.forEach(s => s.style.display = (Number(s.dataset.step) === n) ? '' : 'none');
                    wizSteps.forEach(w => w.classList.toggle('active', Number(w.dataset.step) === n));
                    prevBtn.disabled = n === 1;
                    nextBtn.style.display = n < 3 ? '' : 'none';
                    submitBtn.style.display = n === 3 ? '' : 'none';
                    if (n === 3) fillReview();
                }

                prevBtn.addEventListener('click', () => setStep(Math.max(1, current - 1)));
                nextBtn.addEventListener('click', () => setStep(Math.min(3, current + 1)));

                // Live preview elements
                const title = document.querySelector('input[name="title"]');
                const subject = document.querySelector('input[name="subject"]');
                const grade = document.querySelector('select[name="grade"]');
                const desc = document.querySelector('textarea[name="description"]');
                const active = document.getElementById('activeSwitch');

                const pvTitle = document.getElementById('pvTitle');
                const pvSubject = document.getElementById('pvSubject');
                const pvGrade = document.getElementById('pvGrade');
                const pvDesc = document.getElementById('pvDesc');
                const pvActive = document.getElementById('pvActive');
                const pvCode = document.getElementById('pvCode');

                const joinCode = document.getElementById('joinCode');
                const genCodeBtn = document.getElementById('genCodeBtn');

                function genCode() {
                    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                    let c = '';
                    for (let i = 0; i < 6; i++) c += chars[Math.floor(Math.random() * chars.length)];
                    joinCode.value = c;
                    if (pvCode) pvCode.innerHTML = `<i class="bi bi-key"></i> ⁄©ÿØ: ${c}`;
                }

                genCodeBtn?.addEventListener('click', genCode);

                function fillReview() {
                    const t = title?.value?.trim() || '‚Äî';
                    const s = subject?.value?.trim() || '‚Äî';
                    const g = grade?.value || '‚Äî';
                    const d = desc?.value?.trim() || '‚Äî';
                    const a = active?.checked ? 'ŸÅÿπÿßŸÑ' : 'ÿ¢ÿ±ÿ¥€åŸà';
                    const c = joinCode?.value || 'ÿÆŸàÿØ⁄©ÿßÿ±';

                    const reviewBox = document.getElementById('reviewBox');
                    if (reviewBox) {
                        reviewBox.innerHTML = `
          <div class="fw-semibold mb-1">ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥:</div><div>${t}</div>
          <div class="mt-2 fw-semibold mb-1">ÿØÿ±ÿ≥:</div><div>${s}</div>
          <div class="mt-2 text-muted small">Ÿæÿß€åŸá: ${g} ‚Ä¢ Ÿàÿ∂ÿπ€åÿ™: ${a}</div>
          <div class="mt-2 fw-semibold mb-1">⁄©ÿØ Ÿàÿ±ŸàÿØ:</div><div>${c}</div>
          <div class="mt-2 fw-semibold mb-1">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™:</div><div>${d}</div>
        `;
                    }
                }

                // preview listeners
                title?.addEventListener('input', () => {
                    pvTitle.textContent = title.value || 'ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥';
                });
                subject?.addEventListener('input', () => {
                    pvSubject.textContent = 'ÿØÿ±ÿ≥: ' + (subject.value || '‚Äî');
                });
                grade?.addEventListener('change', () => {
                    pvGrade.textContent = 'Ÿæÿß€åŸá: ' + (grade.value || '‚Äî');
                });
                desc?.addEventListener('input', () => {
                    pvDesc.textContent = desc.value || '';
                });
                active?.addEventListener('change', () => {
                    pvActive.innerHTML = active.checked ?
                        '<i class="bi bi-broadcast"></i> ŸÅÿπÿßŸÑ' :
                        '<i class="bi bi-archive"></i> ÿ¢ÿ±ÿ¥€åŸà';
                });

                // init
                setStep(1);
                genCode();
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 135. edit.blade.php

**Path:** `resources/views/dashboard/teacher/classes/edit.blade.php`  
**Size:** 15,240 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿà€åÿ±ÿß€åÿ¥ ⁄©ŸÑÿßÿ≥')

@push('styles')
    <style>
        .form-shell {
            background: radial-gradient(900px circle at 100% -30%, rgba(13, 110, 253, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08)
        }

        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 700;
            font-size: .85rem;
            color: #475569
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .floating {
            position: sticky;
            top: 90px
        }

        .danger-zone {
            border: 1px solid rgba(220, 53, 69, .2);
            background: rgba(220, 53, 69, .04);
            border-radius: 1rem
        }

        .copy-btn {
            border-radius: .8rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="form-shell mb-4 fade-up">
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <h1 class="h4 fw-bold mb-1"><i class="bi bi-pencil-square me-1 text-warning"></i> Ÿà€åÿ±ÿß€åÿ¥ ⁄©ŸÑÿßÿ≥</h1>
                    <p class="text-muted mb-0">ÿßÿ∑ŸÑÿßÿπÿßÿ™ ⁄©ŸÑÿßÿ≥ ÿ±ÿß ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ⁄©ŸÜ €åÿß ÿ¢ŸÜ ÿ±ÿß ÿ¢ÿ±ÿ¥€åŸà/ÿ≠ÿ∞ŸÅ ⁄©ŸÜ.</p>
                </div>
                <div class="d-flex gap-2">
                    <a href="{{ route('teacher.classes.show', $class) }}"
                        class="btn btn-outline-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-eye"></i> ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÑÿßÿ≥
                    </a>
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>
            </div>
        </div>

        {{-- Errors / Success --}}
        @if ($errors->any())
            <div class="alert alert-danger fade-up">
                <div class="fw-semibold mb-2"><i class="bi bi-exclamation-triangle-fill me-1"></i> ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å
                    ⁄©ŸÜ:</div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif
        @if (session('success'))
            <div class="alert alert-success fade-up"><i class="bi bi-check-circle-fill me-1"></i>{{ session('success') }}
            </div>
        @endif

        <div class="row g-3">

            {{-- Form column --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4 fade-up">

                    <form action="{{ route('teacher.classes.update', $class) }}" method="POST" class="row g-3" novalidate>
                        @csrf
                        @method('PUT')

                        <div class="col-12">
                            <label class="form-label fw-semibold">ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥ <span class="text-danger">*</span></label>
                            <input type="text" name="title" class="form-control input-soft" required
                                value="{{ old('title', $class->title) }}" placeholder="ŸÖÿ´ŸÑÿßŸã: ÿ±€åÿßÿ∂€å ŸÜŸáŸÖ - ⁄©ŸÑÿßÿ≥ A">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">ÿØÿ±ÿ≥</label>
                            <input type="text" name="subject" class="form-control input-soft"
                                value="{{ old('subject', $class->subject) }}" placeholder="ŸÖÿ´ŸÑÿßŸã ÿ±€åÿßÿ∂€åÿå ÿπŸÑŸàŸÖÿå ÿ≤ÿ®ÿßŸÜ...">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ÿæÿß€åŸá</label>
                            <select name="grade" class="form-select input-soft">
                                @php $grade = old('grade', (string)($class->grade ?? '')); @endphp
                                <option value="" {{ $grade === '' ? 'selected' : '' }}>ÿßŸÜÿ™ÿÆÿßÿ® Ÿæÿß€åŸá</option>
                                <option value="7" {{ $grade === '7' ? 'selected' : '' }}>ŸáŸÅÿ™ŸÖ</option>
                                <option value="8" {{ $grade === '8' ? 'selected' : '' }}>Ÿáÿ¥ÿ™ŸÖ</option>
                                <option value="9" {{ $grade === '9' ? 'selected' : '' }}>ŸÜŸáŸÖ</option>
                                <option value="10" {{ $grade === '10' ? 'selected' : '' }}>ÿØŸáŸÖ</option>
                                <option value="11" {{ $grade === '11' ? 'selected' : '' }}>€åÿßÿ≤ÿØŸáŸÖ</option>
                                <option value="12" {{ $grade === '12' ? 'selected' : '' }}>ÿØŸàÿßÿ≤ÿØŸáŸÖ</option>
                            </select>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-semibold">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ⁄©ŸÑÿßÿ≥</label>
                            <textarea name="description" rows="4" class="form-control input-soft"
                                placeholder="ÿ™Ÿàÿ∂€åÿ≠ ⁄©Ÿàÿ™ÿßŸá ÿØÿ±ÿ®ÿßÿ±ŸáŸî ÿßŸáÿØÿßŸÅÿå ŸÖŸÜÿßÿ®ÿπÿå ÿ≤ŸÖÿßŸÜ‚Äåÿ®ŸÜÿØ€å Ÿà...">{{ old('description', $class->description) }}</textarea>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">Ÿàÿ∂ÿπ€åÿ™ ⁄©ŸÑÿßÿ≥</label>
                            <div class="form-check form-switch mt-2">
                                <input class="form-check-input" type="checkbox" id="activeSwitch" name="is_active"
                                    value="1" {{ old('is_active', $class->is_active ?? 1) ? 'checked' : '' }}>
                                <label class="form-check-label" for="activeSwitch">⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ ÿ®ÿßÿ¥ÿØ</label>
                            </div>
                            <div class="text-muted small mt-1">⁄©ŸÑÿßÿ≥ ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ®ÿ±ÿß€å ÿ¢ÿ±ÿ¥€åŸà €åÿß ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ™ŸÖÿßŸÖ‚Äåÿ¥ÿØŸá ŸÖŸÜÿßÿ≥ÿ® ÿßÿ≥ÿ™.</div>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label fw-semibold">⁄©ÿØ Ÿàÿ±ŸàÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</label>
                            <div class="input-group">
                                <input type="text" class="form-control input-soft" id="joinCode"
                                    value="{{ $class->join_code }}" readonly>
                                <button type="button" class="btn btn-outline-secondary copy-btn" id="copyCodeBtn">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                            </div>
                            <div class="text-muted small mt-1">ÿß€åŸÜ ⁄©ÿØ ÿ±ÿß ÿ®ÿ±ÿß€å ÿπÿ∂Ÿà€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜ.</div>
                        </div>

                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="submit" class="btn btn-primary btn-wizard shadow-sm">
                                <i class="bi bi-save2"></i> ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
                            </button>
                            <a href="{{ route('teacher.classes.show', $class) }}"
                                class="btn btn-outline-primary btn-wizard">
                                ŸÖÿ¥ÿßŸáÿØŸá
                            </a>
                            <a href="{{ route('teacher.classes.index') }}" class="btn btn-outline-secondary btn-wizard">
                                ÿßŸÜÿµÿ±ÿßŸÅ
                            </a>
                        </div>
                    </form>

                    {{-- Danger zone delete --}}
                    <div class="danger-zone p-3 mt-4">
                        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                            <div>
                                <div class="fw-bold text-danger"><i class="bi bi-trash3 me-1"></i> ÿ≠ÿ∞ŸÅ ⁄©ŸÑÿßÿ≥</div>
                                <div class="small text-muted">ÿß€åŸÜ ÿπŸÖŸÑ€åÿßÿ™ ÿ∫€åÿ±ŸÇÿßÿ®ŸÑ ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿßÿ≥ÿ™.</div>
                            </div>
                            <form action="{{ route('teacher.classes.destroy', $class) }}" method="POST">
                                @csrf @method('DELETE')
                                <button class="btn btn-outline-danger btn-wizard"
                                    onclick="return confirm('ÿ¢€åÿß ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')">
                                    ÿ≠ÿ∞ŸÅ ŸÇÿ∑ÿπ€å
                                </button>
                            </form>
                        </div>
                    </div>

                </div>
            </div>

            {{-- Right column preview/help --}}
            <div class="col-lg-4">
                <div class="floating fade-up">

                    <div class="preview-card p-3 mb-3">
                        <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ⁄©ŸÑÿßÿ≥</div>
                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold fs-6" id="pvTitle">{{ $class->title }}</div>
                            <div class="text-muted small mt-2" id="pvSubject">ÿØÿ±ÿ≥: {{ $class->subject ?? '‚Äî' }}</div>
                            <div class="text-muted small mt-1" id="pvGrade">Ÿæÿß€åŸá: {{ $class->grade ?? '‚Äî' }}</div>
                            <div class="d-flex flex-wrap gap-2 mt-2">
                                <span class="meta-pill" id="pvActive"><i class="bi bi-broadcast"></i>
                                    {{ $class->is_active ?? 1 ? 'ŸÅÿπÿßŸÑ' : 'ÿ¢ÿ±ÿ¥€åŸà' }}</span>
                                <span class="meta-pill" id="pvCode"><i class="bi bi-key"></i> ⁄©ÿØ:
                                    {{ $class->join_code }}</span>
                            </div>
                            @if ($class->description)
                                <div class="text-muted small mt-3" id="pvDesc">{{ $class->description }}</div>
                            @else
                                <div class="text-muted small mt-3" id="pvDesc"></div>
                            @endif
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> ŸÜ⁄©ÿ™Ÿá‚ÄåŸáÿß</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>ÿß⁄Øÿ± ⁄©ŸÑÿßÿ≥ ÿ™ŸÖÿßŸÖ ÿ¥ÿØŸáÿå ÿ¢ŸÜ ÿ±ÿß ÿ¢ÿ±ÿ¥€åŸà ⁄©ŸÜ.</li>
                            <li>ÿ®ÿ±ÿß€å ÿßŸÖŸÜ€åÿ™ÿå ⁄©ÿØ Ÿàÿ±ŸàÿØ ÿ±ÿß ŸÅŸÇÿ∑ ÿ®Ÿá ÿßÿπÿ∂ÿß€å ⁄©ŸÑÿßÿ≥ ÿ®ÿØŸá.</li>
                            <li>ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿ®ÿß €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©Ÿàÿ™ÿßŸá ÿ≥ÿ∑ÿ≠ ⁄©ŸÑÿßÿ≥ ÿ±ÿß ÿ®ÿ≥ŸÜÿ¨€å.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const title = document.querySelector('input[name="title"]');
                const subject = document.querySelector('input[name="subject"]');
                const grade = document.querySelector('select[name="grade"]');
                const desc = document.querySelector('textarea[name="description"]');
                const active = document.getElementById('activeSwitch');

                const pvTitle = document.getElementById('pvTitle');
                const pvSubject = document.getElementById('pvSubject');
                const pvGrade = document.getElementById('pvGrade');
                const pvDesc = document.getElementById('pvDesc');
                const pvActive = document.getElementById('pvActive');

                const joinCode = document.getElementById('joinCode');
                const copyBtn = document.getElementById('copyCodeBtn');

                // live preview
                title?.addEventListener('input', () => {
                    pvTitle.textContent = title.value || 'ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥';
                });
                subject?.addEventListener('input', () => {
                    pvSubject.textContent = 'ÿØÿ±ÿ≥: ' + (subject.value || '‚Äî');
                });
                grade?.addEventListener('change', () => {
                    pvGrade.textContent = 'Ÿæÿß€åŸá: ' + (grade.value || '‚Äî');
                });
                desc?.addEventListener('input', () => {
                    pvDesc.textContent = desc.value || '';
                });
                active?.addEventListener('change', () => {
                    pvActive.innerHTML = active.checked ?
                        '<i class="bi bi-broadcast"></i> ŸÅÿπÿßŸÑ' :
                        '<i class="bi bi-archive"></i> ÿ¢ÿ±ÿ¥€åŸà';
                });

                // copy join code
                copyBtn?.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(joinCode.value);
                        copyBtn.classList.remove('btn-outline-secondary');
                        copyBtn.classList.add('btn-success');
                        copyBtn.innerHTML = '<i class="bi bi-check2"></i>';
                        setTimeout(() => {
                            copyBtn.classList.remove('btn-success');
                            copyBtn.classList.add('btn-outline-secondary');
                            copyBtn.innerHTML = '<i class="bi bi-clipboard"></i>';
                        }, 1200);
                    } catch (e) {
                        alert('⁄©Ÿæ€å ÿßŸÜÿ¨ÿßŸÖ ŸÜÿ¥ÿØ.');
                    }
                });
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 136. index.blade.php

**Path:** `resources/views/dashboard/teacher/classes/index.blade.php`  
**Size:** 44,111 bytes  
**Modified:** 2025-12-06 21:36:01

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ - ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ')

@push('styles')
    <style>
        /* ÿ™ŸÖ ⁄©ÿßŸÖŸÑ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .classes-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* ========== HERO HEADER ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .btn-hero {
            padding: 16px 32px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1.05rem;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-hero:active {
            transform: scale(0.97);
        }

        .btn-primary-grad {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-primary-grad:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-primary-grad::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-primary-grad:hover::before {
            left: 100%;
        }

        .btn-outline-secondary-grad {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-outline-secondary-grad:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== FILTER SECTION ========== */
        .filter-section {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.08);
            animation: slideInLeft 0.5s ease-out;
        }

        .filter-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
        }

        .filter-header i {
            color: var(--primary);
            background: var(--primary-light);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        .filter-header h3 {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            margin: 0;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            align-items: end;
        }

        @media (max-width: 1200px) {
            .filter-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 992px) {
            .filter-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .filter-grid {
                grid-template-columns: 1fr;
            }
        }

        .filter-group {
            margin-bottom: 0;
        }

        .filter-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: block;
        }

        .filter-input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
        }

        .filter-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .filter-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 18px center;
            background-size: 16px;
            padding-left: 45px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            height: 100%;
            align-items: end;
        }

        .btn-filter {
            flex: 1;
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 52px;
        }

        .btn-filter:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .btn-filter-primary {
            background: var(--gradient-1);
            color: white;
            border: none;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.25);
        }

        .btn-filter-primary:hover {
            background: var(--gradient-1);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(123, 104, 238, 0.35);
        }

        .btn-filter-reset {
            background: transparent;
            color: var(--gray);
            border: 2px solid var(--gray);
        }

        .btn-filter-reset:hover {
            background: var(--light-gray);
            color: var(--dark);
        }

        /* ========== CLASSES GRID ========== */
        .classes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
            animation: fadeIn 0.6s ease-out;
            animation-delay: 0.1s;
            animation-fill-mode: both;
        }

        @media (max-width: 768px) {
            .classes-grid {
                grid-template-columns: 1fr;
            }
        }

        .class-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .class-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .class-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .class-ribbon {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 8px 16px;
            font-size: 0.85rem;
            font-weight: 900;
            border-radius: var(--radius-sm);
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ribbon-active {
            background: rgba(0, 212, 170, 0.15);
            color: #00D4AA;
        }

        .ribbon-archived {
            background: rgba(138, 141, 155, 0.15);
            color: var(--gray);
        }

        .class-header {
            padding: 25px 25px 20px;
            border-bottom: 2px solid var(--light-gray);
            position: relative;
            z-index: 2;
        }

        .class-title {
            font-weight: 900;
            font-size: 1.4rem;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            line-height: 1.3;
        }

        .class-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .class-subject {
            color: var(--gray);
            font-size: 0.95rem;
            font-weight: 700;
            padding-right: 57px;
        }

        .class-body {
            padding: 20px 25px;
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .class-description {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 25px;
            min-height: 60px;
        }

        .class-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .meta-item {
            background: var(--light-gray);
            border-radius: var(--radius-md);
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
        }

        .meta-item:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
        }

        .meta-value {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 5px;
            line-height: 1;
        }

        .meta-label {
            font-size: 0.85rem;
            color: var(--gray);
            font-weight: 700;
        }

        .class-code {
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), rgba(255, 107, 157, 0.05));
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px dashed rgba(123, 104, 238, 0.2);
        }

        .code-label {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .code-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--primary);
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        .class-footer {
            padding: 20px 25px 25px;
            border-top: 2px solid var(--light-gray);
            position: relative;
            z-index: 2;
        }

        .class-actions {
            display: flex;
            gap: 12px;
        }

        .btn-class-action {
            flex: 1;
            padding: 14px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
            border: 2px solid transparent;
            min-height: 48px;
        }

        .btn-class-action:active {
            transform: scale(0.95);
        }

        .btn-exam {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 6px 16px rgba(123, 104, 238, 0.25);
        }

        .btn-exam:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(123, 104, 238, 0.35);
        }

        .btn-details {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-details:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* ========== EMPTY STATE ========== */
        .empty-state {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 60px 40px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 2px dashed rgba(123, 104, 238, 0.2);
            animation: fadeIn 0.6s ease-out;
        }

        .empty-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.1), rgba(0, 212, 170, 0.1));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            font-size: 2.8rem;
            color: var(--primary);
            animation: pulse 2s infinite;
        }

        .empty-title {
            font-weight: 900;
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-description {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        /* ========== PAGINATION ========== */
        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            animation: fadeIn 0.6s ease-out;
        }

        .pagination-custom {
            display: flex;
            gap: 10px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .page-item {
            display: flex;
        }

        .page-link {
            padding: 12px 20px;
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 800;
            text-decoration: none;
            border: 2px solid var(--light-gray);
            transition: all 0.3s;
            min-width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-link:hover {
            background: var(--primary-light);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        .page-item.active .page-link {
            background: var(--gradient-1);
            color: white;
            border-color: var(--primary);
        }

        .page-item.disabled .page-link {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .classes-container {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .hero-actions {
                flex-direction: column;
                width: 100%;
            }

            .btn-hero {
                width: 100%;
                justify-content: center;
            }

            .filter-section {
                padding: 20px;
            }

            .filter-grid {
                gap: 12px;
            }

            .filter-buttons {
                flex-direction: column;
            }

            .class-meta {
                grid-template-columns: 1fr;
            }

            .class-actions {
                flex-direction: column;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-title {
                font-size: 1.5rem;
            }

            .page-link {
                padding: 10px 15px;
                min-width: 40px;
            }
        }

        @media (max-width: 480px) {
            .class-card {
                margin-bottom: 20px;
            }

            .class-header,
            .class-body,
            .class-footer {
                padding: 20px;
            }

            .meta-value {
                font-size: 1.5rem;
            }

            .code-value {
                font-size: 1.3rem;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .btn-hero,
        .btn-filter,
        .btn-class-action,
        .page-link {
            min-height: 44px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="classes-container">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span
                        style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ
                    </span>
                    üë®‚Äçüè´
                </h1>
                <p class="hero-subtitle">
                    ŸÖÿØ€åÿ±€åÿ™ ÿ≥ÿßÿÆÿ™ÿå Ÿà€åÿ±ÿß€åÿ¥ÿå ÿßÿπÿ∂ÿß Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å Ÿáÿ± ⁄©ŸÑÿßÿ≥.
                    ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß ÿ±ÿß ÿ≥ÿßÿ≤ŸÖÿßŸÜÿØŸá€å ⁄©ÿ±ÿØŸá Ÿà ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ±ÿß ÿØŸÜÿ®ÿßŸÑ ⁄©ŸÜ€åÿØ.
                </p>
            </div>

            <div class="hero-actions">
                @if (\Illuminate\Support\Facades\Route::has('teacher.classes.create'))
                    <a href="{{ route('teacher.classes.create') }}" class="btn-hero btn-primary-grad">
                        <i class="fas fa-plus-circle"></i>
                        ÿß€åÿ¨ÿßÿØ ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ
                    </a>
                @endif

                <a href="{{ route('teacher.index') }}" class="btn-hero btn-outline-secondary-grad">
                    <i class="fas fa-home"></i>
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
                </a>
            </div>
        </div>

        {{-- ========== FILTER SECTION ========== --}}
        <div class="filter-section">
            <div class="filter-header">
                <i class="fas fa-filter"></i>
                <h3>ŸÅ€åŸÑÿ™ÿ± Ÿà ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá</h3>
            </div>

            <form method="GET" action="{{ route('teacher.classes.index') }}" class="filter-grid">
                <div class="filter-group">
                    <label class="filter-label">ÿ¨ÿ≥ÿ™ÿ¨Ÿà</label>
                    <div class="input-group">
                        <span class="input-group-text bg-white border-0">
                            <i class="fas fa-search"></i>
                        </span>
                        <input type="text" name="q" class="filter-input" placeholder="ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥ÿå Ÿæÿß€åŸá €åÿß ⁄©ÿØ ⁄©ŸÑÿßÿ≥..."
                            value="{{ request('q') }}">
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Ÿæÿß€åŸá</label>
                    @php $grade = request('grade','all'); @endphp
                    <select name="grade" class="filter-select">
                        <option value="all" {{ $grade === 'all' ? 'selected' : '' }}>ŸáŸÖŸá Ÿæÿß€åŸá‚ÄåŸáÿß</option>
                        <option value="7" {{ $grade === '7' ? 'selected' : '' }}>ŸáŸÅÿ™ŸÖ</option>
                        <option value="8" {{ $grade === '8' ? 'selected' : '' }}>Ÿáÿ¥ÿ™ŸÖ</option>
                        <option value="9" {{ $grade === '9' ? 'selected' : '' }}>ŸÜŸáŸÖ</option>
                        <option value="10" {{ $grade === '10' ? 'selected' : '' }}>ÿØŸáŸÖ</option>
                        <option value="11" {{ $grade === '11' ? 'selected' : '' }}>€åÿßÿ≤ÿØŸáŸÖ</option>
                        <option value="12" {{ $grade === '12' ? 'selected' : '' }}>ÿØŸàÿßÿ≤ÿØŸáŸÖ</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">Ÿàÿ∂ÿπ€åÿ™</label>
                    @php $status=request('status','all'); @endphp
                    <select name="status" class="filter-select">
                        <option value="all" {{ $status === 'all' ? 'selected' : '' }}>ŸáŸÖŸá</option>
                        <option value="active" {{ $status === 'active' ? 'selected' : '' }}>ŸÅÿπÿßŸÑ</option>
                        <option value="archived" {{ $status === 'archived' ? 'selected' : '' }}>ÿ¢ÿ±ÿ¥€åŸà</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">ŸÖÿ±ÿ™ÿ®‚Äåÿ≥ÿßÿ≤€å</label>
                    @php $sort=request('sort','latest'); @endphp
                    <select name="sort" class="filter-select">
                        <option value="latest" {{ $sort === 'latest' ? 'selected' : '' }}>ÿ¨ÿØ€åÿØÿ™ÿ±€åŸÜ</option>
                        <option value="oldest" {{ $sort === 'oldest' ? 'selected' : '' }}>ŸÇÿØ€åŸÖ€å‚Äåÿ™ÿ±€åŸÜ</option>
                        <option value="students" {{ $sort === 'students' ? 'selected' : '' }}>ÿ®€åÿ¥ÿ™ÿ±€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</option>
                        <option value="title_asc" {{ $sort === 'title_asc' ? 'selected' : '' }}>ŸÜÿßŸÖ A‚ÜíZ</option>
                        <option value="title_desc" {{ $sort === 'title_desc' ? 'selected' : '' }}>ŸÜÿßŸÖ Z‚ÜíA</option>
                    </select>
                </div>

                <div class="filter-buttons">
                    <button type="submit" class="btn-filter btn-filter-primary">
                        <i class="fas fa-sliders-h"></i>
                        ÿßÿπŸÖÿßŸÑ ŸÅ€åŸÑÿ™ÿ±
                    </button>
                    <a href="{{ route('teacher.classes.index') }}" class="btn-filter btn-filter-reset">
                        <i class="fas fa-times"></i>
                        ÿ≠ÿ∞ŸÅ ŸÅ€åŸÑÿ™ÿ±
                    </a>
                </div>
            </form>
        </div>

        {{-- ========== CLASSES LIST ========== --}}
        @php
            $classes = $classes ?? collect();
            $hasPaginator = method_exists($classes, 'total');
            $totalClasses = $hasPaginator ? $classes->total() : $classes->count();
        @endphp

        @if ($totalClasses == 0)
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-people-group"></i>
                </div>
                <h3 class="empty-title">ŸáŸÜŸàÿ≤ ⁄©ŸÑÿßÿ≥€å ŸÜÿ≥ÿßÿÆÿ™€å!</h3>
                <p class="empty-description">
                    ÿßŸàŸÑ€åŸÜ ⁄©ŸÑÿßÿ≥ ÿÆŸàÿØ ÿ±ÿß ÿß€åÿ¨ÿßÿØ ⁄©ŸÜ€åÿØ ÿ™ÿß ÿ®ÿ™ŸàÿßŸÜ€åÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ±ÿß ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸá Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥€å ÿ®ÿ±⁄Øÿ≤ÿßÿ± ⁄©ŸÜ€åÿØ.
                    Ÿæÿ≥ ÿßÿ≤ ŸÅÿπÿßŸÑ ÿ¥ÿØŸÜ ŸÖÿ≥€åÿ± ÿ≥ÿßÿÆÿ™ ⁄©ŸÑÿßÿ≥ÿå ÿßÿ≤ ÿØ⁄©ŸÖŸá ÿ≤€åÿ± ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ.
                </p>
                @if (\Illuminate\Support\Facades\Route::has('teacher.classes.create'))
                    <a href="{{ route('teacher.classes.create') }}" class="btn-hero btn-primary-grad"
                        style="display: inline-flex;">
                        <i class="fas fa-plus-circle"></i>
                        ÿß€åÿ¨ÿßÿØ ÿßŸàŸÑ€åŸÜ ⁄©ŸÑÿßÿ≥
                    </a>
                @endif
            </div>
        @else
            <div class="classes-grid">
                @foreach ($classes as $class)
                    @php
                        $studentsCount = $class->students_count ?? ($class->students->count() ?? 0);
                        $examsCount = $class->exams_count ?? 0;
                        $isActive = $class->is_active ?? true;
                        $gradeLabel = $class->grade ?? '‚Äî';
                        $code = $class->code ?? ($class->join_code ?? null);
                        $description = $class->description ?? null;
                    @endphp

                    <div class="class-card">
                        <div class="class-ribbon {{ $isActive ? 'ribbon-active' : 'ribbon-archived' }}">
                            <i class="fas {{ $isActive ? 'fa-check-circle' : 'fa-archive' }}"></i>
                            {{ $isActive ? 'ŸÅÿπÿßŸÑ' : 'ÿ¢ÿ±ÿ¥€åŸà' }}
                        </div>

                        <div class="class-header">
                            <div class="class-title">
                                <i class="fas fa-chalkboard-teacher"></i>
                                {{ $class->title ?? ($class->name ?? '⁄©ŸÑÿßÿ≥ ÿ®ÿØŸàŸÜ ŸÜÿßŸÖ') }}
                            </div>
                            <div class="class-subject">
                                {{ $class->subject ?? 'ÿπŸÖŸàŸÖ€å' }}
                            </div>
                        </div>

                        <div class="class-body">
                            @if ($description)
                                <div class="class-description">
                                    {{ \Illuminate\Support\Str::limit($description, 120) }}
                                </div>
                            @else
                                <div class="class-description" style="color: var(--light-gray);">
                                    <i class="fas fa-info-circle"></i>
                                    ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                                </div>
                            @endif

                            <div class="class-meta">
                                <div class="meta-item">
                                    <div class="meta-value">{{ $gradeLabel }}</div>
                                    <div class="meta-label">Ÿæÿß€åŸá ÿ™ÿ≠ÿµ€åŸÑ€å</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-value">{{ $studentsCount }}</div>
                                    <div class="meta-label">ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-value">{{ $examsCount }}</div>
                                    <div class="meta-label">ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                                </div>
                                <div class="meta-item">
                                    <div class="meta-value">
                                        <i class="fas fa-calendar-alt" style="color: var(--primary);"></i>
                                    </div>
                                    <div class="meta-label">ŸÖÿØ€åÿ±€åÿ™</div>
                                </div>
                            </div>

                            @if ($code)
                                <div class="class-code">
                                    <div class="code-label">⁄©ÿØ Ÿàÿ±ŸàÿØ ÿ®Ÿá ⁄©ŸÑÿßÿ≥:</div>
                                    <div class="code-value">{{ $code }}</div>
                                </div>
                            @endif
                        </div>

                        <div class="class-footer">
                            <div class="class-actions">
                                <a href="{{ route('teacher.exams.wizard.step1', ['class_id' => $class->id]) }}"
                                    class="btn-class-action btn-exam">
                                    <i class="fas fa-plus-circle"></i>
                                    ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ
                                </a>
                                <button class="btn-class-action btn-details"
                                    onclick="showClassDetails({{ $class->id }})">
                                    <i class="fas fa-eye"></i>
                                    ÿ¨ÿ≤ÿ¶€åÿßÿ™
                                </button>
                            </div>
                        </div>
                    </div>
                @endforeach
            </div>

            {{-- ========== PAGINATION ========== --}}
            @if (method_exists($classes, 'hasPages') && $classes->hasPages())
                <div class="pagination-container">
                    <ul class="pagination-custom">
                        {{-- Previous Page Link --}}
                        @if ($classes->onFirstPage())
                            <li class="page-item disabled">
                                <span class="page-link">
                                    <i class="fas fa-chevron-right"></i>
                                </span>
                            </li>
                        @else
                            <li class="page-item">
                                <a class="page-link" href="{{ $classes->previousPageUrl() }}" rel="prev">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            </li>
                        @endif

                        {{-- Pagination Elements --}}
                        @foreach ($classes->getUrlRange(1, $classes->lastPage()) as $page => $url)
                            @if ($page == $classes->currentPage())
                                <li class="page-item active">
                                    <span class="page-link">{{ $page }}</span>
                                </li>
                            @else
                                <li class="page-item">
                                    <a class="page-link" href="{{ $url }}">{{ $page }}</a>
                                </li>
                            @endif
                        @endforeach

                        {{-- Next Page Link --}}
                        @if ($classes->hasMorePages())
                            <li class="page-item">
                                <a class="page-link" href="{{ $classes->nextPageUrl() }}" rel="next">
                                    <i class="fas fa-chevron-left"></i>
                                </a>
                            </li>
                        @else
                            <li class="page-item disabled">
                                <span class="page-link">
                                    <i class="fas fa-chevron-left"></i>
                                </span>
                            </li>
                        @endif
                    </ul>
                </div>
            @endif
        @endif
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ÿà€åÿ®ÿ±Ÿá ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-hero, .btn-filter, .btn-class-action, .page-link, .class-card');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // ÿßŸÅ⁄©ÿ™ hover ÿ®ÿ±ÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß
            const classCards = document.querySelectorAll('.class-card');
            classCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                });
            });

            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ Ÿàÿ±ŸàÿØ ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß
            const animateCards = () => {
                const cards = document.querySelectorAll('.class-card');
                cards.forEach((card, i) => {
                    card.style.animationDelay = `${i * 0.1}s`;
                    card.style.animation = 'fadeIn 0.5s ease-out forwards';
                    card.style.opacity = '0';
                });
            };

            // ÿßÿ¨ÿ±ÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ÿ®ÿπÿØ ÿßÿ≤ ŸÑŸàÿØ ÿµŸÅÿ≠Ÿá
            setTimeout(animateCards, 300);

            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÅÿ±ŸÖ ŸÅ€åŸÑÿ™ÿ±
            const filterForm = document.querySelector('.filter-grid');
            if (filterForm) {
                filterForm.addEventListener('submit', function(e) {
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÿØÿ± ÿ≠ÿßŸÑ ÿ¨ÿ≥ÿ™ÿ¨Ÿà...';
                    submitBtn.disabled = true;

                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    }, 1500);
                });
            }

            // ŸÜŸÖÿß€åÿ¥ ÿ™ÿπÿØÿßÿØ ŸÜÿ™ÿß€åÿ¨ ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá
            const updateResultsCount = () => {
                const resultsCount = document.querySelectorAll('.class-card').length;
                const countElement = document.createElement('div');
                countElement.className = 'results-count';
                countElement.style.cssText = `
            background: var(--gradient-1);
            color: white;
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-weight: 900;
            font-size: 0.9rem;
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 8px;
        `;
                countElement.innerHTML = `<i class="fas fa-layer-group"></i> ${resultsCount} ⁄©ŸÑÿßÿ≥ €åÿßŸÅÿ™ ÿ¥ÿØ`;

                const existingCount = document.querySelector('.results-count');
                if (existingCount) existingCount.remove();

                if (resultsCount > 0) {
                    document.body.appendChild(countElement);

                    setTimeout(() => {
                        countElement.style.opacity = '0';
                        countElement.style.transform = 'translateY(20px)';
                        setTimeout(() => countElement.remove(), 300);
                    }, 3000);
                }
            };

            // ÿßÿ¨ÿ±ÿß€å ÿ¥ŸÖÿßÿ±ÿ¥ ŸÜÿ™ÿß€åÿ¨
            setTimeout(updateResultsCount, 500);
        });

        // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥
        function showClassDetails(classId) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        text-align: center;
        max-width: 400px;
        width: 90%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

            modal.innerHTML = `
        <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
            <i class="fas fa-chalkboard-teacher"></i>
        </div>
        <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥</h3>
        <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
            ÿµŸÅÿ≠Ÿá ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥ ÿ®Ÿá ÿ≤ŸàÿØ€å ÿØÿ± ÿØÿ≥ÿ™ÿ±ÿ≥ ÿÆŸàÿßŸáÿØ ÿ®ŸàÿØ.
            ÿØÿ± ÿß€åŸÜ ÿµŸÅÿ≠Ÿá ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜÿå ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß Ÿà ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥ ÿ±ÿß ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÜ€åÿØ.
        </p>
        <div style="display: flex; gap: 10px;">
            <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove();"
                    style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                ÿ®ÿßÿ¥Ÿá
            </button>
            <button onclick="window.location.href='{{ route('teacher.exams.wizard.step1') }}?class_id=' + ${classId};"
                    style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ
            </button>
        </div>
    `;

            document.body.appendChild(modal);

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
            document.body.appendChild(overlay);

            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }

            setTimeout(() => {
                if (document.body.contains(modal)) {
                    modal.remove();
                    overlay.remove();
                }
            }, 8000);
        }

        // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
        const style = document.createElement('style');
        style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 137. show.blade.php

**Path:** `resources/views/dashboard/teacher/classes/show.blade.php`  
**Size:** 20,845 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥')

@push('styles')
    <style>
        .hero {
            background: radial-gradient(1100px circle at 100% -20%, rgba(13, 110, 253, .16), transparent 60%), radial-gradient(900px circle at 0% 0%, rgba(32, 201, 151, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1.25rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08);
            position: relative;
            overflow: hidden
        }

        .hero-orb {
            position: absolute;
            inset: auto -90px -90px auto;
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(13, 110, 253, .18), transparent 60%);
            filter: blur(2px);
            animation: floaty 7s ease-in-out infinite
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0)
            }

            50% {
                transform: translateY(-10px) translateX(-8px)
            }
        }

        .panel {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .meta {
            display: flex;
            flex-wrap: wrap;
            gap: .5rem
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 800;
            font-size: .85rem;
            color: #475569
        }

        .badge-soft {
            background: rgba(13, 110, 253, .12);
            color: #0d6efd;
            font-weight: 800;
            border-radius: 999px
        }

        .badge-soft-success {
            background: rgba(25, 135, 84, .12);
            color: #198754;
            font-weight: 800;
            border-radius: 999px
        }

        .stat-card {
            background: #fff;
            border: 1px dashed #e2e8f0;
            border-radius: 1rem;
            padding: .9rem;
            display: flex;
            align-items: center;
            justify-content-between
        }

        .stat-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: linear-gradient(135deg, rgba(13, 110, 253, .12), rgba(13, 110, 253, .02));
            font-size: 1.25rem
        }

        .quick {
            display: flex;
            flex-direction: column;
            gap: .5rem
        }

        .quick a {
            border-radius: 1rem;
            padding: .8rem .9rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fff;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            text-decoration: none;
            color: inherit;
            transition: .2s
        }

        .quick a:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 28px rgba(18, 38, 63, .12)
        }

        .table thead th {
            background: #f8fafc;
            border-bottom: 0
        }

        .avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: #e9ecef;
            font-weight: 800
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- HERO HEADER --}}
        <div class="hero mb-4 fade-up">
            <div class="hero-orb"></div>

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <div class="d-flex align-items-center gap-2 mb-1">
                        <h1 class="h4 fw-bold mb-0"><i class="bi bi-people me-1 text-primary"></i> {{ $class->title }}</h1>
                        <span class="badge {{ $class->is_active ?? 1 ? 'badge-soft-success' : 'badge-soft' }} px-2 py-1">
                            {{ $class->is_active ?? 1 ? 'ŸÅÿπÿßŸÑ' : 'ÿ¢ÿ±ÿ¥€åŸà' }}
                        </span>
                    </div>
                    <div class="text-muted small">
                        <i class="bi bi-book me-1"></i> {{ $class->subject ?? 'ÿπŸÖŸàŸÖ€å' }}
                        <span class="mx-1">‚Ä¢</span>
                        <i class="bi bi-layers me-1"></i> Ÿæÿß€åŸá: {{ $class->grade ?? '‚Äî' }}
                    </div>
                    @if ($class->description)
                        <div class="text-muted mt-2">{{ $class->description }}</div>
                    @endif
                </div>

                <div class="d-flex flex-wrap gap-2">
                    <a href="{{ route('teacher.classes.edit', $class) }}"
                        class="btn btn-warning d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-pencil-square"></i> Ÿà€åÿ±ÿß€åÿ¥ ⁄©ŸÑÿßÿ≥
                    </a>
                    <a href="{{ route('teacher.classes.students', $class) }}"
                        class="btn btn-outline-success d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-person-video3"></i> ŸÖÿØ€åÿ±€åÿ™ ÿßÿπÿ∂ÿß
                    </a>
                    <a href="{{ route('teacher.exams.create', ['class_id' => $class->id]) }}"
                        class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-plus-circle"></i> ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±ÿß€å ⁄©ŸÑÿßÿ≥
                    </a>
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>
            </div>

            {{-- Join code strip --}}
            <div
                class="d-flex flex-wrap align-items-center justify-content-between gap-2 mt-3 p-2 px-3 bg-white rounded-3 shadow-sm">
                <div class="fw-semibold"><i class="bi bi-key me-1"></i> ⁄©ÿØ Ÿàÿ±ŸàÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ:</div>
                <div class="d-flex align-items-center gap-2">
                    <div class="fw-bold fs-5" id="joinCodeText">{{ $class->join_code }}</div>
                    <button class="btn btn-outline-primary btn-sm" id="copyBtn"><i class="bi bi-clipboard"></i>
                        ⁄©Ÿæ€å</button>
                    <button class="btn btn-outline-secondary btn-sm" id="regenBtn"><i class="bi bi-shuffle"></i> ÿ≥ÿßÿÆÿ™ ⁄©ÿØ
                        ÿ¨ÿØ€åÿØ</button>
                </div>
                <div class="text-muted small">ÿ®ÿπÿØ ÿßÿ≤ ÿ™ÿ∫€å€åÿ± ⁄©ÿØÿå ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ®ÿß€åÿØ ÿ®ÿß ⁄©ÿØ ÿ¨ÿØ€åÿØ Ÿàÿßÿ±ÿØ ÿ¥ŸàŸÜÿØ.</div>
            </div>
        </div>


        <div class="row g-3">

            {{-- Left column main --}}
            <div class="col-lg-8">

                {{-- Stats --}}
                <div class="panel p-3 mb-3 fade-up">
                    <div class="row g-2">
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div>
                                    <div class="text-muted small">ÿ™ÿπÿØÿßÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ</div>
                                    <div class="fs-4 fw-bold">{{ $class->students->count() }}</div>
                                </div>
                                <div class="stat-icon text-primary"><i class="bi bi-people"></i></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div>
                                    <div class="text-muted small">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥</div>
                                    <div class="fs-4 fw-bold">{{ $class->exams_count ?? 0 }}</div>
                                </div>
                                <div class="stat-icon text-info"
                                    style="background:linear-gradient(135deg,rgba(13,202,240,.16),rgba(13,202,240,.02))"><i
                                        class="bi bi-ui-checks-grid"></i></div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="stat-card">
                                <div>
                                    <div class="text-muted small">ÿ™ÿßÿ±€åÿÆ ÿß€åÿ¨ÿßÿØ</div>
                                    <div class="fw-bold">{{ $class->created_at?->format('Y/m/d') }}</div>
                                </div>
                                <div class="stat-icon text-success"
                                    style="background:linear-gradient(135deg,rgba(25,135,84,.16),rgba(25,135,84,.02))"><i
                                        class="bi bi-calendar2-check"></i></div>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- Students preview list --}}
                <div class="panel p-3 fade-up">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <div class="fw-bold"><i class="bi bi-person-video3 me-1 text-success"></i> ÿßÿπÿ∂ÿß€å ⁄©ŸÑÿßÿ≥</div>
                        <a href="{{ route('teacher.classes.students', $class) }}" class="small text-decoration-none">ŸÖÿØ€åÿ±€åÿ™
                            ⁄©ÿßŸÖŸÑ <i class="bi bi-arrow-left ms-1"></i></a>
                    </div>

                    @if ($class->students->count())
                        <div class="table-responsive">
                            <table class="table align-middle mb-0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</th>
                                        <th>ÿß€åŸÖ€åŸÑ</th>
                                        <th>ÿ™ÿßÿ±€åÿÆ ÿπÿ∂Ÿà€åÿ™</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($class->students->take(8) as $i => $student)
                                        <tr>
                                            <td>{{ $i + 1 }}</td>
                                            <td class="d-flex align-items-center gap-2">
                                                <div class="avatar">{{ mb_substr($student->name ?? '‚Äî', 0, 1) }}</div>
                                                <div>
                                                    <div class="fw-semibold">{{ $student->name ?? '‚Äî' }}</div>
                                                    <div class="text-muted small">
                                                        {{ $student->username ?? ($student->phone ?? '') }}</div>
                                                </div>
                                            </td>
                                            <td>{{ $student->email ?? '‚Äî' }}</td>
                                            <td class="small text-muted">
                                                {{ optional($student->pivot)->created_at?->format('Y/m/d') ?? '‚Äî' }}</td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="text-center text-muted small py-4">
                            <div class="fs-3 text-success mb-2"><i class="bi bi-person-x"></i></div>
                            ŸáŸÜŸàÿ≤ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤€å ÿπÿ∂Ÿà ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                        </div>
                    @endif
                </div>
                {{-- Exams of this class   --}}
                <div class="card shadow-sm border-0 mt-3">
                    <div class="card-header bg-white fw-bold d-flex justify-content-between align-items-center">
                        <span>ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥</span>

                        <a href="{{ route('teacher.exams.create', ['classroom_id' => $class->id]) }}"
                            class="btn btn-primary btn-sm">
                            <i class="bi bi-plus-circle"></i> ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥
                        </a>
                    </div>

                    <div class="card-body">
                        @if ($class->exams->count() === 0)
                            <div class="alert alert-warning small mb-0">
                                ŸáŸÜŸàÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ÿ≥ÿßÿÆÿ™Ÿá ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                            </div>
                        @else
                            <div class="table-responsive">
                                <table class="table table-sm align-middle">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>ÿπŸÜŸàÿßŸÜ</th>
                                            <th>ŸÖÿØÿ™</th>
                                            <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                            <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach ($class->exams as $exam)
                                            <tr>
                                                <td>{{ $loop->iteration }}</td>
                                                <td class="fw-semibold">{{ $exam->title }}</td>
                                                <td class="text-muted small">
                                                    {{ $exam->duration ?? ($exam->duration_minutes ?? '‚Äî') }} ÿØŸÇ€åŸÇŸá
                                                </td>
                                                <td>
                                                    @if ($exam->is_active)
                                                        <span class="badge bg-success">ŸÅÿπÿßŸÑ</span>
                                                    @else
                                                        <span class="badge bg-secondary">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                                                    @endif
                                                </td>
                                                <td class="text-end">
                                                    <a href="{{ route('teacher.exams.show', $exam) }}"
                                                        class="btn btn-outline-primary btn-sm">
                                                        ÿ¨ÿ≤ÿ¶€åÿßÿ™
                                                    </a>
                                                    <a href="{{ route('teacher.exams.edit', $exam) }}"
                                                        class="btn btn-outline-secondary btn-sm">
                                                        Ÿà€åÿ±ÿß€åÿ¥
                                                    </a>
                                                </td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>
                            </div>
                        @endif
                    </div>
                </div>

            </div>


            {{-- Right column quick actions --}}
            <div class="col-lg-4">
                <div class="panel p-3 fade-up">
                    <div class="fw-bold mb-2"><i class="bi bi-lightning me-1 text-warning"></i> ÿπŸÖŸÑ€åÿßÿ™ ÿ≥ÿ±€åÿπ</div>
                    <div class="quick">
                        <a href="{{ route('teacher.classes.edit', $class) }}">
                            <span class="d-flex align-items-center gap-2"><i class="bi bi-pencil-square text-warning"></i>
                                Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™</span>
                            <i class="bi bi-chevron-left text-muted"></i>
                        </a>
                        <a href="{{ route('teacher.classes.students', $class) }}">
                            <span class="d-flex align-items-center gap-2"><i class="bi bi-person-plus text-success"></i>
                                ÿßŸÅÿ≤ŸàÿØŸÜ/ÿ≠ÿ∞ŸÅ ÿßÿπÿ∂ÿß</span>
                            <i class="bi bi-chevron-left text-muted"></i>
                        </a>
                        <a href="{{ route('teacher.exams.create', ['class_id' => $class->id]) }}">
                            <span class="d-flex align-items-center gap-2"><i class="bi bi-plus-circle text-primary"></i>
                                ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ</span>
                            <i class="bi bi-chevron-left text-muted"></i>
                        </a>
                    </div>

                    <hr>
                    <div class="small text-muted">ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿßÿ≤ ⁄©ÿØ Ÿàÿ±ŸàÿØ ÿ®ÿ±ÿß€å ÿπÿ∂Ÿà€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€å.</div>
                </div>

                {{-- Danger zone --}}
                <div class="panel p-3 mt-3 fade-up"
                    style="border:1px solid rgba(220,53,69,.2);background:rgba(220,53,69,.04)">
                    <div class="fw-bold text-danger mb-1"><i class="bi bi-exclamation-triangle me-1"></i> ŸÜÿßÿ≠€åŸá ÿÆÿ∑ÿ±</div>
                    <div class="small text-muted mb-2">ÿ≠ÿ∞ŸÅ ⁄©ŸÑÿßÿ≥ ÿ®ÿßÿπÿ´ ÿ≠ÿ∞ŸÅ ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ®ÿß ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÖ€å‚Äåÿ¥ŸàÿØ.</div>
                    <form action="{{ route('teacher.classes.destroy', $class) }}" method="POST">
                        @csrf @method('DELETE')
                        <button class="btn btn-outline-danger w-100" onclick="return confirm('⁄©ŸÑÿßÿ≥ ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü')">
                            ÿ≠ÿ∞ŸÅ ⁄©ŸÑÿßÿ≥
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const copyBtn = document.getElementById('copyBtn');
                const regenBtn = document.getElementById('regenBtn');
                const joinCodeText = document.getElementById('joinCodeText');

                copyBtn?.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(joinCodeText.textContent.trim());
                        copyBtn.classList.remove('btn-outline-primary');
                        copyBtn.classList.add('btn-success');
                        copyBtn.innerHTML = '<i class="bi bi-check2"></i> ⁄©Ÿæ€å ÿ¥ÿØ';
                        setTimeout(() => {
                            copyBtn.classList.add('btn-outline-primary');
                            copyBtn.classList.remove('btn-success');
                            copyBtn.innerHTML = '<i class="bi bi-clipboard"></i> ⁄©Ÿæ€å';
                        }, 1200);
                    } catch (e) {
                        alert('⁄©Ÿæ€å ÿßŸÜÿ¨ÿßŸÖ ŸÜÿ¥ÿØ');
                    }
                });

                regenBtn?.addEventListener('click', () => {
                    // ŸÅŸÇÿ∑ UIÿõ ⁄©ÿØ ŸàÿßŸÇÿπ€å ÿ±ÿß ÿ®ÿß€åÿØ ÿØÿ± backend ÿπŸàÿ∂ ⁄©ŸÜ€å ÿß⁄Øÿ± ÿÆŸàÿßÿ≥ÿ™€å
                    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
                    let c = '';
                    for (let i = 0; i < 6; i++) c += chars[Math.floor(Math.random() * chars.length)];
                    joinCodeText.textContent = c;
                    regenBtn.classList.add('btn-success');
                    regenBtn.innerHTML = '<i class="bi bi-check2"></i> ÿ≥ÿßÿÆÿ™Ÿá ÿ¥ÿØ';
                    setTimeout(() => {
                        regenBtn.classList.remove('btn-success');
                        regenBtn.innerHTML = '<i class="bi bi-shuffle"></i> ÿ≥ÿßÿÆÿ™ ⁄©ÿØ ÿ¨ÿØ€åÿØ';
                    }, 1200);
                });
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 138. students.blade.php

**Path:** `resources/views/dashboard/teacher/classes/students.blade.php`  
**Size:** 14,643 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿßÿπÿ∂ÿß€å ⁄©ŸÑÿßÿ≥')

@push('styles')
    <style>
        .hero {
            background: radial-gradient(1100px circle at 100% -20%, rgba(13, 110, 253, .16), transparent 60%), radial-gradient(900px circle at 0% 0%, rgba(32, 201, 151, .12), transparent 55%), linear-gradient(180deg, #fff, #f8fafc);
            border-radius: 1.5rem;
            padding: 1.25rem;
            box-shadow: 0 10px 30px rgba(18, 38, 63, .08);
            position: relative;
            overflow: hidden
        }

        .hero-orb {
            position: absolute;
            inset: auto -90px -90px auto;
            width: 240px;
            height: 240px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(13, 110, 253, .18), transparent 60%);
            filter: blur(2px);
            animation: floaty 7s ease-in-out infinite
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0)
            }

            50% {
                transform: translateY(-10px) translateX(-8px)
            }
        }

        .panel {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            display: grid;
            place-items: center;
            background: #e9ecef;
            font-weight: 800
        }

        .table thead th {
            background: #f8fafc;
            border-bottom: 0
        }

        .meta-pill {
            background: #f8fafc;
            border: 1px solid #eef2f7;
            border-radius: 999px;
            padding: .25rem .6rem;
            display: inline-flex;
            align-items: center;
            gap: .35rem;
            font-weight: 800;
            font-size: .85rem;
            color: #475569
        }

        .badge-soft {
            background: rgba(13, 110, 253, .12);
            color: #0d6efd;
            font-weight: 800;
            border-radius: 999px
        }

        .badge-soft-success {
            background: rgba(25, 135, 84, .12);
            color: #198754;
            font-weight: 800;
            border-radius: 999px
        }

        .empty-wrap {
            background: #fff;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            padding: 2rem;
            text-align: center
        }

        .empty-illus {
            width: 84px;
            height: 84px;
            display: grid;
            place-items: center;
            margin: 0 auto 1rem;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(25, 135, 84, .12), rgba(25, 135, 84, .02));
            font-size: 2rem;
            color: #198754
        }

        .invite-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .copy-btn {
            border-radius: .8rem
        }

        .danger-row {
            background: rgba(220, 53, 69, .05)
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- HERO --}}
        <div class="hero mb-4 fade-up">
            <div class="hero-orb"></div>

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3 text-end">
                <div>
                    <h1 class="h4 fw-bold mb-1"><i class="bi bi-person-video3 me-1 text-success"></i> ŸÖÿØ€åÿ±€åÿ™ ÿßÿπÿ∂ÿß€å ⁄©ŸÑÿßÿ≥</h1>
                    <div class="text-muted">
                        {{ $class->title }}
                        <span class="mx-1">‚Ä¢</span>
                        Ÿæÿß€åŸá {{ $class->grade ?? '‚Äî' }}
                    </div>
                </div>

                <div class="d-flex flex-wrap gap-2">
                    <a href="{{ route('teacher.classes.show', $class) }}"
                        class="btn btn-outline-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-eye"></i> ÿ¨ÿ≤ÿ¶€åÿßÿ™ ⁄©ŸÑÿßÿ≥
                    </a>
                    <a href="{{ route('teacher.classes.edit', $class) }}"
                        class="btn btn-warning d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-pencil-square"></i> Ÿà€åÿ±ÿß€åÿ¥ ⁄©ŸÑÿßÿ≥
                    </a>
                    <a href="{{ route('teacher.classes.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>
            </div>
        </div>

        @if (session('success'))
            <div class="alert alert-success fade-up"><i class="bi bi-check-circle-fill me-1"></i>{{ session('success') }}
            </div>
        @endif
        @if (session('error'))
            <div class="alert alert-danger fade-up"><i class="bi bi-x-circle-fill me-1"></i>{{ session('error') }}</div>
        @endif

        <div class="row g-3">

            {{-- LEFT: members list --}}
            <div class="col-lg-8">
                <div class="panel p-3 fade-up">

                    <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
                        <div class="fw-bold">
                            <i class="bi bi-people me-1 text-success"></i>
                            ÿßÿπÿ∂ÿß€å ŸÅÿπŸÑ€å ({{ $class->students->count() }})
                        </div>

                        <div class="d-flex gap-2">
                            <div class="input-group">
                                <span class="input-group-text bg-white border-0"><i class="bi bi-search"></i></span>
                                <input type="text" id="searchInput" class="form-control input-soft"
                                    placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿØÿ± ÿßÿπÿ∂ÿß...">
                            </div>
                        </div>
                    </div>

                    @if ($class->students->count())
                        <div class="table-responsive">
                            <table class="table align-middle mb-0" id="studentsTable">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</th>
                                        <th>ÿß€åŸÖ€åŸÑ/ŸÜÿßŸÖ‚Äå⁄©ÿßÿ±ÿ®ÿ±€å</th>
                                        <th>ÿπÿ∂Ÿà€åÿ™</th>
                                        <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($class->students as $i => $student)
                                        <tr>
                                            <td>{{ $i + 1 }}</td>
                                            <td class="d-flex align-items-center gap-2">
                                                <div class="avatar">{{ mb_substr($student->name ?? '‚Äî', 0, 1) }}</div>
                                                <div>
                                                    <div class="fw-semibold name-col">{{ $student->name ?? '‚Äî' }}</div>
                                                    <div class="text-muted small">
                                                        {{ $student->username ?? ($student->phone ?? '') }}</div>
                                                </div>
                                            </td>
                                            <td class="email-col">{{ $student->email ?? '‚Äî' }}</td>
                                            <td class="small text-muted">
                                                {{ optional($student->pivot)->created_at?->format('Y/m/d') ?? '‚Äî' }}</td>
                                            <td class="text-end">
                                                <form
                                                    action="{{ route('teacher.classes.students.remove', [$class, $student]) }}"
                                                    method="POST" class="d-inline">
                                                    @csrf @method('DELETE')
                                                    <button class="btn btn-sm btn-outline-danger"
                                                        onclick="return confirm('ÿß€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿßÿ≤ ⁄©ŸÑÿßÿ≥ ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü')">
                                                        <i class="bi bi-person-dash"></i>
                                                        ÿ≠ÿ∞ŸÅ
                                                    </button>
                                                </form>
                                            </td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    @else
                        <div class="empty-wrap">
                            <div class="empty-illus"><i class="bi bi-person-x"></i></div>
                            <h6 class="fw-bold mb-1">ŸáŸÜŸàÿ≤ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤€å ÿπÿ∂Ÿà ÿß€åŸÜ ⁄©ŸÑÿßÿ≥ ŸÜ€åÿ≥ÿ™.</h6>
                            <div class="text-muted small">ÿßÿ≤ ÿ∑ÿ±€åŸÇ ⁄©ÿØ Ÿàÿ±ŸàÿØ €åÿß ÿßŸÅÿ≤ŸàÿØŸÜ ÿØÿ≥ÿ™€åÿå ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß ÿ±ÿß ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ.</div>
                        </div>
                    @endif
                </div>
            </div>


            {{-- RIGHT: invite + add manual --}}
            <div class="col-lg-4">

                {{-- Invite by code --}}
                <div class="invite-card p-3 mb-3 fade-up">
                    <div class="fw-bold mb-2"><i class="bi bi-key me-1 text-primary"></i> ÿØÿπŸàÿ™ ÿ®ÿß ⁄©ÿØ Ÿàÿ±ŸàÿØ</div>
                    <div class="small text-muted mb-2">ÿß€åŸÜ ⁄©ÿØ ÿ±ÿß ÿØÿ± ⁄Øÿ±ŸàŸá €åÿß ⁄©ŸÑÿßÿ≥ ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜ.</div>
                    <div class="input-group">
                        <input type="text" class="form-control input-soft" id="joinCode"
                            value="{{ $class->join_code }}" readonly>
                        <button class="btn btn-outline-primary copy-btn" id="copyBtn"><i
                                class="bi bi-clipboard"></i></button>
                    </div>
                    <div class="d-flex flex-wrap gap-2 mt-2">
                        <span class="meta-pill"><i class="bi bi-broadcast"></i>
                            {{ $class->is_active ?? 1 ? 'ŸÅÿπÿßŸÑ' : 'ÿ¢ÿ±ÿ¥€åŸà' }}</span>
                        <span class="meta-pill"><i class="bi bi-people"></i> {{ $class->students->count() }} ÿπÿ∂Ÿà</span>
                    </div>
                </div>

                {{-- Manual add --}}
                <div class="panel p-3 fade-up">
                    <div class="fw-bold mb-2"><i class="bi bi-person-plus me-1 text-success"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ÿØÿ≥ÿ™€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                    </div>
                    <div class="small text-muted mb-2">ÿß€åŸÖ€åŸÑ €åÿß ŸÜÿßŸÖ‚Äå⁄©ÿßÿ±ÿ®ÿ±€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ.</div>

                    <form action="{{ route('teacher.classes.students.add', $class) }}" method="POST" class="d-grid gap-2">
                        @csrf
                        <input type="text" name="student" class="form-control input-soft"
                            placeholder="email / username / phone" required>
                        <button
                            class="btn btn-success d-inline-flex align-items-center justify-content-center gap-2 shadow-sm">
                            <i class="bi bi-plus-circle"></i>
                            ÿßŸÅÿ≤ŸàÿØŸÜ ÿ®Ÿá ⁄©ŸÑÿßÿ≥
                        </button>
                    </form>

                    <hr>
                    <div class="small text-muted">
                        ÿß⁄Øÿ± ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ Ÿæ€åÿØÿß ŸÜÿ¥ÿØÿå ŸÖÿ∑ŸÖÿ¶ŸÜ ÿ¥Ÿà ŸÇÿ®ŸÑÿßŸã ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ ⁄©ÿ±ÿØŸá ÿ®ÿßÿ¥ÿØ.
                    </div>
                </div>

            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Copy join code
                const copyBtn = document.getElementById('copyBtn');
                const joinCode = document.getElementById('joinCode');
                copyBtn?.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(joinCode.value);
                        copyBtn.classList.remove('btn-outline-primary');
                        copyBtn.classList.add('btn-success');
                        copyBtn.innerHTML = '<i class="bi bi-check2"></i>';
                        setTimeout(() => {
                            copyBtn.classList.add('btn-outline-primary');
                            copyBtn.classList.remove('btn-success');
                            copyBtn.innerHTML = '<i class="bi bi-clipboard"></i>';
                        }, 1200);
                    } catch (e) {
                        alert('⁄©Ÿæ€å ÿßŸÜÿ¨ÿßŸÖ ŸÜÿ¥ÿØ');
                    }
                });

                // Simple client-side search
                const searchInput = document.getElementById('searchInput');
                const table = document.getElementById('studentsTable');
                searchInput?.addEventListener('input', () => {
                    const q = searchInput.value.toLowerCase();
                    table?.querySelectorAll('tbody tr').forEach(tr => {
                        const name = tr.querySelector('.name-col')?.textContent.toLowerCase() || '';
                        const email = tr.querySelector('.email-col')?.textContent.toLowerCase() || '';
                        tr.style.display = (name.includes(q) || email.includes(q)) ? '' : 'none';
                    });
                });
            });
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 139. create.blade.php

**Path:** `resources/views/dashboard/teacher/exams/create.blade.php`  
**Size:** 33,448 bytes  
**Modified:** 2025-12-06 22:23:19

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ - ŸÅŸÜ€å Ÿà ÿ≠ÿ±ŸÅŸá‚Äåÿß€å')

@push('styles')
    <link rel="stylesheet" href="{{ asset('assets/css/exam-wizard.css') }}">
@endpush

@section('content')
    <div class="create-exam-container">

        {{-- ========== HEADER ========== --}}
        <div class="page-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>
                        <span
                            style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
                        -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ - ŸÅŸÜ€å Ÿà ÿ≠ÿ±ŸÅŸá‚Äåÿß€å
                        </span> üîß
                    </h1>
                    <p class="header-subtitle">
                        ÿ¢ÿ≤ŸÖŸàŸÜ ÿÆŸàÿØ ÿ±ÿß ÿ®ÿ±ÿß€å ŸáŸÜÿ±ÿ¨Ÿà€åÿßŸÜ ŸÅŸÜ€å Ÿà ÿ≠ÿ±ŸÅŸá‚Äåÿß€å ÿ®Ÿá ÿµŸàÿ±ÿ™ ŸÖÿ±ÿ≠ŸÑŸá‚Äåÿß€å ÿß€åÿ¨ÿßÿØ ⁄©ŸÜ€åÿØ.
                    </p>
                </div>
                <a href="{{ route('teacher.exams.index') }}" class="btn-back">
                    <i class="fas fa-arrow-right"></i>
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>
            </div>
        </div>

        {{-- ========== PROGRESS BAR ========== --}}
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 14%;"></div>
            </div>
            <div class="progress-steps">
                @php
                    $steps = [
                        1 => 'ŸÜŸàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ',
                        2 => 'Ÿæÿß€åŸá ÿ™ÿ≠ÿµ€åŸÑ€å',
                        3 => 'ÿ¥ÿßÿÆŸá ÿ™ÿ≠ÿµ€åŸÑ€å',
                        4 => 'ÿ≤ŸÖ€åŸÜŸá ŸÅŸÜ€å',
                        5 => 'ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá',
                        6 => 'ÿØÿ≥ÿ™Ÿá ÿØÿ±ÿ≥€å',
                        7 => 'ÿßŸÜÿ™ÿÆÿßÿ® ÿØÿ±ÿ≥',
                        8 => 'ÿ¨ÿ≤ÿ¶€åÿßÿ™',
                    ];
                @endphp
                @foreach ($steps as $num => $name)
                    <div class="step-item @if ($num == 1) active @endif" data-step="{{ $num }}">
                        <div class="step-number">{{ $num }}</div>
                        <div class="step-name">{{ $name }}</div>
                    </div>
                @endforeach
            </div>
        </div>

        {{-- ========== FORM CONTAINER ========== --}}
        <div class="form-container">
            <form method="POST" action="{{ route('teacher.exams.store') }}" id="examForm"
                onsubmit="return validateFinalStep()">
                @csrf

                {{-- Hidden Inputs (UUID expected by controller) --}}
                <input type="hidden" name="exam_type" id="examType" value="">
                <input type="hidden" name="classroom_id" id="classroomId" value="{{ $selectedClassroomId ?? '' }}">

                <input type="hidden" name="section_id" id="sectionId" value="">
                <input type="hidden" name="grade_id" id="gradeId" value="">
                <input type="hidden" name="branch_id" id="branchId" value="">
                <input type="hidden" name="field_id" id="fieldId" value="">
                <input type="hidden" name="subfield_id" id="subfieldId" value="">
                <input type="hidden" name="subject_type_id" id="subjectTypeId" value="">
                <input type="hidden" name="subjects" id="subjectsInput" value="">

                {{-- ===== STEP 1: EXAM TYPE ===== --}}
                <div class="form-section active" id="step1">
                    <div class="section-header">
                        <div class="section-icon">üéØ</div>
                        <h2 class="section-title">ŸÜŸàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                        <p class="section-description">
                            ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÜ€åÿßÿ≤ ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿÆŸàÿØÿå €å⁄©€å ÿßÿ≤ ⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÖÿß€å€åÿØ.
                        </p>
                    </div>

                    <div class="exam-type-grid">
                        <div class="type-card" data-type="public" onclick="selectExamType('public')">
                            <div class="type-icon">üåê</div>
                            <div class="type-title">ÿ¢ÿ≤ŸÖŸàŸÜ ÿπŸÖŸàŸÖ€å</div>
                            <p class="type-description">ÿ®ÿ±ÿß€å ÿ™ŸÖÿßŸÖ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ŸÇÿßÿ®ŸÑ ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿßÿ≥ÿ™. ŸÜ€åÿßÿ≤€å ÿ®Ÿá ÿπÿ∂Ÿà€åÿ™ ÿØÿ± ⁄©ŸÑÿßÿ≥ ŸÜÿØÿßÿ±ÿØ.
                            </p>
                            <div class="type-badge">ÿπŸÖŸàŸÖ€å</div>
                        </div>

                        <div class="type-card" data-type="class_single" onclick="selectExamType('class_single')">
                            <div class="type-icon">üìö</div>
                            <div class="type-title">⁄©ŸÑÿßÿ≥€å ÿ™⁄© ÿØÿ±ÿ≥</div>
                            <p class="type-description">ÿ®ÿ±ÿß€å €å⁄© ⁄©ŸÑÿßÿ≥ ÿÆÿßÿµ Ÿà ŸÅŸÇÿ∑ €å⁄© ÿØÿ±ÿ≥ ŸÖÿ¥ÿÆÿµ.</p>
                            <div class="type-badge">ÿ™ÿÆÿµÿµ€å</div>
                        </div>

                        <div class="type-card" data-type="class_comprehensive"
                            onclick="selectExamType('class_comprehensive')">
                            <div class="type-icon">üéì</div>
                            <div class="type-title">⁄©ŸÑÿßÿ≥€å ÿ¨ÿßŸÖÿπ</div>
                            <p class="type-description">ÿ®ÿ±ÿß€å €å⁄© ⁄©ŸÑÿßÿ≥ ÿ¥ÿßŸÖŸÑ ÿ™ŸÖÿßŸÖ ÿØÿ±Ÿàÿ≥ Ÿæÿß€åŸá.</p>
                            <div class="type-badge">ÿ¨ÿßŸÖÿπ</div>
                        </div>
                    </div>

                    {{-- ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÑÿßÿ≥ --}}
                    <div id="classroomSelectionSection" style="display: none; margin-top: 30px;">
                        <div class="section-header" style="margin-bottom: 20px;">
                            <h3 class="section-title">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÑÿßÿ≥</h3>
                            <p class="section-description">
                                ŸÑÿ∑ŸÅÿßŸã ⁄©ŸÑÿßÿ≥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ €åÿß €å⁄© ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ ÿß€åÿ¨ÿßÿØ ŸÜŸÖÿß€å€åÿØ.
                            </p>
                        </div>

                        <div id="existingClassroomsContainer" class="selection-grid"
                            style="grid-template-columns: repeat(2, 1fr);">
                            <div class="loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                                ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß...
                            </div>
                        </div>

                        <div id="createNewClassContainer" style="margin-top: 25px; text-align: center;">
                            <div class="type-card" onclick="createNewClassroom()"
                                style="max-width: 400px; margin: 0 auto; cursor: pointer;
                            background: linear-gradient(135deg, rgba(0, 206, 209, 0.1), rgba(70, 130, 180, 0.1));">
                                <div class="type-icon">‚ûï</div>
                                <div class="type-title">ÿß€åÿ¨ÿßÿØ ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ</div>
                                <p class="type-description">ŸáŸÜŸàÿ≤ ⁄©ŸÑÿßÿ≥€å ŸÜÿØÿßÿ±€åÿØÿü €å⁄© ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ ÿß€åÿ¨ÿßÿØ ⁄©ŸÜ€åÿØ.</p>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- ===== STEP 2: GRADE (dynamic) ===== --}}
                <div class="form-section" id="step2">
                    <div class="section-header">
                        <div class="section-icon">üìä</div>
                        <h2 class="section-title">Ÿæÿß€åŸá ÿ™ÿ≠ÿµ€åŸÑ€å ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                        <p class="section-description">Ÿæÿß€åŸá ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ®ÿ±ÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ ÿÆŸàÿØ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÖÿß€å€åÿØ.</p>
                    </div>
                    <div class="selection-grid" id="gradesGrid" style="grid-template-columns: repeat(3, 1fr);">
                        {{-- ajax --}}
                    </div>
                </div>

                {{-- ===== STEP 3: BRANCH (dynamic) ===== --}}
                <div class="form-section" id="step3">
                    <div class="section-header">
                        <div class="section-icon">üéì</div>
                        <h2 class="section-title">ÿ¥ÿßÿÆŸá ÿ™ÿ≠ÿµ€åŸÑ€å ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                    </div>
                    <div class="selection-grid" id="branchesGrid" style="grid-template-columns: repeat(2, 1fr);"></div>
                </div>

                {{-- ===== STEP 4: FIELD (dynamic) ===== --}}
                <div class="form-section" id="step4">
                    <div class="section-header">
                        <div class="section-icon">üè≠</div>
                        <h2 class="section-title">ÿ≤ŸÖ€åŸÜŸá ŸÅŸÜ€å ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                    </div>
                    <div class="selection-grid" id="fieldsGrid" style="grid-template-columns: repeat(2, 1fr);"></div>
                </div>

                {{-- ===== STEP 5: SUBFIELD (dynamic) ===== --}}
                <div class="form-section" id="step5">
                    <div class="section-header">
                        <div class="section-icon">üî¨</div>
                        <h2 class="section-title">ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                    </div>
                    <div class="selection-grid" id="subfieldGrid" style="grid-template-columns: repeat(2, 1fr);"></div>
                </div>

                {{-- ===== STEP 6: SUBJECT TYPE (dynamic) ===== --}}
                <div class="form-section" id="step6">
                    <div class="section-header">
                        <div class="section-icon">üìö</div>
                        <h2 class="section-title">ÿØÿ≥ÿ™Ÿá ÿØÿ±ÿ≥€å ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                    </div>
                    <div class="selection-grid" id="subjectTypesGrid" style="grid-template-columns: repeat(3, 1fr);">
                    </div>

                    <div class="coefficient-settings" id="coefficientSettings"></div>
                </div>

                {{-- ===== STEP 7: SUBJECTS ===== --}}
                <div class="form-section" id="step7">
                    <div class="section-header">
                        <div class="section-icon">üìñ</div>
                        <h2 class="section-title">ÿØÿ±ÿ≥‚ÄåŸáÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</h2>
                    </div>

                    <div class="subject-selection">
                        <div id="subjectsContainer">
                            <div class="loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                                ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿØÿ±Ÿàÿ≥...
                            </div>
                        </div>
                    </div>
                </div>

                {{-- ===== STEP 8: DETAILS ===== --}}
                <div class="form-section" id="step8">
                    <div class="section-header">
                        <div class="section-icon">üìã</div>
                        <h2 class="section-title">ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ±ÿß ÿ™⁄©ŸÖ€åŸÑ ⁄©ŸÜ€åÿØ</h2>
                    </div>

                    <div class="preview-section">
                        <div class="preview-title">
                            <i class="fas fa-eye"></i>
                            Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ
                        </div>
                        <div class="preview-grid">
                            <div class="preview-item">
                                <div class="preview-label">ŸÜŸàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                                <div class="preview-value" id="previewExamType">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">Ÿæÿß€åŸá ÿ™ÿ≠ÿµ€åŸÑ€å</div>
                                <div class="preview-value" id="previewGrade">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">ÿ¥ÿßÿÆŸá ÿ™ÿ≠ÿµ€åŸÑ€å</div>
                                <div class="preview-value" id="previewBranch">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">ÿ≤ŸÖ€åŸÜŸá ŸÅŸÜ€å</div>
                                <div class="preview-value" id="previewField">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá</div>
                                <div class="preview-value" id="previewSubfield">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">ÿØÿ≥ÿ™Ÿá ÿØÿ±ÿ≥€å</div>
                                <div class="preview-value" id="previewSubjectType">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">ÿ™ÿπÿØÿßÿØ ÿØÿ±Ÿàÿ≥</div>
                                <div class="preview-value" id="previewSubjectsCount">--</div>
                            </div>
                            <div class="preview-item">
                                <div class="preview-label">⁄©ŸÑ ÿ≥ŸàÿßŸÑÿßÿ™</div>
                                <div class="preview-value" id="previewTotalQuestions">--</div>
                            </div>
                        </div>
                    </div>

                    <div class="details-form">
                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-heading"></i>ÿπŸÜŸàÿßŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ</label>
                            <input type="text" name="title" class="form-input" id="examTitle"
                                placeholder="ŸÖÿ´ÿßŸÑ: ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©ÿßÿ±⁄ØÿßŸá ÿ®ÿ±ŸÇ ÿµŸÜÿπÿ™€å - Ÿæÿß€åŸá €åÿßÿ≤ÿØŸáŸÖ" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-clock"></i>ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ (ÿØŸÇ€åŸÇŸá)</label>
                            <input type="number" name="duration" class="form-input" value="90" min="15"
                                max="300" step="5" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label"><i class="fas fa-align-left"></i>ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ</label>
                            <textarea name="description" class="form-textarea" rows="4" placeholder="ŸáÿØŸÅ ÿ¢ÿ≤ŸÖŸàŸÜÿå ŸÖŸÜÿßÿ®ÿπ ŸÖÿ∑ÿßŸÑÿπÿßÿ™€åÿå ŸÜ⁄©ÿßÿ™ ..."></textarea>
                        </div>

                        <div class="form-group">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="is_active" id="activeCheck"
                                    value="1" checked>
                                <label class="form-check-label" for="activeCheck">ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ŸÑÿßŸÅÿßÿµŸÑŸá ŸÅÿπÿßŸÑ ÿ¥ŸàÿØ</label>
                            </div>
                        </div>
                    </div>
                </div>

                {{-- NAV BUTTONS --}}
                <div class="nav-buttons">
                    <button type="button" class="btn-nav btn-prev" onclick="prevStep()" style="display:none;">
                        <i class="fas fa-arrow-right"></i> ŸÖÿ±ÿ≠ŸÑŸá ŸÇÿ®ŸÑ
                    </button>
                    <button type="button" class="btn-nav btn-next" onclick="nextStep()">
                        ŸÖÿ±ÿ≠ŸÑŸá ÿ®ÿπÿØ <i class="fas fa-arrow-left"></i>
                    </button>
                    <button type="submit" class="btn-nav btn-submit" style="display:none;">
                        <i class="fas fa-check"></i> ÿß€åÿ¨ÿßÿØ ÿ¢ÿ≤ŸÖŸàŸÜ
                    </button>
                </div>

            </form>
        </div>
    </div>
@endsection

@push('scripts')
    {{-- SweetAlert2 --}}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    {{-- ‚úÖ createNewClassroom ÿ≠ŸÅÿ∏ ÿ¥ÿØŸá --}}
    <script>
        async function createNewClassroom() {

            const endpoints = {
                sections: "/dashboard/teacher/exams/data/sections",
                grades: "/dashboard/teacher/exams/data/grades",
                branches: "/dashboard/teacher/exams/data/branches",
                fields: "/dashboard/teacher/exams/data/fields",
                subfields: "/dashboard/teacher/exams/data/subfields",
                subjects: "/dashboard/teacher/exams/data/subjects",
            };

            const getJSON = async (url) => {
                const res = await fetch(url, {
                    headers: {
                        "Accept": "application/json",
                        "X-Requested-With": "XMLHttpRequest"
                    }
                });
                if (!res.ok) throw new Error("network");
                return res.json();
            };

            const opt = (items, placeholder = "-- ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ --", labelKey = "name_fa") => {
                let html = `<option value="">${placeholder}</option>`;
                items.forEach(i => {
                    html +=
                        `<option value="${i.id}" data-name="${i[labelKey] || i.title_fa || ''}">${i[labelKey] || i.title_fa}</option>`;
                });
                return html;
            };

            // ŸÇÿØŸÖ ÿßŸàŸÑ: ŸÑŸàÿØ ŸÖŸÇÿ∑ÿπ
            let sections = [];
            try {
                const s = await getJSON(endpoints.sections);
                sections = s.sections || [];
            } catch (e) {
                Swal.fire("ÿÆÿ∑ÿß", "ÿØÿ±€åÿßŸÅÿ™ ŸÖŸÇÿßÿ∑ÿπ ŸÖŸÖ⁄©ŸÜ ŸÜ€åÿ≥ÿ™", "error");
                return;
            }

            Swal.fire({
                title: 'ÿß€åÿ¨ÿßÿØ ⁄©ŸÑÿßÿ≥ ÿ¨ÿØ€åÿØ',
                html: `
        <div style="text-align:right">

            <label class="mb-2 fw-bold d-block">üéì ŸÖŸÇÿ∑ÿπ</label>
            <select id="cc_section" class="swal2-input">${opt(sections, "ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ")}</select>

            <label class="mb-2 fw-bold d-block mt-3">üìä Ÿæÿß€åŸá</label>
            <select id="cc_grade" class="swal2-input" disabled>
                <option value="">ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">üß© ÿ¥ÿßÿÆŸá / ÿ±ÿ¥ÿ™Ÿá</label>
            <select id="cc_branch" class="swal2-input" disabled>
                <option value="">ÿßÿ®ÿ™ÿØÿß Ÿæÿß€åŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">üè≠ ÿ≤ŸÖ€åŸÜŸá ÿ¢ŸÖŸàÿ≤ÿ¥€å</label>
            <select id="cc_field" class="swal2-input" disabled>
                <option value="">ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">üî¨ ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá</label>
            <select id="cc_subfield" class="swal2-input" disabled>
                <option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤ŸÖ€åŸÜŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">üìñ ÿØÿ±ÿ≥</label>
            <select id="cc_subject" class="swal2-input" disabled>
                <option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>
            </select>

            <label class="mb-2 fw-bold d-block mt-3">üè∑Ô∏è ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥</label>
            <input type="text" id="cc_title" class="swal2-input" placeholder="ŸÖÿ´ÿßŸÑ: ⁄©ŸÑÿßÿ≥ €åÿßÿ≤ÿØŸáŸÖ ÿ¥ÿ®⁄©Ÿá - Ÿæÿß€å⁄ØÿßŸá ÿØÿßÿØŸá">

        </div>
        `,
                showCancelButton: true,
                confirmButtonText: "ÿß€åÿ¨ÿßÿØ ⁄©ŸÑÿßÿ≥",
                cancelButtonText: "ÿßŸÜÿµÿ±ÿßŸÅ",
                reverseButtons: true,
                width: 650,
                didOpen: () => {

                    const elSection = document.getElementById("cc_section");
                    const elGrade = document.getElementById("cc_grade");
                    const elBranch = document.getElementById("cc_branch");
                    const elField = document.getElementById("cc_field");
                    const elSubfield = document.getElementById("cc_subfield");
                    const elSubject = document.getElementById("cc_subject");

                    // ====== ŸÖŸÇÿ∑ÿπ ‚Üí Ÿæÿß€åŸá‚ÄåŸáÿß ======
                    elSection.addEventListener("change", async () => {
                        const sectionId = elSection.value;

                        elGrade.innerHTML = `<option>ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</option>`;
                        elGrade.disabled = true;

                        elBranch.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß Ÿæÿß€åŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elBranch.disabled = true;

                        elField.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elField.disabled = true;

                        elSubfield.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤ŸÖ€åŸÜŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubject.disabled = true;

                        if (!sectionId) {
                            elGrade.innerHTML =
                                `<option value="">ÿßÿ®ÿ™ÿØÿß ŸÖŸÇÿ∑ÿπ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                            return;
                        }

                        const g = await getJSON(`${endpoints.grades}?section_id=${sectionId}`);
                        elGrade.innerHTML = opt(g.grades || [], "Ÿæÿß€åŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ");
                        elGrade.disabled = false;
                    });

                    // ====== Ÿæÿß€åŸá ‚Üí ÿ¥ÿßÿÆŸá‚ÄåŸáÿß ======
                    elGrade.addEventListener("change", async () => {
                        const sectionId = elSection.value;

                        elBranch.innerHTML = `<option>ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</option>`;
                        elBranch.disabled = true;

                        elField.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elField.disabled = true;

                        elSubfield.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤ŸÖ€åŸÜŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubject.disabled = true;

                        if (!sectionId) return;

                        const b = await getJSON(
                        `${endpoints.branches}?section_id=${sectionId}`);
                        elBranch.innerHTML = opt(b.branches || [], "ÿ¥ÿßÿÆŸá/ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ");
                        elBranch.disabled = false;
                    });

                    // ====== ÿ¥ÿßÿÆŸá ‚Üí ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß ======
                    elBranch.addEventListener("change", async () => {
                        const branchId = elBranch.value;

                        elField.innerHTML = `<option>ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</option>`;
                        elField.disabled = true;

                        elSubfield.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤ŸÖ€åŸÜŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubject.disabled = true;

                        if (!branchId) {
                            elField.innerHTML =
                                `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ¥ÿßÿÆŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                            return;
                        }

                        const f = await getJSON(`${endpoints.fields}?branch_id=${branchId}`);
                        elField.innerHTML = opt(f.fields || [], "ÿ≤ŸÖ€åŸÜŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ");
                        elField.disabled = false;
                    });

                    // ====== ÿ≤ŸÖ€åŸÜŸá ‚Üí ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ======
                    elField.addEventListener("change", async () => {
                        const fieldId = elField.value;

                        elSubfield.innerHTML = `<option>ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</option>`;
                        elSubfield.disabled = true;

                        elSubject.innerHTML =
                            `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                        elSubject.disabled = true;

                        if (!fieldId) {
                            elSubfield.innerHTML =
                                `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤ŸÖ€åŸÜŸá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                            return;
                        }

                        const sf = await getJSON(`${endpoints.subfields}?field_id=${fieldId}`);
                        elSubfield.innerHTML = opt(sf.subfields || [],
                        "ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ");
                        elSubfield.disabled = false;
                    });

                    // ====== ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ‚Üí ÿØÿ±Ÿàÿ≥ ======
                    elSubfield.addEventListener("change", async () => {
                        const gradeId = elGrade.value;
                        const branchId = elBranch.value;
                        const fieldId = elField.value;
                        const subfieldId = elSubfield.value;

                        elSubject.innerHTML = `<option>ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...</option>`;
                        elSubject.disabled = true;

                        if (!subfieldId) {
                            elSubject.innerHTML =
                                `<option value="">ÿßÿ®ÿ™ÿØÿß ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ</option>`;
                            return;
                        }

                        const params = new URLSearchParams();
                        if (gradeId) params.append("grade_id", gradeId);
                        if (branchId) params.append("branch_id", branchId);
                        if (fieldId) params.append("field_id", fieldId);
                        if (subfieldId) params.append("subfield_id", subfieldId);

                        const sub = await getJSON(`${endpoints.subjects}?${params.toString()}`);
                        elSubject.innerHTML = opt(sub.subjects || [], "ÿØÿ±ÿ≥ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ",
                            "title_fa");
                        elSubject.disabled = false;
                    });

                },
                preConfirm: () => {
                    const sectionId = document.getElementById("cc_section").value;
                    const gradeId = document.getElementById("cc_grade").value;
                    const branchId = document.getElementById("cc_branch").value;
                    const fieldId = document.getElementById("cc_field").value;
                    const subfieldId = document.getElementById("cc_subfield").value;
                    const subjectId = document.getElementById("cc_subject").value;
                    const title = document.getElementById("cc_title").value.trim();

                    if (!sectionId || !gradeId || !branchId || !fieldId || !subfieldId || !subjectId) {
                        Swal.showValidationMessage("ŸÑÿ∑ŸÅÿßŸã ŸáŸÖŸá ŸÖŸàÿßÿ±ÿØ ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ.");
                        return false;
                    }
                    if (!title) {
                        Swal.showValidationMessage("ŸÜÿßŸÖ ⁄©ŸÑÿßÿ≥ ÿßŸÑÿ≤ÿßŸÖ€å ÿßÿ≥ÿ™.");
                        return false;
                    }

                    const getName = (selectId) => {
                        const el = document.getElementById(selectId);
                        return el.options[el.selectedIndex]?.dataset?.name || el.options[el
                            .selectedIndex]?.text || "";
                    };

                    return {
                        section_id: sectionId,
                        grade_id: gradeId,
                        branch_id: branchId,
                        field_id: fieldId,
                        subfield_id: subfieldId,
                        subject_id: subjectId,

                        section_name: getName("cc_section"),
                        grade_name: getName("cc_grade"),
                        branch_name: getName("cc_branch"),
                        field_name: getName("cc_field"),
                        subfield_name: getName("cc_subfield"),
                        subject_name: getName("cc_subject"),

                        title
                    };
                }
            }).then(async (result) => {
                if (!result.isConfirmed) return;

                const data = result.value;

                Swal.fire({
                    title: "ÿØÿ± ÿ≠ÿßŸÑ ÿß€åÿ¨ÿßÿØ ⁄©ŸÑÿßÿ≥...",
                    allowOutsideClick: false,
                    didOpen: () => Swal.showLoading()
                });

                try {
                    const fd = new FormData();
                    fd.append("title", data.title);
                    fd.append("section_id", data.section_id);
                    fd.append("grade_id", data.grade_id);
                    fd.append("branch_id", data.branch_id);
                    fd.append("field_id", data.field_id);
                    fd.append("subfield_id", data.subfield_id);
                    fd.append("subject_id", data.subject_id);
                    fd.append("is_active", 1);

                    // metadata ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ ÿÆŸàÿßŸÜÿß
                    fd.append("metadata", JSON.stringify({
                        section_name: data.section_name,
                        grade_name: data.grade_name,
                        branch_name: data.branch_name,
                        field_name: data.field_name,
                        subfield_name: data.subfield_name,
                        subject_name: data.subject_name
                    }));

                    const res = await fetch("{{ route('teacher.classes.store') }}", {
                        method: "POST",
                        headers: {
                            "X-CSRF-TOKEN": "{{ csrf_token() }}",
                            "X-Requested-With": "XMLHttpRequest",
                            "Accept": "application/json"
                        },
                        body: fd
                    });

                    const responseData = await res.json();
                    Swal.close();

                    if (responseData.success) {
                        Swal.fire("‚úÖ ŸÖŸàŸÅŸÇ€åÿ™", "⁄©ŸÑÿßÿ≥ ÿß€åÿ¨ÿßÿØ ÿ¥ÿØ", "success").then(() => {
                            loadExistingClassrooms();

                            if (responseData.classroom) {
                                setTimeout(() => {
                                    selectClassroom({
                                            target: document.querySelector(
                                                `[data-classroom-id="${responseData.classroom.id}"]`
                                                )
                                        },
                                        responseData.classroom.id,
                                        responseData.classroom.title
                                    );
                                }, 300);
                            }
                        });
                    } else {
                        Swal.fire("‚ùå ÿÆÿ∑ÿß", responseData.message || "ÿÆÿ∑ÿß ÿØÿ± ÿß€åÿ¨ÿßÿØ ⁄©ŸÑÿßÿ≥", "error");
                    }

                } catch (e) {
                    console.error(e);
                    Swal.close();
                    Swal.fire("‚ùå ÿÆÿ∑ÿß€å ÿ¥ÿ®⁄©Ÿá", "ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿß ÿ≥ÿ±Ÿàÿ± ŸÖÿ¥⁄©ŸÑ ÿØÿßÿ±ÿØ.", "error");
                }
            });
        }
    </script>


    {{-- ‚úÖ exam wizard main js --}}
    <script src="{{ asset('assets/js/exam-wizard.js') }}"></script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 140. edit.blade.php

**Path:** `resources/views/dashboard/teacher/exams/edit.blade.php`  
**Size:** 18,154 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿà€åÿ±ÿß€åÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ')

@push('styles')
    <style>
        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .step-pill {
            border-radius: 999px;
            padding: .35rem .8rem;
            font-weight: 700;
            font-size: .85rem;
            background: #f8fafc;
            color: #334155;
            display: inline-flex;
            align-items: center;
            gap: .4rem
        }

        .step-pill .dot {
            width: 9px;
            height: 9px;
            border-radius: 50%;
            background: #16a34a;
            box-shadow: 0 0 0 4px rgba(22, 163, 74, .12)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .hint {
            font-size: .85rem;
            color: #6c757d
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .preview-badge {
            background: rgba(16, 185, 129, .12);
            color: #059669;
            font-weight: 800
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }

        .floating-help {
            position: sticky;
            top: 90px
        }

        .danger-zone {
            border: 1px solid rgba(220, 53, 69, .2);
            background: rgba(220, 53, 69, .04);
            border-radius: 1rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2 fade-up">
            <div>
                <h4 class="fw-bold mb-1"><i class="bi bi-pencil-square me-1 text-warning"></i> Ÿà€åÿ±ÿß€åÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ</h4>
                <div class="text-muted small">
                    ÿ™ÿ∫€å€åÿ±ÿßÿ™ ÿ±ÿß ÿßÿπŸÖÿßŸÑ ⁄©ŸÜ Ÿà ÿ∞ÿÆ€åÿ±Ÿá ÿ®ÿ≤ŸÜ. Ÿàÿ∂ÿπ€åÿ™ ÿßŸÜÿ™ÿ¥ÿßÿ± Ÿà ÿ™ÿßÿ±€åÿÆ ÿ±ÿß ŸáŸÖ ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿ¢ŸæÿØ€åÿ™ ⁄©ŸÜ€å.
                </div>
            </div>
            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                    class="btn btn-outline-primary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-question-circle"></i>
                    ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß
                </a>
                <a href="{{ route('teacher.exams.index') }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i>
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
            </div>
        </div>

        {{-- Validation errors --}}
        @if ($errors->any())
            <div class="alert alert-danger fade-up">
                <div class="fw-semibold mb-2"><i class="bi bi-exclamation-triangle-fill me-1"></i> ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å
                    ⁄©ŸÜ:</div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        @if (session('success'))
            <div class="alert alert-success fade-up">
                <i class="bi bi-check-circle-fill me-1"></i>
                {{ session('success') }}
            </div>
        @endif

        <div class="row g-3">

            {{-- Form column --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4 fade-up">

                    <div class="d-flex flex-wrap align-items-center justify-content-between mb-3 gap-2">
                        <div class="step-pill"><span class="dot"></span> Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                        <div class="hint">* ŸÅ€åŸÑÿØŸáÿß€å ÿ≥ÿ™ÿßÿ±Ÿá‚ÄåÿØÿßÿ± ÿ∂ÿ±Ÿàÿ±€å‚ÄåÿßŸÜÿØ.</div>
                    </div>

                    <form action="{{ route('teacher.exams.update', $exam) }}" method="POST" class="row g-3" novalidate>
                        @csrf
                        @method('PUT')

                        {{-- Title --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold">ÿπŸÜŸàÿßŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ <span class="text-danger">*</span></label>
                            <input type="text" name="title" class="form-control input-soft"
                                placeholder="ŸÖÿ´ŸÑÿßŸã: ÿ¢ÿ≤ŸÖŸàŸÜ ŸÅÿµŸÑ €± ÿ±€åÿßÿ∂€å" value="{{ old('title', $exam->title) }}" required>
                        </div>
                        {{-- ‚úÖ NEW: Scope + Classroom --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold d-block">ŸÜŸàÿπ ÿ¢ÿ≤ŸÖŸàŸÜ <span
                                    class="text-danger">*</span></label>

                            @php $scopeVal = old('scope', $exam->scope ?? 'classroom'); @endphp

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="scope" id="editScopeClassroom"
                                    value="classroom" {{ $scopeVal === 'classroom' ? 'checked' : '' }}>
                                <label class="form-check-label" for="editScopeClassroom">⁄©ŸÑÿßÿ≥€å</label>
                            </div>

                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="scope" id="editScopeFree"
                                    value="free" {{ $scopeVal === 'free' ? 'checked' : '' }}>
                                <label class="form-check-label" for="editScopeFree">ÿ¢ÿ≤ÿßÿØ</label>
                            </div>

                            <div class="hint mt-1">ÿß⁄Øÿ± ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¢ÿ≤ÿßÿØ ÿ®ÿßÿ¥ÿØÿå ÿ®Ÿá Ÿá€å⁄Ü ⁄©ŸÑÿßÿ≥€å ŸàÿµŸÑ ŸÜ€åÿ≥ÿ™.</div>
                        </div>

                        <div class="col-md-6" id="editClassroomBox">
                            <label class="form-label fw-semibold">⁄©ŸÑÿßÿ≥ ŸÖÿ±ÿ®Ÿàÿ∑Ÿá <span class="text-danger">*</span></label>
                            <select name="classroom_id" class="form-select input-soft">
                                <option value="">ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÑÿßÿ≥...</option>
                                @foreach ($classrooms as $c)
                                    <option value="{{ $c->id }}"
                                        {{ old('classroom_id', $exam->classroom_id) == $c->id ? 'selected' : '' }}>
                                        {{ $c->title ?? $c->name }}
                                    </option>
                                @endforeach
                            </select>
                        </div>

                        {{-- Subject & Level --}}
                        <div class="col-md-6">
                            <label class="form-label fw-semibold">ÿØÿ±ÿ≥ / ŸÖŸàÿ∂Ÿàÿπ <span class="text-danger">*</span></label>
                            <select name="subject" class="form-select input-soft" required>
                                <option value="" disabled>ÿßŸÜÿ™ÿÆÿßÿ® ÿØÿ±ÿ≥</option>
                                @foreach ($subjects ?? [] as $s)
                                    <option value="{{ $s }}"
                                        {{ old('subject', $exam->subject) === $s ? 'selected' : '' }}>{{ $s }}
                                    </option>
                                @endforeach
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label fw-semibold">ÿ≥ÿ∑ÿ≠ ÿ¢ÿ≤ŸÖŸàŸÜ <span class="text-danger">*</span></label>
                            <select name="level" class="form-select input-soft" required>
                                @php $lvl = old('level', $exam->level); @endphp
                                <option value="taghviyati" {{ $lvl === 'taghviyati' ? 'selected' : '' }}>ÿ™ŸÇŸà€åÿ™€å</option>
                                <option value="konkur" {{ $lvl === 'konkur' ? 'selected' : '' }}>⁄©ŸÜ⁄©Ÿàÿ±</option>
                                <option value="olympiad" {{ $lvl === 'olympiad' ? 'selected' : '' }}>ÿßŸÑŸÖŸæ€åÿßÿØ</option>
                            </select>
                        </div>

                        {{-- Duration & Start time --}}
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">ŸÖÿØÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ (ÿØŸÇ€åŸÇŸá) <span
                                    class="text-danger">*</span></label>
                            <input type="number" min="1" name="duration" class="form-control input-soft"
                                value="{{ old('duration', $exam->duration) }}" required>
                        </div>
                        <div class="col-md-8">
                            <label class="form-label fw-semibold">ÿ™ÿßÿ±€åÿÆ Ÿà ÿ≤ŸÖÿßŸÜ ÿ¥ÿ±Ÿàÿπ <span
                                    class="text-danger">*</span></label>
                            <input type="datetime-local" name="start_at" class="form-control input-soft"
                                value="{{ old('start_at', optional($exam->start_at)->format('Y-m-d\TH:i')) }}" required>
                            <div class="hint mt-1">ÿ™ÿßÿ±€åÿÆ/ÿ≤ŸÖÿßŸÜ ÿ±ÿß ÿ®ÿ±ÿß€å ŸáŸÖÿßŸáŸÜ⁄Ø€å ÿ®ÿ±⁄Øÿ≤ÿßÿ±€å ÿ™ŸÜÿ∏€åŸÖ ⁄©ŸÜ.</div>
                        </div>

                        {{-- Description --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™</label>
                            <textarea name="description" rows="4" class="form-control input-soft"
                                placeholder="ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ⁄©Ÿàÿ™ÿßŸá ÿØÿ±ÿ®ÿßÿ±Ÿá ŸáÿØŸÅ ÿ¢ÿ≤ŸÖŸàŸÜ...">{{ old('description', $exam->description) }}</textarea>
                        </div>

                        {{-- Publish toggle --}}
                        <div class="col-12">
                            @php $pub = old('is_published', $exam->is_published); @endphp
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="publishSwitch"
                                    name="is_published" value="1" {{ $pub ? 'checked' : '' }}>
                                <label class="form-check-label fw-semibold" for="publishSwitch">ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖŸÜÿ™ÿ¥ÿ± ÿ®ÿßÿ¥ÿØ</label>
                            </div>
                            <div class="hint mt-1">ÿØÿ± ÿµŸàÿ±ÿ™ ÿßŸÜÿ™ÿ¥ÿßÿ±ÿå ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤Ÿáÿß ŸÇÿßÿ®ŸÑ ŸÖÿ¥ÿßŸáÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.</div>
                        </div>

                        {{-- Actions --}}
                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="submit" class="btn btn-primary btn-wizard shadow-sm">
                                <i class="bi bi-save2"></i>
                                ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
                            </button>
                            <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                                class="btn btn-outline-primary btn-wizard shadow-sm">
                                <i class="bi bi-question-circle"></i>
                                ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß
                            </a>
                        </div>

                    </form>

                    {{-- Danger zone (optional delete here too) --}}
                    <div class="danger-zone p-3 mt-4">
                        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
                            <div>
                                <div class="fw-bold text-danger"><i class="bi bi-trash3 me-1"></i> ÿ≠ÿ∞ŸÅ ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                                <div class="small text-muted">ÿß€åŸÜ ÿπŸÖŸÑ€åÿßÿ™ ÿ∫€åÿ±ŸÇÿßÿ®ŸÑ ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿßÿ≥ÿ™.</div>
                            </div>
                            <form action="{{ route('teacher.exams.destroy', $exam) }}" method="POST">
                                @csrf @method('DELETE')
                                <button class="btn btn-outline-danger btn-wizard"
                                    onclick="return confirm('ÿ¢€åÿß ÿßÿ≤ ÿ≠ÿ∞ŸÅ ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØÿü')">
                                    ÿ≠ÿ∞ŸÅ ŸÇÿ∑ÿπ€å
                                </button>
                            </form>
                        </div>
                    </div>

                </div>
            </div>

            {{-- Preview / tips column --}}
            <div class="col-lg-4">
                <div class="floating-help fade-up">

                    <div class="preview-card p-3 mb-3">
                        <div class="d-flex align-items-center justify-content-between mb-2">
                            <div class="fw-bold"><i class="bi bi-eye me-1"></i> Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ÿ≥ÿ±€åÿπ</div>
                            <span class="badge preview-badge">Live</span>
                        </div>
                        <div class="small text-muted mb-2">ÿ®ÿß ÿ™ÿ∫€å€åÿ± ŸÅÿ±ŸÖÿå ÿß€åŸÜ ⁄©ÿßÿ±ÿ™ ÿ¢ŸæÿØ€åÿ™ ŸÖ€å‚Äåÿ¥ŸàÿØ.</div>

                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold" id="pvTitle">{{ $exam->title }}</div>
                            <div class="text-muted small mt-1" id="pvMeta">{{ $exam->level }} ‚Ä¢ {{ $exam->subject }}
                                ‚Ä¢ {{ $exam->duration }} ÿØŸÇ€åŸÇŸá</div>
                            <div class="text-muted small mt-2" id="pvStart">ÿ¥ÿ±Ÿàÿπ:
                                {{ optional($exam->start_at)->format('Y/m/d H:i') }}</div>
                            <div class="mt-2">
                                @if ($exam->is_published)
                                    <span class="badge bg-success"><i class="bi bi-broadcast-pin me-1"></i> ŸÖŸÜÿ™ÿ¥ÿ±
                                        ÿ¥ÿØŸá</span>
                                @else
                                    <span class="badge bg-secondary"><i class="bi bi-pencil-square me-1"></i>
                                        Ÿæ€åÿ¥‚ÄåŸÜŸà€åÿ≥</span>
                                @endif
                            </div>
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> Ÿæ€åÿ¥ŸÜŸáÿßÿØŸáÿß€å ÿ®Ÿáÿ®ŸàÿØ</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>ŸÇÿ®ŸÑ ÿßÿ≤ ÿßŸÜÿ™ÿ¥ÿßÿ±ÿå ÿ≠ÿØÿßŸÇŸÑ €µ ÿ≥ÿ§ÿßŸÑ ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ.</li>
                            <li>ÿß⁄Øÿ± ÿ≤ŸÖÿßŸÜ ÿ®ÿ±⁄Øÿ≤ÿßÿ±€å ÿ™ÿ∫€å€åÿ± ⁄©ÿ±ÿØÿå ÿßÿ∑ŸÑÿßÿπ€åŸá ÿ®ŸÅÿ±ÿ≥ÿ™.</li>
                            <li>ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€å ÿ®ÿπÿØÿßŸã ŸÖÿØÿ™ Ÿà ÿ≥ÿ∑ÿ≠ ÿ±ÿß ÿßÿµŸÑÿßÿ≠ ⁄©ŸÜ€å.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>

    @push('scripts')
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const title = document.querySelector('input[name="title"]');
                const subject = document.querySelector('select[name="subject"]');
                const level = document.querySelector('select[name="level"]');
                const duration = document.querySelector('input[name="duration"]');
                const startAt = document.querySelector('input[name="start_at"]');

                const pvTitle = document.getElementById('pvTitle');
                const pvMeta = document.getElementById('pvMeta');
                const pvStart = document.getElementById('pvStart');

                function updatePreview() {
                    if (pvTitle) pvTitle.textContent = title?.value?.trim() || 'ÿπŸÜŸàÿßŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ';
                    const s = subject?.value || 'ÿØÿ±ÿ≥';
                    const l = level?.value || 'ÿ≥ÿ∑ÿ≠';
                    const d = duration?.value || '‚Äî';
                    if (pvMeta) pvMeta.textContent = `${l} ‚Ä¢ ${s} ‚Ä¢ ${d} ÿØŸÇ€åŸÇŸá`;
                    if (pvStart) pvStart.textContent = startAt?.value ? `ÿ¥ÿ±Ÿàÿπ: ${startAt.value.replace('T',' ')}` :
                        'ÿ≤ŸÖÿßŸÜ ÿ¥ÿ±Ÿàÿπ';
                }

                [title, subject, level, duration, startAt].forEach(el => el?.addEventListener('input', updatePreview));
                updatePreview();
            });
            // ‚úÖ NEW: toggle classroom box in edit
            const editScopeFree = document.getElementById('editScopeFree');
            const editScopeClassroom = document.getElementById('editScopeClassroom');
            const editClassroomBox = document.getElementById('editClassroomBox');
            const editClassroomSelect = editClassroomBox?.querySelector('select[name="classroom_id"]');

            function toggleEditClassroom() {
                const isFree = editScopeFree?.checked;
                if (editClassroomBox) editClassroomBox.style.display = isFree ? 'none' : 'block';
                if (editClassroomSelect) editClassroomSelect.required = !isFree;
            }

            editScopeFree?.addEventListener('change', toggleEditClassroom);
            editScopeClassroom?.addEventListener('change', toggleEditClassroom);
            toggleEditClassroom();
        </script>
    @endpush
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 141. index.blade.php

**Path:** `resources/views/dashboard/teacher/exams/index.blade.php`  
**Size:** 30,791 bytes  
**Modified:** 2025-12-06 22:02:49

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß')

@push('styles')
    <style>
        /* ÿ™ŸÖ ⁄©ÿßŸÖŸÑ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .exams-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* ========== HEADER ========== */
        .page-header {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px 30px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 30px;
            border: 2px solid rgba(123, 104, 238, 0.08);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .header-title h1 {
            font-weight: 900;
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-title h1::before {
            content: '';
            width: 8px;
            height: 40px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .header-subtitle {
            color: var(--gray);
            font-size: 1.05rem;
            line-height: 1.8;
            max-width: 600px;
        }

        .btn-create-exam {
            padding: 15px 28px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--gradient-1);
            color: white;
            border: none;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn-create-exam:active {
            transform: scale(0.97);
        }

        .btn-create-exam:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
        }

        .btn-create-exam::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-create-exam:hover::before {
            left: 100%;
        }

        /* ========== FILTER SECTION ========== */
        .filter-section {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 25px 30px;
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            border: 2px solid rgba(123, 104, 238, 0.08);
            animation: slideInLeft 0.5s ease-out;
        }

        .filter-title {
            font-weight: 900;
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .filter-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .filter-form {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: end;
        }

        @media (max-width: 768px) {
            .filter-form {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: block;
        }

        .form-select-custom {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 18px center;
            background-size: 16px;
            padding-left: 45px;
        }

        .form-select-custom:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .btn-filter {
            padding: 14px 28px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 1rem;
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            white-space: nowrap;
        }

        .btn-filter:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* ========== EXAMS TABLE ========== */
        .exams-table-container {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 0;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(123, 104, 238, 0.08);
            overflow: hidden;
            animation: fadeIn 0.6s ease-out;
            animation-delay: 0.1s;
            animation-fill-mode: both;
        }

        .table-header {
            padding: 25px 30px;
            border-bottom: 2px solid var(--light-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0;
        }

        .table-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .exams-count {
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .exams-table {
            width: 100%;
            border-collapse: collapse;
        }

        .exams-table thead {
            background: linear-gradient(90deg, rgba(123, 104, 238, 0.05), rgba(255, 107, 157, 0.05));
        }

        .exams-table th {
            padding: 20px 25px;
            text-align: right;
            font-weight: 900;
            color: var(--dark);
            font-size: 0.95rem;
            border-bottom: 2px solid var(--light-gray);
            white-space: nowrap;
        }

        .exams-table tbody tr {
            transition: all 0.3s;
            border-bottom: 1px solid var(--light-gray);
        }

        .exams-table tbody tr:last-child {
            border-bottom: none;
        }

        .exams-table tbody tr:hover {
            background: var(--primary-light);
            transform: translateX(-5px);
        }

        .exams-table td {
            padding: 20px 25px;
            vertical-align: middle;
            font-weight: 700;
            color: var(--dark);
        }

        .exam-title-cell {
            font-weight: 900 !important;
            font-size: 1.05rem;
        }

        .exam-classroom {
            color: var(--gray);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .exam-duration {
            color: var(--dark);
            font-weight: 900;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .exam-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 900;
            white-space: nowrap;
        }

        .status-active {
            background: rgba(0, 212, 170, 0.15);
            color: #00D4AA;
        }

        .status-inactive {
            background: rgba(138, 141, 155, 0.15);
            color: var(--gray);
        }

        .exam-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .btn-action {
            padding: 10px 18px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            transition: all 0.3s;
            border: 2px solid transparent;
            min-width: 90px;
            justify-content: center;
        }

        .btn-action:active {
            transform: scale(0.95);
        }

        .btn-details {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-details:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        .btn-edit {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-edit:hover {
            background: var(--light-gray);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        /* ========== EMPTY STATE ========== */
        .empty-state {
            padding: 60px 30px;
            text-align: center;
            animation: fadeIn 0.6s ease-out;
        }

        .empty-icon {
            font-size: 5rem;
            color: var(--light-gray);
            margin-bottom: 25px;
            opacity: 0.7;
        }

        .empty-title {
            font-weight: 900;
            font-size: 1.5rem;
            color: var(--dark);
            margin-bottom: 15px;
        }

        .empty-description {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.7;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        /* ========== ALERTS ========== */
        .alert-success-custom {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.1), rgba(0, 212, 170, 0.05));
            border: 2px solid rgba(0, 212, 170, 0.2);
            border-radius: var(--radius-lg);
            padding: 20px 25px;
            color: var(--dark);
            font-weight: 700;
            margin-bottom: 30px;
            animation: slideInRight 0.5s ease-out;
            position: relative;
            overflow: hidden;
        }

        .alert-success-custom::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.08), transparent);
            border-radius: 0 var(--radius-lg) 0 0;
        }

        .alert-success-custom i {
            color: #00D4AA;
            font-size: 1.3rem;
            margin-left: 10px;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 992px) {
            .exams-table {
                display: block;
                overflow-x: auto;
            }

            .exams-table thead {
                display: none;
            }

            .exams-table tbody tr {
                display: block;
                margin-bottom: 20px;
                border: 2px solid var(--light-gray);
                border-radius: var(--radius-lg);
                padding: 20px;
            }

            .exams-table td {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 12px 0;
                border-bottom: 1px dashed var(--light-gray);
            }

            .exams-table td:last-child {
                border-bottom: none;
                padding-top: 20px;
                justify-content: flex-end;
            }

            .exams-table td::before {
                content: attr(data-label);
                font-weight: 900;
                color: var(--gray);
                font-size: 0.9rem;
                min-width: 100px;
                text-align: left;
            }

            .exam-actions {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 768px) {
            .exams-container {
                padding: 15px 10px 60px;
            }

            .page-header {
                padding: 20px;
            }

            .header-title h1 {
                font-size: 1.5rem;
            }

            .btn-create-exam {
                width: 100%;
                justify-content: center;
            }

            .filter-section {
                padding: 20px;
            }

            .table-header {
                padding: 20px;
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-icon {
                font-size: 4rem;
            }
        }

        @media (max-width: 480px) {
            .btn-action {
                min-width: auto;
                padding: 8px 12px;
                font-size: 0.8rem;
            }

            .exam-status {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .btn-create-exam,
        .btn-filter,
        .btn-action {
            min-height: 44px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="exams-container">
        {{-- ========== PAGE HEADER ========== --}}
        <div class="page-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>
                        <span
                            style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                            ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸÖŸÜ
                        </span>
                        üìù
                    </h1>
                    <p class="header-subtitle">
                        ŸáŸÖŸá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ÿ¥ŸÖÿß ÿØÿ± €å⁄© ŸÜ⁄ØÿßŸá.
                        ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß ÿ±ÿß ŸÖÿØ€åÿ±€åÿ™ÿå Ÿà€åÿ±ÿß€åÿ¥ Ÿà ŸÜÿ™ÿß€åÿ¨ ÿ±ÿß ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÜ€åÿØ.
                    </p>
                </div>

                <a href="{{ route('teacher.exams.create') }}" class="btn-create-exam">
                    <i class="fas fa-plus-circle"></i>
                    ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ
                </a>
            </div>
        </div>

        {{-- ========== SUCCESS ALERT ========== --}}
        @if (session('success'))
            <div class="alert-success-custom d-flex align-items-center">
                <i class="fas fa-check-circle"></i>
                <div class="flex-grow-1">{{ session('success') }}</div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        @endif

        {{-- ========== FILTER SECTION ========== --}}
        <div class="filter-section">
            <h3 class="filter-title">
                <i class="fas fa-filter"></i>
                ŸÅ€åŸÑÿ™ÿ± Ÿà ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá
            </h3>

            <form method="GET" class="filter-form">
                <div class="form-group">
                    <label class="form-label">ŸÅ€åŸÑÿ™ÿ± ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ⁄©ŸÑÿßÿ≥</label>
                    <select name="classroom_id" class="form-select-custom">
                        <option value="">ŸáŸÖŸá ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß</option>
                        @foreach ($classrooms as $c)
                            <option value="{{ $c->id }}" @selected(request('classroom_id') == $c->id)>
                                {{ $c->title ?? $c->name }}
                            </option>
                        @endforeach
                    </select>
                </div>

                <button type="submit" class="btn-filter">
                    <i class="fas fa-sliders-h"></i>
                    ÿßÿπŸÖÿßŸÑ ŸÅ€åŸÑÿ™ÿ±
                </button>
            </form>
        </div>

        {{-- ========== EXAMS TABLE ========== --}}
        @if ($exams->count() === 0)
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <h3 class="empty-title">ŸáŸÜŸàÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ€å ŸÜÿ≥ÿßÿÆÿ™Ÿá‚Äåÿß€åÿØ!</h3>
                <p class="empty-description">
                    ÿ®ÿ±ÿß€å ÿ¥ÿ±Ÿàÿπÿå ÿßŸàŸÑ€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿÆŸàÿØ ÿ±ÿß ÿß€åÿ¨ÿßÿØ ⁄©ŸÜ€åÿØ.
                    ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ÿßŸÜŸàÿßÿπ ŸÖÿÆÿ™ŸÑŸÅ€å ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß ÿ¥ÿßŸÖŸÑ ÿ™ÿ≥ÿ™€åÿå ÿ™ÿ¥ÿ±€åÿ≠€å Ÿà ÿ™ÿ±⁄©€åÿ®€å ÿ®ÿ≥ÿßÿ≤€åÿØ.
                </p>
                <a href="{{ route('teacher.exams.create') }}" class="btn-create-exam">
                    <i class="fas fa-plus-circle"></i>
                    ÿß€åÿ¨ÿßÿØ ÿßŸàŸÑ€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ
                </a>
            </div>
        @else
            <div class="exams-table-container">
                <div class="table-header">
                    <h3 class="table-title">
                        <i class="fas fa-list-check"></i>
                        ŸÑ€åÿ≥ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                    </h3>
                    <div class="exams-count">
                        <i class="fas fa-hashtag"></i>
                        {{ $exams->count() }} ÿ¢ÿ≤ŸÖŸàŸÜ
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="exams-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ÿπŸÜŸàÿßŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ</th>
                                <th>⁄©ŸÑÿßÿ≥</th>
                                <th>ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($exams as $exam)
                                <tr>
                                    <td data-label="ÿ¥ŸÖÿßÿ±Ÿá">
                                        <span style="color: var(--primary); font-weight: 900; font-size: 1.1rem;">
                                            {{ $loop->iteration }}
                                        </span>
                                    </td>
                                    <td data-label="ÿπŸÜŸàÿßŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ" class="exam-title-cell">
                                        {{ $exam->title }}
                                    </td>
                                    <td data-label="⁄©ŸÑÿßÿ≥">
                                        <div class="exam-classroom">
                                            <i class="fas fa-people-group"></i>
                                            {{ $exam->classroom->title ?? ($exam->classroom->name ?? '‚Äî') }}
                                        </div>
                                    </td>
                                    <td data-label="ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ">
                                        <div class="exam-duration">
                                            <i class="fas fa-clock"></i>
                                            {{ $exam->duration ?? ($exam->duration_minutes ?? '‚Äî') }} ÿØŸÇ€åŸÇŸá
                                        </div>
                                    </td>
                                    <td data-label="Ÿàÿ∂ÿπ€åÿ™">
                                        @if ($exam->is_active)
                                            <span class="exam-status status-active">
                                                <i class="fas fa-check-circle"></i>
                                                ŸÅÿπÿßŸÑ
                                            </span>
                                        @else
                                            <span class="exam-status status-inactive">
                                                <i class="fas fa-pause-circle"></i>
                                                ÿ∫€åÿ±ŸÅÿπÿßŸÑ
                                            </span>
                                        @endif
                                    </td>
                                    <td data-label="ÿπŸÖŸÑ€åÿßÿ™">
                                        <div class="exam-actions">
                                            <a href="{{ route('teacher.exams.show', $exam) }}"
                                                class="btn-action btn-details">
                                                <i class="fas fa-eye"></i>
                                                ÿ¨ÿ≤ÿ¶€åÿßÿ™
                                            </a>
                                            <a href="{{ route('teacher.exams.edit', $exam) }}" class="btn-action btn-edit">
                                                <i class="fas fa-edit"></i>
                                                Ÿà€åÿ±ÿß€åÿ¥
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>
        @endif
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ÿà€åÿ®ÿ±Ÿá ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-create-exam, .btn-filter, .btn-action, .exams-table tbody tr');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // ÿßŸÅ⁄©ÿ™ hover ÿ®ÿ±ÿß€å ÿ≥ÿ∑ÿ±Ÿáÿß€å ÿ¨ÿØŸàŸÑ
            const tableRows = document.querySelectorAll('.exams-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                });

                // ⁄©ŸÑ€å⁄© ÿ±Ÿà€å ÿ≥ÿ∑ÿ± ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá ÿ¨ÿ≤ÿ¶€åÿßÿ™
                const detailsBtn = row.querySelector('.btn-details');
                if (detailsBtn) {
                    row.addEventListener('click', function(e) {
                        if (!e.target.closest('.btn-action')) {
                            window.location.href = detailsBtn.href;
                        }
                    });
                }
            });

            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ Ÿàÿ±ŸàÿØ ÿßŸÑŸÖÿßŸÜ‚ÄåŸáÿß
            const animateElements = () => {
                const elements = document.querySelectorAll('.exams-table tbody tr');
                elements.forEach((el, i) => {
                    el.style.animationDelay = `${i * 0.05}s`;
                    el.style.animation = 'fadeIn 0.5s ease-out forwards';
                    el.style.opacity = '0';
                });
            };

            // ÿßÿ¨ÿ±ÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ÿ®ÿπÿØ ÿßÿ≤ ŸÑŸàÿØ ÿµŸÅÿ≠Ÿá
            setTimeout(animateElements, 300);

            // ÿßÿπÿ™ÿ®ÿßÿ±ÿ≥ŸÜÿ¨€å ŸÅ€åŸÑÿ™ÿ±
            const filterForm = document.querySelector('.filter-form');
            if (filterForm) {
                filterForm.addEventListener('submit', function(e) {
                    const select = this.querySelector('select[name="classroom_id"]');
                    if (select.value) {
                        // ŸÜŸÖÿß€åÿ¥ ÿ®ÿßÿ±⁄Ø€åÿ±€å
                        const submitBtn = this.querySelector('button[type="submit"]');
                        const originalText = submitBtn.innerHTML;
                        submitBtn.innerHTML =
                            '<i class="fas fa-spinner fa-spin"></i> ÿØÿ± ÿ≠ÿßŸÑ ÿßÿπŸÖÿßŸÑ ŸÅ€åŸÑÿ™ÿ±...';
                        submitBtn.disabled = true;

                        setTimeout(() => {
                            submitBtn.innerHTML = originalText;
                            submitBtn.disabled = false;
                        }, 1000);
                    }
                });
            }

            // ŸÜŸÖÿß€åÿ¥ ÿ™ÿπÿØÿßÿØ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá
            const updateFilterCount = () => {
                const selectedClass = document.querySelector('select[name="classroom_id"]').value;
                const examCount = document.querySelectorAll('.exams-table tbody tr').length;
                const countElement = document.querySelector('.exams-count');

                if (countElement && selectedClass) {
                    const className = document.querySelector(`option[value="${selectedClass}"]`).textContent;
                    countElement.innerHTML = `<i class="fas fa-filter"></i> ${examCount} ÿ¢ÿ≤ŸÖŸàŸÜ (${className})`;
                }
            };

            // ÿ±Ÿà€åÿØÿßÿØ ÿ™ÿ∫€å€åÿ± ŸÅ€åŸÑÿ™ÿ±
            const classSelect = document.querySelector('select[name="classroom_id"]');
            if (classSelect) {
                classSelect.addEventListener('change', updateFilterCount);
            }
        });

        // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
        const style = document.createElement('style');
        style.textContent = `
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 142. question-edit.blade.php

**Path:** `resources/views/dashboard/teacher/exams/question-edit.blade.php`  
**Size:** 21,899 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿà€åÿ±ÿß€åÿ¥ ÿ≥ÿ§ÿßŸÑ')

@push('styles')
    <style>
        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .option-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1rem;
            background: #fff
        }

        .option-row {
            background: #f8fafc;
            border-radius: .8rem;
            padding: .55rem .7rem;
            display: flex;
            align-items: center;
            gap: .6rem
        }

        .option-tag {
            width: 30px;
            height: 30px;
            border-radius: .6rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e5e7eb;
            font-weight: 800
        }

        .correct-glow {
            background: rgba(16, 185, 129, .08);
            border-color: rgba(16, 185, 129, .6)
        }

        .hint {
            font-size: .85rem;
            color: #6c757d
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-pencil-square me-1 text-primary"></i> Ÿà€åÿ±ÿß€åÿ¥ ÿ≥ÿ§ÿßŸÑ
                </h4>
                <div class="text-muted small">
                    ÿ¢ÿ≤ŸÖŸàŸÜ: <span class="fw-semibold">{{ $exam->title }}</span>
                    <span class="mx-1">‚Ä¢</span>

                    {{-- subject ŸÅŸÇÿ∑ ÿß⁄Øÿ± ŸÑŸàÿØ ÿ¥ÿØŸá ÿ®ŸàÿØ --}}
                    @if ($exam->relationLoaded('subject') && $exam->subject)
                        {{ $exam->subject->title ?? ($exam->subject->name ?? '‚Äî') }}
                    @else
                        ‚Äî
                    @endif
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
            </div>
        </div>

        {{-- Errors --}}
        @if ($errors->any())
            <div class="alert alert-danger">
                <div class="fw-semibold mb-2">
                    <i class="bi bi-exclamation-triangle-fill me-1"></i>
                    ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ:
                </div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3">
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4">

                    <form action="{{ route('teacher.exams.questions.update', [$exam, $question]) }}" method="POST"
                        class="row g-3" novalidate>
                        @csrf
                        @method('PUT')

                        {{-- Question text --}}
                        <div class="col-12">
                            <label class="form-label fw-semibold">ŸÖÿ™ŸÜ ÿ≥ÿ§ÿßŸÑ <span class="text-danger">*</span></label>
                            <textarea name="question" rows="4" class="form-control input-soft" required placeholder="ÿ≥ÿ§ÿßŸÑ ÿ±ÿß ÿß€åŸÜÿ¨ÿß ÿ®ŸÜŸà€åÿ≥...">{{ old('question', $question->question) }}</textarea>
                        </div>

                        {{-- Score + Explanation --}}
                        <div class="col-md-4">
                            <label class="form-label fw-semibold">ÿßŸÖÿ™€åÿßÿ≤</label>
                            <input type="number" name="score" min="1" class="form-control input-soft"
                                value="{{ old('score', $question->score ?? 1) }}">
                        </div>

                        <div class="col-md-8">
                            <label class="form-label fw-semibold">ÿ™Ÿàÿ∂€åÿ≠/ÿ±ÿßŸáŸÜŸÖÿß (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                            <input type="text" name="explanation" class="form-control input-soft"
                                value="{{ old('explanation', $question->explanation) }}"
                                placeholder="ŸÖÿ´ŸÑÿßŸã ŸÜ⁄©ÿ™Ÿá €åÿß ÿ™Ÿàÿ∂€åÿ≠ ⁄©Ÿàÿ™ÿßŸá...">
                        </div>

                        {{-- Type --}}
                        <div class="col-md-8">
                            <label class="form-label fw-semibold">ŸÜŸàÿπ ÿ≥ÿ§ÿßŸÑ <span class="text-danger">*</span></label>
                            <select name="type" class="form-select input-soft" id="typeSelect" required>
                                @php $type = old('type', $question->type ?? 'mcq'); @endphp
                                <option value="mcq" {{ $type === 'mcq' ? 'selected' : '' }}>⁄ÜŸÜÿØ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å</option>
                                <option value="true_false" {{ $type === 'true_false' ? 'selected' : '' }}>ÿµÿ≠€åÿ≠/ÿ∫ŸÑÿ∑</option>
                                <option value="fill_blank" {{ $type === 'fill_blank' ? 'selected' : '' }}>ÿ¨ÿß€å ÿÆÿßŸÑ€å</option>
                                <option value="essay" {{ $type === 'essay' ? 'selected' : '' }}>ÿ™ÿ¥ÿ±€åÿ≠€å</option>
                            </select>
                            <div class="hint mt-1">ÿ®ÿß ÿ™ÿ∫€å€åÿ± ŸÜŸàÿπÿå Ÿàÿ±ŸàÿØ€å‚ÄåŸáÿß ÿ™ÿ∫€å€åÿ± ŸÖ€å‚Äå⁄©ŸÜŸÜÿØ.</div>
                        </div>

                        {{-- Options (MCQ + TrueFalse) --}}
                        <div class="col-12" id="optionsBlock" style="display:none">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="fw-bold"><i class="bi bi-list-check me-1"></i> ⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß</div>
                                <button type="button" id="addOptionBtn" class="btn btn-outline-primary btn-sm btn-wizard">
                                    <i class="bi bi-plus"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ⁄Øÿ≤€åŸÜŸá
                                </button>
                            </div>

                            @php
                                $legacyOptions = [
                                    old('options.0', $question->option_a),
                                    old('options.1', $question->option_b),
                                    old('options.2', $question->option_c),
                                    old('options.3', $question->option_d),
                                ];
                                $legacyCorrectMap = ['a' => 0, 'b' => 1, 'c' => 2, 'd' => 3];
                                $legacyCorrect = old(
                                    'correct_answer',
                                    $legacyCorrectMap[$question->correct_option] ?? null,
                                );
                            @endphp

                            <div id="optionsWrap" class="d-grid gap-2">
                                @foreach ($legacyOptions as $i => $opt)
                                    <div class="option-card p-2" data-idx="{{ $i }}">
                                        <div class="option-row">
                                            <div class="option-tag">{{ chr(65 + $i) }}</div>
                                            <input type="text" name="options[{{ $i }}]"
                                                class="form-control border-0 bg-transparent" value="{{ $opt ?? '' }}"
                                                placeholder="ŸÖÿ™ŸÜ ⁄Øÿ≤€åŸÜŸá">
                                            <div class="form-check ms-auto">
                                                <input class="form-check-input correct-radio" type="radio"
                                                    name="correct_answer" value="{{ $i }}"
                                                    {{ (string) $legacyCorrect === (string) $i ? 'checked' : '' }}>
                                                <label class="form-check-label small">ÿµÿ≠€åÿ≠</label>
                                            </div>
                                            <button type="button" class="btn btn-sm btn-outline-danger remove-option">
                                                <i class="bi bi-x"></i>
                                            </button>
                                        </div>
                                    </div>
                                @endforeach
                            </div>

                            {{-- Legacy hidden fields for controller --}}
                            <input type="hidden" name="option_a" id="legacyA">
                            <input type="hidden" name="option_b" id="legacyB">
                            <input type="hidden" name="option_c" id="legacyC">
                            <input type="hidden" name="option_d" id="legacyD">
                            <input type="hidden" name="correct_option" id="legacyCorrect">

                            <div class="hint mt-2">
                                ÿ®ÿ±ÿß€å ⁄ÜŸÜÿØ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å ÿ≠ÿØÿßŸÇŸÑ €¥ ⁄Øÿ≤€åŸÜŸá ŸÑÿßÿ≤ŸÖ ÿßÿ≥ÿ™. ⁄Øÿ≤€åŸÜŸá ÿµÿ≠€åÿ≠ ÿ±ÿß ŸÖÿ¥ÿÆÿµ ⁄©ŸÜ.
                            </div>

                            {{-- True/False --}}
                            <div id="trueFalseBox" class="mt-3" style="display:none;">
                                <label class="form-label fw-semibold">⁄Øÿ≤€åŸÜŸá ÿµÿ≠€åÿ≠: <span
                                        class="text-danger">*</span></label>
                                <div class="d-flex gap-3">
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="1"
                                            {{ old('correct_tf', (string) ($question->correct_tf ?? '')) === '1' ? 'checked' : '' }}>
                                        <span class="form-check-label">ÿµÿ≠€åÿ≠</span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="0"
                                            {{ old('correct_tf', (string) ($question->correct_tf ?? '')) === '0' ? 'checked' : '' }}>
                                        <span class="form-check-label">ÿ∫ŸÑÿ∑</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        {{-- Fill blank --}}
                        <div class="col-12" id="blankBlock" style="display:none">
                            <label class="form-label fw-semibold">Ÿæÿßÿ≥ÿÆ(Ÿáÿß€å) ÿ¨ÿß€å ÿÆÿßŸÑ€å <span
                                    class="text-danger">*</span></label>
                            <textarea name="correct_blanks" rows="3" class="form-control input-soft"
                                placeholder="Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß ÿ±ÿß ÿ®ÿß ⁄©ÿßŸÖÿß €åÿß ÿÆÿ∑ ÿ¨ÿØ€åÿØ ÿ¨ÿØÿß ⁄©ŸÜ...">{{ old('correct_blanks', is_array($question->correct_answer) ? implode(', ', $question->correct_answer) : $question->correct_answer ?? '') }}</textarea>
                        </div>

                        {{-- Essay --}}
                        <div class="col-12" id="descBlock" style="display:none">
                            <label class="form-label fw-semibold">ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿßÿ≥ÿÆ ÿ™ÿ¥ÿ±€åÿ≠€å (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                            <textarea name="descriptive_answer" rows="4" class="form-control input-soft"
                                placeholder="ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿßÿ≥ÿÆ €åÿß ŸÜ⁄©ÿßÿ™ ŸÖŸáŸÖ...">{{ old('descriptive_answer', $question->explanation) }}</textarea>
                        </div>

                        {{-- Submit --}}
                        <div class="col-12 d-flex gap-2 mt-2">
                            <button type="submit" class="btn btn-success btn-wizard shadow-sm">
                                <i class="bi bi-check2-circle"></i> ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
                            </button>
                        </div>

                    </form>
                </div>
            </div>

            {{-- Right side preview --}}
            <div class="col-lg-4">
                <div class="preview-card p-3">
                    <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥</div>
                    <div class="border rounded-3 p-3 bg-white">
                        <div class="fw-semibold" id="pvQuestion">{{ $question->question }}</div>
                        <div class="text-muted small mt-2" id="pvType">ŸÜŸàÿπ: {{ $question->type }}</div>
                        <div class="text-muted small mt-1" id="pvScore">ÿßŸÖÿ™€åÿßÿ≤: {{ $question->score ?? 1 }}</div>
                        <div class="mt-2" id="pvOptions"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const typeSel = document.getElementById('typeSelect');
            const optionsBlock = document.getElementById('optionsBlock');
            const descBlock = document.getElementById('descBlock');
            const blankBlock = document.getElementById('blankBlock');
            const optionsWrap = document.getElementById('optionsWrap');
            const addOptionBtn = document.getElementById('addOptionBtn');
            const trueFalseBox = document.getElementById('trueFalseBox');

            const legacyA = document.getElementById('legacyA');
            const legacyB = document.getElementById('legacyB');
            const legacyC = document.getElementById('legacyC');
            const legacyD = document.getElementById('legacyD');
            const legacyCorrect = document.getElementById('legacyCorrect');

            const pvQuestion = document.getElementById('pvQuestion');
            const pvType = document.getElementById('pvType');
            const pvScore = document.getElementById('pvScore');
            const pvOptions = document.getElementById('pvOptions');

            const qText = document.querySelector('textarea[name="question"]');
            const score = document.querySelector('input[name="score"]');

            const explanationInput = document.querySelector('input[name="explanation"]');
            const descriptiveInput = document.querySelector('textarea[name="descriptive_answer"]');

            function addOption(value = '') {
                const idx = optionsWrap.querySelectorAll('.option-card').length;
                const div = document.createElement('div');
                div.className = 'option-card p-2';
                div.innerHTML = `
        <div class="option-row">
            <div class="option-tag">${String.fromCharCode(65+idx)}</div>
            <input type="text" name="options[${idx}]" class="form-control border-0 bg-transparent" value="${value}" placeholder="ŸÖÿ™ŸÜ ⁄Øÿ≤€åŸÜŸá">
            <div class="form-check ms-auto">
                <input class="form-check-input correct-radio" type="radio" name="correct_answer" value="${idx}">
                <label class="form-check-label small">ÿµÿ≠€åÿ≠</label>
            </div>
            <button type="button" class="btn btn-sm btn-outline-danger remove-option"><i class="bi bi-x"></i></button>
        </div>`;
                optionsWrap.appendChild(div);
            }

            function reindexOptions() {
                const cards = [...optionsWrap.querySelectorAll('.option-card')];
                cards.forEach((card, idx) => {
                    card.dataset.idx = idx;
                    const tag = card.querySelector('.option-tag');
                    if (tag) tag.textContent = String.fromCharCode(65 + idx);
                    const input = card.querySelector('input[name^="options"]');
                    if (input) input.name = `options[${idx}]`;
                    const radio = card.querySelector('.correct-radio');
                    if (radio) radio.value = idx;
                });
                refreshPreviewOptions();
                syncLegacyFields();
            }

            function ensureMinMcqOptions() {
                if (typeSel.value !== 'mcq') return;
                let count = optionsWrap.querySelectorAll('.option-card').length;
                while (count < 4) {
                    addOption('');
                    count++;
                }
                reindexOptions();
            }

            function refreshBlocks() {
                const t = typeSel.value;

                optionsBlock.style.display = (t === 'mcq' || t === 'true_false') ? 'block' : 'none';
                descBlock.style.display = (t === 'essay') ? 'block' : 'none';
                blankBlock.style.display = (t === 'fill_blank') ? 'block' : 'none';

                trueFalseBox.style.display = (t === 'true_false') ? 'block' : 'none';
                optionsWrap.style.display = (t === 'mcq') ? '' : 'none';
                addOptionBtn.style.display = (t === 'mcq') ? '' : 'none';

                pvType.textContent = 'ŸÜŸàÿπ: ' + t;

                ensureMinMcqOptions();
                refreshPreviewOptions();
                syncLegacyFields();
            }

            function refreshPreviewOptions() {
                if (!pvOptions) return;
                const t = typeSel.value;
                pvOptions.innerHTML = '';
                if (t === 'mcq') {
                    const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')]
                        .map(i => i.value).filter(Boolean);
                    pvOptions.innerHTML =
                        '<div class="text-muted small mt-2">⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß:</div>' +
                        opts.map((o, idx) => `<div class="small mt-1">${String.fromCharCode(65+idx)}. ${o}</div>`)
                        .join('');
                }
            }

            function syncLegacyFields() {
                const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')].map(i => i.value || '');

                legacyA.value = opts[0] ?? '';
                legacyB.value = opts[1] ?? '';
                legacyC.value = opts[2] ?? '';
                legacyD.value = opts[3] ?? '';

                const corr = document.querySelector('input[name="correct_answer"]:checked')?.value;
                legacyCorrect.value = (corr !== undefined) ?
                    (['a', 'b', 'c', 'd'][Number(corr)] ?? null) :
                    null;
            }

            addOptionBtn.addEventListener('click', () => {
                addOption('');
                reindexOptions();
            });

            optionsWrap.addEventListener('click', (e) => {
                const btn = e.target.closest('.remove-option');
                if (btn) {
                    const cards = optionsWrap.querySelectorAll('.option-card');
                    if (cards.length <= 4) {
                        alert('ÿ®ÿ±ÿß€å ⁄ÜŸÜÿØ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å ÿ≠ÿØÿßŸÇŸÑ €¥ ⁄Øÿ≤€åŸÜŸá ŸÑÿßÿ≤ŸÖ ÿßÿ≥ÿ™.');
                        return;
                    }
                    btn.closest('.option-card')?.remove();
                    reindexOptions();
                }
            });

            optionsWrap.addEventListener('input', (e) => {
                if (e.target.matches('input[name^="options"]')) {
                    refreshPreviewOptions();
                    syncLegacyFields();
                }
            });

            optionsWrap.addEventListener('change', (e) => {
                if (e.target.matches('.correct-radio')) {
                    optionsWrap.querySelectorAll('.option-row')
                        .forEach(r => r.classList.remove('correct-glow'));
                    e.target.closest('.option-row')?.classList.add('correct-glow');
                    syncLegacyFields();
                }
            });

            qText.addEventListener('input', () => pvQuestion.textContent = qText.value || 'ŸÖÿ™ŸÜ ÿ≥ÿ§ÿßŸÑ');
            score.addEventListener('input', () => pvScore.textContent = 'ÿßŸÖÿ™€åÿßÿ≤: ' + (score.value || 1));
            typeSel.addEventListener('change', refreshBlocks);

            document.querySelector('form').addEventListener('submit', () => {
                if (typeSel.value === 'essay') {
                    const guide = descriptiveInput?.value?.trim();
                    if (guide && (!explanationInput.value || explanationInput.value.trim().length === 0)) {
                        explanationInput.value = guide;
                    }
                }
                ensureMinMcqOptions();
                syncLegacyFields();
            });

            refreshBlocks();
            ensureMinMcqOptions();
            syncLegacyFields();
        });
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 143. questions-create.blade.php

**Path:** `resources/views/dashboard/teacher/exams/questions-create.blade.php`  
**Size:** 29,467 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿßŸÅÿ≤ŸàÿØŸÜ ÿ≥ÿ§ÿßŸÑ ÿ¨ÿØ€åÿØ')

@push('styles')
    <style>
        .form-card {
            border: 0;
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .wizard {
            display: flex;
            gap: .5rem;
            flex-wrap: wrap
        }

        .wiz-step {
            flex: 1 1 120px;
            background: #f8fafc;
            border-radius: 1rem;
            padding: .7rem .9rem;
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 800;
            font-size: .9rem;
            color: #334155
        }

        .wiz-step.active {
            background: rgba(13, 110, 253, .1);
            color: #0d6efd
        }

        .wiz-step .num {
            width: 28px;
            height: 28px;
            border-radius: .7rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e2e8f0
        }

        .input-soft {
            border: 0;
            box-shadow: 0 6px 18px rgba(18, 38, 63, .06);
            border-radius: .9rem;
            padding: .7rem .9rem
        }

        .input-soft:focus {
            box-shadow: 0 0 0 .25rem rgba(13, 110, 253, .15)
        }

        .option-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1rem;
            background: #fff;
            transition: .2s
        }

        .option-card:hover {
            border-color: #cbd5e1;
            box-shadow: 0 8px 20px rgba(18, 38, 63, .06)
        }

        .option-row {
            background: #f8fafc;
            border-radius: .8rem;
            padding: .55rem .7rem;
            display: flex;
            align-items: center;
            gap: .6rem
        }

        .option-tag {
            width: 30px;
            height: 30px;
            border-radius: .6rem;
            display: grid;
            place-items: center;
            background: #fff;
            border: 1px solid #e5e7eb;
            font-weight: 800
        }

        .correct-glow {
            background: rgba(16, 185, 129, .08);
            border-color: rgba(16, 185, 129, .6)
        }

        .hint {
            font-size: .85rem;
            color: #6c757d
        }

        .floating-help {
            position: sticky;
            top: 90px
        }

        .preview-card {
            border: 1px dashed #e2e8f0;
            border-radius: 1.25rem;
            background: linear-gradient(180deg, #fff, #f8fafc)
        }

        .btn-wizard {
            border-radius: 1rem;
            padding: .7rem 1rem;
            display: inline-flex;
            align-items: center;
            gap: .5rem
        }
    </style>
@endpush

@section('content')
    <div class="container-fluid">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-plus-circle me-1 text-primary"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ÿ≥ÿ§ÿßŸÑ ÿ¨ÿØ€åÿØ
                </h4>
                <div class="text-muted small">
                    ÿ¢ÿ≤ŸÖŸàŸÜ: <span class="fw-semibold">{{ $exam->title }}</span>

                    {{-- subject ŸÅŸÇÿ∑ ÿß⁄Øÿ± ŸÇÿ®ŸÑÿßŸã ŸÑŸàÿØ ÿ¥ÿØŸá ÿ®ŸàÿØ ŸÜŸÖÿß€åÿ¥ ÿ®ÿØŸá --}}
                    @if ($exam->relationLoaded('subject') && $exam->subject)
                        ‚Ä¢ ŸÖŸàÿ∂Ÿàÿπ: <span class="fw-semibold">{{ $exam->subject->title ?? $exam->subject->name }}</span>
                    @endif

                    ‚Ä¢ ⁄©ŸÑÿßÿ≥: <span
                        class="fw-semibold">{{ $exam->classroom?->title ?? ($exam->classroom?->name ?? '‚Äî') }}</span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i> ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
            </div>
        </div>

        {{-- Errors --}}
        @if ($errors->any())
            <div class="alert alert-danger">
                <div class="fw-semibold mb-2">
                    <i class="bi bi-exclamation-triangle-fill me-1"></i>
                    ŸÑÿ∑ŸÅÿßŸã ÿÆÿ∑ÿßŸáÿß€å ÿ≤€åÿ± ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ:
                </div>
                <ul class="mb-0">
                    @foreach ($errors->all() as $error)
                        <li>{{ $error }}</li>
                    @endforeach
                </ul>
            </div>
        @endif

        <div class="row g-3">

            {{-- Form --}}
            <div class="col-lg-8">
                <div class="form-card p-3 p-md-4">

                    {{-- Wizard Steps --}}
                    <div class="wizard mb-3" id="wizard">
                        <div class="wiz-step active" data-step="1">
                            <div class="num">1</div> ŸÖÿ™ŸÜ Ÿà ÿßŸÖÿ™€åÿßÿ≤
                        </div>
                        <div class="wiz-step" data-step="2">
                            <div class="num">2</div> ŸÜŸàÿπ Ÿà Ÿæÿßÿ≥ÿÆ
                        </div>
                        <div class="wiz-step" data-step="3">
                            <div class="num">3</div> ŸÖÿ±Ÿàÿ± ŸÜŸáÿß€å€å
                        </div>
                    </div>

                    <form action="{{ route('teacher.exams.questions.store', $exam) }}" method="POST" class="row g-3"
                        novalidate>
                        @csrf

                        {{-- Step 1 --}}
                        <div class="col-12 step" data-step="1">
                            <label class="form-label fw-semibold">
                                ŸÖÿ™ŸÜ ÿ≥ÿ§ÿßŸÑ <span class="text-danger">*</span>
                            </label>
                            <textarea name="question" rows="4" class="form-control input-soft" required placeholder="ÿ≥ÿ§ÿßŸÑ ÿ±ÿß ÿß€åŸÜÿ¨ÿß ÿ®ŸÜŸà€åÿ≥...">{{ old('question') }}</textarea>
                        </div>

                        <div class="col-md-4 step" data-step="1">
                            <label class="form-label fw-semibold">
                                ÿßŸÖÿ™€åÿßÿ≤
                            </label>
                            <input type="number" name="score" min="1" class="form-control input-soft"
                                value="{{ old('score', 1) }}">
                        </div>

                        <div class="col-md-8 step" data-step="1">
                            <label class="form-label fw-semibold">ÿ™Ÿàÿ∂€åÿ≠/ÿ±ÿßŸáŸÜŸÖÿß (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                            <input type="text" name="explanation" class="form-control input-soft"
                                placeholder="ŸÖÿ´ŸÑÿßŸã ŸÜ⁄©ÿ™Ÿá €åÿß ÿ™Ÿàÿ∂€åÿ≠ ⁄©Ÿàÿ™ÿßŸá..." value="{{ old('explanation') }}">
                        </div>

                        {{-- Step 2: Type --}}
                        <div class="col-md-8 step" data-step="2" style="display:none">
                            <label class="form-label fw-semibold">ŸÜŸàÿπ ÿ≥ÿ§ÿßŸÑ <span class="text-danger">*</span></label>
                            <select name="type" class="form-select input-soft" id="typeSelect" required>
                                @php $type = old('type','mcq'); @endphp
                                <option value="mcq" {{ $type === 'mcq' ? 'selected' : '' }}>⁄ÜŸÜÿØ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å</option>
                                <option value="true_false" {{ $type === 'true_false' ? 'selected' : '' }}>ÿµÿ≠€åÿ≠/ÿ∫ŸÑÿ∑</option>
                                <option value="fill_blank" {{ $type === 'fill_blank' ? 'selected' : '' }}>ÿ¨ÿß€å ÿÆÿßŸÑ€å</option>
                                <option value="essay" {{ $type === 'essay' ? 'selected' : '' }}>ÿ™ÿ¥ÿ±€åÿ≠€å</option>
                            </select>
                            <div class="hint mt-1">ÿ®ÿß ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸàÿπÿå Ÿàÿ±ŸàÿØ€å‚ÄåŸáÿß€å ŸÖÿ±ÿ™ÿ®ÿ∑ ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.</div>
                        </div>

                        {{-- Step 2: Options block (MCQ + TrueFalse) --}}
                        <div class="col-12 step" data-step="2" id="optionsBlock" style="display:none">

                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="fw-bold"><i class="bi bi-list-check me-1"></i> ⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß</div>
                                <button type="button" id="addOptionBtn" class="btn btn-outline-primary btn-sm btn-wizard">
                                    <i class="bi bi-plus"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ⁄Øÿ≤€åŸÜŸá
                                </button>
                            </div>

                            <div id="optionsWrap" class="d-grid gap-2">
                                @php
                                    $initialOptions = old('options');
                                    if (!$initialOptions) {
                                        $initialOptions = array_filter(
                                            [old('option_a'), old('option_b'), old('option_c'), old('option_d')],
                                            fn($x) => $x !== null,
                                        );
                                    }
                                    if (!$initialOptions || count($initialOptions) === 0) {
                                        $initialOptions = ['', '', '', ''];
                                    }
                                @endphp

                                @foreach ($initialOptions as $i => $opt)
                                    <div class="option-card p-2" data-idx="{{ $i }}">
                                        <div class="option-row">
                                            <div class="option-tag">{{ chr(65 + $i) }}</div>
                                            <input type="text" name="options[{{ $i }}]"
                                                class="form-control border-0 bg-transparent" value="{{ $opt }}"
                                                placeholder="ŸÖÿ™ŸÜ ⁄Øÿ≤€åŸÜŸá">
                                            <div class="form-check ms-auto">
                                                <input class="form-check-input correct-radio" type="radio"
                                                    name="correct_answer" value="{{ $i }}"
                                                    {{ old('correct_answer') === (string) $i ? 'checked' : '' }}>
                                                <label class="form-check-label small">ÿµÿ≠€åÿ≠</label>
                                            </div>
                                            <button type="button" class="btn btn-sm btn-outline-danger remove-option">
                                                <i class="bi bi-x"></i>
                                            </button>
                                        </div>
                                    </div>
                                @endforeach
                            </div>

                            {{-- Legacy hidden fields for controller compatibility --}}
                            <input type="hidden" name="option_a" id="legacyA">
                            <input type="hidden" name="option_b" id="legacyB">
                            <input type="hidden" name="option_c" id="legacyC">
                            <input type="hidden" name="option_d" id="legacyD">
                            <input type="hidden" name="correct_option" id="legacyCorrect">

                            <div class="hint mt-2">
                                ÿ®ÿ±ÿß€å ⁄ÜŸÜÿØ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å ÿ≠ÿØÿßŸÇŸÑ €¥ ⁄Øÿ≤€åŸÜŸá ŸÑÿßÿ≤ŸÖ ÿßÿ≥ÿ™. ⁄Øÿ≤€åŸÜŸá ÿµÿ≠€åÿ≠ ÿ±ÿß ŸÖÿ¥ÿÆÿµ ⁄©ŸÜ.
                            </div>

                            {{-- True/False --}}
                            <div id="trueFalseBox" class="mt-3" style="display:none;">
                                <label class="form-label fw-semibold">
                                    ⁄Øÿ≤€åŸÜŸá ÿµÿ≠€åÿ≠ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ: <span class="text-danger">*</span>
                                </label>

                                <div class="d-flex gap-3">
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="1"
                                            {{ old('correct_tf') === '1' ? 'checked' : '' }}>
                                        <span class="form-check-label">ÿµÿ≠€åÿ≠</span>
                                    </label>
                                    <label class="form-check">
                                        <input class="form-check-input" type="radio" name="correct_tf" value="0"
                                            {{ old('correct_tf') === '0' ? 'checked' : '' }}>
                                        <span class="form-check-label">ÿ∫ŸÑÿ∑</span>
                                    </label>
                                </div>

                                <div class="hint mt-1">ÿ®ÿ±ÿß€å ÿµÿ≠€åÿ≠/ÿ∫ŸÑÿ∑ ŸÅŸÇÿ∑ ŸáŸÖ€åŸÜ ÿØŸà ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ÿßŸÅ€å ÿßÿ≥ÿ™.</div>
                            </div>
                        </div>

                        {{-- Step 2: Fill blank block --}}
                        <div class="col-12 step" data-step="2" id="blankBlock" style="display:none">
                            <label class="form-label fw-semibold">
                                Ÿæÿßÿ≥ÿÆ(Ÿáÿß€å) ÿ¨ÿß€å ÿÆÿßŸÑ€å <span class="text-danger">*</span>
                            </label>
                            <textarea name="correct_blanks" rows="3" class="form-control input-soft"
                                placeholder="Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß ÿ±ÿß ÿ®ÿß ⁄©ÿßŸÖÿß €åÿß ÿÆÿ∑ ÿ¨ÿØ€åÿØ ÿ¨ÿØÿß ⁄©ŸÜ...">{{ old('correct_blanks') }}</textarea>
                            <div class="hint mt-1">ŸÖÿ´ÿßŸÑ: ÿ™Ÿáÿ±ÿßŸÜ, Ÿæÿß€åÿ™ÿÆÿ™ ÿß€åÿ±ÿßŸÜ</div>
                        </div>

                        {{-- Step 2: Essay block --}}
                        <div class="col-12 step" data-step="2" id="descBlock" style="display:none">
                            <label class="form-label fw-semibold">ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿßÿ≥ÿÆ ÿ™ÿ¥ÿ±€åÿ≠€å (ÿßÿÆÿ™€åÿßÿ±€å)</label>
                            <textarea name="descriptive_answer" rows="4" class="form-control input-soft"
                                placeholder="ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿßÿ≥ÿÆ €åÿß ŸÜ⁄©ÿßÿ™ ŸÖŸáŸÖ...">{{ old('descriptive_answer') }}</textarea>
                            <div class="hint mt-1">ÿß⁄Øÿ± explanation ÿÆÿßŸÑ€å ÿ®ÿßÿ¥ÿØÿå ÿß€åŸÜ ŸÖÿ™ŸÜ ÿØÿ± explanation ÿ∞ÿÆ€åÿ±Ÿá ŸÖ€å‚Äåÿ¥ŸàÿØ.</div>
                        </div>

                        {{-- Step 3 Review --}}
                        <div class="col-12 step" data-step="3" style="display:none">
                            <div class="preview-card p-3">
                                <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> ŸÖÿ±Ÿàÿ± ŸÜŸáÿß€å€å</div>
                                <div class="small text-muted">ŸÇÿ®ŸÑ ÿßÿ≤ ÿ∞ÿÆ€åÿ±Ÿá €å⁄©ÿ®ÿßÿ± ⁄Ü⁄© ⁄©ŸÜ.</div>
                                <div class="border rounded-3 p-3 bg-white mt-2" id="reviewBox"></div>
                            </div>
                        </div>

                        {{-- Nav buttons --}}
                        <div class="col-12 d-flex flex-wrap gap-2 mt-2">
                            <button type="button" class="btn btn-outline-secondary btn-wizard" id="prevBtn" disabled>
                                <i class="bi bi-arrow-right"></i> ŸÇÿ®ŸÑ€å
                            </button>
                            <button type="button" class="btn btn-primary btn-wizard shadow-sm" id="nextBtn">
                                ÿ®ÿπÿØ€å <i class="bi bi-arrow-left"></i>
                            </button>
                            <button type="submit" class="btn btn-success btn-wizard shadow-sm" id="submitBtn"
                                style="display:none">
                                <i class="bi bi-check2-circle"></i> ÿ∞ÿÆ€åÿ±Ÿá ÿ≥ÿ§ÿßŸÑ
                            </button>
                        </div>

                    </form>
                </div>
            </div>

            {{-- Right column live preview/help --}}
            <div class="col-lg-4">
                <div class="floating-help">

                    <div class="preview-card p-3 mb-3">
                        <div class="fw-bold mb-2"><i class="bi bi-eye me-1"></i> Ÿæ€åÿ¥‚ÄåŸÜŸÖÿß€åÿ¥ ÿ≤ŸÜÿØŸá</div>
                        <div class="border rounded-3 p-3 bg-white" id="livePreview">
                            <div class="fw-semibold" id="pvQuestion">ŸÖÿ™ŸÜ ÿ≥ÿ§ÿßŸÑ</div>
                            <div class="text-muted small mt-2" id="pvType">ŸÜŸàÿπ: mcq</div>
                            <div class="text-muted small mt-1" id="pvScore">ÿßŸÖÿ™€åÿßÿ≤: 1</div>
                            <div class="mt-2" id="pvOptions"></div>
                        </div>
                    </div>

                    <div class="form-card p-3">
                        <div class="fw-bold mb-2"><i class="bi bi-lightbulb me-1 text-warning"></i> ŸÜ⁄©ÿ™Ÿá‚ÄåŸáÿß</div>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>MCQ: ÿ≠ÿØÿßŸÇŸÑ €¥ ⁄Øÿ≤€åŸÜŸá Ÿà €å⁄© ⁄Øÿ≤€åŸÜŸá ÿµÿ≠€åÿ≠.</li>
                            <li>ÿµÿ≠€åÿ≠/ÿ∫ŸÑÿ∑: €å⁄©€å ÿßÿ≤ ÿØŸà ÿ≠ÿßŸÑÿ™ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ.</li>
                            <li>ÿ¨ÿß€å ÿÆÿßŸÑ€å: ⁄ÜŸÜÿØ Ÿæÿßÿ≥ÿÆ ÿ±ÿß ÿ®ÿß ⁄©ÿßŸÖÿß ÿ¨ÿØÿß ⁄©ŸÜ.</li>
                            <li>ÿ™ÿ¥ÿ±€åÿ≠€å: ŸÅŸÇÿ∑ ŸÖÿ™ŸÜ Ÿà ÿßŸÖÿ™€åÿßÿ≤ ⁄©ÿßŸÅ€å ÿßÿ≥ÿ™.</li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Wizard
            const steps = [...document.querySelectorAll('.step')];
            const wizSteps = [...document.querySelectorAll('.wiz-step')];
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            let current = 1;

            function setStep(n) {
                current = n;
                steps.forEach(s => s.style.display = (Number(s.dataset.step) === n) ? '' : 'none');
                wizSteps.forEach(w => w.classList.toggle('active', Number(w.dataset.step) === n));
                prevBtn.disabled = n === 1;
                nextBtn.style.display = n < 3 ? '' : 'none';
                submitBtn.style.display = n === 3 ? '' : 'none';
                if (n === 3) fillReview();
            }

            prevBtn.addEventListener('click', () => setStep(Math.max(1, current - 1)));
            nextBtn.addEventListener('click', () => setStep(Math.min(3, current + 1)));

            // Blocks
            const typeSel = document.getElementById('typeSelect');
            const optionsBlock = document.getElementById('optionsBlock');
            const descBlock = document.getElementById('descBlock');
            const blankBlock = document.getElementById('blankBlock');
            const optionsWrap = document.getElementById('optionsWrap');
            const addOptionBtn = document.getElementById('addOptionBtn');
            const trueFalseBox = document.getElementById('trueFalseBox');

            // Legacy hidden inputs
            const legacyA = document.getElementById('legacyA');
            const legacyB = document.getElementById('legacyB');
            const legacyC = document.getElementById('legacyC');
            const legacyD = document.getElementById('legacyD');
            const legacyCorrect = document.getElementById('legacyCorrect');

            // Preview
            const pvQuestion = document.getElementById('pvQuestion');
            const pvType = document.getElementById('pvType');
            const pvScore = document.getElementById('pvScore');
            const pvOptions = document.getElementById('pvOptions');

            const qText = document.querySelector('textarea[name="question"]');
            const score = document.querySelector('input[name="score"]');
            const reviewBox = document.getElementById('reviewBox');

            const explanationInput = document.querySelector('input[name="explanation"]');
            const descriptiveInput = document.querySelector('textarea[name="descriptive_answer"]');

            function ensureMinMcqOptions() {
                if (typeSel.value !== 'mcq') return;
                let count = optionsWrap.querySelectorAll('.option-card').length;
                while (count < 4) {
                    addOption('');
                    count++;
                }
                reindexOptions();
            }

            function refreshBlocks() {
                const t = typeSel?.value;

                optionsBlock.style.display = (t === 'mcq' || t === 'true_false') ? '' : 'none';
                descBlock.style.display = (t === 'essay') ? '' : 'none';
                blankBlock.style.display = (t === 'fill_blank') ? '' : 'none';

                if (trueFalseBox) trueFalseBox.style.display = (t === 'true_false') ? 'block' : 'none';
                if (optionsWrap) optionsWrap.style.display = (t === 'mcq') ? '' : 'none';
                if (addOptionBtn) addOptionBtn.style.display = (t === 'mcq') ? '' : 'none';

                if (pvType) pvType.textContent = 'ŸÜŸàÿπ: ' + t;

                ensureMinMcqOptions();
                refreshPreviewOptions();
            }

            function refreshPreviewOptions() {
                if (!pvOptions) return;
                const t = typeSel?.value;
                pvOptions.innerHTML = '';

                if (t === 'mcq') {
                    const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')]
                        .map(i => i.value).filter(Boolean);

                    if (opts.length) {
                        pvOptions.innerHTML =
                            '<div class="text-muted small mt-2">⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß:</div>' +
                            opts.map((o, idx) =>
                                `<div class="small mt-1">${String.fromCharCode(65+idx)}. ${o}</div>`).join('');
                    }
                }
            }

            function fillReview() {
                const t = typeSel?.value;
                const text = qText?.value?.trim() || '‚Äî';
                const sc = score?.value || 1;
                const exp = explanationInput?.value || '‚Äî';

                let html = `<div class="fw-semibold mb-1">ÿ≥ÿ§ÿßŸÑ:</div><div>${text}</div>`;
                html += `<div class="mt-2 text-muted small">ŸÜŸàÿπ: ${t} ‚Ä¢ ÿßŸÖÿ™€åÿßÿ≤: ${sc}</div>`;
                html += `<div class="mt-2 small"><span class="fw-semibold">ÿ™Ÿàÿ∂€åÿ≠:</span> ${exp}</div>`;

                if (t === 'mcq') {
                    const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')]
                        .map(i => i.value).filter(Boolean);
                    html += '<div class="fw-semibold mt-3 mb-1">⁄Øÿ≤€åŸÜŸá‚ÄåŸáÿß:</div>' +
                        opts.map((o, idx) => `<div class="small">${String.fromCharCode(65+idx)}. ${o}</div>`).join(
                            '');
                }

                if (t === 'true_false') {
                    const checked = document.querySelector('input[name="correct_tf"]:checked');
                    html += `<div class="fw-semibold mt-3 mb-1">Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠:</div>
                <div class="small">${checked ? (checked.value=="1"?"ÿµÿ≠€åÿ≠":"ÿ∫ŸÑÿ∑") : "‚Äî"}</div>`;
                }

                if (t === 'fill_blank') {
                    const blanks = document.querySelector('[name="correct_blanks"]')?.value || '‚Äî';
                    html += `<div class="fw-semibold mt-3 mb-1">Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß:</div><div class="small">${blanks}</div>`;
                }

                if (t === 'essay') {
                    const guide = descriptiveInput?.value || '‚Äî';
                    html +=
                        `<div class="fw-semibold mt-3 mb-1">ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿßÿ≥ÿÆ:</div><div class="small">${guide}</div>`;
                }

                if (reviewBox) reviewBox.innerHTML = html;
            }

            // MCQ options management
            function reindexOptions() {
                const cards = [...optionsWrap.querySelectorAll('.option-card')];
                cards.forEach((card, idx) => {
                    card.dataset.idx = idx;
                    const tag = card.querySelector('.option-tag');
                    if (tag) tag.textContent = String.fromCharCode(65 + idx);
                    const input = card.querySelector('input[name^="options"]');
                    if (input) input.name = `options[${idx}]`;
                    const radio = card.querySelector('.correct-radio');
                    if (radio) radio.value = idx;
                });
                refreshPreviewOptions();
                syncLegacyFields();
            }

            function addOption(value = '') {
                const idx = optionsWrap.querySelectorAll('.option-card').length;
                const div = document.createElement('div');
                div.className = 'option-card p-2';
                div.innerHTML = `
        <div class="option-row">
            <div class="option-tag">${String.fromCharCode(65+idx)}</div>
            <input type="text" name="options[${idx}]" class="form-control border-0 bg-transparent" value="${value}" placeholder="ŸÖÿ™ŸÜ ⁄Øÿ≤€åŸÜŸá">
            <div class="form-check ms-auto">
                <input class="form-check-input correct-radio" type="radio" name="correct_answer" value="${idx}">
                <label class="form-check-label small">ÿµÿ≠€åÿ≠</label>
            </div>
            <button type="button" class="btn btn-sm btn-outline-danger remove-option"><i class="bi bi-x"></i></button>
        </div>`;
                optionsWrap.appendChild(div);
            }

            function syncLegacyFields() {
                const opts = [...optionsWrap.querySelectorAll('input[name^="options"]')].map(i => i.value || '');

                legacyA.value = opts[0] ?? '';
                legacyB.value = opts[1] ?? '';
                legacyC.value = opts[2] ?? '';
                legacyD.value = opts[3] ?? '';

                const corr = document.querySelector('input[name="correct_answer"]:checked')?.value;
                if (corr !== undefined) {
                    legacyCorrect.value = ['a', 'b', 'c', 'd'][Number(corr)] ?? null;
                } else {
                    legacyCorrect.value = null;
                }
            }

            addOptionBtn?.addEventListener('click', () => {
                addOption();
                reindexOptions();
            });

            optionsWrap?.addEventListener('click', (e) => {
                const btn = e.target.closest('.remove-option');
                if (btn) {
                    const cards = optionsWrap.querySelectorAll('.option-card');
                    if (cards.length <= 4) {
                        alert('ÿ®ÿ±ÿß€å ⁄ÜŸÜÿØ⁄Øÿ≤€åŸÜŸá‚Äåÿß€å ÿ≠ÿØÿßŸÇŸÑ €¥ ⁄Øÿ≤€åŸÜŸá ŸÑÿßÿ≤ŸÖ ÿßÿ≥ÿ™.');
                        return;
                    }
                    btn.closest('.option-card')?.remove();
                    reindexOptions();
                }
            });

            optionsWrap?.addEventListener('input', (e) => {
                if (e.target.matches('input[name^="options"]')) {
                    refreshPreviewOptions();
                    syncLegacyFields();
                }
            });

            optionsWrap?.addEventListener('change', (e) => {
                if (e.target.matches('.correct-radio')) {
                    optionsWrap.querySelectorAll('.option-row')
                        .forEach(r => r.classList.remove('correct-glow'));
                    e.target.closest('.option-row')?.classList.add('correct-glow');
                    syncLegacyFields();
                }
            });

            // Live preview binds
            qText?.addEventListener('input', () => pvQuestion.textContent = qText.value || 'ŸÖÿ™ŸÜ ÿ≥ÿ§ÿßŸÑ');
            score?.addEventListener('input', () => pvScore.textContent = 'ÿßŸÖÿ™€åÿßÿ≤: ' + (score.value || 1));
            typeSel?.addEventListener('change', refreshBlocks);

            document.querySelector('form')?.addEventListener('submit', () => {
                if (typeSel?.value === 'essay') {
                    const guide = descriptiveInput?.value?.trim();
                    if (guide && (!explanationInput.value || explanationInput.value.trim().length === 0)) {
                        explanationInput.value = guide;
                    }
                }
                ensureMinMcqOptions();
                syncLegacyFields();
            });

            setStep(1);
            refreshBlocks();
            ensureMinMcqOptions();
            syncLegacyFields();
        });
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 144. questions.blade.php

**Path:** `resources/views/dashboard/teacher/exams/questions.blade.php`  
**Size:** 9,562 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .exam-chip {
            background: #eef2ff;
            padding: .25rem .6rem;
            border-radius: 999px;
            font-weight: 700;
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }

        .q-row:hover {
            background: #f9fafb;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header (Questions Management) --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-2">
            <div>
                <h4 class="fw-bold mb-1">
                    <i class="bi bi-question-circle me-1 text-primary"></i>
                    ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ
                </h4>

                <div class="text-muted small">
                    ÿ¢ÿ≤ŸÖŸàŸÜ:
                    <span class="exam-chip">{{ $exam->title }}</span>

                    {{-- ‚úÖ subject ÿß⁄Øÿ± Ÿàÿ¨ŸàÿØ ÿØÿßÿ¥ÿ™ ŸÜŸÖÿß€åÿ¥ ÿ®ÿØŸáÿå ŸÜÿ®ŸàÿØ ŸÖÿ¥⁄©ŸÑ€å ŸÜ€åÿ≥ÿ™ --}}
                    @if ($exam->relationLoaded('subject') || $exam->subject)
                        <span class="mx-1 text-muted">‚Ä¢</span>
                        ŸÖŸàÿ∂Ÿàÿπ:
                        @if ($exam->subject)
                            <span class="fw-semibold">
                                {{ $exam->subject->title ?? $exam->subject->name }}
                            </span>
                        @else
                            <span class="text-warning">ŸÜÿßŸÖÿ¥ÿÆÿµ</span>
                        @endif
                    @endif

                    @if ($exam->classroom)
                        <span class="mx-1 text-muted">‚Ä¢</span>
                        ⁄©ŸÑÿßÿ≥:
                        <span class="fw-semibold">
                            {{ $exam->classroom->title ?? $exam->classroom->name }}
                        </span>
                    @endif

                    <span class="mx-1 text-muted">‚Ä¢</span>
                    {{-- ‚úÖ duration ŸÅŸàŸÑ‚Äåÿ®⁄© --}}
                    ŸÖÿØÿ™: {{ $exam->duration ?? ($exam->duration_minutes ?? '‚Äî') }} ÿØŸÇ€åŸÇŸá
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.exams.edit', $exam) }}"
                    class="btn btn-outline-warning d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-pencil-square"></i>
                    Ÿà€åÿ±ÿß€åÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ
                </a>

                <a href="{{ route('teacher.exams.questions.create', $exam) }}"
                    class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-plus-circle"></i>
                    ÿ≥ŸàÿßŸÑ ÿ¨ÿØ€åÿØ
                </a>

                <a href="{{ route('teacher.exams.index') }}"
                    class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                    <i class="bi bi-arrow-right"></i>
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>
            </div>
        </div>

        {{-- Alerts --}}
        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif

        @php
            $questions = $questions ?? ($exam->questions ?? collect());
            $totalScore = $questions->sum('score');
        @endphp

        {{-- Summary --}}
        <div class="row g-3 mb-3">
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ÿ™ÿπÿØÿßÿØ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß</div>
                        <div class="fs-4 fw-bold">{{ $questions->count() }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ŸÖÿ¨ŸÖŸàÿπ ÿßŸÖÿ™€åÿßÿ≤</div>
                        <div class="fs-4 fw-bold">{{ $totalScore }}</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                        <div class="mt-2">
                            {{-- ‚úÖ is_published ‚Üí is_active --}}
                            @if ($exam->is_active)
                                <span class="badge bg-success badge-pill">ŸÅÿπÿßŸÑ</span>
                            @else
                                <span class="badge bg-secondary badge-pill">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                            @endif
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {{-- Questions Table --}}
        <div class="card card-soft">
            <div class="table-responsive">
                <table class="table align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>ŸÖÿ™ŸÜ ÿ≥ŸàÿßŸÑ</th>
                            <th>ŸÜŸàÿπ</th>
                            <th>ÿßŸÖÿ™€åÿßÿ≤</th>
                            <th>Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠</th>
                            <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                        </tr>
                    </thead>
                    <tbody>

                        @forelse($questions as $q)
                            @php
                                $correct = null;
                                if ($q->type === 'mcq') {
                                    $correct = strtoupper($q->correct_option ?? '');
                                } elseif ($q->type === 'true_false') {
                                    $correct = $q->correct_tf ?? false ? 'ÿµÿ≠€åÿ≠' : 'ÿ∫ŸÑÿ∑';
                                } elseif ($q->type === 'fill_blank') {
                                    $correct = is_array($q->correct_answer)
                                        ? implode(' , ', $q->correct_answer)
                                        : $q->correct_answer;
                                } else {
                                    $correct = '‚Äî (ÿ™ÿ¥ÿ±€åÿ≠€å)';
                                }
                            @endphp

                            <tr class="q-row">
                                {{-- ÿ¥ŸÖÿßÿ±Ÿá ÿ≥ŸàÿßŸÑ --}}
                                <td class="fw-semibold">{{ $loop->iteration }}</td>

                                <td style="max-width:520px">
                                    {{-- ‚úÖ question_text ‚Üí question --}}
                                    {{ \Illuminate\Support\Str::limit($q->question, 120) }}
                                </td>

                                <td>
                                    <span class="badge bg-light text-dark border badge-pill">
                                        {{ str_replace('_', ' ', $q->type) }}
                                    </span>
                                </td>

                                <td class="fw-bold">{{ $q->score }}</td>
                                <td class="tiny muted">{{ $correct }}</td>

                                <td class="text-end">
                                    <a href="{{ route('teacher.exams.questions.edit', [$exam, $q]) }}"
                                        class="btn btn-sm btn-outline-warning">
                                        Ÿà€åÿ±ÿß€åÿ¥
                                    </a>

                                    <form method="POST"
                                        action="{{ route('teacher.exams.questions.destroy', [$exam, $q]) }}"
                                        class="d-inline" onsubmit="return confirm('ÿ≥ŸàÿßŸÑ ÿ≠ÿ∞ŸÅ ÿ¥ŸàÿØÿü')">
                                        @csrf
                                        @method('DELETE')
                                        <button class="btn btn-sm btn-outline-danger">
                                            ÿ≠ÿ∞ŸÅ
                                        </button>
                                    </form>
                                </td>
                            </tr>

                        @empty
                            <tr>
                                <td colspan="6" class="text-center text-muted py-4">
                                    ŸáŸÜŸàÿ≤ ÿ≥ŸàÿßŸÑ€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                                </td>
                            </tr>
                        @endforelse

                    </tbody>
                </table>
            </div>
        </div>

        {{-- Pagination (ÿß⁄Øÿ± paginate ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÖ€å‚Äå⁄©ŸÜ€å) --}}
        @if ($questions instanceof \Illuminate\Pagination\LengthAwarePaginator)
            <div class="mt-3">
                {{ $questions->links() }}
            </div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 145. show.blade.php

**Path:** `resources/views/dashboard/teacher/exams/show.blade.php`  
**Size:** 10,766 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ')

@push('styles')
    <style>
        /* ------------------------------------------------------------------
           Exam Show (Teacher)
           UI ÿ≥ÿ®⁄©ÿå ÿ¥ŸÅÿßŸÅ Ÿà ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿß Bootstrap 5 + ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿ¥ŸÖÿß
        ------------------------------------------------------------------ */

        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06);
            background: #fff;
        }

        .chip {
            background: #eef2ff;
            padding: .25rem .6rem;
            border-radius: 999px;
            font-weight: 700;
        }

        .tiny {
            font-size: .85rem;
        }

        .muted {
            color: #6b7280;
        }

        .hero {
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
            background: linear-gradient(135deg, #0d6efd10, #20c99710);
            border: 1px dashed #e5e7eb;
        }

        .hero-orb {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            right: -70px;
            top: -70px;
            background: radial-gradient(circle, #0d6efd22, transparent 60%);
            filter: blur(0px);
        }

        .hero-orb2 {
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            left: -50px;
            bottom: -50px;
            background: radial-gradient(circle, #20c99722, transparent 60%);
        }

        .q-row:hover {
            background: #f9fafb;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- =========================================================
         Header / Hero
         ŸÖÿ™ÿ∫€åÿ± ÿßÿµŸÑ€å ÿß€åŸÜ ÿµŸÅÿ≠Ÿá ŸÅŸÇÿ∑ $exam ÿßÿ≥ÿ™
    ========================================================== --}}
        <div class="hero card-soft p-3 p-md-4 mb-4">
            <div class="hero-orb"></div>
            <div class="hero-orb2"></div>

            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
                <div>
                    <h4 class="fw-bold mb-1">
                        <i class="bi bi-clipboard-check me-1 text-primary"></i>
                        {{ $exam->title }}
                    </h4>

                    <div class="text-muted small">
                        {{-- ⁄©ŸÑÿßÿ≥ ŸÖÿ±ÿ™ÿ®ÿ∑ --}}
                        ⁄©ŸÑÿßÿ≥:
                        @if ($exam->classroom)
                            <span class="chip">{{ $exam->classroom->title ?? $exam->classroom->name }}</span>
                        @else
                            <span class="text-warning">ŸÜÿßŸÖÿ¥ÿÆÿµ</span>
                        @endif

                        <span class="mx-1">‚Ä¢</span>

                        {{-- ŸÖÿØÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ --}}
                        ŸÖÿØÿ™: {{ $exam->duration }} ÿØŸÇ€åŸÇŸá

                        <span class="mx-1">‚Ä¢</span>

                        {{-- Ÿàÿ∂ÿπ€åÿ™ ÿßŸÜÿ™ÿ¥ÿßÿ± --}}
                        Ÿàÿ∂ÿπ€åÿ™:
                        @if ($exam->is_published)
                            <span class="badge bg-success">ŸÖŸÜÿ™ÿ¥ÿ± ÿ¥ÿØŸá</span>
                        @else
                            <span class="badge bg-secondary">Ÿæ€åÿ¥‚ÄåŸÜŸà€åÿ≥</span>
                        @endif
                    </div>

                    {{-- ÿ™Ÿàÿ∂€åÿ≠ ÿ¢ÿ≤ŸÖŸàŸÜ --}}
                    @if (!empty($exam->description))
                        <div class="tiny muted mt-2">
                            {{ $exam->description }}
                        </div>
                    @endif
                </div>

                {{-- Actions --}}
                <div class="d-flex gap-2 flex-wrap">
                    {{-- Ÿà€åÿ±ÿß€åÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ --}}
                    <a href="{{ route('teacher.exams.edit', $exam) }}"
                        class="btn btn-outline-warning d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-pencil-square"></i>
                        Ÿà€åÿ±ÿß€åÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ
                    </a>

                    {{-- ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑÿßÿ™ --}}
                    <a href="{{ route('teacher.exams.questions.index', $exam) }}"
                        class="btn btn-primary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-question-circle"></i>
                        ŸÖÿØ€åÿ±€åÿ™ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß
                    </a>

                    {{-- ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß --}}
                    <a href="{{ route('teacher.exams.index') }}"
                        class="btn btn-outline-secondary d-inline-flex align-items-center gap-2 shadow-sm">
                        <i class="bi bi-arrow-right"></i>
                        ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                    </a>
                </div>
            </div>
        </div>

        {{-- Ÿæ€åÿßŸÖ ŸÖŸàŸÅŸÇ€åÿ™ --}}
        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif


        {{-- =========================================================
         Summary Cards
    ========================================================== --}}
        @php
            $questions = $exam->questions ?? collect();
            $totalScore = $questions->sum('score');
        @endphp

        <div class="row g-3 mb-3">
            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ÿ™ÿπÿØÿßÿØ ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß</div>
                        <div class="fs-4 fw-bold">{{ $questions->count() }}</div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ŸÖÿ¨ŸÖŸàÿπ ÿßŸÖÿ™€åÿßÿ≤</div>
                        <div class="fs-4 fw-bold">{{ $totalScore }}</div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card card-soft">
                    <div class="card-body">
                        <div class="text-muted small">ÿ¥ŸÜÿßÿ≥Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                        <div class="fs-5 fw-bold">#{{ $exam->id }}</div>
                    </div>
                </div>
            </div>
        </div>


        {{-- =========================================================
         Questions Preview (read-only)
         ÿß⁄Øÿ± ÿ≥ŸàÿßŸÑ ŸÜÿØÿßÿ±€åŸÖÿå CTA ÿ®ÿ±ÿß€å ÿ≥ÿßÿÆÿ™ ÿ≥ŸàÿßŸÑ ŸÜŸÖÿß€åÿ¥ ŸÖ€å‚ÄåÿØŸá€åŸÖ
    ========================================================== --}}
        <div class="card card-soft">
            <div class="card-header bg-white fw-bold d-flex justify-content-between align-items-center">
                <span>
                    <i class="bi bi-list-check me-1 text-primary"></i>
                    ÿ≥ŸàÿßŸÑ‚ÄåŸáÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ
                </span>

                <a href="{{ route('teacher.exams.questions.create', $exam) }}" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-plus"></i> ÿßŸÅÿ≤ŸàÿØŸÜ ÿ≥ŸàÿßŸÑ
                </a>
            </div>

            <div class="table-responsive">
                <table class="table align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>ŸÖÿ™ŸÜ ÿ≥ŸàÿßŸÑ</th>
                            <th>ŸÜŸàÿπ</th>
                            <th>ÿßŸÖÿ™€åÿßÿ≤</th>
                            <th>Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠</th>
                        </tr>
                    </thead>
                    <tbody>
                        @forelse($questions as $q)
                            @php
                                // ŸÜŸÖÿß€åÿ¥ ÿÆŸÑÿßÿµŸá Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠ (ÿ∑ÿ®ŸÇ ÿ≥ÿßÿÆÿ™ÿßÿ± ŸÅÿπŸÑ€å Question Ÿáÿß)
                                $correct = null;
                                if ($q->type === 'mcq') {
                                    $correct = strtoupper($q->correct_option ?? '');
                                } elseif ($q->type === 'true_false') {
                                    $correct = $q->correct_tf ?? false ? 'True' : 'False';
                                } elseif ($q->type === 'fill_blank') {
                                    $correct = is_array($q->correct_answer)
                                        ? implode(' , ', $q->correct_answer)
                                        : $q->correct_answer ?? '‚Äî';
                                } else {
                                    $correct = '‚Äî (ÿ™ÿ¥ÿ±€åÿ≠€å)';
                                }
                            @endphp

                            <tr class="q-row">
                                <td class="fw-semibold">{{ $loop->iteration }}</td>
                                <td style="max-width:520px">
                                    {{ \Illuminate\Support\Str::limit($q->question_text, 140) }}
                                </td>
                                <td>
                                    <span class="badge bg-light text-dark border rounded-pill">
                                        {{ str_replace('_', ' ', $q->type) }}
                                    </span>
                                </td>
                                <td class="fw-bold">{{ $q->score }}</td>
                                <td class="tiny muted">{{ $correct }}</td>
                            </tr>
                        @empty
                            <tr>
                                <td colspan="5" class="text-center text-muted py-5">
                                    ŸáŸÜŸàÿ≤ Ÿá€å⁄Ü ÿ≥ŸàÿßŸÑ€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
                                    <div class="mt-3">
                                        <a href="{{ route('teacher.exams.questions.create', $exam) }}"
                                            class="btn btn-primary">
                                            <i class="bi bi-plus-circle"></i>
                                            ÿßŸàŸÑ€åŸÜ ÿ≥ŸàÿßŸÑ ÿ±ÿß ÿ®ÿ≥ÿßÿ≤
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        @endforelse
                    </tbody>
                </table>
            </div>
        </div>

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 146. index.blade.php

**Path:** `resources/views/dashboard/teacher/index.blade.php`  
**Size:** 42,493 bytes  
**Modified:** 2025-12-06 22:01:55

----------------------------------------------------------------------

@extends('layouts.app')

@section('title', 'ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ - ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ')

@push('styles')
    <style>
        /* ÿ™ŸÖ ⁄©ÿßŸÖŸÑ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .teacher-dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        /* ========== HERO HEADER ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .btn-hero {
            padding: 16px 32px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1.05rem;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-hero:active {
            transform: scale(0.97);
        }

        .btn-primary-grad {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-primary-grad:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-primary-grad::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-primary-grad:hover::before {
            left: 100%;
        }

        .btn-outline-secondary-grad {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-outline-secondary-grad:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== KPI STATS ========== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
            animation: fadeIn 0.6s ease-out;
            animation-delay: 0.1s;
            animation-fill-mode: both;
        }

        .kpi-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 28px;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .kpi-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .kpi-card:nth-child(2)::before {
            background: linear-gradient(135deg, rgba(0, 212, 170, 0.08), transparent);
        }

        .kpi-card:nth-child(3)::before {
            background: linear-gradient(135deg, rgba(255, 209, 102, 0.08), transparent);
        }

        .kpi-card:nth-child(4)::before {
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.08), transparent);
        }

        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .kpi-title {
            color: var(--gray);
            font-size: 0.95rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .kpi-icon {
            width: 60px;
            height: 60px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .kpi-card:hover .kpi-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .kpi-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
            line-height: 1;
        }

        .kpi-trend {
            font-size: 0.9rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 5px;
            position: relative;
            z-index: 2;
        }

        .trend-up {
            color: #00D4AA;
        }

        .trend-down {
            color: #FF6B9D;
        }

        /* ========== MAIN DASHBOARD GRID ========== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 35px;
        }

        @media (max-width: 992px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ========== RECENT EXAMS CARD ========== */
        .recent-exams-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(0, 0, 0, 0.05);
            height: 100%;
            position: relative;
            overflow: hidden;
            animation: slideInLeft 0.6s ease-out;
        }

        .recent-exams-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
        }

        .card-title {
            font-weight: 900;
            font-size: 1.4rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .view-all-link {
            color: var(--primary);
            font-weight: 800;
            font-size: 0.95rem;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
        }

        .view-all-link:hover {
            gap: 10px;
            color: var(--secondary);
        }

        .exams-list {
            list-style: none;
            margin: 0;
            padding: 0;
            position: relative;
            z-index: 2;
        }

        .exam-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 15px;
            border-radius: var(--radius-md);
            border-bottom: 2px dashed rgba(123, 104, 238, 0.1);
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
        }

        .exam-item:last-child {
            border-bottom: none;
        }

        .exam-item:hover {
            background: var(--primary-light);
            transform: translateX(8px);
            border-bottom-color: transparent;
        }

        .exam-info {
            flex: 1;
        }

        .exam-title {
            font-weight: 900;
            color: var(--dark);
            font-size: 1.05rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .exam-title i {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .exam-meta {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meta-item i {
            font-size: 0.95rem;
        }

        .exam-badge {
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }

        .empty-state {
            text-align: center;
            padding: 50px 30px;
            position: relative;
            z-index: 2;
        }

        .empty-icon {
            font-size: 4rem;
            color: var(--light-gray);
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .empty-text {
            color: var(--gray);
            font-size: 1.1rem;
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .btn-create-first {
            padding: 14px 28px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            text-decoration: none;
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.3);
        }

        .btn-create-first:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(123, 104, 238, 0.4);
        }

        /* ========== QUICK ACTIONS CARD ========== */
        .quick-actions-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.6s ease-out;
        }

        .quick-actions-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-2);
        }

        .quick-grid {
            display: grid;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .quick-action {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 22px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            color: inherit;
        }

        .quick-action:hover {
            background: var(--light);
            border-color: var(--primary-light);
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .quick-content {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .quick-icon {
            width: 55px;
            height: 55px;
            border-radius: 16px;
            background: var(--primary-light);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .quick-action:hover .quick-icon {
            background: var(--gradient-1);
            color: white;
            transform: scale(1.1);
        }

        .quick-text h4 {
            font-weight: 900;
            color: var(--dark);
            font-size: 1rem;
            margin: 0 0 5px;
        }

        .quick-text p {
            color: var(--gray);
            font-size: 0.85rem;
            margin: 0;
            line-height: 1.5;
        }

        .quick-arrow {
            color: var(--gray);
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .quick-action:hover .quick-arrow {
            transform: translateX(-5px);
            color: var(--primary);
        }

        /* ========== SYSTEM STATUS CARD ========== */
        .system-status-card {
            background: linear-gradient(135deg, #2D3047, #1A1C30);
            color: white;
            border-radius: var(--radius-xl);
            padding: 30px;
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.6s ease-out;
            animation-delay: 0.2s;
            animation-fill-mode: both;
        }

        .system-status-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.15), transparent 70%);
            border-radius: 50%;
            animation: floaty 12s ease-in-out infinite;
        }

        .system-status-card::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.15), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .system-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .system-header i {
            color: var(--accent);
            background: rgba(0, 212, 170, 0.15);
            width: 50px;
            height: 50px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        .system-header h3 {
            font-weight: 900;
            font-size: 1.3rem;
            margin: 0;
        }

        .system-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .system-list {
            display: grid;
            gap: 18px;
            position: relative;
            z-index: 2;
        }

        .system-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .system-item i {
            color: var(--gold);
            font-size: 1rem;
            margin-top: 3px;
            flex-shrink: 0;
        }

        .system-item p {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.95rem;
            margin: 0;
            line-height: 1.6;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .teacher-dashboard {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .hero-actions {
                flex-direction: column;
                width: 100%;
            }

            .btn-hero {
                width: 100%;
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .kpi-card {
                padding: 22px;
            }

            .kpi-value {
                font-size: 2.2rem;
            }

            .dashboard-grid {
                gap: 20px;
            }

            .exam-meta {
                flex-direction: column;
                gap: 8px;
                align-items: flex-start;
            }

            .exam-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .exam-badge {
                align-self: flex-start;
            }

            .quick-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }

            .quick-action {
                padding: 18px;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .kpi-value {
                font-size: 2rem;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .view-all-link {
                align-self: flex-start;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .btn-hero,
        .btn-create-first,
        .quick-action,
        .exam-item {
            min-height: 48px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="teacher-dashboard">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span class="highlight">ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ŸÖÿπŸÑŸÖ</span>
                    <span style="color: var(--dark);">üë®‚Äçüè´</span>
                </h1>
                <p class="hero-subtitle">
                    ÿÆŸÑÿßÿµŸá‚Äåÿß€å ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿßÿå ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß Ÿà ŸÅÿπÿßŸÑ€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ¥ŸÖÿß.
                    ÿßÿ≤ ÿ¢ÿÆÿ±€åŸÜ ÿ¢ŸÖÿßÿ±Ÿáÿß Ÿà ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß ŸÖÿ∑ŸÑÿπ ÿ¥Ÿà€åÿØ.
                </p>
            </div>

            <div class="hero-actions">
                <a href="{{ route('teacher.exams.create') }}" class="btn-hero btn-primary-grad">
                    <i class="fas fa-file-circle-plus"></i>
                    ÿß€åÿ¨ÿßÿØ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ¨ÿØ€åÿØ
                </a>
                <a href="{{ route('teacher.exams.index') }}" class="btn-hero btn-outline-secondary-grad">
                    <i class="fas fa-clipboard-list"></i>
                    ŸÖÿØ€åÿ±€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>
            </div>
        </div>

        {{-- ========== KPI STATS ========== --}}
        <div class="stats-grid">
            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">ÿ™ÿπÿØÿßÿØ ⁄©ŸÑ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß</div>
                    <div class="kpi-icon" style="background: var(--gradient-1);">
                        <i class="fas fa-file-alt"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['total_exams'] ?? '‚Äî' }}</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-arrow-up"></i>
                    ŸÜÿ≥ÿ®ÿ™ ÿ®Ÿá ŸÖÿßŸá ⁄Øÿ∞ÿ¥ÿ™Ÿá
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸÅÿπÿßŸÑ</div>
                    <div class="kpi-icon" style="background: var(--gradient-2);">
                        <i class="fas fa-bolt"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['active_exams'] ?? '‚Äî' }}</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-chart-line"></i>
                    ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ¨ÿ±ÿß
                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">ÿ™ÿπÿØÿßÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ</div>
                    <div class="kpi-icon" style="background: var(--gradient-3);">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['students_count'] ?? '‚Äî' }}</div>
                <div class="kpi-trend trend-up">
                    <i class="fas fa-users"></i>
                    {{-- ÿ™ÿπÿØÿßÿØ ÿØÿßŸÜÿ¥ ÿ¢ŸÖŸàÿ≤ ŸàÿßŸÇÿπ€å --}}
                    @if (($stats['new_students'] ?? 0) > 0)
                        {{ $stats['new_students'] }} ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ¨ÿØ€åÿØ
                    @else
                        ÿ®ÿØŸàŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ¨ÿØ€åÿØ
                    @endif
                    {{-- ÿ™ÿπÿØÿßÿØ ÿØÿßŸÜÿ¥ ÿ¢ŸÖŸàÿ≤ ŸàÿßŸÇÿπ€å --}}

                </div>
            </div>

            <div class="kpi-card">
                <div class="kpi-header">
                    <div class="kpi-title">Ÿæÿßÿ≥ÿÆ‚Äå ÿ®ÿ±ÿ±ÿ≥€å‚ÄåŸÜÿ¥ÿØŸá</div>
                    <div class="kpi-icon" style="background: var(--gradient-4);">
                        <i class="fas fa-clipboard-check"></i>
                    </div>
                </div>
                <div class="kpi-value">{{ $stats['pending_reviews'] ?? '‚Äî' }}</div>
                <div class="kpi-trend trend-down">
                    <i class="fas fa-exclamation-circle"></i>
                    ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ®ÿ±ÿ±ÿ≥€å ŸÅŸàÿ±€å
                </div>
            </div>
        </div>

        {{-- ========== MAIN DASHBOARD GRID ========== --}}
        <div class="dashboard-grid">
            {{-- RECENT EXAMS --}}
            <div class="recent-exams-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-clock-rotate-left"></i>
                        ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿßÿÆ€åÿ± ÿ¥ŸÖÿß
                    </div>
                    <a href="{{ route('teacher.exams.index') }}" class="view-all-link">
                        ŸÖÿ¥ÿßŸáÿØŸá ŸáŸÖŸá
                        <i class="fas fa-arrow-left"></i>
                    </a>
                </div>

                {{-- Data Real (no fake defaults, no array support) --}}
                @forelse($recentExams as $exam)
                    <ul class="exams-list">
                        <a href="{{ route('teacher.exams.edit', $exam->id) }}" class="exam-item">
                            <div class="exam-info">
                                <div class="exam-title">
                                    <i class="fas fa-file-pen"></i>
                                    {{ $exam->title }}
                                </div>

                                <div class="exam-meta">
                                    <span class="meta-item">
                                        <i class="fas fa-layer-group"></i>
                                        ÿ≥ÿ∑ÿ≠: {{ $exam->level }}
                                    </span>

                                    <span class="meta-item">
                                        <i class="fas fa-calendar-day"></i>
                                        ÿ™ÿßÿ±€åÿÆ:
                                        {{ $exam->start_at ? $exam->start_at->format('Y/m/d H:i') : 'ŸÜÿßŸÖÿ¥ÿÆÿµ' }}
                                    </span>

                                    <span class="meta-item">
                                        <i class="fas fa-question-circle"></i>
                                        ÿ≥ŸàÿßŸÑÿßÿ™: {{ $exam->questions_count }}
                                    </span>
                                </div>
                            </div>

                            <div class="exam-badge">
                                <i class="fas fa-user-check"></i>
                                {{ $exam->attempts_count }} ÿ¥ÿ±⁄©ÿ™‚Äå⁄©ŸÜŸÜÿØŸá
                            </div>
                        </a>
                    </ul>
                @empty
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h3 style="color: var(--dark); margin-bottom: 15px; font-weight: 900;">
                            ŸáŸÜŸàÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ€å ÿ´ÿ®ÿ™ ŸÜ⁄©ÿ±ÿØŸá‚Äåÿß€åÿØ
                        </h3>
                        <p class="empty-text">
                            ÿ®ÿ±ÿß€å ÿ¥ÿ±Ÿàÿπ ⁄©ÿßÿ± Ÿà ÿß€åÿ¨ÿßÿØ ÿßŸàŸÑ€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜÿå ÿ±Ÿà€å ÿØ⁄©ŸÖŸá ÿ≤€åÿ± ⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ.
                            ŸÖ€å‚Äåÿ™ŸàÿßŸÜ€åÿØ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸÖÿÆÿ™ŸÑŸÅ€å ÿ®ÿß ÿ≥ÿ∑Ÿàÿ≠ ŸÖÿ™ŸÅÿßŸàÿ™ ÿß€åÿ¨ÿßÿØ ⁄©ŸÜ€åÿØ.
                        </p>
                        <a href="{{ route('teacher.exams.create') }}" class="btn-create-first">
                            <i class="fas fa-plus-circle"></i>
                            ÿß€åÿ¨ÿßÿØ ÿßŸàŸÑ€åŸÜ ÿ¢ÿ≤ŸÖŸàŸÜ
                        </a>
                    </div>
                @endforelse
            </div>

            {{-- SIDEBAR --}}
            <div>
                {{-- QUICK ACTIONS --}}
                <div class="quick-actions-card">
                    <div class="card-header" style="border: none; padding: 0 0 20px 0;">
                        <div class="card-title">
                            <i class="fas fa-bolt"></i>
                            ŸÖ€åÿßŸÜÿ®ÿ±Ÿáÿß€å ŸÖŸáŸÖ
                        </div>
                    </div>

                    <div class="quick-grid">
                        <a href="{{ route('teacher.classes.index') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon"
                                    style="color: var(--primary); background: rgba(123, 104, 238, 0.1);">
                                    <i class="fas fa-people-group"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß</h4>
                                    <p>ÿ≥ÿßÿÆÿ™ÿå Ÿà€åÿ±ÿß€åÿ¥ Ÿà ⁄Øÿ±ŸàŸá‚Äåÿ®ŸÜÿØ€å</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>

                        <a href="{{ route('teacher.students.index') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon" style="color: #00D4AA; background: rgba(0, 212, 170, 0.1);">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>ŸÑ€åÿ≥ÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ</h4>
                                    <p>ÿ≠ÿ∂Ÿàÿ± Ÿà ÿπŸÖŸÑ⁄©ÿ±ÿØ</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>

                        <a href="{{ route('teacher.reports.index') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon" style="color: #4361EE; background: rgba(67, 97, 238, 0.1);">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß Ÿà ÿ™ÿ≠ŸÑ€åŸÑ‚ÄåŸáÿß</h4>
                                    <p>ŸÜŸÖŸàÿØÿßÿ± Ÿà Ÿæ€åÿ¥ÿ±ŸÅÿ™</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>

                        <a href="{{ route('teacher.profile') }}" class="quick-action">
                            <div class="quick-content">
                                <div class="quick-icon" style="color: #FF6B9D; background: rgba(255, 107, 157, 0.1);">
                                    <i class="fas fa-user-cog"></i>
                                </div>
                                <div class="quick-text">
                                    <h4>Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖŸÜ</h4>
                                    <p>ŸÖÿØ€åÿ±€åÿ™ ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å</p>
                                </div>
                            </div>
                            <div class="quick-arrow">
                                <i class="fas fa-arrow-left"></i>
                            </div>
                        </a>
                    </div>
                </div>

                {{-- SYSTEM STATUS --}}
                <div class="system-status-card">
                    <div class="system-header">
                        <i class="fas fa-shield-check"></i>
                        <h3>Ÿàÿ∂ÿπ€åÿ™ ⁄©ŸÑ€å ÿ≥€åÿ≥ÿ™ŸÖ</h3>
                    </div>
                    <p class="system-description">
                        ÿß€åŸÜ ÿ®ÿÆÿ¥ ÿ®ÿ±ÿß€å ÿßÿπŸÑÿßŸÜ‚ÄåŸáÿß Ÿà €åÿßÿØÿ¢Ÿàÿ±€å‚ÄåŸáÿß€å ŸÖŸáŸÖ ÿ¥ŸÖÿßÿ≥ÿ™.
                        ÿ¢ÿÆÿ±€åŸÜ Ÿàÿ∂ÿπ€åÿ™ ÿ≥€åÿ≥ÿ™ŸÖ Ÿà ÿ™Ÿàÿµ€åŸá‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿ±ÿß ÿß€åŸÜÿ¨ÿß ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÜ€åÿØ.
                    </p>

                    <div class="system-list">
                        <div class="system-item">
                            <i class="fas fa-bell"></i>
                            <p><strong>€åÿßÿØÿ¢Ÿàÿ±€å:</strong> ŸÜÿ™ÿß€åÿ¨ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ™ÿ¥ÿ±€åÿ≠€å ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ€åÿØ.</p>
                        </div>
                        <div class="system-item">
                            <i class="fas fa-lightbulb"></i>
                            <p><strong>Ÿæ€åÿ¥ŸÜŸáÿßÿØ:</strong> ÿ®ÿ±ÿß€å Ÿáÿ± ⁄©ŸÑÿßÿ≥ ÿ≠ÿØÿßŸÇŸÑ €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÖÿ±€åŸÜ€å ÿ™ŸÜÿ∏€åŸÖ ⁄©ŸÜ€åÿØ.</p>
                        </div>
                        <div class="system-item">
                            <i class="fas fa-chart-line"></i>
                            <p><strong>⁄Øÿ≤ÿßÿ±ÿ¥:</strong> ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±ÿßÿ™ ⁄©ŸÑÿßÿ≥€å ÿ¥ŸÖÿß €±€µŸ™ ÿ®Ÿáÿ®ŸàÿØ €åÿßŸÅÿ™Ÿá ÿßÿ≥ÿ™.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß€å ÿ¢ŸÖÿßÿ±
            const kpiCards = document.querySelectorAll('.kpi-card');
            kpiCards.forEach((card, i) => {
                card.style.animationDelay = (i * 0.1) + 's';
            });

            // Ÿà€åÿ®ÿ±Ÿá ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-hero, .quick-action, .exam-item, .btn-create-first');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(30);
                    });
                });
            }

            // ÿßŸÅ⁄©ÿ™ hover ÿ®ÿ±ÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß
            const dashboardCards = document.querySelectorAll('.kpi-card, .quick-action, .exam-item');
            dashboardCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(20);
                    }
                });
            });

            // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ŸÖŸàÿØÿßŸÑ €åÿßÿØÿ¢Ÿàÿ±€å
            function showReminderModal() {
                const modal = document.createElement('div');
                modal.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1000;
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: scaleIn 0.3s ease forwards;
            border: 3px solid var(--primary);
        `;

                modal.innerHTML = `
            <div style="font-size: 3rem; margin-bottom: 20px; color: var(--primary);">
                <i class="fas fa-bell"></i>
            </div>
            <h3 style="margin-bottom: 15px; color: var(--dark); font-size: 1.3rem; font-weight: 700;">€åÿßÿØÿ¢Ÿàÿ±€å ŸÖŸáŸÖ!</h3>
            <p style="color: var(--gray); margin-bottom: 25px; font-size: 1rem; line-height: 1.6;">
                ÿ¥ŸÖÿß ${document.querySelector('.kpi-card:nth-child(4) .kpi-value').textContent} ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±ÿ±ÿ≥€å‚ÄåŸÜÿ¥ÿØŸá ÿØÿßÿ±€åÿØ.
                ÿ™Ÿàÿµ€åŸá ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ ÿ®ÿ±ÿß€å ÿ≠ŸÅÿ∏ ⁄©€åŸÅ€åÿ™ ÿ¢ŸÖŸàÿ≤ÿ¥ÿå ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿ∏ÿ±ŸÅ €≤€¥ ÿ≥ÿßÿπÿ™ ÿ®ÿ±ÿ±ÿ≥€å ÿ¥ŸàŸÜÿØ.
            </p>
            <div style="display: flex; gap: 10px;">
                <button onclick="this.parentElement.parentElement.remove(); if (this.parentElement.parentElement.nextElementSibling) this.parentElement.parentElement.nextElementSibling.remove();"
                        style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                    ÿ®ÿßÿ¥Ÿá
                </button>
                <button onclick="window.location.href='{{ route('teacher.exams.index') }}';"
                        style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                    ŸÖÿ¥ÿßŸáÿØŸá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </button>
            </div>
        `;

                document.body.appendChild(modal);

                const overlay = document.createElement('div');
                overlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        `;
                document.body.appendChild(overlay);

                if (navigator.vibrate) {
                    navigator.vibrate([200, 100, 200]);
                }

                setTimeout(() => {
                    if (document.body.contains(modal)) {
                        modal.remove();
                        overlay.remove();
                    }
                }, 10000);
            }

            // ŸÜŸÖÿß€åÿ¥ ÿÆŸàÿØ⁄©ÿßÿ± ŸÖŸàÿØÿßŸÑ ÿß⁄Øÿ± ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±ÿ±ÿ≥€å ŸÜÿ¥ÿØŸá Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØ
            const pendingReviews = parseInt('{{ $stats['pending_reviews'] ?? 0 }}');
            if (pendingReviews > 0) {
                setTimeout(() => {
                    showReminderModal();
                }, 3000);
            }
        });

        // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
        const style = document.createElement('style');
        style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .highlight {
        background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 900;
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 147. profile.blade.php

**Path:** `resources/views/dashboard/teacher/profile.blade.php`  
**Size:** 48,821 bytes  
**Modified:** 2025-12-04 20:32:17

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿπŸÑŸÖ')

@push('styles')
    <style>
        /* ÿ™ŸÖ ⁄©ÿßŸÖŸÑ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        /* ========== HERO SECTION ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        /* ========== PROFILE LAYOUT ========== */
        .profile-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            margin-bottom: 35px;
        }

        @media (max-width: 992px) {
            .profile-layout {
                grid-template-columns: 1fr;
            }
        }

        /* ========== SIDEBAR ========== */
        .profile-sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .sidebar-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(123, 104, 238, 0.08);
            position: relative;
            overflow: hidden;
            animation: slideInLeft 0.5s ease-out;
        }

        .sidebar-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        /* ========== AVATAR SECTION ========== */
        .avatar-section {
            text-align: center;
        }

        .avatar-wrapper {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }

        .avatar-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--light);
            box-shadow: var(--shadow-lg);
            background: var(--gradient-1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3.5rem;
            font-weight: 900;
        }

        .avatar-status {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            border: 3px solid var(--light);
            box-shadow: var(--shadow-sm);
        }

        .avatar-upload {
            margin-top: 20px;
        }

        .btn-upload {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--primary-light);
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.9rem;
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
        }

        .btn-upload:hover {
            background: var(--gradient-1);
            color: white;
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* ========== QUICK STATS ========== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            transition: all 0.3s;
        }

        .stat-item:hover {
            background: var(--primary-light);
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--dark);
            margin-bottom: 5px;
            line-height: 1;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--gray);
            font-weight: 700;
        }

        /* ========== MAIN CONTENT ========== */
        .profile-main {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .main-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(123, 104, 238, 0.08);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.05), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
            position: relative;
            z-index: 2;
        }

        .card-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-edit {
            padding: 10px 20px;
            border-radius: var(--radius-md);
            font-weight: 800;
            font-size: 0.9rem;
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-edit:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: var(--shadow-sm);
        }

        /* ========== INFO GRID ========== */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .info-item {
            margin-bottom: 20px;
        }

        .info-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-value {
            color: var(--dark);
            font-weight: 900;
            font-size: 1.1rem;
            padding: 12px 16px;
            background: var(--light-gray);
            border-radius: var(--radius-md);
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .info-value:hover {
            border-color: var(--primary-light);
            background: var(--light);
        }

        /* ========== FORM STYLES ========== */
        .form-group {
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .form-label {
            color: var(--gray);
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .form-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%237B68EE' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 18px center;
            background-size: 16px;
            padding-left: 45px;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        .form-textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius-md);
            background: var(--light);
            color: var(--dark);
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s;
            min-height: 120px;
            resize: vertical;
        }

        .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(123, 104, 238, 0.2);
        }

        /* ========== PASSWORD SECTION ========== */
        .password-input-group {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.1rem;
        }

        /* ========== ACTION BUTTONS ========== */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
            position: relative;
            z-index: 2;
        }

        .btn-action {
            padding: 16px 24px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-action:active {
            transform: scale(0.97);
        }

        .btn-save {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-save:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-save::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-save:hover::before {
            left: 100%;
        }

        .btn-cancel {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-cancel:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .btn-danger {
            background: transparent;
            color: #FF6B9D;
            border: 2px solid #FF6B9D;
        }

        .btn-danger:hover {
            background: rgba(255, 107, 157, 0.1);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== SETTINGS GRID ========== */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .setting-item {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .setting-item:hover {
            border-color: var(--primary-light);
            transform: translateY(-5px);
            background: var(--light);
        }

        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .setting-title {
            font-weight: 900;
            font-size: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setting-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }

        .setting-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--primary);
        }

        input:checked+.slider:before {
            transform: translateX(24px);
        }

        .setting-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
            margin: 0;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .profile-container {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .sidebar-card,
            .main-card {
                padding: 25px;
            }

            .avatar-image {
                width: 120px;
                height: 120px;
                font-size: 2.8rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .btn-edit {
                align-self: stretch;
                justify-content: center;
            }

            .avatar-image {
                width: 100px;
                height: 100px;
                font-size: 2.2rem;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .btn-action,
        .btn-edit,
        .btn-upload,
        .form-input,
        .form-select {
            min-height: 48px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="profile-container">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span
                        style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        Ÿæÿ±ŸàŸÅÿß€åŸÑ ŸÖÿπŸÑŸÖ
                    </span>
                    üë®‚Äçüè´
                </h1>
                <p class="hero-subtitle">
                    ŸÖÿØ€åÿ±€åÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ¥ÿÆÿµ€åÿå ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å Ÿà ÿ≥ŸÅÿßÿ±ÿ¥€å‚Äåÿ≥ÿßÿ≤€å ŸæŸÜŸÑ ÿ¢ŸÖŸàÿ≤ÿ¥€å.
                </p>
            </div>
        </div>

        {{-- ========== PROFILE LAYOUT ========== --}}
        <div class="profile-layout">
            {{-- ========== SIDEBAR ========== --}}
            <div class="profile-sidebar">
                {{-- Avatar Card --}}
                <div class="sidebar-card avatar-section">
                    <div class="avatar-wrapper">
                        <div class="avatar-image">
                            {{ substr(auth()->user()->name ?? 'ŸÖ', 0, 1) }}
                        </div>
                        <div class="avatar-status"></div>
                    </div>

                    <h3 style="font-weight: 900; color: var(--dark); margin-bottom: 5px;">
                        {{ auth()->user()->name ?? 'ŸÖÿπŸÑŸÖ ⁄Øÿ±ÿßŸÖ€å' }}
                    </h3>
                    <p style="color: var(--gray); margin-bottom: 20px; font-size: 0.95rem;">
                        {{ auth()->user()->email ?? 'teacher@smartedu.ir' }}
                    </p>

                    <div class="avatar-upload">
                        <label for="avatar-upload" class="btn-upload">
                            <i class="fas fa-camera"></i>
                            ÿ™ÿ∫€å€åÿ± ÿ™ÿµŸà€åÿ± Ÿæÿ±ŸàŸÅÿß€åŸÑ
                        </label>
                        <input type="file" id="avatar-upload" style="display: none;" accept="image/*">
                    </div>
                </div>

                {{-- Quick Stats Card --}}
                <div class="sidebar-card">
                    <h4
                        style="font-weight: 900; color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-chart-bar" style="color: var(--primary);"></i>
                        ÿ¢ŸÖÿßÿ± ÿ≥ÿ±€åÿπ
                    </h4>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">€±€≤</div>
                            <div class="stat-label">⁄©ŸÑÿßÿ≥ ŸÅÿπÿßŸÑ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">€±€µ€∂</div>
                            <div class="stat-label">ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">€¥€∏</div>
                            <div class="stat-label">ÿ¢ÿ≤ŸÖŸàŸÜ ÿ≥ÿßÿÆÿ™Ÿá‚Äåÿ¥ÿØŸá</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">€π€µ%</div>
                            <div class="stat-label">ÿ±ÿ∂ÿß€åÿ™</div>
                        </div>
                    </div>
                </div>

                {{-- Account Status Card --}}
                <div class="sidebar-card">
                    <h4
                        style="font-weight: 900; color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-shield-check" style="color: var(--accent);"></i>
                        Ÿàÿ∂ÿπ€åÿ™ ÿ≠ÿ≥ÿßÿ®
                    </h4>

                    <div
                        style="background: var(--light-gray); padding: 15px; border-radius: var(--radius-md); margin-bottom: 15px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span style="font-weight: 700; color: var(--gray);">ÿßÿ≠ÿ±ÿßÿ≤ ŸáŸà€åÿ™:</span>
                            <span style="color: var(--accent); font-weight: 900;">
                                <i class="fas fa-check-circle"></i>
                                ÿ™ÿß€å€åÿØ ÿ¥ÿØŸá
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: 700; color: var(--gray);">ÿπÿ∂Ÿà€åÿ™ ÿßÿ≤:</span>
                            <span style="color: var(--dark); font-weight: 900;">€±€¥€∞€≤/€∞€µ/€±€µ</span>
                        </div>
                    </div>

                    <button class="btn-action btn-danger" style="width: 100%; margin-top: 10px;">
                        <i class="fas fa-sign-out-alt"></i>
                        ÿÆÿ±Ÿàÿ¨ ÿßÿ≤ ÿ≠ÿ≥ÿßÿ®
                    </button>
                </div>
            </div>

            {{-- ========== MAIN CONTENT ========== --}}
            <div class="profile-main">
                {{-- Personal Information Card --}}
                <div class="main-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-user-circle"></i>
                            ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ¥ÿÆÿµ€å
                        </div>
                        <button class="btn-edit" onclick="toggleEditMode('personal')">
                            <i class="fas fa-edit"></i>
                            Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™
                        </button>
                    </div>

                    <div class="info-grid" id="personal-info">
                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-user"></i>
                                ŸÜÿßŸÖ Ÿà ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å
                            </div>
                            <div class="info-value">{{ auth()->user()->name ?? 'ŸÖÿπŸÑŸÖ ŸÜŸÖŸàŸÜŸá' }}</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-envelope"></i>
                                ÿß€åŸÖ€åŸÑ
                            </div>
                            <div class="info-value">{{ auth()->user()->email ?? 'teacher@smartedu.ir' }}</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-phone"></i>
                                ÿ™ŸÑŸÅŸÜ ŸáŸÖÿ±ÿßŸá
                            </div>
                            <div class="info-value">€∞€π€±€≤€≥€¥€µ€∂€∑€∏€π</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-graduation-cap"></i>
                                ÿ™ÿÆÿµÿµ
                            </div>
                            <div class="info-value">ÿ±€åÿßÿ∂€åÿßÿ™ Ÿà ŸÅ€åÿ≤€å⁄©</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-building"></i>
                                ŸÖÿØÿ±ÿ≥Ÿá/ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá
                            </div>
                            <div class="info-value">ÿØÿ®€åÿ±ÿ≥ÿ™ÿßŸÜ ÿ™€åÿ≤ŸáŸàÿ¥ÿßŸÜ ÿ¥Ÿá€åÿØ ÿ®Ÿáÿ¥ÿ™€å</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <i class="fas fa-calendar-alt"></i>
                                ÿ≥ÿßÿ®ŸÇŸá ÿ™ÿØÿ±€åÿ≥
                            </div>
                            <div class="info-value">€∏ ÿ≥ÿßŸÑ</div>
                        </div>
                    </div>

                    <form id="personal-form" style="display: none;" class="info-grid">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user"></i>
                                ŸÜÿßŸÖ Ÿà ŸÜÿßŸÖ ÿÆÿßŸÜŸàÿßÿØ⁄Ø€å
                            </label>
                            <input type="text" class="form-input" value="{{ auth()->user()->name ?? 'ŸÖÿπŸÑŸÖ ŸÜŸÖŸàŸÜŸá' }}">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-envelope"></i>
                                ÿß€åŸÖ€åŸÑ
                            </label>
                            <input type="email" class="form-input"
                                value="{{ auth()->user()->email ?? 'teacher@smartedu.ir' }}">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-phone"></i>
                                ÿ™ŸÑŸÅŸÜ ŸáŸÖÿ±ÿßŸá
                            </label>
                            <input type="tel" class="form-input" value="€∞€π€±€≤€≥€¥€µ€∂€∑€∏€π">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-graduation-cap"></i>
                                ÿ™ÿÆÿµÿµ
                            </label>
                            <select class="form-select">
                                <option>ÿ±€åÿßÿ∂€åÿßÿ™</option>
                                <option>ŸÅ€åÿ≤€å⁄©</option>
                                <option>ÿ¥€åŸÖ€å</option>
                                <option>ÿ≤€åÿ≥ÿ™‚Äåÿ¥ŸÜÿßÿ≥€å</option>
                                <option>ÿßÿØÿ®€åÿßÿ™ ŸÅÿßÿ±ÿ≥€å</option>
                                <option>ÿ≤ÿ®ÿßŸÜ ÿßŸÜ⁄ØŸÑ€åÿ≥€å</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-building"></i>
                                ŸÖÿØÿ±ÿ≥Ÿá/ÿ¢ŸÖŸàÿ≤ÿ¥⁄ØÿßŸá
                            </label>
                            <input type="text" class="form-input" value="ÿØÿ®€åÿ±ÿ≥ÿ™ÿßŸÜ ÿ™€åÿ≤ŸáŸàÿ¥ÿßŸÜ ÿ¥Ÿá€åÿØ ÿ®Ÿáÿ¥ÿ™€å">
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-calendar-alt"></i>
                                ÿ≥ÿßÿ®ŸÇŸá ÿ™ÿØÿ±€åÿ≥
                            </label>
                            <input type="text" class="form-input" value="€∏ ÿ≥ÿßŸÑ">
                        </div>

                        <div class="action-buttons">
                            <button type="button" class="btn-action btn-save" onclick="saveChanges('personal')">
                                <i class="fas fa-save"></i>
                                ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
                            </button>
                            <button type="button" class="btn-action btn-cancel" onclick="toggleEditMode('personal')">
                                <i class="fas fa-times"></i>
                                ÿßŸÜÿµÿ±ÿßŸÅ
                            </button>
                        </div>
                    </form>
                </div>

                {{-- Security Settings Card --}}
                <div class="main-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-shield-alt"></i>
                            ÿßŸÖŸÜ€åÿ™ Ÿà ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
                        </div>
                        <button class="btn-edit" onclick="toggleEditMode('security')">
                            <i class="fas fa-edit"></i>
                            ÿ™ÿ∫€å€åÿ± ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
                        </button>
                    </div>

                    <div id="security-info">
                        <div
                            style="background: var(--light-gray); padding: 20px; border-radius: var(--radius-lg); margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="color: var(--accent); font-size: 1.5rem;">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div>
                                    <h4 style="font-weight: 900; color: var(--dark); margin: 0 0 5px;">ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿ¥ŸÖÿß ÿßŸÖŸÜ ÿßÿ≥ÿ™
                                    </h4>
                                    <p style="color: var(--gray); margin: 0; font-size: 0.9rem;">ÿ¢ÿÆÿ±€åŸÜ ÿ™ÿ∫€å€åÿ±: €≤ ŸáŸÅÿ™Ÿá Ÿæ€åÿ¥
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <form id="security-form" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-lock"></i>
                                ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ŸÅÿπŸÑ€å
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="current-password">
                                <button type="button" class="toggle-password"
                                    onclick="togglePassword('current-password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-key"></i>
                                ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿ¨ÿØ€åÿØ
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="new-password">
                                <button type="button" class="toggle-password" onclick="togglePassword('new-password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-key"></i>
                                ÿ™⁄©ÿ±ÿßÿ± ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿ¨ÿØ€åÿØ
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="confirm-password">
                                <button type="button" class="toggle-password"
                                    onclick="togglePassword('confirm-password')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button type="button" class="btn-action btn-save" onclick="saveChanges('security')">
                                <i class="fas fa-save"></i>
                                ÿ™ÿ∫€å€åÿ± ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
                            </button>
                            <button type="button" class="btn-action btn-cancel" onclick="toggleEditMode('security')">
                                <i class="fas fa-times"></i>
                                ÿßŸÜÿµÿ±ÿßŸÅ
                            </button>
                        </div>
                    </form>
                </div>

                {{-- Notification Settings Card --}}
                <div class="main-card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-bell"></i>
                            ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿßÿ∑ŸÑÿßÿπ‚Äåÿ±ÿ≥ÿßŸÜ€å
                        </div>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-envelope"></i>
                                    ÿß€åŸÖ€åŸÑ ÿßÿ∑ŸÑÿßÿπ‚Äåÿ±ÿ≥ÿßŸÜ€å
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπ€åŸá‚ÄåŸáÿß€å ŸÖŸáŸÖ Ÿà ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ŸáŸÅÿ™⁄Ø€å ÿßÿ≤ ÿ∑ÿ±€åŸÇ ÿß€åŸÖ€åŸÑ
                            </p>
                        </div>

                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-comment-alt"></i>
                                    Ÿæ€åÿßŸÖ⁄© ÿßÿ∑ŸÑÿßÿπ‚Äåÿ±ÿ≥ÿßŸÜ€å
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                ÿØÿ±€åÿßŸÅÿ™ Ÿáÿ¥ÿØÿßÿ±Ÿáÿß€å ŸÖŸáŸÖ Ÿà €åÿßÿØÿ¢Ÿàÿ±€å‚ÄåŸáÿß ÿßÿ≤ ÿ∑ÿ±€åŸÇ Ÿæ€åÿßŸÖ⁄©
                            </p>
                        </div>

                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-chart-line"></i>
                                    ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ÿ™ÿ≠ŸÑ€åŸÑ€å
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                ÿØÿ±€åÿßŸÅÿ™ ⁄Øÿ≤ÿßÿ±ÿ¥ ŸÖÿßŸáÿßŸÜŸá ÿπŸÖŸÑ⁄©ÿ±ÿØ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß Ÿà ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ
                            </p>
                        </div>

                        <div class="setting-item">
                            <div class="setting-header">
                                <div class="setting-title">
                                    <i class="fas fa-exclamation-circle"></i>
                                    Ÿáÿ¥ÿØÿßÿ±Ÿáÿß€å ŸÅŸàÿ±€å
                                </div>
                                <label class="setting-switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <p class="setting-description">
                                ÿØÿ±€åÿßŸÅÿ™ Ÿáÿ¥ÿØÿßÿ± ÿ®ÿ±ÿß€å ŸÖÿ¥⁄©ŸÑÿßÿ™ ŸÅŸÜ€å €åÿß ŸÖŸàÿßÿ±ÿØ ÿßÿ∂ÿ∑ÿ±ÿßÿ±€å
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ÿà€åÿ®ÿ±Ÿá ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-action, .btn-edit, .btn-upload, .setting-item');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // ÿ¢ŸæŸÑŸàÿØ ÿ™ÿµŸà€åÿ± Ÿæÿ±ŸàŸÅÿß€åŸÑ
            const avatarUpload = document.getElementById('avatar-upload');
            if (avatarUpload) {
                avatarUpload.addEventListener('change', function(e) {
                    if (e.target.files && e.target.files[0]) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const avatarImage = document.querySelector('.avatar-image');
                            avatarImage.style.backgroundImage = `url(${e.target.result})`;
                            avatarImage.style.backgroundSize = 'cover';
                            avatarImage.style.backgroundPosition = 'center';
                            avatarImage.innerHTML = '';

                            // ŸÜŸÖÿß€åÿ¥ Ÿæ€åÿßŸÖ ŸÖŸàŸÅŸÇ€åÿ™
                            showToast('ÿ™ÿµŸà€åÿ± Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ¢ŸæŸÑŸàÿØ ÿ¥ÿØ!', 'success');
                        };
                        reader.readAsDataURL(e.target.files[0]);
                    }
                });
            }

            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ Ÿàÿ±ŸàÿØ ÿßŸÑŸÖÿßŸÜ‚ÄåŸáÿß
            const animateElements = () => {
                const cards = document.querySelectorAll('.sidebar-card, .main-card');
                cards.forEach((card, i) => {
                    card.style.animationDelay = `${i * 0.15}s`;
                    card.style.animation = 'fadeIn 0.5s ease-out forwards';
                    card.style.opacity = '0';
                });
            };

            // ÿßÿ¨ÿ±ÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ÿ®ÿπÿØ ÿßÿ≤ ŸÑŸàÿØ ÿµŸÅÿ≠Ÿá
            setTimeout(animateElements, 300);
        });

        // ÿ™ÿßÿ®ÿπ toggle Ÿà€åÿ±ÿß€åÿ¥
        function toggleEditMode(section) {
            const infoSection = document.getElementById(`${section}-info`);
            const formSection = document.getElementById(`${section}-form`);
            const editButton = document.querySelector(`[onclick="toggleEditMode('${section}')"]`);

            if (infoSection.style.display !== 'none') {
                infoSection.style.display = 'none';
                formSection.style.display = 'block';
                editButton.innerHTML = '<i class="fas fa-times"></i> ÿßŸÜÿµÿ±ÿßŸÅ';
                editButton.style.background = 'var(--light-gray)';
                editButton.style.color = 'var(--dark)';
            } else {
                infoSection.style.display = 'block';
                formSection.style.display = 'none';
                editButton.innerHTML = '<i class="fas fa-edit"></i> Ÿà€åÿ±ÿß€åÿ¥ ÿßÿ∑ŸÑÿßÿπÿßÿ™';
                editButton.style.background = 'transparent';
                editButton.style.color = 'var(--primary)';
            }
        }

        // ÿ™ÿßÿ®ÿπ ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
        function saveChanges(section) {
            // ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ÿ∞ÿÆ€åÿ±Ÿá ÿ™ÿ∫€å€åÿ±ÿßÿ™
            const saveButton = document.querySelector(`[onclick="saveChanges('${section}')"]`);
            const originalText = saveButton.innerHTML;
            saveButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÿØÿ± ÿ≠ÿßŸÑ ÿ∞ÿÆ€åÿ±Ÿá...';
            saveButton.disabled = true;

            setTimeout(() => {
                saveButton.innerHTML = originalText;
                saveButton.disabled = false;

                toggleEditMode(section);

                // ŸÜŸÖÿß€åÿ¥ Ÿæ€åÿßŸÖ ŸÖŸàŸÅŸÇ€åÿ™
                showToast('ÿ™ÿ∫€å€åÿ±ÿßÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ!', 'success');

                // Ÿà€åÿ®ÿ±Ÿá ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
            }, 1500);
        }

        // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥/ŸÖÿÆŸÅ€å ⁄©ÿ±ÿØŸÜ ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const toggleButton = input.nextElementSibling;

            if (input.type === 'password') {
                input.type = 'text';
                toggleButton.innerHTML = '<i class="fas fa-eye-slash"></i>';
            } else {
                input.type = 'password';
                toggleButton.innerHTML = '<i class="fas fa-eye"></i>';
            }
        }

        // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ toast
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: ${type === 'success' ? 'var(--accent)' : 'var(--secondary)'};
        color: white;
        padding: 15px 20px;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
        animation: slideInLeft 0.3s ease;
        max-width: 350px;
    `;

            toast.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
        <span>${message}</span>
    `;

            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
        const style = document.createElement('style');
        style.textContent = `
    @keyframes fadeOut {
        from {
            opacity: 1;
            transform: translateX(0);
        }
        to {
            opacity: 0;
            transform: translateX(-30px);
        }
    }

    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 148. index.blade.php

**Path:** `resources/views/dashboard/teacher/reports/index.blade.php`  
**Size:** 41,409 bytes  
**Modified:** 2025-12-04 20:26:23

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', '⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ÿ™ÿ≠ŸÑ€åŸÑ€å - ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ')

@push('styles')
    <style>
        /* ÿ™ŸÖ ⁄©ÿßŸÖŸÑ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .reports-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(30px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes floaty {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% center;
            }

            100% {
                background-position: 200% center;
            }
        }

        @keyframes progress-animation {
            from {
                width: 0%;
            }
        }

        /* ========== HERO HEADER ========== */
        .hero-section {
            background: linear-gradient(135deg,
                    rgba(123, 104, 238, 0.1) 0%,
                    rgba(255, 107, 157, 0.1) 50%,
                    rgba(0, 212, 170, 0.1) 100%);
            border-radius: var(--radius-xl);
            padding: 35px 40px;
            margin-bottom: 35px;
            border: 2px solid rgba(123, 104, 238, 0.15);
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(123, 104, 238, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 8s ease-in-out infinite;
        }

        .hero-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.08), transparent 70%);
            border-radius: 50%;
            animation: floaty 10s ease-in-out infinite reverse;
        }

        .hero-content h1 {
            font-weight: 900;
            font-size: 2.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .hero-content h1::before {
            content: '';
            width: 8px;
            height: 50px;
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .hero-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin: 0;
        }

        /* ========== DASHBOARD CARDS ========== */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 35px;
        }

        .dashboard-card {
            background: var(--light);
            border-radius: var(--radius-xl);
            padding: 30px;
            box-shadow: var(--shadow-lg);
            border: 2px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .dashboard-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(123, 104, 238, 0.08), transparent);
            border-radius: 0 var(--radius-xl) 0 0;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .card-title {
            font-weight: 900;
            font-size: 1.3rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title i {
            color: var(--primary);
            background: var(--primary-light);
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-badge {
            background: var(--primary-light);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 900;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ========== PERFORMANCE METRICS ========== */
        .metric-item {
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .metric-name {
            font-weight: 800;
            font-size: 1rem;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .metric-value {
            font-weight: 900;
            font-size: 1.1rem;
            color: var(--primary);
        }

        .metric-bar {
            height: 12px;
            background: var(--light-gray);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .metric-fill {
            height: 100%;
            border-radius: 10px;
            background: var(--gradient-1);
            width: 0;
            transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .metric-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        /* ========== QUICK INSIGHTS ========== */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .insight-card {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .insight-card:hover {
            border-color: var(--primary-light);
            transform: translateY(-5px);
            background: var(--light);
        }

        .insight-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .insight-value {
            font-size: 1.8rem;
            font-weight: 900;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            line-height: 1;
        }

        .insight-label {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 700;
        }

        /* ========== RECOMMENDATIONS ========== */
        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            border-right: 4px solid var(--primary);
            transition: all 0.3s;
        }

        .recommendation-item:hover {
            background: var(--primary-light);
            transform: translateX(5px);
        }

        .recommendation-icon {
            color: var(--primary);
            font-size: 1.3rem;
            margin-top: 3px;
            flex-shrink: 0;
        }

        .recommendation-text {
            flex: 1;
            color: var(--dark);
            font-weight: 700;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* ========== STUDENT PROGRESS ========== */
        .progress-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .progress-table th {
            padding: 15px;
            text-align: right;
            font-weight: 900;
            color: var(--dark);
            font-size: 0.9rem;
            border-bottom: 2px solid var(--light-gray);
            background: rgba(123, 104, 238, 0.05);
        }

        .progress-table td {
            padding: 15px;
            text-align: right;
            font-weight: 700;
            color: var(--dark);
            border-bottom: 1px solid var(--light-gray);
        }

        .progress-table tr:hover {
            background: var(--primary-light);
        }

        .student-name-cell {
            font-weight: 900 !important;
            color: var(--dark);
        }

        .progress-cell {
            min-width: 150px;
        }

        .progress-bar-small {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill-small {
            height: 100%;
            border-radius: 4px;
            background: var(--gradient-2);
        }

        /* ========== CLASS COMPARISON ========== */
        .comparison-chart {
            height: 200px;
            display: flex;
            align-items: flex-end;
            gap: 15px;
            margin-top: 25px;
            padding: 20px;
            background: var(--light-gray);
            border-radius: var(--radius-lg);
        }

        .chart-bar {
            flex: 1;
            background: var(--gradient-1);
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            position: relative;
            transition: all 0.3s;
            min-height: 20px;
        }

        .chart-bar:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .chart-label {
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.8rem;
            font-weight: 900;
            color: var(--gray);
        }

        .chart-value {
            position: absolute;
            top: -30px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 900;
            color: var(--dark);
        }

        /* ========== ACTION BUTTONS ========== */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .btn-action {
            padding: 18px;
            border-radius: var(--radius-lg);
            font-weight: 800;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-decoration: none;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .btn-action:active {
            transform: scale(0.97);
        }

        .btn-download {
            background: var(--gradient-1);
            color: white;
            box-shadow: 0 10px 25px rgba(123, 104, 238, 0.3);
        }

        .btn-download:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(123, 104, 238, 0.4);
        }

        .btn-download::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .btn-download:hover::before {
            left: 100%;
        }

        .btn-export {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--primary);
        }

        .btn-export:hover {
            background: var(--primary-light);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .btn-share {
            background: transparent;
            color: var(--dark);
            border: 2px solid var(--gray);
        }

        .btn-share:hover {
            background: var(--light-gray);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 1200px) {
            .dashboard-cards {
                grid-template-columns: repeat(2, 1fr);
            }

            .insights-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .reports-container {
                padding: 15px 10px 60px;
            }

            .hero-section {
                padding: 25px;
            }

            .hero-content h1 {
                font-size: 1.8rem;
            }

            .dashboard-cards {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .dashboard-card {
                padding: 25px;
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }

            .progress-table {
                display: block;
                overflow-x: auto;
            }

            .comparison-chart {
                flex-direction: column;
                height: auto;
                align-items: stretch;
            }

            .chart-bar {
                height: 40px !important;
                border-radius: var(--radius-sm);
            }

            .chart-label {
                position: relative;
                bottom: 0;
                margin-top: 5px;
            }

            .chart-value {
                position: relative;
                top: 0;
                margin-bottom: 5px;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .card-badge {
                align-self: flex-start;
            }

            .recommendation-item {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* ÿØ⁄©ŸÖŸá‚ÄåŸáÿß€å ŸÑŸÖÿ≥€å ÿ®ÿ≤ÿ±⁄Ø */
        .btn-action {
            min-height: 48px;
        }

        /* ÿßŸÜÿ™ÿÆÿßÿ® ŸÖÿ™ŸÜ */
        ::selection {
            background: rgba(123, 104, 238, 0.2);
            color: var(--dark);
        }
    </style>
@endpush

@section('content')
    <div class="reports-container">
        {{-- ========== HERO SECTION ========== --}}
        <div class="hero-section">
            <div class="hero-content">
                <h1>
                    <span
                        style="background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß€å ÿ™ÿ≠ŸÑ€åŸÑ€å
                    </span>
                    üìä
                </h1>
                <p class="hero-subtitle">
                    ÿ™ÿ≠ŸÑ€åŸÑ ÿ¨ÿßŸÖÿπ ÿπŸÖŸÑ⁄©ÿ±ÿØ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß Ÿà ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿ¥ŸÖÿß. ÿØÿßÿØŸá‚ÄåŸáÿß€å ŸáŸàÿ¥ŸÖŸÜÿØ ÿ®ÿ±ÿß€å ÿ™ÿµŸÖ€åŸÖ‚Äå⁄Ø€åÿ±€å‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿ®Ÿáÿ™ÿ±.
                </p>
            </div>
        </div>

        {{-- ========== DASHBOARD CARDS ========== --}}
        <div class="dashboard-cards">
            {{-- ⁄©ÿßÿ±ÿ™ ÿ™ÿ≠ŸÑ€åŸÑ ⁄©ŸÑÿßÿ≥€å --}}
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-chart-line"></i>
                        ÿ™ÿ≠ŸÑ€åŸÑ ⁄©ŸÑÿßÿ≥€å
                    </div>
                    <div class="card-badge">
                        <i class="fas fa-trend-up"></i>
                        ÿ±ŸàŸÜÿØ ŸÖÿ´ÿ®ÿ™
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-header">
                        <div class="metric-name">
                            <i class="fas fa-user-graduate"></i>
                            ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±ÿßÿ™ ⁄©ŸÑÿßÿ≥
                        </div>
                        <div class="metric-value">€∏€≤.€µ%</div>
                    </div>
                    <div class="metric-bar">
                        <div class="metric-fill" data-width="82.5"></div>
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-header">
                        <div class="metric-name">
                            <i class="fas fa-clipboard-check"></i>
                            ŸÜÿ±ÿÆ ÿ™⁄©ŸÖ€åŸÑ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                        </div>
                        <div class="metric-value">€π€¥%</div>
                    </div>
                    <div class="metric-bar">
                        <div class="metric-fill" data-width="94"></div>
                    </div>
                </div>

                <div class="metric-item">
                    <div class="metric-header">
                        <div class="metric-name">
                            <i class="fas fa-clock"></i>
                            ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ÿ≤ŸÖÿßŸÜ Ÿæÿßÿ≥ÿÆ⁄ØŸà€å€å
                        </div>
                        <div class="metric-value">€≤€¥ ÿØŸÇ€åŸÇŸá</div>
                    </div>
                    <div class="metric-bar">
                        <div class="metric-fill" data-width="75"></div>
                    </div>
                </div>
            </div>

            {{-- ⁄©ÿßÿ±ÿ™ ÿ®€åŸÜÿ¥‚ÄåŸáÿß€å ÿ≥ÿ±€åÿπ --}}
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-lightbulb"></i>
                        ÿ®€åŸÜÿ¥‚ÄåŸáÿß€å ÿ≥ÿ±€åÿπ
                    </div>
                    <div class="card-badge">
                        <i class="fas fa-bolt"></i>
                        ŸÑÿ≠ÿ∏Ÿá‚Äåÿß€å
                    </div>
                </div>

                <div class="insights-grid">
                    <div class="insight-card">
                        <div class="insight-icon">üìà</div>
                        <div class="insight-value">+€±€µ%</div>
                        <div class="insight-label">ÿ±ÿ¥ÿØ ÿπŸÖŸÑ⁄©ÿ±ÿØ</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon">üéØ</div>
                        <div class="insight-value">€∏€∑%</div>
                        <div class="insight-label">ÿ™ÿ≠ŸÇŸÇ ÿßŸáÿØÿßŸÅ</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon">‚è±Ô∏è</div>
                        <div class="insight-value">€≥.€≤</div>
                        <div class="insight-label">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ÿ≥ÿßÿπÿ™ ŸÖÿ∑ÿßŸÑÿπŸá</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon">‚≠ê</div>
                        <div class="insight-value">€¥.€∏/€µ</div>
                        <div class="insight-label">ÿ±ÿ∂ÿß€åÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ</div>
                    </div>
                </div>
            </div>

            {{-- ⁄©ÿßÿ±ÿ™ ÿ™Ÿàÿµ€åŸá‚ÄåŸáÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥€å --}}
            <div class="dashboard-card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-handshake"></i>
                        ÿ™Ÿàÿµ€åŸá‚ÄåŸáÿß€å ŸÖÿ¥ÿßŸàÿ±Ÿá‚Äåÿß€å
                    </div>
                    <div class="card-badge">
                        <i class="fas fa-star"></i>
                        Ÿæ€åÿ¥ŸÜŸáÿßÿØ Ÿà€å⁄òŸá
                    </div>
                </div>

                <div class="recommendation-item">
                    <div class="recommendation-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="recommendation-text">
                        ÿ®ÿ± ÿ±Ÿà€å ŸÖÿ®ÿßÿ≠ÿ´ ŸáŸÜÿØÿ≥Ÿá Ÿà ŸÖÿ´ŸÑÿ´ÿßÿ™ ÿ™ŸÖÿ±⁄©ÿ≤ ÿ®€åÿ¥ÿ™ÿ±€å ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€åÿØÿå ÿ∂ÿπŸÅ ÿπŸÖŸàŸÖ€å ÿØÿ± ÿß€åŸÜ ÿ®ÿÆÿ¥‚ÄåŸáÿß ŸÖÿ¥ÿßŸáÿØŸá ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>

                <div class="recommendation-item">
                    <div class="recommendation-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="recommendation-text">
                        ÿ®ÿ±ÿß€å €≥ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ®ÿß ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿ∂ÿπ€åŸÅÿå ÿ¨ŸÑÿ≥ÿßÿ™ ÿ±ŸÅÿπ ÿßÿ¥⁄©ÿßŸÑ ⁄Øÿ±ŸàŸá€å ÿ™ÿ±ÿ™€åÿ® ÿØŸá€åÿØ.
                    </div>
                </div>

                <div class="recommendation-item">
                    <div class="recommendation-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="recommendation-text">
                        ÿ≤ŸÖÿßŸÜ‚Äåÿ®ŸÜÿØ€å ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß ÿ±ÿß ÿ®Ÿá ⁄ØŸàŸÜŸá‚Äåÿß€å ÿ™ŸÜÿ∏€åŸÖ ⁄©ŸÜ€åÿØ ⁄©Ÿá ŸÅÿ¥ÿßÿ± ÿ±ŸàÿßŸÜ€å ⁄©ŸÖ‚Äåÿ™ÿ±€å ÿß€åÿ¨ÿßÿØ ÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>
        </div>

        {{-- ========== STUDENT PROGRESS TABLE ========== --}}
        <div class="dashboard-card" style="margin-bottom: 35px;">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-user-graduate"></i>
                    ÿ±ŸàŸÜÿØ Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ
                </div>
                <div class="card-badge">
                    <i class="fas fa-sort"></i>
                    ÿ®ÿ± ÿßÿ≥ÿßÿ≥ Ÿæ€åÿ¥ÿ±ŸÅÿ™
                </div>
            </div>

            <div class="table-responsive">
                <table class="progress-table">
                    <thead>
                        <tr>
                            <th>ŸÜÿßŸÖ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</th>
                            <th>ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±ÿßÿ™</th>
                            <th>Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ™ÿ≠ÿµ€åŸÑ€å</th>
                            <th>ŸÖÿ¥ÿßÿ±⁄©ÿ™ ⁄©ŸÑÿßÿ≥€å</th>
                            <th>Ÿàÿ∂ÿπ€åÿ™ ÿßŸÜ⁄Ø€åÿ≤ÿ¥€å</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                ŸÖÿ≠ŸÖÿØ ÿßÿ≠ŸÖÿØ€å
                            </td>
                            <td>€π€¥%</td>
                            <td class="progress-cell">
                                €π€µ%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 95%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                €∏€∏%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 88%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #00D4AA; font-weight: 900;">
                                    <i class="fas fa-fire"></i>
                                    ÿπÿßŸÑ€å
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                ÿ≥ÿßÿ±ÿß ŸÖÿ≠ŸÖÿØ€å
                            </td>
                            <td>€∏€∑%</td>
                            <td class="progress-cell">
                                €∏€≤%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 82%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                €π€±%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 91%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #FFD166; font-weight: 900;">
                                    <i class="fas fa-smile"></i>
                                    ÿÆŸàÿ®
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                ÿπŸÑ€å ÿ±ÿ∂ÿß€å€å
                            </td>
                            <td>€∑€µ%</td>
                            <td class="progress-cell">
                                €∂€µ%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 65%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                €∑€∞%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 70%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #FF6B9D; font-weight: 900;">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ™Ÿàÿ¨Ÿá
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="student-name-cell">
                                <i class="fas fa-user" style="color: var(--primary); margin-left: 8px;"></i>
                                ŸÅÿßÿ∑ŸÖŸá ⁄©ÿ±€åŸÖ€å
                            </td>
                            <td>€π€±%</td>
                            <td class="progress-cell">
                                €∏€π%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 89%;"></div>
                                </div>
                            </td>
                            <td class="progress-cell">
                                €π€µ%
                                <div class="progress-bar-small">
                                    <div class="progress-fill-small" style="width: 95%;"></div>
                                </div>
                            </td>
                            <td>
                                <span style="color: #00D4AA; font-weight: 900;">
                                    <i class="fas fa-trophy"></i>
                                    ÿ®ÿ±ÿ¨ÿ≥ÿ™Ÿá
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        {{-- ========== CLASS COMPARISON ========== --}}
        <div class="dashboard-card" style="margin-bottom: 35px;">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-balance-scale"></i>
                    ŸÖŸÇÿß€åÿ≥Ÿá ÿπŸÖŸÑ⁄©ÿ±ÿØ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß
                </div>
                <div class="card-badge">
                    <i class="fas fa-chart-bar"></i>
                    ÿ¢ŸÖÿßÿ±€å
                </div>
            </div>

            <div class="comparison-chart">
                <div class="chart-bar" style="height: 85%;">
                    <div class="chart-value">€∏€µ%</div>
                    <div class="chart-label">ÿ±€åÿßÿ∂€å €±€∞€±</div>
                </div>
                <div class="chart-bar" style="height: 92%;">
                    <div class="chart-value">€π€≤%</div>
                    <div class="chart-label">ŸÅ€åÿ≤€å⁄© €±€∞€≤</div>
                </div>
                <div class="chart-bar" style="height: 78%;">
                    <div class="chart-value">€∑€∏%</div>
                    <div class="chart-label">ÿ¥€åŸÖ€å €±€∞€≥</div>
                </div>
                <div class="chart-bar" style="height: 88%;">
                    <div class="chart-value">€∏€∏%</div>
                    <div class="chart-label">ÿ≤€åÿ≥ÿ™ €±€∞€¥</div>
                </div>
                <div class="chart-bar" style="height: 95%;">
                    <div class="chart-value">€π€µ%</div>
                    <div class="chart-label">ŸáŸÜÿØÿ≥Ÿá €±€∞€µ</div>
                </div>
            </div>
        </div>

        {{-- ========== ACTION BUTTONS ========== --}}
        <div class="action-buttons">
            <a href="#" class="btn-action btn-download">
                <i class="fas fa-file-pdf"></i>
                ÿØÿßŸÜŸÑŸàÿØ ⁄Øÿ≤ÿßÿ±ÿ¥ ⁄©ÿßŸÖŸÑ (PDF)
            </a>
            <a href="#" class="btn-action btn-export">
                <i class="fas fa-file-excel"></i>
                ÿÆÿ±Ÿàÿ¨€å Excel ÿØÿßÿØŸá‚ÄåŸáÿß
            </a>
            <a href="#" class="btn-action btn-share">
                <i class="fas fa-share-alt"></i>
                ÿßÿ¥ÿ™ÿ±ÿß⁄©‚Äå⁄Øÿ∞ÿßÿ±€å ÿ®ÿß ŸáŸÖ⁄©ÿßÿ±ÿßŸÜ
            </a>
            <button onclick="window.print()" class="btn-action" style="background: var(--gradient-3); color: white;">
                <i class="fas fa-print"></i>
                ⁄ÜÿßŸæ ⁄Øÿ≤ÿßÿ±ÿ¥
            </button>
        </div>
    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ŸÜŸàÿßÿ±Ÿáÿß€å Ÿæ€åÿ¥ÿ±ŸÅÿ™
            document.querySelectorAll('.metric-fill').forEach(fill => {
                const width = fill.getAttribute('data-width') || '0';
                setTimeout(() => {
                    fill.style.width = width + '%';
                }, 300);
            });

            // Ÿà€åÿ®ÿ±Ÿá ÿ®ÿ±ÿß€å ŸÖŸàÿ®ÿß€åŸÑ
            if (navigator.vibrate) {
                const clickableItems = document.querySelectorAll(
                    '.btn-action, .insight-card, .recommendation-item, .progress-table tr');
                clickableItems.forEach(item => {
                    item.addEventListener('click', function() {
                        navigator.vibrate(20);
                    });
                });
            }

            // ÿßŸÅ⁄©ÿ™ hover ÿ®ÿ±ÿß€å ⁄©ÿßÿ±ÿ™‚ÄåŸáÿß
            const dashboardCards = document.querySelectorAll('.dashboard-card');
            dashboardCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                });
            });

            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ Ÿàÿ±ŸàÿØ ÿßŸÑŸÖÿßŸÜ‚ÄåŸáÿß
            const animateElements = () => {
                const cards = document.querySelectorAll('.dashboard-card');
                cards.forEach((card, i) => {
                    card.style.animationDelay = `${i * 0.2}s`;
                    card.style.animation = 'fadeIn 0.5s ease-out forwards';
                    card.style.opacity = '0';
                });
            };

            // ÿßÿ¨ÿ±ÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ÿ®ÿπÿØ ÿßÿ≤ ŸÑŸàÿØ ÿµŸÅÿ≠Ÿá
            setTimeout(animateElements, 300);

            // ⁄©ŸÑ€å⁄© ÿ±Ÿà€å ÿ≥ÿ∑ÿ± ÿ¨ÿØŸàŸÑ ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá ÿ¨ÿ≤ÿ¶€åÿßÿ™ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
            const tableRows = document.querySelectorAll('.progress-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('click', function(e) {
                    if (!e.target.closest('a')) {
                        const studentName = this.querySelector('.student-name-cell').textContent
                            .trim();
                        showStudentReport(studentName);
                    }
                });
            });

            // ÿßŸÜ€åŸÖ€åÿ¥ŸÜ ŸÜŸÖŸàÿØÿßÿ± ŸÖŸÇÿß€åÿ≥Ÿá
            const chartBars = document.querySelectorAll('.chart-bar');
            chartBars.forEach((bar, i) => {
                const originalHeight = bar.style.height;
                bar.style.height = '20px';
                setTimeout(() => {
                    bar.style.height = originalHeight;
                }, 500 + (i * 150));
            });
        });

        // ÿ™ÿßÿ®ÿπ ŸÜŸÖÿß€åÿ¥ ⁄Øÿ≤ÿßÿ±ÿ¥ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
        function showStudentReport(studentName) {
            const modal = document.createElement('div');
            modal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        z-index: 1000;
        max-width: 500px;
        width: 90%;
        animation: scaleIn 0.3s ease forwards;
        border: 3px solid var(--primary);
    `;

            modal.innerHTML = `
        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
            <div style="font-size: 2.5rem; color: var(--primary);">
                <i class="fas fa-user-graduate"></i>
            </div>
            <div>
                <h3 style="margin: 0; color: var(--dark); font-size: 1.3rem; font-weight: 900;">⁄Øÿ≤ÿßÿ±ÿ¥ ÿ™ÿ≠ŸÑ€åŸÑ€å ${studentName}</h3>
                <p style="margin: 5px 0 0; color: var(--gray); font-size: 0.9rem;">ÿ™ÿ≠ŸÑ€åŸÑ ÿ¨ÿßŸÖÿπ ÿπŸÖŸÑ⁄©ÿ±ÿØ Ÿà Ÿæ€åÿ¥ÿ±ŸÅÿ™</p>
            </div>
        </div>

        <div style="background: var(--light-gray); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div style="text-align: center;">
                    <div style="font-size: 1.8rem; font-weight: 900; color: var(--primary);">€∏€∑%</div>
                    <div style="font-size: 0.8rem; color: var(--gray);">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±ÿßÿ™</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.8rem; font-weight: 900; color: var(--accent);">+€±€≤%</div>
                    <div style="font-size: 0.8rem; color: var(--gray);">Ÿæ€åÿ¥ÿ±ŸÅÿ™ ŸÖÿßŸáÿßŸÜŸá</div>
                </div>
            </div>
            <div style="font-size: 0.9rem; color: var(--dark); line-height: 1.6;">
                <strong>ŸÜŸÇÿßÿ∑ ŸÇŸàÿ™:</strong> ÿ≠ŸÑ ŸÖÿ≥ÿßÿ¶ŸÑ ÿ™ÿ≠ŸÑ€åŸÑ€åÿå ŸÖÿ¥ÿßÿ±⁄©ÿ™ ŸÅÿπÿßŸÑ ÿØÿ± ⁄©ŸÑÿßÿ≥
                <br>
                <strong>ŸÜ€åÿßÿ≤ ÿ®Ÿá ÿ®Ÿáÿ®ŸàÿØ:</strong> ÿ≥ÿ±ÿπÿ™ Ÿæÿßÿ≥ÿÆ⁄ØŸà€å€å ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
            </div>
        </div>

        <div style="display: flex; gap: 10px;">
            <button onclick="this.parentElement.remove(); if (this.parentElement.nextElementSibling) this.parentElement.nextElementSibling.remove();"
                    style="flex:1; padding: 14px; border: none; background: var(--light-gray); color: var(--dark); border-radius: 12px; font-weight: 700; font-size: 1rem;">
                ÿ®ÿ≥ÿ™ŸÜ
            </button>
            <button onclick="window.location.href='{{ route('teacher.students.index') }}';"
                    style="flex:1; padding: 14px; border: none; background: var(--gradient-1); color: white; border-radius: 12px; font-weight: 700; font-size: 1rem;">
                ŸÖÿ¥ÿßŸáÿØŸá Ÿæÿ±ŸàŸÅÿß€åŸÑ
            </button>
        </div>
    `;

            document.body.appendChild(modal);

            const overlay = document.createElement('div');
            overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    `;
            document.body.appendChild(overlay);

            if (navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }

            setTimeout(() => {
                if (document.body.contains(modal)) {
                    modal.remove();
                    overlay.remove();
                }
            }, 10000);
        }

        // ÿßÿ∂ÿßŸÅŸá ⁄©ÿ±ÿØŸÜ ÿßÿ≥ÿ™ÿß€åŸÑ‚ÄåŸáÿß€å ÿßŸÜ€åŸÖ€åÿ¥ŸÜ
        const style = document.createElement('style');
        style.textContent = `
    @keyframes scaleIn {
        from { transform: translate(-50%, -50%) scale(0.9); opacity: 0; }
        to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
`;
        document.head.appendChild(style);
    </script>
@endpush

......................................................................

----------------------------------------------------------------------

## üìÑ 149. attempts.blade.php

**Path:** `resources/views/dashboard/teacher/students/attempts.blade.php`  
**Size:** 7,979 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'AttemptŸáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .stat {
            background: #f8fafc;
            border-radius: 1rem;
            padding: 1rem;
            height: 100%
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }

        .progress-lg {
            height: 12px;
            border-radius: 999px;
        }

        .table thead th {
            white-space: nowrap;
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <div>
                <h4 class="fw-bold mb-1">ŸÜÿ™ÿß€åÿ¨ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</h4>
                <div class="text-muted small">
                    ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤:
                    <span class="fw-semibold">{{ $student->phone ?? '‚Äî' }}</span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ route('teacher.students.show', $student->id) }}" class="btn btn-outline-secondary">
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá Ÿæÿ±ŸàŸÅÿß€åŸÑ
                </a>
            </div>
        </div>

        @php
            // attempts ŸÖŸÖ⁄©ŸÜŸá paginate €åÿß collection ÿ®ÿßÿ¥Ÿá
            $attemptsCol =
                $attempts instanceof \Illuminate\Pagination\LengthAwarePaginator
                    ? collect($attempts->items())
                    : collect($attempts);

            $attemptCount = $attemptsCol->count();
            $avgPercent = $attemptCount ? round($attemptsCol->avg('percent'), 2) : 0;
            $avgScore = $attemptCount ? round($attemptsCol->avg('score_obtained'), 2) : 0;

            $gradedCount = $attemptsCol->where('status', 'graded')->count();
            $submittedCount = $attemptsCol->where('status', 'submitted')->count();
        @endphp

        {{-- Summary Stats --}}
        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ÿ™ÿπÿØÿßÿØ Attempt</div>
                    <div class="fs-3 fw-bold">{{ $attemptCount }}</div>
                    <div class="tiny muted mt-1">
                        graded: {{ $gradedCount }} ‚Ä¢ submitted: {{ $submittedCount }}
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ÿØÿ±ÿµÿØ</div>
                    <div class="fs-3 fw-bold">{{ $avgPercent }}%</div>
                    <div class="progress progress-lg mt-2">
                        <div class="progress-bar" style="width: {{ min(100, max(0, $avgPercent)) }}%"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ŸÜŸÖÿ±Ÿá</div>
                    <div class="fs-3 fw-bold">{{ $avgScore }}</div>
                    <div class="tiny muted mt-1">
                        ÿ®ÿ± ÿßÿ≥ÿßÿ≥ score_obtained
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™ ⁄©ŸÑ€å</div>
                    <div class="mt-2">
                        @if ($submittedCount > 0)
                            <span class="badge bg-warning text-dark badge-pill">
                                ŸÖŸÜÿ™ÿ∏ÿ± ÿ™ÿµÿ≠€åÿ≠ ÿ™ÿ¥ÿ±€åÿ≠€å
                            </span>
                        @else
                            <span class="badge bg-success badge-pill">
                                ŸáŸÖŸá ÿ™ŸÑÿßÿ¥‚ÄåŸáÿß ŸÜŸáÿß€å€å ÿ¥ÿØŸá‚ÄåÿßŸÜÿØ
                            </span>
                        @endif
                    </div>
                </div>
            </div>
        </div>

        {{-- Attempts Table --}}
        @if ($attemptCount)
            <div class="card card-soft">
                <div class="table-responsive">
                    <table class="table align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>ÿ¢ÿ≤ŸÖŸàŸÜ</th>
                                <th>ŸÜŸÖÿ±Ÿá</th>
                                <th>ÿØÿ±ÿµÿØ</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿßÿ±ÿ≥ÿßŸÑ</th>
                                <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($attempts as $a)
                                <tr>
                                    <td>{{ $a->id }}</td>

                                    <td class="fw-semibold">
                                        {{ $a->exam->title ?? '‚Äî' }}
                                        <div class="tiny muted">
                                            ÿ≥ÿ∑ÿ≠: {{ $a->exam->level ?? '‚Äî' }}
                                        </div>
                                    </td>

                                    <td>
                                        {{ $a->score_obtained ?? 0 }}
                                        /
                                        {{ $a->score_total ?? 0 }}
                                    </td>

                                    <td>
                                        <span class="fw-bold">{{ $a->percent ?? 0 }}%</span>
                                    </td>

                                    <td>
                                        @if ($a->status === 'graded')
                                            <span class="badge bg-success badge-pill">graded</span>
                                        @elseif($a->status === 'submitted')
                                            <span class="badge bg-warning text-dark badge-pill">submitted</span>
                                        @else
                                            <span class="badge bg-secondary badge-pill">{{ $a->status }}</span>
                                        @endif
                                    </td>

                                    <td class="tiny muted">
                                        {{ optional($a->submitted_at)->format('Y/m/d H:i') ?? '‚Äî' }}
                                    </td>

                                    <td class="text-end">
                                        <a href="{{ route('teacher.attempts.show', $a->id) }}"
                                            class="btn btn-sm btn-outline-primary">
                                            ÿ¨ÿ≤ÿ¶€åÿßÿ™ / ÿ™ÿµÿ≠€åÿ≠
                                        </a>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>

            {{-- Pagination --}}
            @if ($attempts instanceof \Illuminate\Pagination\LengthAwarePaginator)
                <div class="mt-3">
                    {{ $attempts->links() }}
                </div>
            @endif
        @else
            <div class="text-muted mt-3">
                ŸáŸÜŸàÿ≤ ÿ™ŸÑÿßÿ¥€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.
            </div>
        @endif

    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 150. index.blade.php

**Path:** `resources/views/dashboard/teacher/students/index.blade.php`  
**Size:** 51,108 bytes  
**Modified:** 2025-12-04 20:18:38

----------------------------------------------------------------------

> **Note:** Large file - content truncated

..................................................

@extends('layouts.app')
@section('title', 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ŸÖŸÜ')

@push('styles')
    <style>
        /* ÿ™ŸÖ ⁄©ÿßŸÖŸÑ SmartEdu */
        :root {
            --primary: #7B68EE;
            --primary-light: rgba(123, 104, 238, 0.1);
            --primary-gradient: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --secondary: #FF6B9D;
            --secondary-light: rgba(255, 107, 157, 0.1);
            --accent: #00D4AA;
            --accent-light: rgba(0, 212, 170, 0.1);
            --gold: #FFD166;
            --light: #ffffff;
            --dark: #2D3047;
            --dark-light: #3A3F6D;
            --gray: #8A8D9B;
            --light-gray: #F8F9FF;
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
            --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.2);
            --gradient-1: linear-gradient(135deg, #7B68EE, #FF6B9D);
            --gradient-2: linear-gradient(135deg, #00D4AA, #4361EE);
            --gradient-3: linear-gradient(135deg, #FFD166, #FF9A3D);
            --gradient-4: linear-gradient(135deg, #7209B7, #3A0CA3);
            --radius-xl: 24px;
            --radius-lg: 20px;
            --radius-md: 16px;
            --radius-sm: 12px;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        body {
            background-color: #f5f7ff;
            color: var(--dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .students-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px 15px 80px;
            animation: fadeIn 0.6s ease both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
         

... [CONTENT TRUNCATED] ...

......................................................................

----------------------------------------------------------------------

## üìÑ 151. show.blade.php

**Path:** `resources/views/dashboard/teacher/students/show.blade.php`  
**Size:** 11,393 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')
@section('title', 'Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤')

@push('styles')
    <style>
        .card-soft {
            border: 0;
            border-radius: 1.25rem;
            box-shadow: 0 8px 24px rgba(18, 38, 63, .06)
        }

        .stat {
            background: #f8fafc;
            border-radius: 1rem;
            padding: 1rem;
            height: 100%
        }

        .badge-pill {
            border-radius: 999px;
            padding: .35rem .7rem;
            font-weight: 600
        }

        .tiny {
            font-size: .85rem
        }

        .muted {
            color: #6b7280
        }
    </style>
@endpush

@section('content')
    <div class="container py-4">

        {{-- Header --}}
        <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-4">
            <div>
                <h4 class="fw-bold mb-1">Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</h4>
                <div class="text-muted small">
                    ÿ¥ŸÜÿßÿ≥Ÿá: <span class="fw-semibold">#{{ $student->id }}</span>
                    ‚Ä¢ ÿ¥ŸÖÿßÿ±Ÿá: <span class="fw-semibold">{{ $student->phone }}</span>
                </div>
            </div>

            <div class="d-flex gap-2">
                <a href="{{ url()->previous() }}" class="btn btn-outline-secondary">
                    ÿ®ÿßÿ≤⁄Øÿ¥ÿ™
                </a>

                {{-- ŸÑ€åŸÜ⁄© ÿ±ŸÅÿ™ŸÜ ÿ®Ÿá ŸÑ€åÿ≥ÿ™ AttemptŸáÿß --}}
                <a href="{{ route('teacher.students.attempts', $student->id) }}" class="btn btn-primary">
                    ŸÜÿ™ÿß€åÿ¨ ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>

                {{--
            |--------------------------------------------------------------------------
            | NOTE:
            |--------------------------------------------------------------------------
            | ÿß⁄Øÿ± ÿßÿ≥ŸÖ ÿ±Ÿàÿ™ÿ™ ŸÅÿ±ŸÇ ÿØÿßÿ±ÿØÿå ÿß€åŸÜÿ¨ÿß ÿßÿµŸÑÿßÿ≠ ⁄©ŸÜ.
            | ŸÖÿ´ŸÑÿß:
            | route('teacher.students.attempts.index', $student->id)
            | €åÿß
            | route('teacher.attempts.student', $student->id)
            |--------------------------------------------------------------------------
            --}}
            </div>
        </div>


        @php
            // ÿß⁄Øÿ± attempts ÿßÿ≤ ⁄©ŸÜÿ™ÿ±ŸÑÿ± ŸÜ€åŸàŸÖÿØŸá ÿ®ŸàÿØÿå ÿÆÿßŸÑ€å ÿØÿ± ŸÜÿ∏ÿ± ÿ®⁄Ø€åÿ±
            $attempts = $attempts ?? collect();

            $attemptCount = $attempts->count();
            $avgPercent = $attemptCount ? round($attempts->avg('percent'), 2) : 0;

            $lastAttempt = $attempts->sortByDesc('submitted_at')->first();

            $gradedCount = $attempts->where('status', 'graded')->count();
            $pendingCount = $attempts->where('status', 'submitted')->count(); // ŸÖŸÜÿ™ÿ∏ÿ± ÿ™ÿµÿ≠€åÿ≠ ÿ™ÿ¥ÿ±€åÿ≠€å
        @endphp

        {{-- Summary Stats --}}
        <div class="row g-3 mb-4">

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ÿ™ÿπÿØÿßÿØ ÿ™ŸÑÿßÿ¥‚ÄåŸáÿß</div>
                    <div class="fs-3 fw-bold">{{ $attemptCount }}</div>
                    <div class="tiny muted mt-1">
                        graded: {{ $gradedCount }} ‚Ä¢ submitted: {{ $pendingCount }}
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ÿØÿ±ÿµÿØ</div>
                    <div class="fs-3 fw-bold">{{ $avgPercent }}%</div>
                    <div class="progress mt-2" style="height:12px;border-radius:999px">
                        <div class="progress-bar" style="width: {{ min(100, max(0, $avgPercent)) }}%"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">ÿ¢ÿÆÿ±€åŸÜ ÿ™ŸÑÿßÿ¥</div>
                    @if ($lastAttempt)
                        <div class="fw-bold fs-5 mt-1">
                            {{ $lastAttempt->percent }}%
                        </div>
                        <div class="tiny muted mt-1">
                            ÿ™ÿßÿ±€åÿÆ: {{ optional($lastAttempt->submitted_at)->format('Y/m/d H:i') ?? '‚Äî' }}
                        </div>
                    @else
                        <div class="muted mt-2">ŸáŸÜŸàÿ≤ ÿ™ŸÑÿßÿ¥€å ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá</div>
                    @endif
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat">
                    <div class="text-muted small">Ÿàÿ∂ÿπ€åÿ™ ⁄©ŸÑ€å</div>
                    <div class="mt-2">
                        @if ($pendingCount > 0)
                            <span class="badge bg-warning text-dark badge-pill">
                                ŸÖŸÜÿ™ÿ∏ÿ± ÿ™ÿµÿ≠€åÿ≠ ÿ™ÿ¥ÿ±€åÿ≠€å
                            </span>
                        @else
                            <span class="badge bg-success badge-pill">
                                ŸáŸÖŸá ÿ™ŸÑÿßÿ¥‚ÄåŸáÿß ŸÜŸáÿß€å€å ÿ¥ÿØŸá‚ÄåÿßŸÜÿØ
                            </span>
                        @endif
                    </div>
                </div>
            </div>

        </div>


        {{-- Shared Classrooms --}}
        <div class="card card-soft mb-4">
            <div class="card-body">
                <h6 class="fw-bold mb-3">⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿ¥ÿ™ÿ±⁄© ÿ¥ŸÖÿß ÿ®ÿß ÿß€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</h6>

                @php
                    $sharedClassrooms = $sharedClassrooms ?? collect();
                @endphp

                @if ($sharedClassrooms->count())
                    <div class="row g-2">
                        @foreach ($sharedClassrooms as $c)
                            <div class="col-md-4">
                                <div class="ans-box d-flex justify-content-between align-items-center">
                                    <div>
                                        <div class="fw-semibold">{{ $c->title }}</div>
                                        <div class="tiny muted">{{ $c->subject ?? '‚Äî' }} ‚Ä¢ {{ $c->grade ?? '‚Äî' }}</div>
                                    </div>
                                    <a href="{{ route('teacher.classes.show', $c->id) }}"
                                        class="btn btn-sm btn-outline-primary">
                                        ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÑÿßÿ≥
                                    </a>
                                </div>
                            </div>
                        @endforeach
                    </div>
                @else
                    <div class="text-muted">⁄©ŸÑÿßÿ≥€å ŸÖÿ¥ÿ™ÿ±⁄© €åÿßŸÅÿ™ ŸÜÿ¥ÿØ.</div>
                @endif
            </div>
        </div>


        {{-- Recent Attempts Preview --}}
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="fw-bold mb-0">ÿ¢ÿÆÿ±€åŸÜ ÿ™ŸÑÿßÿ¥‚ÄåŸáÿß</h5>
            <a href="{{ route('teacher.students.attempts', $student->id) }}" class="tiny text-decoration-none">
                ŸÖÿ¥ÿßŸáÿØŸá ŸáŸÖŸá ‚Üí
            </a>
        </div>

        @if ($attempts->count())
            <div class="card card-soft">
                <div class="table-responsive">
                    <table class="table align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>#</th>
                                <th>ÿ¢ÿ≤ŸÖŸàŸÜ</th>
                                <th>ŸÜŸÖÿ±Ÿá</th>
                                <th>ÿØÿ±ÿµÿØ</th>
                                <th>Ÿàÿ∂ÿπ€åÿ™</th>
                                <th>ÿ™ÿßÿ±€åÿÆ ÿßÿ±ÿ≥ÿßŸÑ</th>
                                <th class="text-end">ÿπŸÖŸÑ€åÿßÿ™</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($attempts->sortByDesc('submitted_at')->take(5) as $a)
                                <tr>
                                    <td>{{ $a->id }}</td>
                                    <td class="fw-semibold">
                                        {{ $a->exam->title ?? '‚Äî' }}
                                    </td>
                                    <td>
                                        {{ $a->score_obtained ?? 0 }} / {{ $a->score_total ?? 0 }}
                                    </td>
                                    <td>
                                        <span class="fw-bold">{{ $a->percent ?? 0 }}%</span>
                                    </td>
                                    <td>
                                        @if ($a->status === 'graded')
                                            <span class="badge bg-success badge-pill">graded</span>
                                        @elseif($a->status === 'submitted')
                                            <span class="badge bg-warning text-dark badge-pill">submitted</span>
                                        @else
                                            <span class="badge bg-secondary badge-pill">{{ $a->status }}</span>
                                        @endif
                                    </td>
                                    <td class="tiny muted">
                                        {{ optional($a->submitted_at)->format('Y/m/d H:i') ?? '‚Äî' }}
                                    </td>
                                    <td class="text-end">
                                        <a href="{{ route('teacher.attempts.show', $a->id) }}"
                                            class="btn btn-sm btn-outline-primary">
                                            ÿ¨ÿ≤ÿ¶€åÿßÿ™ / ÿ™ÿµÿ≠€åÿ≠
                                        </a>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
                </div>
            </div>
        @else
            <div class="text-muted mt-3">ŸáŸÜŸàÿ≤ ÿ™ŸÑÿßÿ¥€å ÿ®ÿ±ÿß€å ÿß€åŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™.</div>
        @endif


        {{--
    |--------------------------------------------------------------------------
    | CONTROLLER EXPECTATION (for your reference)
    |--------------------------------------------------------------------------
    | ÿØÿ± TeacherStudentController@show ÿ®Ÿáÿ™ÿ± ÿßÿ≥ÿ™ ÿß€åŸÜ‚ÄåŸáÿß ÿ±ÿß ÿ®ŸÅÿ±ÿ≥ÿ™€å:
    |
    | $student = User::students()->findOrFail($id);
    |
    | // ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖÿ¥ÿ™ÿ±⁄© ÿß€åŸÜ ŸÖÿπŸÑŸÖ ÿ®ÿß ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
    | $sharedClassrooms = Classroom::where('teacher_id', auth()->id())
    |     ->whereHas('students', fn($q) => $q->where('users.id', $student->id))
    |     ->get();
    |
    | // AttemptŸáÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ÿØÿ± ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸáŸÖ€åŸÜ ŸÖÿπŸÑŸÖ
    | $attempts = Attempt::where('student_id', $student->id)
    |    ->whereHas('exam', fn($q) => $q->where('teacher_id', auth()->id()))
    |    ->with('exam')
    |    ->latest('submitted_at')
    |    ->get();
    |
    | return view('dashboard.teacher.students.show',
    |     compact('student','sharedClassrooms','attempts'));
    |--------------------------------------------------------------------------
    --}}
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 152. index.blade.php

**Path:** `resources/views/dashboard/teacher/subjects/index.blade.php`  
**Size:** 1,108 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.app')

@section('content')
    <div class="container py-4">
        <h4 class="mb-3">ŸÖÿØ€åÿ±€åÿ™ ÿØÿ±ÿ≥‚ÄåŸáÿß (Subjects)</h4>

        @if (session('success'))
            <div class="alert alert-success">{{ session('success') }}</div>
        @endif

        <div class="card shadow-sm">
            <div class="card-body">
                <form method="POST" action="{{ route('teacher.subjects.store') }}">
                    @csrf
                    <div class="mb-3">
                        <label class="form-label">ŸÜÿßŸÖ ÿØÿ±ÿ≥</label>
                        <input type="text" name="title" class="form-control @error('title') is-invalid @enderror"
                            value="{{ old('title') }}" placeholder="ŸÖÿ´ŸÑÿßŸã ÿ±€åÿßÿ∂€å">
                        @error('title')
                            <div class="invalid-feedback">{{ $message }}</div>
                        @enderror
                    </div>
                    <button class="btn btn-primary">ÿ´ÿ®ÿ™ ÿØÿ±ÿ≥</button>
                </form>
            </div>
        </div>
    </div>
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 153. index.blade.php

**Path:** `resources/views/landing/index.blade.php`  
**Size:** 1,343 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@extends('layouts.guest')

@section('title', 'ÿ≥ÿßŸÖÿßŸÜŸá ŸáŸàÿ¥ŸÖŸÜÿØ ÿ¢ŸÖŸàÿ≤ÿ¥ | ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ¢ŸÜŸÑÿß€åŸÜ ÿ™ŸÇŸà€åÿ™€åÿå ⁄©ŸÜ⁄©Ÿàÿ± Ÿà ÿßŸÑŸÖŸæ€åÿßÿØ')

@section('content')
    @include('shared.navigation')

    @include('partials.landing.hero')
    @include('partials.landing.features')
    @include('partials.landing.levels')
    @include('partials.landing.pricing')
    @include('partials.landing.screenshots')
    @include('partials.landing.samples')
    @include('partials.landing.demo')
    @include('partials.landing.testimonials')
    @include('partials.landing.cta')
    @include('partials.landing.faq')
    @include('partials.landing.footer')

    @include('shared.auth-modal')

    {{-- ŸÅŸÇÿ∑ ÿß⁄Øÿ± ÿ≥ÿ±Ÿàÿ± ⁄ØŸÅÿ™ ŸÜ€åÿßÿ≤ ÿ®Ÿá ŸÜŸÇÿ¥ Ÿáÿ≥ÿ™ÿå ŸÖŸàÿØÿßŸÑ ÿ±ÿß ÿ®ÿßÿ≤ ⁄©ŸÜ --}}
    @if (session('need_role'))
        @push('scripts')
            <script>
                document.addEventListener("DOMContentLoaded", () => {
                    const authModalEl = document.getElementById('authModal');
                    if (!authModalEl || !window.bootstrap) return;

                    const authModal = new bootstrap.Modal(authModalEl);
                    authModal.show();

                    if (window.showStep) showStep(3);
                });
            </script>
        @endpush
    @endif
@endsection

......................................................................

----------------------------------------------------------------------

## üìÑ 154. app.blade.php

**Path:** `resources/views/layouts/app.blade.php`  
**Size:** 3,538 bytes  
**Modified:** 2025-12-07 13:30:17

----------------------------------------------------------------------

<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>@yield('title', 'Smart Edu | ŸæŸÜŸÑ ⁄©ÿßÿ±ÿ®ÿ±€å')</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

    <link rel="stylesheet" href="{{ asset('assets/css/dashboard.css') }}">

    <style>
        body {
            font-family: Vazirmatn, system-ui, -apple-system, "Segoe UI", sans-serif;
            background: #f8fafc;
            padding-top: 70px;
            /* ŸÅÿßÿµŸÑŸá ÿ≤€åÿ± navbar ÿ´ÿßÿ®ÿ™ */
        }

        .app-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-body {
            flex: 1;
            display: flex;
            min-height: calc(100vh - 70px);
        }

        .sidebar-wrap {
            width: 260px;
            flex-shrink: 0;
            background: #fff;
            border-left: 1px solid #e5e7eb;
        }

        .content-wrap {
            flex: 1;
            padding: 1.25rem;
            background: #f8fafc;
        }

        @media (max-width: 992px) {
            .sidebar-wrap {
                width: 220px;
            }
        }

        @media (max-width: 768px) {
            .app-body {
                flex-direction: column;
            }

            .sidebar-wrap {
                width: 100%;
                border-left: 0;
                border-bottom: 1px solid #e5e7eb;
            }
        }
    </style>

    @stack('styles')
</head>

<body>
    <div class="app-wrapper">

        {{-- NAVBAR --}}
        @include('layouts.app.navbar')

        <div class="app-body">

{{-- SIDEBAR --}}
<div class="sidebar-wrap">
    @php
        $user = auth()->user();

        // ŸÜŸÇÿ¥ ŸÅÿπŸÑ€å: ÿßŸàŸÑ selected_role (ŸÜŸÇÿ¥ ÿßŸÜÿ™ÿÆÿßÿ®€å)ÿå ÿß⁄Øÿ± ŸÜÿ®ŸàÿØ status
        $role = $role
            ?? ($user->selected_role ?? null)
            ?? ($user->status ?? null);
    @endphp

                @if ($role === 'student')
                    @include('layouts.app.sidebar-student')

                @elseif ($role === 'teacher')
                    @include('layouts.app.sidebar-teacher')

                @elseif ($role === 'admin')
                    {{-- ‚úÖ ÿ≥ÿß€åÿØÿ®ÿßÿ± ÿßÿØŸÖ€åŸÜ ÿ™Ÿà€å partials Ÿáÿ≥ÿ™ --}}
                    @include('layouts.app.sidebar-admin')

                @else
                    <div class="p-3 text-muted small">
                        ŸÜŸÇÿ¥ ÿ¥ŸÖÿß ŸÖÿ¥ÿÆÿµ ŸÜ€åÿ≥ÿ™. ŸÑÿ∑ŸÅÿßŸã ÿßÿ≤ ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å ÿØŸàÿ®ÿßÿ±Ÿá Ÿàÿßÿ±ÿØ ÿ¥Ÿà€åÿØ.
                    </div>
                @endif
            </div>


            {{-- MAIN --}}
            <main class="content-wrap">
                @yield('content')
            </main>

        </div>
    </div>

    <form id="logoutForm" method="POST" action="{{ route('logout') }}" class="d-none">
        @csrf
    </form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @stack('scripts')
</body>

</html>

......................................................................

----------------------------------------------------------------------

## üìÑ 155. navbar.blade.php

**Path:** `resources/views/layouts/app/navbar.blade.php`  
**Size:** 2,695 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top shadow-sm">
    <div class="container-fluid px-3">

        {{-- Brand --}}
        <a class="navbar-brand d-flex align-items-center gap-2 fw-bold" href="{{ route('landing') }}">
            <i class="fas fa-graduation-cap"></i>
            Smart Edu
        </a>

        {{-- Mobile sidebar toggle (ŸÅÿπŸÑÿßŸã ŸÅŸÇÿ∑ UI) --}}
        <button class="btn btn-outline-light d-lg-none ms-2" type="button" data-bs-toggle="offcanvas"
            data-bs-target="#sidebarOffcanvas">
            <i class="fas fa-bars"></i>
        </button>

        {{-- Right side --}}
        <div class="ms-auto d-flex align-items-center gap-3">

            {{-- notifications placeholder --}}
            <button class="btn btn-light btn-sm position-relative">
                <i class="fas fa-bell text-primary"></i>
                <span class="position-absolute top-0 start-0 translate-middle badge rounded-pill bg-danger">
                    0
                </span>
            </button>

            {{-- User dropdown --}}
            <div class="dropdown">
                <button class="btn btn-outline-light btn-sm dropdown-toggle d-flex align-items-center gap-2"
                    type="button" data-bs-toggle="dropdown">
                    <i class="fas fa-user-circle fs-5"></i>
                    <span class="d-none d-md-inline">
                        {{ auth()->user()->name ?? '⁄©ÿßÿ±ÿ®ÿ±' }}
                    </span>
                </button>

                <ul class="dropdown-menu dropdown-menu-end text-end shadow">
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="fas fa-user-edit ms-2"></i>
                            Ÿæÿ±ŸàŸÅÿß€åŸÑ
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="#">
                            <i class="fas fa-repeat ms-2"></i>
                            ÿ™ÿ∫€å€åÿ± ŸÜŸÇÿ¥
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <form method="POST" action="{{ route('logout') }}">
                            @csrf
                            <button class="dropdown-item text-danger">
                                <i class="fas fa-sign-out-alt ms-2"></i>
                                ÿÆÿ±Ÿàÿ¨
                            </button>
                        </form>
                    </li>
                </ul>
            </div>

        </div>
    </div>
</nav>

......................................................................

----------------------------------------------------------------------

## üìÑ 156. sidebar-admin.blade.php

**Path:** `resources/views/layouts/app/sidebar-admin.blade.php`  
**Size:** 4,773 bytes  
**Modified:** 2025-12-07 13:33:59

----------------------------------------------------------------------

{{-- resources/views/partials/sidebar-admin.blade.php --}}
@php
    $currentRoute = request()->route()?->getName();
    $isTaxonomyActive =
        str_starts_with($currentRoute ?? '', 'admin.sections') ||
        str_starts_with($currentRoute ?? '', 'admin.grades') ||
        str_starts_with($currentRoute ?? '', 'admin.branches') ||
        str_starts_with($currentRoute ?? '', 'admin.fields') ||
        str_starts_with($currentRoute ?? '', 'admin.subfields') ||
        str_starts_with($currentRoute ?? '', 'admin.subject-types') ||
        str_starts_with($currentRoute ?? '', 'admin.subjects');

    $openClass = $isTaxonomyActive ? 'show' : '';
    $activeClass = $isTaxonomyActive ? 'active' : '';
@endphp

<aside class="sidebar-admin bg-white border-start h-100" style="width:100%;">

    <div class="px-3 py-2">

        {{-- ===== Dashboard ===== --}}
        <a href="{{ route('admin.dashboard') }}"
            class="d-flex align-items-center gap-2 py-2 px-2 rounded text-decoration-none
                  {{ $currentRoute === 'admin.dashboard' ? 'bg-light fw-bold' : '' }}">
            <i class="fas fa-home text-primary"></i>
            <span>ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ÿßÿØŸÖ€åŸÜ</span>
        </a>

        <hr class="my-3">

        {{-- ===== Taxonomy Group ===== --}}
        <div class="mb-2">
            <button
                class="btn w-100 text-start d-flex justify-content-between align-items-center px-2 py-2 rounded {{ $activeClass }}"
                data-bs-toggle="collapse" data-bs-target="#taxonomyMenu"
                aria-expanded="{{ $isTaxonomyActive ? 'true' : 'false' }}">
                <span class="d-flex align-items-center gap-2">
                    <i class="fas fa-sitemap text-success"></i>
                    ÿØÿ≥ÿ™Ÿá‚Äåÿ®ŸÜÿØ€å ÿ≥ÿßÿÆÿ™ÿßÿ±
                </span>
                <i class="fas fa-chevron-down small"></i>
            </button>

            <div id="taxonomyMenu" class="collapse {{ $openClass }} mt-2">

                <a href="{{ route('admin.sections.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.sections') ? 'bg-light fw-bold' : '' }}">
                    üìå ŸÖŸÇÿßÿ∑ÿπ (Sections)
                </a>

                <a href="{{ route('admin.grades.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.grades') ? 'bg-light fw-bold' : '' }}">
                    üéì Ÿæÿß€åŸá‚ÄåŸáÿß (Grades)
                </a>

                <a href="{{ route('admin.branches.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.branches') ? 'bg-light fw-bold' : '' }}">
                    üß≠ ÿ¥ÿßÿÆŸá‚ÄåŸáÿß (Branches)
                </a>

                <a href="{{ route('admin.fields.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.fields') ? 'bg-light fw-bold' : '' }}">
                    üè≠ ÿ≤ŸÖ€åŸÜŸá‚ÄåŸáÿß (Fields)
                </a>

                <a href="{{ route('admin.subfields.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.subfields') ? 'bg-light fw-bold' : '' }}">
                    üî¨ ÿ≤€åÿ±ÿ±ÿ¥ÿ™Ÿá‚ÄåŸáÿß (Subfields)
                </a>

                <a href="{{ route('admin.subject-types.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.subject-types') ? 'bg-light fw-bold' : '' }}">
                    üß© ŸÜŸàÿπ ÿØÿ±ÿ≥ (Subject Types)
                </a>

                <a href="{{ route('admin.subjects.index') }}"
                    class="d-block py-2 px-3 rounded text-decoration-none {{ str_starts_with($currentRoute ?? '', 'admin.subjects') ? 'bg-light fw-bold' : '' }}">
                    üìö ÿØÿ±Ÿàÿ≥ (Subjects)
                </a>

            </div>
        </div>

        <hr class="my-3">

        {{-- ===== Reports / Profile (ÿßÿÆÿ™€åÿßÿ±€å) ===== --}}
        <a href="#" class="d-flex align-items-center gap-2 py-2 px-2 rounded text-decoration-none">
            <i class="fas fa-chart-line text-warning"></i>
            <span>⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß</span>
        </a>

        <a href="#" class="d-flex align-items-center gap-2 py-2 px-2 rounded text-decoration-none">
            <i class="fas fa-user-cog text-secondary"></i>
            <span>Ÿæÿ±ŸàŸÅÿß€åŸÑ</span>
        </a>

    </div>
</aside>

{{-- ŸÅÿßÿµŸÑŸá ŸÖÿ≠ÿ™Ÿàÿß ÿßÿ≤ ÿ≥ÿß€åÿØÿ®ÿßÿ± --}}
<style>
    .sidebar-admin a:hover {
        background: #f7f7f7;
    }
</style>

......................................................................

----------------------------------------------------------------------

## üìÑ 157. sidebar-student.blade.php

**Path:** `resources/views/layouts/app/sidebar-student.blade.php`  
**Size:** 2,912 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<aside class="sidebar bg-white border-end p-3 h-100">
    <div class="fw-bold mb-3 text-primary">
        <i class="fas fa-user-graduate ms-1"></i>
        ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
    </div>

    <ul class="nav flex-column gap-1">

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('dashboard.student') ? 'active' : '' }}"
                href="{{ route('student.index') }}">
                <i class="fas fa-home ms-2"></i> ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.exams.*') ? 'active' : '' }}"
                href="{{ route('student.exams.index') }}">
                <i class="fas fa-file-pen ms-2"></i> ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.reports.*') ? 'active' : '' }}"
                href="{{ route('student.reports.index') }}">
                <i class="fas fa-chart-line ms-2"></i> ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.learning-path') ? 'active' : '' }}"
                href="{{ route('student.learning-path') }}">
                <i class="fas fa-route ms-2"></i> ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.my-teachers.*') ? 'active' : '' }}"
                href="{{ route('student.my-teachers.index') }}">
                <i class="bi bi-people-fill ms-1"></i>

                ŸÖÿπŸÑŸÖÿßŸÜ ŸÖŸÜ
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.classrooms.*') ? 'active' : '' }}"
                href="{{ route('student.classrooms.index') }}">
                <i class="fas fa-users ms-2"></i> ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.support.*') ? 'active' : '' }}"
                href="{{ route('student.support.index') }}">
                <i class="fas fa-headset ms-2"></i> Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('student.profile') ? 'active' : '' }}"
                href="{{ route('student.profile') }}">
                <i class="fas fa-user ms-2"></i> Ÿæÿ±ŸàŸÅÿß€åŸÑ
            </a>
        </li>

        <li class="nav-item mt-2">
            <hr>
        </li>

        <li class="nav-item">
            <a class="nav-link text-danger" href="#"
                onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
                <i class="fas fa-sign-out-alt ms-2"></i> ÿÆÿ±Ÿàÿ¨
            </a>
        </li>

    </ul>
</aside>

......................................................................

----------------------------------------------------------------------

## üìÑ 158. sidebar-teacher.blade.php

**Path:** `resources/views/layouts/app/sidebar-teacher.blade.php`  
**Size:** 2,323 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<aside class="sidebar bg-white border-end p-3 h-100">
    <div class="fw-bold mb-3 text-success">
        <i class="fas fa-chalkboard-teacher ms-1"></i>
        ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ
    </div>

    <ul class="nav flex-column gap-1">

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('dashboard.teacher') ? 'active' : '' }}"
                href="{{ route('teacher.index') }}">
                <i class="fas fa-home ms-2"></i> ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.exams.*') ? 'active' : '' }}"
                href="{{ route('teacher.exams.index') }}">
                <i class="fas fa-plus-circle ms-2"></i> ÿ≥ÿßÿÆÿ™ / ŸÖÿØ€åÿ±€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.classes.*') ? 'active' : '' }}"
                href="{{ route('teacher.classes.index') }}">
                <i class="fas fa-users ms-2"></i> ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß€å ŸÖŸÜ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.students') ? 'active' : '' }}"
                href="{{ route('teacher.students.index') }}">
                <i class="fas fa-user-graduate ms-2"></i> ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.reports.*') ? 'active' : '' }}"
                href="{{ route('teacher.reports.index') }}">
                <i class="fas fa-chart-bar ms-2"></i> ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link {{ request()->routeIs('teacher.profile') ? 'active' : '' }}"
                href="{{ route('teacher.profile') }}">
                <i class="fas fa-user ms-2"></i> Ÿæÿ±ŸàŸÅÿß€åŸÑ
            </a>
        </li>

        <li class="nav-item mt-2">
            <hr>
        </li>

        <li class="nav-item">
            <a class="nav-link text-danger" href="#"
                onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
                <i class="fas fa-sign-out-alt ms-2"></i> ÿÆÿ±Ÿàÿ¨
            </a>
        </li>

    </ul>
</aside>

......................................................................

----------------------------------------------------------------------

## üìÑ 159. sidebar.blade.php

**Path:** `resources/views/layouts/app/sidebar.blade.php`  
**Size:** 4,134 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

{{-- ========== Desktop Sidebar ========== --}}
<div class="bg-white border-end vh-100 position-fixed top-0 end-0 pt-5 d-none d-lg-block"
    style="width: 240px; margin-top:56px;">
    <div class="p-3">

        <div class="text-center mb-4">
            <div class="fw-bold">ŸæŸÜŸÑ ⁄©ÿßÿ±ÿ®ÿ±€å</div>
            <small class="text-muted">
                {{ auth()->user()->phone ?? 'ÿ¥ŸÖÿßÿ±Ÿá ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá' }}
            </small>
        </div>

        <ul class="nav flex-column gap-1">

            <li class="nav-item">
                <a class="nav-link active rounded-3" href="#">
                    <i class="fas fa-home ms-2"></i>
                    ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-file-pen ms-2"></i>
                    ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-chart-line ms-2"></i>
                    ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-medal ms-2"></i>
                    ÿßŸÖÿ™€åÿßÿ≤ Ÿà ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-gear ms-2"></i>
                    ÿ™ŸÜÿ∏€åŸÖÿßÿ™
                </a>
            </li>

        </ul>

        <hr>

        <form method="POST" action="{{ route('logout') }}">
            @csrf
            <button class="btn btn-outline-danger w-100 rounded-3">
                <i class="fas fa-sign-out-alt ms-2"></i>
                ÿÆÿ±Ÿàÿ¨
            </button>
        </form>

    </div>
</div>


{{-- ========== Mobile Offcanvas Sidebar ========== --}}
<div class="offcanvas offcanvas-end d-lg-none" tabindex="-1" id="sidebarOffcanvas">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold">
            <i class="fas fa-graduation-cap ms-2"></i>
            Smart Edu
        </h5>
        <button type="button" class="btn-close ms-0" data-bs-dismiss="offcanvas"></button>
    </div>

    <div class="offcanvas-body">

        <div class="text-center mb-4">
            <div class="fw-bold">ŸæŸÜŸÑ ⁄©ÿßÿ±ÿ®ÿ±€å</div>
            <small class="text-muted">
                {{ auth()->user()->phone ?? 'ÿ¥ŸÖÿßÿ±Ÿá ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá' }}
            </small>
        </div>

        <ul class="nav flex-column gap-1">

            <li class="nav-item">
                <a class="nav-link active rounded-3" href="#">
                    <i class="fas fa-home ms-2"></i>
                    ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-file-pen ms-2"></i>
                    ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-chart-line ms-2"></i>
                    ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-medal ms-2"></i>
                    ÿßŸÖÿ™€åÿßÿ≤ Ÿà ŸÜÿ¥ÿßŸÜ‚ÄåŸáÿß
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link rounded-3" href="#">
                    <i class="fas fa-gear ms-2"></i>
                    ÿ™ŸÜÿ∏€åŸÖÿßÿ™
                </a>
            </li>

        </ul>

        <hr>

        <form method="POST" action="{{ route('logout') }}">
            @csrf
            <button class="btn btn-outline-danger w-100 rounded-3">
                <i class="fas fa-sign-out-alt ms-2"></i>
                ÿÆÿ±Ÿàÿ¨
            </button>
        </form>

    </div>
</div>

......................................................................

----------------------------------------------------------------------

## üìÑ 160. guest.blade.php

**Path:** `resources/views/layouts/guest.blade.php`  
**Size:** 1,670 bytes  
**Modified:** 2025-12-06 09:57:09

----------------------------------------------------------------------

<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>@yield('title', 'ÿ≥ÿßŸÖÿßŸÜŸá ŸáŸàÿ¥ŸÖŸÜÿØ ÿ¢ŸÖŸàÿ≤ÿ¥ | Smart Edu')</title>

    {{-- Vendor CSS --}}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

    {{-- Shared Theme (ÿ®ÿ±ÿß€å ŸáŸÖÿßŸáŸÜ⁄Ø€å ÿ®ÿß partialŸáÿß) --}}
    <link rel="stylesheet" href="{{ asset('assets/css/theme.css') }}">

    {{-- Landing CSS --}}
    <link rel="stylesheet" href="{{ asset('assets/css/landing.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/app.css') }}">

    <style>
        body {
            font-family: Vazirmatn, system-ui, -apple-system, "Segoe UI", sans-serif;
            background: #f8fafc;
            padding-top: 70px;
            /* ÿß⁄Øÿ± navbar ÿ´ÿßÿ®ÿ™ ÿ®ÿßÿ¥ÿØ */
        }
    </style>

    @stack('styles')
</head>

<body>

    @yield('content')

    {{-- Vendor JS --}}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    {{-- Project JS --}}
    <script src="{{ asset('assets/js/app.js') }}"></script>
    <script src="{{ asset('assets/js/landing.js') }}"></script>
    <script src="{{ asset('assets/js/auth.js') }}"></script>

    @stack('scripts')
</body>

</html>

......................................................................

----------------------------------------------------------------------

## üìÑ 161. cta.blade.php

**Path:** `resources/views/partials/landing/cta.blade.php`  
**Size:** 1,987 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section>
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="cta h-100">
                    <h3 class="fw-black mb-2">ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ</h3>
                    <p class="text-muted">
                        ÿ®ÿß ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸÖŸÜÿ∏ŸÖÿå ÿØŸÇ€åŸÇÿßŸã ŸÖ€å‚ÄåŸÅŸáŸÖ€åÿØ ⁄©ÿ¨ÿßŸáÿß ÿ∂ÿπŸÅ ÿØÿßÿ±€åÿØ Ÿà ⁄ÜŸá ÿ™ŸÖÿ±€åŸÜ€å ŸÖŸÜÿßÿ≥ÿ® ÿ¥ŸÖÿßÿ≥ÿ™.
                    </p>
                    <ul class="text-muted small">
                        <li>ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ Ÿà ÿ®ÿ±ŸÜÿßŸÖŸá‚ÄåÿØÿßÿ±</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ ÿÆŸàÿØ⁄©ÿßÿ± Ÿà ŸÖÿ≥€åÿ± ÿßÿÆÿ™ÿµÿßÿµ€å</li>
                        <li>Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ™ŸÖÿ±€åŸÜ ÿ®ÿ±ÿß€å ÿ±ŸÅÿπ ÿ∂ÿπŸÅ‚ÄåŸáÿß</li>
                    </ul>
                    <button class="btn btn-primary px-4" data-bs-toggle="modal" data-bs-target="#authModal">
                        ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                    </button>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="cta h-100">
                    <h3 class="fw-black mb-2">ÿ®ÿ±ÿß€å ŸÖÿπŸÑŸÖÿßŸÜ</h3>
                    <p class="text-muted">
                        ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ ÿ®ÿ±ÿß€å ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜÿå ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥ Ÿà ŸÖÿ¥ÿßŸáÿØŸá‚Äå€å ⁄Øÿ≤ÿßÿ±ÿ¥ ÿπŸÖŸÑ⁄©ÿ±ÿØ.
                    </p>
                    <ul class="text-muted small">
                        <li>ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥ Ÿà ⁄Øÿ±ŸàŸá‚Äåÿ®ŸÜÿØ€å</li>
                        <li>ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿß ÿ®ÿßŸÜ⁄© ÿ≥ŸàÿßŸÑ</li>
                        <li>⁄Øÿ≤ÿßÿ±ÿ¥ Ÿà ÿ™ÿ≠ŸÑ€åŸÑ ÿπŸÖŸÑ⁄©ÿ±ÿØ ⁄©ŸÑÿßÿ≥</li>
                    </ul>
                    <button class="btn btn-outline-primary px-4" data-bs-toggle="modal" data-bs-target="#authModal">
                        ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ ŸÖÿπŸÑŸÖ
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 162. demo.blade.php

**Path:** `resources/views/partials/landing/demo.blade.php`  
**Size:** 4,143 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="demo" class="bg-light">
    <div class="container">
        <div class="row align-items-center g-4">
            <div class="col-lg-6">
                <h2 class="section-title">ŸÜŸÖŸàŸÜŸá ⁄Øÿ≤ÿßÿ±ÿ¥ ŸáŸàÿ¥ŸÖŸÜÿØ ÿ®ÿπÿØ ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ</h2>
                <p class="section-sub">
                    ÿ®ÿπÿØ ÿßÿ≤ Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜÿå €å⁄© ⁄Øÿ≤ÿßÿ±ÿ¥ ⁄©ÿßŸÖŸÑÿßŸã ŸÇÿßÿ®ŸÑ‚ÄåŸÅŸáŸÖ ÿØÿ±€åÿßŸÅÿ™ ŸÖ€å‚Äå⁄©ŸÜ€åÿØ ⁄©Ÿá ÿØŸÇ€åŸÇÿßŸã ŸÖ€å‚Äå⁄ØŸà€åÿØ
                    ¬´⁄©ÿ¨ÿßŸáÿß ÿ®ÿß€åÿØ ÿ®€åÿ¥ÿ™ÿ± ⁄©ÿßÿ± ⁄©ŸÜ€åÿØ¬ª Ÿà ¬´⁄ÜŸá ÿ™ŸÖÿ±€åŸÜ€å ŸÖŸÜÿßÿ≥ÿ® ÿ¥ŸÖÿßÿ≥ÿ™¬ª.
                </p>

                <div class="row g-3 mt-3">
                    <div class="col-6">
                        <div class="mock">
                            <div class="mock-header">
                                <div class="fw-bold">ŸÜŸÇÿßÿ∑ ŸÇŸàÿ™</div>
                                <i class="fas fa-thumbs-up text-success"></i>
                            </div>
                            <ul class="small text-muted mb-0">
                                <li>ÿ±€åÿßÿ∂€å: ŸÖÿπÿßÿØŸÑÿßÿ™ (€π€∞Ÿ™)</li>
                                <li>ŸÅ€åÿ≤€å⁄©: ÿ≠ÿ±⁄©ÿ™‚Äåÿ¥ŸÜÿßÿ≥€å (€∏€µŸ™)</li>
                                <li>ÿ¥€åŸÖ€å: ÿßÿ≥ÿ™Ÿà⁄©€åŸàŸÖÿ™ÿ±€å (€∏€∞Ÿ™)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="mock">
                            <div class="mock-header">
                                <div class="fw-bold">ŸÜŸÇÿßÿ∑ ÿ∂ÿπŸÅ</div>
                                <i class="fas fa-triangle-exclamation text-danger"></i>
                            </div>
                            <ul class="small text-muted mb-0">
                                <li>ÿ±€åÿßÿ∂€å: ÿ≠ÿØ Ÿà Ÿæ€åŸàÿ≥ÿ™⁄Ø€å (€¥€∞Ÿ™)</li>
                                <li>ŸÅ€åÿ≤€å⁄©: ŸÜŸàÿ≥ÿßŸÜ (€≥€µŸ™)</li>
                                <li>ÿ≤€åÿ≥ÿ™: ⁄òŸÜÿ™€å⁄© (€¥€µŸ™)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="mock mt-3">
                    <div class="mock-header">
                        <div class="fw-bold">ŸÜŸÖŸàÿØÿßÿ± Ÿæ€åÿ¥ÿ±ŸÅÿ™ ŸáŸÅÿ™⁄Ø€å</div>
                        <span class="badge text-bg-primary">ÿÆŸàÿØ⁄©ÿßÿ±</span>
                    </div>
                    <div class="bars small text-muted">
                        ÿ±€åÿßÿ∂€å <span style="--w:70%"></span>
                        ŸÅ€åÿ≤€å⁄© <span style="--w:55%"></span>
                        ÿ¥€åŸÖ€å <span style="--w:62%"></span>
                        ÿ≤€åÿ≥ÿ™ <span style="--w:48%"></span>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="mock h-100">
                    <div class="mock-header">
                        <div class="fw-bold">ÿ¨ŸÖÿπ‚Äåÿ®ŸÜÿØ€å ŸáŸàÿ¥ŸÖŸÜÿØ</div>
                        <i class="fas fa-wand-magic-sparkles text-primary"></i>
                    </div>
                    <p class="text-muted small">
                        ÿ≥ÿßŸÖÿßŸÜŸá ÿ®ÿπÿØ ÿßÿ≤ Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜÿå €å⁄© ÿ®ÿ±ŸÜÿßŸÖŸá ÿ™ŸÖÿ±€åŸÜ€å ⁄©Ÿàÿ™ÿßŸá Ÿà ŸáÿØŸÅŸÖŸÜÿØ ŸÖ€å‚ÄåÿØŸáÿØ.
                    </p>

                    <div class="p-3 rounded-4 border bg-light">
                        <div class="fw-bold mb-2">Ÿæ€åÿ¥ŸÜŸáÿßÿØ ŸáŸÅÿ™Ÿá ÿ¢€åŸÜÿØŸá</div>
                        <ul class="small text-muted mb-0">
                            <li>€≥ ÿ™ŸÖÿ±€åŸÜ ÿßÿ≤ ŸÖÿ®ÿ≠ÿ´ ¬´ÿ≠ÿØ Ÿà Ÿæ€åŸàÿ≥ÿ™⁄Ø€å¬ª</li>
                            <li>€± ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÇŸà€åÿ™€å ŸÅÿµŸÑ €≥ ÿ±€åÿßÿ∂€å</li>
                            <li>€≤ ÿ¨ŸÑÿ≥Ÿá ŸÖÿ±Ÿàÿ± ŸÜŸàÿ≥ÿßŸÜ</li>
                        </ul>
                    </div>

                    <button class="btn btn-outline-primary w-100 mt-3" data-bs-toggle="modal"
                        data-bs-target="#authModal">
                        ŸÖŸÜ ŸáŸÖ ŸÖ€å‚ÄåÿÆŸàÿßŸáŸÖ ⁄Øÿ≤ÿßÿ±ÿ¥ ÿ®⁄Ø€åÿ±ŸÖ
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 163. faq.blade.php

**Path:** `resources/views/partials/landing/faq.blade.php`  
**Size:** 2,621 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="faq" class="bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">ÿ≥ŸàÿßŸÑÿßÿ™ Ÿæÿ±ÿ™⁄©ÿ±ÿßÿ±</h2>
            <p class="section-sub">ÿß⁄Øÿ± ÿ≥ŸàÿßŸÑ ÿ¥ŸÖÿß ÿß€åŸÜÿ¨ÿß ŸÜÿ®ŸàÿØÿå Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å Ÿæÿßÿ≥ÿÆ⁄ØŸàÿ≥ÿ™.</p>
        </div>

        <div class="accordion" id="faqAcc">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#q1">
                        ÿ¢€åÿß ÿ®ÿØŸàŸÜ Ÿæÿ±ÿØÿßÿÆÿ™ ŸÖ€å‚Äåÿ™ŸàÿßŸÜŸÖ ÿßÿ≤ ÿ≥ÿßŸÖÿßŸÜŸá ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜŸÖÿü
                    </button>
                </h2>
                <div id="q1" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                    <div class="accordion-body text-muted">
                        ÿ®ŸÑŸá. ÿØÿ± ÿ≠ÿßŸÑÿ™ ÿ±ÿß€å⁄ØÿßŸÜÿå Ÿáÿ± ŸáŸÅÿ™Ÿá ÿ™ÿπÿØÿßÿØ ŸÖÿ¥ÿÆÿµ€å ÿ¢ÿ≤ŸÖŸàŸÜ ÿØÿ± Ÿáÿ± ÿ≥ÿ∑ÿ≠ ÿØÿßÿ±€åÿØ.
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#q2">
                        ÿØÿ± ŸæŸÑŸÜ‚ÄåŸáÿß ⁄ÜŸá ⁄Ü€åÿ≤€å ÿ™ÿ∫€å€åÿ± ŸÖ€å‚Äå⁄©ŸÜÿØÿü
                    </button>
                </h2>
                <div id="q2" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                    <div class="accordion-body text-muted">
                        ÿ®ÿß ÿßÿ±ÿ™ŸÇÿß€å ŸæŸÑŸÜÿå ŸÖÿ≠ÿØŸàÿØ€åÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ®ÿ±ÿØÿßÿ¥ÿ™Ÿá ŸÖ€å‚Äåÿ¥ŸàÿØ Ÿà ÿ≥ÿ∑ÿ≠‚ÄåŸáÿß€å ÿ®€åÿ¥ÿ™ÿ±€å ŸÅÿπÿßŸÑ ŸÖ€å‚Äå⁄Øÿ±ÿØÿØ.
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#q3">
                        ŸÖÿπŸÑŸÖÿßŸÜ ⁄Ü⁄ØŸàŸÜŸá ÿ™ÿß€å€åÿØ ŸÖ€å‚Äåÿ¥ŸàŸÜÿØÿü
                    </button>
                </h2>
                <div id="q3" class="accordion-collapse collapse" data-bs-parent="#faqAcc">
                    <div class="accordion-body text-muted">
                        Ÿæÿ≥ ÿßÿ≤ ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ ŸÖÿπŸÑŸÖÿå ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ®ÿ±ÿ±ÿ≥€å Ÿà ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ ŸÅÿπÿßŸÑ ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 164. features.blade.php

**Path:** `resources/views/partials/landing/features.blade.php`  
**Size:** 3,166 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="features">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">⁄Üÿ±ÿß ÿß€åŸÜ ÿ≥ÿßŸÖÿßŸÜŸá ÿ™ŸÅÿßŸàÿ™ ÿß€åÿ¨ÿßÿØ ŸÖ€å‚Äå⁄©ŸÜÿØÿü</h2>
            <p class="section-sub">Ÿáÿ± ÿ¨ŸÑÿ≥Ÿá ÿ¢ÿ≤ŸÖŸàŸÜÿå €å⁄© ŸÇÿØŸÖ ŸàÿßŸÇÿπ€å ÿ®Ÿá ÿ≥ŸÖÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿßÿ≥ÿ™.</p>
        </div>

        <div class="row g-4">
            @php
                $features = [
                    [
                        'icon' => 'fa-brain',
                        'title' => 'ÿ™ÿ≠ŸÑ€åŸÑ ŸáŸàÿ¥ŸÖŸÜÿØ ŸÜÿ™ÿß€åÿ¨',
                        'text' =>
                            'ÿ≥ÿßŸÖÿßŸÜŸá ÿ®Ÿá‚ÄåÿµŸàÿ±ÿ™ ÿÆŸàÿØ⁄©ÿßÿ± ŸÖÿ®ÿ≠ÿ´‚ÄåŸáÿß€å ÿ∂ÿπ€åŸÅ Ÿà ŸÇŸà€å ÿ±ÿß ÿ™ÿ¥ÿÆ€åÿµ ŸÖ€å‚ÄåÿØŸáÿØÿå Ÿà Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ™ŸÖÿ±€åŸÜ‚ÄåŸáÿß Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ®ÿπÿØ€å ÿ±ÿß ÿØŸÇ€åŸÇ‚Äåÿ™ÿ± ŸÖ€å‚Äå⁄©ŸÜÿØ.',
                    ],
                    [
                        'icon' => 'fa-route',
                        'title' => 'ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å ÿ¥ÿÆÿµ€å',
                        'text' =>
                            'ÿ®ÿß ÿ™Ÿàÿ¨Ÿá ÿ®Ÿá ÿ≥ÿ∑ÿ≠ Ÿà ŸáÿØŸÅ ÿ¥ŸÖÿß (ÿ™ŸÇŸà€åÿ™€å/⁄©ŸÜ⁄©Ÿàÿ±/ÿßŸÑŸÖŸæ€åÿßÿØ)ÿå ÿ®ÿ±ŸÜÿßŸÖŸá ÿ¢ÿ≤ŸÖŸàŸÜ Ÿà ÿ™ŸÖÿ±€åŸÜ ÿßÿÆÿ™ÿµÿßÿµ€å ŸÖ€å‚Äåÿ≥ÿßÿ≤€åŸÖ.',
                    ],
                    [
                        'icon' => 'fa-chart-line',
                        'title' => '⁄Øÿ≤ÿßÿ±ÿ¥ Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿØŸÇ€åŸÇ',
                        'text' =>
                            'ŸÜŸÖŸàÿØÿßÿ± ÿ±ÿ¥ÿØÿå ÿ±ÿ™ÿ®Ÿá ÿØÿ± ⁄©ŸÑÿßÿ≥ÿå ŸÖŸÇÿß€åÿ≥Ÿá ÿ®ÿß ŸÖ€åÿßŸÜ⁄Ø€åŸÜÿå Ÿà ÿ±ŸàŸÜÿØ ÿ®Ÿáÿ®ŸàÿØ ÿØÿ± Ÿáÿ± ÿØÿ±ÿ≥ ÿ±ÿß ÿ¥ŸÅÿßŸÅ ŸÖ€å‚Äåÿ®€åŸÜ€åÿØ.',
                    ],
                    [
                        'icon' => 'fa-clock',
                        'title' => 'ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ≤ŸÖÿßŸÜ‚Äåÿ®ŸÜÿØ€å‚Äåÿ¥ÿØŸá',
                        'text' => 'ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ⁄©ÿßŸÖŸÑ ŸÅÿ∂ÿß€å ÿ¢ÿ≤ŸÖŸàŸÜ ŸàÿßŸÇÿπ€å ÿ®ÿß ÿ™ÿß€åŸÖÿ±ÿå ⁄©ŸÜÿ™ÿ±ŸÑ ÿ™ŸÇŸÑÿ® Ÿà ÿ´ÿ®ÿ™ Ÿæÿßÿ≥ÿÆ‚ÄåŸáÿß.',
                    ],
                    [
                        'icon' => 'fa-chalkboard-teacher',
                        'title' => 'ŸæŸÜŸÑ Ÿà€å⁄òŸá ŸÖÿπŸÑŸÖÿßŸÜ',
                        'text' => 'ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜÿå ⁄Øÿ±ŸàŸá‚Äåÿ®ŸÜÿØ€å ⁄©ŸÑÿßÿ≥‚ÄåŸáÿßÿå ŸÖÿ¥ÿßŸáÿØŸá ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ Ÿà ÿßÿ±ÿ≥ÿßŸÑ ÿ™⁄©ŸÑ€åŸÅ.',
                    ],
                    [
                        'icon' => 'fa-medal',
                        'title' => 'ŸÖŸÜÿßÿ≥ÿ® ÿßŸáÿØÿßŸÅ ÿ±ŸÇÿßÿ®ÿ™€å',
                        'text' => 'ÿ®ÿ±ÿß€å ⁄©ŸÜ⁄©Ÿàÿ± Ÿà ÿßŸÑŸÖŸæ€åÿßÿØÿå ÿ≥ŸàÿßŸÑÿßÿ™ ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ ÿ¥ÿØŸá Ÿà ÿ®ÿß ÿ™ÿ≠ŸÑ€åŸÑ ÿπŸÖ€åŸÇ‚Äåÿ™ÿ± ÿßÿ±ÿßÿ¶Ÿá ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ.',
                    ],
                ];
            @endphp

            @foreach ($features as $f)
                <div class="col-md-4">
                    <div class="feature card p-4">
                        <div class="icon mb-3"><i class="fas {{ $f['icon'] }}"></i></div>
                        <h5 class="fw-bold">{{ $f['title'] }}</h5>
                        <p class="text-muted mb-0">{{ $f['text'] }}</p>
                    </div>
                </div>
            @endforeach
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 165. footer.blade.php

**Path:** `resources/views/partials/landing/footer.blade.php`  
**Size:** 518 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<footer>
    <div class="container">
        <div class="d-flex flex-column flex-md-row align-items-center justify-content-between gap-2">
            <div class="small">¬© ÿ™ŸÖÿßŸÖ€å ÿ≠ŸÇŸàŸÇ ŸÖÿ™ÿπŸÑŸÇ ÿ®Ÿá ÿ≥ÿßŸÖÿßŸÜŸá ŸáŸàÿ¥ŸÖŸÜÿØ ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿ≥ÿ™.</div>
            <div class="small">
                Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å: <span class="text-white">€∞€π€±€≤€≥€¥€µ€∂€∑€∏€π</span>
                | ÿß€åŸÖ€åŸÑ: <span class="text-white">support@example.com</span>
            </div>
        </div>
    </div>
</footer>

......................................................................

----------------------------------------------------------------------

## üìÑ 166. hero.blade.php

**Path:** `resources/views/partials/landing/hero.blade.php`  
**Size:** 5,708 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<header class="hero">
    <div class="container">
        <div class="row align-items-center g-4">

            {{-- RIGHT / TEXT SIDE --}}
            <div class="col-lg-7">
                <div class="hero-badge">
                    <i class="fa-solid fa-sparkles"></i>
                    ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ŸáŸàÿ¥ŸÖŸÜÿØ + ÿ™ÿ≠ŸÑ€åŸÑ ÿπŸÖŸÑ⁄©ÿ±ÿØ + ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å ÿ¥ÿÆÿµ€å
                </div>

                <h1 class="hero-title">
                    €åÿßÿØ⁄Ø€åÿ±€å ŸáÿØŸÅŸÖŸÜÿØÿå ŸÜÿ™€åÿ¨Ÿá‚Äå€å ŸàÿßŸÇÿπ€å
                    <span class="hero-gradient">ÿ®ÿ±ÿß€å ÿ™ŸÇŸà€åÿ™€åÿå ⁄©ŸÜ⁄©Ÿàÿ± Ÿà ÿßŸÑŸÖŸæ€åÿßÿØ</span>
                </h1>

                <p class="hero-sub">
                    ÿ®ÿß ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ≤ŸÖÿßŸÜ‚Äåÿ®ŸÜÿØ€å‚Äåÿ¥ÿØŸáÿå ÿ™ÿ≠ŸÑ€åŸÑ ÿØŸÇ€åŸÇ ŸÜŸÇÿßÿ∑ ÿ∂ÿπŸÅ Ÿà ŸÇŸàÿ™ÿå Ÿà Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ™ŸÖÿ±€åŸÜ‚ÄåŸáÿß€å ÿßÿÆÿ™ÿµÿßÿµ€åÿå
                    ÿ±ÿ¥ÿØ ÿ™ÿ≠ÿµ€åŸÑ€å ÿ¥ŸÖÿß ŸÇÿßÿ®ŸÑ ÿßŸÜÿØÿßÿ≤Ÿá‚Äå⁄Ø€åÿ±€å Ÿà ŸÇÿßÿ®ŸÑ Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å ŸÖ€å‚Äåÿ¥ŸàÿØ.
                </p>

                <div class="d-flex gap-3 mt-4 hero-actions">
                    <button class="btn btn-primary btn-lg px-4" data-bs-toggle="modal" data-bs-target="#authModal">
                        ÿ¥ÿ±Ÿàÿπ ÿ±ÿß€å⁄ØÿßŸÜ
                        <i class="fas fa-rocket me-2"></i>
                    </button>
                    <button class="btn btn-outline-light btn-lg px-4" onclick="scrollToSection('features')">
                        ÿßŸÖ⁄©ÿßŸÜÿßÿ™ ÿ≥ÿßŸÖÿßŸÜŸá
                        <i class="fas fa-arrow-down me-2"></i>
                    </button>
                </div>

                {{-- STATS --}}
                <div class="row g-3 mt-4">
                    <div class="col-md-4">
                        <div class="stat">
                            <i class="fas fa-brain"></i>
                            <div>
                                <div class="n">ÿ™ÿ≠ŸÑ€åŸÑ ŸáŸàÿ¥‚ÄåŸÖÿµŸÜŸàÿπ€å</div>
                                <div class="t">ÿ®ÿπÿØ ÿßÿ≤ Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜ</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="stat">
                            <i class="fas fa-chart-line"></i>
                            <div>
                                <div class="n">⁄Øÿ≤ÿßÿ±ÿ¥ Ÿæ€åÿ¥ÿ±ŸÅÿ™</div>
                                <div class="t">ŸáŸÅÿ™⁄Ø€å Ÿà ŸÖÿßŸáÿßŸÜŸá</div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="stat">
                            <i class="fas fa-user-graduate"></i>
                            <div>
                                <div class="n">ŸÖÿ≥€åÿ± ÿ¥ÿÆÿµ€å‚Äåÿ≥ÿßÿ≤€å</div>
                                <div class="t">ÿ®ÿ±ÿß€å Ÿáÿ± ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {{-- LEFT / CARD SIDE --}}
            <div class="col-lg-5">
                <div class="hero-card">
                    <div class="row g-3">

                        <div class="col-12">
                            <div class="d-flex align-items-center gap-3">
                                <div class="icon rounded-4 p-3 bg-white bg-opacity-10">
                                    <i class="fas fa-laptop-code text-info"></i>
                                </div>
                                <div>
                                    <div class="fw-bold fs-5">ŸáŸÖŸá‚Äå⁄Ü€åÿ≤ ÿ¢ŸÜŸÑÿß€åŸÜ Ÿà ŸÖŸÜÿ∏ŸÖ</div>
                                    <div class="text-white-50 small">ÿ®ÿØŸàŸÜ ŸÜ€åÿßÿ≤ ÿ®Ÿá ŸÜÿµÿ®ÿå ÿßÿ≤ ŸÖŸàÿ®ÿß€åŸÑ €åÿß ŸÑŸæ‚Äåÿ™ÿßŸæ</div>
                                </div>
                            </div>
                        </div>

                        <hr class="border-light border-opacity-25 my-2">

                        <div class="col-12">
                            <div class="d-flex align-items-center gap-3">
                                <div class="icon rounded-4 p-3 bg-white bg-opacity-10">
                                    <i class="fas fa-shield-halved text-success"></i>
                                </div>
                                <div>
                                    <div class="fw-bold fs-5">ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ Ÿà ŸÇÿßÿ®ŸÑ ÿßÿπÿ™ŸÖÿßÿØ</div>
                                    <div class="text-white-50 small">ÿ∑ÿ±ÿßÿ≠€å ÿ≥ŸàÿßŸÑ ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØ + ÿ≥ÿ∑ÿ≠‚Äåÿ®ŸÜÿØ€å ÿØŸÇ€åŸÇ</div>
                                </div>
                            </div>
                        </div>

                        <hr class="border-light border-opacity-25 my-2">

                        <div class="col-12">
                            <div class="d-flex align-items-center gap-3">
                                <div class="icon rounded-4 p-3 bg-white bg-opacity-10">
                                    <i class="fas fa-people-group text-warning"></i>
                                </div>
                                <div>
                                    <div class="fw-bold fs-5">ŸÖŸÜÿßÿ≥ÿ® ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ Ÿà ŸÖÿπŸÑŸÖ</div>
                                    <div class="text-white-50 small">ŸæŸÜŸÑ ÿ¨ÿØÿß⁄ØÿßŸÜŸá ÿ®ÿ±ÿß€å ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥‚ÄåŸáÿß</div>
                                </div>
                            </div>
                        </div>

                    </div> {{-- row --}}
                </div> {{-- hero-card --}}
            </div>

        </div> {{-- main row --}}
    </div> {{-- container --}}
</header>

......................................................................

----------------------------------------------------------------------

## üìÑ 167. levels.blade.php

**Path:** `resources/views/partials/landing/levels.blade.php`  
**Size:** 3,229 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="levels" class="bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">ÿ≥Ÿá ÿ≥ÿ∑ÿ≠ ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿØÿ± €å⁄© ÿ≥ÿßŸÖÿßŸÜŸá</h2>
            <p class="section-sub">ŸáÿØŸÅ ÿ¥ŸÖÿß Ÿáÿ±⁄ÜŸá ÿ®ÿßÿ¥ÿØÿå ŸÖÿ≥€åÿ± Ÿà ÿ¢ÿ≤ŸÖŸàŸÜ ŸÖŸÜÿßÿ≥ÿ®ÿ¥ ÿ¢ŸÖÿßÿØŸá ÿßÿ≥ÿ™.</p>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="level-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="level-pill">ÿ≥ÿ∑ÿ≠ €±</span>
                        <i class="fas fa-book-open fa-2x text-primary"></i>
                    </div>
                    <h5 class="fw-bold">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ™ŸÇŸà€åÿ™€å</h5>
                    <p class="text-muted">ÿ®ÿ±ÿß€å ÿ™ÿ´ÿ®€åÿ™ ŸÖÿ®ÿßÿ≠ÿ´ ŸÖÿØÿ±ÿ≥Ÿá Ÿà ÿ±ŸÅÿπ ÿßÿ¥⁄©ÿßŸÑ. ŸÖŸÜÿßÿ≥ÿ® ŸáŸÖŸá Ÿæÿß€åŸá‚ÄåŸáÿß.</p>
                    <ul class="text-muted small mb-0">
                        <li>ÿ≥ŸàÿßŸÑÿßÿ™ ÿ∑ÿ®ŸÇŸá‚Äåÿ®ŸÜÿØ€å‚Äåÿ¥ÿØŸá ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ⁄©ÿ™ÿßÿ® ÿØÿ±ÿ≥€å</li>
                        <li>Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ™ŸÖÿ±€åŸÜ ÿ®ÿπÿØ ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ ÿØŸÇ€åŸÇ ÿ≥ÿ∑ÿ≠ €åÿßÿØ⁄Ø€åÿ±€å</li>
                    </ul>
                </div>
            </div>

            <div class="col-md-4">
                <div class="level-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="level-pill" style="background:var(--success)">ÿ≥ÿ∑ÿ≠ €≤</span>
                        <i class="fas fa-graduation-cap fa-2x text-success"></i>
                    </div>
                    <h5 class="fw-bold">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ⁄©ŸÜ⁄©Ÿàÿ±</h5>
                    <p class="text-muted">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ¨ÿßŸÖÿπ Ÿà ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ⁄©ŸÜ⁄©Ÿàÿ± ÿØÿßÿÆŸÑ/ÿÆÿßÿ±ÿ¨.</p>
                    <ul class="text-muted small mb-0">
                        <li>ÿ≤ŸÖÿßŸÜ‚Äåÿ®ŸÜÿØ€å ŸÖÿ¥ÿßÿ®Ÿá ⁄©ŸÜ⁄©Ÿàÿ± ŸàÿßŸÇÿπ€å</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ ÿØÿ±ÿµÿØÿå ÿ™ÿ±ÿßÿ≤ Ÿà ÿ±ÿ™ÿ®Ÿá</li>
                        <li>⁄Øÿ≤ÿßÿ±ÿ¥ ŸÖŸÇÿß€åÿ≥Ÿá ÿ®ÿß ÿ¨ÿßŸÖÿπŸá ÿ¢ŸÖÿßÿ±€å</li>
                    </ul>
                </div>
            </div>

            <div class="col-md-4">
                <div class="level-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <span class="level-pill" style="background:var(--warning)">ÿ≥ÿ∑ÿ≠ €≥</span>
                        <i class="fas fa-award fa-2x text-warning"></i>
                    </div>
                    <h5 class="fw-bold">ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿßŸÑŸÖŸæ€åÿßÿØ</h5>
                    <p class="text-muted">ÿ≥ŸàÿßŸÑÿßÿ™ ÿ≥ÿ∑ÿ≠ ÿ®ÿßŸÑÿß ÿ®ÿ±ÿß€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ÿßÿ≥ÿ™ÿπÿØÿßÿØ ÿØÿ±ÿÆÿ¥ÿßŸÜ.</p>
                    <ul class="text-muted small mb-0">
                        <li>ŸÖÿ®ÿßÿ≠ÿ´ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá Ÿà ÿ™ÿ±⁄©€åÿ®€å</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ ŸÖŸáÿßÿ±ÿ™ ÿ≠ŸÑ ŸÖÿ≥ÿ¶ŸÑŸá</li>
                        <li>ŸÖÿ≥€åÿ± ÿ™ŸÖÿ±€åŸÜ€å Ÿà€å⁄òŸá ÿßŸÑŸÖŸæ€åÿßÿØ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 168. pricing.blade.php

**Path:** `resources/views/partials/landing/pricing.blade.php`  
**Size:** 7,823 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="pricing">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="section-title">ŸæŸÑŸÜ‚ÄåŸáÿß€å ÿØÿ≥ÿ™ÿ±ÿ≥€å Ÿà Ÿáÿ≤€åŸÜŸá</h2>
            <p class="section-sub">ŸæŸÑŸÜ ÿÆŸàÿØ ÿ±ÿß Ÿáÿ± ÿ≤ŸÖÿßŸÜ ÿÆŸàÿßÿ≥ÿ™€åÿØ ÿßÿ±ÿ™ŸÇÿß ÿØŸá€åÿØ.</p>
        </div>

        <div
            class="discount-banner mb-4 d-flex flex-column flex-md-row align-items-center justify-content-between gap-3">
            <div>
                <div class="fw-bold fs-5">
                    <i class="fa-solid fa-bolt text-danger me-1"></i>
                    ÿ™ÿÆŸÅ€åŸÅ Ÿà€å⁄òŸá ÿ¥ÿ±Ÿàÿπ ÿ≥ÿßŸÑ ÿ™ÿ≠ÿµ€åŸÑ€å
                </div>
                <div class="text-muted small">
                    ÿ™ÿß Ÿæÿß€åÿßŸÜ ÿ¥ŸÖÿßÿ±ÿ¥ ŸÖÿπ⁄©Ÿàÿ≥ÿå ŸæŸÑŸÜ‚ÄåŸáÿß ÿ®ÿß <b>€±€µŸ™ ÿ™ÿÆŸÅ€åŸÅ</b> ŸÇÿßÿ®ŸÑ ÿÆÿ±€åÿØ Ÿáÿ≥ÿ™ŸÜÿØ.
                </div>
            </div>

            <div class="d-flex align-items-center gap-2">
                <span class="text-muted small">ÿ≤ŸÖÿßŸÜ ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá:</span>
                <div class="countdown" id="discountCountdown">--:--:--</div>
                <span class="badge text-bg-danger" id="discountStatus">ŸÅÿπÿßŸÑ</span>
            </div>
        </div>

        <div class="d-flex justify-content-center gap-2 mb-5 cycle-selector">
            <button class="btn btn-outline-primary active" data-cycle="monthly"
                onclick="setCycle('monthly', this)">ŸÖÿßŸáÿßŸÜŸá</button>
            <button class="btn btn-outline-primary" data-cycle="quarterly" onclick="setCycle('quarterly', this)">ÿ≥Ÿá‚ÄåŸÖÿßŸáŸá
                (10Ÿ™ ÿ™ÿÆŸÅ€åŸÅ)</button>
            <button class="btn btn-outline-primary" data-cycle="yearly" onclick="setCycle('yearly', this)">ÿ≥ÿßŸÑ€åÿßŸÜŸá (25Ÿ™
                ÿ™ÿÆŸÅ€åŸÅ)</button>
        </div>

        <div class="row g-4 align-items-stretch">
            {{-- Free --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card h-100">
                    <h5 class="fw-bold mb-1">ÿ±ÿß€å⁄ØÿßŸÜ</h5>
                    <div class="text-muted small mb-3">ÿ¥ÿ±Ÿàÿπ ÿ®ÿØŸàŸÜ Ÿæÿ±ÿØÿßÿÆÿ™</div>
                    <div class="price mb-3">€∞ <small>ÿ™ŸàŸÖÿßŸÜ / ŸáŸÖ€åÿ¥Ÿá</small></div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>€≥ ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÇŸà€åÿ™€å ÿØÿ± ŸáŸÅÿ™Ÿá</li>
                        <li>€≤ ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©ŸÜ⁄©Ÿàÿ± ÿØÿ± ŸáŸÅÿ™Ÿá</li>
                        <li>€± ÿ¢ÿ≤ŸÖŸàŸÜ ÿßŸÑŸÖŸæ€åÿßÿØ ÿØÿ± ŸáŸÅÿ™Ÿá</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ Ÿæÿß€åŸá ŸÜÿ™ÿß€åÿ¨</li>
                        <li class="muted">ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å ÿßÿÆÿ™ÿµÿßÿµ€å</li>
                        <li class="muted">⁄Øÿ≤ÿßÿ±ÿ¥ Ÿæ€åÿ¥ÿ±ŸÅÿ™ ÿ≠ÿ±ŸÅŸá‚Äåÿß€å</li>
                    </ul>

                    <button class="btn btn-outline-primary w-100 mt-3" data-bs-toggle="modal"
                        data-bs-target="#authModal">
                        ÿ¥ÿ±Ÿàÿπ ÿ±ÿß€å⁄ØÿßŸÜ
                    </button>
                </div>
            </div>

            {{-- Plan 1 --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card h-100">
                    <h5 class="fw-bold mb-1">ŸæŸÑŸÜ ÿßŸàŸÑ</h5>
                    <div class="text-muted small mb-3">ÿßŸÇÿ™ÿµÿßÿØ€å ÿ®ÿ±ÿß€å ÿ™ŸÇŸà€åÿ™€å</div>

                    <div class="price mb-1">
                        <span class="price-val" data-monthly="99000" data-quarterly="267000"
                            data-yearly="891000">99,000</span>
                        <small>ÿ™ŸàŸÖÿßŸÜ</small>
                    </div>
                    <div class="text-muted small mb-3 price-label">ŸÖÿßŸáÿßŸÜŸá</div>

                    <div class="alert alert-light small py-2">
                        ŸÅŸÇÿ∑ ÿ≥ÿ∑ÿ≠ <b>ÿ™ŸÇŸà€åÿ™€å</b> ŸÅÿπÿßŸÑ ŸÖ€å‚Äåÿ¥ŸàÿØ.
                    </div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>ÿ™ŸÇŸà€åÿ™€å ŸÜÿßŸÖÿ≠ÿØŸàÿØ</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ ŸáŸàÿ¥ŸÖŸÜÿØ ⁄©ÿßŸÖŸÑ</li>
                        <li>Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ™ŸÖÿ±€åŸÜ ÿÆŸàÿØ⁄©ÿßÿ±</li>
                        <li class="muted">⁄©ŸÜ⁄©Ÿàÿ±</li>
                        <li class="muted">ÿßŸÑŸÖŸæ€åÿßÿØ</li>
                    </ul>

                    <button class="btn btn-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#authModal">
                        ÿÆÿ±€åÿØ ŸæŸÑŸÜ ÿßŸàŸÑ
                    </button>
                </div>
            </div>

            {{-- Plan 2 --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card featured h-100">
                    <div class="pricing-badge">Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å</div>
                    <h5 class="fw-bold mb-1">ŸæŸÑŸÜ ÿØŸàŸÖ</h5>
                    <div class="text-muted small mb-3">ÿ®ÿ±ÿß€å ŸÖÿ≥€åÿ± ⁄©ŸÜ⁄©Ÿàÿ±</div>

                    <div class="price mb-1">
                        <span class="price-val" data-monthly="169000" data-quarterly="456000"
                            data-yearly="1521000">169,000</span>
                        <small>ÿ™ŸàŸÖÿßŸÜ</small>
                    </div>
                    <div class="text-muted small mb-3 price-label">ŸÖÿßŸáÿßŸÜŸá</div>

                    <div class="alert alert-primary small py-2">
                        ÿ≥ÿ∑ÿ≠‚ÄåŸáÿß€å <b>ÿ™ŸÇŸà€åÿ™€å + ⁄©ŸÜ⁄©Ÿàÿ±</b> ŸÅÿπÿßŸÑ ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ.
                    </div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>ÿ™ŸÇŸà€åÿ™€å ŸÜÿßŸÖÿ≠ÿØŸàÿØ</li>
                        <li>⁄©ŸÜ⁄©Ÿàÿ± ŸÜÿßŸÖÿ≠ÿØŸàÿØ</li>
                        <li>⁄Øÿ≤ÿßÿ±ÿ¥ ÿ±ÿ™ÿ®Ÿá Ÿà ÿ™ÿ±ÿßÿ≤</li>
                        <li>ŸÖÿ≥€åÿ± €åÿßÿØ⁄Ø€åÿ±€å ⁄©ŸÜ⁄©Ÿàÿ±€å</li>
                        <li class="muted">ÿßŸÑŸÖŸæ€åÿßÿØ</li>
                    </ul>

                    <button class="btn btn-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#authModal">
                        ÿÆÿ±€åÿØ ŸæŸÑŸÜ ÿØŸàŸÖ
                    </button>
                </div>
            </div>

            {{-- Plan 3 --}}
            <div class="col-md-6 col-lg-3">
                <div class="pricing-card h-100">
                    <h5 class="fw-bold mb-1">ŸæŸÑŸÜ ÿ≥ŸàŸÖ</h5>
                    <div class="text-muted small mb-3">⁄©ÿßŸÖŸÑ Ÿà ÿ≠ÿ±ŸÅŸá‚Äåÿß€å</div>

                    <div class="price mb-1">
                        <span class="price-val" data-monthly="249000" data-quarterly="672000"
                            data-yearly="2241000">249,000</span>
                        <small>ÿ™ŸàŸÖÿßŸÜ</small>
                    </div>
                    <div class="text-muted small mb-3 price-label">ŸÖÿßŸáÿßŸÜŸá</div>

                    <div class="alert alert-warning small py-2">
                        Ÿáÿ± ÿ≥Ÿá ÿ≥ÿ∑ÿ≠ <b>ÿ™ŸÇŸà€åÿ™€å + ⁄©ŸÜ⁄©Ÿàÿ± + ÿßŸÑŸÖŸæ€åÿßÿØ</b> ŸÅÿπÿßŸÑ ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ.
                    </div>

                    <ul class="list-unstyled list-check text-muted small">
                        <li>ÿ™ŸÇŸà€åÿ™€å ŸÜÿßŸÖÿ≠ÿØŸàÿØ</li>
                        <li>⁄©ŸÜ⁄©Ÿàÿ± ŸÜÿßŸÖÿ≠ÿØŸàÿØ</li>
                        <li>ÿßŸÑŸÖŸæ€åÿßÿØ ŸÜÿßŸÖÿ≠ÿØŸàÿØ</li>
                        <li>ÿ™ÿ≠ŸÑ€åŸÑ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá ŸÖŸáÿßÿ±ÿ™€å</li>
                        <li>ŸÖÿ≥€åÿ± Ÿà€å⁄òŸá ÿßŸÑŸÖŸæ€åÿßÿØ</li>
                    </ul>

                    <button class="btn btn-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#authModal">
                        ÿÆÿ±€åÿØ ŸæŸÑŸÜ ÿ≥ŸàŸÖ
                    </button>
                </div>
            </div>
        </div>

        <div class="text-center text-muted small mt-4">
            * ŸÇ€åŸÖÿ™‚ÄåŸáÿß ŸÜŸÖŸàŸÜŸá Ÿáÿ≥ÿ™ŸÜÿØ Ÿà ÿßÿ≤ ÿØÿßÿÆŸÑ HTML ŸÇÿßÿ®ŸÑ ÿ™ÿ∫€å€åÿ±ŸÜÿØ.
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 169. samples.blade.php

**Path:** `resources/views/partials/landing/samples.blade.php`  
**Size:** 5,090 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="samples">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">ŸÜŸÖŸàŸÜŸá ÿ≥ŸàÿßŸÑ ÿ±ÿß€å⁄ØÿßŸÜ</h2>
            <p class="section-sub">ŸÇÿ®ŸÑ ÿßÿ≤ ÿÆÿ±€åÿØÿå €å⁄© ÿ¢ÿ≤ŸÖŸàŸÜ ŸÜŸÖŸàŸÜŸá ÿ±ÿß ŸáŸÖ€åŸÜ ÿ≠ÿßŸÑÿß ÿßŸÖÿ™ÿ≠ÿßŸÜ ⁄©ŸÜ€åÿØ.</p>
        </div>

        <div class="row g-4">
            {{-- sample 1 --}}
            <div class="col-md-4">
                <div class="sample-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h5 class="fw-bold mb-0">ŸÜŸÖŸàŸÜŸá ÿ¢ÿ≤ŸÖŸàŸÜ ÿ™ŸÇŸà€åÿ™€å</h5>
                        <span class="badge text-bg-primary">ÿ≥ÿ∑ÿ≠ €±</span>
                    </div>
                    <div class="sample-meta mb-3">
                        <span><i class="fa-regular fa-clock"></i> 15 ÿØŸÇ€åŸÇŸá</span>
                        <span><i class="fa-solid fa-list-check"></i> 10 ÿ≥ŸàÿßŸÑ</span>
                        <span><i class="fa-solid fa-signal"></i> ŸÖÿ™Ÿàÿ≥ÿ∑</span>
                    </div>
                    <p class="text-muted small">
                        ŸÖŸÜÿßÿ≥ÿ® ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ Ÿæÿß€åŸá‚ÄåŸáÿß€å ŸÖÿÆÿ™ŸÑŸÅ ÿ®ÿ±ÿß€å ÿ¢ÿ¥ŸÜÿß€å€å ÿ®ÿß ÿ≥ÿ®⁄© ÿ≥ŸàÿßŸÑÿßÿ™ Ÿà ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿß.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="{{ asset('assets/samples/taghviyati-sample.pdf') }}"
                            class="btn btn-outline-primary w-50">
                            ÿØÿßŸÜŸÑŸàÿØ PDF
                        </a>
                        <button class="btn btn-primary w-50" data-bs-toggle="modal" data-bs-target="#authModal">
                            ÿ¥ÿ±Ÿàÿπ ÿ¢ŸÜŸÑÿß€åŸÜ
                        </button>
                    </div>
                </div>
            </div>

            {{-- sample 2 --}}
            <div class="col-md-4">
                <div class="sample-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h5 class="fw-bold mb-0">ŸÜŸÖŸàŸÜŸá ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©ŸÜ⁄©Ÿàÿ±</h5>
                        <span class="badge text-bg-success">ÿ≥ÿ∑ÿ≠ €≤</span>
                    </div>
                    <div class="sample-meta mb-3">
                        <span><i class="fa-regular fa-clock"></i> 20 ÿØŸÇ€åŸÇŸá</span>
                        <span><i class="fa-solid fa-list-check"></i> 15 ÿ≥ŸàÿßŸÑ</span>
                        <span><i class="fa-solid fa-signal"></i> ÿ≥ÿÆÿ™</span>
                    </div>
                    <p class="text-muted small">
                        ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ⁄©Ÿàÿ™ÿßŸá ÿßÿ≤ ÿ¢ÿ≤ŸÖŸàŸÜ ⁄©ŸÜ⁄©Ÿàÿ± ŸáŸÖÿ±ÿßŸá ÿ®ÿß ÿ±ÿ™ÿ®Ÿá Ÿà ÿ™ÿ≠ŸÑ€åŸÑ ÿØÿ±ÿµÿØ€å.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="{{ asset('assets/samples/konkur-sample.pdf') }}" class="btn btn-outline-success w-50">
                            ÿØÿßŸÜŸÑŸàÿØ PDF
                        </a>
                        <button class="btn btn-success w-50" data-bs-toggle="modal" data-bs-target="#authModal">
                            ÿ¥ÿ±Ÿàÿπ ÿ¢ŸÜŸÑÿß€åŸÜ
                        </button>
                    </div>
                </div>
            </div>

            {{-- sample 3 --}}
            <div class="col-md-4">
                <div class="sample-card">
                    <div class="d-flex align-items-center justify-content-between mb-2">
                        <h5 class="fw-bold mb-0">ŸÜŸÖŸàŸÜŸá ÿ¢ÿ≤ŸÖŸàŸÜ ÿßŸÑŸÖŸæ€åÿßÿØ</h5>
                        <span class="badge text-bg-warning">ÿ≥ÿ∑ÿ≠ €≥</span>
                    </div>
                    <div class="sample-meta mb-3">
                        <span><i class="fa-regular fa-clock"></i> 25 ÿØŸÇ€åŸÇŸá</span>
                        <span><i class="fa-solid fa-list-check"></i> 8 ÿ≥ŸàÿßŸÑ</span>
                        <span><i class="fa-solid fa-signal"></i> ÿÆ€åŸÑ€å ÿ≥ÿÆÿ™</span>
                    </div>
                    <p class="text-muted small">
                        ŸÖŸÜÿßÿ≥ÿ® ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ ŸÖÿ≥ÿ™ÿπÿØ ÿ®ÿ±ÿß€å ÿ¢ÿ¥ŸÜÿß€å€å ÿ®ÿß ÿ≥ŸàÿßŸÑÿßÿ™ ÿ™ÿ±⁄©€åÿ®€å Ÿà ÿ™ÿ≠ŸÑ€åŸÑ ŸÖŸáÿßÿ±ÿ™€å.
                    </p>
                    <div class="d-flex gap-2">
                        <a href="{{ asset('assets/samples/olympiad-sample.pdf') }}"
                            class="btn btn-outline-warning w-50">
                            ÿØÿßŸÜŸÑŸàÿØ PDF
                        </a>
                        <button class="btn btn-warning w-50" data-bs-toggle="modal" data-bs-target="#authModal">
                            ÿ¥ÿ±Ÿàÿπ ÿ¢ŸÜŸÑÿß€åŸÜ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <div class="alert alert-light border small d-inline-block">
                ÿ®ÿ±ÿß€å ÿ¥ÿ±Ÿàÿπ ÿ¢ŸÜŸÑÿß€åŸÜ ŸÜŸÖŸàŸÜŸá‚ÄåŸáÿß ⁄©ÿßŸÅ€åÿ≥ÿ™ ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ ⁄©ŸÜ€åÿØ. (⁄©ŸÖÿ™ÿ± ÿßÿ≤ €± ÿØŸÇ€åŸÇŸá)
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 170. screenshots.blade.php

**Path:** `resources/views/partials/landing/screenshots.blade.php`  
**Size:** 4,282 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="screenshots" class="bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">ÿ™ÿµÿßŸà€åÿ± ŸàÿßŸÇÿπ€å ŸæŸÜŸÑ‚ÄåŸáÿß</h2>
            <p class="section-sub">€å⁄© ŸÜ⁄ØÿßŸá ÿ≥ÿ±€åÿπ ÿ®Ÿá ÿ™ÿ¨ÿ±ÿ®Ÿá‚Äå€å ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ Ÿà ŸÖÿπŸÑŸÖ</p>
        </div>

        <div class="carousel-card">
            <div id="panelCarousel" class="carousel slide" data-bs-ride="carousel">

                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="2"></button>
                    <button type="button" data-bs-target="#panelCarousel" data-bs-slide-to="3"></button>
                </div>

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/student-dashboard.png') }}"
                            alt="ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</h5>
                            <p class="small">ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß + ⁄Øÿ≤ÿßÿ±ÿ¥ Ÿæ€åÿ¥ÿ±ŸÅÿ™ + Ÿæ€åÿ¥ŸÜŸáÿßÿØ ÿ™ŸÖÿ±€åŸÜ</p>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/student-report.png') }}"
                            alt="⁄Øÿ≤ÿßÿ±ÿ¥ ÿ¢ÿ≤ŸÖŸàŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">⁄Øÿ≤ÿßÿ±ÿ¥ ŸáŸàÿ¥ŸÖŸÜÿØ ÿ¢ÿ≤ŸÖŸàŸÜ</h5>
                            <p class="small">ÿ™ÿ≠ŸÑ€åŸÑ ŸÜŸÇÿßÿ∑ ÿ∂ÿπŸÅ Ÿà ŸÇŸàÿ™ ÿ®Ÿá‚ÄåÿµŸàÿ±ÿ™ ÿÆŸàÿØ⁄©ÿßÿ±</p>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/teacher-panel.png') }}" alt="ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ</h5>
                            <p class="small">ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜÿå ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥ Ÿà ÿ®ÿ±ÿ±ÿ≥€å ÿπŸÖŸÑ⁄©ÿ±ÿØ Ÿáÿ± ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤</p>
                        </div>
                    </div>

                    <div class="carousel-item">
                        <img class="carousel-img"
                            src="{{ asset('assets/images/landing/screenshots/class-analytics.png') }}" alt="ÿ™ÿ≠ŸÑ€åŸÑ ⁄©ŸÑÿßÿ≥">
                        <div class="carousel-caption d-none d-md-block">
                            <h5 class="fw-bold">ÿ™ÿ≠ŸÑ€åŸÑ ÿπŸÖŸÑ⁄©ÿ±ÿØ ⁄©ŸÑÿßÿ≥</h5>
                            <p class="small">ŸÜŸÖŸàÿØÿßÿ± ÿ±ÿ¥ÿØÿå ŸÖ€åÿßŸÜ⁄Ø€åŸÜ ⁄©ŸÑÿßÿ≥ Ÿà ÿ±ÿ™ÿ®Ÿá‚Äåÿ®ŸÜÿØ€å</p>
                        </div>
                    </div>
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#panelCarousel"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                    <span class="visually-hidden">ŸÇÿ®ŸÑ€å</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#panelCarousel"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                    <span class="visually-hidden">ÿ®ÿπÿØ€å</span>
                </button>

            </div>
        </div>

        <div class="text-center mt-3">
            <button class="btn btn-primary px-5" data-bs-toggle="modal" data-bs-target="#authModal">
                Ÿàÿ±ŸàÿØ Ÿà ÿ™ÿ¨ÿ±ÿ®Ÿá ŸæŸÜŸÑ‚ÄåŸáÿß
            </button>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 171. testimonials.blade.php

**Path:** `resources/views/partials/landing/testimonials.blade.php`  
**Size:** 2,723 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<section id="testimonials">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">ŸÜÿ∏ÿ± ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ŸÖÿß</h2>
            <p class="section-sub">ŸÜÿ™€åÿ¨Ÿá‚Äå€å ŸàÿßŸÇÿπ€å ÿßÿ≤ ÿ≤ÿ®ÿßŸÜ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ Ÿà ŸÖÿπŸÑŸÖÿßŸÜ</p>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="testimonial">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <div class="avatar">ŸÖ</div>
                        <div>
                            <div class="fw-bold">ŸÖÿ≠ŸÖÿØÿ±ÿ∂ÿß - ⁄©ŸÜ⁄©Ÿàÿ±€å</div>
                            <div class="text-muted small">ŸæŸÑŸÜ ÿØŸàŸÖ</div>
                        </div>
                    </div>
                    <p class="text-muted small mb-0">
                        ¬´ÿ®ÿπÿØ ÿßÿ≤ Ÿáÿ± ÿ¢ÿ≤ŸÖŸàŸÜ ÿØŸÇ€åŸÇ ŸÖ€å‚ÄåŸÅŸáŸÖŸÖ ⁄©ÿ¨ÿß ŸÖÿ¥⁄©ŸÑ ÿØÿßÿ±ŸÖ.
                        ÿ™Ÿà€å ÿØŸà ŸÖÿßŸáÿå ÿØÿ±ÿµÿØ ÿ±€åÿßÿ∂€å‚ÄåÿßŸÖ €≤€∞Ÿ™ ÿ®ÿßŸÑÿß ÿ±ŸÅÿ™.¬ª
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="testimonial">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <div class="avatar">ÿ≥</div>
                        <div>
                            <div class="fw-bold">ÿ≥ÿßÿ±ÿß - Ÿæÿß€åŸá ÿØŸáŸÖ</div>
                            <div class="text-muted small">ŸæŸÑŸÜ ÿßŸàŸÑ</div>
                        </div>
                    </div>
                    <p class="text-muted small mb-0">
                        ¬´ÿ¢ÿ≤ŸÖŸàŸÜ‚ÄåŸáÿß€å ÿ™ŸÇŸà€åÿ™€å ÿÆ€åŸÑ€å ⁄©ŸÖ⁄©ŸÖ ⁄©ÿ±ÿØ ÿØÿ±ÿ≥‚ÄåŸáÿß ÿ±Ÿà ŸÅÿµŸÑ‚Äåÿ®Ÿá‚ÄåŸÅÿµŸÑ ÿ®ÿ®ŸÜÿØŸÖ.
                        ⁄Øÿ≤ÿßÿ±ÿ¥‚ÄåŸáÿßÿ¥ ÿÆ€åŸÑ€å ÿ≥ÿßÿØŸá Ÿà ŸÇÿßÿ®ŸÑ ŸÅŸáŸÖŸá.¬ª
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="testimonial">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        <div class="avatar">ÿØ</div>
                        <div>
                            <div class="fw-bold">ÿØ⁄©ÿ™ÿ± ÿ≠ÿ≥€åŸÜ€å - ŸÖÿπŸÑŸÖ</div>
                            <div class="text-muted small">ŸæŸÜŸÑ ŸÖÿπŸÑŸÖ</div>
                        </div>
                    </div>
                    <p class="text-muted small mb-0">
                        ¬´ÿ≥ÿßÿÆÿ™ ÿ¢ÿ≤ŸÖŸàŸÜ Ÿà ÿØ€åÿØŸÜ ÿ™ÿ≠ŸÑ€åŸÑ ÿ™⁄©‚Äåÿ™⁄© ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ÿßŸÜ
                        ÿ®ÿßÿπÿ´ ÿ¥ÿØ ŸÖÿØ€åÿ±€åÿ™ ⁄©ŸÑÿßÿ≥ ÿÆ€åŸÑ€å ÿ≠ÿ±ŸÅŸá‚Äåÿß€å‚Äåÿ™ÿ± ÿ®ÿ¥Ÿá.¬ª
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

......................................................................

----------------------------------------------------------------------

## üìÑ 172. auth-modal.blade.php

**Path:** `resources/views/shared/auth-modal.blade.php`  
**Size:** 23,640 bytes  
**Modified:** 2025-12-08 16:45:39

----------------------------------------------------------------------

<div class="modal fade" id="authModal" tabindex="-1" aria-hidden="true"
     data-send-url="{{ route('auth.sendOtp') }}"
     data-verify-url="{{ route('auth.verifyOtp') }}"
     data-role-url="{{ route('auth.setRole') }}">

    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content rounded-4 border-0 shadow-lg"
            style="
            background: var(--light);
            border-radius: var(--radius-xl) !important;
            border: 3px solid rgba(0, 206, 209, 0.15);
            overflow: hidden;
        ">
            {{-- ŸáÿØÿ± ŸÖŸàÿØÿßŸÑ ÿ®ÿß ⁄Øÿ±ÿßÿØ€åÿßŸÜÿ™ --}}
            <div class="modal-header"
                style="
                background: linear-gradient(135deg, rgba(0, 206, 209, 0.1), rgba(70, 130, 180, 0.1));
                border-bottom: 2px solid rgba(0, 206, 209, 0.15);
                padding: 25px 30px;
                position: relative;
                overflow: hidden;
            ">
                <div
                    style="position: absolute; top: -50%; right: -20%; width: 200px; height: 200px;
                    background: radial-gradient(circle, rgba(0, 206, 209, 0.08), transparent 70%); border-radius: 50%;">
                </div>

                <h5 class="modal-title fw-bold" id="authModalTitle"
                    style="
                    font-size: 1.5rem;
                    color: var(--dark);
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    position: relative;
                    z-index: 2;
                ">
                    <span
                        style="
                        background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                    ">
                        Ÿàÿ±ŸàÿØ / ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ
                    </span>
                    üîê
                </h5>
                <button type="button" class="btn-close ms-0" data-bs-dismiss="modal"
                    style="
                    position: relative;
                    z-index: 2;
                    font-size: 1.2rem;
                    opacity: 0.7;
                    transition: all 0.3s;
                "></button>
            </div>

            {{-- ÿ®ÿØŸÜŸá ŸÖŸàÿØÿßŸÑ --}}
            <div class="modal-body" style="padding: 40px 30px;">
                {{-- Step 1: Phone --}}
                <div id="phoneStep" class="auth-step">
                    <div class="text-center mb-4">
                        <div
                            style="
                            width: 80px;
                            height: 80px;
                            margin: 0 auto 20px;
                            background: var(--primary-light);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 2rem;
                            color: var(--primary);
                            border: 3px solid var(--primary);
                        ">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h4
                            style="
                            font-weight: 900;
                            color: var(--dark);
                            margin-bottom: 10px;
                            font-size: 1.3rem;
                        ">
                            Ÿàÿ±ŸàÿØ ÿ®ÿß ÿ¥ŸÖÿßÿ±Ÿá ŸáŸÖÿ±ÿßŸá
                        </h4>
                        <p
                            style="color: var(--gray); font-size: 1.05rem; line-height: 1.6; max-width: 400px; margin: 0 auto;">
                            ÿ®ÿ±ÿß€å Ÿàÿ±ŸàÿØ €åÿß ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖÿå ÿ¥ŸÖÿßÿ±Ÿá ŸáŸÖÿ±ÿßŸá ÿÆŸàÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ.
                        </p>
                    </div>

                    <form id="phoneForm">
                        <div class="mb-4" style="position: relative;">
                            <label for="phone" class="form-label"
                                style="
                                color: var(--dark);
                                font-weight: 900;
                                font-size: 1rem;
                                margin-bottom: 12px;
                                display: flex;
                                align-items: center;
                                gap: 10px;
                            ">
                                <i class="fas fa-phone"
                                    style="
                                    color: var(--primary);
                                    background: var(--primary-light);
                                    width: 36px;
                                    height: 36px;
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 1.1rem;
                                "></i>
                                ÿ¥ŸÖÿßÿ±Ÿá ŸáŸÖÿ±ÿßŸá
                            </label>
                            <div class="input-group" dir="ltr"
                                style="
                                border-radius: var(--radius-md);
                                overflow: hidden;
                                border: 2px solid var(--light-gray);
                                transition: all 0.3s;
                            ">
                                <span class="input-group-text"
                                    style="
                                    background: var(--primary);
                                    color: white;
                                    border: none;
                                    font-weight: 900;
                                    padding: 16px 20px;
                                    font-size: 1.05rem;
                                ">
                                    +98
                                </span>
                                <input type="tel" class="form-control text-start" id="phone"
                                    placeholder="9123456789" dir="ltr" required maxlength="10"
                                    style="
                                    padding: 16px 20px;
                                    border: none;
                                    background: var(--light);
                                    color: var(--dark);
                                    font-weight: 700;
                                    font-size: 1.05rem;
                                    transition: all 0.3s;
                                    direction: ltr !important;
                                    text-align: left !important;
                                    unicode-bidi: plaintext;
                                    ">
                            </div>
                            <div class="form-text" style="color: var(--gray); margin-top: 8px; font-size: 0.9rem;">
                                ÿ¥ŸÖÿßÿ±Ÿá ÿ±ÿß ÿ®ÿØŸàŸÜ ÿµŸÅÿ± Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ. ⁄©ÿØ ÿ™ÿ£€å€åÿØ ÿ®Ÿá ÿß€åŸÜ ÿ¥ŸÖÿßÿ±Ÿá ÿßÿ±ÿ≥ÿßŸÑ ÿÆŸàÿßŸáÿØ ÿ¥ÿØ.
                            </div>
                        </div>

                        <button type="submit" class="btn w-100 py-3"
                            style="
                            background: var(--primary-gradient);
                            color: white;
                            border: none;
                            border-radius: var(--radius-lg);
                            font-weight: 900;
                            font-size: 1.1rem;
                            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                            box-shadow: 0 8px 20px rgba(0, 206, 209, 0.3);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 10px;
                            min-height: 55px;
                        ">
                            <i class="fas fa-sms"></i>
                            ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿØ ÿ™ÿß€å€åÿØ
                        </button>
                    </form>
                </div>

                {{-- Step 2: Verify --}}
                <div id="verificationStep" class="auth-step" style="display:none;">
                    <div class="text-center mb-4">
                        <div
                            style="
                            width: 80px;
                            height: 80px;
                            margin: 0 auto 20px;
                            background: var(--success-light);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 2rem;
                            color: var(--success);
                            border: 3px solid var(--success);
                        ">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h4
                            style="
                            font-weight: 900;
                            color: var(--dark);
                            margin-bottom: 10px;
                            font-size: 1.3rem;
                        ">
                            ÿ™ÿ£€å€åÿØ ÿ¥ŸÖÿßÿ±Ÿá ŸáŸÖÿ±ÿßŸá
                        </h4>
                        <p class="mb-1" style="color: var(--gray); font-size: 1.05rem;">⁄©ÿØ ÿ™ÿß€å€åÿØ ÿ®Ÿá ÿ¥ŸÖÿßÿ±Ÿá</p>

                        {{-- ‚úÖ FIXED --}}
                        <div id="phoneNumberDisplay" class="fw-bold" dir="ltr"
                            style="direction:ltr; text-align:center; color: var(--primary);
                            font-size: 1.2rem; background: var(--primary-light); padding: 8px 20px;
                            border-radius: var(--radius-md); display: inline-block; margin: 10px 0;">
                        </div>
                    </div>

                    <form id="verificationForm">
                        <div class="mb-4">
                            <label for="verificationCode" class="form-label"
                                style="
                                color: var(--dark);
                                font-weight: 900;
                                font-size: 1rem;
                                margin-bottom: 12px;
                                display: flex;
                                align-items: center;
                                gap: 10px;
                            ">
                                <i class="fas fa-key"
                                    style="
                                    color: var(--primary);
                                    background: var(--primary-light);
                                    width: 36px;
                                    height: 36px;
                                    border-radius: 10px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    font-size: 1.1rem;
                                "></i>
                                ⁄©ÿØ ÿ™ÿ£€å€åÿØ €∂ ÿ±ŸÇŸÖ€å
                            </label>
                            <div style="position: relative;">
                                <input type="text" class="form-control text-center verification-code"
                                    id="verificationCode" placeholder="______" maxlength="6" required
                                    style="
                                    padding: 18px;
                                    font-size: 1.8rem;
                                    letter-spacing: 15px;
                                    font-weight: 900;
                                    border: 3px solid var(--light-gray);
                                    border-radius: var(--radius-md);
                                    background: var(--light);
                                    color: var(--dark);
                                    text-align: center;
                                    transition: all 0.3s;
                                ">
                                <div
                                    style="
                                    position: absolute;
                                    left: 50%;
                                    transform: translateX(-50%);
                                    bottom: -25px;
                                    color: var(--gray);
                                    font-size: 0.9rem;
                                    font-weight: 700;
                                ">
                                    ⁄©ÿØ €∂ ÿ±ŸÇŸÖ€å ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn w-100 py-3 mb-3"
                            style="
                            background: var(--success);
                            color: white;
                            border: none;
                            border-radius: var(--radius-lg);
                            font-weight: 900;
                            font-size: 1.1rem;
                            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                            box-shadow: 0 8px 20px rgba(50, 205, 50, 0.3);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 10px;
                            min-height: 55px;
                        ">
                            <i class="fas fa-check-circle"></i>
                            ÿ™ÿ£€å€åÿØ Ÿà ÿßÿØÿßŸÖŸá
                        </button>

                        <button type="button" class="btn w-100 py-3" id="resendCodeBtn"
                            style="
                            background: transparent;
                            color: var(--gray);
                            border: 2px solid var(--light-gray);
                            border-radius: var(--radius-lg);
                            font-weight: 900;
                            font-size: 1rem;
                            transition: all 0.3s;
                            min-height: 55px;
                        ">
                            <i class="fas fa-redo ms-2"></i>
                            ÿßÿ±ÿ≥ÿßŸÑ ŸÖÿ¨ÿØÿØ ⁄©ÿØ
                            <span id="countdown" style="color: var(--primary); margin-right: 5px;">(60)</span>
                        </button>
                    </form>
                </div>

                {{-- Step 3: Role --}}
                <div id="roleStep" class="auth-step" style="display:none;">
                    <div class="text-center mb-4">
                        <div
                            style="
                            width: 80px;
                            height: 80px;
                            margin: 0 auto 20px;
                            background: var(--accent-light);
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 2rem;
                            color: var(--accent);
                            border: 3px solid var(--accent);
                        ">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h4
                            style="
                            font-weight: 900;
                            color: var(--dark);
                            margin-bottom: 10px;
                            font-size: 1.3rem;
                        ">
                            ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥
                        </h4>
                        <p
                            style="color: var(--gray); font-size: 1.05rem; line-height: 1.6; max-width: 500px; margin: 0 auto;">
                            ÿ®ÿ±ÿß€å Ÿàÿ±ŸàÿØ ÿ®Ÿá ŸæŸÜŸÑ ÿßÿÆÿ™ÿµÿßÿµ€åÿå ŸÜŸÇÿ¥ ÿÆŸàÿØ ÿ±ÿß ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ.
                        </p>
                    </div>

                    <div class="row g-4">
                        <div class="col-md-6">
                            <button type="button" class="btn w-100 h-100 py-4 role-btn"
                                onclick="selectRole('student')"
                                style="
                                border: 3px solid var(--light-gray);
                                background: var(--light);
                                border-radius: var(--radius-lg);
                                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                height: 100%;
                                cursor: pointer;
                            ">
                                <div
                                    style="
                                    width: 80px;
                                    height: 80px;
                                    margin: 0 auto 20px;
                                    background: linear-gradient(135deg, var(--elementary), #357ABD);
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: white;
                                    font-size: 2.5rem;
                                ">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div
                                    style="font-weight: 900; color: var(--dark); font-size: 1.3rem; margin-bottom: 8px;">
                                    ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
                                </div>
                                <small style="color: var(--gray); font-size: 0.95rem; line-height: 1.5;">
                                    Ÿàÿ±ŸàÿØ ÿ≥ÿ±€åÿπ ÿ®Ÿá ŸæŸÜŸÑ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤€å
                                </small>
                            </button>
                        </div>

                        <div class="col-md-6">
                            <button type="button" class="btn w-100 h-100 py-4 role-btn"
                                onclick="selectRole('teacher')"
                                style="
                                border: 3px solid var(--light-gray);
                                background: var(--light);
                                border-radius: var(--radius-lg);
                                transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                height: 100%;
                                cursor: pointer;
                            ">
                                <div
                                    style="
                                    width: 80px;
                                    height: 80px;
                                    margin: 0 auto 20px;
                                    background: linear-gradient(135deg, var(--middle-school), #28a745);
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    color: white;
                                    font-size: 2.5rem;
                                ">
                                    <i class="fas fa-chalkboard-teacher"></i>
                                </div>
                                <div
                                    style="font-weight: 900; color: var(--dark); font-size: 1.3rem; margin-bottom: 8px;">
                                    ŸÖÿπŸÑŸÖ
                                </div>
                                <small style="color: var(--gray); font-size: 0.95rem; line-height: 1.5;">
                                    Ÿàÿ±ŸàÿØ ÿ®Ÿá ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ ÿ¢ŸÖŸàÿ≤ÿ¥€å
                                </small>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            {{-- ŸÅŸàÿ™ÿ± ŸÖŸàÿØÿßŸÑ --}}
            <div class="modal-footer"
                style="
                border-top: 2px solid var(--light-gray);
                padding: 20px 30px;
                background: var(--light-gray);
            ">
                <div
                    style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    width: 100%;
                    flex-wrap: wrap;
                    gap: 15px;
                ">
                    <div style="color: var(--gray); font-size: 0.95rem;">
                        <i class="fas fa-lock ms-2"></i>
                        ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ¥ŸÖÿß ŸÜÿ≤ÿØ ŸÖÿß ÿßŸÖŸÜ ÿßÿ≥ÿ™
                    </div>
                    <div style="display: flex; gap: 15px;">
                        <a href="{{ route('privacy') }}"
                            style="color: var(--primary); text-decoration: none; font-weight: 700; font-size: 0.95rem;">
                            ÿ≠ÿ±€åŸÖ ÿÆÿµŸàÿµ€å
                        </a>
                        <a href="{{ route('terms') }}"
                            style="color: var(--primary); text-decoration: none; font-weight: 700; font-size: 0.95rem;">
                            ÿ¥ÿ±ÿß€åÿ∑ ÿßÿ≥ÿ™ŸÅÿßÿØŸá
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --primary: #00CED1;
        --primary-light: rgba(0, 206, 209, 0.1);
        --primary-gradient: linear-gradient(135deg, #00CED1, #20B2AA);
        --secondary: #4682B4;
        --light: #ffffff;
        --dark: #2F4F4F;
        --gray: #708090;
        --light-gray: #F0F8FF;
        --success: #32CD32;
        --success-light: rgba(50, 205, 50, 0.1);
        --elementary: #4A90E2;
        --middle-school: #32CD32;
        --radius-xl: 24px;
        --radius-lg: 20px;
        --radius-md: 16px;
        --shadow-lg: 0 12px 30px rgba(0, 0, 0, 0.16);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal.fade .modal-content {
        animation: fadeIn 0.4s ease-out;
    }

    .modal-content {
        border: none !important;
        box-shadow: var(--shadow-lg) !important;
    }

    .verification-code {
        font-family: 'Courier New', monospace !important;
        letter-spacing: 10px !important;
    }
</style>

......................................................................

----------------------------------------------------------------------

## üìÑ 173. navigation.blade.php

**Path:** `resources/views/shared/navigation.blade.php`  
**Size:** 786 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url('/') }}">
            <i class="fas fa-graduation-cap"></i>
            ÿ≥ÿßŸÖÿßŸÜŸá ŸáŸàÿ¥ŸÖŸÜÿØ ÿ¢ŸÖŸàÿ≤ÿ¥
        </a>

        <div class="d-flex gap-2">
            <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#authModal">
                <i class="fas fa-sign-in-alt ms-1"></i> Ÿàÿ±ŸàÿØ / ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ
            </button>
            <button class="btn btn-light text-dark fw-bold"
                onclick="document.getElementById('pricing').scrollIntoView({behavior:'smooth'})">
                ŸÖÿ¥ÿßŸáÿØŸá ŸæŸÑŸÜ‚ÄåŸáÿß
            </button>
        </div>
    </div>
</nav>

......................................................................

----------------------------------------------------------------------

## üìÑ 174. admin.php

**Path:** `routes/admin.php`  
**Size:** 3,553 bytes  
**Modified:** 2025-12-08 12:11:13

----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;

use App\Http\Controllers\Admin\AdminAuthController;
use App\Http\Controllers\Admin\AdminDashboardController;
use App\Http\Controllers\Admin\AdminUserController;     // ‚úÖ ÿßÿ∂ÿßŸÅŸá ÿ¥ŸàÿØ
use App\Http\Controllers\Admin\ClassroomController;     // ‚úÖ ÿßÿ∂ÿßŸÅŸá ÿ¥ŸàÿØ

use App\Http\Controllers\Admin\SectionController;
use App\Http\Controllers\Admin\GradeController;
use App\Http\Controllers\Admin\SubjectController;
use App\Http\Controllers\Admin\BranchController;
use App\Http\Controllers\Admin\FieldController;
use App\Http\Controllers\Admin\SubfieldController;
use App\Http\Controllers\Admin\SubjectTypeController;
use App\Http\Controllers\Admin\ExamController; // ‚úÖ ÿßÿ∂ÿßŸÅŸá ÿ¥ŸàÿØ      
use App\Http\Controllers\Admin\SubjectTaxonomyController; // ‚úÖ ÿßÿ∂ÿßŸÅŸá ÿ¥ŸàÿØ


/*
|--------------------------------------------------------------------------
| Admin Auth Routes (OTP Login) - PUBLIC (no auth middleware)
|--------------------------------------------------------------------------
*/

Route::prefix('admin')->name('admin.')->group(function () {
    Route::get('/login', [AdminAuthController::class, 'showLogin'])->name('login');
    Route::post('/send-otp', [AdminAuthController::class, 'sendOtp'])->name('send-otp');
    Route::post('/verify-otp', [AdminAuthController::class, 'verifyOtp'])->name('verify-otp');
});




/*
|--------------------------------------------------------------------------
| Admin Dashboard + Routes - PROTECTED
|--------------------------------------------------------------------------
*/
Route::prefix('dashboard/admin')
    ->middleware(['auth', 'role.selected', 'role:admin'])
    ->name('admin.')
    ->group(function () {

        Route::get('/', [AdminDashboardController::class, 'index'])
            ->name('dashboard');

        Route::resource('users', AdminUserController::class)
            ->only(['index','show','update','destroy']);

        Route::resource('classrooms', ClassroomController::class)
            ->only(['index','show','update','destroy']);

        // ‚úÖ ŸáŸÖ€åŸÜ ÿ±Ÿà ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ
        Route::resource('exams', ExamController::class)
            ->only(['index','show','update','destroy']);

        Route::resource('sections', SectionController::class);
        Route::resource('grades', GradeController::class);
        Route::resource('branches', BranchController::class);
        Route::resource('fields', FieldController::class);
        Route::resource('subfields', SubfieldController::class);
        Route::resource('subject-types', SubjectTypeController::class);
        Route::resource('subjects', SubjectController::class);

        // ‚úÖ API ŸÇÿ®ŸÑ€å ÿÆŸàÿØÿ™ (ÿ®ÿØŸàŸÜ ÿ™ÿ∫€å€åÿ±)
        Route::get('api/subjects/by-grade/{grade}', [SubjectController::class, 'byGrade'])
            ->name('api.subjects.by-grade');

        // ‚úÖ NEW APIs ÿ®ÿ±ÿß€å dropdown ŸáŸàÿ¥ŸÖŸÜÿØ
        Route::get('api/grades/by-section/{section}', [SubjectTaxonomyController::class, 'gradesBySection'])
            ->name('api.grades.by-section');

        Route::get('api/branches/by-section/{section}', [SubjectTaxonomyController::class, 'branchesBySection'])
            ->name('api.branches.by-section');

        Route::get('api/fields/by-branch/{branch}', [SubjectTaxonomyController::class, 'fieldsByBranch'])
            ->name('api.fields.by-branch');

        Route::get('api/subfields/by-field/{field}', [SubjectTaxonomyController::class, 'subfieldsByField'])
            ->name('api.subfields.by-field');
    });

......................................................................

----------------------------------------------------------------------

## üìÑ 175. auth.php

**Path:** `routes/auth.php`  
**Size:** 1,053 bytes  
**Modified:** 2025-12-08 16:40:15

----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\AuthController;

Route::prefix('auth')->name('auth.')->group(function () {

    Route::get('/csrf', function () {
        return response()->json(['csrf' => csrf_token()]);
    })->name('csrf');

    Route::post('/send-otp', [AuthController::class, 'sendOtp'])
        ->middleware(['throttle:5,1'])
        ->name('sendOtp');

    Route::post('/verify-otp', [AuthController::class, 'verifyOtp'])
        ->middleware(['throttle:10,1'])
        ->name('verifyOtp');

    Route::post('/set-role', [AuthController::class, 'setRole'])
        ->middleware('auth')
        ->name('setRole');
});

Route::post('/logout', [AuthController::class, 'logout'])
    ->middleware('auth')
    ->name('logout');

Route::get('/dashboard/role-select', function () {
    return view('dashboard.role-select');
})->middleware('auth')->name('role.select');

Route::post('/dashboard/profile/change-role', [AuthController::class, 'changeRole'])
    ->middleware('auth')
    ->name('profile.change-role');

......................................................................

----------------------------------------------------------------------

## üìÑ 176. console.php

**Path:** `routes/console.php`  
**Size:** 210 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Foundation\Inspiring;
use Illuminate\Support\Facades\Artisan;

Artisan::command('inspire', function () {
    $this->comment(Inspiring::quote());
})->purpose('Display an inspiring quote');

......................................................................

----------------------------------------------------------------------

## üìÑ 177. counselor.php

**Path:** `routes/counselor.php`  
**Size:** 2,904 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\Counselor\CounselorDashboardController;
use App\Http\Controllers\Counselor\CounselorStudentController;
use App\Http\Controllers\Counselor\CounselorAttemptController;
use App\Http\Controllers\Counselor\CounselorLearningPathController;
use App\Http\Controllers\Counselor\CounselorProfileController;

Route::prefix('dashboard')
    ->middleware(['auth', 'role.selected'])
    ->group(function () {

        Route::prefix('counselor')
            ->name('counselor.')
            ->middleware('role:counselor')
            ->group(function () {

                // ‚úÖ Dashboard
                Route::get('/', [CounselorDashboardController::class, 'index'])
                    ->name('index');

                // ‚úÖ Students
                Route::get('/students', [CounselorStudentController::class, 'index'])
                    ->name('students.index');
                Route::get('/students/{student}', [CounselorStudentController::class, 'show'])
                    ->name('students.show');

                // ‚úÖ Attempts by student
                Route::get('/students/{student}/attempts', [CounselorAttemptController::class, 'index'])
                    ->name('attempts.index');
                Route::get('/attempts/{attempt}', [CounselorAttemptController::class, 'show'])
                    ->name('attempts.show');

                // ‚úÖ Analyze attempt
                Route::get('/attempts/{attempt}/analyze', [CounselorAttemptController::class, 'editAnalysis'])
                    ->name('attempts.analyze.edit');
                Route::post('/attempts/{attempt}/analyze', [CounselorAttemptController::class, 'storeAnalysis'])
                    ->name('attempts.analyze.store');

                // ‚úÖ Learning paths
                Route::get('/learning-paths', [CounselorLearningPathController::class, 'index'])
                    ->name('learning-paths.index');
                Route::get('/learning-paths/create/{student}', [CounselorLearningPathController::class, 'create'])
                    ->name('learning-paths.create');
                Route::post('/learning-paths/{student}', [CounselorLearningPathController::class, 'store'])
                    ->name('learning-paths.store');

                // ‚úÖ Reports (Phase 1 just views)
                Route::view('/reports', 'dashboard.counselor.reports.index')
                    ->name('reports.index');
                Route::view('/reports/{report}', 'dashboard.counselor.reports.show')
                    ->name('reports.show');

                // ‚úÖ Profile
                Route::get('/profile', [CounselorProfileController::class, 'edit'])
                    ->name('profile');
                Route::put('/profile', [CounselorProfileController::class, 'update'])
                    ->name('profile.update');
            });
    });

......................................................................

----------------------------------------------------------------------

## üìÑ 178. student.php

**Path:** `routes/student.php`  
**Size:** 3,980 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\Student\StudentExamController;
use App\Http\Controllers\Student\StudentClassController;
use App\Http\Controllers\Student\LearningPathController;
use App\Http\Controllers\Student\MyTeachersController;
use App\Http\Controllers\Student\StudentProfileController;
use App\Http\Controllers\Student\PublicExamController;

Route::prefix('dashboard')->middleware(['auth', 'role.selected'])->group(function () {
        Route::prefix('student')->name('student.')->middleware('role:student')->group(function ()
        {

                // Dashboard
                Route::view('/', 'dashboard.student.index')->name('index');


                // Classrooms
                Route::get('/classrooms/join', [StudentClassController::class, 'showJoinForm'])
                    ->name('classrooms.join.form');

                Route::post('/classrooms/join', [StudentClassController::class, 'join'])
                    ->name('classrooms.join');

                Route::get('/classrooms', [StudentClassController::class, 'index'])
                    ->name('classrooms.index');

                Route::get('/classrooms/{classroom}', [StudentClassController::class, 'show'])
                    ->name('classrooms.show');


                // Exams (legacy general list - keep for now)
                Route::get('/exams', [StudentExamController::class, 'index'])
                    ->name('exams.index');

                // ‚úÖ NEW: split exam lists by type
                Route::get('/exams/public', [StudentExamController::class, 'publicIndex'])
                    ->name('exams.public');

                Route::get('/exams/classroom', [StudentExamController::class, 'classroomIndex'])
                    ->name('exams.classroom');

                // Shared exam routes
                Route::get('/exams/{exam}', [StudentExamController::class, 'show'])
                    ->name('exams.show');

                Route::get('/exams/{exam}/take', [StudentExamController::class, 'take'])
                    ->name('exams.take');

                Route::post('/exams/{exam}/start', [StudentExamController::class, 'start'])
                    ->name('exams.start');

                Route::post('/exams/{exam}/submit', [StudentExamController::class, 'submit'])
                    ->name('exams.submit');


                // ‚úÖ NEW: Attempt result & analysis
                Route::get('/attempts/{attempt}/result', [StudentExamController::class, 'result'])
                    ->name('attempts.result');

                Route::get('/attempts/{attempt}/analysis', [StudentExamController::class, 'analysis'])
                    ->name('attempts.analysis');

                // legacy attempt show (keep so old links won't break)
                Route::get('/attempts/{attempt}', [StudentExamController::class, 'attemptShow'])
                    ->name('attempts.show');


                // Reports / Support
                Route::view('/reports', 'dashboard.student.reports.index')
                    ->name('reports.index');

                Route::view('/support', 'dashboard.student.support.index')
                    ->name('support.index');


                // Learning Path / My Teachers
                Route::get('/learning-path', [LearningPathController::class, 'index'])
                    ->name('learning-path');

                Route::get('/my-teachers', [MyTeachersController::class, 'index'])
                    ->name('my-teachers.index');


                // Profile
                Route::get('/profile', [StudentProfileController::class, 'edit'])
                    ->name('profile');

                Route::put('/profile', [StudentProfileController::class, 'update'])
                    ->name('profile.update');

                Route::post('/profile/avatar', [StudentProfileController::class, 'updateAvatar'])
                    ->name('profile.avatar');
        });

    });

......................................................................

----------------------------------------------------------------------

## üìÑ 179. teacher.php

**Path:** `routes/teacher.php`  
**Size:** 6,863 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Teacher Controllers (App\Http\Controllers\Teacher)
|--------------------------------------------------------------------------
*/
use App\Http\Controllers\Teacher\DashboardController;
use App\Http\Controllers\Teacher\TeacherClassController;
use App\Http\Controllers\Teacher\TeacherExamController;
use App\Http\Controllers\Teacher\TeacherStudentController;
use App\Http\Controllers\Teacher\SubjectController;
use App\Http\Controllers\Teacher\QuestionController;

Route::prefix('dashboard')
    ->middleware(['auth', 'role.selected'])
    ->group(function () {

        Route::prefix('teacher')
            ->name('teacher.')
            ->middleware('role:teacher')
            ->group(function () {

                // ==========================================================
                // Teacher Dashboard
                // ==========================================================
                Route::get('/', [DashboardController::class, 'index'])->name('index');

                // ==========================================================
                // Classes
                // ==========================================================
                Route::get('/classes', [TeacherClassController::class, 'index'])
                    ->name('classes.index');

                Route::resource('classes', TeacherClassController::class)
                    ->parameters(['classes' => 'class'])
                    ->except(['index']);

                Route::get('classes/{class}/students', [TeacherClassController::class, 'students'])
                    ->name('classes.students');

                Route::post('classes/{class}/students', [TeacherClassController::class, 'addStudent'])
                    ->name('classes.students.add');

                Route::delete('classes/{class}/students/{student}', [TeacherClassController::class, 'removeStudent'])
                    ->name('classes.students.remove');

                // ==========================================================
                // Exams (create/store ÿ®ÿ±⁄Øÿ¥ÿ™ ÿ®Ÿá resource ⁄©ÿßŸÖŸÑ)
                // ==========================================================
                Route::resource('exams', TeacherExamController::class);

                // ==========================================================
                // Exams AJAX Data (ÿ®ÿ±ÿß€å ŸàÿµŸÑ ⁄©ÿ±ÿØŸÜ UUID ŸàÿßŸÇÿπ€å ÿ®Ÿá ŸÅÿ±ÿßŸÜÿ™)
                // ÿß€åŸÜ route Ÿáÿß ÿ±ÿß ÿØÿ± TeacherExamController ŸÖ€å‚Äåÿ≥ÿßÿ≤€åŸÖ
                // ==========================================================
                Route::prefix('exams/data')
                    ->name('exams.data.')
                    ->group(function () {

                        Route::get('/sections', [TeacherExamController::class, 'sections'])
                            ->name('sections');

                        Route::get('/grades', [TeacherExamController::class, 'grades'])
                            ->name('grades');

                        Route::get('/branches', [TeacherExamController::class, 'branches'])
                            ->name('branches');

                        Route::get('/fields', [TeacherExamController::class, 'fields'])
                            ->name('fields');

                        Route::get('/subfields', [TeacherExamController::class, 'subfields'])
                            ->name('subfields');

                        // ‚úÖ FIX: ÿ®ÿß€åÿØ ÿØŸÇ€åŸÇÿßŸã subject-types ÿ®ÿßÿ¥ÿØ ÿ™ÿß Blade ÿÆÿ∑ÿß ŸÜÿØŸáÿØ
                        Route::get('/subject-types', [TeacherExamController::class, 'subjectTypes'])
                            ->name('subject-types');

                        Route::get('/subjects', [TeacherExamController::class, 'subjects'])
                            ->name('subjects');
                    });

                // ==========================================================
                // Questions
                // ==========================================================
                Route::get('/exams/{exam}/questions', [QuestionController::class, 'index'])
                    ->name('exams.questions.index');
                Route::get('/exams/{exam}/questions/create', [QuestionController::class, 'create'])
                    ->name('exams.questions.create');
                Route::post('/exams/{exam}/questions', [QuestionController::class, 'store'])
                    ->name('exams.questions.store');
                Route::get('/exams/{exam}/questions/{question}/edit', [QuestionController::class, 'edit'])
                    ->name('exams.questions.edit');
                Route::put('/exams/{exam}/questions/{question}', [QuestionController::class, 'update'])
                    ->name('exams.questions.update');
                Route::delete('/exams/{exam}/questions/{question}', [QuestionController::class, 'destroy'])
                    ->name('exams.questions.destroy');

                // ==========================================================
                // Students
                // ==========================================================
                Route::get('/students', [TeacherStudentController::class, 'index'])
                    ->name('students.index');
                Route::get('/students/{student}', [TeacherStudentController::class, 'show'])
                    ->name('students.show');
                Route::get('/students/{student}/attempts', [TeacherStudentController::class, 'attempts'])
                    ->name('students.attempts');

                // Attempts
                Route::get('/attempts/{attempt}', [TeacherStudentController::class, 'attemptShow'])
                    ->name('attempts.show');
                Route::post('/attempts/{attempt}/answers/{answer}/grade', [TeacherStudentController::class, 'gradeEssayAnswer'])
                    ->name('attempts.answers.grade');

                // ==========================================================
                // Subjects
                // ==========================================================
                Route::get('/subjects', [SubjectController::class, 'index'])
                    ->name('subjects.index');
                Route::post('/subjects', [SubjectController::class, 'store'])
                    ->name('subjects.store');

                // ==========================================================
                // Static
                // ==========================================================
                Route::view('/reports', 'dashboard.teacher.reports.index')->name('reports.index');
                Route::view('/profile', 'dashboard.teacher.profile')->name('profile');
            });
    });

......................................................................

----------------------------------------------------------------------

## üìÑ 180. web.php

**Path:** `routes/web.php`  
**Size:** 942 bytes  
**Modified:** 2025-12-08 16:39:59

----------------------------------------------------------------------

<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\LandingController;

// Landing Page
Route::get('/', [LandingController::class, 'index'])->name('landing');

// ÿµŸÅÿ≠Ÿá ŸÑÿß⁄Ø€åŸÜ ÿπŸÖŸàŸÖ€å (ÿß⁄Øÿ± ŸÖ€å‚ÄåÿÆŸàÿßŸá€å ÿ¨ÿØÿß ÿ®ÿßÿ¥ÿØ)
Route::get('/login', function () {
    return view('auth.login');
})->name('login');

// Route ÿ®ÿ±ÿß€å ÿµŸÅÿ≠Ÿá ÿ≠ÿ±€åŸÖ ÿÆÿµŸàÿµ€å
Route::get('/privacy-policy', function () {
    return view('privacy-policy');
})->name('privacy');

// Route ÿ®ÿ±ÿß€å ÿµŸÅÿ≠Ÿá ÿ¥ÿ±ÿß€åÿ∑ ÿßÿ≥ÿ™ŸÅÿßÿØŸá
Route::get('/terms-of-service', function () {
    return view('terms-of-service');
})->name('terms');

// Authentication Routes
require __DIR__.'/auth.php';

// Dashboard Routes
require __DIR__.'/student.php';
require __DIR__.'/teacher.php';
require __DIR__.'/admin.php';
require __DIR__.'/counselor.php';

// Fallback Route
Route::fallback(function () {
    return redirect()->route('landing');
});

......................................................................

----------------------------------------------------------------------

## üìÑ 181. 2025_12_05_103024_create_users_table.php

**Path:** `database/migrations/2025_12_05_103024_create_users_table.php`  
**Size:** 728 bytes  
**Modified:** 2025-12-06 19:21:59

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('users', function (Blueprint $table) {
            $table->engine = 'InnoDB';
            $table->uuid("id")->primary();
            $table->string('name', 150);
            $table->string('email', 190)->nullable();
            $table->string('phone', 30)->nullable();
            $table->string('password', 255);
            $table->string('status', 30);
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('users');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 182. 2025_12_06_102945_create_academic_assessments_table.php

**Path:** `database/migrations/2025_12_06_102945_create_academic_assessments_table.php`  
**Size:** 1,281 bytes  
**Modified:** 2025-12-06 19:23:31

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('academic_assessments', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->string('section_id')->nullable();
            $table->string('grade_id')->nullable();
            $table->string('branch_id')->nullable();
            $table->string('field_id')->nullable();
            $table->string('subfield_id')->nullable();
            $table->string('subject_id')->nullable();
            $table->string('topic_id')->nullable();
            $table->enum('assessment_type', ['diagnostic','weekly','exam_result','practice']);
            $table->decimal('score_percent', 5, 2);
            $table->decimal('mastery_level', 5, 2);
            $table->longText('weaknesses')->nullable();
            $table->longText('strengths')->nullable();
            $table->dateTime('taken_at');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('academic_assessments');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 183. 2025_12_06_102947_create_ai_artifacts_table.php

**Path:** `database/migrations/2025_12_06_102947_create_ai_artifacts_table.php`  
**Size:** 1,052 bytes  
**Modified:** 2025-12-06 19:26:24

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_artifacts', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('session_id');
            $table->enum('artifact_type', ['content','question','plan','report','rubric','other']);
            $table->string('title', 250)->nullable();
            $table->longText('body')->nullable();
            $table->string('linked_table', 100)->nullable();
            $table->string('linked_id')->nullable();
            $table->enum('status', ['draft','approved','published','rejected']);
            $table->string('reviewer_id')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_artifacts');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 184. 2025_12_06_102948_create_ai_feedback_table.php

**Path:** `database/migrations/2025_12_06_102948_create_ai_feedback_table.php`  
**Size:** 756 bytes  
**Modified:** 2025-12-06 19:12:41

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_feedback', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('session_id');
            $table->string('message_id')->nullable();
            $table->unsignedTinyInteger('rating');
            $table->text('feedback_text')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_feedback');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 185. 2025_12_06_102949_create_ai_messages_table.php

**Path:** `database/migrations/2025_12_06_102949_create_ai_messages_table.php`  
**Size:** 867 bytes  
**Modified:** 2025-12-06 19:13:01

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_messages', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('session_id');
            $table->enum('sender_type', ['user','ai','system']);
            $table->longText('content');
            $table->string('tokens_in')->nullable();
            $table->string('tokens_out')->nullable();
            $table->longText('safety_flags')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_messages');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 186. 2025_12_06_102950_create_ai_sessions_table.php

**Path:** `database/migrations/2025_12_06_102950_create_ai_sessions_table.php`  
**Size:** 1,300 bytes  
**Modified:** 2025-12-06 19:13:17

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('ai_sessions', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('ai_agent_id');
            $table->enum('context_type', ['teaching','counseling','qna','exam_help','mixed']);
            $table->string('section_id')->nullable();
            $table->string('grade_id')->nullable();
            $table->string('branch_id')->nullable();
            $table->string('field_id')->nullable();
            $table->string('subfield_id')->nullable();
            $table->string('subject_id')->nullable();
            $table->string('topic_id')->nullable();
            $table->string('classroom_id')->nullable();
            $table->string('exam_id')->nullable();
            $table->dateTime('started_at');
            $table->dateTime('ended_at')->nullable();
            $table->longText('metadata')->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('ai_sessions');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 187. 2025_12_06_102951_create_attempt_answers_table.php

**Path:** `database/migrations/2025_12_06_102951_create_attempt_answers_table.php`  
**Size:** 787 bytes  
**Modified:** 2025-12-06 19:13:28

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('attempt_answers', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('attempt_id');
            $table->string('question_id');
            $table->longText('answer')->nullable();
            $table->boolean('is_correct')->nullable();
            $table->decimal('score', 6, 2)->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('attempt_answers');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 188. 2025_12_06_102953_1_create_sections_table.php

**Path:** `database/migrations/2025_12_06_102953_1_create_sections_table.php`  
**Size:** 773 bytes  
**Modified:** 2025-12-06 21:10:19

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('sections', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            $table->string('slug', 100)->unique();  // ŸÖÿ´ŸÑ "middle", "high"
            $table->string('name_fa', 150);

            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('sections');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 189. 2025_12_06_102953_2_0_create_grades_table.php

**Path:** `database/migrations/2025_12_06_102953_2_0_create_grades_table.php`  
**Size:** 1,075 bytes  
**Modified:** 2025-12-06 21:15:45

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('grades', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            // ‚úÖ FK ÿ®Ÿá sections (UUID)
            $table->uuid('section_id');
            $table->foreign('section_id')
                ->references('id')->on('sections')
                ->cascadeOnDelete();

            // ‚úÖ ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿß€åŸá
            $table->string('value', 50);      // ŸÖÿ´ŸÑ "10", "11", "12" €åÿß "7", "8", ...
            $table->string('name_fa', 150);   // ŸÖÿ´ŸÑ "ÿØŸáŸÖ", "€åÿßÿ≤ÿØŸáŸÖ"
            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('grades');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 190. 2025_12_06_102953_2_1_create_branches_table.php

**Path:** `database/migrations/2025_12_06_102953_2_1_create_branches_table.php`  
**Size:** 1,103 bytes  
**Modified:** 2025-12-06 21:09:43

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('branches', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            // ‚úÖ FK ÿ®Ÿá sections (UUID)
            $table->uuid('section_id');
            $table->foreign('section_id')
                ->references('id')->on('sections')
                ->cascadeOnDelete();

            // ‚úÖ ŸÅ€åŸÑÿØŸáÿß€å ŸÑÿßÿ≤ŸÖ ÿ®ÿ±ÿß€å ŸÑ€åÿ≥ÿ™ Ÿà ÿßŸÜÿ™ÿÆÿßÿ®
            $table->string('slug', 100)->unique();   // ŸÖÿ´ŸÑÿßŸã "math" €åÿß "tajrobi"
            $table->string('name_fa', 150);          // ŸÜÿßŸÖ ŸÅÿßÿ±ÿ≥€å
            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('branches');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 191. 2025_12_06_102953_3_create_fields_table.php

**Path:** `database/migrations/2025_12_06_102953_3_create_fields_table.php`  
**Size:** 993 bytes  
**Modified:** 2025-12-06 21:11:23

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('fields', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            // ‚úÖ FK ÿ®Ÿá branches (UUID)
            $table->uuid('branch_id');
            $table->foreign('branch_id')
                ->references('id')->on('branches')
                ->cascadeOnDelete();

            $table->string('slug', 100)->unique();
            $table->string('name_fa', 150);

            // ‚úÖ sort_order ÿπÿØÿØ€å
            $table->unsignedInteger('sort_order')->default(0);

            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('fields');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 192. 2025_12_06_102953_4_create_subfields_table.php

**Path:** `database/migrations/2025_12_06_102953_4_create_subfields_table.php`  
**Size:** 1,043 bytes  
**Modified:** 2025-12-06 21:13:23

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('subfields', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            // ‚úÖ FK ÿ®Ÿá fields (UUID)
            $table->uuid('field_id');
            $table->foreign('field_id')
                ->references('id')->on('fields')
                ->cascadeOnDelete();

            // ‚úÖ ŸÅ€åŸÑÿØŸáÿß€å ŸÑÿßÿ≤ŸÖ
            $table->string('slug', 100)->unique();
            $table->string('name_fa', 150);
            $table->string('icon')->nullable();
            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('subfields');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 193. 2025_12_06_102953_5_0_create_subject_types_table.php

**Path:** `database/migrations/2025_12_06_102953_5_0_create_subject_types_table.php`  
**Size:** 1,143 bytes  
**Modified:** 2025-12-06 21:13:26

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('subject_types', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            // ‚úÖ ÿ≥ÿ™ŸàŸÜ‚ÄåŸáÿß€å ŸÑÿßÿ≤ŸÖ ŸÖÿ∑ÿßÿ®ŸÇ ŸÖÿØŸÑ SubjectType
            $table->string('slug', 100)->unique();
            $table->string('name_fa', 150);

            $table->decimal('coefficient', 5, 2)->nullable();
            $table->unsignedTinyInteger('weight_percent')->nullable();
            $table->unsignedSmallInteger('default_question_count')->nullable();

            $table->string('color')->nullable();
            $table->string('icon')->nullable();

            $table->unsignedInteger('sort_order')->default(0);
            $table->boolean('is_active')->default(true);

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('subject_types');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 194. 2025_12_06_102953_5_1_create_subjects_table.php

**Path:** `database/migrations/2025_12_06_102953_5_1_create_subjects_table.php`  
**Size:** 1,684 bytes  
**Modified:** 2025-12-06 21:12:43

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('subjects', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ PK UUID
            $table->uuid('id')->primary();

            $table->string('title_fa', 200);
            $table->string('code', 50)->nullable();

            // ÿß⁄Øÿ± ÿ≥ÿßÿπÿßÿ™ ŸÖŸÖ⁄©ŸÜŸá ÿ®€åÿ¥ÿ™ÿ± ÿßÿ≤ 255 ÿ®ÿ¥Ÿáÿå unsignedSmallInteger ÿ®Ÿáÿ™ÿ±Ÿá
            $table->unsignedSmallInteger('hours')->nullable();

            // ‚úÖ ŸáŸÖŸá FKŸáÿß UUID
            $table->uuid('grade_id');
            $table->uuid('branch_id');
            $table->uuid('field_id');
            $table->uuid('subfield_id')->nullable();
            $table->uuid('subject_type_id')->nullable();

            $table->text('description')->nullable();
            $table->boolean('is_active')->default(true);

            // ‚úÖ FKŸáÿß€å UUID
            $table->foreign('grade_id')->references('id')->on('grades')->restrictOnDelete();
            $table->foreign('branch_id')->references('id')->on('branches')->restrictOnDelete();
            $table->foreign('field_id')->references('id')->on('fields')->restrictOnDelete();
            $table->foreign('subfield_id')->references('id')->on('subfields')->nullOnDelete();
            $table->foreign('subject_type_id')->references('id')->on('subject_types')->nullOnDelete();

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('subjects');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 195. 2025_12_06_102953_create_classrooms_table.php

**Path:** `database/migrations/2025_12_06_102953_create_classrooms_table.php`  
**Size:** 2,211 bytes  
**Modified:** 2025-12-06 18:46:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('classrooms', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            $table->string('id')->primary();

            $table->string('teacher_id');
            $table->foreign('teacher_id')
                ->references('id')->on('users')
                ->cascadeOnDelete();

            $table->string('title', 200);
            $table->text('description')->nullable();

            // ÿß€åŸÜ‚ÄåŸáÿß ŸáŸÖ ÿ®ÿß€åÿØ ÿ®ÿß ŸÜŸàÿπ id ÿ¨ÿØŸàŸÑ‚ÄåŸáÿß€å ŸÖŸÇÿµÿØ €å⁄©€å ÿ®ÿßÿ¥ŸÜÿØ.
            // ⁄ÜŸàŸÜ ÿØÿ± Ÿæÿ±Ÿà⁄òŸá‚Äåÿßÿ™ ŸÇÿ®ŸÑÿßŸã string ÿ®ŸàÿØŸáÿå ÿß€åŸÜÿ¨ÿß ŸáŸÖ string ŸÖ€å‚Äå⁄Øÿ∞ÿßÿ±€åŸÖ:
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id')->nullable();
            $table->string('subject_type_id')->nullable();

            $table->enum('classroom_type', ['single', 'comprehensive']);

            $table->string('join_code', 20)->unique();
            $table->boolean('is_active')->default(true);

            $table->json('metadata')->nullable();

            $table->timestamps();

            // FKŸáÿß€å ÿ≥ÿßÿÆÿ™ÿßÿ±€å (ÿß⁄Øÿ± ÿ¨ÿØÿßŸàŸÑ ŸÖŸÇÿµÿØ id=string ÿØÿßÿ±ŸÜÿØÿå ÿØÿ±ÿ≥ÿ™ ⁄©ÿßÿ± ŸÖ€å‚Äå⁄©ŸÜÿØ)
            $table->foreign('section_id')->references('id')->on('sections')->restrictOnDelete();
            $table->foreign('grade_id')->references('id')->on('grades')->restrictOnDelete();
            $table->foreign('branch_id')->references('id')->on('branches')->restrictOnDelete();
            $table->foreign('field_id')->references('id')->on('fields')->restrictOnDelete();

            $table->foreign('subfield_id')->references('id')->on('subfields')->nullOnDelete();
            $table->foreign('subject_type_id')->references('id')->on('subject_types')->nullOnDelete();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('classrooms');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 196. 2025_12_06_102954_create_classroom_subject_table.php

**Path:** `database/migrations/2025_12_06_102954_create_classroom_subject_table.php`  
**Size:** 919 bytes  
**Modified:** 2025-12-06 21:13:18

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('classroom_subject', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ FKŸáÿß UUID
            $table->uuid('classroom_id');
            $table->uuid('subject_id');

            $table->foreign('classroom_id')
                ->references('id')->on('classrooms')
                ->cascadeOnDelete();

            $table->foreign('subject_id')
                ->references('id')->on('subjects')
                ->cascadeOnDelete();

            // ‚úÖ ⁄©ŸÑ€åÿØ ŸÖÿ±⁄©ÿ®
            $table->primary(['classroom_id', 'subject_id']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('classroom_subject');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 197. 2025_12_06_102955_create_classroom_user_table.php

**Path:** `database/migrations/2025_12_06_102955_create_classroom_user_table.php`  
**Size:** 958 bytes  
**Modified:** 2025-12-06 21:13:56

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('classroom_user', function (Blueprint $table) {
            $table->engine = 'InnoDB';

            // ‚úÖ FKŸáÿß UUID
            $table->uuid('classroom_id');
            $table->uuid('user_id');

            $table->foreign('classroom_id')
                ->references('id')->on('classrooms')
                ->cascadeOnDelete();

            $table->foreign('user_id')
                ->references('id')->on('users')
                ->cascadeOnDelete();

            // ‚úÖ ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ÿ´ÿ®ÿ™ ÿ™⁄©ÿ±ÿßÿ±€å €å⁄© ⁄©ÿßÿ±ÿ®ÿ± ÿØÿ± €å⁄© ⁄©ŸÑÿßÿ≥
            $table->primary(['classroom_id', 'user_id']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('classroom_user');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 198. 2025_12_06_102956_create_contents_table.php

**Path:** `database/migrations/2025_12_06_102956_create_contents_table.php`  
**Size:** 1,372 bytes  
**Modified:** 2025-12-06 18:46:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('contents', function (Blueprint $table) {
            $table->uuid('user_id');
$table->foreign('user_id')->references('id')->on('users');            $table->string('creator_id');
            $table->enum('type', ['video','pdf','article','link','quiz','other']);
            $table->string('title', 250);
            $table->text('description')->nullable();
            $table->text('file_path')->nullable();
            $table->text('url')->nullable();
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('subject_id');
            $table->string('topic_id')->nullable();
            $table->enum('access_level', ['public','classroom','private']);
            $table->string('classroom_id')->nullable();
            $table->string('ai_generated_by_session_id')->nullable();
            $table->boolean('is_active');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('contents');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 199. 2025_12_06_102958_create_counselor_profiles_table.php

**Path:** `database/migrations/2025_12_06_102958_create_counselor_profiles_table.php`  
**Size:** 718 bytes  
**Modified:** 2025-12-06 19:14:40

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('counselor_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->longText('focus_area')->nullable();
            $table->string('main_section_id')->nullable();
            $table->string('main_branch_id')->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('counselor_profiles');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 200. 2025_12_06_102959_create_exams_table.php

**Path:** `database/migrations/2025_12_06_102959_create_exams_table.php`  
**Size:** 1,842 bytes  
**Modified:** 2025-12-06 20:44:29

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exams', function (Blueprint $table) {

            // ‚úÖ ⁄©ŸÑ€åÿØ ÿßÿµŸÑ€å UUID
            $table->uuid('id')->primary();

            // ÿß⁄Øÿ± user_id ŸÑÿßÿ≤ŸÖ ÿØÿßÿ±€å ŸÜ⁄ØŸáÿ¥ ÿØÿßÿ±
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');

            // ÿß€åŸÜ‚ÄåŸáÿß ŸáŸÖ ÿ®Ÿáÿ™ÿ±Ÿá uuid/string ŸáŸÖÿßŸáŸÜ⁄Ø ÿ®ÿßÿ¥ŸÜ
            $table->string('teacher_id');
            $table->string('classroom_id')->nullable();

            $table->enum('exam_type', ['public','class_single','class_comprehensive']);
            $table->string('title', 250);
            $table->text('description')->nullable();
            $table->string('duration_minutes');
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('subject_type_id');
            $table->string('total_questions')->nullable();
            $table->longText('coefficients')->nullable();
            $table->dateTime('start_at')->nullable();
            $table->dateTime('end_at')->nullable();
            $table->boolean('shuffle_questions');
            $table->boolean('shuffle_options');
            $table->boolean('ai_assisted');
            $table->string('ai_session_id')->nullable();
            $table->boolean('is_active');
            $table->boolean('is_published');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exams');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 201. 2025_12_06_103000_create_exam_attempts_table.php

**Path:** `database/migrations/2025_12_06_103000_create_exam_attempts_table.php`  
**Size:** 853 bytes  
**Modified:** 2025-12-06 19:15:01

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exam_attempts', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('exam_id');
            $table->string('student_id');
            $table->dateTime('started_at');
            $table->dateTime('finished_at')->nullable();
            $table->enum('status', ['in_progress','submitted','graded']);
            $table->decimal('total_score', 6, 2)->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exam_attempts');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 202. 2025_12_06_103001_create_exam_questions_table.php

**Path:** `database/migrations/2025_12_06_103001_create_exam_questions_table.php`  
**Size:** 518 bytes  
**Modified:** 2025-12-06 18:46:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exam_questions', function (Blueprint $table) {
            $table->string('exam_id');
            $table->string('question_id');
            $table->string('sort_order');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exam_questions');
    }
};
......................................................................

----------------------------------------------------------------------

## üìÑ 203. 2025_12_06_103002_create_exam_subject_table.php

**Path:** `database/migrations/2025_12_06_103002_create_exam_subject_table.php`  
**Size:** 529 bytes  
**Modified:** 2025-12-06 18:46:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('exam_subject', function (Blueprint $table) {
            $table->string('exam_id');
            $table->string('subject_id');
            $table->string('question_count')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('exam_subject');
    }
};
......................................................................

----------------------------------------------------------------------

## üìÑ 204. 2025_12_06_103005_create_learning_paths_table.php

**Path:** `database/migrations/2025_12_06_103005_create_learning_paths_table.php`  
**Size:** 1,014 bytes  
**Modified:** 2025-12-06 19:22:03

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('learning_paths', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->enum('path_type', ['academic','counseling','mixed']);
            $table->string('title', 250);
            $table->date('start_date');
            $table->date('end_date')->nullable();
            $table->enum('status', ['active','completed','archived']);
            $table->enum('generated_by', ['ai','counselor','teacher','system']);
            $table->longText('metadata')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('learning_paths');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 205. 2025_12_06_103006_create_learning_path_steps_table.php

**Path:** `database/migrations/2025_12_06_103006_create_learning_path_steps_table.php`  
**Size:** 1,547 bytes  
**Modified:** 2025-12-06 19:15:35

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('learning_path_steps', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('learning_path_id');
            $table->enum('step_type', ['topic','subject','content','exercise','exam','counseling_task']);
            $table->string('order_index');
            $table->string('section_id')->nullable();
            $table->string('grade_id')->nullable();
            $table->string('branch_id')->nullable();
            $table->string('field_id')->nullable();
            $table->string('subfield_id')->nullable();
            $table->string('subject_id')->nullable();
            $table->string('topic_id')->nullable();
            $table->string('content_id')->nullable();
            $table->string('exam_id')->nullable();
            $table->string('counseling_task_id')->nullable();
            $table->string('estimated_minutes')->nullable();
            $table->decimal('required_mastery', 5, 2);
            $table->enum('status', ['locked','current','done','skipped']);
            $table->date('due_date')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('learning_path_steps');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 206. 2025_12_06_103007_create_otps_table.php

**Path:** `database/migrations/2025_12_06_103007_create_otps_table.php`  
**Size:** 1,092 bytes  
**Modified:** 2025-12-06 19:28:59

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create("otps", function (Blueprint $table) {
            $table->engine = "InnoDB";

            // ‚úÖ UUID primary key
            $table->uuid("id")->primary();

            $table->string("phone", 15)->index();
            $table->string("code", 6);
            $table->string("token", 255)->nullable();

            // ‚úÖ default ⁄Øÿ∞ÿßÿ¥ÿ™€åŸÖ ÿ™ÿß ÿß⁄Øÿ± ŸÜŸÅÿ±ÿ≥ÿ™€å ÿÆÿ∑ÿß ŸÜÿØŸá
            $table->enum("type", ["login","register","password_reset"])
                  ->default("login");

            $table->unsignedTinyInteger("attempts")->default(0);
            $table->boolean("verified")->default(false);

            $table->timestamp("expires_at");
            $table->timestamp("verified_at")->nullable();

            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists("otps");
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 207. 2025_12_06_103008_create_psycho_assessments_table.php

**Path:** `database/migrations/2025_12_06_103008_create_psycho_assessments_table.php`  
**Size:** 871 bytes  
**Modified:** 2025-12-06 19:15:47

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('psycho_assessments', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->enum('assessment_type', ['stress','motivation','focus','anxiety','mood','sleep']);
            $table->decimal('value', 5, 2);
            $table->text('notes')->nullable();
            $table->dateTime('measured_at');
            $table->enum('source', ['self_report','counselor','ai_inferred']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('psycho_assessments');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 208. 2025_12_06_103009_create_questions_table.php

**Path:** `database/migrations/2025_12_06_103009_create_questions_table.php`  
**Size:** 1,500 bytes  
**Modified:** 2025-12-06 20:48:04

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('questions', function (Blueprint $table) {

            // ‚úÖ ⁄©ŸÑ€åÿØ ÿßÿµŸÑ€å UUID
            $table->uuid('id')->primary();

            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');

            $table->string('creator_id');
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('subject_id');
            $table->string('topic_id')->nullable();
            $table->unsignedTinyInteger('difficulty');
            $table->enum('question_type', ['mcq','descriptive','true_false','matching','short_answer','other']);
            $table->longText('content');
            $table->longText('options')->nullable();
            $table->longText('correct_answer');
            $table->longText('explanation')->nullable();
            $table->string('ai_generated_by_session_id')->nullable();
            $table->decimal('ai_confidence', 5, 2)->nullable();
            $table->boolean('is_active');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('questions');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 209. 2025_12_06_103010_create_roles_table.php

**Path:** `database/migrations/2025_12_06_103010_create_roles_table.php`  
**Size:** 606 bytes  
**Modified:** 2025-12-06 18:46:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('roles', function (Blueprint $table) {
            $table->string('id')->primary();
            $table->string('name', 100);
            $table->string('slug', 100)->unique();
            $table->boolean('is_active')->default(true);
            $table->timestamps();
        });

    }

    public function down(): void
    {
        Schema::dropIfExists('roles');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 210. 2025_12_06_103013_create_student_counseling_task_logs_table.php

**Path:** `database/migrations/2025_12_06_103013_create_student_counseling_task_logs_table.php`  
**Size:** 779 bytes  
**Modified:** 2025-12-06 19:16:16

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_counseling_task_logs', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->string('counseling_task_id');
            $table->dateTime('done_at');
            $table->unsignedTinyInteger('self_rating')->nullable();
            $table->text('notes')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_counseling_task_logs');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 211. 2025_12_06_103014_create_student_daily_logs_table.php

**Path:** `database/migrations/2025_12_06_103014_create_student_daily_logs_table.php`  
**Size:** 936 bytes  
**Modified:** 2025-12-06 19:16:25

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_daily_logs', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->date('log_date');
            $table->string('study_minutes');
            $table->unsignedTinyInteger('mood')->nullable();
            $table->unsignedTinyInteger('stress_level')->nullable();
            $table->decimal('sleep_hours', 4, 1)->nullable();
            $table->text('free_text')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_daily_logs');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 212. 2025_12_06_103015_create_student_goals_table.php

**Path:** `database/migrations/2025_12_06_103015_create_student_goals_table.php`  
**Size:** 1,065 bytes  
**Modified:** 2025-12-06 19:16:35

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_goals', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->enum('goal_type', ['academic','psychological','career']);
            $table->string('title', 250);
            $table->text('description')->nullable();
            $table->date('target_date')->nullable();
            $table->enum('status', ['active','done','paused']);
            $table->unsignedTinyInteger('priority');
            $table->string('related_subject_id')->nullable();
            $table->string('related_topic_id')->nullable();
            $table->timestamp('created_at')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_goals');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 213. 2025_12_06_103016_create_student_learning_profiles_table.php

**Path:** `database/migrations/2025_12_06_103016_create_student_learning_profiles_table.php`  
**Size:** 910 bytes  
**Modified:** 2025-12-06 19:16:43

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_learning_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('student_id');
            $table->longText('preferred_style')->nullable();
            $table->unsignedTinyInteger('pace_level');
            $table->string('study_time_per_day')->nullable();
            $table->longText('goals_json')->nullable();
            $table->text('counselor_notes')->nullable();
            $table->text('ai_summary')->nullable();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_learning_profiles');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 214. 2025_12_06_103017_create_student_profiles_table.php

**Path:** `database/migrations/2025_12_06_103017_create_student_profiles_table.php`  
**Size:** 808 bytes  
**Modified:** 2025-12-06 19:16:55

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('student_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('section_id');
            $table->string('grade_id');
            $table->string('branch_id');
            $table->string('field_id');
            $table->string('subfield_id');
            $table->string('national_code', 20)->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('student_profiles');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 215. 2025_12_06_103021_create_teacher_profiles_table.php

**Path:** `database/migrations/2025_12_06_103021_create_teacher_profiles_table.php`  
**Size:** 820 bytes  
**Modified:** 2025-12-06 19:17:06

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('teacher_profiles', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->text('bio')->nullable();
            $table->string('main_section_id')->nullable();
            $table->string('main_branch_id')->nullable();
            $table->string('main_field_id')->nullable();
            $table->string('main_subfield_id')->nullable();
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('teacher_profiles');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 216. 2025_12_06_103022_create_teacher_subject_table.php

**Path:** `database/migrations/2025_12_06_103022_create_teacher_subject_table.php`  
**Size:** 480 bytes  
**Modified:** 2025-12-06 18:46:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('teacher_subject', function (Blueprint $table) {
            $table->string('teacher_id');
            $table->string('subject_id');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('teacher_subject');
    }
};
......................................................................

----------------------------------------------------------------------

## üìÑ 217. 2025_12_06_103023_create_topics_table.php

**Path:** `database/migrations/2025_12_06_103023_create_topics_table.php`  
**Size:** 692 bytes  
**Modified:** 2025-12-06 19:17:16

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('topics', function (Blueprint $table) {
            $table->uuid('user_id');
            $table->foreign('user_id')->references('id')->on('users');
            $table->string('subject_id');
            $table->string('title_fa', 200);
            $table->string('sort_order');
            $table->boolean('is_active');
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('topics');
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 218. 2025_12_06_184150_create_role_user_table.php

**Path:** `database/migrations/2025_12_06_184150_create_role_user_table.php`  
**Size:** 693 bytes  
**Modified:** 2025-12-06 20:00:49

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::create("role_user", function (Blueprint $table) {
            $table->uuid("user_id");
            $table->uuid("role_id");

            $table->foreign("user_id")->references("id")->on("users")->cascadeOnDelete();
            $table->foreign("role_id")->references("id")->on("roles")->cascadeOnDelete();

            $table->primary(["user_id","role_id"]);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists("role_user");
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 219. 2025_12_06_213732_add_subject_id_to_classrooms_table.php

**Path:** `database/migrations/2025_12_06_213732_add_subject_id_to_classrooms_table.php`  
**Size:** 959 bytes  
**Modified:** 2025-12-07 05:33:11

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;
use Illuminate\Support\Facades\Auth;
return new class extends Migration
{
    public function up(): void
    {
        Schema::table('classrooms', function (Blueprint $table) {
            if (!Schema::hasColumn('classrooms', 'subject_id')) {
                $table->string('subject_id')->nullable()->after('subfield_id');

                $table->foreign('subject_id')
                    ->references('id')
                    ->on('subjects')
                    ->nullOnDelete();
            }
        });
    }

    public function down(): void
    {
        Schema::table('classrooms', function (Blueprint $table) {
            if (Schema::hasColumn('classrooms', 'subject_id')) {
                $table->dropForeign(['subject_id']);
                $table->dropColumn('subject_id');
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 220. 2025_12_07_065944_add_selected_role_to_users_table.php

**Path:** `database/migrations/2025_12_07_065944_add_selected_role_to_users_table.php`  
**Size:** 620 bytes  
**Modified:** 2025-12-07 07:59:52

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration {
    public function up(): void
    {
        Schema::table('users', function (Blueprint $table) {
            // ŸÜŸÇÿ¥ ÿßŸÜÿ™ÿÆÿßÿ®‚Äåÿ¥ÿØŸá ⁄©ÿßÿ±ÿ®ÿ± (admin / teacher / student)
            $table->string('selected_role', 30)->nullable()->after('status');
        });
    }

    public function down(): void
    {
        Schema::table('users', function (Blueprint $table) {
            $table->dropColumn('selected_role');
        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 221. 2025_12_07_132305_add_slug_to_grades_table.php

**Path:** `database/migrations/2025_12_07_132305_add_slug_to_grades_table.php`  
**Size:** 563 bytes  
**Modified:** 2025-12-07 14:24:14

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table('grades', function (Blueprint $table) {
            $table->string('slug', 100)->unique()->after('name_fa');
        });
    }

    public function down(): void
    {
        Schema::table('grades', function (Blueprint $table) {
            $table->dropUnique(['slug']);
            $table->dropColumn('slug');
        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 222. 2025_12_07_171520_add_slug_to_subjects_table.php

**Path:** `database/migrations/2025_12_07_171520_add_slug_to_subjects_table.php`  
**Size:** 723 bytes  
**Modified:** 2025-12-07 18:15:45

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table('subjects', function (Blueprint $table) {
            if (!Schema::hasColumn("subjects", "slug")) {
                $table->string("slug", 255)->after("title_fa")->unique();
            }
        });
    }

    public function down(): void
    {
        Schema::table('subjects', function (Blueprint $table) {
            if (Schema::hasColumn("subjects", "slug")) {
                $table->dropUnique(["slug"]);
                $table->dropColumn("slug");
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 223. 2025_12_07_171758_add_missing_columns_to_subjects_table.php

**Path:** `database/migrations/2025_12_07_171758_add_missing_columns_to_subjects_table.php`  
**Size:** 1,853 bytes  
**Modified:** 2025-12-07 18:18:07

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (!Schema::hasColumn("subjects", "slug")) {
                $table->string("slug", 255)->after("title_fa")->unique();
            }

            if (!Schema::hasColumn("subjects", "code")) {
                $table->string("code", 50)->nullable()->after("slug");
            }

            if (!Schema::hasColumn("subjects", "hours")) {
                $table->unsignedInteger("hours")->nullable()->default(0)->after("code");
            }

            if (!Schema::hasColumn("subjects", "sort_order")) {
                $table->unsignedInteger("sort_order")->nullable()->default(0)->after("hours");
            }

            if (!Schema::hasColumn("subjects", "is_active")) {
                $table->boolean("is_active")->default(1)->after("sort_order");
            }

        });
    }

    public function down(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (Schema::hasColumn("subjects", "is_active")) {
                $table->dropColumn("is_active");
            }

            if (Schema::hasColumn("subjects", "sort_order")) {
                $table->dropColumn("sort_order");
            }

            if (Schema::hasColumn("subjects", "hours")) {
                $table->dropColumn("hours");
            }

            if (Schema::hasColumn("subjects", "code")) {
                $table->dropColumn("code");
            }

            if (Schema::hasColumn("subjects", "slug")) {
                $table->dropUnique(["slug"]);
                $table->dropColumn("slug");
            }

        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 224. 2025_12_07_172215_add_section_and_sort_order_to_subjects_table.php

**Path:** `database/migrations/2025_12_07_172215_add_section_and_sort_order_to_subjects_table.php`  
**Size:** 1,127 bytes  
**Modified:** 2025-12-07 18:22:39

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (!Schema::hasColumn("subjects", "section_id")) {
                $table->char("section_id", 36)
                    ->after("hours")
                    ->index();
            }

            if (!Schema::hasColumn("subjects", "sort_order")) {
                $table->unsignedInteger("sort_order")
                    ->default(0)
                    ->after("description");
            }
        });
    }

    public function down(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (Schema::hasColumn("subjects", "sort_order")) {
                $table->dropColumn("sort_order");
            }

            if (Schema::hasColumn("subjects", "section_id")) {
                $table->dropIndex(["section_id"]);
                $table->dropColumn("section_id");
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 225. 2025_12_07_172408_add_section_id_to_subjects_table.php

**Path:** `database/migrations/2025_12_07_172408_add_section_id_to_subjects_table.php`  
**Size:** 789 bytes  
**Modified:** 2025-12-07 18:24:17

----------------------------------------------------------------------

<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (!Schema::hasColumn("subjects", "section_id")) {
                $table->char("section_id", 36)
                    ->after("hours")
                    ->index();
            }
        });
    }

    public function down(): void
    {
        Schema::table("subjects", function (Blueprint $table) {

            if (Schema::hasColumn("subjects", "section_id")) {
                $table->dropIndex(["section_id"]);
                $table->dropColumn("section_id");
            }
        });
    }
};

......................................................................

----------------------------------------------------------------------

## üìÑ 226. DatabaseSeeder.php

**Path:** `database/seeders/DatabaseSeeder.php`  
**Size:** 377 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        $this->call([
            RoleSeeder::class,          // ÿßŸàŸÑ ŸÜŸÇÿ¥‚ÄåŸáÿß
            TechUsageExamsSeeder::class,// ÿ®ÿπÿØ ÿØ€åÿ™ÿßŸáÿß€å Ÿàÿßÿ®ÿ≥ÿ™Ÿá
            // ÿ®ŸÇ€åŸá seeders ÿß⁄Øÿ± ÿØÿßÿ±€å
        ]);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 227. FakeStudentSeeder.php

**Path:** `database/seeders/FakeStudentSeeder.php`  
**Size:** 1,139 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\User;
use App\Models\Role;
use Illuminate\Support\Facades\Hash;

class FakeStudentSeeder extends Seeder
{
    public function run(): void
    {
        // ŸÜŸÇÿ¥ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤
        $studentRoleId = Role::where('slug', 'student')->value('id');

        // ÿß⁄Øÿ± ŸÜŸÇÿ¥ Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ¥ÿ™ÿå Seeder ÿ±Ÿà ÿÆÿ±ÿßÿ® ŸÜ⁄©ŸÜ
        if (! $studentRoleId) {
            $this->command?->warn("Role [student] not found. Run RoleSeeder first.");
            return;
        }

        // ÿ≥ÿßÿÆÿ™ ⁄ÜŸÜÿØ ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ŸÅ€å⁄©
        for ($i = 1; $i <= 20; $i++) {

            $user = User::updateOrCreate(
                ['phone' => '09' . rand(100000000, 999999999)],
                [
                    'name'     => "Fake Student {$i}",
                    'email'    => null,
                    'password' => Hash::make('12345678'),
                    'status'   => 'active',
                ]
            );

            // ÿßÿ™ÿµÿßŸÑ ŸÜŸÇÿ¥ ÿØÿ± pivot
            $user->roles()->syncWithoutDetaching([$studentRoleId]);
        }
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 228. RoleSeeder.php

**Path:** `database/seeders/RoleSeeder.php`  
**Size:** 561 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Role;

class RoleSeeder extends Seeder
{
    public function run(): void
    {
        $roles = [
            ['name' => 'admin', 'title' => 'ŸÖÿØ€åÿ± ÿ≥€åÿ≥ÿ™ŸÖ'],
            ['name' => 'teacher', 'title' => 'ŸÖÿπŸÑŸÖ'],
            ['name' => 'student', 'title' => 'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤'],
            ['name' => 'counselor', 'title' => 'ŸÖÿ¥ÿßŸàÿ±'],
        ];

        foreach ($roles as $r) {
            Role::firstOrCreate(['name' => $r['name']], $r);
        }
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 229. SubjectSeeder.php

**Path:** `database/seeders/SubjectSeeder.php`  
**Size:** 485 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Subject;

class SubjectSeeder extends Seeder
{
    public function run(): void
    {
        $items = [
            ['title' => 'ÿ±€åÿßÿ∂€å'],
            ['title' => 'ŸÅ€åÿ≤€å⁄©'],
            ['title' => 'ÿ¥€åŸÖ€å'],
            ['title' => 'ÿ≤€åÿ≥ÿ™'],
            ['title' => 'ÿßÿØÿ®€åÿßÿ™'],
        ];

        foreach ($items as $it) {
            Subject::firstOrCreate($it);
        }
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 230. TechUsageExamsSeeder.php

**Path:** `database/seeders/TechUsageExamsSeeder.php`  
**Size:** 1,405 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\User;
use App\Models\Role;
use Illuminate\Support\Facades\Hash;

class TechUsageExamsSeeder extends Seeder
{
    public function run(): void
    {
        // 1) ÿ≥ÿßÿÆÿ™ ŸÖÿπŸÑŸÖ
        $teacher = User::updateOrCreate(
            ['id' => '9111434434'],
            [
                'name' => 'Teacher 9111434434',
                'phone' => '09110000000',
                'email' => null,
                'password' => Hash::make('12345678'),
                'status' => 'active', // ‚úÖ ÿ®Ÿá ÿ¨ÿß€å is_active
            ]
        );

        // 2) ÿßÿ™ÿµÿßŸÑ ŸÜŸÇÿ¥ teacher
        $teacherRoleId = Role::where('slug', 'teacher')->value('id');
        if ($teacherRoleId) {
            $teacher->roles()->syncWithoutDetaching([$teacherRoleId]);
        }

        // ÿß⁄Øÿ± ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤ ŸáŸÖ ÿØÿßÿ±€å ŸáŸÖ€åŸÜ ÿßŸÑ⁄ØŸà
        /*
        $student = User::updateOrCreate(
            ['id' => '...'],
            [
                'name' => 'Student ...',
                'phone' => '09...',
                'password' => Hash::make('12345678'),
                'status' => 'active',
            ]
        );

        $studentRoleId = Role::where('slug', 'student')->value('id');
        if ($studentRoleId) {
            $student->roles()->syncWithoutDetaching([$studentRoleId]);
        }
        */
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 231. EnsureRoleSelected.php

**Path:** `app/Http/Middleware/EnsureRoleSelected.php`  
**Size:** 1,423 bytes  
**Modified:** 2025-12-08 16:33:02

----------------------------------------------------------------------

<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class EnsureRoleSelected
{
    /**
     * ÿß⁄Øÿ± ⁄©ÿßÿ±ÿ®ÿ± ŸÑÿß⁄Ø€åŸÜ ÿßÿ≥ÿ™ ŸàŸÑ€å ŸáŸÜŸàÿ≤ ŸÜŸÇÿ¥ ŸÇÿßÿ®ŸÑ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ŸÜÿØÿßÿ±ÿØÿå
     * ÿ®Ÿá ÿµŸÅÿ≠Ÿá ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥ (€åÿß landing) ŸáÿØÿß€åÿ™ ÿ¥ŸàÿØ.
     *
     * ŸÜŸÇÿ¥ ÿ¨ÿßÿ±€å ÿßÿ≤ ÿ≥Ÿá ŸÖŸÜÿ®ÿπ ŸÖŸÖ⁄©ŸÜ:
     * 1) selected_role ÿØÿ± "users"
     * 2) primaryRole ÿßÿ≤ pivot "role_user"
     * 3) status ÿ®Ÿá ÿπŸÜŸàÿßŸÜ fallback ŸÇÿØ€åŸÖ€å
     */
    public function handle(Request $request, Closure $next)
    {
        $user = Auth::user();

        // ÿß⁄Øÿ± ŸÖŸáŸÖÿßŸÜ ÿßÿ≥ÿ™ÿå ÿßÿ¨ÿßÿ≤Ÿá ÿπÿ®Ÿàÿ± ÿ®ÿØŸá
        if (!$user) {
            return $next($request);
        }

        $currentRole = $user->selected_role
            ?? $user->primaryRole()
            ?? $user->status;

        // ÿß⁄Øÿ± Ÿá€å⁄Ü ŸÜŸÇÿ¥€å ŸÜÿØÿßÿ±ÿØÿå ÿ®ŸÅÿ±ÿ≥ÿ™ ÿµŸÅÿ≠Ÿá ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥
        if (!$currentRole) {
            // ÿß⁄Øÿ± route ÿ±ÿ≥ŸÖ€å ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥ ÿØÿßÿ±€å
            if ($request->routeIs('role.select', 'role.set')) {
                return $next($request); // ÿ¨ŸÑŸà⁄Ø€åÿ±€å ÿßÿ≤ ŸÑŸàŸæ
            }

            return redirect()->route('role.select');
            // ÿß⁄Øÿ± route ÿßŸÜÿ™ÿÆÿßÿ® ŸÜŸÇÿ¥ ŸÜÿØÿßÿ±€å:
            // return redirect()->route('landing');
        }

        return $next($request);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 232. RoleMiddleware.php

**Path:** `app/Http/Middleware/RoleMiddleware.php`  
**Size:** 1,405 bytes  
**Modified:** 2025-12-08 16:48:57

----------------------------------------------------------------------

<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;

class RoleMiddleware
{
    public function handle(Request $request, Closure $next, ...$roles)
    {
        $user = Auth::user();
        if (!$user) {
            abort(401, 'Unauthenticated.');
        }

        $currentRole = $user->selected_role
            ?? $user->primaryRole()
            ?? $user->status;

        // ŸÜÿ±ŸÖÿßŸÑ‚Äåÿ≥ÿßÿ≤€å ÿ±ÿ¥ÿ™Ÿá
        $currentRole = is_string($currentRole)
            ? strtolower(trim($currentRole))
            : $currentRole;

        // ŸÖŸæ ÿ®ÿ±ÿß€å ÿ≠ÿßŸÑÿ™‚ÄåŸáÿß€å ÿ±ÿß€åÿ¨ name/ŸÅÿßÿ±ÿ≥€å/ÿ¨ŸÖÿπ
        $map = [
            'admin' => 'admin',
            'administrator' => 'admin',
            'ÿßÿØŸÖ€åŸÜ' => 'admin',

            'teacher' => 'teacher',
            'teachers' => 'teacher',
            'ŸÖÿπŸÑŸÖ' => 'teacher',

            'student' => 'student',
            'students' => 'student',
            'ÿØÿßŸÜÿ¥‚Äåÿ¢ŸÖŸàÿ≤' => 'student',

            'counselor' => 'counselor',
            'ŸÖÿ¥ÿßŸàÿ±' => 'counselor',
        ];

        $currentRole = $map[$currentRole] ?? $currentRole;

        if (!$currentRole || !in_array($currentRole, $roles, true)) {
            abort(403, 'ÿ¥ŸÖÿß ÿßÿ¨ÿßÿ≤Ÿá ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ÿß€åŸÜ ÿ®ÿÆÿ¥ ÿ±ÿß ŸÜÿØÿßÿ±€åÿØ.');
        }

        return $next($request);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 233. VerifyCsrfToken.php

**Path:** `app/Http/Middleware/VerifyCsrfToken.php`  
**Size:** 316 bytes  
**Modified:** 2025-12-06 08:55:56

----------------------------------------------------------------------

<?php

namespace App\Http\Middleware;

use Illuminate\Foundation\Http\Middleware\VerifyCsrfToken as Middleware;

class VerifyCsrfToken extends Middleware
{
    protected $except = [
        // ‚úÖ OTP ÿ®ÿ±ÿß€å ŸÖŸáŸÖÿßŸÜ‚ÄåŸáÿß ŸÜÿ®ÿß€åÿØ CSRF ÿ®ÿÆŸàÿßÿØ
        'auth/send-otp',
        'auth/verify-otp',
    ];
}

......................................................................

----------------------------------------------------------------------

## üìÑ 234. AppServiceProvider.php

**Path:** `app/Providers/AppServiceProvider.php`  
**Size:** 361 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Register any application services.
     */
    public function register(): void
    {
        //
    }

    /**
     * Bootstrap any application services.
     */
    public function boot(): void
    {
        //
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 235. app.js

**Path:** `resources/js/app.js`  
**Size:** 22 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

import './bootstrap';

......................................................................

----------------------------------------------------------------------

## üìÑ 236. bootstrap.js

**Path:** `resources/js/bootstrap.js`  
**Size:** 127 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

import axios from 'axios';
window.axios = axios;

window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

......................................................................

----------------------------------------------------------------------

## üìÑ 237. app.css

**Path:** `resources/css/app.css`  
**Size:** 390 bytes  
**Modified:** 2025-12-02 08:22:52

----------------------------------------------------------------------

@import 'tailwindcss';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@theme {
    --font-sans: 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
}

......................................................................

----------------------------------------------------------------------

## üìÑ 238. app.php

**Path:** `config/app.php`  
**Size:** 4,272 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Application Name
    |--------------------------------------------------------------------------
    |
    | This value is the name of your application, which will be used when the
    | framework needs to place the application's name in a notification or
    | other UI elements where an application name needs to be displayed.
    |
    */

    'name' => env('APP_NAME', 'Laravel'),

    /*
    |--------------------------------------------------------------------------
    | Application Environment
    |--------------------------------------------------------------------------
    |
    | This value determines the "environment" your application is currently
    | running in. This may determine how you prefer to configure various
    | services the application utilizes. Set this in your ".env" file.
    |
    */

    'env' => env('APP_ENV', 'production'),

    /*
    |--------------------------------------------------------------------------
    | Application Debug Mode
    |--------------------------------------------------------------------------
    |
    | When your application is in debug mode, detailed error messages with
    | stack traces will be shown on every error that occurs within your
    | application. If disabled, a simple generic error page is shown.
    |
    */

    'debug' => (bool) env('APP_DEBUG', false),

    /*
    |--------------------------------------------------------------------------
    | Application URL
    |--------------------------------------------------------------------------
    |
    | This URL is used by the console to properly generate URLs when using
    | the Artisan command line tool. You should set this to the root of
    | the application so that it's available within Artisan commands.
    |
    */

    'url' => env('APP_URL', 'http://localhost'),

    /*
    |--------------------------------------------------------------------------
    | Application Timezone
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default timezone for your application, which
    | will be used by the PHP date and date-time functions. The timezone
    | is set to "UTC" by default as it is suitable for most use cases.
    |
    */

    'timezone' => 'UTC',

    /*
    |--------------------------------------------------------------------------
    | Application Locale Configuration
    |--------------------------------------------------------------------------
    |
    | The application locale determines the default locale that will be used
    | by Laravel's translation / localization methods. This option can be
    | set to any locale for which you plan to have translation strings.
    |
    */

    'locale' => env('APP_LOCALE', 'en'),

    'fallback_locale' => env('APP_FALLBACK_LOCALE', 'en'),

    'faker_locale' => env('APP_FAKER_LOCALE', 'en_US'),

    /*
    |--------------------------------------------------------------------------
    | Encryption Key
    |--------------------------------------------------------------------------
    |
    | This key is utilized by Laravel's encryption services and should be set
    | to a random, 32 character string to ensure that all encrypted values
    | are secure. You should do this prior to deploying the application.
    |
    */

    'cipher' => 'AES-256-CBC',

    'key' => env('APP_KEY'),

    'previous_keys' => [
        ...array_filter(
            explode(',', (string) env('APP_PREVIOUS_KEYS', ''))
        ),
    ],

    /*
    |--------------------------------------------------------------------------
    | Maintenance Mode Driver
    |--------------------------------------------------------------------------
    |
    | These configuration options determine the driver used to determine and
    | manage Laravel's "maintenance mode" status. The "cache" driver will
    | allow maintenance mode to be controlled across multiple machines.
    |
    | Supported drivers: "file", "cache"
    |
    */

    'maintenance' => [
        'driver' => env('APP_MAINTENANCE_DRIVER', 'file'),
        'store' => env('APP_MAINTENANCE_STORE', 'database'),
    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 239. auth.php

**Path:** `config/auth.php`  
**Size:** 4,029 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Authentication Defaults
    |--------------------------------------------------------------------------
    |
    | This option defines the default authentication "guard" and password
    | reset "broker" for your application. You may change these values
    | as required, but they're a perfect start for most applications.
    |
    */

    'defaults' => [
        'guard' => env('AUTH_GUARD', 'web'),
        'passwords' => env('AUTH_PASSWORD_BROKER', 'users'),
    ],

    /*
    |--------------------------------------------------------------------------
    | Authentication Guards
    |--------------------------------------------------------------------------
    |
    | Next, you may define every authentication guard for your application.
    | Of course, a great default configuration has been defined for you
    | which utilizes session storage plus the Eloquent user provider.
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | Supported: "session"
    |
    */

    'guards' => [
        'web' => [
            'driver' => 'session',
            'provider' => 'users',
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | User Providers
    |--------------------------------------------------------------------------
    |
    | All authentication guards have a user provider, which defines how the
    | users are actually retrieved out of your database or other storage
    | system used by the application. Typically, Eloquent is utilized.
    |
    | If you have multiple user tables or models you may configure multiple
    | providers to represent the model / table. These providers may then
    | be assigned to any extra authentication guards you have defined.
    |
    | Supported: "database", "eloquent"
    |
    */

    'providers' => [
        'users' => [
            'driver' => 'eloquent',
            'model' => env('AUTH_MODEL', App\Models\User::class),
        ],

        // 'users' => [
        //     'driver' => 'database',
        //     'table' => 'users',
        // ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Resetting Passwords
    |--------------------------------------------------------------------------
    |
    | These configuration options specify the behavior of Laravel's password
    | reset functionality, including the table utilized for token storage
    | and the user provider that is invoked to actually retrieve users.
    |
    | The expiry time is the number of minutes that each reset token will be
    | considered valid. This security feature keeps tokens short-lived so
    | they have less time to be guessed. You may change this as needed.
    |
    | The throttle setting is the number of seconds a user must wait before
    | generating more password reset tokens. This prevents the user from
    | quickly generating a very large amount of password reset tokens.
    |
    */

    'passwords' => [
        'users' => [
            'provider' => 'users',
            'table' => env('AUTH_PASSWORD_RESET_TOKEN_TABLE', 'password_reset_tokens'),
            'expire' => 60,
            'throttle' => 60,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | Password Confirmation Timeout
    |--------------------------------------------------------------------------
    |
    | Here you may define the number of seconds before a password confirmation
    | window expires and users are asked to re-enter their password via the
    | confirmation screen. By default, the timeout lasts for three hours.
    |
    */

    'password_timeout' => env('AUTH_PASSWORD_TIMEOUT', 10800),

];

......................................................................

----------------------------------------------------------------------

## üìÑ 240. cache.php

**Path:** `config/cache.php`  
**Size:** 3,683 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Cache Store
    |--------------------------------------------------------------------------
    |
    | This option controls the default cache store that will be used by the
    | framework. This connection is utilized if another isn't explicitly
    | specified when running a cache operation inside the application.
    |
    */

    'default' => env('CACHE_STORE', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Cache Stores
    |--------------------------------------------------------------------------
    |
    | Here you may define all of the cache "stores" for your application as
    | well as their drivers. You may even define multiple stores for the
    | same cache driver to group types of items stored in your caches.
    |
    | Supported drivers: "array", "database", "file", "memcached",
    |                    "redis", "dynamodb", "octane",
    |                    "failover", "null"
    |
    */

    'stores' => [

        'array' => [
            'driver' => 'array',
            'serialize' => false,
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_CACHE_CONNECTION'),
            'table' => env('DB_CACHE_TABLE', 'cache'),
            'lock_connection' => env('DB_CACHE_LOCK_CONNECTION'),
            'lock_table' => env('DB_CACHE_LOCK_TABLE'),
        ],

        'file' => [
            'driver' => 'file',
            'path' => storage_path('framework/cache/data'),
            'lock_path' => storage_path('framework/cache/data'),
        ],

        'memcached' => [
            'driver' => 'memcached',
            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),
            'sasl' => [
                env('MEMCACHED_USERNAME'),
                env('MEMCACHED_PASSWORD'),
            ],
            'options' => [
                // Memcached::OPT_CONNECT_TIMEOUT => 2000,
            ],
            'servers' => [
                [
                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),
                    'port' => env('MEMCACHED_PORT', 11211),
                    'weight' => 100,
                ],
            ],
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_CACHE_CONNECTION', 'cache'),
            'lock_connection' => env('REDIS_CACHE_LOCK_CONNECTION', 'default'),
        ],

        'dynamodb' => [
            'driver' => 'dynamodb',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),
            'endpoint' => env('DYNAMODB_ENDPOINT'),
        ],

        'octane' => [
            'driver' => 'octane',
        ],

        'failover' => [
            'driver' => 'failover',
            'stores' => [
                'database',
                'array',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Cache Key Prefix
    |--------------------------------------------------------------------------
    |
    | When utilizing the APC, database, memcached, Redis, and DynamoDB cache
    | stores, there might be other applications using the same cache. For
    | that reason, you may prefix every cache key to avoid collisions.
    |
    */

    'prefix' => env('CACHE_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-cache-'),

];

......................................................................

----------------------------------------------------------------------

## üìÑ 241. database.php

**Path:** `config/database.php`  
**Size:** 6,850 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Database Connection Name
    |--------------------------------------------------------------------------
    |
    | Here you may specify which of the database connections below you wish
    | to use as your default connection for database operations. This is
    | the connection which will be utilized unless another connection
    | is explicitly specified when you execute a query / statement.
    |
    */

    'default' => env('DB_CONNECTION', 'sqlite'),

    /*
    |--------------------------------------------------------------------------
    | Database Connections
    |--------------------------------------------------------------------------
    |
    | Below are all of the database connections defined for your application.
    | An example configuration is provided for each database system which
    | is supported by Laravel. You're free to add / remove connections.
    |
    */

    'connections' => [

        'sqlite' => [
            'driver' => 'sqlite',
            'url' => env('DB_URL'),
            'database' => env('DB_DATABASE', database_path('database.sqlite')),
            'prefix' => '',
            'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
            'busy_timeout' => null,
            'journal_mode' => null,
            'synchronous' => null,
            'transaction_mode' => 'DEFERRED',
        ],

        'mysql' => [
            'driver' => 'mysql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'mariadb' => [
            'driver' => 'mariadb',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'unix_socket' => env('DB_SOCKET', ''),
            'charset' => env('DB_CHARSET', 'utf8mb4'),
            'collation' => env('DB_COLLATION', 'utf8mb4_unicode_ci'),
            'prefix' => '',
            'prefix_indexes' => true,
            'strict' => true,
            'engine' => null,
            'options' => extension_loaded('pdo_mysql') ? array_filter([
                PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
            ]) : [],
        ],

        'pgsql' => [
            'driver' => 'pgsql',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '5432'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            'search_path' => 'public',
            'sslmode' => 'prefer',
        ],

        'sqlsrv' => [
            'driver' => 'sqlsrv',
            'url' => env('DB_URL'),
            'host' => env('DB_HOST', 'localhost'),
            'port' => env('DB_PORT', '1433'),
            'database' => env('DB_DATABASE', 'laravel'),
            'username' => env('DB_USERNAME', 'root'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => env('DB_CHARSET', 'utf8'),
            'prefix' => '',
            'prefix_indexes' => true,
            // 'encrypt' => env('DB_ENCRYPT', 'yes'),
            // 'trust_server_certificate' => env('DB_TRUST_SERVER_CERTIFICATE', 'false'),
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Migration Repository Table
    |--------------------------------------------------------------------------
    |
    | This table keeps track of all the migrations that have already run for
    | your application. Using this information, we can determine which of
    | the migrations on disk haven't actually been run on the database.
    |
    */

    'migrations' => [
        'table' => 'migrations',
        'update_date_on_publish' => true,
    ],

    /*
    |--------------------------------------------------------------------------
    | Redis Databases
    |--------------------------------------------------------------------------
    |
    | Redis is an open source, fast, and advanced key-value store that also
    | provides a richer body of commands than a typical key-value system
    | such as Memcached. You may define your connection settings here.
    |
    */

    'redis' => [

        'client' => env('REDIS_CLIENT', 'phpredis'),

        'options' => [
            'cluster' => env('REDIS_CLUSTER', 'redis'),
            'prefix' => env('REDIS_PREFIX', Str::slug((string) env('APP_NAME', 'laravel')).'-database-'),
            'persistent' => env('REDIS_PERSISTENT', false),
        ],

        'default' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_DB', '0'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

        'cache' => [
            'url' => env('REDIS_URL'),
            'host' => env('REDIS_HOST', '127.0.0.1'),
            'username' => env('REDIS_USERNAME'),
            'password' => env('REDIS_PASSWORD'),
            'port' => env('REDIS_PORT', '6379'),
            'database' => env('REDIS_CACHE_DB', '1'),
            'max_retries' => env('REDIS_MAX_RETRIES', 3),
            'backoff_algorithm' => env('REDIS_BACKOFF_ALGORITHM', 'decorrelated_jitter'),
            'backoff_base' => env('REDIS_BACKOFF_BASE', 100),
            'backoff_cap' => env('REDIS_BACKOFF_CAP', 1000),
        ],

    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 242. filesystems.php

**Path:** `config/filesystems.php`  
**Size:** 2,500 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Filesystem Disk
    |--------------------------------------------------------------------------
    |
    | Here you may specify the default filesystem disk that should be used
    | by the framework. The "local" disk, as well as a variety of cloud
    | based disks are available to your application for file storage.
    |
    */

    'default' => env('FILESYSTEM_DISK', 'local'),

    /*
    |--------------------------------------------------------------------------
    | Filesystem Disks
    |--------------------------------------------------------------------------
    |
    | Below you may configure as many filesystem disks as necessary, and you
    | may even configure multiple disks for the same driver. Examples for
    | most supported storage drivers are configured here for reference.
    |
    | Supported drivers: "local", "ftp", "sftp", "s3"
    |
    */

    'disks' => [

        'local' => [
            'driver' => 'local',
            'root' => storage_path('app/private'),
            'serve' => true,
            'throw' => false,
            'report' => false,
        ],

        'public' => [
            'driver' => 'local',
            'root' => storage_path('app/public'),
            'url' => env('APP_URL').'/storage',
            'visibility' => 'public',
            'throw' => false,
            'report' => false,
        ],

        's3' => [
            'driver' => 's3',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'region' => env('AWS_DEFAULT_REGION'),
            'bucket' => env('AWS_BUCKET'),
            'url' => env('AWS_URL'),
            'endpoint' => env('AWS_ENDPOINT'),
            'use_path_style_endpoint' => env('AWS_USE_PATH_STYLE_ENDPOINT', false),
            'throw' => false,
            'report' => false,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Symbolic Links
    |--------------------------------------------------------------------------
    |
    | Here you may configure the symbolic links that will be created when the
    | `storage:link` Artisan command is executed. The array keys should be
    | the locations of the links and the values should be their targets.
    |
    */

    'links' => [
        public_path('storage') => storage_path('app/public'),
    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 243. logging.php

**Path:** `config/logging.php`  
**Size:** 4,327 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Monolog\Handler\NullHandler;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\SyslogUdpHandler;
use Monolog\Processor\PsrLogMessageProcessor;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Log Channel
    |--------------------------------------------------------------------------
    |
    | This option defines the default log channel that is utilized to write
    | messages to your logs. The value provided here should match one of
    | the channels present in the list of "channels" configured below.
    |
    */

    'default' => env('LOG_CHANNEL', 'stack'),

    /*
    |--------------------------------------------------------------------------
    | Deprecations Log Channel
    |--------------------------------------------------------------------------
    |
    | This option controls the log channel that should be used to log warnings
    | regarding deprecated PHP and library features. This allows you to get
    | your application ready for upcoming major versions of dependencies.
    |
    */

    'deprecations' => [
        'channel' => env('LOG_DEPRECATIONS_CHANNEL', 'null'),
        'trace' => env('LOG_DEPRECATIONS_TRACE', false),
    ],

    /*
    |--------------------------------------------------------------------------
    | Log Channels
    |--------------------------------------------------------------------------
    |
    | Here you may configure the log channels for your application. Laravel
    | utilizes the Monolog PHP logging library, which includes a variety
    | of powerful log handlers and formatters that you're free to use.
    |
    | Available drivers: "single", "daily", "slack", "syslog",
    |                    "errorlog", "monolog", "custom", "stack"
    |
    */

    'channels' => [

        'stack' => [
            'driver' => 'stack',
            'channels' => explode(',', (string) env('LOG_STACK', 'single')),
            'ignore_exceptions' => false,
        ],

        'single' => [
            'driver' => 'single',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'daily' => [
            'driver' => 'daily',
            'path' => storage_path('logs/laravel.log'),
            'level' => env('LOG_LEVEL', 'debug'),
            'days' => env('LOG_DAILY_DAYS', 14),
            'replace_placeholders' => true,
        ],

        'slack' => [
            'driver' => 'slack',
            'url' => env('LOG_SLACK_WEBHOOK_URL'),
            'username' => env('LOG_SLACK_USERNAME', 'Laravel Log'),
            'emoji' => env('LOG_SLACK_EMOJI', ':boom:'),
            'level' => env('LOG_LEVEL', 'critical'),
            'replace_placeholders' => true,
        ],

        'papertrail' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => env('LOG_PAPERTRAIL_HANDLER', SyslogUdpHandler::class),
            'handler_with' => [
                'host' => env('PAPERTRAIL_URL'),
                'port' => env('PAPERTRAIL_PORT'),
                'connectionString' => 'tls://'.env('PAPERTRAIL_URL').':'.env('PAPERTRAIL_PORT'),
            ],
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'stderr' => [
            'driver' => 'monolog',
            'level' => env('LOG_LEVEL', 'debug'),
            'handler' => StreamHandler::class,
            'handler_with' => [
                'stream' => 'php://stderr',
            ],
            'formatter' => env('LOG_STDERR_FORMATTER'),
            'processors' => [PsrLogMessageProcessor::class],
        ],

        'syslog' => [
            'driver' => 'syslog',
            'level' => env('LOG_LEVEL', 'debug'),
            'facility' => env('LOG_SYSLOG_FACILITY', LOG_USER),
            'replace_placeholders' => true,
        ],

        'errorlog' => [
            'driver' => 'errorlog',
            'level' => env('LOG_LEVEL', 'debug'),
            'replace_placeholders' => true,
        ],

        'null' => [
            'driver' => 'monolog',
            'handler' => NullHandler::class,
        ],

        'emergency' => [
            'path' => storage_path('logs/laravel.log'),
        ],

    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 244. mail.php

**Path:** `config/mail.php`  
**Size:** 3,614 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Mailer
    |--------------------------------------------------------------------------
    |
    | This option controls the default mailer that is used to send all email
    | messages unless another mailer is explicitly specified when sending
    | the message. All additional mailers can be configured within the
    | "mailers" array. Examples of each type of mailer are provided.
    |
    */

    'default' => env('MAIL_MAILER', 'log'),

    /*
    |--------------------------------------------------------------------------
    | Mailer Configurations
    |--------------------------------------------------------------------------
    |
    | Here you may configure all of the mailers used by your application plus
    | their respective settings. Several examples have been configured for
    | you and you are free to add your own as your application requires.
    |
    | Laravel supports a variety of mail "transport" drivers that can be used
    | when delivering an email. You may specify which one you're using for
    | your mailers below. You may also add additional mailers if needed.
    |
    | Supported: "smtp", "sendmail", "mailgun", "ses", "ses-v2",
    |            "postmark", "resend", "log", "array",
    |            "failover", "roundrobin"
    |
    */

    'mailers' => [

        'smtp' => [
            'transport' => 'smtp',
            'scheme' => env('MAIL_SCHEME'),
            'url' => env('MAIL_URL'),
            'host' => env('MAIL_HOST', '127.0.0.1'),
            'port' => env('MAIL_PORT', 2525),
            'username' => env('MAIL_USERNAME'),
            'password' => env('MAIL_PASSWORD'),
            'timeout' => null,
            'local_domain' => env('MAIL_EHLO_DOMAIN', parse_url((string) env('APP_URL', 'http://localhost'), PHP_URL_HOST)),
        ],

        'ses' => [
            'transport' => 'ses',
        ],

        'postmark' => [
            'transport' => 'postmark',
            // 'message_stream_id' => env('POSTMARK_MESSAGE_STREAM_ID'),
            // 'client' => [
            //     'timeout' => 5,
            // ],
        ],

        'resend' => [
            'transport' => 'resend',
        ],

        'sendmail' => [
            'transport' => 'sendmail',
            'path' => env('MAIL_SENDMAIL_PATH', '/usr/sbin/sendmail -bs -i'),
        ],

        'log' => [
            'transport' => 'log',
            'channel' => env('MAIL_LOG_CHANNEL'),
        ],

        'array' => [
            'transport' => 'array',
        ],

        'failover' => [
            'transport' => 'failover',
            'mailers' => [
                'smtp',
                'log',
            ],
            'retry_after' => 60,
        ],

        'roundrobin' => [
            'transport' => 'roundrobin',
            'mailers' => [
                'ses',
                'postmark',
            ],
            'retry_after' => 60,
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Global "From" Address
    |--------------------------------------------------------------------------
    |
    | You may wish for all emails sent by your application to be sent from
    | the same address. Here you may specify a name and address that is
    | used globally for all emails that are sent by your application.
    |
    */

    'from' => [
        'address' => env('MAIL_FROM_ADDRESS', 'hello@example.com'),
        'name' => env('MAIL_FROM_NAME', 'Example'),
    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 245. otp.php

**Path:** `config/otp.php`  
**Size:** 104 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [
    'debug'  => env('OTP_DEBUG', true),
    'sender' => env('KAVENEGAR_SENDER', ''),
];

......................................................................

----------------------------------------------------------------------

## üìÑ 246. queue.php

**Path:** `config/queue.php`  
**Size:** 4,199 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Default Queue Connection Name
    |--------------------------------------------------------------------------
    |
    | Laravel's queue supports a variety of backends via a single, unified
    | API, giving you convenient access to each backend using identical
    | syntax for each. The default queue connection is defined below.
    |
    */

    'default' => env('QUEUE_CONNECTION', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Queue Connections
    |--------------------------------------------------------------------------
    |
    | Here you may configure the connection options for every queue backend
    | used by your application. An example configuration is provided for
    | each backend supported by Laravel. You're also free to add more.
    |
    | Drivers: "sync", "database", "beanstalkd", "sqs", "redis",
    |          "deferred", "background", "failover", "null"
    |
    */

    'connections' => [

        'sync' => [
            'driver' => 'sync',
        ],

        'database' => [
            'driver' => 'database',
            'connection' => env('DB_QUEUE_CONNECTION'),
            'table' => env('DB_QUEUE_TABLE', 'jobs'),
            'queue' => env('DB_QUEUE', 'default'),
            'retry_after' => (int) env('DB_QUEUE_RETRY_AFTER', 90),
            'after_commit' => false,
        ],

        'beanstalkd' => [
            'driver' => 'beanstalkd',
            'host' => env('BEANSTALKD_QUEUE_HOST', 'localhost'),
            'queue' => env('BEANSTALKD_QUEUE', 'default'),
            'retry_after' => (int) env('BEANSTALKD_QUEUE_RETRY_AFTER', 90),
            'block_for' => 0,
            'after_commit' => false,
        ],

        'sqs' => [
            'driver' => 'sqs',
            'key' => env('AWS_ACCESS_KEY_ID'),
            'secret' => env('AWS_SECRET_ACCESS_KEY'),
            'prefix' => env('SQS_PREFIX', 'https://sqs.us-east-1.amazonaws.com/your-account-id'),
            'queue' => env('SQS_QUEUE', 'default'),
            'suffix' => env('SQS_SUFFIX'),
            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
            'after_commit' => false,
        ],

        'redis' => [
            'driver' => 'redis',
            'connection' => env('REDIS_QUEUE_CONNECTION', 'default'),
            'queue' => env('REDIS_QUEUE', 'default'),
            'retry_after' => (int) env('REDIS_QUEUE_RETRY_AFTER', 90),
            'block_for' => null,
            'after_commit' => false,
        ],

        'deferred' => [
            'driver' => 'deferred',
        ],

        'background' => [
            'driver' => 'background',
        ],

        'failover' => [
            'driver' => 'failover',
            'connections' => [
                'database',
                'deferred',
            ],
        ],

    ],

    /*
    |--------------------------------------------------------------------------
    | Job Batching
    |--------------------------------------------------------------------------
    |
    | The following options configure the database and table that store job
    | batching information. These options can be updated to any database
    | connection and table which has been defined by your application.
    |
    */

    'batching' => [
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'job_batches',
    ],

    /*
    |--------------------------------------------------------------------------
    | Failed Queue Jobs
    |--------------------------------------------------------------------------
    |
    | These options configure the behavior of failed queue job logging so you
    | can control how and where failed jobs are stored. Laravel ships with
    | support for storing failed jobs in a simple file or in a database.
    |
    | Supported drivers: "database-uuids", "dynamodb", "file", "null"
    |
    */

    'failed' => [
        'driver' => env('QUEUE_FAILED_DRIVER', 'database-uuids'),
        'database' => env('DB_CONNECTION', 'sqlite'),
        'table' => 'failed_jobs',
    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 247. services.php

**Path:** `config/services.php`  
**Size:** 1,039 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

return [

    /*
    |--------------------------------------------------------------------------
    | Third Party Services
    |--------------------------------------------------------------------------
    |
    | This file is for storing the credentials for third party services such
    | as Mailgun, Postmark, AWS and more. This file provides the de facto
    | location for this type of information, allowing packages to have
    | a conventional file to locate the various service credentials.
    |
    */

    'postmark' => [
        'key' => env('POSTMARK_API_KEY'),
    ],

    'resend' => [
        'key' => env('RESEND_API_KEY'),
    ],

    'ses' => [
        'key' => env('AWS_ACCESS_KEY_ID'),
        'secret' => env('AWS_SECRET_ACCESS_KEY'),
        'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),
    ],

    'slack' => [
        'notifications' => [
            'bot_user_oauth_token' => env('SLACK_BOT_USER_OAUTH_TOKEN'),
            'channel' => env('SLACK_BOT_USER_DEFAULT_CHANNEL'),
        ],
    ],

];

......................................................................

----------------------------------------------------------------------

## üìÑ 248. session.php

**Path:** `config/session.php`  
**Size:** 7,848 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

use Illuminate\Support\Str;

return [

    /*
    |--------------------------------------------------------------------------
    | Default Session Driver
    |--------------------------------------------------------------------------
    |
    | This option determines the default session driver that is utilized for
    | incoming requests. Laravel supports a variety of storage options to
    | persist session data. Database storage is a great default choice.
    |
    | Supported: "file", "cookie", "database", "memcached",
    |            "redis", "dynamodb", "array"
    |
    */

    'driver' => env('SESSION_DRIVER', 'database'),

    /*
    |--------------------------------------------------------------------------
    | Session Lifetime
    |--------------------------------------------------------------------------
    |
    | Here you may specify the number of minutes that you wish the session
    | to be allowed to remain idle before it expires. If you want them
    | to expire immediately when the browser is closed then you may
    | indicate that via the expire_on_close configuration option.
    |
    */

    'lifetime' => (int) env('SESSION_LIFETIME', 120),

    'expire_on_close' => env('SESSION_EXPIRE_ON_CLOSE', false),

    /*
    |--------------------------------------------------------------------------
    | Session Encryption
    |--------------------------------------------------------------------------
    |
    | This option allows you to easily specify that all of your session data
    | should be encrypted before it's stored. All encryption is performed
    | automatically by Laravel and you may use the session like normal.
    |
    */

    'encrypt' => env('SESSION_ENCRYPT', false),

    /*
    |--------------------------------------------------------------------------
    | Session File Location
    |--------------------------------------------------------------------------
    |
    | When utilizing the "file" session driver, the session files are placed
    | on disk. The default storage location is defined here; however, you
    | are free to provide another location where they should be stored.
    |
    */

    'files' => storage_path('framework/sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Connection
    |--------------------------------------------------------------------------
    |
    | When using the "database" or "redis" session drivers, you may specify a
    | connection that should be used to manage these sessions. This should
    | correspond to a connection in your database configuration options.
    |
    */

    'connection' => env('SESSION_CONNECTION'),

    /*
    |--------------------------------------------------------------------------
    | Session Database Table
    |--------------------------------------------------------------------------
    |
    | When using the "database" session driver, you may specify the table to
    | be used to store sessions. Of course, a sensible default is defined
    | for you; however, you're welcome to change this to another table.
    |
    */

    'table' => env('SESSION_TABLE', 'sessions'),

    /*
    |--------------------------------------------------------------------------
    | Session Cache Store
    |--------------------------------------------------------------------------
    |
    | When using one of the framework's cache driven session backends, you may
    | define the cache store which should be used to store the session data
    | between requests. This must match one of your defined cache stores.
    |
    | Affects: "dynamodb", "memcached", "redis"
    |
    */

    'store' => env('SESSION_STORE'),

    /*
    |--------------------------------------------------------------------------
    | Session Sweeping Lottery
    |--------------------------------------------------------------------------
    |
    | Some session drivers must manually sweep their storage location to get
    | rid of old sessions from storage. Here are the chances that it will
    | happen on a given request. By default, the odds are 2 out of 100.
    |
    */

    'lottery' => [2, 100],

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Name
    |--------------------------------------------------------------------------
    |
    | Here you may change the name of the session cookie that is created by
    | the framework. Typically, you should not need to change this value
    | since doing so does not grant a meaningful security improvement.
    |
    */

    'cookie' => env(
        'SESSION_COOKIE',
        Str::slug((string) env('APP_NAME', 'laravel')).'-session'
    ),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Path
    |--------------------------------------------------------------------------
    |
    | The session cookie path determines the path for which the cookie will
    | be regarded as available. Typically, this will be the root path of
    | your application, but you're free to change this when necessary.
    |
    */

    'path' => env('SESSION_PATH', '/'),

    /*
    |--------------------------------------------------------------------------
    | Session Cookie Domain
    |--------------------------------------------------------------------------
    |
    | This value determines the domain and subdomains the session cookie is
    | available to. By default, the cookie will be available to the root
    | domain and all subdomains. Typically, this shouldn't be changed.
    |
    */

    'domain' => env('SESSION_DOMAIN'),

    /*
    |--------------------------------------------------------------------------
    | HTTPS Only Cookies
    |--------------------------------------------------------------------------
    |
    | By setting this option to true, session cookies will only be sent back
    | to the server if the browser has a HTTPS connection. This will keep
    | the cookie from being sent to you when it can't be done securely.
    |
    */

    'secure' => env('SESSION_SECURE_COOKIE'),

    /*
    |--------------------------------------------------------------------------
    | HTTP Access Only
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will prevent JavaScript from accessing the
    | value of the cookie and the cookie will only be accessible through
    | the HTTP protocol. It's unlikely you should disable this option.
    |
    */

    'http_only' => env('SESSION_HTTP_ONLY', true),

    /*
    |--------------------------------------------------------------------------
    | Same-Site Cookies
    |--------------------------------------------------------------------------
    |
    | This option determines how your cookies behave when cross-site requests
    | take place, and can be used to mitigate CSRF attacks. By default, we
    | will set this value to "lax" to permit secure cross-site requests.
    |
    | See: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#samesitesamesite-value
    |
    | Supported: "lax", "strict", "none", null
    |
    */

    'same_site' => env('SESSION_SAME_SITE', 'lax'),

    /*
    |--------------------------------------------------------------------------
    | Partitioned Cookies
    |--------------------------------------------------------------------------
    |
    | Setting this value to true will tie the cookie to the top-level site for
    | a cross-site context. Partitioned cookies are accepted by the browser
    | when flagged "secure" and the Same-Site attribute is set to "none".
    |
    */

    'partitioned' => env('SESSION_PARTITIONED_COOKIE', false),

];

......................................................................

----------------------------------------------------------------------

## üìÑ 249. ExampleTest.php

**Path:** `tests/Feature/ExampleTest.php`  
**Size:** 359 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Tests\Feature;

// use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_the_application_returns_a_successful_response(): void
    {
        $response = $this->get('/');

        $response->assertStatus(200);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 250. TestCase.php

**Path:** `tests/TestCase.php`  
**Size:** 142 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Tests;

use Illuminate\Foundation\Testing\TestCase as BaseTestCase;

abstract class TestCase extends BaseTestCase
{
    //
}

......................................................................

----------------------------------------------------------------------

## üìÑ 251. ExampleTest.php

**Path:** `tests/Unit/ExampleTest.php`  
**Size:** 243 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;

class ExampleTest extends TestCase
{
    /**
     * A basic test example.
     */
    public function test_that_true_is_true(): void
    {
        $this->assertTrue(true);
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 252. .env.example

**Path:** `.env.example`  
**Size:** 1,086 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

APP_NAME=Laravel
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=database

CACHE_STORE=database
# CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

VITE_APP_NAME="${APP_NAME}"

......................................................................

----------------------------------------------------------------------

## üìÑ 253. README.md

**Path:** `README.md`  
**Size:** 309 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

# smart-edu

Smart Education System built with Laravel 12, Bootstrap 5 and MySQL.

## Documentation

-   [Student Flow & Scenario](docs/student-flow.md)
-   [Teacher Flow & Scenario](docs/teacher-flow.md)
-   [Admin Flow & Scenario](docs/admin-flow.md)
-   [Counselor Flow & Scenario](docs/counselor-flow.md)

......................................................................

----------------------------------------------------------------------

## üìÑ 254. artisan

**Path:** `artisan`  
**Size:** 425 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

#!/usr/bin/env php
<?php

use Illuminate\Foundation\Application;
use Symfony\Component\Console\Input\ArgvInput;

define('LARAVEL_START', microtime(true));

// Register the Composer autoloader...
require __DIR__.'/vendor/autoload.php';

// Bootstrap Laravel and handle the command...
/** @var Application $app */
$app = require_once __DIR__.'/bootstrap/app.php';

$status = $app->handleCommand(new ArgvInput);

exit($status);

......................................................................

----------------------------------------------------------------------

## üìÑ 255. composer.json

**Path:** `composer.json`  
**Size:** 3,025 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

{
    "$schema": "https://getcomposer.org/schema.json",
    "name": "laravel/laravel",
    "type": "project",
    "description": "The skeleton application for the Laravel framework.",
    "keywords": ["laravel", "framework"],
    "license": "MIT",
    "require": {
        "php": "^8.2",
        "doctrine/dbal": "^4.4",
        "hekmatinasser/verta": "^8.5",
        "kavenegar/laravel": "^1.3",
        "laravel/framework": "^12.0",
        "laravel/tinker": "^2.10.1",
        "morilog/jalali": "^3.4",
        "spatie/laravel-permission": "^6.23"
    },
    "require-dev": {
        "fakerphp/faker": "^1.23",
        "laravel/pail": "^1.2.2",
        "laravel/pint": "^1.24",
        "laravel/sail": "^1.41",
        "mockery/mockery": "^1.6",
        "nunomaduro/collision": "^8.6",
        "phpunit/phpunit": "^11.5.3"
    },
    "autoload": {
        "psr-4": {
            "App\\": "app/",
            "Database\\Factories\\": "database/factories/",
            "Database\\Seeders\\": "database/seeders/"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "Tests\\": "tests/"
        }
    },
    "scripts": {
        "setup": [
            "composer install",
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\"",
            "@php artisan key:generate",
            "@php artisan migrate --force",
            "npm install",
            "npm run build"
        ],
        "dev": [
            "Composer\\Config::disableProcessTimeout",
            "npx concurrently -c \"#93c5fd,#c4b5fd,#fb7185,#fdba74\" \"php artisan serve\" \"php artisan queue:listen --tries=1\" \"php artisan pail --timeout=0\" \"npm run dev\" --names=server,queue,logs,vite --kill-others"
        ],
        "test": [
            "@php artisan config:clear --ansi",
            "@php artisan test"
        ],
        "post-autoload-dump": [
            "Illuminate\\Foundation\\ComposerScripts::postAutoloadDump",
            "@php artisan package:discover --ansi"
        ],
        "post-update-cmd": [
            "@php artisan vendor:publish --tag=laravel-assets --ansi --force"
        ],
        "post-root-package-install": [
            "@php -r \"file_exists('.env') || copy('.env.example', '.env');\""
        ],
        "post-create-project-cmd": [
            "@php artisan key:generate --ansi",
            "@php -r \"file_exists('database/database.sqlite') || touch('database/database.sqlite');\"",
            "@php artisan migrate --graceful --ansi"
        ],
        "pre-package-uninstall": [
            "Illuminate\\Foundation\\ComposerScripts::prePackageUninstall"
        ]
    },
    "extra": {
        "laravel": {
            "dont-discover": []
        }
    },
    "config": {
        "optimize-autoloader": true,
        "preferred-install": "dist",
        "sort-packages": true,
        "allow-plugins": {
            "pestphp/pest-plugin": true,
            "php-http/discovery": true
        }
    },
    "minimum-stability": "stable",
    "prefer-stable": true
}

......................................................................

----------------------------------------------------------------------

## üìÑ 256. package.json

**Path:** `package.json`  
**Size:** 414 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

{
    "$schema": "https://www.schemastore.org/package.json",
    "private": true,
    "type": "module",
    "scripts": {
        "build": "vite build",
        "dev": "vite"
    },
    "devDependencies": {
        "@tailwindcss/vite": "^4.0.0",
        "axios": "^1.11.0",
        "concurrently": "^9.0.1",
        "laravel-vite-plugin": "^2.0.0",
        "tailwindcss": "^4.0.0",
        "vite": "^7.0.7"
    }
}

......................................................................

----------------------------------------------------------------------

## üìÑ 257. phpunit.xml

**Path:** `phpunit.xml`  
**Size:** 1,284 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="vendor/phpunit/phpunit/phpunit.xsd"
         bootstrap="vendor/autoload.php"
         colors="true"
>
    <testsuites>
        <testsuite name="Unit">
            <directory>tests/Unit</directory>
        </testsuite>
        <testsuite name="Feature">
            <directory>tests/Feature</directory>
        </testsuite>
    </testsuites>
    <source>
        <include>
            <directory>app</directory>
        </include>
    </source>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="APP_MAINTENANCE_DRIVER" value="file"/>
        <env name="BCRYPT_ROUNDS" value="4"/>
        <env name="BROADCAST_CONNECTION" value="null"/>
        <env name="CACHE_STORE" value="array"/>
        <env name="DB_CONNECTION" value="sqlite"/>
        <env name="DB_DATABASE" value=":memory:"/>
        <env name="MAIL_MAILER" value="array"/>
        <env name="QUEUE_CONNECTION" value="sync"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="PULSE_ENABLED" value="false"/>
        <env name="TELESCOPE_ENABLED" value="false"/>
        <env name="NIGHTWATCH_ENABLED" value="false"/>
    </php>
</phpunit>

......................................................................

----------------------------------------------------------------------

## üìÑ 258. vite.config.js

**Path:** `vite.config.js`  
**Size:** 331 bytes  
**Modified:** 2025-12-07 11:04:28

----------------------------------------------------------------------

import { defineConfig } from 'vite';
import laravel from 'laravel-vite-plugin';
import tailwindcss from '@tailwindcss/vite';

export default defineConfig({
    plugins: [
        laravel({
            input: ['resources/css/app.css', 'resources/js/app.js'],
            refresh: true,
        }),
        tailwindcss(),
    ],
});

......................................................................

---
üìä REPORT SUMMARY
------------------------------
Total files in list: 258
Successfully processed: 255
Not found: 3
Generated on: 2025-12-08 21:09:30
---

